/*! aliLoaction */
!function(t){function e(t){delete installedChunks[t]}function n(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=b.p+""+t+"."+y+".hot-update.js",e.appendChild(n)}function l(t){return t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var l=new XMLHttpRequest,i=b.p+""+y+".hot-update.json";l.open("GET",i,!0),l.timeout=t,l.send(null)}catch(t){return n(t)}l.onreadystatechange=function(){if(4===l.readyState)if(0===l.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===l.status)e();else if(200!==l.status&&304!==l.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(l.responseText)}catch(t){return void n(t)}e(t)}}})}function i(t){var e=C[t];if(!e)return b;var n=function(n){return e.hot.active?(C[n]?C[n].parents.indexOf(t)<0&&C[n].parents.push(t):(x=[t],h=n),e.children.indexOf(n)<0&&e.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+t),x=[]),b(n)};for(var l in b)Object.prototype.hasOwnProperty.call(b,l)&&"e"!==l&&Object.defineProperty(n,l,function(t){return{configurable:!0,enumerable:!0,get:function(){return b[t]},set:function(e){b[t]=e}}}(l));return n.e=function(t){function e(){f--,"prepare"===Y&&(S[t]||o(t),0===f&&0===v&&m())}return"ready"===Y&&d("prepare"),f++,b.e(t).then(e,function(t){throw e(),t})},n}function a(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:h!==t,active:!0,accept:function(t,n){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var l=0;l<t.length;l++)e._acceptedDependencies[t[l]]=n||function(){};else e._acceptedDependencies[t]=n||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._declinedDependencies[t[n]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var n=e._disposeHandlers.indexOf(t);n>=0&&e._disposeHandlers.splice(n,1)},check:s,apply:r,status:function(t){if(!t)return Y;L.push(t)},addStatusHandler:function(t){L.push(t)},removeStatusHandler:function(t){var e=L.indexOf(t);e>=0&&L.splice(e,1)},data:R[t]};return h=void 0,e}function d(t){Y=t;for(var e=0;e<L.length;e++)L[e].call(null,t)}function c(t){return+t+""===t?+t:t}function s(t){if("idle"!==Y)throw new Error("check() is only allowed in idle status");return W=t,d("check"),l(V).then(function(t){if(!t)return d("idle"),null;I={},S={},F=t.c,G=t.h,d("prepare");var e=new Promise(function(t,e){p={resolve:t,reject:e}});X={};return o(1),"prepare"===Y&&0===f&&0===v&&m(),e})}function u(t,e){if(F[t]&&I[t]){I[t]=!1;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(X[n]=e[n]);0==--v&&0===f&&m()}}function o(t){F[t]?(I[t]=!0,v++,n(t)):S[t]=!0}function m(){d("ready");var t=p;if(p=null,t)if(W)Promise.resolve().then(function(){return r(W)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var n in X)Object.prototype.hasOwnProperty.call(X,n)&&e.push(c(n));t.resolve(e)}}function r(n){function l(t,e){for(var n=0;n<e.length;n++){var l=e[n];t.indexOf(l)<0&&t.push(l)}}if("ready"!==Y)throw new Error("apply() is only allowed in ready status");n=n||{};var i,a,s,u,o,m={},r=[],Z={},h=function(){console.warn("[HMR] unexpected require("+W.moduleId+") to disposed module")};for(var p in X)if(Object.prototype.hasOwnProperty.call(X,p)){o=c(p);var W;W=X[p]?function(t){for(var e=[t],n={},i=e.slice().map(function(t){return{chain:[t],id:t}});i.length>0;){var a=i.pop(),d=a.id,c=a.chain;if((u=C[d])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:d};if(u.hot._main)return{type:"unaccepted",chain:c,moduleId:d};for(var s=0;s<u.parents.length;s++){var o=u.parents[s],m=C[o];if(m){if(m.hot._declinedDependencies[d])return{type:"declined",chain:c.concat([o]),moduleId:d,parentId:o};e.indexOf(o)>=0||(m.hot._acceptedDependencies[d]?(n[o]||(n[o]=[]),l(n[o],[d])):(delete n[o],e.push(o),i.push({chain:c.concat([o]),id:o})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}(o):{type:"disposed",moduleId:p};var V=!1,g=!1,L=!1,v="";switch(W.chain&&(v="\nUpdate propagation: "+W.chain.join(" -> ")),W.type){case"self-declined":n.onDeclined&&n.onDeclined(W),n.ignoreDeclined||(V=new Error("Aborted because of self decline: "+W.moduleId+v));break;case"declined":n.onDeclined&&n.onDeclined(W),n.ignoreDeclined||(V=new Error("Aborted because of declined dependency: "+W.moduleId+" in "+W.parentId+v));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(W),n.ignoreUnaccepted||(V=new Error("Aborted because "+o+" is not accepted"+v));break;case"accepted":n.onAccepted&&n.onAccepted(W),g=!0;break;case"disposed":n.onDisposed&&n.onDisposed(W),L=!0;break;default:throw new Error("Unexception type "+W.type)}if(V)return d("abort"),Promise.reject(V);if(g){Z[o]=X[o],l(r,W.outdatedModules);for(o in W.outdatedDependencies)Object.prototype.hasOwnProperty.call(W.outdatedDependencies,o)&&(m[o]||(m[o]=[]),l(m[o],W.outdatedDependencies[o]))}L&&(l(r,[W.moduleId]),Z[o]=h)}var f=[];for(a=0;a<r.length;a++)o=r[a],C[o]&&C[o].hot._selfAccepted&&f.push({module:o,errorHandler:C[o].hot._selfAccepted});d("dispose"),Object.keys(F).forEach(function(t){!1===F[t]&&e(t)});for(var S,I=r.slice();I.length>0;)if(o=I.pop(),u=C[o]){var H={},K=u.hot._disposeHandlers;for(s=0;s<K.length;s++)(i=K[s])(H);for(R[o]=H,u.hot.active=!1,delete C[o],delete m[o],s=0;s<u.children.length;s++){var N=C[u.children[s]];N&&((S=N.parents.indexOf(o))>=0&&N.parents.splice(S,1))}}var J,k;for(o in m)if(Object.prototype.hasOwnProperty.call(m,o)&&(u=C[o]))for(k=m[o],s=0;s<k.length;s++)J=k[s],(S=u.children.indexOf(J))>=0&&u.children.splice(S,1);d("apply"),y=G;for(o in Z)Object.prototype.hasOwnProperty.call(Z,o)&&(t[o]=Z[o]);var T=null;for(o in m)if(Object.prototype.hasOwnProperty.call(m,o)&&(u=C[o])){k=m[o];var z=[];for(a=0;a<k.length;a++)if(J=k[a],i=u.hot._acceptedDependencies[J]){if(z.indexOf(i)>=0)continue;z.push(i)}for(a=0;a<z.length;a++){i=z[a];try{i(k)}catch(t){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:o,dependencyId:k[a],error:t}),n.ignoreErrored||T||(T=t)}}}for(a=0;a<f.length;a++){var w=f[a];o=w.module,x=[o];try{b(o)}catch(t){if("function"==typeof w.errorHandler)try{w.errorHandler(t)}catch(e){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:o,error:e,orginalError:t,originalError:t}),n.ignoreErrored||T||(T=e),T||(T=t)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:o,error:t}),n.ignoreErrored||T||(T=t)}}return T?(d("fail"),Promise.reject(T)):(d("idle"),new Promise(function(t){t(r)}))}function b(e){if(C[e])return C[e].exports;var n=C[e]={i:e,l:!1,exports:{},hot:a(e),parents:(g=x,x=[],g),children:[]};return t[e].call(n.exports,n,n.exports,i(e)),n.l=!0,n.exports}var Z=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){u(t,e),Z&&Z(t,e)};var h,p,X,G,W=!0,y="ee1a6b0772e65ec68e51",V=1e4,R={},x=[],g=[],L=[],Y="idle",v=0,f=0,S={},I={},F={},C={};b.m=t,b.c=C,b.d=function(t,e,n){b.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},b.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return b.d(e,"a",e),e},b.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},b.p="./",b.h=function(){return y},i(8)(b.s=8)}({8:/*!******************************!*\
  !*** ./static/js/ngr.min.js ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
function(module,exports,__webpack_require__){"use strict";eval('var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}/*! Copyright (c) Palmap Inc. All rights reserved. */!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports;}var n={};return e.m=t,e.c=n,e.p="./",e(0);}(function(t){for(var e in t){if(Object.prototype.hasOwnProperty.call(t,e))switch(_typeof(t[e])){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,r){i.apply(this,[t,e,r].concat(n));};}(t[e]);break;default:t[e]=t[t[e]];}}return t;}([function(t,e,n){t.exports=n(128);},function(t,e){/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t);}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++){e["_"+String.fromCharCode(n)]=n;}var i=Object.getOwnPropertyNames(e).map(function(t){return e[t];});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t;}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("");}catch(t){return!1;}}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(t,e){for(var i,s,u=n(t),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var c in i){o.call(i,c)&&(u[c]=i[c]);}if(r){s=r(i);for(var h=0;h<s.length;h++){a.call(i,s[h])&&(u[s[h]]=i[s[h]]);}}}return u;};},function(t,e,n){var i,r,o,a=n(1),s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);};!function(n,a){"object"===s(e)&&"undefined"!=typeof t?a(e):(r=[e],i=a,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)));}(void 0,function(t){"use strict";function e(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1;}function n(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0;}function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.");}function r(){}function o(t,e){this.x=t||0,this.y=e||0;}function u(t,e,n,i,r,a,s,l,c,h){Object.defineProperty(this,"id",{value:Zr++}),this.uuid=Wr.generateUUID(),this.name="",this.image=void 0!==t?t:u.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:u.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Vi,this.wrapT=void 0!==i?i:Vi,this.magFilter=void 0!==r?r:Wi,this.minFilter=void 0!==a?a:Ji,this.anisotropy=void 0!==c?c:1,this.format=void 0!==s?s:hr,this.type=void 0!==l?l:Ki,this.offset=new o(0,0),this.repeat=new o(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:Br,this.version=0,this.onUpdate=null;}function l(t,e,n,i,r,o,a,s,l,c,h,f){u.call(this,null,o,a,s,l,c,i,r,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:Hi,this.minFilter=void 0!==c?c:Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1;}function c(t,e,n,i,r,o,a,s,l,c){t=void 0!==t?t:[],e=void 0!==e?e:Ri,u.call(this,t,e,n,i,r,o,a,s,l,c),this.flipY=!1;}function h(){this.seq=[],this.map={};}function f(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=Qr[r];if(void 0===o&&(o=new Float32Array(r),Qr[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a){s+=n,t[a].toArray(o,s);}}return o;}function d(t,e){var n=$r[e];void 0===n&&(n=new Int32Array(e),$r[e]=n);for(var i=0;i!==e;++i){n[i]=t.allocTextureUnit();}return n;}function p(t,e){t.uniform1f(this.addr,e);}function g(t,e){t.uniform1i(this.addr,e);}function v(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y);}function m(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e);}function y(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w);}function _(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e);}function b(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(eo.set(e.elements),t.uniformMatrix3fv(this.addr,!1,eo));}function x(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(to.set(e.elements),t.uniformMatrix4fv(this.addr,!1,to));}function w(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||Jr,i);}function E(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||Kr,i);}function S(t,e){t.uniform2iv(this.addr,e);}function M(t,e){t.uniform3iv(this.addr,e);}function C(t,e){t.uniform4iv(this.addr,e);}function I(t){switch(t){case 5126:return p;case 35664:return v;case 35665:return m;case 35666:return y;case 35674:return _;case 35675:return b;case 35676:return x;case 35678:return w;case 35680:return E;case 5124:case 35670:return g;case 35667:case 35671:return S;case 35668:case 35672:return M;case 35669:case 35673:return C;}}function O(t,e){t.uniform1fv(this.addr,e);}function T(t,e){t.uniform1iv(this.addr,e);}function P(t,e){t.uniform2fv(this.addr,f(e,this.size,2));}function A(t,e){t.uniform3fv(this.addr,f(e,this.size,3));}function L(t,e){t.uniform4fv(this.addr,f(e,this.size,4));}function N(t,e){t.uniformMatrix2fv(this.addr,!1,f(e,this.size,4));}function k(t,e){t.uniformMatrix3fv(this.addr,!1,f(e,this.size,9));}function R(t,e){t.uniformMatrix4fv(this.addr,!1,f(e,this.size,16));}function D(t,e,n){var i=e.length,r=d(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o){n.setTexture2D(e[o]||Jr,r[o]);}}function F(t,e,n){var i=e.length,r=d(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o){n.setTextureCube(e[o]||Kr,r[o]);}}function B(t){switch(t){case 5126:return O;case 35664:return P;case 35665:return A;case 35666:return L;case 35674:return N;case 35675:return k;case 35676:return R;case 35678:return D;case 35680:return F;case 5124:case 35670:return T;case 35667:case 35671:return S;case 35668:case 35672:return M;case 35669:case 35673:return C;}}function j(t,e,n){this.id=t,this.addr=n,this.setValue=I(e.type);}function U(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=B(e.type);}function z(t){this.id=t,h.call(this);}function G(t,e){t.seq.push(e),t.map[e.id]=e;}function V(t,e,n){var i=t.name,r=i.length;for(no.lastIndex=0;;){var o=no.exec(i),a=no.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===r){G(n,void 0===l?new j(s,t,e):new U(s,t,e));break;}var c=n.map,h=c[s];void 0===h&&(h=new z(s),G(n,h)),n=h;}}function X(t,e,n){h.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=t.getActiveUniform(e,r),a=o.name,s=t.getUniformLocation(e,a);V(o,s,this);}}function H(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1;}function q(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n);}function Y(t,e,n){this.uuid=Wr.generateUUID(),this.width=t,this.height=e,this.scissor=new H(0,0,t,e),this.scissorTest=!1,this.viewport=new H(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=Wi),this.texture=new u(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null;}function W(){Object.defineProperty(this,"id",{value:hs++}),this.uuid=Wr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Kn,this.side=Gn,this.shading=qn,this.vertexColors=Yn,this.opacity=1,this.transparent=!1,this.blendSrc=hi,this.blendDst=fi,this.blendEquation=ni,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=xi,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.needsUpdate=!0;}function Z(t){W.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}",this.fragmentShader="void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t));}function J(t){W.call(this),this.type="MeshDepthMaterial",this.depthPacking=qr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t);}function K(t,e){this.min=void 0!==t?t:new n(+(1/0),+(1/0),+(1/0)),this.max=void 0!==e?e:new n(-(1/0),-(1/0),-(1/0));}function Q(t,e){this.center=void 0!==t?t:new n(),this.radius=void 0!==e?e:0;}function $(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.");}function tt(t,e){this.normal=void 0!==t?t:new n(1,0,0),this.constant=void 0!==e?e:0;}function et(t,e,n,i,r,o){this.planes=[void 0!==t?t:new tt(),void 0!==e?e:new tt(),void 0!==n?n:new tt(),void 0!==i?i:new tt(),void 0!==r?r:new tt(),void 0!==o?o:new tt()];}function nt(t,e,r,a){function s(e,n,i,r){var o=e.geometry,a=null,s=x,u=e.customDepthMaterial;if(i&&(s=w,u=e.customDistanceMaterial),u)a=u;else{var l=!1;n.morphTargets&&(o&&o.isBufferGeometry?l=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(l=o.morphTargets&&o.morphTargets.length>0)),e.isSkinnedMesh&&n.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var c=e.isSkinnedMesh&&n.skinning,h=0;l&&(h|=y),c&&(h|=_),a=s[h];}if(t.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var f=a.uuid,d=n.uuid,p=E[f];void 0===p&&(p={},E[f]=p);var g=p[d];void 0===g&&(g=a.clone(),p[d]=g),a=g;}a.visible=n.visible,a.wireframe=n.wireframe;var v=n.side;return R.renderSingleSided&&v==Xn&&(v=Gn),R.renderReverseSided&&(v===Gn?v=Vn:v===Vn&&(v=Gn)),a.side=v,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,i&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(r),a;}function u(e,n,i,o){if(e.visible!==!1){var a=e.layers.test(n.layers);if(a&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||h.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var l=r.update(e),c=e.material;if(Array.isArray(c))for(var f=l.groups,d=0,p=f.length;d<p;d++){var g=f[d],v=c[g.materialIndex];if(v&&v.visible){var y=s(e,v,o,m);t.renderBufferDirect(i,null,l,y,e,g);}}else if(c.visible){var y=s(e,c,o,m);t.renderBufferDirect(i,null,l,y,e,null);}}for(var _=e.children,b=0,x=_.length;b<x;b++){u(_[b],n,i,o);}}}var l=t.context,c=t.state,h=new et(),f=new i(),d=e.shadows,p=new o(),g=new o(a.maxTextureSize,a.maxTextureSize),v=new n(),m=new n(),y=1,_=2,b=(y|_)+1,x=new Array(b),w=new Array(b),E={},S=[new n(1,0,0),new n(-1,0,0),new n(0,0,1),new n(0,0,-1),new n(0,1,0),new n(0,-1,0)],M=[new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,0,1),new n(0,0,-1)],C=[new H(),new H(),new H(),new H(),new H(),new H()],I=new J();I.depthPacking=Yr,I.clipping=!0;for(var O=cs.distanceRGBA,T=oo.clone(O.uniforms),P=0;P!==b;++P){var A=0!==(P&y),L=0!==(P&_),N=I.clone();N.morphTargets=A,N.skinning=L,x[P]=N;var k=new Z({defines:{USE_SHADOWMAP:""},uniforms:T,vertexShader:O.vertexShader,fragmentShader:O.fragmentShader,morphTargets:A,skinning:L,clipping:!0});w[P]=k;}var R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Un,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,n){if(R.enabled!==!1&&(R.autoUpdate!==!1||R.needsUpdate!==!1)&&0!==d.length){c.disable(l.BLEND),c.buffers.color.setClear(1,1,1,1),c.buffers.depth.setTest(!0),c.setScissorTest(!1);for(var i,r,o=0,a=d.length;o<a;o++){var s=d[o],y=s.shadow;if(void 0!==y){var _=y.camera;if(p.copy(y.mapSize),p.min(g),s&&s.isPointLight){i=6,r=!0;var b=p.x,x=p.y;C[0].set(2*b,x,b,x),C[1].set(0,x,b,x),C[2].set(3*b,x,b,x),C[3].set(b,x,b,x),C[4].set(3*b,0,b,x),C[5].set(b,0,b,x),p.x*=4,p.y*=2;}else i=1,r=!1;if(null===y.map){var w={minFilter:Hi,magFilter:Hi,format:hr};y.map=new Y(p.x,p.y,w),y.map.texture.name=s.name+".shadowMap",_.updateProjectionMatrix();}y.isSpotLightShadow&&y.update(s);var E=y.map,I=y.matrix;m.setFromMatrixPosition(s.matrixWorld),_.position.copy(m),t.setRenderTarget(E),t.clear();for(var O=0;O<i;O++){if(r){v.copy(_.position),v.add(S[O]),_.up.copy(M[O]),_.lookAt(v);var T=C[O];c.viewport(T);}else v.setFromMatrixPosition(s.target.matrixWorld),_.lookAt(v);_.updateMatrixWorld(),_.matrixWorldInverse.getInverse(_.matrixWorld),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(_.projectionMatrix),I.multiply(_.matrixWorldInverse),f.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),h.setFromMatrix(f),u(e,n,_,r);}}else console.warn("THREE.WebGLShadowMap:",s,"has no shadow.");}var P=t.getClearColor(),A=t.getClearAlpha();t.setClearColor(P,A),R.needsUpdate=!1;}};}function it(t,e){this.origin=void 0!==t?t:new n(),this.direction=void 0!==e?e:new n();}function rt(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||rt.DefaultOrder;}function ot(){this.mask=1;}function at(){function t(){s.setFromEuler(a,!1);}function r(){a.setFromQuaternion(s,void 0,!1);}Object.defineProperty(this,"id",{value:fs++}),this.uuid=Wr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=at.DefaultUp.clone();var o=new n(),a=new rt(),s=new e(),u=new n(1,1,1);a.onChange(t),s.onChange(r),Object.defineProperties(this,{position:{enumerable:!0,value:o},rotation:{enumerable:!0,value:a},quaternion:{enumerable:!0,value:s},scale:{enumerable:!0,value:u},modelViewMatrix:{value:new i()},normalMatrix:{value:new $()}}),this.matrix=new i(),this.matrixWorld=new i(),this.matrixAutoUpdate=at.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ot(),this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){};}function st(t,e){this.start=void 0!==t?t:new n(),this.end=void 0!==e?e:new n();}function ut(t,e,i){this.a=void 0!==t?t:new n(),this.b=void 0!==e?e:new n(),this.c=void 0!==i?i:new n();}function lt(t,e,i,r,o,a){this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new n(),this.vertexNormals=Array.isArray(r)?r:[],this.color=o&&o.isColor?o:new q(),this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==a?a:0;}function ct(t){W.call(this),this.type="MeshBasicMaterial",this.color=new q(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ci,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t);}function ht(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Wr.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0;}function ft(t,e){ht.call(this,new Int8Array(t),e);}function dt(t,e){ht.call(this,new Uint8Array(t),e);}function pt(t,e){ht.call(this,new Uint8ClampedArray(t),e);}function gt(t,e){ht.call(this,new Int16Array(t),e);}function vt(t,e){ht.call(this,new Uint16Array(t),e);}function mt(t,e){ht.call(this,new Int32Array(t),e);}function yt(t,e){ht.call(this,new Uint32Array(t),e);}function _t(t,e){ht.call(this,new Float32Array(t),e);}function bt(t,e){ht.call(this,new Float64Array(t),e);}function xt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1;}function wt(t){if(0===t.length)return-(1/0);for(var e=t[0],n=1,i=t.length;n<i;++n){t[n]>e&&(e=t[n]);}return e;}function Et(){return ds++;}function St(){Object.defineProperty(this,"id",{value:Et()}),this.uuid=Wr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1;}function Mt(){Object.defineProperty(this,"id",{value:Et()}),this.uuid=Wr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0};}function Ct(t,e){at.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Mt(),this.material=void 0!==e?e:new ct({color:16777215*Math.random()}),this.drawMode=Rr,this.updateMorphTargets();}function It(t,e,i,r,o,a){function s(t,e,i,r,o,a,s,g,v,m,y){var _,b,x=a/v,w=s/m,E=a/2,S=s/2,M=g/2,C=v+1,I=m+1,O=0,T=0,P=new n();for(b=0;b<I;b++){var A=b*w-S;for(_=0;_<C;_++){var L=_*x-E;P[t]=L*r,P[e]=A*o,P[i]=M,c.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[i]=g>0?1:-1,h.push(P.x,P.y,P.z),f.push(_/v),f.push(1-b/m),O+=1;}}for(b=0;b<m;b++){for(_=0;_<v;_++){var N=d+_+C*b,k=d+_+C*(b+1),R=d+(_+1)+C*(b+1),D=d+(_+1)+C*b;l.push(N,k,D),l.push(k,R,D),T+=6;}}u.addGroup(p,T,y),p+=T,d+=O;}Mt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:a};var u=this;r=Math.floor(r)||1,o=Math.floor(o)||1,a=Math.floor(a)||1;var l=[],c=[],h=[],f=[],d=0,p=0;s("z","y","x",-1,-1,i,e,t,a,o,0),s("z","y","x",1,-1,i,e,-t,a,o,1),s("x","z","y",1,1,t,i,e,r,a,2),s("x","z","y",1,-1,t,i,-e,r,a,3),s("x","y","z",1,-1,t,e,i,r,o,4),s("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(l),this.addAttribute("position",new _t(c,3)),this.addAttribute("normal",new _t(h,3)),this.addAttribute("uv",new _t(f,2));}function Ot(t,e,n,i){Mt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,o,a=t/2,s=e/2,u=Math.floor(n)||1,l=Math.floor(i)||1,c=u+1,h=l+1,f=t/u,d=e/l,p=[],g=[],v=[],m=[];for(o=0;o<h;o++){var y=o*d-s;for(r=0;r<c;r++){var _=r*f-a;g.push(_,-y,0),v.push(0,0,1),m.push(r/u),m.push(1-o/l);}}for(o=0;o<l;o++){for(r=0;r<u;r++){var b=r+c*o,x=r+c*(o+1),w=r+1+c*(o+1),E=r+1+c*o;p.push(b,x,E),p.push(x,w,E);}}this.setIndex(p),this.addAttribute("position",new _t(g,3)),this.addAttribute("normal",new _t(v,3)),this.addAttribute("uv",new _t(m,2));}function Tt(){at.call(this),this.type="Camera",this.matrixWorldInverse=new i(),this.projectionMatrix=new i();}function Pt(t,e,n,i){Tt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix();}function At(t,e,n,i,r,o){Tt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix();}function Lt(t){function e(e,n){var i=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var a=t.FLOAT;return i instanceof Float32Array?a=t.FLOAT:i instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):i instanceof Uint16Array?a=t.UNSIGNED_SHORT:i instanceof Int16Array?a=t.SHORT:i instanceof Uint32Array?a=t.UNSIGNED_INT:i instanceof Int32Array?a=t.INT:i instanceof Int8Array?a=t.BYTE:i instanceof Uint8Array&&(a=t.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version};}function n(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),n.dynamic===!1?t.bufferData(i,r,t.STATIC_DRAW):o.count===-1?t.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=0);}function i(t){return t.isInterleavedBufferAttribute&&(t=t.data),a[t.uuid];}function r(e){var n=a[e.uuid];n&&(t.deleteBuffer(n.buffer),delete a[e.uuid]);}function o(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var r=a[t.uuid];void 0===r?a[t.uuid]=e(t,i):r.version<t.version&&(n(r.buffer,t,i),r.version=t.version);}var a={};return{get:i,remove:r,update:o};}function Nt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id;}function kt(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id;}function Rt(){function t(){o=-1,s=-1;}function e(t,e,n,i,u){var l,c;n.transparent?(l=a,c=++s):(l=r,c=++o);var h=l[c];h?(h.id=t.id,h.object=t,h.geometry=e,h.material=n,h.program=n.program,h.renderOrder=t.renderOrder,h.z=i,h.group=u):(h={id:t.id,object:t,geometry:e,material:n,program:n.program,renderOrder:t.renderOrder,z:i,group:u},l.push(h));}function n(){r.length=o+1,a.length=s+1;}function i(){r.sort(Nt),a.sort(kt);}var r=[],o=-1,a=[],s=-1;return{opaque:r,transparent:a,init:t,push:e,finish:n,sort:i};}function Dt(){function t(t,e){var i=t.id+","+e.id,r=n[i];return void 0===r&&(console.log("THREE.WebGLRenderLists:",i),r=new Rt(),n[i]=r),r;}function e(){n={};}var n={};return{get:t,dispose:e};}function Ft(t,e,n){function i(t){s=t;}function r(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(u=t.UNSIGNED_INT,l=4):n.array instanceof Uint16Array?(u=t.UNSIGNED_SHORT,l=2):(u=t.UNSIGNED_BYTE,l=1);}function o(e,i){t.drawElements(s,i,u,e*l),n.calls++,n.vertices+=i,s===t.TRIANGLES&&(n.faces+=i/3);}function a(i,r,o){var a=e.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,u,r*l,i.maxInstancedCount),n.calls++,n.vertices+=o*i.maxInstancedCount,void(s===t.TRIANGLES&&(n.faces+=i.maxInstancedCount*o/3)));}var s,u,l;this.setMode=i,this.setIndex=r,this.render=o,this.renderInstances=a;}function Bt(t,e,n){function i(t){a=t;}function r(e,i){t.drawArrays(a,e,i),n.calls++,n.vertices+=i,a===t.TRIANGLES&&(n.faces+=i/3);}function o(i,r,o){var s=e.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var u=i.attributes.position;u.isInterleavedBufferAttribute?(o=u.data.count,s.drawArraysInstancedANGLE(a,0,o,i.maxInstancedCount)):s.drawArraysInstancedANGLE(a,r,o,i.maxInstancedCount),n.calls++,n.vertices+=o*i.maxInstancedCount,a===t.TRIANGLES&&(n.faces+=i.maxInstancedCount*o/3);}var a;this.setMode=i,this.render=r,this.renderInstances=o;}function jt(t,e,n){function i(t){var r=t.target,o=s[r.id];null!==o.index&&e.remove(o.index);for(var a in o.attributes){e.remove(o.attributes[a]);}r.removeEventListener("dispose",i),delete s[r.id];var l=u[r.id];l&&(e.remove(l),delete u[r.id]),l=u[o.id],l&&(e.remove(l),delete u[o.id]),n.geometries--;}function r(t,e){var r=s[e.id];return r?r:(e.addEventListener("dispose",i),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=new Mt().setFromObject(t)),r=e._bufferGeometry),s[e.id]=r,n.geometries++,r);}function o(n){var i=n.index,r=n.attributes;null!==i&&e.update(i,t.ELEMENT_ARRAY_BUFFER);for(var o in r){e.update(r[o],t.ARRAY_BUFFER);}var a=n.morphAttributes;for(var o in a){for(var s=a[o],u=0,l=s.length;u<l;u++){e.update(s[u],t.ARRAY_BUFFER);}}}function a(n){var i=u[n.id];if(i)return i;var r=[],o=n.index,a=n.attributes;if(null!==o)for(var s=o.array,l=0,c=s.length;l<c;l+=3){var h=s[l+0],f=s[l+1],d=s[l+2];r.push(h,f,f,d,d,h);}else for(var s=a.position.array,l=0,c=s.length/3-1;l<c;l+=3){var h=l+0,f=l+1,d=l+2;r.push(h,f,f,d,d,h);}return i=new(wt(r)>65535?yt:vt)(r,1),e.update(i,t.ELEMENT_ARRAY_BUFFER),u[n.id]=i,i;}var s={},u={};return{get:r,update:o,getWireframeAttribute:a};}function Ut(){var t={};return{get:function get(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":i={direction:new n(),color:new q(),shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o()};break;case"SpotLight":i={position:new n(),direction:new n(),color:new q(),distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o()};break;case"PointLight":i={position:new n(),color:new q(),distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o()};break;case"HemisphereLight":i={direction:new n(),skyColor:new q(),groundColor:new q()};break;case"RectAreaLight":i={color:new q(),position:new n(),halfWidth:new n(),halfHeight:new n()};}return t[e.id]=i,i;}};}function zt(t,e,n){function i(t){var i=n.frame,r=t.geometry,a=e.get(t,r);return o[a.id]!==i&&(r.isGeometry&&a.updateFromObject(t),e.update(a),o[a.id]=i),a;}function r(){o={};}var o={};return{update:i,clear:r};}function Gt(t){for(var e=t.split("\\n"),n=0;n<e.length;n++){e[n]=n+1+": "+e[n];}return e.join("\\n");}function Vt(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn\'t compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),Gt(n)),i;}function Xt(t){switch(t){case Br:return["Linear","( value )"];case jr:return["sRGB","( value )"];case zr:return["RGBE","( value )"];case Vr:return["RGBM","( value, 7.0 )"];case Xr:return["RGBM","( value, 16.0 )"];case Hr:return["RGBD","( value, 256.0 )"];case Ur:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t);}}function Ht(t,e){var n=Xt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }";}function qt(t,e){var n=Xt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }";}function Yt(t,e){var n;switch(e){case Pi:n="Linear";break;case Ai:n="Reinhard";break;case Li:n="Uncharted2";break;case Ni:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e);}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }";}function Wt(t,e,n){t=t||{};var i=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(Kt).join("\\n");}function Zt(t){var e=[];for(var n in t){var i=t[n];i!==!1&&e.push("#define "+n+" "+i);}return e.join("\\n");}function Jt(t,e,n){for(var i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var a=t.getActiveAttrib(e,o),s=a.name;i[s]=t.getAttribLocation(e,s);}return i;}function Kt(t){return""!==t;}function Qt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights);}function $t(t){function e(t,e){var n=ls[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return $t(n);}var n=/^\\s*#include +<([\\w\\d.]+)>/gm;return t.replace(n,e);}function te(t){function e(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++){r+=i.replace(/\\[ i \\]/g,"[ "+o+" ]");}return r;}var n=/for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;return t.replace(n,e);}function ee(t,e,n,i){var r=t.context,o=n.extensions,a=n.defines,s=n.__webglShader.vertexShader,u=n.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";i.shadowMapType===Un?l="SHADOWMAP_TYPE_PCF":i.shadowMapType===zn&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(n.envMap.mapping){case Ri:case Di:c="ENVMAP_TYPE_CUBE";break;case Ui:case zi:c="ENVMAP_TYPE_CUBE_UV";break;case Fi:case Bi:c="ENVMAP_TYPE_EQUIREC";break;case ji:c="ENVMAP_TYPE_SPHERE";}switch(n.envMap.mapping){case Di:case Bi:h="ENVMAP_MODE_REFRACTION";}switch(n.combine){case Ci:f="ENVMAP_BLENDING_MULTIPLY";break;case Ii:f="ENVMAP_BLENDING_MIX";break;case Oi:f="ENVMAP_BLENDING_ADD";}}var d,p,g=t.gammaFactor>0?t.gammaFactor:1,v=Wt(o,i,t.extensions),m=Zt(a),y=r.createProgram();n.isRawShaderMaterial?(d=[m,"\\n"].filter(Kt).join("\\n"),p=[v,m,"\\n"].filter(Kt).join("\\n")):(d=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,m,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\\tattribute vec3 morphTarget0;","\\tattribute vec3 morphTarget1;","\\tattribute vec3 morphTarget2;","\\tattribute vec3 morphTarget3;","\\t#ifdef USE_MORPHNORMALS","\\t\\tattribute vec3 morphNormal0;","\\t\\tattribute vec3 morphNormal1;","\\t\\tattribute vec3 morphNormal2;","\\t\\tattribute vec3 morphNormal3;","\\t#else","\\t\\tattribute vec3 morphTarget4;","\\t\\tattribute vec3 morphTarget5;","\\t\\tattribute vec3 morphTarget6;","\\t\\tattribute vec3 morphTarget7;","\\t#endif","#endif","#ifdef USE_SKINNING","\\tattribute vec4 skinIndex;","\\tattribute vec4 skinWeight;","#endif","\\n"].filter(Kt).join("\\n"),p=[v,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,m,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+g,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",i.toneMapping!==Ti?"#define TONE_MAPPING":"",i.toneMapping!==Ti?ls.tonemapping_pars_fragment:"",i.toneMapping!==Ti?Yt("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.dithering?ls.dithering_pars_fragment:"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?ls.encodings_pars_fragment:"",i.mapEncoding?Ht("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?Ht("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?Ht("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?qt("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\\n"].filter(Kt).join("\\n")),s=$t(s,i),s=Qt(s,i),u=$t(u,i),u=Qt(u,i),n.isShaderMaterial||(s=te(s),u=te(u));var _=d+s,b=p+u,x=Vt(r,r.VERTEX_SHADER,_),w=Vt(r,r.FRAGMENT_SHADER,b);r.attachShader(y,x),r.attachShader(y,w),void 0!==n.index0AttributeName?r.bindAttribLocation(y,0,n.index0AttributeName):i.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);var E=r.getProgramInfoLog(y),S=r.getShaderInfoLog(x),M=r.getShaderInfoLog(w),C=!0,I=!0;r.getProgramParameter(y,r.LINK_STATUS)===!1?(C=!1,console.error("THREE.WebGLProgram: shader error: ",r.getError(),"gl.VALIDATE_STATUS",r.getProgramParameter(y,r.VALIDATE_STATUS),"gl.getProgramInfoLog",E,S,M)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==S&&""!==M||(I=!1),I&&(this.diagnostics={runnable:C,material:n,programLog:E,vertexShader:{log:S,prefix:d},fragmentShader:{log:M,prefix:p}}),r.deleteShader(x),r.deleteShader(w);var O;this.getUniforms=function(){return void 0===O&&(O=new X(r,y,t)),O;};var T;return this.getAttributes=function(){return void 0===T&&(T=Jt(r,y)),T;},this.destroy=function(){r.deleteProgram(y),this.program=void 0;},Object.defineProperties(this,{uniforms:{get:function get(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms();}},attributes:{get:function get(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes();}}}),this.id=ps++,this.code=e,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=w,this;}function ne(t,e){function n(t){var n=t.skeleton,i=n.bones;if(e.floatVertexTextures)return 1024;var r=e.maxVertexUniforms,o=Math.floor((r-20)/4),a=Math.min(o,i.length);return a<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+a+"."),0):a;}function i(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don\'t use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Br,n===Br&&e&&(n=Ur),n;}var r=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(r,a,s,u,l,c){var h=o[r.type],f=c.isSkinnedMesh?n(c):0,d=t.getPrecision();null!==r.precision&&(d=e.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead."));var p=t.getRenderTarget(),g={shaderID:h,precision:d,supportsVertexTextures:e.vertexTextures,outputEncoding:i(p?p.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:i(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:i(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===Ui||r.envMap.mapping===zi),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:i(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!s,useFog:r.fog,fogExp:s&&s.isFogExp2,flatShading:r.shading===Hn,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning&&f>0,maxBones:f,useVertexTexture:e.floatVertexTextures,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&a.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===Xn,flipSided:r.side===Vn,depthPacking:void 0!==r.depthPacking&&r.depthPacking};return g;},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines){n.push(i),n.push(t.defines[i]);}for(var r=0;r<a.length;r++){n.push(e[a[r]]);}return n.join();},this.acquireProgram=function(e,n,i){for(var o,a=0,s=r.length;a<s;a++){var u=r[a];if(u.code===i){o=u,++o.usedTimes;break;}}return void 0===o&&(o=new ee(t,i,e,n),r.push(o)),o;},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy();}},this.programs=r;}function ie(t,e,n,i,r,o,a){function s(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n);var r=i.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+i.width+"x"+i.height,t),i;}return t;}function u(t){return Wr.isPowerOfTwo(t.width)&&Wr.isPowerOfTwo(t.height);}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=Wr.nearestPowerOfTwo(t.width),e.height=Wr.nearestPowerOfTwo(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e;}return t;}function c(t){return t.wrapS!==Vi||t.wrapT!==Vi||t.minFilter!==Hi&&t.minFilter!==Wi;}function h(e){return e===Hi||e===qi||e===Yi?t.NEAREST:t.LINEAR;}function f(t){var e=t.target;e.removeEventListener("dispose",f),p(e),a.textures--;}function d(t){var e=t.target;e.removeEventListener("dispose",d),g(e),a.textures--;}function p(e){var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture);}i.remove(e);}function g(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++){t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);}else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e);}}function v(e,r){var o=i.get(e);if(e.version>0&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(a.complete!==!1)return void b(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e);}}n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_2D,o.__webglTexture);}function m(e,l){var c=i.get(e);if(6===e.image.length)if(e.version>0&&c.__version!==e.version){c.__image__webglTextureCube||(e.addEventListener("dispose",f),c.__image__webglTextureCube=t.createTexture(),a.textures++),n.activeTexture(t.TEXTURE0+l),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e&&e.isCompressedTexture,d=e.image[0]&&e.image[0].isDataTexture,p=[],g=0;g<6;g++){h||d?p[g]=d?e.image[g].image:e.image[g]:p[g]=s(e.image[g],r.maxCubemapSize);}var v=p[0],m=u(v),y=o(e.format),b=o(e.type);_(t.TEXTURE_CUBE_MAP,e,m);for(var g=0;g<6;g++){if(h)for(var x,w=p[g].mipmaps,E=0,S=w.length;E<S;E++){x=w[E],e.format!==hr&&e.format!==cr?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,y,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,y,x.width,x.height,0,y,b,x.data);}else d?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,p[g].width,p[g].height,0,y,b,p[g].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,y,b,p[g]);}e.generateMipmaps&&m&&t.generateMipmap(t.TEXTURE_CUBE_MAP),c.__version=e.version,e.onUpdate&&e.onUpdate(e);}else n.activeTexture(t.TEXTURE0+l),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube);}function y(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture);}function _(n,a,s){var u;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS===Vi&&a.wrapT===Vi||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),t.texParameteri(n,t.TEXTURE_MAG_FILTER,h(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,h(a.minFilter)),a.minFilter!==Hi&&a.minFilter!==Wi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=e.get("EXT_texture_filter_anisotropic")){if(a.type===ir&&null===e.get("OES_texture_float_linear"))return;if(a.type===rr&&null===e.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy);}}function b(e,i,h){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),a.textures++),n.activeTexture(t.TEXTURE0+h),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment);var d=s(i.image,r.maxTextureSize);c(i)&&u(d)===!1&&(d=l(d));var p=u(d),g=o(i.format),v=o(i.type);_(t.TEXTURE_2D,i,p);var m,y=i.mipmaps;if(i.isDepthTexture){var b=t.DEPTH_COMPONENT;if(i.type===ir){if(!I)throw new Error("Float Depth Texture only supported in WebGL2.0");b=t.DEPTH_COMPONENT32F;}else I&&(b=t.DEPTH_COMPONENT16);i.format===gr&&b===t.DEPTH_COMPONENT&&i.type!==tr&&i.type!==nr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=tr,v=o(i.type)),i.format===vr&&(b=t.DEPTH_STENCIL,i.type!==ur&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ur,v=o(i.type))),n.texImage2D(t.TEXTURE_2D,0,b,d.width,d.height,0,g,v,null);}else if(i.isDataTexture){if(y.length>0&&p){for(var x=0,w=y.length;x<w;x++){m=y[x],n.texImage2D(t.TEXTURE_2D,x,g,m.width,m.height,0,g,v,m.data);}i.generateMipmaps=!1;}else n.texImage2D(t.TEXTURE_2D,0,g,d.width,d.height,0,g,v,d.data);}else if(i.isCompressedTexture)for(var x=0,w=y.length;x<w;x++){m=y[x],i.format!==hr&&i.format!==cr?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(t.TEXTURE_2D,x,g,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,x,g,m.width,m.height,0,g,v,m.data);}else if(y.length>0&&p){for(var x=0,w=y.length;x<w;x++){m=y[x],n.texImage2D(t.TEXTURE_2D,x,g,g,v,m);}i.generateMipmaps=!1;}else n.texImage2D(t.TEXTURE_2D,0,g,g,v,d);i.generateMipmaps&&p&&t.generateMipmap(t.TEXTURE_2D),e.__version=i.version,i.onUpdate&&i.onUpdate(i);}function x(e,r,a,s){var u=o(r.texture.format),l=o(r.texture.type);n.texImage2D(s,0,u,r.width,r.height,0,u,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null);}function w(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null);}function E(e,n){var r=n&&n.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var o=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===gr)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==vr)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0);}}function S(e){var n=i.get(e),r=e.isWebGLRenderTargetCube===!0;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");E(n.__webglFramebuffer,e);}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++){t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),w(n.__webglDepthbuffer[o],e);}}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),w(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null);}function M(e){var r=i.get(e),o=i.get(e.texture);e.addEventListener("dispose",d),o.__webglTexture=t.createTexture(),a.textures++;var s=e.isWebGLRenderTargetCube===!0,l=u(e);if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++){r.__webglFramebuffer[c]=t.createFramebuffer();}}else r.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),_(t.TEXTURE_CUBE_MAP,e.texture,l);for(var c=0;c<6;c++){x(r.__webglFramebuffer[c],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+c);}e.texture.generateMipmaps&&l&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null);}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),_(t.TEXTURE_2D,e.texture,l),x(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&l&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e);}function C(e){var r=e.texture;if(r.generateMipmaps&&u(e)&&r.minFilter!==Hi&&r.minFilter!==Wi){var o=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),t.generateMipmap(o),n.bindTexture(o,null);}}var I="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=m,this.setTextureCubeDynamic=y,this.setupRenderTarget=M,this.updateRenderTargetMipmap=C;}function re(){function t(t){var e=t.uuid,n=i[e];return void 0===n&&(n={},i[e]=n),n;}function e(t){delete i[t.uuid];}function n(){i={};}var i={};return{get:t,remove:e,clear:n};}function oe(t,e,n){function i(){var e=!1,n=new H(),i=null,r=new H();return{setMask:function setMask(n){i===n||e||(t.colorMask(n,n,n,n),i=n);},setLocked:function setLocked(t){e=t;},setClear:function setClear(e,i,o,a,s){s===!0&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),r.equals(n)===!1&&(t.clearColor(e,i,o,a),r.copy(n));},reset:function reset(){e=!1,i=null,r.set(0,0,0,1);}};}function r(){var e=!1,n=null,i=null,r=null;return{setTest:function setTest(e){e?f(t.DEPTH_TEST):d(t.DEPTH_TEST);},setMask:function setMask(i){n===i||e||(t.depthMask(i),n=i);},setFunc:function setFunc(e){if(i!==e){if(e)switch(e){case yi:t.depthFunc(t.NEVER);break;case _i:t.depthFunc(t.ALWAYS);break;case bi:t.depthFunc(t.LESS);break;case xi:t.depthFunc(t.LEQUAL);break;case wi:t.depthFunc(t.EQUAL);break;case Ei:t.depthFunc(t.GEQUAL);break;case Si:t.depthFunc(t.GREATER);break;case Mi:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL);}else t.depthFunc(t.LEQUAL);i=e;}},setLocked:function setLocked(t){e=t;},setClear:function setClear(e){r!==e&&(t.clearDepth(e),r=e);},reset:function reset(){e=!1,n=null,i=null,r=null;}};}function o(){var e=!1,n=null,i=null,r=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function setTest(e){e?f(t.STENCIL_TEST):d(t.STENCIL_TEST);},setMask:function setMask(i){n===i||e||(t.stencilMask(i),n=i);},setFunc:function setFunc(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a);},setOp:function setOp(e,n,i){a===e&&s===n&&u===i||(t.stencilOp(e,n,i),a=e,s=n,u=i);},setLocked:function setLocked(t){e=t;},setClear:function setClear(e){l!==e&&(t.clearStencil(e),l=e);},reset:function reset(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,u=null,l=null;}};}function a(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<i;a++){t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);}return o;}function s(){P.setClear(0,0,0,1),A.setClear(1),L.setClear(0),f(t.DEPTH_TEST),A.setFunc(xi),m(!1),y(kn),f(t.CULL_FACE),f(t.BLEND),g(Kn);}function u(){for(var t=0,e=k.length;t<e;t++){k[t]=0;}}function l(n){if(k[n]=1,0===R[n]&&(t.enableVertexAttribArray(n),R[n]=1),0!==D[n]){var i=e.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(n,0),D[n]=0;}}function c(n,i){if(k[n]=1,0===R[n]&&(t.enableVertexAttribArray(n),R[n]=1),D[n]!==i){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,i),D[n]=i;}}function h(){for(var e=0,n=R.length;e!==n;++e){R[e]!==k[e]&&(t.disableVertexAttribArray(e),R[e]=0);}}function f(e){F[e]!==!0&&(t.enable(e),F[e]=!0);}function d(e){F[e]!==!1&&(t.disable(e),F[e]=!1);}function p(){if(null===B&&(B=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++){B.push(n[i]);}return B;}function g(e,i,r,o,a,s,u,l){e!==Jn?f(t.BLEND):d(t.BLEND),e===j&&l===Y||(e===Qn?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===$n?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===ti?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),j=e,Y=l),e===ei?(a=a||i,s=s||r,u=u||o,i===U&&a===V||(t.blendEquationSeparate(n(i),n(a)),U=i,V=a),r===z&&o===G&&s===X&&u===q||(t.blendFuncSeparate(n(r),n(o),n(s),n(u)),z=r,G=o,X=s,q=u)):(U=null,z=null,G=null,V=null,X=null,q=null);}function v(e){e.side===Xn?d(t.CULL_FACE):f(t.CULL_FACE),m(e.side===Vn),e.transparent===!0?g(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):g(Jn),A.setFunc(e.depthFunc),A.setTest(e.depthTest),A.setMask(e.depthWrite),P.setMask(e.colorWrite),b(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits);}function m(e){W!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),W=e);}function y(e){e!==Nn?(f(t.CULL_FACE),e!==Z&&(e===kn?t.cullFace(t.BACK):e===Rn?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):d(t.CULL_FACE),Z=e;}function _(e){e!==J&&(nt&&t.lineWidth(e),J=e);}function b(e,n,i){e?(f(t.POLYGON_OFFSET_FILL),K===n&&Q===i||(t.polygonOffset(n,i),K=n,Q=i)):d(t.POLYGON_OFFSET_FILL);}function x(){return $;}function w(e){$=e,e?f(t.SCISSOR_TEST):d(t.SCISSOR_TEST);}function E(e){void 0===e&&(e=t.TEXTURE0+tt-1),it!==e&&(t.activeTexture(e),it=e);}function S(e,n){null===it&&E();var i=rt[it];void 0===i&&(i={type:void 0,texture:void 0},rt[it]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||st[e]),i.type=e,i.texture=n);}function M(){try{t.compressedTexImage2D.apply(t,arguments);}catch(t){console.error(t);}}function C(){try{t.texImage2D.apply(t,arguments);}catch(t){console.error(t);}}function I(e){ot.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),ot.copy(e));}function O(e){at.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),at.copy(e));}function T(){for(var e=0;e<R.length;e++){1===R[e]&&(t.disableVertexAttribArray(e),R[e]=0);}F={},B=null,it=null,rt={},j=null,W=null,Z=null,P.reset(),A.reset(),L.reset();}var P=new i(),A=new r(),L=new o(),N=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=new Uint8Array(N),R=new Uint8Array(N),D=new Uint8Array(N),F={},B=null,j=null,U=null,z=null,G=null,V=null,X=null,q=null,Y=!1,W=null,Z=null,J=null,K=null,Q=null,$=null,tt=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),et=parseFloat(/^WebGL\\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),nt=parseFloat(et)>=1,it=null,rt={},ot=new H(),at=new H(),st={};return st[t.TEXTURE_2D]=a(t.TEXTURE_2D,t.TEXTURE_2D,1),st[t.TEXTURE_CUBE_MAP]=a(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:P,depth:A,stencil:L},init:s,initAttributes:u,enableAttribute:l,enableAttributeAndDivisor:c,disableUnusedAttributes:h,enable:f,disable:d,getCompressedTextureFormats:p,setBlending:g,setMaterial:v,setFlipSided:m,setCullFace:y,setLineWidth:_,setPolygonOffset:b,getScissorTest:x,setScissorTest:w,activeTexture:E,bindTexture:S,compressedTexImage2D:M,texImage2D:C,scissor:I,viewport:O,reset:T};}function ae(t,e,n){function i(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump";}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp";}var o,a=void 0!==n.precision?n.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=n.logarithmicDepthBuffer===!0&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),m=c>0,y=!!e.get("OES_texture_float"),_=m&&y;return{getMaxAnisotropy:i,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:m,floatFragmentTextures:y,floatVertexTextures:_};}function se(t){var e={};return{get:function get(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n);}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i;}};}function ue(){function t(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0;}function e(t,e,i,r){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=l.value,r!==!0||null===a){var c=i+4*o,h=e.matrixWorldInverse;u.getNormalMatrix(h),(null===a||a.length<c)&&(a=new Float32Array(c));for(var f=0,d=i;f!==o;++f,d+=4){s.copy(t[f]).applyMatrix4(h,u),s.normal.toArray(a,d),a[d+3]=s.constant;}}l.value=a,l.needsUpdate=!0;}return n.numPlanes=o,a;}var n=this,i=null,r=0,o=!1,a=!1,s=new tt(),u=new $(),l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==r||o;return o=n,i=e(t,a,0),r=t.length,s;},this.beginShadows=function(){a=!0,e(null);},this.endShadows=function(){a=!1,t();},this.setState=function(n,s,u,c,h,f){if(!o||null===n||0===n.length||a&&!u)a?e(null):t();else{var d=a?0:r,p=4*d,g=h.clippingState||null;l.value=g,g=e(n,c,p,f);for(var v=0;v!==p;++v){g[v]=i[v];}h.clippingState=g,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d;}};}function le(t){function e(){return null===tt?vt:1;}function r(){Wt.init(),Wt.scissor(st.copy(mt).multiplyScalar(vt)),Wt.viewport(lt.copy(_t).multiplyScalar(vt)),Wt.buffers.color.setClear(ft.r,ft.g,ft.b,dt,z);}function o(){$=null,at=null,ot="",rt=-1,Wt.reset();}function a(t){t.preventDefault(),o(),r(),Zt.clear(),$t.clear();}function s(t){var e=t.target;e.removeEventListener("dispose",s),u(e);}function u(t){c(t),Zt.remove(t);}function c(t){var e=Zt.get(t).program;t.program=void 0,void 0!==e&&te.releaseProgram(e);}function h(t,e,n){t.render(function(t){Q.renderBufferImmediate(t,e,n);});}function f(t,e,n,i){if(n&&n.isInstancedBufferGeometry&&null===qt.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),Wt.initAttributes();var r=n.attributes,o=e.getAttributes(),a=t.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var l=r[s];if(void 0!==l){var c=l.normalized,h=l.itemSize,f=Kt.get(l),d=f.buffer,p=f.type,g=f.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,m=v.stride,y=l.offset;v&&v.isInstancedInterleavedBuffer?(Wt.enableAttributeAndDivisor(u,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Wt.enableAttribute(u),Xt.bindBuffer(Xt.ARRAY_BUFFER,d),Xt.vertexAttribPointer(u,h,p,c,m*g,(i*m+y)*g);}else l.isInstancedBufferAttribute?(Wt.enableAttributeAndDivisor(u,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):Wt.enableAttribute(u),Xt.bindBuffer(Xt.ARRAY_BUFFER,d),Xt.vertexAttribPointer(u,h,p,c,0,i*h*g);}else if(void 0!==a){var _=a[s];if(void 0!==_)switch(_.length){case 2:Xt.vertexAttrib2fv(u,_);break;case 3:Xt.vertexAttrib3fv(u,_);break;case 4:Xt.vertexAttrib4fv(u,_);break;default:Xt.vertexAttrib1fv(u,_);}}}}Wt.disableUnusedAttributes();}function d(t,e){return Math.abs(e[0])-Math.abs(t[0]);}function p(t,e,n){if(t.visible){if(t.isLight)V.push(t);else if(t.isSprite)t.frustumCulled&&!bt.intersectsSprite(t)||J.push(t);else if(t.isLensFlare)K.push(t);else if(t.isImmediateRenderObject)n&&Tt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St),Y.push(t,null,t.material,Tt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||bt.intersectsObject(t))){n&&Tt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(St);var i=$t.update(t),r=t.material;if(Array.isArray(r))for(var o=i.groups,a=0,s=o.length;a<s;a++){var u=o[a],l=r[u.materialIndex];l&&l.visible&&Y.push(t,i,l,Tt.z,u);}else r.visible&&Y.push(t,i,r,Tt.z,null);}for(var c=t.children,a=0,s=c.length;a<s;a++){p(c[a],e,n);}}}function g(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,u=a.geometry,l=void 0===i?a.material:i,c=a.group;if(s.onBeforeRender(Q,e,n,u,l,c),n.isArrayCamera&&n.enabled)for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f],g=p.bounds;Q.setViewport(g.x*pt*vt,g.y*gt*vt,g.z*pt*vt,g.w*gt*vt),Q.setScissor(g.x*pt*vt,g.y*gt*vt,g.z*pt*vt,g.w*gt*vt),Q.setScissorTest(!0),v(s,e,p,u,l,c);}else v(s,e,n,u,l,c);s.onAfterRender(Q,e,n,u,l,c);}}function v(t,e,n,i,r,o){if(t.layers.test(n.layers)!==!1)if(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){Wt.setMaterial(r);var a=y(n,e.fog,r,t);ot="",h(t,a,r);}else Q.renderBufferDirect(n,e.fog,i,r,t,o);}function m(t,e,n){var i=Zt.get(t),r=te.getParameters(t,Rt,e,xt.numPlanes,xt.numIntersection,n),o=te.getProgramCode(t,r),a=i.program,u=!0;if(void 0===a)t.addEventListener("dispose",s);else if(a.code!==o)c(t);else{if(void 0!==r.shaderID)return;u=!1;}if(u){if(r.shaderID){var l=cs[r.shaderID];i.__webglShader={name:t.type,uniforms:oo.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader};}else i.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=i.__webglShader,a=te.acquireProgram(t,r,o),i.program=a,t.program=a;}var h=a.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<Q.maxMorphTargets;f++){h["morphTarget"+f]>=0&&t.numSupportedMorphTargets++;}}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<Q.maxMorphNormals;f++){h["morphNormal"+f]>=0&&t.numSupportedMorphNormals++;}}var d=i.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&t.clipping!==!0||(i.numClippingPlanes=xt.numPlanes,i.numIntersection=xt.numIntersection,d.clippingPlanes=xt.uniform),i.fog=e,i.lightsHash=Rt.hash,t.lights&&(d.ambientLightColor.value=Rt.ambient,d.directionalLights.value=Rt.directional,d.spotLights.value=Rt.spot,d.rectAreaLights.value=Rt.rectArea,d.pointLights.value=Rt.point,d.hemisphereLights.value=Rt.hemi,d.directionalShadowMap.value=Rt.directionalShadowMap,d.directionalShadowMatrix.value=Rt.directionalShadowMatrix,d.spotShadowMap.value=Rt.spotShadowMap,d.spotShadowMatrix.value=Rt.spotShadowMatrix,d.pointShadowMap.value=Rt.pointShadowMap,d.pointShadowMatrix.value=Rt.pointShadowMatrix);var p=i.program.getUniforms(),g=X.seqWithValue(p.seq,d);i.uniformsList=g;}function y(t,e,n,i){ht=0;var r=Zt.get(n);if(wt&&(Et||t!==at)){var o=t===at&&n.id===rt;xt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,o);}n.needsUpdate===!1&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==Rt.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===xt.numPlanes&&r.numIntersection===xt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(m(n,e,i),n.needsUpdate=!1);var a=!1,s=!1,u=!1,c=r.program,h=c.getUniforms(),f=r.__webglShader.uniforms;if(c.id!==$&&(Xt.useProgram(c.program),$=c.id,a=!0,s=!0,u=!0),n.id!==rt&&(rt=n.id,s=!0),a||t!==at){if(h.setValue(Xt,"projectionMatrix",t.projectionMatrix),Yt.logarithmicDepthBuffer&&h.setValue(Xt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==at&&(at=t,s=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var d=h.map.cameraPosition;void 0!==d&&d.setValue(Xt,Tt.setFromMatrixPosition(t.matrixWorld));}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(Xt,"viewMatrix",t.matrixWorldInverse),h.setValue(Xt,"toneMappingExposure",Q.toneMappingExposure),h.setValue(Xt,"toneMappingWhitePoint",Q.toneMappingWhitePoint);}if(n.skinning){h.setOptional(Xt,i,"bindMatrix"),h.setOptional(Xt,i,"bindMatrixInverse");var p=i.skeleton;if(p){var g=p.bones;if(Yt.floatVertexTextures){if(void 0===p.boneTexture){var v=Math.sqrt(4*g.length);v=Wr.nextPowerOfTwo(Math.ceil(v)),v=Math.max(v,4);var y=new Float32Array(v*v*4);y.set(p.boneMatrices);var A=new l(y,v,v,hr,ir);p.boneMatrices=y,p.boneTexture=A,p.boneTextureSize=v;}h.setValue(Xt,"boneTexture",p.boneTexture),h.setValue(Xt,"boneTextureSize",p.boneTextureSize);}else h.setOptional(Xt,p,"boneMatrices");}}return s&&(n.lights&&P(f,u),e&&n.fog&&E(f,e),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial)&&_(f,n),n.isLineBasicMaterial?b(f,n):n.isLineDashedMaterial?(b(f,n),x(f,n)):n.isPointsMaterial?w(f,n):n.isMeshLambertMaterial?S(f,n):n.isMeshToonMaterial?C(f,n):n.isMeshPhongMaterial?M(f,n):n.isMeshPhysicalMaterial?O(f,n):n.isMeshStandardMaterial?I(f,n):n.isMeshDepthMaterial?n.displacementMap&&(f.displacementMap.value=n.displacementMap,f.displacementScale.value=n.displacementScale,f.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&T(f,n),void 0!==f.ltcMat&&(f.ltcMat.value=ro.LTC_MAT_TEXTURE),void 0!==f.ltcMag&&(f.ltcMag.value=ro.LTC_MAG_TEXTURE),X.upload(Xt,r.uniformsList,f,Q)),h.setValue(Xt,"modelViewMatrix",i.modelViewMatrix),h.setValue(Xt,"normalMatrix",i.normalMatrix),h.setValue(Xt,"modelMatrix",i.matrixWorld),c;}function _(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var i=n.offset,r=n.repeat;t.offsetRepeat.value.set(i.x,i.y,r.x,r.y);}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio;}function b(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity;}function x(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale;}function w(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*vt,t.scale.value=.5*gt,t.map.value=e.map,null!==e.map){var n=e.map.offset,i=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,i.x,i.y);}}function E(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density);}function S(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);}function M(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);}function C(t,e){M(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap);}function I(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity);}function O(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,I(t,e);}function T(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);}function P(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e;}function A(t){for(var e=0,n=0,i=t.length;n<i;n++){var r=t[n];r.castShadow&&(Rt.shadows[e]=r,e++);}Rt.shadows.length=e;}function L(t,e){var n,r,o,a,s,u,l,c,h=0,f=0,d=0,p=e.matrixWorldInverse,g=0,v=0,m=0,y=0,_=0;for(n=0,r=t.length;n<r;n++){if(o=t[n],s=o.color,u=o.intensity,l=o.distance,c=o.shadow&&o.shadow.map?o.shadow.map.texture:null,o.isAmbientLight)h+=s.r*u,f+=s.g*u,d+=s.b*u;else if(o.isDirectionalLight){var b=ee.get(o);b.color.copy(o.color).multiplyScalar(o.intensity),b.direction.setFromMatrixPosition(o.matrixWorld),Tt.setFromMatrixPosition(o.target.matrixWorld),b.direction.sub(Tt),b.direction.transformDirection(p),b.shadow=o.castShadow,o.castShadow&&(a=o.shadow,b.shadowBias=a.bias,b.shadowRadius=a.radius,b.shadowMapSize=a.mapSize),Rt.directionalShadowMap[g]=c,Rt.directionalShadowMatrix[g]=o.shadow.matrix,Rt.directional[g]=b,g++;}else if(o.isSpotLight){var b=ee.get(o);b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),b.color.copy(s).multiplyScalar(u),b.distance=l,b.direction.setFromMatrixPosition(o.matrixWorld),Tt.setFromMatrixPosition(o.target.matrixWorld),b.direction.sub(Tt),b.direction.transformDirection(p),b.coneCos=Math.cos(o.angle),b.penumbraCos=Math.cos(o.angle*(1-o.penumbra)),b.decay=0===o.distance?0:o.decay,b.shadow=o.castShadow,o.castShadow&&(a=o.shadow,b.shadowBias=a.bias,b.shadowRadius=a.radius,b.shadowMapSize=a.mapSize),Rt.spotShadowMap[m]=c,Rt.spotShadowMatrix[m]=o.shadow.matrix,Rt.spot[m]=b,m++;}else if(o.isRectAreaLight){var b=ee.get(o);b.color.copy(s).multiplyScalar(u/(o.width*o.height)),b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),kt.identity(),Nt.copy(o.matrixWorld),Nt.premultiply(p),kt.extractRotation(Nt),b.halfWidth.set(.5*o.width,0,0),b.halfHeight.set(0,.5*o.height,0),b.halfWidth.applyMatrix4(kt),b.halfHeight.applyMatrix4(kt),Rt.rectArea[y]=b,y++;}else if(o.isPointLight){var b=ee.get(o);b.position.setFromMatrixPosition(o.matrixWorld),b.position.applyMatrix4(p),b.color.copy(o.color).multiplyScalar(o.intensity),b.distance=o.distance,b.decay=0===o.distance?0:o.decay,b.shadow=o.castShadow,o.castShadow&&(a=o.shadow,b.shadowBias=a.bias,b.shadowRadius=a.radius,b.shadowMapSize=a.mapSize),Rt.pointShadowMap[v]=c,void 0===Rt.pointShadowMatrix[v]&&(Rt.pointShadowMatrix[v]=new i()),Tt.setFromMatrixPosition(o.matrixWorld).negate(),Rt.pointShadowMatrix[v].identity().setPosition(Tt),Rt.point[v]=b,v++;}else if(o.isHemisphereLight){var b=ee.get(o);b.direction.setFromMatrixPosition(o.matrixWorld),b.direction.transformDirection(p),b.direction.normalize(),b.skyColor.copy(o.color).multiplyScalar(u),b.groundColor.copy(o.groundColor).multiplyScalar(u),Rt.hemi[_]=b,_++;}}Rt.ambient[0]=h,Rt.ambient[1]=f,Rt.ambient[2]=d,Rt.directional.length=g,Rt.spot.length=m,Rt.rectArea.length=y,Rt.point.length=v,Rt.hemi.length=_,Rt.hash=g+","+v+","+m+","+y+","+_+","+Rt.shadows.length;}function N(){var t=ht;return t>=Yt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Yt.maxTextures),ht+=1,t;}function k(t){var e;if(t===Gi)return Xt.REPEAT;if(t===Vi)return Xt.CLAMP_TO_EDGE;if(t===Xi)return Xt.MIRRORED_REPEAT;if(t===Hi)return Xt.NEAREST;if(t===qi)return Xt.NEAREST_MIPMAP_NEAREST;if(t===Yi)return Xt.NEAREST_MIPMAP_LINEAR;if(t===Wi)return Xt.LINEAR;if(t===Zi)return Xt.LINEAR_MIPMAP_NEAREST;if(t===Ji)return Xt.LINEAR_MIPMAP_LINEAR;if(t===Ki)return Xt.UNSIGNED_BYTE;if(t===or)return Xt.UNSIGNED_SHORT_4_4_4_4;if(t===ar)return Xt.UNSIGNED_SHORT_5_5_5_1;if(t===sr)return Xt.UNSIGNED_SHORT_5_6_5;if(t===Qi)return Xt.BYTE;if(t===$i)return Xt.SHORT;if(t===tr)return Xt.UNSIGNED_SHORT;if(t===er)return Xt.INT;if(t===nr)return Xt.UNSIGNED_INT;if(t===ir)return Xt.FLOAT;if(t===rr&&(e=qt.get("OES_texture_half_float"),null!==e))return e.HALF_FLOAT_OES;if(t===lr)return Xt.ALPHA;if(t===cr)return Xt.RGB;if(t===hr)return Xt.RGBA;if(t===fr)return Xt.LUMINANCE;if(t===dr)return Xt.LUMINANCE_ALPHA;if(t===gr)return Xt.DEPTH_COMPONENT;if(t===vr)return Xt.DEPTH_STENCIL;if(t===ni)return Xt.FUNC_ADD;if(t===ii)return Xt.FUNC_SUBTRACT;if(t===ri)return Xt.FUNC_REVERSE_SUBTRACT;if(t===si)return Xt.ZERO;if(t===ui)return Xt.ONE;if(t===li)return Xt.SRC_COLOR;if(t===ci)return Xt.ONE_MINUS_SRC_COLOR;if(t===hi)return Xt.SRC_ALPHA;if(t===fi)return Xt.ONE_MINUS_SRC_ALPHA;if(t===di)return Xt.DST_ALPHA;if(t===pi)return Xt.ONE_MINUS_DST_ALPHA;if(t===gi)return Xt.DST_COLOR;if(t===vi)return Xt.ONE_MINUS_DST_COLOR;if(t===mi)return Xt.SRC_ALPHA_SATURATE;if((t===mr||t===yr||t===_r||t===br)&&(e=qt.get("WEBGL_compressed_texture_s3tc"),null!==e)){if(t===mr)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===yr)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===_r)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===br)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT;}if((t===xr||t===wr||t===Er||t===Sr)&&(e=qt.get("WEBGL_compressed_texture_pvrtc"),null!==e)){if(t===xr)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===wr)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Er)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Sr)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;}if(t===Mr&&(e=qt.get("WEBGL_compressed_texture_etc1"),null!==e))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===oi||t===ai)&&(e=qt.get("EXT_blend_minmax"),null!==e)){if(t===oi)return e.MIN_EXT;if(t===ai)return e.MAX_EXT;}return t===ur&&(e=qt.get("WEBGL_depth_texture"),null!==e)?e.UNSIGNED_INT_24_8_WEBGL:0;}console.log("THREE.WebGLRenderer",An),t=t||{};var R=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),D=void 0!==t.context?t.context:null,F=void 0!==t.alpha&&t.alpha,B=void 0===t.depth||t.depth,j=void 0===t.stencil||t.stencil,U=void 0!==t.antialias&&t.antialias,z=void 0===t.premultipliedAlpha||t.premultipliedAlpha,G=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,V=[],Y=null,W=new Float32Array(8),J=[],K=[];this.domElement=R,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Pi,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Q=this,$=null,tt=null,it=null,rt=-1,ot="",at=null,st=new H(),ut=null,lt=new H(),ht=0,ft=new q(0),dt=0,pt=R.width,gt=R.height,vt=1,mt=new H(0,0,pt,gt),yt=!1,_t=new H(0,0,pt,gt),bt=new et(),xt=new ue(),wt=!1,Et=!1,St=new i(),Tt=new n(),Nt=new i(),kt=new i(),Rt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Gt={geometries:0,textures:0},Vt={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Vt,memory:Gt,programs:null};var Xt;try{var Ht={alpha:F,depth:B,stencil:j,antialias:U,premultipliedAlpha:z,preserveDrawingBuffer:G};if(Xt=D||R.getContext("webgl",Ht)||R.getContext("experimental-webgl",Ht),null===Xt)throw null!==R.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Xt.getShaderPrecisionFormat&&(Xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1};}),R.addEventListener("webglcontextlost",a,!1);}catch(t){console.error("THREE.WebGLRenderer: "+t);}var qt=new se(Xt);qt.get("WEBGL_depth_texture"),qt.get("OES_texture_float"),qt.get("OES_texture_float_linear"),qt.get("OES_texture_half_float"),qt.get("OES_texture_half_float_linear"),qt.get("OES_standard_derivatives"),qt.get("ANGLE_instanced_arrays"),qt.get("OES_element_index_uint")&&(Mt.MaxIndex=4294967296);var Yt=new ae(Xt,qt,t),Wt=new oe(Xt,qt,k),Zt=new re(),Jt=new ie(Xt,qt,Wt,Zt,Yt,k,Gt),Kt=new Lt(Xt),Qt=new jt(Xt,Kt,Gt),$t=new zt(Xt,Qt,Vt),te=new ne(this,Yt),ee=new Ut(),le=new Dt();this.info.programs=te.programs;var ce,he,fe,de,pe=new Bt(Xt,qt,Vt),ge=new Ft(Xt,qt,Vt);r(),this.context=Xt,this.capabilities=Yt,this.extensions=qt,this.properties=Zt,this.state=Wt;var ve=new nt(this,Rt,$t,Yt);this.shadowMap=ve;var me=new t.SpritePlugin(this,J);this.getContext=function(){return Xt;},this.getContextAttributes=function(){return Xt.getContextAttributes();},this.forceContextLoss=function(){var t=qt.get("WEBGL_lose_context");t&&t.loseContext();},this.getMaxAnisotropy=function(){return Yt.getMaxAnisotropy();},this.getPrecision=function(){return Yt.precision;},this.getPixelRatio=function(){return vt;},this.setPixelRatio=function(t){void 0!==t&&(vt=t,this.setSize(_t.z,_t.w,!1));},this.getSize=function(){return{width:pt,height:gt};},this.setSize=function(t,e,n){pt=t,gt=e,R.width=t*vt,R.height=e*vt,n!==!1&&(R.style.width=t+"px",R.style.height=e+"px"),this.setViewport(0,0,t,e);},this.setViewport=function(t,e,n,i){Wt.viewport(_t.set(t,e,n,i));},this.setScissor=function(t,e,n,i){Wt.scissor(mt.set(t,e,n,i));},this.setScissorTest=function(t){Wt.setScissorTest(yt=t);},this.getClearColor=function(){return ft;},this.setClearColor=function(t,e){ft.set(t),dt=void 0!==e?e:1,Wt.buffers.color.setClear(ft.r,ft.g,ft.b,dt,z);},this.getClearAlpha=function(){return dt;},this.setClearAlpha=function(t){dt=t,Wt.buffers.color.setClear(ft.r,ft.g,ft.b,dt,z);},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=Xt.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=Xt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Xt.STENCIL_BUFFER_BIT),Xt.clear(i);},this.clearColor=function(){this.clear(!0,!1,!1);},this.clearDepth=function(){this.clear(!1,!0,!1);},this.clearStencil=function(){this.clear(!1,!1,!0);},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i);},this.resetGLState=o,this.dispose=function(){R.removeEventListener("webglcontextlost",a,!1),le.dispose();},this.renderBufferImmediate=function(t,e,n){Wt.initAttributes();var i=Zt.get(t);t.hasPositions&&!i.position&&(i.position=Xt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=Xt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=Xt.createBuffer()),t.hasColors&&!i.color&&(i.color=Xt.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.position),Xt.bufferData(Xt.ARRAY_BUFFER,t.positionArray,Xt.DYNAMIC_DRAW),Wt.enableAttribute(r.position),Xt.vertexAttribPointer(r.position,3,Xt.FLOAT,!1,0,0)),t.hasNormals){if(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===Hn)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=l,s[o+2]=c,s[o+3]=u,s[o+4]=l,s[o+5]=c,s[o+6]=u,s[o+7]=l,s[o+8]=c;}Xt.bufferData(Xt.ARRAY_BUFFER,t.normalArray,Xt.DYNAMIC_DRAW),Wt.enableAttribute(r.normal),Xt.vertexAttribPointer(r.normal,3,Xt.FLOAT,!1,0,0);}t.hasUvs&&n.map&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.uv),Xt.bufferData(Xt.ARRAY_BUFFER,t.uvArray,Xt.DYNAMIC_DRAW),Wt.enableAttribute(r.uv),Xt.vertexAttribPointer(Kt.uv,2,Xt.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==Yn&&(Xt.bindBuffer(Xt.ARRAY_BUFFER,i.color),Xt.bufferData(Xt.ARRAY_BUFFER,t.colorArray,Xt.DYNAMIC_DRAW),Wt.enableAttribute(r.color),Xt.vertexAttribPointer(r.color,3,Xt.FLOAT,!1,0,0)),Wt.disableUnusedAttributes(),Xt.drawArrays(Xt.TRIANGLES,0,t.count),t.count=0;},this.renderBufferDirect=function(t,n,i,r,o,a){Wt.setMaterial(r);var s=y(t,n,r,o),u=i.id+"_"+s.id+"_"+(r.wireframe===!0),l=!1;u!==ot&&(ot=u,l=!0);var c=o.morphTargetInfluences;if(void 0!==c){for(var h=[],p=0,g=c.length;p<g;p++){var v=c[p];h.push([v,p]);}h.sort(d),h.length>8&&(h.length=8);for(var m=i.morphAttributes,p=0,g=h.length;p<g;p++){var v=h[p];if(W[p]=v[0],0!==v[0]){var _=v[1];r.morphTargets===!0&&m.position&&i.addAttribute("morphTarget"+p,m.position[_]),r.morphNormals===!0&&m.normal&&i.addAttribute("morphNormal"+p,m.normal[_]);}else r.morphTargets===!0&&i.removeAttribute("morphTarget"+p),r.morphNormals===!0&&i.removeAttribute("morphNormal"+p);}for(var p=h.length,b=W.length;p<b;p++){W[p]=0;}s.getUniforms().setValue(Xt,"morphTargetInfluences",W),l=!0;}var _=i.index,x=i.attributes.position,w=1;r.wireframe===!0&&(_=Qt.getWireframeAttribute(i),w=2);var E=pe;null!==_&&(E=ge,E.setIndex(_)),l&&(f(r,s,i),null!==_&&Xt.bindBuffer(Xt.ELEMENT_ARRAY_BUFFER,Kt.get(_).buffer));var S=0;null!==_?S=_.count:void 0!==x&&(S=x.count);var M=i.drawRange.start*w,C=i.drawRange.count*w,I=null!==a?a.start*w:0,O=null!==a?a.count*w:1/0,T=Math.max(M,I),P=Math.min(S,M+C,I+O)-1,A=Math.max(0,P-T+1);if(0!==A){if(o.isMesh){if(r.wireframe===!0)Wt.setLineWidth(r.wireframeLinewidth*e()),E.setMode(Xt.LINES);else switch(o.drawMode){case Rr:E.setMode(Xt.TRIANGLES);break;case Dr:E.setMode(Xt.TRIANGLE_STRIP);break;case Fr:E.setMode(Xt.TRIANGLE_FAN);}}else if(o.isLine){var L=r.linewidth;void 0===L&&(L=1),Wt.setLineWidth(L*e()),o.isLineSegments?E.setMode(Xt.LINES):o.isLineLoop?E.setMode(Xt.LINE_LOOP):E.setMode(Xt.LINE_STRIP);}else o.isPoints&&E.setMode(Xt.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&E.renderInstances(i,T,A):E.render(T,A);}},this.render=function(t,e,n,i){if(void 0!==e&&e.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");ot="",rt=-1,at=null,t.autoUpdate===!0&&t.updateMatrixWorld(),e.onBeforeRender(Q),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),St.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),bt.setFromMatrix(St),V.length=0,J.length=0,K.length=0,Et=this.localClippingEnabled,wt=xt.init(this.clippingPlanes,Et,e),Y=le.get(t,e),Y.init(),p(t,e,Q.sortObjects),Y.finish(),Q.sortObjects===!0&&Y.sort(),wt&&xt.beginShadows(),A(V),ve.render(t,e),L(V,e),wt&&xt.endShadows(),Vt.frame++,Vt.calls=0,Vt.vertices=0,Vt.faces=0,Vt.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var r=t.background;null===r?Wt.buffers.color.setClear(ft.r,ft.g,ft.b,dt,z):r&&r.isColor&&(Wt.buffers.color.setClear(r.r,r.g,r.b,1,z),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(void 0===fe&&(fe=new Pt(),de=new Ct(new It(5,5,5),new Z({uniforms:cs.cube.uniforms,vertexShader:cs.cube.vertexShader,fragmentShader:cs.cube.fragmentShader,side:Vn,depthTest:!1,depthWrite:!1,fog:!1}))),fe.projectionMatrix.copy(e.projectionMatrix),fe.matrixWorld.extractRotation(e.matrixWorld),fe.matrixWorldInverse.getInverse(fe.matrixWorld),de.material.uniforms.tCube.value=r,de.modelViewMatrix.multiplyMatrices(fe.matrixWorldInverse,de.matrixWorld),$t.update(de),Q.renderBufferDirect(fe,null,de.geometry,de.material,de,null)):r&&r.isTexture&&(void 0===ce&&(ce=new At(-1,1,1,-1,0,1),he=new Ct(new Ot(2,2),new ct({depthTest:!1,depthWrite:!1,fog:!1}))),he.material.map=r,$t.update(he),Q.renderBufferDirect(ce,null,he.geometry,he.material,he,null));var o=Y.opaque,a=Y.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&g(o,t,e,s),a.length&&g(a,t,e,s);}else o.length&&g(o,t,e),a.length&&g(a,t,e);me.render(t,e),n&&Jt.updateRenderTargetMipmap(n),Wt.buffers.depth.setTest(!0),Wt.buffers.depth.setMask(!0),Wt.buffers.color.setMask(!0),e.isArrayCamera&&e.enabled&&Q.setScissorTest(!1),e.onAfterRender(Q);},this.setFaceCulling=function(t,e){Wt.setCullFace(t),Wt.setFlipSided(e===Fn);},this.allocTextureUnit=N,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don\'t use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),Jt.setTexture2D(e,n);};}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),Jt.setTexture2D(e,n);};}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don\'t use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?Jt.setTextureCube(e,n):Jt.setTextureCubeDynamic(e,n);};}(),this.getRenderTarget=function(){return tt;},this.setRenderTarget=function(t){tt=t,t&&void 0===Zt.get(t).__webglFramebuffer&&Jt.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;if(t){var i=Zt.get(t);e=n?i.__webglFramebuffer[t.activeCubeFace]:i.__webglFramebuffer,st.copy(t.scissor),ut=t.scissorTest,lt.copy(t.viewport);}else e=null,st.copy(mt).multiplyScalar(vt),ut=yt,lt.copy(_t).multiplyScalar(vt);if(it!==e&&(Xt.bindFramebuffer(Xt.FRAMEBUFFER,e),it=e),Wt.scissor(st),Wt.setScissorTest(ut),Wt.viewport(lt),n){var r=Zt.get(t.texture);Xt.framebufferTexture2D(Xt.FRAMEBUFFER,Xt.COLOR_ATTACHMENT0,Xt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel);}},this.readRenderTargetPixels=function(t,e,n,i,r,o){if((t&&t.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Zt.get(t).__webglFramebuffer;if(a){var s=!1;a!==it&&(Xt.bindFramebuffer(Xt.FRAMEBUFFER,a),s=!0);try{var u=t.texture,l=u.format,c=u.type;if(l!==hr&&k(l)!==Xt.getParameter(Xt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Ki||k(c)===Xt.getParameter(Xt.IMPLEMENTATION_COLOR_READ_TYPE)||c===ir&&(qt.get("OES_texture_float")||qt.get("WEBGL_color_buffer_float"))||c===rr&&qt.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Xt.checkFramebufferStatus(Xt.FRAMEBUFFER)===Xt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&Xt.readPixels(e,n,i,r,k(l),k(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");}finally{s&&Xt.bindFramebuffer(Xt.FRAMEBUFFER,it);}}};}function ce(){at.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0;}function he(t){W.call(this),this.type="SpriteMaterial",this.color=new q(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t);}function fe(t){at.call(this),this.type="Sprite",this.material=void 0!==t?t:new he();}function de(t){W.call(this),this.type="LineBasicMaterial",this.color=new q(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t);}function pe(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new ge(t,e)):(at.call(this),this.type="Line",this.geometry=void 0!==t?t:new Mt(),void(this.material=void 0!==e?e:new de({color:16777215*Math.random()})));}function ge(t,e){pe.call(this,t,e),this.type="LineSegments";}function ve(t){W.call(this),this.type="PointsMaterial",this.color=new q(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t);}function me(t,e){at.call(this),this.type="Points",this.geometry=void 0!==t?t:new Mt(),this.material=void 0!==e?e:new ve({color:16777215*Math.random()});}function ye(){at.call(this),this.type="Group";}function _e(t,e,n,i,r,o){St.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new be(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices();}function be(t,e,i,r,a){function s(){for(f=0;f<e;f++){u(f);}u(a===!1?e:0),c(),l();}function u(n){var o=t.getPointAt(n/e),a=h.normals[n],s=h.binormals[n];for(d=0;d<=r;d++){var u=d/r*Math.PI*2,l=Math.sin(u),c=-Math.cos(u);g.x=c*a.x+l*s.x,g.y=c*a.y+l*s.y,g.z=c*a.z+l*s.z,g.normalize(),y.push(g.x,g.y,g.z),p.x=o.x+i*g.x,p.y=o.y+i*g.y,p.z=o.z+i*g.z,m.push(p.x,p.y,p.z);}}function l(){for(d=1;d<=e;d++){for(f=1;f<=r;f++){var t=(r+1)*(d-1)+(f-1),n=(r+1)*d+(f-1),i=(r+1)*d+f,o=(r+1)*(d-1)+f;b.push(t,n,o),b.push(n,i,o);}}}function c(){for(f=0;f<=e;f++){for(d=0;d<=r;d++){v.x=f/e,v.y=d/r,_.push(v.x,v.y);}}}Mt.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var h=t.computeFrenetFrames(e,a);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var f,d,p=new n(),g=new n(),v=new o(),m=[],y=[],_=[],b=[];s(),this.setIndex(b),this.addAttribute("position",new _t(m,3)),this.addAttribute("normal",new _t(y,3)),this.addAttribute("uv",new _t(_,2));}function xe(t,e,n,i,r,o,a){St.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new we(t,e,n,i,r,o,a)),this.mergeVertices();}function we(t,e,i,r,o,a,s){Mt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:o,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;var u,l,c=a+s,h=0,f=[],d=new n(),p=new n(),g=[],v=[],m=[],y=[];for(l=0;l<=i;l++){var _=[],b=l/i;for(u=0;u<=e;u++){var x=u/e;d.x=-t*Math.cos(r+x*o)*Math.sin(a+b*s),d.y=t*Math.cos(a+b*s),d.z=t*Math.sin(r+x*o)*Math.sin(a+b*s),v.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),m.push(p.x,p.y,p.z),y.push(x,1-b),_.push(h++);}f.push(_);}for(l=0;l<i;l++){for(u=0;u<e;u++){var w=f[l][u+1],E=f[l][u],S=f[l+1][u],M=f[l+1][u+1];(0!==l||a>0)&&g.push(w,E,M),(l!==i-1||c<Math.PI)&&g.push(E,S,M);}}this.setIndex(g),this.addAttribute("position",new _t(v,3)),this.addAttribute("normal",new _t(m,3)),this.addAttribute("uv",new _t(y,2));}function Ee(t,e){St.call(this),this.type="ShapeGeometry","object"===("undefined"==typeof e?"undefined":s(e))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Se(t,e)),this.mergeVertices();}function Se(t,e){function n(t){var n,s,l,c=r.length/3,h=t.extractPoints(e),f=h.shape,d=h.holes;if(gs.isClockWise(f)===!1)for(f=f.reverse(),n=0,s=d.length;n<s;n++){l=d[n],gs.isClockWise(l)===!0&&(d[n]=l.reverse());}var p=gs.triangulateShape(f,d);for(n=0,s=d.length;n<s;n++){l=d[n],f=f.concat(l);}for(n=0,s=f.length;n<s;n++){var g=f[n];r.push(g.x,g.y,0),o.push(0,0,1),a.push(g.x,g.y);}for(n=0,s=p.length;n<s;n++){var v=p[n],m=v[0]+c,y=v[1]+c,_=v[2]+c;i.push(m,y,_),u+=3;}}Mt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],o=[],a=[],s=0,u=0;if(Array.isArray(t)===!1)n(t);else for(var l=0;l<t.length;l++){n(t[l]),this.addGroup(s,u,l),s+=u,u=0;}this.setIndex(i),this.addAttribute("position",new _t(r,3)),this.addAttribute("normal",new _t(o,3)),this.addAttribute("uv",new _t(a,2));}function Me(t,e){St.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Ce(t,e)),this.mergeVertices();}function Ce(t,e){return"undefined"==typeof t?void(t=[]):(Mt.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeVertexNormals());}function Ie(t){W.call(this),this.type="MeshPhongMaterial",this.color=new q(16777215),this.specular=new q(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ci,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t);}function Oe(t,e,n){var i=this,r=!1,o=0,a=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,r===!1&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0;},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad());},this.itemError=function(t){void 0!==i.onError&&i.onError(t);};}function Te(t){this.manager=void 0!==t?t:ys;}function Pe(t){this.manager=void 0!==t?t:ys;}function Ae(t){this.manager=void 0!==t?t:ys;}function Le(t){this.manager=void 0!==t?t:ys,this.textures={};}function Ne(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){};}function ke(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n;}function Re(t,e,n,i){ke.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0;}function De(t,e,n,i){ke.call(this,t,e,n,i);}function Fe(t,e,n,i){ke.call(this,t,e,n,i);}function Be(t,e,n,i){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=_s.convertArray(e,this.TimeBufferType),this.values=_s.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize();}function je(t,e,n,i){Be.call(this,t,e,n,i);}function Ue(t,e,n,i){ke.call(this,t,e,n,i);}function ze(t,e,n,i){Be.call(this,t,e,n,i);}function Ge(t,e,n,i){Be.call(this,t,e,n,i);}function Ve(t,e,n,i){Be.call(this,t,e,n,i);}function Xe(t,e,n){Be.call(this,t,e,n);}function He(t,e,n,i){Be.call(this,t,e,n,i);}function qe(t,e,n,i){Be.apply(this,arguments);}function Ye(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Wr.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize();}function We(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:ys,this.withCredentials=!1;}function Ze(t,e){at.call(this),this.type="Light",this.color=new q(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0;}function Je(t,e,n){Ze.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(at.DefaultUp),this.updateMatrix(),this.groundColor=new q(e);}function Ke(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new o(512,512),this.map=null,this.matrix=new i();}function Qe(){Ke.call(this,new At(-5,5,5,-5,.5,500));}function $e(t,e){Ze.call(this,t,e),this.type="DirectionalLight",this.position.copy(at.DefaultUp),this.updateMatrix(),this.target=new at(),this.shadow=new Qe();}function tn(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t;}function en(t,e,n,i){this.ray=new it(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function get(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points;}}});}function nn(t,e){return t.distance-e.distance;}function rn(t,e,n,i){if(t.visible!==!1&&(t.raycast(e,n),i===!0))for(var r=t.children,o=0,a=r.length;o<a;o++){rn(r[o],e,n,!0);}}function on(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1;}function an(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this;}function sn(t,e){this.min=void 0!==t?t:new o(+(1/0),+(1/0)),this.max=void 0!==e?e:new o(-(1/0),-(1/0));}function un(){this.arcLengthDivisions=200;}function ln(){function t(t,o,a,s){e=t,n=a,i=-3*t+3*o-2*a-s,r=2*t-2*o+a+s;}var e=0,n=0,i=0,r=0;return{initCatmullRom:function initCatmullRom(e,n,i,r,o){t(n,i,o*(i-e),o*(r-n));},initNonuniformCatmullRom:function initNonuniformCatmullRom(e,n,i,r,o,a,s){var u=(n-e)/o-(i-e)/(o+a)+(i-n)/a,l=(i-n)/a-(r-n)/(a+s)+(r-i)/s;u*=a,l*=a,t(n,i,u,l);},calc:function calc(t){var o=t*t,a=o*t;return e+n*t+i*o+r*a;}};}function cn(t){un.call(this),this.points=t||[],this.closed=!1;}function hn(t,e){un.call(this),this.v1=t,this.v2=e;}function fn(t,e){un.call(this),this.v1=t,this.v2=e;}function dn(){un.call(this),this.curves=[],this.autoClose=!1;}function pn(t,e,n,i,r,o,a,s){un.call(this),this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0;}function gn(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t,u=t*s;return(2*n-2*i+o+a)*u+(-3*n+3*i-2*o-a)*s+o*t+n;}function vn(t,e){var n=1-t;return n*n*e;}function mn(t,e){return 2*(1-t)*t*e;}function yn(t,e){return t*t*e;}function _n(t,e,n,i){return vn(t,e)+mn(t,n)+yn(t,i);}function bn(t,e){var n=1-t;return n*n*n*e;}function xn(t,e){var n=1-t;return 3*n*n*t*e;}function wn(t,e){return 3*(1-t)*t*t*e;}function En(t,e){return t*t*t*e;}function Sn(t,e,n,i,r){return bn(t,e)+xn(t,n)+wn(t,i)+En(t,r);}function Mn(t){un.call(this),this.points=void 0===t?[]:t;}function Cn(t,e,n,i){un.call(this),this.v0=t,this.v1=e,this.v2=n,this.v3=i;}function In(t,e,n){un.call(this),this.v0=t,this.v1=e,this.v2=n;}function On(t){dn.call(this),this.currentPoint=new o(),t&&this.fromPoints(t);}function Tn(){On.apply(this,arguments),this.holes=[];}function Pn(){this.subPaths=[],this.currentPath=null;}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t;}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function get(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1];}}),void 0===a&&!function(){a=function a(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i){Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);}}return e;};}();var An="85dev",Ln={LEFT:0,MIDDLE:1,RIGHT:2},Nn=0,kn=1,Rn=2,Dn=3,Fn=0,Bn=1,jn=0,Un=1,zn=2,Gn=0,Vn=1,Xn=2,Hn=1,qn=2,Yn=0,Wn=1,Zn=2,Jn=0,Kn=1,Qn=2,$n=3,ti=4,ei=5,ni=100,ii=101,ri=102,oi=103,ai=104,si=200,ui=201,li=202,ci=203,hi=204,fi=205,di=206,pi=207,gi=208,vi=209,mi=210,yi=0,_i=1,bi=2,xi=3,wi=4,Ei=5,Si=6,Mi=7,Ci=0,Ii=1,Oi=2,Ti=0,Pi=1,Ai=2,Li=3,Ni=4,ki=300,Ri=301,Di=302,Fi=303,Bi=304,ji=305,Ui=306,zi=307,Gi=1e3,Vi=1001,Xi=1002,Hi=1003,qi=1004,Yi=1005,Wi=1006,Zi=1007,Ji=1008,Ki=1009,Qi=1010,$i=1011,tr=1012,er=1013,nr=1014,ir=1015,rr=1016,or=1017,ar=1018,sr=1019,ur=1020,lr=1021,cr=1022,hr=1023,fr=1024,dr=1025,pr=hr,gr=1026,vr=1027,mr=2001,yr=2002,_r=2003,br=2004,xr=2100,wr=2101,Er=2102,Sr=2103,Mr=2151,Cr=2200,Ir=2201,Or=2202,Tr=2300,Pr=2301,Ar=2302,Lr=2400,Nr=2401,kr=2402,Rr=0,Dr=1,Fr=2,Br=3e3,jr=3001,Ur=3007,zr=3002,Gr=3003,Vr=3004,Xr=3005,Hr=3006,qr=3200,Yr=3201,Wr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),i=0;return function(){for(var r=0;r<36;r++){8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(i<=2&&(i=33554432+16777216*Math.random()|0),t=15&i,i>>=4,n[r]=e[19===r?3&t|8:t]);}return n.join("");};}(),clamp:function clamp(t,e,n){return Math.max(e,Math.min(n,t));},euclideanModulo:function euclideanModulo(t,e){return(t%e+e)%e;},mapLinear:function mapLinear(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e);},lerp:function lerp(t,e,n){return(1-n)*t+n*e;},smoothstep:function smoothstep(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t));},smootherstep:function smootherstep(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10));},randInt:function randInt(t,e){return t+Math.floor(Math.random()*(e-t+1));},randFloat:function randFloat(t,e){return t+Math.random()*(e-t);},randFloatSpread:function randFloatSpread(t){return t*(.5-Math.random());},degToRad:function degToRad(t){return t*Wr.DEG2RAD;},radToDeg:function radToDeg(t){return t*Wr.RAD2DEG;},isPowerOfTwo:function isPowerOfTwo(t){return 0===(t&t-1)&&0!==t;},nearestPowerOfTwo:function nearestPowerOfTwo(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2));},nextPowerOfTwo:function nextPowerOfTwo(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t;}};a(e,{slerp:function slerp(t,e,n,i){return n.copy(t).slerp(e,i);},slerpFlat:function slerpFlat(t,e,n,i,r,o,a){var s=n[i+0],u=n[i+1],l=n[i+2],c=n[i+3],h=r[o+0],f=r[o+1],d=r[o+2],p=r[o+3];if(c!==p||s!==h||u!==f||l!==d){var g=1-a,v=s*h+u*f+l*d+c*p,m=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*m);g=Math.sin(g*b)/_,a=Math.sin(a*b)/_;}var x=a*m;if(s=s*g+h*x,u=u*g+f*x,l=l*g+d*x,c=c*g+p*x,g===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w;}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c;}}),Object.defineProperties(e.prototype,{x:{get:function get(){return this._x;},set:function set(t){this._x=t,this.onChangeCallback();}},y:{get:function get(){return this._y;},set:function set(t){this._y=t,this.onChangeCallback();}},z:{get:function get(){return this._z;},set:function set(t){this._z=t,this.onChangeCallback();}},w:{get:function get(){return this._w;},set:function set(t){this._w=t,this.onChangeCallback();}}}),a(e.prototype,{set:function set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this;},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._w);},copy:function copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this;},setFromEuler:function setFromEuler(t,e){if((t&&t.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(i/2),c=a(r/2),h=s(n/2),f=s(i/2),d=s(r/2);return"XYZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"YXZ"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"ZXY"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d):"ZYX"===o?(this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d):"YZX"===o?(this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d):"XZY"===o&&(this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d),e!==!1&&this.onChangeCallback(),this;},setFromAxisAngle:function setFromAxisAngle(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this;},setFromRotationMatrix:function setFromRotationMatrix(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=i+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(o-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(a-r)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this;},setFromUnitVectors:function(){var t,e=new n(),i=1e-6;return function(r,o){return void 0===e&&(e=new n()),t=r.dot(o)+1,t<i?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,o),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize();};}(),inverse:function inverse(){return this.conjugate().normalize();},conjugate:function conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this;},dot:function dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w;},lengthSq:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w;},length:function length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w);},normalize:function normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this;},multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t);},premultiply:function premultiply(t){return this.multiplyQuaternions(t,this);},multiplyQuaternions:function multiplyQuaternions(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+i*u-r*s,this._y=i*l+o*s+r*a-n*u,this._z=r*l+o*u+n*s-i*a,this._w=o*l-n*a-i*s-r*u,this.onChangeCallback(),this;},slerp:function slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-e)*u)/s,c=Math.sin(e*u)/s;return this._w=o*l+this._w*c,this._x=n*l+this._x*c,this._y=i*l+this._y*c,this._z=r*l+this._z*c,this.onChangeCallback(),this;},equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w;},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t;},onChange:function onChange(t){return this.onChangeCallback=t,this;},onChangeCallback:function onChangeCallback(){}}),a(n.prototype,{isVector3:!0,set:function set(t,e,n){return this.x=t,this.y=e,this.z=n,this;},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this;},setX:function setX(t){return this.x=t,this;},setY:function setY(t){return this.y=t,this;},setZ:function setZ(t){return this.z=t,this;},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t);}return this;},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z);},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this;},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this);},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this;},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this;},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this;},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this);},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this;},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this;},multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this);},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this;},multiplyVectors:function multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this;},applyEuler:function(){var t=new e();return function(e){return(e&&e.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e));};}(),applyAxisAngle:function(){var t=new e();return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n));};}(),applyMatrix3:function applyMatrix3(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this;},applyMatrix4:function applyMatrix4(t){var e=this.x,n=this.y,i=this.z,r=t.elements;this.x=r[0]*e+r[4]*n+r[8]*i+r[12],this.y=r[1]*e+r[5]*n+r[9]*i+r[13],this.z=r[2]*e+r[6]*n+r[10]*i+r[14];var o=r[3]*e+r[7]*n+r[11]*i+r[15];return this.divideScalar(o);},applyQuaternion:function applyQuaternion(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*i-a*n,l=s*n+a*e-r*i,c=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=u*s+h*-r+l*-a-c*-o,this.y=l*s+h*-o+c*-r-u*-a,this.z=c*s+h*-a+u*-o-l*-r,this;},project:function(){var t=new i();return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t);};}(),unproject:function(){var t=new i();return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t);};}(),transformDirection:function transformDirection(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize();},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this;},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t);},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this;},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this;},clamp:function clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this;},clampScalar:function(){var t=new n(),e=new n();return function(n,i){return t.set(n,n,n),e.set(i,i,i),this.clamp(t,e);};}(),clampLength:function clampLength(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n);},floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this;},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this;},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this;},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this;},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this;},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z;},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z;},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);},lengthManhattan:function lengthManhattan(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z);},normalize:function normalize(){return this.divideScalar(this.length());},setLength:function setLength(t){return this.multiplyScalar(t/this.length());},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this;},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t);},cross:function cross(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,i=this.y,r=this.z;return this.x=i*t.z-r*t.y,this.y=r*t.x-n*t.z,this.z=n*t.y-i*t.x,this;},crossVectors:function crossVectors(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this;},projectOnVector:function projectOnVector(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e);},projectOnPlane:function(){var t=new n();return function(e){return t.copy(this).projectOnVector(e),this.sub(t);};}(),reflect:function(){var t=new n();return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)));};}(),angleTo:function angleTo(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Wr.clamp(e,-1,1));},distanceTo:function distanceTo(t){return Math.sqrt(this.distanceToSquared(t));},distanceToSquared:function distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i;},distanceToManhattan:function distanceToManhattan(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z);},setFromSpherical:function setFromSpherical(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this;},setFromCylindrical:function setFromCylindrical(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this;},setFromMatrixPosition:function setFromMatrixPosition(t){return this.setFromMatrixColumn(t,3);},setFromMatrixScale:function setFromMatrixScale(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this;},setFromMatrixColumn:function setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e);},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z;},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t;},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this;}}),a(i.prototype,{isMatrix4:!0,set:function set(t,e,n,i,r,o,a,s,u,l,c,h,f,d,p,g){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=g,this;},identity:function identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this;},clone:function clone(){return new i().fromArray(this.elements);},copy:function copy(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this;},copyPosition:function copyPosition(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this;},extractBasis:function extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this;},makeBasis:function makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this;},extractRotation:function(){var t=new n();return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this;};}(),makeRotationFromEuler:function makeRotationFromEuler(t){(t&&t.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),u=Math.sin(i),l=Math.cos(r),c=Math.sin(r);if("XYZ"===t.order){var h=o*l,f=o*c,d=a*l,p=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-a*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=o*s;}else if("YXZ"===t.order){var g=s*l,v=s*c,m=u*l,y=u*c;e[0]=g+y*a,e[4]=m*a-v,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=v*a-m,e[6]=y+g*a,e[10]=o*s;}else if("ZXY"===t.order){var g=s*l,v=s*c,m=u*l,y=u*c;e[0]=g-y*a,e[4]=-o*c,e[8]=m+v*a,e[1]=v+m*a,e[5]=o*l,e[9]=y-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s;}else if("ZYX"===t.order){var h=o*l,f=o*c,d=a*l,p=a*c;e[0]=s*l,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*c,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=a*s,e[10]=o*s;}else if("YZX"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*l,e[4]=w-_*c,e[8]=x*c+b,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=b*c+x,e[10]=_-w*c;}else if("XZY"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=_*c+w,e[5]=o*l,e[9]=b*c-x,e[2]=x*c-b,e[6]=a*l,e[10]=w*c+_;}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this;},makeRotationFromQuaternion:function makeRotationFromQuaternion(t){var e=this.elements,n=t._x,i=t._y,r=t._z,o=t._w,a=n+n,s=i+i,u=r+r,l=n*a,c=n*s,h=n*u,f=i*s,d=i*u,p=r*u,g=o*a,v=o*s,m=o*u;return e[0]=1-(f+p),e[4]=c-m,e[8]=h+v,e[1]=c+m,e[5]=1-(l+p),e[9]=d-g,e[2]=h-v,e[6]=d+g,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this;},lookAt:function(){var t=new n(),e=new n(),i=new n();return function(n,r,o){var a=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(o,i),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(o,i)),t.normalize(),e.crossVectors(i,t),a[0]=t.x,a[4]=e.x,a[8]=i.x,a[1]=t.y,a[5]=e.y,a[9]=i.y,a[2]=t.z,a[6]=e.z,a[10]=i.z,this;};}(),multiply:function multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t);},premultiply:function premultiply(t){return this.multiplyMatrices(t,this);},multiplyMatrices:function multiplyMatrices(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],g=n[10],v=n[14],m=n[3],y=n[7],_=n[11],b=n[15],x=i[0],w=i[4],E=i[8],S=i[12],M=i[1],C=i[5],I=i[9],O=i[13],T=i[2],P=i[6],A=i[10],L=i[14],N=i[3],k=i[7],R=i[11],D=i[15];return r[0]=o*x+a*M+s*T+u*N,r[4]=o*w+a*C+s*P+u*k,r[8]=o*E+a*I+s*A+u*R,r[12]=o*S+a*O+s*L+u*D,r[1]=l*x+c*M+h*T+f*N,r[5]=l*w+c*C+h*P+f*k,r[9]=l*E+c*I+h*A+f*R,r[13]=l*S+c*O+h*L+f*D,r[2]=d*x+p*M+g*T+v*N,r[6]=d*w+p*C+g*P+v*k,r[10]=d*E+p*I+g*A+v*R,r[14]=d*S+p*O+g*L+v*D,r[3]=m*x+y*M+_*T+b*N,r[7]=m*w+y*C+_*P+b*k,r[11]=m*E+y*I+_*A+b*R,r[15]=m*S+y*O+_*L+b*D,this;},multiplyScalar:function multiplyScalar(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this;},applyToBufferAttribute:function(){var t=new n();return function(e){for(var n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);}return e;};}(),determinant:function determinant(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14],d=t[3],p=t[7],g=t[11],v=t[15];return d*(+r*s*c-i*u*c-r*a*h+n*u*h+i*a*f-n*s*f)+p*(+e*s*f-e*u*h+r*o*h-i*o*f+i*u*l-r*s*l)+g*(+e*u*c-e*a*f-r*o*c+n*o*f+r*a*l-n*u*l)+v*(-i*a*l-e*s*c+e*a*h+i*o*c-n*o*h+n*s*l);},transpose:function transpose(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this;},setPosition:function setPosition(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this;},getInverse:function getInverse(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],u=i[4],l=i[5],c=i[6],h=i[7],f=i[8],d=i[9],p=i[10],g=i[11],v=i[12],m=i[13],y=i[14],_=i[15],b=d*y*h-m*p*h+m*c*g-l*y*g-d*c*_+l*p*_,x=v*p*h-f*y*h-v*c*g+u*y*g+f*c*_-u*p*_,w=f*m*h-v*d*h+v*l*g-u*m*g-f*l*_+u*d*_,E=v*d*c-f*m*c-v*l*p+u*m*p+f*l*y-u*d*y,S=r*b+o*x+a*w+s*E;if(0===S){var M="THREE.Matrix4.getInverse(): can\'t invert matrix, determinant is 0";if(e===!0)throw new Error(M);return console.warn(M),this.identity();}var C=1/S;return n[0]=b*C,n[1]=(m*p*s-d*y*s-m*a*g+o*y*g+d*a*_-o*p*_)*C,n[2]=(l*y*s-m*c*s+m*a*h-o*y*h-l*a*_+o*c*_)*C,n[3]=(d*c*s-l*p*s-d*a*h+o*p*h+l*a*g-o*c*g)*C,n[4]=x*C,n[5]=(f*y*s-v*p*s+v*a*g-r*y*g-f*a*_+r*p*_)*C,n[6]=(v*c*s-u*y*s-v*a*h+r*y*h+u*a*_-r*c*_)*C,n[7]=(u*p*s-f*c*s+f*a*h-r*p*h-u*a*g+r*c*g)*C,n[8]=w*C,n[9]=(v*d*s-f*m*s-v*o*g+r*m*g+f*o*_-r*d*_)*C,n[10]=(u*m*s-v*l*s+v*o*h-r*m*h-u*o*_+r*l*_)*C,n[11]=(f*l*s-u*d*s-f*o*h+r*d*h+u*o*g-r*l*g)*C,n[12]=E*C,n[13]=(f*m*a-v*d*a+v*o*p-r*m*p-f*o*y+r*d*y)*C,n[14]=(v*l*a-u*m*a-v*o*c+r*m*c+u*o*y-r*l*y)*C,n[15]=(u*d*a-f*l*a+f*o*c-r*d*c-u*o*p+r*l*p)*C,this;},scale:function scale(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this;},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i));},makeTranslation:function makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this;},makeRotationX:function makeRotationX(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this;},makeRotationY:function makeRotationY(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this;},makeRotationZ:function makeRotationZ(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this;},makeRotationAxis:function makeRotationAxis(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,u=r*o,l=r*a;return this.set(u*o+n,u*a-i*s,u*s+i*a,0,u*a+i*s,l*a+n,l*s-i*o,0,u*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this;},makeScale:function makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this;},makeShear:function makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this;},compose:function compose(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this;},decompose:function(){var t=new n(),e=new i();return function(n,i,r){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length(),l=this.determinant();l<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var c=1/a,h=1/s,f=1/u;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=h,e.elements[5]*=h,e.elements[6]*=h,e.elements[8]*=f,e.elements[9]*=f,e.elements[10]*=f,i.setFromRotationMatrix(e),r.x=a,r.y=s,r.z=u,this;};}(),makePerspective:function makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),u=2*r/(n-i),l=(e+t)/(e-t),c=(n+i)/(n-i),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this;},makeOrthographic:function makeOrthographic(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),u=1/(n-i),l=1/(o-r),c=(e+t)*s,h=(n+i)*u,f=(o+r)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this;},equals:function equals(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++){if(e[i]!==n[i])return!1;}return!0;},fromArray:function fromArray(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++){this.elements[n]=t[n+e];}return this;},toArray:function toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t;}}),a(r.prototype,{addEventListener:function addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e);},hasEventListener:function hasEventListener(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1;},removeEventListener:function removeEventListener(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);r!==-1&&i.splice(r,1);}}},dispatchEvent:function dispatchEvent(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;var i=[],r=0,o=n.length;for(r=0;r<o;r++){i[r]=n[r];}for(r=0;r<o;r++){i[r].call(this,t);}}}}}),Object.defineProperties(o.prototype,{width:{get:function get(){return this.x;},set:function set(t){this.x=t;}},height:{get:function get(){return this.y;},set:function set(t){this.y=t;}}}),a(o.prototype,{isVector2:!0,set:function set(t,e){return this.x=t,this.y=e,this;},setScalar:function setScalar(t){return this.x=t,this.y=t,this;},setX:function setX(t){return this.x=t,this;},setY:function setY(t){return this.y=t,this;},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t);}return this;},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y);},copy:function copy(t){return this.x=t.x,this.y=t.y,this;},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this);},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this;},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this;},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this;},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this);},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this;},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this;},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this;},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this;},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this;},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t);},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this;},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this;},clamp:function clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this;},clampScalar:function(){var t=new o(),e=new o();return function(n,i){return t.set(n,n),e.set(i,i),this.clamp(t,e);};}(),clampLength:function clampLength(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n);},floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this;},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this;},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this;},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this;},negate:function negate(){return this.x=-this.x,this.y=-this.y,this;},dot:function dot(t){return this.x*t.x+this.y*t.y;},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y;},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y);},lengthManhattan:function lengthManhattan(){return Math.abs(this.x)+Math.abs(this.y);},normalize:function normalize(){return this.divideScalar(this.length());},angle:function t(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t;},distanceTo:function distanceTo(t){return Math.sqrt(this.distanceToSquared(t));},distanceToSquared:function distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n;},distanceToManhattan:function distanceToManhattan(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y);},setLength:function setLength(t){return this.multiplyScalar(t/this.length());},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this;},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t);},equals:function equals(t){return t.x===this.x&&t.y===this.y;},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t;},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this;},rotateAround:function rotateAround(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this;}});var Zr=0;u.DEFAULT_IMAGE=void 0,u.DEFAULT_MAPPING=ki,Object.defineProperty(u.prototype,"needsUpdate",{set:function set(t){t===!0&&this.version++;}}),a(u.prototype,r.prototype,{constructor:u,isTexture:!0,clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this;},toJSON:function toJSON(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png");}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Wr.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:e(i)}),n.image=i.uuid;}return t.textures[this.uuid]=n,n;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});},transformUv:function transformUv(t){if(this.mapping===ki){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case Gi:t.x=t.x-Math.floor(t.x);break;case Vi:t.x=t.x<0?0:1;break;case Xi:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);}if(t.y<0||t.y>1)switch(this.wrapT){case Gi:t.y=t.y-Math.floor(t.y);break;case Vi:t.y=t.y<0?0:1;break;case Xi:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);}this.flipY&&(t.y=1-t.y);}}}),l.prototype=Object.create(u.prototype),l.prototype.constructor=l,l.prototype.isDataTexture=!0,c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function get(){return this.image;},set:function set(t){this.image=t;}});var Jr=new u(),Kr=new c(),Qr=[],$r=[],to=new Float32Array(16),eo=new Float32Array(9);z.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(t,e[o.id]);}};var no=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;X.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer);},X.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i);},X.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];s.needsUpdate!==!1&&a.setValue(t,s.value,i);}},X.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o);}return n;},a(H.prototype,{isVector4:!0,set:function set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this;},setScalar:function setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this;},setX:function setX(t){return this.x=t,this;},setY:function setY(t){return this.y=t,this;},setZ:function setZ(t){return this.z=t,this;},setW:function setW(t){return this.w=t,this;},setComponent:function setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t);}return this;},getComponent:function getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t);}},clone:function clone(){return new this.constructor(this.x,this.y,this.z,this.w);},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this;},add:function add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this);},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this;},addVectors:function addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this;},addScaledVector:function addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this;},sub:function sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this);},subScalar:function subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this;},subVectors:function subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this;},multiplyScalar:function multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this;},applyMatrix4:function applyMatrix4(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this;},divideScalar:function divideScalar(t){return this.multiplyScalar(1/t);},setAxisAngleFromQuaternion:function setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this;},setAxisAngleFromRotationMatrix:function setAxisAngleFromRotationMatrix(t){var e,n,i,r,o=.01,a=.1,s=t.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],g=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(c-p)<o&&Math.abs(d-g)<o){if(Math.abs(l+h)<a&&Math.abs(c+p)<a&&Math.abs(d+g)<a&&Math.abs(u+f+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var m=(u+1)/2,y=(f+1)/2,_=(v+1)/2,b=(l+h)/4,x=(c+p)/4,w=(d+g)/4;return m>y&&m>_?m<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(m),i=b/n,r=x/n):y>_?y<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=b/i,r=w/i):_<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=x/r,i=w/r),this.set(n,i,r,e),this;}var E=Math.sqrt((g-d)*(g-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(g-d)/E,this.y=(c-p)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+v-1)/2),this;},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this;},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this;},clamp:function clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this;},clampScalar:function(){var t=new H(),e=new H();return function(n,i){return t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e);};}(),floor:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this;},ceil:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this;},round:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this;},roundToZero:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this;},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this;},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w;},lengthSq:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},length:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},lengthManhattan:function lengthManhattan(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w);},normalize:function normalize(){return this.divideScalar(this.length());},setLength:function setLength(t){return this.multiplyScalar(t/this.length());},lerp:function lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this;},lerpVectors:function lerpVectors(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t);},equals:function equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w;},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t;},fromBufferAttribute:function fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this;}});var io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a(q.prototype,{isColor:!0,r:1,g:1,b:1,set:function set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this;},setScalar:function setScalar(t){return this.r=t,this.g=t,this.b=t,this;},setHex:function setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this;},setRGB:function setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this;},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t;}return function(e,n,i){if(e=Wr.euclideanModulo(e,1),n=Wr.clamp(n,0,1),i=Wr.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3);}return this;};}(),setStyle:function setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.");}var n;if(n=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,s,u);}}}else if(n=/^\\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this;}if(t&&t.length>0){var l=io[t];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+t);}return this;},clone:function clone(){return new this.constructor(this.r,this.g,this.b);},copy:function copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this;},copyGammaToLinear:function copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this;},copyLinearToGamma:function copyLinearToGamma(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this;},convertGammaToLinear:function convertGammaToLinear(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this;},convertLinearToGamma:function convertLinearToGamma(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this;},getHex:function getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0;},getHexString:function getHexString(){return("000000"+this.getHex().toString(16)).slice(-6);},getHSL:function getHSL(t){var e,n,i=t||{h:0,s:0,l:0},r=this.r,o=this.g,a=this.b,s=Math.max(r,o,a),u=Math.min(r,o,a),l=(u+s)/2;if(u===s)e=0,n=0;else{var c=s-u;switch(n=l<=.5?c/(s+u):c/(2-s-u),s){case r:e=(o-a)/c+(o<a?6:0);break;case o:e=(a-r)/c+2;break;case a:e=(r-o)/c+4;}e/=6;}return i.h=e,i.s=n,i.l=l,i;},getStyle:function getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")";},offsetHSL:function offsetHSL(t,e,n){var i=this.getHSL();return i.h+=t,i.s+=e,i.l+=n,this.setHSL(i.h,i.s,i.l),this;},add:function add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this;},addColors:function addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this;},addScalar:function addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this;},sub:function sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this;},multiply:function multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this;},multiplyScalar:function multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this;},lerp:function lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this;},equals:function equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b;},fromArray:function fromArray(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t;},toJSON:function toJSON(){return this.getHex();}});var ro={common:{diffuse:{value:new q(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new H(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new o(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new q(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new q(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new H(0,0,1,1)}}},oo={merge:function merge(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i){e[r]=i[r];}}return e;},clone:function clone(t){var e={};for(var n in t){e[n]={};for(var i in t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r;}}return e;}},ao="#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n",so="#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n",uo="#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n",lo="#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n",co="#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif",ho="\\nvec3 transformed = vec3( position );\\n",fo="\\nvec3 objectNormal = vec3( normal );\\n",po="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tfloat theta = acos( dot( N, V ) );\\n\\tvec2 uv = vec2(\\n\\t\\tsqrt( saturate( roughness ) ),\\n\\t\\tsaturate( theta / ( 0.5 * PI ) ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\\n\\tint config = 0;\\n\\tif ( L[0].z > 0.0 ) config += 1;\\n\\tif ( L[1].z > 0.0 ) config += 2;\\n\\tif ( L[2].z > 0.0 ) config += 4;\\n\\tif ( L[3].z > 0.0 ) config += 8;\\n\\tn = 0;\\n\\tif ( config == 0 ) {\\n\\t} else if ( config == 1 ) {\\n\\t\\tn = 3;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 2 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 3 ) {\\n\\t\\tn = 4;\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t\\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t} else if ( config == 4 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t} else if ( config == 5 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 6 ) {\\n\\t\\tn = 4;\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 7 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\\n\\t\\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\\n\\t} else if ( config == 8 ) {\\n\\t\\tn = 3;\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] =  L[3];\\n\\t} else if ( config == 9 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t\\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t} else if ( config == 10 ) {\\n\\t\\tn = 0;\\n\\t} else if ( config == 11 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\\n\\t\\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\\n\\t} else if ( config == 12 ) {\\n\\t\\tn = 4;\\n\\t\\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t} else if ( config == 13 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = L[3];\\n\\t\\tL[3] = L[2];\\n\\t\\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\\n\\t\\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\\n\\t} else if ( config == 14 ) {\\n\\t\\tn = 5;\\n\\t\\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\\n\\t\\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\\n\\t} else if ( config == 15 ) {\\n\\t\\tn = 4;\\n\\t}\\n\\tif ( n == 3 )\\n\\t\\tL[3] = L[0];\\n\\tif ( n == 4 )\\n\\t\\tL[4] = L[0];\\n}\\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\\n\\tfloat cosTheta = dot( v1, v2 );\\n\\tfloat theta = acos( cosTheta );\\n\\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\\n\\treturn res;\\n}\\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\\n\\trectPoints[0] = pos - halfWidth - halfHeight;\\n\\trectPoints[1] = pos + halfWidth - halfHeight;\\n\\trectPoints[2] = pos + halfWidth + halfHeight;\\n\\trectPoints[3] = pos - halfWidth + halfHeight;\\n}\\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 P = geometry.position;\\n\\tvec3 T1, T2;\\n\\tT1 = normalize(V - N * dot( V, N ));\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\\n\\tvec3 clippedRect[5];\\n\\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\\n\\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\\n\\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\\n\\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\\n\\tint n;\\n\\tclipQuadToHorizon(clippedRect, n);\\n\\tif ( n == 0 )\\n\\t\\treturn vec3( 0, 0, 0 );\\n\\tclippedRect[0] = normalize( clippedRect[0] );\\n\\tclippedRect[1] = normalize( clippedRect[1] );\\n\\tclippedRect[2] = normalize( clippedRect[2] );\\n\\tclippedRect[3] = normalize( clippedRect[3] );\\n\\tclippedRect[4] = normalize( clippedRect[4] );\\n\\tfloat sum = 0.0;\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\\n\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\\n\\tif (n >= 4)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\\n\\tif (n == 5)\\n\\t\\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\\n\\tsum = max( 0.0, sum );\\n\\tvec3 Lo_i = vec3( sum, sum, sum );\\n\\treturn Lo_i;\\n}\\nvec3 Rect_Area_Light_Specular_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\\n\\t\\tconst in float roughness,\\n\\t\\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tvec2 uv = ltcTextureCoords( geometry, roughness );\\n\\tvec4 brdfLtcApproxParams, t;\\n\\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\\n\\tt = texture2D( ltcMat, uv );\\n\\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\\n\\tmat3 brdfLtcApproxMat = mat3(\\n\\t\\tvec3(   1,   0, t.y ),\\n\\t\\tvec3(   0, t.z,   0 ),\\n\\t\\tvec3( t.w,   0, t.x )\\n\\t);\\n\\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\\n\\tspecularReflectance *= brdfLtcScalar;\\n\\treturn specularReflectance;\\n}\\nvec3 Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\tconst in GeometricContext geometry,\\n\\t\\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\\n\\tvec3 rectPoints[4];\\n\\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\\n\\tmat3 diffuseBrdfMat = mat3(1);\\n\\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\\n\\treturn diffuseReflectance;\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n",go="#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n",vo="#if NUM_CLIPPING_PLANES > 0\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t\\t\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\t\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t\\n\\t#endif\\n#endif\\n",mo="#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n",yo="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n",_o="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n",bo="#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif",xo="#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n",wo="#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif",Eo="#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif",So="#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transpose( const in mat3 v ) {\\n\\tmat3 tmp;\\n\\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\\n\\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\\n\\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\\n\\treturn tmp;\\n}\\n",Mo="#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n",Co="#ifdef FLIP_SIDED\\n\\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n",Io="#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n",Oo="#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n",To="#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n",Po="#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n",Ao="  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n",Lo="\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n",No="#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n",ko="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n",Ro="#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n",Do="#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n",Fo="\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif",Bo="#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n",jo="#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n",Uo="#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n",zo="#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n",Go="#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n",Vo="#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif",Xo="vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n",Ho="uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltcMat;\\tuniform sampler2D ltcMag;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n",qo="BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n",Yo="varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\\n\\t}\\n#endif\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n",Wo="PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n",Zo="struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 matDiffColor = material.diffuseColor;\\n\\t\\tvec3 matSpecColor = material.specularColor;\\n\\t\\tvec3 lightColor   = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\\n\\t\\t\\t\\troughness,\\n\\t\\t\\t\\tltcMat, ltcMag );\\n\\t\\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\\n\\t\\t\\t\\tgeometry,\\n\\t\\t\\t\\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\\n\\t\\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\\n\\t\\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n",Jo="\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\\t#endif\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n",Ko="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif",Qo="#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n",$o="#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif",ta="#ifdef USE_LOGDEPTHBUF\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\t#endif\\n#endif\\n",ea="#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n",na="#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n",ia="#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n",ra="#ifdef USE_MAP\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n#endif\\n",oa="float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n",aa="#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif",sa="#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n",ua="#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif",la="#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n",ca="#ifdef DOUBLE_SIDED\\n\\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n#else\\n\\tfloat flipNormal = 1.0;\\n#endif\\n",ha="#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal ) * flipNormal;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n",fa="#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n",da="vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n",pa="#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n",ga="#ifdef USE_SKINNING\\n\\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n",va="#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n",ma="vec3 dithering( vec3 color ) {\\n\\tfloat grid_position = fract( dot( gl_FragCoord.xy - vec2( 0.5, 0.5 ) , vec2( 1.0 / 16.0, 10.0 / 36.0 ) + 0.25 ) );\\n\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\treturn color + 0.5 / 255.0 + dither_shift_RGB;\\n}",ya="float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n",_a="#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif",ba="#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n",xa="#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n",wa="#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n",Ea="float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n",Sa="#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif",Ma="#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n",Ca="#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n",Ia="#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n",Oa="float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif",Ta="#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif",Pa="#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n",Aa="#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n",La="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif",Na="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n#endif\\n",ka="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif",Ra="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif",Da="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif",Fa="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif",Ba="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\t#ifdef USE_SKINNING\\n\\t\\tvec4 worldPosition = modelMatrix * skinned;\\n\\t#else\\n\\t\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\t#endif\\n#endif\\n",ja="uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n",Ua="varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n",za="#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n",Ga="#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n",Va="uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n",Xa="varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition;\\n}\\n",Ha="uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n",qa="varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n",Ya="uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",Wa="uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n",Za="uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",Ja="#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n",Ka="uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <dithering_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",Qa="#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n",$a="#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <dithering_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",ts="#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n",es="#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <dithering_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",ns="#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n",is="#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n",rs="#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n",os="uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n",as="uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n",ss="uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\\n}\\n",us="#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n}\\n",ls={alphamap_fragment:ao,alphamap_pars_fragment:so,alphatest_fragment:uo,aomap_fragment:lo,aomap_pars_fragment:co,begin_vertex:ho,beginnormal_vertex:fo,bsdfs:po,bumpmap_pars_fragment:go,clipping_planes_fragment:vo,clipping_planes_pars_fragment:mo,clipping_planes_pars_vertex:yo,clipping_planes_vertex:_o,color_fragment:bo,color_pars_fragment:xo,color_pars_vertex:wo,color_vertex:Eo,common:So,cube_uv_reflection_fragment:Mo,defaultnormal_vertex:Co,displacementmap_pars_vertex:Io,displacementmap_vertex:Oo,emissivemap_fragment:To,emissivemap_pars_fragment:Po,encodings_fragment:Ao,encodings_pars_fragment:Lo,envmap_fragment:No,envmap_pars_fragment:ko,envmap_pars_vertex:Ro,envmap_vertex:Do,fog_vertex:Fo,fog_pars_vertex:Bo,fog_fragment:jo,fog_pars_fragment:Uo,gradientmap_pars_fragment:zo,lightmap_fragment:Go,lightmap_pars_fragment:Vo,lights_lambert_vertex:Xo,lights_pars:Ho,lights_phong_fragment:qo,lights_phong_pars_fragment:Yo,lights_physical_fragment:Wo,lights_physical_pars_fragment:Zo,lights_template:Jo,logdepthbuf_fragment:Ko,logdepthbuf_pars_fragment:Qo,logdepthbuf_pars_vertex:$o,logdepthbuf_vertex:ta,map_fragment:ea,map_pars_fragment:na,map_particle_fragment:ia,map_particle_pars_fragment:ra,metalnessmap_fragment:oa,metalnessmap_pars_fragment:aa,morphnormal_vertex:sa,morphtarget_pars_vertex:ua,morphtarget_vertex:la,normal_flip:ca,normal_fragment:ha,normalmap_pars_fragment:fa,packing:da,premultiplied_alpha_fragment:pa,project_vertex:ga,dithering_fragment:va,dithering_pars_fragment:ma,roughnessmap_fragment:ya,roughnessmap_pars_fragment:_a,shadowmap_pars_fragment:ba,shadowmap_pars_vertex:xa,shadowmap_vertex:wa,shadowmask_pars_fragment:Ea,skinbase_vertex:Sa,skinning_pars_vertex:Ma,skinning_vertex:Ca,skinnormal_vertex:Ia,specularmap_fragment:Oa,specularmap_pars_fragment:Ta,tonemapping_fragment:Pa,tonemapping_pars_fragment:Aa,uv_pars_fragment:La,uv_pars_vertex:Na,uv_vertex:ka,uv2_pars_fragment:Ra,uv2_pars_vertex:Da,uv2_vertex:Fa,worldpos_vertex:Ba,cube_frag:ja,cube_vert:Ua,depth_frag:za,depth_vert:Ga,distanceRGBA_frag:Va,distanceRGBA_vert:Xa,equirect_frag:Ha,equirect_vert:qa,linedashed_frag:Ya,linedashed_vert:Wa,meshbasic_frag:Za,meshbasic_vert:Ja,meshlambert_frag:Ka,meshlambert_vert:Qa,meshphong_frag:$a,meshphong_vert:ts,meshphysical_frag:es,meshphysical_vert:ns,normal_frag:is,normal_vert:rs,points_frag:os,points_vert:as,shadow_frag:ss,shadow_vert:us},cs={basic:{uniforms:oo.merge([ro.common,ro.aomap,ro.lightmap,ro.fog]),vertexShader:ls.meshbasic_vert,fragmentShader:ls.meshbasic_frag},lambert:{uniforms:oo.merge([ro.common,ro.aomap,ro.lightmap,ro.emissivemap,ro.fog,ro.lights,{emissive:{value:new q(0)}}]),vertexShader:ls.meshlambert_vert,fragmentShader:ls.meshlambert_frag},phong:{uniforms:oo.merge([ro.common,ro.aomap,ro.lightmap,ro.emissivemap,ro.bumpmap,ro.normalmap,ro.displacementmap,ro.gradientmap,ro.fog,ro.lights,{emissive:{value:new q(0)},specular:{value:new q(1118481)},shininess:{value:30}}]),vertexShader:ls.meshphong_vert,fragmentShader:ls.meshphong_frag},standard:{uniforms:oo.merge([ro.common,ro.aomap,ro.lightmap,ro.emissivemap,ro.bumpmap,ro.normalmap,ro.displacementmap,ro.roughnessmap,ro.metalnessmap,ro.fog,ro.lights,{emissive:{value:new q(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ls.meshphysical_vert,fragmentShader:ls.meshphysical_frag},points:{uniforms:oo.merge([ro.points,ro.fog]),vertexShader:ls.points_vert,fragmentShader:ls.points_frag},dashed:{uniforms:oo.merge([ro.common,ro.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ls.linedashed_vert,fragmentShader:ls.linedashed_frag},depth:{uniforms:oo.merge([ro.common,ro.displacementmap]),vertexShader:ls.depth_vert,fragmentShader:ls.depth_frag},normal:{uniforms:oo.merge([ro.common,ro.bumpmap,ro.normalmap,ro.displacementmap,{opacity:{value:1}}]),vertexShader:ls.normal_vert,fragmentShader:ls.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ls.cube_vert,fragmentShader:ls.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:ls.equirect_vert,fragmentShader:ls.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new n()}},vertexShader:ls.distanceRGBA_vert,fragmentShader:ls.distanceRGBA_frag}};cs.physical={uniforms:oo.merge([cs.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ls.meshphysical_vert,fragmentShader:ls.meshphysical_frag},a(Y.prototype,r.prototype,{isWebGLRenderTarget:!0,setSize:function setSize(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e);},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}});var hs=0;a(W.prototype,r.prototype,{isMaterial:!0,setValues:function setValues(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": \'"+e+"\' is not a property of this material.");}else console.warn("THREE.Material: \'"+e+"\' parameter is undefined.");}},toJSON:function toJSON(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i);}return e;}var n=void 0===t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Kn&&(i.blending=this.blending),this.shading!==qn&&(i.shading=this.shading),this.side!==Gn&&(i.side=this.side),this.vertexColors!==Yn&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),i.skinning=this.skinning,i.morphTargets=this.morphTargets,i.dithering=this.dithering,n){var r=e(t.textures),o=e(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o);}return i;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r){n[r]=e[r].clone();}}return this.clippingPlanes=n,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),Z.prototype=Object.create(W.prototype),Z.prototype.constructor=Z,Z.prototype.isShaderMaterial=!0,Z.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=oo.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this;},Z.prototype.toJSON=function(t){var e=W.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e;},J.prototype=Object.create(W.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this;},a(K.prototype,{isBox3:!0,set:function set(t,e){return this.min.copy(t),this.max.copy(e),this;},setFromArray:function setFromArray(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),o=-(1/0),a=-(1/0),s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>o&&(o=c),h>a&&(a=h);}return this.min.set(e,n,i),this.max.set(r,o,a),this;},setFromBufferAttribute:function setFromBufferAttribute(t){for(var e=+(1/0),n=+(1/0),i=+(1/0),r=-(1/0),o=-(1/0),a=-(1/0),s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<i&&(i=h),l>r&&(r=l),c>o&&(o=c),h>a&&(a=h);}return this.min.set(e,n,i),this.max.set(r,o,a),this;},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++){this.expandByPoint(t[e]);}return this;},setFromCenterAndSize:function(){var t=new n();return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this;};}(),setFromObject:function setFromObject(t){return this.makeEmpty(),this.expandByObject(t);},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this;},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this;},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z;},getCenter:function getCenter(t){var e=t||new n();return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5);},getSize:function getSize(t){var e=t||new n();return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min);},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this;},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this;},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this;},expandByObject:function(){var t=new n();return function(e){var n=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var i,r,o=e.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(i=0,r=a.length;i<r;i++){t.copy(a[i]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);}}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(i=0,r=s.count;i<r;i++){t.fromBufferAttribute(s,i).applyMatrix4(e.matrixWorld),n.expandByPoint(t);}}}),this;};}(),containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z);},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z;},getParameter:function getParameter(t,e){var i=e||new n();return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z));},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z);},intersectsSphere:function(){var t=new n();return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius;};}(),intersectsPlane:function intersectsPlane(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant;},clampPoint:function clampPoint(t,e){var i=e||new n();return i.copy(t).clamp(this.min,this.max);},distanceToPoint:function(){var t=new n();return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length();};}(),getBoundingSphere:function(){var t=new n();return function(e){var n=e||new Q();return this.getCenter(n.center),n.radius=.5*this.getSize(t).length(),n;};}(),intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this;},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this;},applyMatrix4:function(){var t=[new n(),new n(),new n(),new n(),new n(),new n(),new n(),new n()];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this);};}(),translate:function translate(t){return this.min.add(t),this.max.add(t),this;},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max);}}),a(Q.prototype,{set:function set(t,e){return this.center.copy(t),this.radius=e,this;},setFromPoints:function(){var t=new K();return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,a=e.length;o<a;o++){r=Math.max(r,i.distanceToSquared(e[o]));}return this.radius=Math.sqrt(r),this;};}(),clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.center.copy(t.center),this.radius=t.radius,this;},empty:function empty(){return this.radius<=0;},containsPoint:function containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius;},distanceToPoint:function distanceToPoint(t){return t.distanceTo(this.center)-this.radius;},intersectsSphere:function intersectsSphere(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e;},intersectsBox:function intersectsBox(t){return t.intersectsSphere(this);},intersectsPlane:function intersectsPlane(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius;},clampPoint:function clampPoint(t,e){var i=this.center.distanceToSquared(t),r=e||new n();return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r;},getBoundingBox:function getBoundingBox(t){var e=t||new K();return e.set(this.center,this.center),e.expandByScalar(this.radius),e;},applyMatrix4:function applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this;},translate:function translate(t){return this.center.add(t),this;},equals:function equals(t){return t.center.equals(this.center)&&t.radius===this.radius;}}),a($.prototype,{isMatrix3:!0,set:function set(t,e,n,i,r,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=i,l[2]=a,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this;},identity:function identity(){return this.set(1,0,0,0,1,0,0,0,1),this;},clone:function clone(){return new this.constructor().fromArray(this.elements);},copy:function copy(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this;},setFromMatrix4:function setFromMatrix4(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this;},applyToBufferAttribute:function(){var t=new n();return function(e){for(var n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);}return e;};}(),multiply:function multiply(t){return this.multiplyMatrices(this,t);},premultiply:function premultiply(t){return this.multiplyMatrices(t,this);},multiplyMatrices:function multiplyMatrices(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],g=i[3],v=i[6],m=i[1],y=i[4],_=i[7],b=i[2],x=i[5],w=i[8];return r[0]=o*p+a*m+s*b,r[3]=o*g+a*y+s*x,r[6]=o*v+a*_+s*w,r[1]=u*p+l*m+c*b,r[4]=u*g+l*y+c*x,r[7]=u*v+l*_+c*w,r[2]=h*p+f*m+d*b,r[5]=h*g+f*y+d*x,r[8]=h*v+f*_+d*w,this;},multiplyScalar:function multiplyScalar(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this;},determinant:function determinant(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*r*l+n*a*s+i*r*u-i*o*s;},getInverse:function getInverse(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],d=f*u-l*h,p=l*c-f*s,g=h*s-u*c,v=r*d+o*p+a*g;if(0===v){var m="THREE.Matrix3.getInverse(): can\'t invert matrix, determinant is 0";if(e===!0)throw new Error(m);return console.warn(m),this.identity();}var y=1/v;return i[0]=d*y,i[1]=(a*h-f*o)*y,i[2]=(l*o-a*u)*y,i[3]=p*y,i[4]=(f*r-a*c)*y,i[5]=(a*s-l*r)*y,i[6]=g*y,i[7]=(o*c-h*r)*y,i[8]=(u*r-o*s)*y,this;},transpose:function transpose(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this;},getNormalMatrix:function getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose();},transposeIntoArray:function transposeIntoArray(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this;},equals:function equals(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++){if(e[i]!==n[i])return!1;}return!0;},fromArray:function fromArray(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++){this.elements[n]=t[n+e];}return this;},toArray:function toArray(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t;}}),a(tt.prototype,{set:function set(t,e){return this.normal.copy(t),this.constant=e,this;},setComponents:function setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this;},setFromNormalAndCoplanarPoint:function setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this;},setFromCoplanarPoints:function(){var t=new n(),e=new n();return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this;};}(),clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this;},normalize:function normalize(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this;},negate:function negate(){return this.constant*=-1,this.normal.negate(),this;},distanceToPoint:function distanceToPoint(t){return this.normal.dot(t)+this.constant;},distanceToSphere:function distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius;},projectPoint:function projectPoint(t,e){return this.orthoPoint(t,e).sub(t).negate();},orthoPoint:function orthoPoint(t,e){var i=this.distanceToPoint(t),r=e||new n();return r.copy(this.normal).multiplyScalar(i);},intersectLine:function(){var t=new n();return function(e,i){var r=i||new n(),o=e.delta(t),a=this.normal.dot(o);if(0!==a){var s=-(e.start.dot(this.normal)+this.constant)/a;if(!(s<0||s>1))return r.copy(o).multiplyScalar(s).add(e.start);}else if(0===this.distanceToPoint(e.start))return r.copy(e.start);};}(),intersectsLine:function intersectsLine(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0;},intersectsBox:function intersectsBox(t){return t.intersectsPlane(this);},intersectsSphere:function intersectsSphere(t){return t.intersectsPlane(this);},coplanarPoint:function coplanarPoint(t){var e=t||new n();return e.copy(this.normal).multiplyScalar(-this.constant);},applyMatrix4:function(){var t=new n(),e=new $();return function(n,i){var r=this.coplanarPoint(t).applyMatrix4(n),o=i||e.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-r.dot(a),this;};}(),translate:function translate(t){return this.constant=this.constant-t.dot(this.normal),this;},equals:function equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant;}}),a(et.prototype,{set:function set(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){for(var e=this.planes,n=0;n<6;n++){e[n].copy(t.planes[n]);}return this;},setFromMatrix:function setFromMatrix(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],g=n[12],v=n[13],m=n[14],y=n[15];return e[0].setComponents(a-i,c-s,p-h,y-g).normalize(),e[1].setComponents(a+i,c+s,p+h,y+g).normalize(),e[2].setComponents(a+r,c+u,p+f,y+v).normalize(),e[3].setComponents(a-r,c-u,p-f,y-v).normalize(),e[4].setComponents(a-o,c-l,p-d,y-m).normalize(),e[5].setComponents(a+o,c+l,p+d,y+m).normalize(),this;},intersectsObject:function(){var t=new Q();return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t);};}(),intersectsSprite:function(){var t=new Q();return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t);};}(),intersectsSphere:function intersectsSphere(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){var o=e[r].distanceToPoint(n);if(o<i)return!1;}return!0;},intersectsBox:function(){var t=new n(),e=new n();return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(a<0&&s<0)return!1;}return!0;};}(),containsPoint:function containsPoint(t){for(var e=this.planes,n=0;n<6;n++){if(e[n].distanceToPoint(t)<0)return!1;}return!0;}}),a(it.prototype,{set:function set(t,e){return this.origin.copy(t),this.direction.copy(e),this;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this;},at:function at(t,e){var i=e||new n();return i.copy(this.direction).multiplyScalar(t).add(this.origin);},lookAt:function lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this;},recast:function(){var t=new n();return function(e){return this.origin.copy(this.at(e,t)),this;};}(),closestPointToPoint:function closestPointToPoint(t,e){var i=e||new n();i.subVectors(t,this.origin);var r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin);},distanceToPoint:function distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t));},distanceSqToPoint:function(){var t=new n();return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e));};}(),distanceSqToSegment:function(){var t=new n(),e=new n(),i=new n();return function(n,r,o,a){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s,u,l,c,h=.5*n.distanceTo(r),f=-this.direction.dot(e),d=i.dot(this.direction),p=-i.dot(e),g=i.lengthSq(),v=Math.abs(1-f*f);if(v>0){if(s=f*p-d,u=f*d-p,c=h*v,s>=0){if(u>=-c){if(u<=c){var m=1/v;s*=m,u*=m,l=s*(s+f*u+2*d)+u*(f*s+u+2*p)+g;}else u=h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+g;}else u=-h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+g;}else u<=-c?(s=Math.max(0,-(-f*h+d)),u=s>0?-h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+g):u<=c?(s=0,u=Math.min(Math.max(-h,-p),h),l=u*(u+2*p)+g):(s=Math.max(0,-(f*h+d)),u=s>0?h:Math.min(Math.max(-h,-p),h),l=-s*s+u*(u+2*p)+g);}else u=f>0?-h:h,s=Math.max(0,-(f*u+d)),l=-s*s+u*(u+2*p)+g;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),l;};}(),intersectSphere:function(){var t=new n();return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,u=i+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n);};}(),intersectsSphere:function intersectsSphere(t){return this.distanceToPoint(t.center)<=t.radius;},distanceToPlane:function distanceToPlane(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null;},intersectPlane:function intersectPlane(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e);},intersectsPlane:function intersectsPlane(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0;},intersectBox:function intersectBox(t,e){var n,i,r,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,i=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,i=(t.min.x-h.x)*u),l>=0?(r=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(r=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)));},intersectsBox:function(){var t=new n();return function(e){return null!==this.intersectBox(e,t);};}(),intersectTriangle:function(){var t=new n(),e=new n(),i=new n(),r=new n();return function(n,o,a,s,u){e.subVectors(o,n),i.subVectors(a,n),r.crossVectors(e,i);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1;}else{if(!(c<0))return null;l=-1,c=-c;}t.subVectors(this.origin,n);var h=l*this.direction.dot(i.crossVectors(t,i));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>c)return null;var d=-l*t.dot(r);return d<0?null:this.at(d/c,u);};}(),applyMatrix4:function applyMatrix4(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this;},equals:function equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction);}}),rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],rt.DefaultOrder="XYZ",Object.defineProperties(rt.prototype,{x:{get:function get(){return this._x;},set:function set(t){this._x=t,this.onChangeCallback();}},y:{get:function get(){return this._y;},set:function set(t){this._y=t,this.onChangeCallback();}},z:{get:function get(){return this._z;},set:function set(t){this._z=t,this.onChangeCallback();}},order:{get:function get(){return this._order;},set:function set(t){this._order=t,this.onChangeCallback();}}}),a(rt.prototype,{isEuler:!0,set:function set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this;},clone:function clone(){return new this.constructor(this._x,this._y,this._z,this._order);},copy:function copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this;},setFromRotationMatrix:function setFromRotationMatrix(t,e,n){var i=Wr.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],u=r[1],l=r[5],c=r[9],h=r[2],f=r[6],d=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this;},setFromQuaternion:function(){var t=new i();return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i);};}(),setFromVector3:function setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order);},reorder:function(){var t=new e();return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e);};}(),equals:function equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order;},fromArray:function fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this;},toArray:function toArray(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t;},toVector3:function toVector3(t){return t?t.set(this._x,this._y,this._z):new n(this._x,this._y,this._z);},onChange:function onChange(t){return this.onChangeCallback=t,this;},onChangeCallback:function onChangeCallback(){}}),a(ot.prototype,{set:function set(t){this.mask=1<<t|0;},enable:function enable(t){this.mask|=1<<t|0;},toggle:function toggle(t){this.mask^=1<<t|0;},disable:function disable(t){this.mask&=~(1<<t|0);},test:function test(t){return 0!==(this.mask&t.mask);}});var fs=0;at.DefaultUp=new n(0,1,0),at.DefaultMatrixAutoUpdate=!0,a(at.prototype,r.prototype,{isObject3D:!0,applyMatrix:function applyMatrix(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale);},setRotationFromAxisAngle:function setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e);},setRotationFromEuler:function setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0);},setRotationFromMatrix:function setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t);},setRotationFromQuaternion:function setRotationFromQuaternion(t){this.quaternion.copy(t);},rotateOnAxis:function(){var t=new e();return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this;};}(),rotateX:function(){var t=new n(1,0,0);return function(e){return this.rotateOnAxis(t,e);};}(),rotateY:function(){var t=new n(0,1,0);return function(e){return this.rotateOnAxis(t,e);};}(),rotateZ:function(){var t=new n(0,0,1);return function(e){return this.rotateOnAxis(t,e);};}(),translateOnAxis:function(){var t=new n();return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this;};}(),translateX:function(){var t=new n(1,0,0);return function(e){return this.translateOnAxis(t,e);};}(),translateY:function(){var t=new n(0,1,0);return function(e){return this.translateOnAxis(t,e);};}(),translateZ:function(){var t=new n(0,0,1);return function(e){return this.translateOnAxis(t,e);};}(),localToWorld:function localToWorld(t){return t.applyMatrix4(this.matrixWorld);},worldToLocal:function(){var t=new i();return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld));};}(),lookAt:function(){var t=new i();return function(e){this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t);};}(),add:function add(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++){this.add(arguments[e]);}return this;}return t===this?(console.error("THREE.Object3D.add: object can\'t be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this);},remove:function remove(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++){this.remove(arguments[e]);}var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1));},getObjectById:function getObjectById(t){return this.getObjectByProperty("id",t);},getObjectByName:function getObjectByName(t){return this.getObjectByProperty("name",t);},getObjectByProperty:function getObjectByProperty(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(t,e);if(void 0!==o)return o;}},getWorldPosition:function getWorldPosition(t){var e=t||new n();return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld);},getWorldQuaternion:function(){var t=new n(),i=new n();return function(n){var r=n||new e();return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,i),r;};}(),getWorldRotation:function(){var t=new e();return function(e){var n=e||new rt();return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1);};}(),getWorldScale:function(){var t=new n(),i=new e();return function(e){var r=e||new n();return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,r),r;};}(),getWorldDirection:function(){var t=new e();return function(e){var i=e||new n();return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t);};}(),raycast:function raycast(){},traverse:function traverse(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].traverse(t);}},traverseVisible:function traverseVisible(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].traverseVisible(t);}}},traverseAncestors:function traverseAncestors(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t));},updateMatrix:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0;},updateMatrixWorld:function updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++){e[n].updateMatrixWorld(t);}},toJSON:function toJSON(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid;}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i);}return e;}var i=void 0===t||""===t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),o.matrix=this.matrix.toArray(),void 0!==this.geometry&&(o.geometry=e(t.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],s=0,u=this.material.length;s<u;s++){a.push(e(t.materials,this.material[s]));}o.material=a;}else o.material=e(t.materials,this.material);if(this.children.length>0){o.children=[];for(var s=0;s<this.children.length;s++){o.children.push(this.children[s].toJSON(t).object);}}if(i){var l=n(t.geometries),c=n(t.materials),h=n(t.textures),f=n(t.images);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),h.length>0&&(r.textures=h),f.length>0&&(r.images=f);}return r.object=o,r;},clone:function clone(t){return new this.constructor().copy(this,t);},copy:function copy(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone());}return this;}}),a(st.prototype,{set:function set(t,e){return this.start.copy(t),this.end.copy(e),this;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.start.copy(t.start),this.end.copy(t.end),this;},getCenter:function getCenter(t){var e=t||new n();return e.addVectors(this.start,this.end).multiplyScalar(.5);},delta:function delta(t){var e=t||new n();return e.subVectors(this.end,this.start);},distanceSq:function distanceSq(){return this.start.distanceToSquared(this.end);},distance:function distance(){return this.start.distanceTo(this.end);},at:function at(t,e){var i=e||new n();return this.delta(i).multiplyScalar(t).add(this.start);},closestPointToPointParameter:function(){var t=new n(),e=new n();return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),a=o/r;return i&&(a=Wr.clamp(a,0,1)),a;};}(),closestPointToPoint:function closestPointToPoint(t,e,i){var r=this.closestPointToPointParameter(t,e),o=i||new n();return this.delta(o).multiplyScalar(r).add(this.start);},applyMatrix4:function applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this;},equals:function equals(t){return t.start.equals(this.start)&&t.end.equals(this.end);}}),a(ut,{normal:function(){var t=new n();return function(e,i,r,o){var a=o||new n();a.subVectors(r,i),t.subVectors(e,i),a.cross(t);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0);};}(),barycoordFromPoint:function(){var t=new n(),e=new n(),i=new n();return function(r,o,a,s,u){t.subVectors(s,o),e.subVectors(a,o),i.subVectors(r,o);var l=t.dot(t),c=t.dot(e),h=t.dot(i),f=e.dot(e),d=e.dot(i),p=l*f-c*c,g=u||new n();if(0===p)return g.set(-2,-1,-1);var v=1/p,m=(f*h-c*d)*v,y=(l*d-c*h)*v;return g.set(1-m-y,y,m);};}(),containsPoint:function(){var t=new n();return function(e,n,i,r){var o=ut.barycoordFromPoint(e,n,i,r,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1;};}()}),a(ut.prototype,{set:function set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this;},setFromPointsAndIndices:function setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this;},area:function(){var t=new n(),e=new n();return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length();};}(),midpoint:function midpoint(t){var e=t||new n();return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3);},normal:function normal(t){return ut.normal(this.a,this.b,this.c,t);},plane:function plane(t){var e=t||new tt();return e.setFromCoplanarPoints(this.a,this.b,this.c);},barycoordFromPoint:function barycoordFromPoint(t,e){return ut.barycoordFromPoint(t,this.a,this.b,this.c,e);},containsPoint:function containsPoint(t){return ut.containsPoint(t,this.a,this.b,this.c);},closestPointToPoint:function(){var t=new tt(),e=[new st(),new st(),new st()],i=new n(),r=new n();return function(o,a){var s=a||new n(),u=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(o,i),this.containsPoint(i)===!0)s.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(i,!0,r);var c=i.distanceToSquared(r);c<u&&(u=c,s.copy(r));}}return s;};}(),equals:function equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c);}}),a(lt.prototype,{clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++){this.vertexNormals[e]=t.vertexNormals[e].clone();}for(var e=0,n=t.vertexColors.length;e<n;e++){this.vertexColors[e]=t.vertexColors[e].clone();}return this;}}),ct.prototype=Object.create(W.prototype),ct.prototype.constructor=ct,ct.prototype.isMeshBasicMaterial=!0,ct.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this;},Object.defineProperty(ht.prototype,"needsUpdate",{set:function set(t){t===!0&&this.version++;}}),a(ht.prototype,{isBufferAttribute:!0,setArray:function setArray(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t;},setDynamic:function setDynamic(t){return this.dynamic=t,this;},copy:function copy(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this;},copyAt:function copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++){this.array[t+i]=e.array[n+i];}return this;},copyArray:function copyArray(t){return this.array.set(t),this;},copyColorsArray:function copyColorsArray(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new q()),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b;}return this;},copyIndicesArray:function copyIndicesArray(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c;}return this;},copyVector2sArray:function copyVector2sArray(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new o()),e[n++]=a.x,e[n++]=a.y;}return this;},copyVector3sArray:function copyVector3sArray(t){for(var e=this.array,i=0,r=0,o=t.length;r<o;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new n()),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z;}return this;},copyVector4sArray:function copyVector4sArray(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new H()),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w;}return this;},set:function set(t,e){return void 0===e&&(e=0),this.array.set(t,e),this;},getX:function getX(t){return this.array[t*this.itemSize];},setX:function setX(t,e){return this.array[t*this.itemSize]=e,this;},getY:function getY(t){return this.array[t*this.itemSize+1];},setY:function setY(t,e){return this.array[t*this.itemSize+1]=e,this;},getZ:function getZ(t){return this.array[t*this.itemSize+2];},setZ:function setZ(t,e){return this.array[t*this.itemSize+2]=e,this;},getW:function getW(t){return this.array[t*this.itemSize+3];},setW:function setW(t,e){return this.array[t*this.itemSize+3]=e,this;},setXY:function setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this;},setXYZ:function setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this;},setXYZW:function setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this;},onUpload:function onUpload(t){return this.onUploadCallback=t,this;},clone:function clone(){return new this.constructor(this.array,this.itemSize).copy(this);}}),ft.prototype=Object.create(ht.prototype),ft.prototype.constructor=ft,dt.prototype=Object.create(ht.prototype),dt.prototype.constructor=dt,pt.prototype=Object.create(ht.prototype),pt.prototype.constructor=pt,gt.prototype=Object.create(ht.prototype),gt.prototype.constructor=gt,vt.prototype=Object.create(ht.prototype),vt.prototype.constructor=vt,mt.prototype=Object.create(ht.prototype),mt.prototype.constructor=mt,yt.prototype=Object.create(ht.prototype),yt.prototype.constructor=yt,_t.prototype=Object.create(ht.prototype),_t.prototype.constructor=_t,bt.prototype=Object.create(ht.prototype),bt.prototype.constructor=bt,a(xt.prototype,{computeGroups:function computeGroups(t){for(var e,n=[],i=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i});}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n;},fromGeometry:function fromGeometry(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,u=t.morphTargets,l=u.length;if(l>0){e=[];for(var c=0;c<l;c++){e[c]=[];}this.morphTargets.position=e;}var h,f=t.morphNormals,d=f.length;if(d>0){h=[];for(var c=0;c<d;c++){h[c]=[];}this.morphTargets.normal=h;}for(var p=t.skinIndices,g=t.skinWeights,v=p.length===i.length,m=g.length===i.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b);}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w);}if(a===!0){var E=r[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new o(),new o(),new o()));}if(s===!0){var E=r[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new o(),new o(),new o()));}for(var S=0;S<l;S++){var M=u[S].vertices;e[S].push(M[y.a],M[y.b],M[y.c]);}for(var S=0;S<d;S++){var C=f[S].vertexNormals[c];h[S].push(C.a,C.b,C.c);}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),m&&this.skinWeights.push(g[y.a],g[y.b],g[y.c]);}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this;}});var ds=0;a(St.prototype,r.prototype,{isGeometry:!0,applyMatrix:function applyMatrix(t){for(var e=new $().getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){var r=this.vertices[n];r.applyMatrix4(t);}for(var n=0,i=this.faces.length;n<i;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++){o.vertexNormals[a].applyMatrix3(e).normalize();}}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this;},rotateX:function(){var t=new i();return function(e){return t.makeRotationX(e),this.applyMatrix(t),this;};}(),rotateY:function(){var t=new i();return function(e){return t.makeRotationY(e),this.applyMatrix(t),this;};}(),rotateZ:function(){var t=new i();return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this;};}(),translate:function(){var t=new i();return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this;};}(),scale:function(){var t=new i();return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this;};}(),lookAt:function(){var t=new at();return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix);};}(),fromBufferGeometry:function fromBufferGeometry(t){function e(t,e,n,r){var o=void 0!==u?[f[t].clone(),f[e].clone(),f[n].clone()]:[],a=void 0!==l?[i.colors[t].clone(),i.colors[e].clone(),i.colors[n].clone()]:[],s=new lt(t,e,n,o,a,r);i.faces.push(s),void 0!==c&&i.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[n].clone()]),void 0!==h&&i.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[n].clone()]);}var i=this,r=null!==t.index?t.index.array:void 0,a=t.attributes,s=a.position.array,u=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],g=0,v=0;g<s.length;g+=3,v+=2){i.vertices.push(new n(s[g],s[g+1],s[g+2])),void 0!==u&&f.push(new n(u[g],u[g+1],u[g+2])),void 0!==l&&i.colors.push(new q(l[g],l[g+1],l[g+2])),void 0!==c&&d.push(new o(c[v],c[v+1])),void 0!==h&&p.push(new o(h[v],h[v+1]));}var m=t.groups;if(m.length>0)for(var g=0;g<m.length;g++){for(var y=m[g],_=y.start,b=y.count,v=_,x=_+b;v<x;v+=3){void 0!==r?e(r[v],r[v+1],r[v+2],y.materialIndex):e(v,v+1,v+2,y.materialIndex);}}else if(void 0!==r)for(var g=0;g<r.length;g+=3){e(r[g],r[g+1],r[g+2]);}else for(var g=0;g<s.length/3;g+=3){e(g,g+1,g+2);}return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this;},center:function center(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t;},normalize:function normalize(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new i();return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this;},computeFaceNormals:function computeFaceNormals(){for(var t=new n(),e=new n(),i=0,r=this.faces.length;i<r;i++){var o=this.faces[i],a=this.vertices[o.a],s=this.vertices[o.b],u=this.vertices[o.c];t.subVectors(u,s),e.subVectors(a,s),t.cross(e),t.normalize(),o.normal.copy(t);}},computeVertexNormals:function computeVertexNormals(t){void 0===t&&(t=!0);var e,i,r,o,a,s;for(s=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++){s[e]=new n();}if(t){var u,l,c,h=new n(),f=new n();for(r=0,o=this.faces.length;r<o;r++){a=this.faces[r],u=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),f.subVectors(u,l),h.cross(f),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h);}}else for(this.computeFaceNormals(),r=0,o=this.faces.length;r<o;r++){a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);}for(e=0,i=this.vertices.length;e<i;e++){s[e].normalize();}for(r=0,o=this.faces.length;r<o;r++){a=this.faces[r];var d=a.vertexNormals;3===d.length?(d[0].copy(s[a.a]),d[1].copy(s[a.b]),d[2].copy(s[a.c])):(d[0]=s[a.a].clone(),d[1]=s[a.b].clone(),d[2]=s[a.c].clone());}this.faces.length>0&&(this.normalsNeedUpdate=!0);},computeFlatVertexNormals:function computeFlatVertexNormals(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone());}this.faces.length>0&&(this.normalsNeedUpdate=!0);},computeMorphNormals:function computeMorphNormals(){var t,e,i,r,o;for(i=0,r=this.faces.length;i<r;i++){for(o=this.faces[i],o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]),t=0,e=o.vertexNormals.length;t<e;t++){o.__originalVertexNormals[t]?o.__originalVertexNormals[t].copy(o.vertexNormals[t]):o.__originalVertexNormals[t]=o.vertexNormals[t].clone();}}var a=new St();for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,u,l=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(i=0,r=this.faces.length;i<r;i++){s=new n(),u={a:new n(),b:new n(),c:new n()},l.push(s),c.push(u);}}var h=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,u;for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i],s=h.faceNormals[i],u=h.vertexNormals[i],s.copy(o.normal),u.a.copy(o.vertexNormals[0]),u.b.copy(o.vertexNormals[1]),u.c.copy(o.vertexNormals[2]);}}for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i],o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals;}},computeLineDistances:function computeLineDistances(){for(var t=0,e=this.vertices,n=0,i=e.length;n<i;n++){n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t;}},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new K()),this.boundingBox.setFromPoints(this.vertices);},computeBoundingSphere:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Q()),this.boundingSphere.setFromPoints(this.vertices);},merge:function merge(t,e,n){if((t&&t.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var i,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,l=this.faceVertexUvs[0],c=t.faceVertexUvs[0],h=this.colors,f=t.colors;void 0===n&&(n=0),void 0!==e&&(i=new $().getNormalMatrix(e));for(var d=0,p=a.length;d<p;d++){var g=a[d],v=g.clone();void 0!==e&&v.applyMatrix4(e),o.push(v);}for(var d=0,p=f.length;d<p;d++){h.push(f[d].clone());}for(d=0,p=u.length;d<p;d++){var m,y,_,b=u[d],x=b.vertexNormals,w=b.vertexColors;m=new lt(b.a+r,b.b+r,b.c+r),m.normal.copy(b.normal),void 0!==i&&m.normal.applyMatrix3(i).normalize();for(var E=0,S=x.length;E<S;E++){y=x[E].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),m.vertexNormals.push(y);}m.color.copy(b.color);for(var E=0,S=w.length;E<S;E++){_=w[E],m.vertexColors.push(_.clone());}m.materialIndex=b.materialIndex+n,s.push(m);}for(d=0,p=c.length;d<p;d++){var M=c[d],C=[];if(void 0!==M){for(var E=0,S=M.length;E<S;E++){C.push(M[E].clone());}l.push(C);}}},mergeMesh:function mergeMesh(t){return(t&&t.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix));},mergeVertices:function mergeVertices(){var t,e,n,i,r,o,a,s,u={},l=[],c=[],h=4,f=Math.pow(10,h);for(n=0,i=this.vertices.length;n<i;n++){t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===u[e]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];}var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++){if(o[p]===o[(p+1)%3]){d.push(n);break;}}}for(n=d.length-1;n>=0;n--){var g=d[n];for(this.faces.splice(g,1),a=0,s=this.faceVertexUvs.length;a<s;a++){this.faceVertexUvs[a].splice(g,1);}}var v=this.vertices.length-l.length;return this.vertices=l,v;},sortFacesByMaterialIndex:function sortFacesByMaterialIndex(){function t(t,e){return t.materialIndex-e.materialIndex;}for(var e=this.faces,n=e.length,i=0;i<n;i++){e[i]._id=i;}e.sort(t);var r,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(r=[]),s&&s.length===n&&(o=[]);for(var i=0;i<n;i++){var u=e[i]._id;r&&r.push(a[u]),o&&o.push(s[u]);}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o);},toJSON:function toJSON(){function t(t,e,n){return n?t|1<<e:t&~(1<<e);}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e]);}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e]);}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=g.length/2,g.push(t.x,t.y),v[e]);}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o){void 0!==o[a]&&(r[a]=o[a]);}return r;}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z);}for(var c=[],h=[],f={},d=[],p={},g=[],v={},u=0;u<this.faces.length;u++){var m=this.faces[u],y=!0,_=!1,b=void 0!==this.faceVertexUvs[0][u],x=m.normal.length()>0,w=m.vertexNormals.length>0,E=1!==m.color.r||1!==m.color.g||1!==m.color.b,S=m.vertexColors.length>0,M=0;if(M=t(M,0,0),M=t(M,1,y),M=t(M,2,_),M=t(M,3,b),M=t(M,4,x),M=t(M,5,w),M=t(M,6,E),M=t(M,7,S),c.push(M),c.push(m.a,m.b,m.c),c.push(m.materialIndex),b){var C=this.faceVertexUvs[0][u];c.push(i(C[0]),i(C[1]),i(C[2]));}if(x&&c.push(e(m.normal)),w){var I=m.vertexNormals;c.push(e(I[0]),e(I[1]),e(I[2]));}if(E&&c.push(n(m.color)),S){var O=m.vertexColors;c.push(n(O[0]),n(O[1]),n(O[2]));}}return r.data={},r.data.vertices=s,r.data.normals=h,d.length>0&&(r.data.colors=d),g.length>0&&(r.data.uvs=[g]),r.data.faces=c,r;},clone:function clone(){return new St().copy(this);},copy:function copy(t){var e,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++){this.vertices.push(s[e].clone());}var u=t.colors;for(e=0,n=u.length;e<n;e++){this.colors.push(u[e].clone());}var l=t.faces;for(e=0,n=l.length;e<n;e++){this.faces.push(l[e].clone());}for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=c.length;i<r;i++){var h=c[i],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone());}this.faceVertexUvs[e].push(f);}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var g={};if(g.name=p[e].name,void 0!==p[e].vertices)for(g.vertices=[],i=0,r=p[e].vertices.length;i<r;i++){g.vertices.push(p[e].vertices[i].clone());}if(void 0!==p[e].normals)for(g.normals=[],i=0,r=p[e].normals.length;i<r;i++){g.normals.push(p[e].normals[i].clone());}this.morphTargets.push(g);}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var m={};if(void 0!==v[e].vertexNormals)for(m.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),m.vertexNormals.push(_);}if(void 0!==v[e].faceNormals)for(m.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++){m.faceNormals.push(v[e].faceNormals[i].clone());}this.morphNormals.push(m);}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++){this.skinWeights.push(b[e].clone());}var x=t.skinIndices;for(e=0,n=x.length;e<n;e++){this.skinIndices.push(x[e].clone());}var w=t.lineDistances;for(e=0,n=w.length;e<n;e++){this.lineDistances.push(w[e]);}var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),Mt.MaxIndex=65535,a(Mt.prototype,r.prototype,{isBufferGeometry:!0,getIndex:function getIndex(){return this.index;},setIndex:function setIndex(t){Array.isArray(t)?this.index=new(wt(t)>65535?yt:vt)(t,1):this.index=t;},addAttribute:function addAttribute(t,e){return(e&&e.isBufferAttribute)===!1&&(e&&e.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new ht(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this);},getAttribute:function getAttribute(t){return this.attributes[t];},removeAttribute:function removeAttribute(t){return delete this.attributes[t],this;},addGroup:function addGroup(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0});},clearGroups:function clearGroups(){this.groups=[];},setDrawRange:function setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e;},applyMatrix:function applyMatrix(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=new $().getNormalMatrix(t);i.applyToBufferAttribute(n),n.needsUpdate=!0;}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this;},rotateX:function(){var t=new i();return function(e){return t.makeRotationX(e),this.applyMatrix(t),this;};}(),rotateY:function(){var t=new i();return function(e){return t.makeRotationY(e),this.applyMatrix(t),this;};}(),rotateZ:function(){var t=new i();return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this;};}(),translate:function(){var t=new i();return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this;};}(),scale:function(){var t=new i();return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this;};}(),lookAt:function(){var t=new at();return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix);};}(),center:function center(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t;},setFromObject:function setFromObject(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new _t(3*e.vertices.length,3),i=new _t(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new _t(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances));}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone());}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this;},updateFromObject:function updateFromObject(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n;}var i;return e.verticesNeedUpdate===!0&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this;},fromGeometry:function fromGeometry(t){return t.__directGeometry=new xt().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry);},fromDirectGeometry:function fromDirectGeometry(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ht(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ht(n,3).copyVector3sArray(t.normals));}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new ht(i,3).copyColorsArray(t.colors));}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ht(r,2).copyVector2sArray(t.uvs));}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ht(o,2).copyVector2sArray(t.uvs2));}if(t.indices.length>0){var a=wt(t.indices)>65535?Uint32Array:Uint16Array,s=new a(3*t.indices.length);this.setIndex(new ht(s,1).copyIndicesArray(t.indices));}this.groups=t.groups;for(var u in t.morphTargets){for(var l=[],c=t.morphTargets[u],h=0,f=c.length;h<f;h++){var d=c[h],p=new _t(3*d.length,3);l.push(p.copyVector3sArray(d));}this.morphAttributes[u]=l;}if(t.skinIndices.length>0){var g=new _t(4*t.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(t.skinIndices));}if(t.skinWeights.length>0){var v=new _t(4*t.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(t.skinWeights));}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this;},computeBoundingBox:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new K());var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error(\'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.\',this);},computeBoundingSphere:function(){var t=new K(),e=new n();return function(){null===this.boundingSphere&&(this.boundingSphere=new Q());var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,o=0,a=n.count;o<a;o++){e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(e));}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error(\'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.\',this);}};}(),computeFaceNormals:function computeFaceNormals(){},computeVertexNormals:function computeVertexNormals(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ht(new Float32Array(r.length),3));else for(var o=e.normal.array,a=0,s=o.length;a<s;a++){o[a]=0;}var u,l,c,h=e.normal.array,f=new n(),d=new n(),p=new n(),g=new n(),v=new n();if(t){var m=t.array;0===i.length&&this.addGroup(0,m.length);for(var y=0,_=i.length;y<_;++y){for(var b=i[y],x=b.start,w=b.count,a=x,s=x+w;a<s;a+=3){u=3*m[a+0],l=3*m[a+1],c=3*m[a+2],f.fromArray(r,u),d.fromArray(r,l),p.fromArray(r,c),g.subVectors(p,d),v.subVectors(f,d),g.cross(v),h[u]+=g.x,h[u+1]+=g.y,h[u+2]+=g.z,h[l]+=g.x,h[l+1]+=g.y,h[l+2]+=g.z,h[c]+=g.x,h[c+1]+=g.y,h[c+2]+=g.z;}}}else for(var a=0,s=r.length;a<s;a+=9){f.fromArray(r,a),d.fromArray(r,a+3),p.fromArray(r,a+6),g.subVectors(p,d),v.subVectors(f,d),g.cross(v),h[a]=g.x,h[a+1]=g.y,h[a+2]=g.z,h[a+3]=g.x,h[a+4]=g.y,h[a+5]=g.z,h[a+6]=g.x,h[a+7]=g.y,h[a+8]=g.z;}this.normalizeNormals(),e.normal.needsUpdate=!0;}},merge:function merge(t,e){if((t&&t.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var i in n){if(void 0!==t.attributes[i])for(var r=n[i],o=r.array,a=t.attributes[i],s=a.array,u=a.itemSize,l=0,c=u*e;l<s.length;l++,c++){o[c]=s[l];}}return this;},normalizeNormals:function normalizeNormals(){for(var t,e,n,i,r=this.attributes.normal,o=0,a=r.count;o<a;o++){t=r.getX(o),e=r.getY(o),n=r.getZ(o),i=1/Math.sqrt(t*t+e*e+n*n),r.setXYZ(o,t*i,e*i,n*i);}},toNonIndexed:function toNonIndexed(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Mt(),e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(e.length*a),u=0,l=0,c=0,h=e.length;c<h;c++){u=e[c]*a;for(var f=0;f<a;f++){s[l++]=o[u++];}}t.addAttribute(i,new ht(s,a));}return t;},toJSON:function toJSON(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e){void 0!==e[n]&&(t[n]=e[n]);}return t;}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:r};}var o=this.attributes;for(var n in o){var a=o[n],r=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized};}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t;},clone:function clone(){return new Mt().copy(this);},copy:function copy(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone());}var s=t.morphAttributes;for(e in s){var u=[],l=s[e];for(n=0,i=l.length;n<i;n++){u.push(l[n].clone());}this.morphAttributes[e]=u;}var c=t.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex);}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this;},dispose:function dispose(){this.dispatchEvent({type:"dispose"});}}),Ct.prototype=a(Object.create(at.prototype),{constructor:Ct,isMesh:!0,setDrawMode:function setDrawMode(t){this.drawMode=t;},copy:function copy(t){return at.prototype.copy.call(this,t),this.drawMode=t.drawMode,this;},updateMorphTargets:function updateMorphTargets(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,n=t.length;e<n;e++){this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e;}}},raycast:function(){function t(t,e,n,i,r,o,a){return ut.barycoordFromPoint(t,e,n,i,y),r.multiplyScalar(y.x),o.multiplyScalar(y.y),a.multiplyScalar(y.z),r.add(o).add(a),r.clone();}function e(t,e,n,i,r,o,a){var s,u=t.material;if(s=u.side===Vn?n.intersectTriangle(o,r,i,!0,a):n.intersectTriangle(i,r,o,u.side!==Xn,a),null===s)return null;b.copy(a),b.applyMatrix4(t.matrixWorld);var l=e.ray.origin.distanceTo(b);return l<e.near||l>e.far?null:{distance:l,point:b.clone(),object:t};}function r(n,i,r,o,a,s,u,f){l.fromBufferAttribute(o,s),c.fromBufferAttribute(o,u),h.fromBufferAttribute(o,f);var d=e(n,i,r,l,c,h,_);return d&&(a&&(g.fromBufferAttribute(a,s),v.fromBufferAttribute(a,u),m.fromBufferAttribute(a,f),d.uv=t(_,l,c,h,g,v,m)),d.face=new lt(s,u,f,ut.normal(l,c,h)),d.faceIndex=s),d;}var a=new i(),s=new it(),u=new Q(),l=new n(),c=new n(),h=new n(),f=new n(),d=new n(),p=new n(),g=new o(),v=new o(),m=new o(),y=new n(),_=new n(),b=new n();return function(n,i){var o=this.geometry,y=this.material,b=this.matrixWorld;if(void 0!==y&&(null===o.boundingSphere&&o.computeBoundingSphere(),u.copy(o.boundingSphere),u.applyMatrix4(b),n.ray.intersectsSphere(u)!==!1&&(a.getInverse(b),s.copy(n.ray).applyMatrix4(a),null===o.boundingBox||s.intersectsBox(o.boundingBox)!==!1))){var x;if(o.isBufferGeometry){var w,E,S,M,C,I=o.index,O=o.attributes.position,T=o.attributes.uv;if(null!==I)for(M=0,C=I.count;M<C;M+=3){w=I.getX(M),E=I.getX(M+1),S=I.getX(M+2),x=r(this,n,s,O,T,w,E,S),x&&(x.faceIndex=Math.floor(M/3),i.push(x));}else for(M=0,C=O.count;M<C;M+=3){w=M,E=M+1,S=M+2,x=r(this,n,s,O,T,w,E,S),x&&(x.index=w,i.push(x));}}else if(o.isGeometry){var P,A,L,N,k=Array.isArray(y),R=o.vertices,D=o.faces,F=o.faceVertexUvs[0];F.length>0&&(N=F);for(var B=0,j=D.length;B<j;B++){var U=D[B],z=k?y[U.materialIndex]:y;if(void 0!==z){if(P=R[U.a],A=R[U.b],L=R[U.c],z.morphTargets===!0){var G=o.morphTargets,V=this.morphTargetInfluences;l.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var X=0,H=G.length;X<H;X++){var q=V[X];if(0!==q){var Y=G[X].vertices;l.addScaledVector(f.subVectors(Y[U.a],P),q),c.addScaledVector(d.subVectors(Y[U.b],A),q),h.addScaledVector(p.subVectors(Y[U.c],L),q);}}l.add(P),c.add(A),h.add(L),P=l,A=c,L=h;}if(x=e(this,n,s,P,A,L,_)){if(N&&N[B]){var W=N[B];g.copy(W[0]),v.copy(W[1]),m.copy(W[2]),x.uv=t(_,P,A,L,g,v,m);}x.face=U,x.faceIndex=B,i.push(x);}}}}}};}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this);}}),It.prototype=Object.create(Mt.prototype),It.prototype.constructor=It,Ot.prototype=Object.create(Mt.prototype),Ot.prototype.constructor=Ot,Tt.prototype=a(Object.create(at.prototype),{constructor:Tt,isCamera:!0,copy:function copy(t){return at.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this;},getWorldDirection:function(){var t=new e();return function(e){var i=e||new n();return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t);};}(),clone:function clone(){return new this.constructor().copy(this);}}),Pt.prototype=a(Object.create(Tt.prototype),{constructor:Pt,isPerspectiveCamera:!0,copy:function copy(t){return Tt.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:a({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this;},setFocalLength:function setFocalLength(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Wr.RAD2DEG*Math.atan(e),this.updateProjectionMatrix();},getFocalLength:function getFocalLength(){var t=Math.tan(.5*Wr.DEG2RAD*this.fov);return .5*this.getFilmHeight()/t;},getEffectiveFOV:function getEffectiveFOV(){return 2*Wr.RAD2DEG*Math.atan(Math.tan(.5*Wr.DEG2RAD*this.fov)/this.zoom);},getFilmWidth:function getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1);},getFilmHeight:function getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1);},setViewOffset:function setViewOffset(t,e,n,i,r,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:o},this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){this.view=null,this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var t=this.near,e=t*Math.tan(.5*Wr.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s;}var u=this.filmOffset;0!==u&&(r+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far);},toJSON:function toJSON(t){var e=at.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=a({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e;}}),At.prototype=a(Object.create(Tt.prototype),{constructor:At,isOrthographicCamera:!0,copy:function copy(t){return Tt.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:a({},t.view),this;},setViewOffset:function setViewOffset(t,e,n,i,r,o){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:i,width:r,height:o},this.updateProjectionMatrix();},clearViewOffset:function clearViewOffset(){this.view=null,this.updateProjectionMatrix();},updateProjectionMatrix:function updateProjectionMatrix(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/u),o=r+c*(this.view.width/u),a-=h*(this.view.offsetY/l),s=a-h*(this.view.height/l);}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far);},toJSON:function toJSON(t){var e=at.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=a({},this.view)),e;}});var ps=0;ce.prototype=a(Object.create(at.prototype),{constructor:ce,copy:function copy(t,e){return at.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this;},toJSON:function toJSON(t){var e=at.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e;}}),he.prototype=Object.create(W.prototype),he.prototype.constructor=he,he.prototype.isSpriteMaterial=!0,he.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this;},fe.prototype=a(Object.create(at.prototype),{constructor:fe,isSprite:!0,raycast:function(){var t=new n(),e=new n(),i=new n();return function(n,r){e.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(e,t),i.setFromMatrixScale(this.matrixWorld);var o=i.x*i.y/4;if(!(e.distanceToSquared(t)>o)){var a=n.ray.origin.distanceTo(t);a<n.near||a>n.far||r.push({distance:a,point:t.clone(),face:null,object:this});}};}(),clone:function clone(){return new this.constructor(this.material).copy(this);}}),de.prototype=Object.create(W.prototype),de.prototype.constructor=de,de.prototype.isLineBasicMaterial=!0,de.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this;},pe.prototype=a(Object.create(at.prototype),{constructor:pe,isLine:!0,raycast:function(){var t=new i(),e=new it(),r=new Q();return function(i,o){var a=i.linePrecision,s=a*a,u=this.geometry,l=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),r.copy(u.boundingSphere),r.applyMatrix4(l),i.ray.intersectsSphere(r)!==!1){t.getInverse(l),e.copy(i.ray).applyMatrix4(t);var c=new n(),h=new n(),f=new n(),d=new n(),p=this&&this.isLineSegments?2:1;if(u.isBufferGeometry){var g=u.index,v=u.attributes,m=v.position.array;if(null!==g)for(var y=g.array,_=0,b=y.length-1;_<b;_+=p){var x=y[_],w=y[_+1];c.fromArray(m,3*x),h.fromArray(m,3*w);var E=e.distanceSqToSegment(c,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(d);S<i.near||S>i.far||o.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this});}}else for(var _=0,b=m.length/3-1;_<b;_+=p){c.fromArray(m,3*_),h.fromArray(m,3*_+3);var E=e.distanceSqToSegment(c,h,d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(d);S<i.near||S>i.far||o.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this});}}}else if(u.isGeometry)for(var M=u.vertices,C=M.length,_=0;_<C-1;_+=p){var E=e.distanceSqToSegment(M[_],M[_+1],d,f);if(!(E>s)){d.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(d);S<i.near||S>i.far||o.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this});}}}};}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this);}}),ge.prototype=a(Object.create(pe.prototype),{constructor:ge,isLineSegments:!0}),ve.prototype=Object.create(W.prototype),ve.prototype.constructor=ve,ve.prototype.isPointsMaterial=!0,ve.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this;},me.prototype=a(Object.create(at.prototype),{constructor:me,isPoints:!0,raycast:function(){var t=new i(),e=new it(),r=new Q();return function(i,o){function a(t,n){var r=e.distanceSqToPoint(t);if(r<f){var a=e.closestPointToPoint(t);a.applyMatrix4(l);var u=i.ray.origin.distanceTo(a);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(r),point:a.clone(),index:n,face:null,object:s});}}var s=this,u=this.geometry,l=this.matrixWorld,c=i.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),r.copy(u.boundingSphere),r.applyMatrix4(l),r.radius+=c,i.ray.intersectsSphere(r)!==!1){t.getInverse(l),e.copy(i.ray).applyMatrix4(t);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,d=new n();if(u.isBufferGeometry){var p=u.index,g=u.attributes,v=g.position.array;if(null!==p)for(var m=p.array,y=0,_=m.length;y<_;y++){var b=m[y];d.fromArray(v,3*b),a(d,b);}else for(var y=0,x=v.length/3;y<x;y++){d.fromArray(v,3*y),a(d,y);}}else for(var w=u.vertices,y=0,x=w.length;y<x;y++){a(w[y],y);}}};}(),clone:function clone(){return new this.constructor(this.geometry,this.material).copy(this);}}),ye.prototype=a(Object.create(at.prototype),{constructor:ye}),_e.prototype=Object.create(St.prototype),_e.prototype.constructor=_e,be.prototype=Object.create(Mt.prototype),be.prototype.constructor=be,xe.prototype=Object.create(St.prototype),xe.prototype.constructor=xe,we.prototype=Object.create(Mt.prototype),we.prototype.constructor=we;var gs={area:function area(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++){n+=t[i].x*t[r].y-t[r].x*t[i].y;}return .5*n;},triangulate:function(){function t(t,e,n,i,r,o){var a,s,u,l,c,h,f,d,p;if(s=t[o[e]].x,u=t[o[e]].y,l=t[o[n]].x,c=t[o[n]].y,h=t[o[i]].x,f=t[o[i]].y,(l-s)*(f-u)-(c-u)*(h-s)<=0)return!1;var g,v,m,y,_,b,x,w,E,S,M,C,I,O,T;for(g=h-l,v=f-c,m=s-h,y=u-f,_=l-s,b=c-u,a=0;a<r;a++){if(d=t[o[a]].x,p=t[o[a]].y,!(d===s&&p===u||d===l&&p===c||d===h&&p===f)&&(x=d-s,w=p-u,E=d-l,S=p-c,M=d-h,C=p-f,T=g*S-v*E,I=_*w-b*x,O=m*C-y*M,T>=-Number.EPSILON&&O>=-Number.EPSILON&&I>=-Number.EPSILON))return!1;}return!0;}return function(e,n){var i=e.length;if(i<3)return null;var r,o,a,s=[],u=[],l=[];if(gs.area(e)>0)for(o=0;o<i;o++){u[o]=o;}else for(o=0;o<i;o++){u[o]=i-1-o;}var c=i,h=2*c;for(o=c-1;c>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?l:s;if(r=o,c<=r&&(r=0),o=r+1,c<=o&&(o=0),a=o+1,c<=a&&(a=0),t(e,r,o,a,c,u)){var f,d,p,g,v;for(f=u[r],d=u[o],p=u[a],s.push([e[f],e[d],e[p]]),l.push([u[r],u[o],u[a]]),g=o,v=o+1;v<c;g++,v++){u[g]=u[v];}c--,h=2*c;}}return n?l:s;};}(),triangulateShape:function triangulateShape(t,e){function n(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop();}function i(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y;}function r(t,e,n,r,o){var a=e.x-t.x,s=e.y-t.y,u=r.x-n.x,l=r.y-n.y,c=t.x-n.x,h=t.y-n.y,f=s*u-a*l,d=s*c-a*h;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if(p=l*c-u*h,p<0||p>f)return[];}else{if(d>0||d<f)return[];if(p=l*c-u*h,p>0||p<f)return[];}if(0===p)return!o||0!==d&&d!==f?[t]:[];if(p===f)return!o||0!==d&&d!==f?[e]:[];if(0===d)return[n];if(d===f)return[r];var g=p/f;return[{x:t.x+g*a,y:t.y+g*s}];}if(0!==d||l*c!==u*h)return[];var v=0===a&&0===s,m=0===u&&0===l;if(v&&m)return t.x!==n.x||t.y!==n.y?[]:[t];if(v)return i(n,r,t)?[t]:[];if(m)return i(t,e,n)?[n]:[];var y,_,b,x,w,E,S,M;return 0!==a?(t.x<e.x?(y=t,b=t.x,_=e,x=e.x):(y=e,b=e.x,_=t,x=t.x),n.x<r.x?(w=n,S=n.x,E=r,M=r.x):(w=r,S=r.x,E=n,M=n.x)):(t.y<e.y?(y=t,b=t.y,_=e,x=e.y):(y=e,b=e.y,_=t,x=t.y),n.y<r.y?(w=n,S=n.y,E=r,M=r.y):(w=r,S=r.y,E=n,M=n.y)),b<=S?x<S?[]:x===S?o?[]:[w]:x<=M?[w,_]:[w,E]:b>M?[]:b===M?o?[]:[y]:x<=M?[y,_]:[y,E];}function o(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=i.x-t.x,l=i.y-t.y,c=r*s-o*a,h=r*l-o*u;if(Math.abs(c)>Number.EPSILON){var f=u*s-l*a;return c>0?h>=0&&f>=0:h>=0||f>=0;}return h>0;}function a(t,e){function n(t,e){var n=y.length-1,i=t-1;i<0&&(i=n);var r=t+1;r>n&&(r=0);var a=o(y[t],y[i],y[r],s[e]);if(!a)return!1;var u=s.length-1,l=e-1;l<0&&(l=u);var c=e+1;return c>u&&(c=0),a=o(s[e],s[l],s[c],y[t]),!!a;}function i(t,e){var n,i,o;for(n=0;n<y.length;n++){if(i=n+1,i%=y.length,o=r(t,e,y[n],y[i],!0),o.length>0)return!0;}return!1;}function a(t,n){var i,o,a,s,u;for(i=0;i<_.length;i++){for(o=e[_[i]],a=0;a<o.length;a++){if(s=a+1,s%=o.length,u=r(t,n,o[a],o[s],!0),u.length>0)return!0;}}return!1;}for(var s,u,l,c,h,f,d,p,g,v,m,y=t.concat(),_=[],b=[],x=0,w=e.length;x<w;x++){_.push(x);}for(var E=0,S=2*_.length;_.length>0;){if(S--,S<0){console.log("Infinite Loop! Holes left:"+_.length+", Probably Hole outside Shape!");break;}for(l=E;l<y.length;l++){c=y[l],u=-1;for(var x=0;x<_.length;x++){if(f=_[x],d=c.x+":"+c.y+":"+f,void 0===b[d]){s=e[f];for(var M=0;M<s.length;M++){if(h=s[M],n(l,M)&&!i(c,h)&&!a(c,h)){u=M,_.splice(x,1),p=y.slice(0,l+1),g=y.slice(l),v=s.slice(u),m=s.slice(0,u+1),y=p.concat(v).concat(m).concat(g),E=l;break;}}if(u>=0)break;b[d]=!0;}}if(u>=0)break;}}return y;}n(t),e.forEach(n);for(var s,u,l,c,h,f,d={},p=t.concat(),g=0,v=e.length;g<v;g++){Array.prototype.push.apply(p,e[g]);}for(s=0,u=p.length;s<u;s++){h=p[s].x+":"+p[s].y,void 0!==d[h]&&console.warn("THREE.ShapeUtils: Duplicate point",h,s),d[h]=s;}var m=a(t,e),y=gs.triangulate(m,!1);for(s=0,u=y.length;s<u;s++){for(c=y[s],l=0;l<3;l++){h=c[l].x+":"+c[l].y,f=d[h],void 0!==f&&(c[l]=f);}}return y.concat();},isClockWise:function isClockWise(t){return gs.area(t)<0;}};Ee.prototype=Object.create(St.prototype),Ee.prototype.constructor=Ee,Se.prototype=Object.create(Mt.prototype),Se.prototype.constructor=Se,Me.prototype=Object.create(St.prototype),Me.prototype.constructor=Me,Ce.prototype=Object.create(Mt.prototype),Ce.prototype.constructor=Ce,Ce.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index,o=r?Array.prototype.slice.call(r.array):[];return{position:e,uv:i,index:o};},Ce.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var i=0;i<n;i++){var r=t[i];this.addShape(r,e);}this.setIndex(e.arrays.index),this.addAttribute("position",new _t(e.arrays.position,3)),this.addAttribute("uv",new _t(e.arrays.uv,2));},Ce.prototype.addShape=function(t,e){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t);}function r(t,e,n){var i,r,a=1,s=t.x-e.x,u=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=s*s+u*u,f=s*c-u*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(l*l+c*c),g=e.x-u/d,v=e.y+s/d,m=n.x-c/p,y=n.y+l/p,_=((m-g)*c-(y-v)*l)/(s*c-u*l);i=g+s*_-t.x,r=v+u*_-t.y;var b=i*i+r*r;if(b<=2)return new o(i,r);a=Math.sqrt(b/2);}else{var x=!1;s>Number.EPSILON?l>Number.EPSILON&&(x=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(u)===Math.sign(c)&&(x=!0),x?(i=-u,r=s,a=Math.sqrt(h)):(i=s,r=u,a=Math.sqrt(h/2));}return new o(i/a,r/a);}function a(){var t=b.length/3;if(O){var n=0,i=J*n;for($=0;$<K;$++){Z=G[$],c(Z[2]+i,Z[1]+i,Z[0]+i);}for(n=P+2*I,i=J*n,$=0;$<K;$++){Z=G[$],c(Z[0]+i,Z[1]+i,Z[2]+i);}}else{for($=0;$<K;$++){Z=G[$],c(Z[2],Z[1],Z[0]);}for($=0;$<K;$++){Z=G[$],c(Z[0]+J*P,Z[1]+J*P,Z[2]+J*P);}}F.addGroup(t,b.length/3-t,void 0!==e.material?e.material:0);}function s(){var t=b.length/3,n=0;for(u(V,n),n+=V.length,R=0,D=U.length;R<D;R++){k=U[R],u(k,n),n+=k.length;}F.addGroup(t,b.length/3-t,void 0!==e.extrudeMaterial?e.extrudeMaterial:1);}function u(t,e){var n,i;for($=t.length;--$>=0;){n=$,i=$-1,i<0&&(i=t.length-1);var r=0,o=P+2*I;for(r=0;r<o;r++){var a=J*r,s=J*(r+1),u=e+n+a,l=e+i+a,c=e+i+s,f=e+n+s;h(u,l,c,f,t,r,o,n,i);}}}function l(t,e,n){E.push(t),E.push(e),E.push(n);}function c(t,e,n){f(t),f(e),f(n);var i=b.length/3,r=N.generateTopUV(F,b,i-3,i-2,i-1);d(r[0]),d(r[1]),d(r[2]);}function h(t,e,n,i,r,o,a,s,u){f(t),f(e),f(i),f(e),f(n),f(i);var l=b.length/3,c=N.generateSideWallUV(F,b,l-6,l-3,l-2,l-1);d(c[0]),d(c[1]),d(c[3]),d(c[1]),d(c[2]),d(c[3]);}function f(t){x.push(b.length/3),b.push(E[3*t+0]),b.push(E[3*t+1]),b.push(E[3*t+2]);}function d(t){w.push(t.x),w.push(t.y);}var p,g,v,m,y,_=e.arrays?e.arrays:this.getArrays(),b=_.position,x=_.index,w=_.uv,E=[],S=void 0!==e.amount?e.amount:100,M=void 0!==e.bevelThickness?e.bevelThickness:6,C=void 0!==e.bevelSize?e.bevelSize:M-2,I=void 0!==e.bevelSegments?e.bevelSegments:3,O=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.curveSegments?e.curveSegments:12,P=void 0!==e.steps?e.steps:1,A=e.extrudePath,L=!1,N=void 0!==e.UVGenerator?e.UVGenerator:Me.WorldUVGenerator;A&&(p=A.getSpacedPoints(P),L=!0,O=!1,g=void 0!==e.frames?e.frames:A.computeFrenetFrames(P,!1),v=new n(),m=new n(),y=new n()),O||(I=0,M=0,C=0);var k,R,D,F=this,B=t.extractPoints(T),j=B.shape,U=B.holes,z=!gs.isClockWise(j);if(z){for(j=j.reverse(),R=0,D=U.length;R<D;R++){k=U[R],gs.isClockWise(k)&&(U[R]=k.reverse());}z=!1;}var G=gs.triangulateShape(j,U),V=j;for(R=0,D=U.length;R<D;R++){k=U[R],j=j.concat(k);}for(var X,H,q,Y,W,Z,J=j.length,K=G.length,Q=[],$=0,tt=V.length,et=tt-1,nt=$+1;$<tt;$++,et++,nt++){et===tt&&(et=0),nt===tt&&(nt=0),Q[$]=r(V[$],V[et],V[nt]);}var it,rt=[],ot=Q.concat();for(R=0,D=U.length;R<D;R++){for(k=U[R],it=[],$=0,tt=k.length,et=tt-1,nt=$+1;$<tt;$++,et++,nt++){et===tt&&(et=0),nt===tt&&(nt=0),it[$]=r(k[$],k[et],k[nt]);}rt.push(it),ot=ot.concat(it);}for(X=0;X<I;X++){for(q=X/I,Y=M*Math.cos(q*Math.PI/2),H=C*Math.sin(q*Math.PI/2),$=0,tt=V.length;$<tt;$++){W=i(V[$],Q[$],H),l(W.x,W.y,-Y);}for(R=0,D=U.length;R<D;R++){for(k=U[R],it=rt[R],$=0,tt=k.length;$<tt;$++){W=i(k[$],it[$],H),l(W.x,W.y,-Y);}}}for(H=C,$=0;$<J;$++){W=O?i(j[$],ot[$],H):j[$],L?(m.copy(g.normals[0]).multiplyScalar(W.x),v.copy(g.binormals[0]).multiplyScalar(W.y),y.copy(p[0]).add(m).add(v),l(y.x,y.y,y.z)):l(W.x,W.y,0);}var at;for(at=1;at<=P;at++){for($=0;$<J;$++){W=O?i(j[$],ot[$],H):j[$],L?(m.copy(g.normals[at]).multiplyScalar(W.x),v.copy(g.binormals[at]).multiplyScalar(W.y),y.copy(p[at]).add(m).add(v),l(y.x,y.y,y.z)):l(W.x,W.y,S/P*at);}}for(X=I-1;X>=0;X--){for(q=X/I,Y=M*Math.cos(q*Math.PI/2),H=C*Math.sin(q*Math.PI/2),$=0,tt=V.length;$<tt;$++){W=i(V[$],Q[$],H),l(W.x,W.y,S+Y);}for(R=0,D=U.length;R<D;R++){for(k=U[R],it=rt[R],$=0,tt=k.length;$<tt;$++){W=i(k[$],it[$],H),L?l(W.x,W.y+p[P-1].y,p[P-1].x+Y):l(W.x,W.y,S+Y);}}}a(),s(),e.arrays||(this.setIndex(x),this.addAttribute("position",new _t(b,3)),this.addAttribute("uv",new _t(e.arrays.uv,2)));},Me.WorldUVGenerator={generateTopUV:function generateTopUV(t,e,n,i,r){var a=e[3*n],s=e[3*n+1],u=e[3*i],l=e[3*i+1],c=e[3*r],h=e[3*r+1];return[new o(a,s),new o(u,l),new o(c,h)];},generateSideWallUV:function generateSideWallUV(t,e,n,i,r,a){var s=e[3*n],u=e[3*n+1],l=e[3*n+2],c=e[3*i],h=e[3*i+1],f=e[3*i+2],d=e[3*r],p=e[3*r+1],g=e[3*r+2],v=e[3*a],m=e[3*a+1],y=e[3*a+2];return Math.abs(u-h)<.01?[new o(s,1-l),new o(c,1-f),new o(d,1-g),new o(v,1-y)]:[new o(u,1-l),new o(h,1-f),new o(p,1-g),new o(m,1-y)];}},Ie.prototype=Object.create(W.prototype),Ie.prototype.constructor=Ie,Ie.prototype.isMeshPhongMaterial=!0,Ie.prototype.copy=function(t){return W.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this;};var vs=Object.freeze({SpriteMaterial:he,ShaderMaterial:Z,MeshPhongMaterial:Ie,MeshBasicMaterial:ct,LineBasicMaterial:de,Material:W}),ms={enabled:!1,files:{},add:function add(t,e){this.enabled!==!1&&(this.files[t]=e);},get:function get(t){if(this.enabled!==!1)return this.files[t];},remove:function remove(t){delete this.files[t];},clear:function clear(){this.files={};}},ys=new Oe();a(Te.prototype,{load:function load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=ms.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t);},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){ms.add(t,this),e&&e(this),r.manager.itemEnd(t);},!1),a.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t);},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a;},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this;},setPath:function setPath(t){return this.path=t,this;}}),a(Pe.prototype,{load:function load(t,e,n,i){var r=new Te(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var o=new u();return o.image=r.load(t,function(){var n=t.search(/\\.(jpg|jpeg)$/)>0||0===t.search(/^data\\:image\\/jpeg/);o.format=n?cr:hr,o.needsUpdate=!0,void 0!==e&&e(o);},n,i),o;},setCrossOrigin:function setCrossOrigin(t){return this.crossOrigin=t,this;},setPath:function setPath(t){return this.path=t,this;}}),a(Ae.prototype,{load:function load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=ms.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t);},0),o;var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);for(var d=new Uint8Array(h),p=0;p<c.length;p++){d[p]=c.charCodeAt(p);}"blob"===f&&(h=new Blob([h],{type:u}));break;case"document":var g=new DOMParser();h=g.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c;}window.setTimeout(function(){e&&e(h),r.manager.itemEnd(t);},0);}catch(e){window.setTimeout(function(){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t);},0);}}else{var v=new XMLHttpRequest();v.open("GET",t,!0),v.addEventListener("load",function(n){var o=n.target.response;ms.add(t,o),200===this.status?(e&&e(o),r.manager.itemEnd(t)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),e&&e(o),r.manager.itemEnd(t)):(i&&i(n),r.manager.itemEnd(t),r.manager.itemError(t));},!1),void 0!==n&&v.addEventListener("progress",function(t){n(t);},!1),v.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t);},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var m in this.requestHeader){v.setRequestHeader(m,this.requestHeader[m]);}v.send(null);}return r.manager.itemStart(t),v;},setPath:function setPath(t){return this.path=t,this;},setResponseType:function setResponseType(t){return this.responseType=t,this;},setWithCredentials:function setWithCredentials(t){return this.withCredentials=t,this;},setMimeType:function setMimeType(t){return this.mimeType=t,this;},setRequestHeader:function setRequestHeader(t){return this.requestHeader=t,this;}}),a(Le.prototype,{load:function load(t,e,n,i){var r=this,o=new Ae(r.manager);o.setResponseType("json"),o.load(t,function(t){e(r.parse(t));},n,i);},setTextures:function setTextures(t){this.textures=t;},parse:function parse(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t];}var n=this.textures,i=new vs[t.type]();if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.shading&&(i.shading=t.shading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new o().fromArray(r);}if(void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var a=0,s=t.materials.length;a<s;a++){i.materials.push(this.parse(t.materials[a]));}return i;}}),Ne.Handlers={handlers:[],add:function add(t,e){this.handlers.push(t,e);},get:function get(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o;}return null;}},a(Ne.prototype,{crossOrigin:void 0,extractUrlBase:function extractUrlBase(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/");},initMaterials:function initMaterials(t,e,n){for(var i=[],r=0;r<t.length;++r){i[r]=this.createMaterial(t[r],e,n);}return i;},createMaterial:function(){var t={NoBlending:Jn,NormalBlending:Kn,AdditiveBlending:Qn,SubtractiveBlending:$n,MultiplyBlending:ti,CustomBlending:ei},e=new q(),n=new Pe(),i=new Le();return function(r,o,a){function s(t,e,i,r,s){var l,c=o+t,h=Ne.Handlers.get(c);null!==h?l=h.load(c):(n.setCrossOrigin(a),l=n.load(c)),void 0!==e&&(l.repeat.fromArray(e),1!==e[0]&&(l.wrapS=Gi),1!==e[1]&&(l.wrapT=Gi)),void 0!==i&&l.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(l.wrapS=Gi),"mirror"===r[0]&&(l.wrapS=Xi),"repeat"===r[1]&&(l.wrapT=Gi),"mirror"===r[1]&&(l.wrapT=Xi)),void 0!==s&&(l.anisotropy=s);var f=Wr.generateUUID();return u[f]=l,f;}var u={},l={uuid:Wr.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var h=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(h).getHex();break;case"colorSpecular":l.specular=e.fromArray(h).getHex();break;case"colorEmissive":l.emissive=e.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Vn;break;case"doubleSided":l.side=Xn;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=h;break;case"vertexColors":h===!0&&(l.vertexColors=Zn),"face"===h&&(l.vertexColors=Wn);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h);}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(u),i.parse(l);};}()});var _s={arraySlice:function arraySlice(t,e,n){return _s.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n);},convertArray:function convertArray(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t);},isTypedArray:function isTypedArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView);},getKeyframeOrder:function getKeyframeOrder(t){function e(e,n){return t[e]-t[n];}for(var n=t.length,i=new Array(n),r=0;r!==n;++r){i[r]=r;}return i.sort(e),i;},sortedArray:function sortedArray(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o){for(var s=n[o]*e,u=0;u!==e;++u){r[a++]=t[s+u];}}return r;},flattenJSON:function flattenJSON(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];){o=t[r++];}if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a)){do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++];}while(void 0!==o);}else if(void 0!==a.toArray){do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++];}while(void 0!==o);}else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++];}while(void 0!==o);}}};a(ke.prototype,{evaluate:function evaluate(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r);}if(n===a)break;if(r=i,i=e[++n],t<i)break e;}o=e.length;break n;}{if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e;}o=n,n=0;}}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1;}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t);}this._cachedIndex=n,this.intervalChanged_(n,r,i);}return this.interpolate_(n,r,t,i);},settings:null,DefaultSettings_:{},getSettings_:function getSettings_(){return this.settings||this.DefaultSettings_;},copySampleValue_:function copySampleValue_(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o){e[o]=n[r+o];}return e;},interpolate_:function interpolate_(t,e,n,i){throw new Error("call to abstract method");},intervalChanged_:function intervalChanged_(t,e,n){}}),//!\\ DECLARE ALIAS AFTER assign prototype !\na(ke.prototype,{beforeStart_:ke.prototype.copySampleValue_,afterEnd_:ke.prototype.copySampleValue_}),Re.prototype=a(Object.create(ke.prototype),{constructor:Re,DefaultSettings_:{endingStart:Lr,endingEnd:Lr},intervalChanged_:function intervalChanged_(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Nr:r=t,a=2*e-n;break;case kr:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n;}if(void 0===s)switch(this.getSettings_().endingEnd){case Nr:o=t,s=2*n-e;break;case kr:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e;}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=r*l,this._offsetNext=o*l;},interpolate_:function interpolate_(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,g=p*d,v=-h*g+2*h*p-h*d,m=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*g+(1.5+f)*p+.5*d,_=f*g-f*p,b=0;b!==a;++b){r[b]=v*o[l+b]+m*o[u+b]+y*o[s+b]+_*o[c+b];}return r;}}),De.prototype=a(Object.create(ke.prototype),{constructor:De,interpolate_:function interpolate_(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(i-e),c=1-l,h=0;h!==a;++h){r[h]=o[u+h]*c+o[s+h]*l;}return r;}}),Fe.prototype=a(Object.create(ke.prototype),{constructor:Fe,interpolate_:function interpolate_(t,e,n,i){return this.copySampleValue_(t-1);}});var bs;bs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Pr,InterpolantFactoryMethodDiscrete:function InterpolantFactoryMethodDiscrete(t){return new Fe(this.times,this.values,this.getValueSize(),t);},InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new De(this.times,this.values,this.getValueSize(),t);},InterpolantFactoryMethodSmooth:function InterpolantFactoryMethodSmooth(t){return new Re(this.times,this.values,this.getValueSize(),t);},setInterpolation:function setInterpolation(t){var e;switch(t){case Tr:e=this.InterpolantFactoryMethodDiscrete;break;case Pr:e=this.InterpolantFactoryMethodLinear;break;case Ar:e=this.InterpolantFactoryMethodSmooth;}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation);}return void console.warn(n);}this.createInterpolant=e;},getInterpolation:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tr;case this.InterpolantFactoryMethodLinear:return Pr;case this.InterpolantFactoryMethodSmooth:return Ar;}},getValueSize:function getValueSize(){return this.values.length/this.times.length;},shift:function shift(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n){e[n]+=t;}return this;},scale:function scale(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n){e[n]*=t;}return this;},trim:function trim(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;){++r;}for(;o!==-1&&n[o]>e;){--o;}if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var a=this.getValueSize();this.times=_s.arraySlice(n,r,o),this.values=_s.arraySlice(this.values,r*a,o*a);}return this;},validate:function validate(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("track is empty",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),t=!1;break;}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),t=!1;break;}o=s;}if(void 0!==i&&_s.isTypedArray(i))for(var a=0,u=i.length;a!==u;++a){var l=i[a];if(isNaN(l)){console.error("value is not a valid number",this,a,l),t=!1;break;}}return t;},optimize:function optimize(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===Ar,r=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a],l=t[a+1];if(u!==l&&(1!==a||u!==u[0]))if(i)s=!0;else for(var c=a*n,h=c-n,f=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[h+d]||p!==e[f+d]){s=!0;break;}}if(s){if(a!==r){t[r]=t[a];for(var g=a*n,v=r*n,d=0;d!==n;++d){e[v+d]=e[g+d];}}++r;}}if(o>0){t[r]=t[o];for(var g=o*n,v=r*n,d=0;d!==n;++d){e[v+d]=e[g+d];}++r;}return r!==t.length&&(this.times=_s.arraySlice(t,0,r),this.values=_s.arraySlice(e,0,r*n)),this;}},je.prototype=a(Object.create(bs),{constructor:je,ValueTypeName:"vector"}),Ue.prototype=a(Object.create(ke.prototype),{constructor:Ue,interpolate_:function interpolate_(t,n,i,r){for(var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=t*s,l=(i-n)/(r-n),c=u+s;u!==c;u+=4){e.slerpFlat(o,0,a,u-s,a,u,l);}return o;}}),ze.prototype=a(Object.create(bs),{constructor:ze,ValueTypeName:"quaternion",DefaultInterpolation:Pr,InterpolantFactoryMethodLinear:function InterpolantFactoryMethodLinear(t){return new Ue(this.times,this.values,this.getValueSize(),t);},InterpolantFactoryMethodSmooth:void 0}),Ge.prototype=a(Object.create(bs),{constructor:Ge,ValueTypeName:"number"}),Ve.prototype=a(Object.create(bs),{constructor:Ve,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Tr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Xe.prototype=a(Object.create(bs),{constructor:Xe,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Tr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),He.prototype=a(Object.create(bs),{constructor:He,ValueTypeName:"color"}),qe.prototype=bs,bs.constructor=qe,a(qe,{parse:function parse(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=qe._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];_s.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i;}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation);},toJSON:function toJSON(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:_s.convertArray(t.times,Array),values:_s.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i);}return e.type=t.ValueTypeName,e;},_getTrackTypeForValueTypeName:function _getTrackTypeForValueTypeName(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ge;case"vector":case"vector2":case"vector3":case"vector4":return je;case"color":return He;case"quaternion":return ze;case"bool":case"boolean":return Xe;case"string":return Ve;}throw new Error("Unsupported typeName: "+t);}}),a(Ye,{parse:function parse(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r){e.push(qe.parse(n[r]).scale(i));}return new Ye(t.name,t.duration,e);},toJSON:function toJSON(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,o=n.length;r!==o;++r){e.push(qe.toJSON(n[r]));}return i;},CreateFromMorphTargetSequence:function CreateFromMorphTargetSequence(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],u=[];s.push((a+r-1)%r,a,(a+1)%r),u.push(0,1,0);var l=_s.getKeyframeOrder(s);s=_s.sortedArray(s,1,l),u=_s.sortedArray(u,1,l),i||0!==s[0]||(s.push(r),u.push(u[0])),o.push(new Ge(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n));}return new Ye(t,-1,o);},findByName:function findByName(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations;}for(var r=0;r<n.length;r++){if(n[r].name===e)return n[r];}return null;},CreateClipsFromMorphTargetSequences:function CreateClipsFromMorphTargetSequences(t,e,n){for(var i={},r=/^([\\w-]*?)([\\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(r);if(u&&u.length>1){var l=u[1],c=i[l];c||(i[l]=c=[]),c.push(s);}}var h=[];for(var l in i){h.push(Ye.CreateFromMorphTargetSequence(l,i[l],e,n));}return h;},parseAnimation:function parseAnimation(t,e){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var n=function n(t,e,_n2,i,r){if(0!==_n2.length){var o=[],a=[];_s.flattenJSON(_n2,o,a,i),0!==o.length&&r.push(new t(e,o,a));}},i=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},h=0;h<l.length;h++){if(l[h].morphTargets)for(var f=0;f<l[h].morphTargets.length;f++){c[l[h].morphTargets[f]]=-1;}}for(var d in c){for(var p=[],g=[],f=0;f!==l[h].morphTargets.length;++f){var v=l[h];p.push(v.time),g.push(v.morphTarget===d?1:0);}i.push(new Ge(".morphTargetInfluence["+d+"]",p,g));}o=c.length*(a||1);}else{var m=".bones["+e[u].name+"]";n(je,m+".position",l,"pos",i),n(ze,m+".quaternion",l,"rot",i),n(je,m+".scale",l,"scl",i);}}if(0===i.length)return null;var y=new Ye(r,o,i);return y;}}),a(Ye.prototype,{resetDuration:function resetDuration(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1]);}this.duration=e;},trim:function trim(){for(var t=0;t<this.tracks.length;t++){this.tracks[t].trim(0,this.duration);}return this;},optimize:function optimize(){for(var t=0;t<this.tracks.length;t++){this.tracks[t].optimize();}return this;}}),a(We.prototype,{load:function load(t,e,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Ne.prototype.extractUrlBase(t),a=new Ae(this.manager);a.setResponseType("json"),a.setWithCredentials(this.withCredentials),a.load(t,function(n){var i=n.metadata;if(void 0!==i){var a=i.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.");}}var s=r.parse(n,o);e(s.geometry,s.materials);},n,i);},setTexturePath:function setTexturePath(t){this.texturePath=t;},parse:function(){function t(t,e){function i(t,e){return t&1<<e;}var r,a,s,u,l,c,h,f,d,p,g,v,m,y,_,b,x,w,E,S,M,C,I,O,T,P,A,L=t.faces,N=t.vertices,k=t.normals,R=t.colors,D=t.scale,F=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++){t.uvs[r].length&&F++;}for(r=0;r<F;r++){e.faceVertexUvs[r]=[];}}for(u=0,l=N.length;u<l;){w=new n(),w.x=N[u++]*D,w.y=N[u++]*D,w.z=N[u++]*D,e.vertices.push(w);}for(u=0,l=L.length;u<l;){if(p=L[u++],g=i(p,0),v=i(p,1),m=i(p,3),y=i(p,4),_=i(p,5),b=i(p,6),x=i(p,7),g){if(S=new lt(),S.a=L[u],S.b=L[u+1],S.c=L[u+3],M=new lt(),M.a=L[u+1],M.b=L[u+2],M.c=L[u+3],u+=4,v&&(d=L[u++],S.materialIndex=d,M.materialIndex=d),s=e.faces.length,m)for(r=0;r<F;r++){for(O=t.uvs[r],e.faceVertexUvs[r][s]=[],e.faceVertexUvs[r][s+1]=[],a=0;a<4;a++){f=L[u++],P=O[2*f],A=O[2*f+1],T=new o(P,A),2!==a&&e.faceVertexUvs[r][s].push(T),0!==a&&e.faceVertexUvs[r][s+1].push(T);}}if(y&&(h=3*L[u++],S.normal.set(k[h++],k[h++],k[h]),M.normal.copy(S.normal)),_)for(r=0;r<4;r++){h=3*L[u++],I=new n(k[h++],k[h++],k[h]),2!==r&&S.vertexNormals.push(I),0!==r&&M.vertexNormals.push(I);}if(b&&(c=L[u++],C=R[c],S.color.setHex(C),M.color.setHex(C)),x)for(r=0;r<4;r++){c=L[u++],C=R[c],2!==r&&S.vertexColors.push(new q(C)),0!==r&&M.vertexColors.push(new q(C));}e.faces.push(S),e.faces.push(M);}else{if(E=new lt(),E.a=L[u++],E.b=L[u++],E.c=L[u++],v&&(d=L[u++],E.materialIndex=d),s=e.faces.length,m)for(r=0;r<F;r++){for(O=t.uvs[r],e.faceVertexUvs[r][s]=[],a=0;a<3;a++){f=L[u++],P=O[2*f],A=O[2*f+1],T=new o(P,A),e.faceVertexUvs[r][s].push(T);}}if(y&&(h=3*L[u++],E.normal.set(k[h++],k[h++],k[h])),_)for(r=0;r<3;r++){h=3*L[u++],I=new n(k[h++],k[h++],k[h]),E.vertexNormals.push(I);}if(b&&(c=L[u++],E.color.setHex(R[c])),x)for(r=0;r<3;r++){c=L[u++],E.vertexColors.push(new q(R[c]));}e.faces.push(E);}}}function e(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=n){var o=t.skinWeights[i],a=n>1?t.skinWeights[i+1]:0,s=n>2?t.skinWeights[i+2]:0,u=n>3?t.skinWeights[i+3]:0;e.skinWeights.push(new H(o,a,s,u));}if(t.skinIndices)for(var i=0,r=t.skinIndices.length;i<r;i+=n){var l=t.skinIndices[i],c=n>1?t.skinIndices[i+1]:0,h=n>2?t.skinIndices[i+2]:0,f=n>3?t.skinIndices[i+3]:0;e.skinIndices.push(new H(l,c,h,f));}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length)&&console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.");}function i(t,e){var i=t.scale;if(void 0!==t.morphTargets)for(var r=0,o=t.morphTargets.length;r<o;r++){e.morphTargets[r]={},e.morphTargets[r].name=t.morphTargets[r].name,e.morphTargets[r].vertices=[];for(var a=e.morphTargets[r].vertices,s=t.morphTargets[r].vertices,u=0,l=s.length;u<l;u+=3){var c=new n();c.x=s[u]*i,c.y=s[u+1]*i,c.z=s[u+2]*i,a.push(c);}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn(\'THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.\');for(var h=e.faces,f=t.morphColors[0].colors,r=0,o=h.length;r<o;r++){h[r].color.fromArray(f,3*r);}}}function r(t,e){var n=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var o=Ye.parseAnimation(i[r],e.bones);o&&n.push(o);}if(e.morphTargets){var a=Ye.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a);}n.length>0&&(e.animations=n);}return function(n,o){void 0!==n.data&&(n=n.data),void 0!==n.scale?n.scale=1/n.scale:n.scale=1;var a=new St();if(t(n,a),e(n,a),i(n,a),r(n,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===n.materials||0===n.materials.length)return{geometry:a};var s=Ne.prototype.initMaterials(n.materials,o,this.crossOrigin);return{geometry:a,materials:s};};}()}),Ze.prototype=a(Object.create(at.prototype),{constructor:Ze,isLight:!0,copy:function copy(t){return at.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this;},toJSON:function toJSON(t){var e=at.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e;}}),Je.prototype=a(Object.create(Ze.prototype),{constructor:Je,isHemisphereLight:!0,copy:function copy(t){return Ze.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this;}}),a(Ke.prototype,{copy:function copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this;},clone:function clone(){return new this.constructor().copy(this);},toJSON:function toJSON(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t;}}),Qe.prototype=a(Object.create(Ke.prototype),{constructor:Qe}),$e.prototype=a(Object.create(Ze.prototype),{constructor:$e,isDirectionalLight:!0,copy:function copy(t){return Ze.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this;}}),tn.prototype.clone=function(){return new tn(void 0===this.value.clone?this.value:this.value.clone());},a(en.prototype,{linePrecision:1,set:function set(t,e){this.ray.set(t,e);},setFromCamera:function setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.");},intersectObject:function intersectObject(t,e){var n=[];return rn(t,this,n,e),n.sort(nn),n;},intersectObjects:function intersectObjects(t,e){var n=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=t.length;i<r;i++){rn(t[i],this,n,e);}return n.sort(nn),n;}}),a(on.prototype,{start:function start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0;},stop:function stop(){this.getElapsedTime(),this.running=!1;},getElapsedTime:function getElapsedTime(){return this.getDelta(),this.elapsedTime;},getDelta:function getDelta(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t;}return t;}}),a(an.prototype,{set:function set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this;},clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this;},makeSafe:function makeSafe(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this;},setFromVector3:function setFromVector3(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Wr.clamp(t.y/this.radius,-1,1))),this;}}),a(sn.prototype,{set:function set(t,e){return this.min.copy(t),this.max.copy(e),this;},setFromPoints:function setFromPoints(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++){this.expandByPoint(t[e]);}return this;},setFromCenterAndSize:function(){var t=new o();return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this;};}(),clone:function clone(){return new this.constructor().copy(this);},copy:function copy(t){return this.min.copy(t.min),this.max.copy(t.max),this;},makeEmpty:function makeEmpty(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this;},isEmpty:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y;},getCenter:function getCenter(t){var e=t||new o();return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5);},getSize:function getSize(t){var e=t||new o();return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min);},expandByPoint:function expandByPoint(t){return this.min.min(t),this.max.max(t),this;},expandByVector:function expandByVector(t){return this.min.sub(t),this.max.add(t),this;},expandByScalar:function expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this;},containsPoint:function containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y);},containsBox:function containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y;},getParameter:function getParameter(t,e){var n=e||new o();return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y));},intersectsBox:function intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y);},clampPoint:function clampPoint(t,e){var n=e||new o();return n.copy(t).clamp(this.min,this.max);},distanceToPoint:function(){var t=new o();return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length();};}(),intersect:function intersect(t){return this.min.max(t.min),this.max.min(t.max),this;},union:function union(t){return this.min.min(t.min),this.max.max(t.max),this;},translate:function translate(t){return this.min.add(t),this.max.add(t),this;},equals:function equals(t){return t.min.equals(this.min)&&t.max.equals(this.max);}}),a(un.prototype,{getPoint:function getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null;},getPointAt:function getPointAt(t){var e=this.getUtoTmapping(t);return this.getPoint(e);},getPoints:function getPoints(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++){e.push(this.getPoint(n/t));}return e;},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++){e.push(this.getPointAt(n/t));}return e;},getLength:function getLength(){var t=this.getLengths();return t[t.length-1];},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++){e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;}return this.cacheArcLengths=i,i;},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths();},getUtoTmapping:function getUtoTmapping(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e?e:t*i[o-1];for(var a,s=0,u=o-1;s<=u;){if(r=Math.floor(s+(u-s)/2),a=i[r]-n,a<0)s=r+1;else{if(!(a>0)){u=r;break;}u=r-1;}}if(r=u,i[r]===n)return r/(o-1);var l=i[r],c=i[r+1],h=c-l,f=(n-l)/h,d=(r+f)/(o-1);return d;},getTangent:function getTangent(t){var e=1e-4,n=t-e,i=t+e;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),o=this.getPoint(i),a=o.clone().sub(r);return a.normalize();},getTangentAt:function getTangentAt(t){var e=this.getUtoTmapping(t);return this.getTangent(e);},computeFrenetFrames:function computeFrenetFrames(t,e){var r,o,a,s=new n(),u=[],l=[],c=[],h=new n(),f=new i();for(r=0;r<=t;r++){o=r/t,u[r]=this.getTangentAt(o),u[r].normalize();}l[0]=new n(),c[0]=new n();var d=Number.MAX_VALUE,p=Math.abs(u[0].x),g=Math.abs(u[0].y),v=Math.abs(u[0].z);for(p<=d&&(d=p,s.set(1,0,0)),g<=d&&(d=g,s.set(0,1,0)),v<=d&&s.set(0,0,1),h.crossVectors(u[0],s).normalize(),l[0].crossVectors(u[0],h),c[0].crossVectors(u[0],l[0]),r=1;r<=t;r++){l[r]=l[r-1].clone(),c[r]=c[r-1].clone(),h.crossVectors(u[r-1],u[r]),h.length()>Number.EPSILON&&(h.normalize(),a=Math.acos(Wr.clamp(u[r-1].dot(u[r]),-1,1)),l[r].applyMatrix4(f.makeRotationAxis(h,a))),c[r].crossVectors(u[r],l[r]);}if(e===!0)for(a=Math.acos(Wr.clamp(l[0].dot(l[t]),-1,1)),a/=t,u[0].dot(h.crossVectors(l[0],l[t]))>0&&(a=-a),r=1;r<=t;r++){l[r].applyMatrix4(f.makeRotationAxis(u[r],a*r)),c[r].crossVectors(u[r],l[r]);}return{tangents:u,normals:l,binormals:c};}});var xs=new n(),ws=new ln(),Es=new ln(),Ss=new ln();cn.prototype=Object.create(un.prototype),cn.prototype.constructor=cn,cn.prototype.getPoint=function(t){var e=this.points,i=e.length;i<2&&console.log("duh, you need at least 2 points");var r=(i-(this.closed?0:1))*t,o=Math.floor(r),a=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/e.length)+1)*e.length:0===a&&o===i-1&&(o=i-2,a=1);var s,u,l,c;if(this.closed||o>0?s=e[(o-1)%i]:(xs.subVectors(e[0],e[1]).add(e[0]),s=xs),u=e[o%i],l=e[(o+1)%i],this.closed||o+2<i?c=e[(o+2)%i]:(xs.subVectors(e[i-1],e[i-2]).add(e[i-1]),c=xs),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var h="chordal"===this.type?.5:.25,f=Math.pow(s.distanceToSquared(u),h),d=Math.pow(u.distanceToSquared(l),h),p=Math.pow(l.distanceToSquared(c),h);d<1e-4&&(d=1),f<1e-4&&(f=d),p<1e-4&&(p=d),ws.initNonuniformCatmullRom(s.x,u.x,l.x,c.x,f,d,p),Es.initNonuniformCatmullRom(s.y,u.y,l.y,c.y,f,d,p),Ss.initNonuniformCatmullRom(s.z,u.z,l.z,c.z,f,d,p);}else if("catmullrom"===this.type){var g=void 0!==this.tension?this.tension:.5;ws.initCatmullRom(s.x,u.x,l.x,c.x,g),Es.initCatmullRom(s.y,u.y,l.y,c.y,g),Ss.initCatmullRom(s.z,u.z,l.z,c.z,g);}return new n(ws.calc(a),Es.calc(a),Ss.calc(a));},hn.prototype=Object.create(un.prototype),hn.prototype.constructor=hn,hn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=new n();return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e;},fn.prototype=Object.create(un.prototype),fn.prototype.constructor=fn,fn.prototype.isLineCurve=!0,fn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e;},fn.prototype.getPointAt=function(t){return this.getPoint(t);},fn.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize();},dn.prototype=a(Object.create(un.prototype),{constructor:dn,add:function add(t){this.curves.push(t);},closePath:function closePath(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new fn(e,t));},getPoint:function getPoint(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s);}i++;}return null;},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1];},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths();},getCurveLengths:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++){e+=this.curves[n].getLength(),t.push(e);}return this.cacheLengths=t,t;},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++){e.push(this.getPoint(n/t));}return this.autoClose&&e.push(e[0]),e;},getPoints:function getPoints(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++){for(var o=r[i],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l);}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n;},createPointsGeometry:function createPointsGeometry(t){var e=this.getPoints(t);return this.createGeometry(e);},createSpacedPointsGeometry:function createSpacedPointsGeometry(t){var e=this.getSpacedPoints(t);return this.createGeometry(e);},createGeometry:function createGeometry(t){for(var e=new St(),i=0,r=t.length;i<r;i++){var o=t[i];e.vertices.push(new n(o.x,o.y,o.z||0));}return e;}}),pn.prototype=Object.create(un.prototype),pn.prototype.constructor=pn,pn.prototype.isEllipseCurve=!0,pn.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;n<0;){n+=e;}for(;n>e;){n-=e;}n<Number.EPSILON&&(n=i?0:e),this.aClockwise!==!0||i||(n===e?n=-e:n-=e);var r=this.aStartAngle+t*n,a=this.aX+this.xRadius*Math.cos(r),s=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=a-this.aX,h=s-this.aY;a=c*u-h*l+this.aX,s=c*l+h*u+this.aY;}return new o(a,s);},Mn.prototype=Object.create(un.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isSplineCurve=!0,Mn.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,i=Math.floor(n),r=n-i,a=e[0===i?i:i-1],s=e[i],u=e[i>e.length-2?e.length-1:i+1],l=e[i>e.length-3?e.length-1:i+2];return new o(gn(r,a.x,s.x,u.x,l.x),gn(r,a.y,s.y,u.y,l.y));},Cn.prototype=Object.create(un.prototype),Cn.prototype.constructor=Cn,Cn.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2,r=this.v3;return new o(Sn(t,e.x,n.x,i.x,r.x),Sn(t,e.y,n.y,i.y,r.y));},In.prototype=Object.create(un.prototype),In.prototype.constructor=In,In.prototype.getPoint=function(t){var e=this.v0,n=this.v1,i=this.v2;return new o(_n(t,e.x,n.x,i.x),_n(t,e.y,n.y,i.y));};var Ms=a(Object.create(dn.prototype),{fromPoints:function fromPoints(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++){this.lineTo(t[e].x,t[e].y);}},moveTo:function moveTo(t,e){this.currentPoint.set(t,e);},lineTo:function lineTo(t,e){var n=new fn(this.currentPoint.clone(),new o(t,e));this.curves.push(n),this.currentPoint.set(t,e);},quadraticCurveTo:function quadraticCurveTo(t,e,n,i){var r=new In(this.currentPoint.clone(),new o(t,e),new o(n,i));this.curves.push(r),this.currentPoint.set(n,i);},bezierCurveTo:function bezierCurveTo(t,e,n,i,r,a){var s=new Cn(this.currentPoint.clone(),new o(t,e),new o(n,i),new o(r,a));this.curves.push(s),this.currentPoint.set(r,a);},splineThru:function splineThru(t){var e=[this.currentPoint.clone()].concat(t),n=new Mn(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1]);},arc:function arc(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,i,r,o);},absarc:function absarc(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o);},ellipse:function ellipse(t,e,n,i,r,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+u,e+l,n,i,r,o,a,s);},absellipse:function absellipse(t,e,n,i,r,o,a,s){var u=new pn(t,e,n,i,r,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y);}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c);}});On.prototype=Ms,Ms.constructor=On,Tn.prototype=a(Object.create(Ms),{constructor:Tn,getPointsHoles:function getPointsHoles(t){for(var e=[],n=0,i=this.holes.length;n<i;n++){e[n]=this.holes[n].getPoints(t);}return e;},extractAllPoints:function extractAllPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)};},extractPoints:function extractPoints(t){return this.extractAllPoints(t);}}),a(Pn.prototype,{moveTo:function moveTo(t,e){this.currentPath=new On(),this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e);},lineTo:function lineTo(t,e){this.currentPath.lineTo(t,e);},quadraticCurveTo:function quadraticCurveTo(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i);},bezierCurveTo:function bezierCurveTo(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o);},splineThru:function splineThru(t){this.currentPath.splineThru(t);},toShapes:function toShapes(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Tn();o.curves=r.curves,e.push(o);}return e;}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[r],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0;}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;i=!i;}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0;}}return i;}var r=gs.isClockWise,o=this.subPaths;if(0===o.length)return[];if(e===!0)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],u=new Tn(),u.curves=s.curves,l.push(u),l;var c=!r(o[0].getPoints());c=t?!c:c;var h,f=[],d=[],p=[],g=0;d[g]=void 0,p[g]=[];for(var v=0,m=o.length;v<m;v++){s=o[v],h=s.getPoints(),a=r(h),a=t?!a:a,a?(!c&&d[g]&&g++,d[g]={s:new Tn(),p:h},d[g].s.curves=s.curves,c&&g++,p[g]=[]):p[g].push({h:s,p:h[0]});}if(!d[0])return n(o);if(d.length>1){for(var y=!1,_=[],b=0,x=d.length;b<x;b++){f[b]=[];}for(var b=0,x=d.length;b<x;b++){for(var w=p[b],E=0;E<w.length;E++){for(var S=w[E],M=!0,C=0;C<d.length;C++){i(S.p,d[C].p)&&(b!==C&&_.push({froms:b,tos:C,hole:E}),M?(M=!1,f[C].push(S)):y=!0);}M&&f[b].push(S);}}_.length>0&&(y||(p=f));}for(var I,v=0,O=d.length;v<O;v++){u=d[v].s,l.push(u),I=p[v];for(var T=0,P=I.length;T<P;T++){u.holes.push(I[T].h);}}return l;}});var Cs={createMultiMaterialObject:function createMultiMaterialObject(t,e){for(var n=new ye(),i=0,r=e.length;i<r;i++){n.add(new Ct(t,e[i]));}return n;},detach:function detach(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t);},attach:function attach(t,e,n){var r=new i();r.getInverse(n.matrixWorld),t.applyMatrix(r),e.remove(t),n.add(t);}};t.WebGLRenderer=le,t.ShaderChunk=ls,t.Scene=ce,t.Sprite=fe,t.Mesh=Ct,t.LineSegments=ge,t.Line=pe,t.Points=me,t.Group=ye,t.Texture=u,t.TextureLoader=Pe,t.JSONLoader=We,t.ImageLoader=Te,t.FileLoader=Ae,t.Loader=Ne,t.Cache=ms,t.HemisphereLight=Je,t.DirectionalLightShadow=Qe,t.DirectionalLight=$e,t.Light=Ze,t.PerspectiveCamera=Pt,t.Camera=Tt,t.Uniform=tn,t.BufferGeometry=Mt,t.GeometryIdCount=Et,t.Geometry=St,t.Face3=lt,t.Object3D=at,t.Raycaster=en,t.EventDispatcher=r,t.Clock=on,t.Interpolant=ke,t.Triangle=ut,t.Math=Wr,t.Spherical=an,t.Plane=tt,t.Ray=it,t.Matrix4=i,t.Matrix3=$,t.Box3=K,t.Box2=sn,t.Line3=st,t.Euler=rt,t.Vector4=H,t.Vector3=n,t.Vector2=o,t.Quaternion=e,t.Color=q,t.CatmullRomCurve3=cn,t.LineCurve3=hn,t.LineCurve=fn,t.Shape=Tn,t.Path=On,t.ShapePath=Pn,t.CurvePath=dn,t.Curve=un,t.ShapeUtils=gs,t.SceneUtils=Cs,t.TubeGeometry=_e,t.TubeBufferGeometry=be,t.SphereGeometry=xe,t.SphereBufferGeometry=we,t.ShapeGeometry=Ee,t.ShapeBufferGeometry=Se,t.ExtrudeGeometry=Me,t.ExtrudeBufferGeometry=Ce,t.SpriteMaterial=he,t.ShaderMaterial=Z,t.MeshPhongMaterial=Ie,t.MeshBasicMaterial=ct,t.LineBasicMaterial=de,t.Material=W,t.Float64BufferAttribute=bt,t.Float32BufferAttribute=_t,t.Uint32BufferAttribute=yt,t.Int32BufferAttribute=mt,t.Uint16BufferAttribute=vt,t.Int16BufferAttribute=gt,t.Uint8ClampedBufferAttribute=pt,t.Uint8BufferAttribute=dt,t.Int8BufferAttribute=ft,t.BufferAttribute=ht,t.REVISION=An,t.MOUSE=Ln,t.CullFaceNone=Nn,t.CullFaceBack=kn,t.CullFaceFront=Rn,t.CullFaceFrontBack=Dn,t.FrontFaceDirectionCW=Fn,t.FrontFaceDirectionCCW=Bn,t.BasicShadowMap=jn,t.PCFShadowMap=Un,t.PCFSoftShadowMap=zn,t.FrontSide=Gn,t.BackSide=Vn,t.DoubleSide=Xn,t.FlatShading=Hn,t.SmoothShading=qn,t.NoColors=Yn,t.FaceColors=Wn,t.VertexColors=Zn,t.NoBlending=Jn,t.NormalBlending=Kn,t.AdditiveBlending=Qn,t.SubtractiveBlending=$n,t.MultiplyBlending=ti,t.CustomBlending=ei,t.AddEquation=ni,t.SubtractEquation=ii,t.ReverseSubtractEquation=ri,t.MinEquation=oi,t.MaxEquation=ai,t.ZeroFactor=si,t.OneFactor=ui,t.SrcColorFactor=li,t.OneMinusSrcColorFactor=ci,t.SrcAlphaFactor=hi,t.OneMinusSrcAlphaFactor=fi,t.DstAlphaFactor=di,t.OneMinusDstAlphaFactor=pi,t.DstColorFactor=gi,t.OneMinusDstColorFactor=vi,t.SrcAlphaSaturateFactor=mi,t.NeverDepth=yi,t.AlwaysDepth=_i,t.LessDepth=bi,t.LessEqualDepth=xi,t.EqualDepth=wi,t.GreaterEqualDepth=Ei,t.GreaterDepth=Si,t.NotEqualDepth=Mi,t.MultiplyOperation=Ci,t.MixOperation=Ii,t.AddOperation=Oi,t.NoToneMapping=Ti,t.LinearToneMapping=Pi,t.ReinhardToneMapping=Ai,t.Uncharted2ToneMapping=Li,t.CineonToneMapping=Ni,t.UVMapping=ki,t.CubeReflectionMapping=Ri,t.CubeRefractionMapping=Di,t.EquirectangularReflectionMapping=Fi,t.EquirectangularRefractionMapping=Bi,t.SphericalReflectionMapping=ji,t.CubeUVReflectionMapping=Ui,t.CubeUVRefractionMapping=zi,t.RepeatWrapping=Gi,t.ClampToEdgeWrapping=Vi,t.MirroredRepeatWrapping=Xi,t.NearestFilter=Hi,t.NearestMipMapNearestFilter=qi,t.NearestMipMapLinearFilter=Yi,t.LinearFilter=Wi,t.LinearMipMapNearestFilter=Zi,t.LinearMipMapLinearFilter=Ji,t.UnsignedByteType=Ki,t.ByteType=Qi,t.ShortType=$i,t.UnsignedShortType=tr,t.IntType=er,t.UnsignedIntType=nr,t.FloatType=ir,t.HalfFloatType=rr,t.UnsignedShort4444Type=or,t.UnsignedShort5551Type=ar,t.UnsignedShort565Type=sr,t.UnsignedInt248Type=ur,t.AlphaFormat=lr,t.RGBFormat=cr,t.RGBAFormat=hr,t.LuminanceFormat=fr,t.LuminanceAlphaFormat=dr,t.RGBEFormat=pr,t.DepthFormat=gr,t.DepthStencilFormat=vr,t.RGB_S3TC_DXT1_Format=mr,t.RGBA_S3TC_DXT1_Format=yr,t.RGBA_S3TC_DXT3_Format=_r,t.RGBA_S3TC_DXT5_Format=br,t.RGB_PVRTC_4BPPV1_Format=xr,t.RGB_PVRTC_2BPPV1_Format=wr,t.RGBA_PVRTC_4BPPV1_Format=Er,t.RGBA_PVRTC_2BPPV1_Format=Sr,t.RGB_ETC1_Format=Mr,t.LoopOnce=Cr,t.LoopRepeat=Ir,t.LoopPingPong=Or,t.InterpolateDiscrete=Tr,t.InterpolateLinear=Pr,t.InterpolateSmooth=Ar,t.ZeroCurvatureEnding=Lr,t.ZeroSlopeEnding=Nr,t.WrapAroundEnding=kr,t.TrianglesDrawMode=Rr,t.TriangleStripDrawMode=Dr,t.TriangleFanDrawMode=Fr,t.LinearEncoding=Br,t.sRGBEncoding=jr,t.GammaEncoding=Ur;t.RGBEEncoding=zr;t.LogLuvEncoding=Gr,t.RGBM7Encoding=Vr,t.RGBM16Encoding=Xr,t.RGBDEncoding=Hr,t.BasicDepthPacking=qr,t.RGBADepthPacking=Yr,Object.defineProperty(t,"__esModule",{value:!0});});},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},i=e.isPresent=function(t){return"undefined"!=typeof t&&null!==t;},r=e.isBlank=function(t){return"undefined"==typeof t||null===t;},o=(e.isBoolean=function(t){return"boolean"==typeof t;},e.isNumber=function(t){return"number"==typeof t;},e.isString=function(t){return"string"==typeof t;},e.isArray=function(t){try{return Array.isArray(t);}catch(e){return"[object Array]"===Object.prototype.toString.call(t);}},e.isDate=function(t){return t instanceof Date&&!isNaN(t.valueOf());},e.isFunction=function(t){return"function"==typeof t;});e.isJsObject=function(t){return null!==t&&(o(t)||"object"===("undefined"==typeof t?"undefined":n(t)));},e.isPromise=function(t){return i(t)&&o(t.then);},e.isEmpty=function(t){if(r(t))return!0;if(0===t.length)return!0;for(var e in t){if(Object.prototype.hasOwnProperty.call(t,e))return!1;}return!0;};},function(t,e,n){var i,r,o,a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);};/**\n\t * JSTS. See https://github.com/bjornharrtell/jsts\n\t * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EDLv1.txt\n\t * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_EPLv1.txt\n\t * https://github.com/bjornharrtell/jsts/blob/master/LICENSE_LICENSE_ES6_COLLECTIONS.txt\n\t * @license\n\t */!function(n,s){"object"==a(e)&&"undefined"!=typeof t?s(e):(r=[e],i=s,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)));}(void 0,function(t){"use strict";function e(){}function n(){}function i(){}function r(){}function o(){}function a(){}function s(){}function u(t){this.name="RuntimeException",this.message=t,this.stack=new Error().stack,Error.call(this,t);}function l(){if(0===arguments.length)u.call(this);else if(1===arguments.length){var t=arguments[0];u.call(this,t);}}function c(){}function h(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)h.call(this,0,0);else if(1===arguments.length){var t=arguments[0];h.call(this,t.x,t.y,t.z);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];h.call(this,e,n,h.NULL_ORDINATE);}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o;}}function f(){if(this.dimensionsToTest=2,0===arguments.length)f.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new n("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t;}}function d(){}function p(){}function g(t){this.message=t||"";}function v(){}function m(t){this.message=t||"";}function y(t){this.message=t||"";}function _(){this.array_=[],arguments[0]instanceof p&&this.addAll(arguments[0]);}function b(){if(_.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n);}}function x(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];this.init(t.x,t.x,t.y,t.y);}else if(arguments[0]instanceof x){var e=arguments[0];this.init(e);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y);}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.init(r,o,a,s);}}function w(){}function E(){w.call(this,"Projective point not representable on the Cartesian plane.");}function S(){}function M(){}function C(t){this.str=t;}function I(t){this.value=t;}function O(){}function T(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t);}else if(arguments[0]instanceof T){var e=arguments[0];this.init(e);}else if("string"==typeof arguments[0]){var n=arguments[0];T.call(this,T.parse(n));}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r);}}function P(){}function A(){}function L(){}function N(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1;}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1;}else if(arguments[0]instanceof N&&arguments[1]instanceof N){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y;}else if(arguments[0]instanceof h&&arguments[1]instanceof h){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y;}}else if(3===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2];this.x=s,this.y=u,this.w=l;}else if(4===arguments.length){var c=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],g=c.y-f.y,v=f.x-c.x,m=c.x*f.y-f.x*c.y,y=d.y-p.y,_=p.x-d.x,b=d.x*p.y-p.x*d.y;this.x=v*b-_*m,this.y=y*m-g*b,this.w=g*_-y*v;}}function k(){}function R(){}function D(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID();}function F(){}function B(){}function j(){}function U(){}function z(){}function G(){}function V(){}function X(){}function H(){}function q(){}function Y(){}function W(){}function Z(){this.array_=[],arguments[0]instanceof p&&this.addAll(arguments[0]);}function J(t){return null==t?kr:t.color;}function K(t){return null==t?null:t.parent;}function Q(t,e){null!==t&&(t.color=e);}function $(t){return null==t?null:t.left;}function tt(t){return null==t?null:t.right;}function et(){this.root_=null,this.size_=0;}function nt(){}function it(){}function rt(){this.array_=[],arguments[0]instanceof p&&this.addAll(arguments[0]);}function ot(){}function at(){}function st(){}function ut(){}function lt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(D.call(this,e),null===t&&(t=[]),D.hasNullElements(t))throw new n("geometries must not contain null elements");this.geometries=t;}function ct(){var t=arguments[0],e=arguments[1];lt.call(this,t,e);}function ht(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];ht.call(this,t,B.MOD2_BOUNDARY_RULE);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n;}}function ft(){this.count=null;}function dt(){}function pt(){}function gt(){}function vt(){}function mt(){}function yt(){}function _t(){}function bt(){}function xt(){this.points=null;var t=arguments[0],e=arguments[1];D.call(this,e),this.init(t);}function wt(){}function Et(){this.coordinates=null;var t=arguments[0],e=arguments[1];D.call(this,e),this.init(t);}function St(){}function Mt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(D.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),D.hasNullElements(e))throw new n("holes must not contain null elements");if(t.isEmpty()&&D.hasNonEmptyElements(e))throw new n("shell is empty but holes are not");this.shell=t,this.holes=e;}function Ct(){var t=arguments[0],e=arguments[1];lt.call(this,t,e);}function It(){if(arguments[0]instanceof h&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];It.call(this,e.getCoordinateSequenceFactory().create(t),e);}else if(Lr(arguments[0],A)&&arguments[1]instanceof $t){var n=arguments[0],i=arguments[1];xt.call(this,n,i),this.validateConstruction();}}function Ot(){var t=arguments[0],e=arguments[1];lt.call(this,t,e);}function Tt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t;}}function Pt(){}function At(){}function Lt(){}function Nt(){}function kt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];kt.call(this,t,3);}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++){this.coordinates[n]=new h();}}else if(Lr(arguments[0],A)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++){this.coordinates[n]=i.getCoordinateCopy(n);}}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null));}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this.coordinates=new Array(a).fill(null),this.dimension=s;for(var n=0;n<a;n++){this.coordinates[n]=new h();}}}function Rt(){}function Dt(t,e){return t===e||t!==t&&e!==e;}function Ft(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1]);},this);}function Bt(t){return this.has(t)&&(this._keys.splice(Dr,1),this._values.splice(Dr,1),this._itp.forEach(function(t){Dr<t[0]&&t[0]--;})),Dr>-1;}function jt(t){return this.has(t)?this._values[Dr]:void 0;}function Ut(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(Dr=t.length;Dr--&&!Dt(t[Dr],e);){}else Dr=t.indexOf(e);return Dr>-1;}function zt(t){return Ut.call(this,this._keys,t);}function Gt(t,e){return this.has(t)?this._values[Dr]=e:this._values[this._keys.push(t)-1]=e,this;}function Vt(){(this._keys||0).length=this._values.length=0;}function Xt(){return Yt(this._itp,this._keys);}function Ht(){return Yt(this._itp,this._values);}function qt(){return Yt(this._itp,this._keys,this._values);}function Yt(t,e,n){var i=[0],r=!1;return t.push(i),{next:function next(){var o,a=i[0];return!r&&a<e.length?(o=n?[e[a],n[a]]:e[a],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o};}};}function Wt(){return this._values.length;}function Zt(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this);}}function Jt(){this.map_=new jr();}function Kt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=Kt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Qt){var t=arguments[0];this.modelType=t,t===Kt.FIXED&&this.setScale(1);}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=Kt.FIXED,this.setScale(e);}else if(arguments[0]instanceof Kt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale;}}function Qt(){this.name=null;var t=arguments[0];this.name=t,Qt.nameToTypeMap.put(t,this);}function $t(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)$t.call(this,new Kt(),0);else if(1===arguments.length){if(Lr(arguments[0],k)){var t=arguments[0];$t.call(this,new Kt(),0,t);}else if(arguments[0]instanceof Kt){var e=arguments[0];$t.call(this,e,0,$t.getDefaultCoordinateSequenceFactory());}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];$t.call(this,n,i,$t.getDefaultCoordinateSequenceFactory());}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=a,this.SRID=o;}}function te(t){this.geometryFactory=t||new $t();}function ee(t){this.parser=new te(t);}function ne(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2);}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new h(),this.intPt[1]=new h(),this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0;}function ie(){ne.apply(this);}function re(){}function oe(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t;}function ae(){}function se(){if(this.p0=null,this.p1=null,0===arguments.length)se.call(this,new h(),new h());else if(1===arguments.length){var t=arguments[0];se.call(this,t.p0,t.p1);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n;}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];se.call(this,new h(i,r),new h(o,a));}}function ue(){this.items=new _(),this.subnode=new Array(4).fill(null);}function le(){}function ce(t,e){var n,i,r,o,a={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},s={32:8,64:11}[t];if(o||(n=e<0||1/e<0,isFinite(e)||(o=a[t],n&&(o.d+=1<<t/4-1),i=Math.pow(2,s)-1,r=0)),!o){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;){i++,r/=2;}for(;r<1&&i>0;){i--,r*=2;}i<=0&&(r/=2),32===t&&i>254&&(o={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,s)-1,r=0);}return i;}function he(){this.pt=new h(),this.level=0,this.env=null;var t=arguments[0];this.computeKey(t);}function fe(){ue.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2;}function de(){}function pe(){ue.apply(this);}function ge(){}function ve(){}function me(){this.items=new _();}function ye(){this.root=null,this.minExtent=1,this.root=new pe();}function _e(t){this.geometryFactory=t||new $t();}function be(t){this.geometryFactory=t||new $t(),this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _e(this.geometryFactory);}function xe(){this.parser=new _e(this.geometryFactory);}function we(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries();}function Ee(){if(this.boundaryRule=B.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new n("Rule must be non-null");this.boundaryRule=t;}}function Se(){this.comps=null;var t=arguments[0];this.comps=t;}function Me(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Me.call(this,t,Me.INSIDE_AREA,e);}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r;}}function Ce(){this.pts=null;var t=arguments[0];this.pts=t;}function Ie(){this.locations=null;var t=arguments[0];this.locations=t;}function Oe(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t;}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n;}}function Te(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Ee(),this.minDistanceLocation=null,this.minDistance=i.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];Te.call(this,t,e,0);}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=o;}}function Pe(){this.mapOp=null;var t=arguments[0];this.mapOp=t;}function Ae(){}function Le(){if(this.pt=null,1===arguments.length){var t=arguments[0];u.call(this,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];u.call(this,Le.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new h(n);}}function Ne(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length);}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Ae.ON]=e;}else if(arguments[0]instanceof Ne){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++){this.location[i]=n.location[i];}}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[Ae.ON]=r,this.location[Ae.LEFT]=o,this.location[Ae.RIGHT]=a;}}function ke(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ne(t),this.elt[1]=new Ne(t);}else if(arguments[0]instanceof ke){var e=arguments[0];this.elt[0]=new Ne(e.elt[0]),this.elt[1]=new Ne(e.elt[1]);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Ne(S.NONE),this.elt[1]=new Ne(S.NONE),this.elt[n].setLocation(i);}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.elt[0]=new Ne(r,o,a),this.elt[1]=new Ne(r,o,a);}else if(4===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new Ne(S.NONE,S.NONE,S.NONE),this.elt[1]=new Ne(S.NONE,S.NONE,S.NONE),this.elt[s].setLocations(u,l,c);}}function Re(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new _(),this.pts=new _(),this.label=new ke(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new _(),this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing();}function De(){var t=arguments[0],e=arguments[1];Re.call(this,t,e);}function Fe(){var t=arguments[0],e=arguments[1];Re.call(this,t,e);}function Be(){}function je(){this.geom=null;var t=arguments[0];this.geom=t;}function Ue(){this.edgeMap=new et(),this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE];}function ze(){}function Ge(){Ue.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2;}function Ve(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t;}}function Xe(){Ve.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new ke(0,S.NONE);}function He(){}function qe(){He.apply(this);}function Ye(){this.nodeMap=new et(),this.nodeFact=null;var t=arguments[0];this.nodeFact=t;}function We(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t;}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];We.call(this,e,n,i,null);}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];We.call(this,r),this.init(o,a),this.label=s;}}function Ze(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(We.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1));}this.computeDirectedLabel();}function Je(){if(this.edges=new _(),this.nodes=null,this.edgeEndList=new _(),0===arguments.length)this.nodes=new Ye(new He());else if(1===arguments.length){var t=arguments[0];this.nodes=new Ye(t);}}function Ke(){this.geometryFactory=new $t(),this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t;}function Qe(){this.tempEnv1=new x(),this.selectedSegment=new se();}function $e(){this.items=new _(),this.subnode=[null,null];}function tn(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n);}}function en(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t);}function nn(){$e.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2;}function rn(){$e.apply(this);}function on(){this.root=null,this.minExtent=1,this.root=new rn();}function an(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i;}function sn(){}function un(){}function ln(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new tn();var t=arguments[0];this.ring=t,this.buildIndex();}function cn(){Qe.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e;}function hn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e;}function fn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=fn.DELETE,this.xValue=t,this.insertEvent=e;}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=fn.INSERT,this.label=n,this.xValue=i,this.obj=r;}}function dn(){}function pn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n;}function gn(){dn.apply(this),this.events=new _(),this.nOverlaps=null;}function vn(){this.min=i.POSITIVE_INFINITY,this.max=i.NEGATIVE_INFINITY;}function mn(){}function yn(){vn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n;}function _n(){vn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2);}function bn(){this.leaves=new _(),this.root=null,this.level=0;}function xn(){this.index=null;var t=arguments[0];if(!Lr(t,St))throw new n("Argument must be Polygonal");this.index=new En(t);}function wn(){this.counter=null;var t=arguments[0];this.counter=t;}function En(){this.index=new bn();var t=arguments[0];this.init(t);}function Sn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new h(t),this.segmentIndex=e,this.dist=n;}function Mn(){this.nodeMap=new et(),this.edge=null;var t=arguments[0];this.edge=t;}function Cn(){}function In(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new x(),this.env2=new x();var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Cn();this.startIndex=e.getChainStartIndices(this.pts);}function On(){this.depth=Array(2).fill().map(function(){return Array(3);});for(var t=0;t<2;t++){for(var e=0;e<3;e++){this.depth[t][e]=On.NULL_VALUE;}}}function Tn(){if(Ve.apply(this),this.pts=null,this.env=null,this.eiList=new Mn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new On(),this.depthDelta=0,1===arguments.length){var t=arguments[0];Tn.call(this,t,null);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n;}}function Pn(){if(Je.apply(this),this.parentGeom=null,this.lineEdgeMap=new Jt(),this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Ee(),2===arguments.length){var t=arguments[0],e=arguments[1];Pn.call(this,t,e,B.OGC_SFS_BOUNDARY_RULE);}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i);}}function An(){}function Ln(){if(this.edgeEnds=new _(),1===arguments.length){var t=arguments[0];Ln.call(this,null,t);}else if(2===arguments.length){var e=(arguments[0],arguments[1]);We.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new ke(e.getLabel())),this.insert(e);}}function Nn(){Ue.apply(this);}function kn(){var t=arguments[0],e=arguments[1];Xe.call(this,t,e);}function Rn(){He.apply(this);}function Dn(){this.nodes=new Ye(new Rn());}function Fn(){this.li=new ie(),this.geomGraph=null,this.nodeGraph=new Dn(),this.invalidPoint=null;var t=arguments[0];this.geomGraph=t;}function Bn(){}function jn(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e;}function Un(){this._size=null,this.items=null,this._size=0,this.items=new _(),this.items.add(null);}function zn(){if(this.childBoundables=new _(),this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t;}}function Gn(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance();}function Vn(){if(this.root=null,this.built=!1,this.itemBoundables=new _(),this.nodeCapacity=null,0===arguments.length)Vn.call(this,Vn.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];c.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t;}}function Xn(){}function Hn(){}function qn(){if(0===arguments.length)qn.call(this,qn.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Vn.call(this,t);}}function Yn(){var t=arguments[0];zn.call(this,t);}function Wn(){this.graph=null,this.rings=new _(),this.totalEnv=new x(),this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t;}function Zn(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Zn.call(this,t,null);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy());}}function Jn(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t;}function Kn(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1;}function Qn(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new se(),this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof xt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];Qn.call(this,t.getCoordinates(),e);}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=Qn.isClosed(n),this.snapTolerance=i;}}function $n(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t;}function ti(){if(Kn.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e;}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r;}}function ei(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null;}function ni(){this.commonCoord=null,this.ccFilter=new ii();}function ii(){this.commonBitsX=new ei(),this.commonBitsY=new ei();}function ri(){this.trans=null;var t=arguments[0];this.trans=t;}function oi(){}function ai(){}function si(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e;}function ui(){}function li(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new h(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n));}function ci(){this.nodeMap=new et(),this.edge=null;var t=arguments[0];this.edge=t;}function hi(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode();}function fi(){}function di(){this.nodeList=new ci(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e;}function pi(){this.tempEnv1=new x(),this.tempEnv2=new x(),this.overlapSeg1=new se(),this.overlapSeg2=new se();}function gi(){}function vi(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t);}}function mi(){if(this.monoChains=new _(),this.index=new qn(),this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];vi.call(this,t);}}function yi(){pi.apply(this),this.si=null;var t=arguments[0];this.si=t;}function _i(){}function bi(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new _(),this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null;}function xi(){this.li=new ie(),this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t;}function wi(){this.nv=null;var t=arguments[0];this.nv=new xi(wi.toSegmentStrings(t));}function Ei(){this.geometryFactory=null,this.shellList=new _();var t=arguments[0];this.geometryFactory=t;}function Si(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new _(),this.resultLineList=new _();var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n;}function Mi(){this.op=null,this.geometryFactory=null,this.resultPointList=new _();var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e;}function Ci(){if(this.li=new ie(),this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Pn(0,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ci.call(this,e,n,B.OGC_SFS_BOUNDARY_RULE);}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Pn(0,i,o),this.arg[1]=new Pn(1,r,o);}}function Ii(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Ii.orientation(t);}function Oi(){this.edges=new _(),this.ocaMap=new et();}function Ti(){this.ptLocator=new Ee(),this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Oi(),this.resultPolyList=new _(),this.resultLineList=new _(),this.resultPointList=new _();var t=arguments[0],e=arguments[1];Ci.call(this,t,e),this.graph=new Je(new qe()),this.geomFact=t.getFactory();}function Pi(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance();}function Ai(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e;}function Li(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t);}function Ni(){this.poly=null,this.centreY=null,this.hiY=i.MAX_VALUE,this.loY=-i.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Li.avg(this.loY,this.hiY);}function ki(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=ki.extractFactory(t),this.inputGeoms=t;}function Ri(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory();}function Di(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e;}function Fi(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new _());}function Bi(){if(this.polygons=new _(),this.lines=new _(),this.points=new _(),this.geomFact=null,1===arguments.length){if(Lr(arguments[0],p)){var t=arguments[0];this.extract(t);}else if(arguments[0]instanceof D){var e=arguments[0];this.extract(e);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n);}}function ji(){}function Ui(){this.centroid=null,this.minDistance=i.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t);}function zi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t;}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2);}}function Gi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0;}function Vi(){if(this.quadrantSegments=Vi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Vi.CAP_ROUND,this.joinStyle=Vi.JOIN_ROUND,this.mitreLimit=Vi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Vi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n);}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(a);}}function Xi(t){this.message=t||"";}function Hi(){this.array_=[];}function qi(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null;}function Yi(){this.array_=[];}function Wi(){this.finder=null,this.dirEdgeList=new _(),this.nodes=new _(),this.rightMostCoord=null,this.env=null,this.finder=new qi();}function Zi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=ae.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t;}function Ji(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new _();}function Ki(){}function Qi(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new se(),this.seg1=new se(),this.offset0=new se(),this.offset1=new se(),this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ie(),this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Vi.JOIN_ROUND&&(this.closingSegLengthFactor=Qi.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n);}function $i(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e;}function tr(){this.subgraphs=null,this.seg=new se(),this.cga=new ae();var t=arguments[0];this.subgraphs=t;}function er(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new se(t),this.leftDepth=e;}function nr(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n;}function ir(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new _();var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n;}function rr(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t;}function or(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Oi();var t=arguments[0];this.bufParams=t;}function ar(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];ar.call(this,t,e,0,0);}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision();}}function sr(){this.li=new ie(),this.segStrings=null;var t=arguments[0];this.segStrings=t;}function ur(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=i,e<=0)throw new n("Scale factor must be non-zero");1!==e&&(this.pt=new h(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new h(),this.p1Scaled=new h()),this.initCorners(this.pt);}function lr(){this.index=null;var t=arguments[0];this.index=t;}function cr(){Qe.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n;}function hr(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new _();}function fr(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ie(),this.li.setPrecisionModel(t),this.scaleFactor=t.getScale();}function dr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Vi(),this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t;}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n;}}function pr(){this.treeSet=new rt(),this.list=new _();}function gr(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];gr.call(this,gr.extractCoordinates(t),t.getFactory());}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=pr.filterCoordinates(e),this.geomFactory=n;}}function vr(){this.origin=null;var t=arguments[0];this.origin=t;}function mr(){this.areaBasePt=null,this.triangleCent3=new h(),this.areasum2=0,this.cg3=new h(),this.lineCentSum=new h(),this.totalLength=0,this.ptCount=0,this.ptCentSum=new h();var t=arguments[0];this.areaBasePt=null,this.add(t);}function yr(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3);}),this.setAll(at.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];yr.call(this),this.set(t);}else if(arguments[0]instanceof yr){var e=arguments[0];yr.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=e.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=e.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=e.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=e.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=e.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=e.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=e.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=e.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=e.matrix[S.EXTERIOR][S.EXTERIOR];}}function _r(){this.li=new ie(),this.ptLocator=new Ee(),this.arg=null,this.nodes=new Ye(new Rn()),this.im=null,this.isolatedEdges=new _(),this.invalidPoint=null;var t=arguments[0];this.arg=t;}function br(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal();}function xr(){this.li=new ie(),this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new h(t.getMinX(),t.getMinY()),this.diagUp1=new h(t.getMaxX(),t.getMaxY()),this.diagDown0=new h(t.getMinX(),t.getMaxY()),this.diagDown1=new h(t.getMaxX(),t.getMinY());}function wr(){this._isDone=!1;}function Er(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal();}function Sr(){wr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t;}function Mr(){wr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal();}function Cr(){wr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new h(),this.p1=new h();var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new xr(this.rectEnv);}function Ir(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Ci.call(this,t,e),this._relate=new _r(this.arg);}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];Ci.call(this,n,i,r),this._relate=new _r(this.arg);}}function Or(){this.centroid=null,this.minDistance=i.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t);}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function value(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;){e[i]=t,++i;}return e;},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t);},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t;},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t;},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t);};var Tr=function Tr(t,e){for(var n in e){e.hasOwnProperty(n)&&(t[n]=e[n]);}};Tr(e.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return e;}}),e.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n;},i.isNaN=function(t){return Number.isNaN(t);},i.doubleToLongBits=function(t){return t;},i.longBitsToDouble=function(t){return t;},i.isInfinite=function(t){return!Number.isFinite(t);},i.MAX_VALUE=Number.MAX_VALUE,u.prototype=Object.create(Error.prototype),u.prototype.constructor=Error;var Pr=function Pr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t;};Pr(l,u),Tr(l.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return l;}}),Tr(c.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return c;}}),c.shouldNeverReachHere=function(){if(0===arguments.length)c.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new l("Should never reach here"+(null!==t?": "+t:""));}},c.isTrue=function(){if(1===arguments.length){var t=arguments[0];c.isTrue(t,null);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new l():new l(n);}},c.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];c.equals(t,e,null);}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new l("Expected "+n+" but encountered "+i+(null!==r?": "+r:""));}},Tr(h.prototype,{setOrdinate:function setOrdinate(t,e){switch(t){case h.X:this.x=e;break;case h.Y:this.y=e;break;case h.Z:this.z=e;break;default:throw new n("Invalid ordinate index: "+t);}},equals2D:function equals2D(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y;}if(2===arguments.length){var n=arguments[0],i=arguments[1];return!!e.equalsWithTolerance(this.x,n.x,i)&&!!e.equalsWithTolerance(this.y,n.y,i);}},getOrdinate:function getOrdinate(t){switch(t){case h.X:return this.x;case h.Y:return this.y;case h.Z:return this.z;}throw new n("Invalid ordinate index: "+t);},equals3D:function equals3D(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||i.isNaN(this.z)&&i.isNaN(t.z));},equals:function equals(t){return t instanceof h&&this.equals2D(t);},equalInZ:function equalInZ(t,n){return e.equalsWithTolerance(this.z,t.z,n);},compareTo:function compareTo(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0;},clone:function clone(){try{return null;}catch(t){if(t instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn\'t happen because this class is Cloneable"),null;throw t;}finally{}},copy:function copy(){return new h(this);},toString:function toString(){return"("+this.x+", "+this.y+", "+this.z+")";},distance3D:function distance3D(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i);},distance:function distance(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n);},hashCode:function hashCode(){var t=17;return t=37*t+h.hashCode(this.x),t=37*t+h.hashCode(this.y);},setCoordinate:function setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.z;},interfaces_:function interfaces_(){return[r,o,s];},getClass:function getClass(){return h;}}),h.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=i.doubleToLongBits(t);return Math.trunc(e^e>>>32);}},Tr(f.prototype,{compare:function compare(t,e){var n=t,i=e,r=f.compare(n.x,i.x);if(0!==r)return r;var o=f.compare(n.y,i.y);return 0!==o?o:this.dimensionsToTest<=2?0:f.compare(n.z,i.z);},interfaces_:function interfaces_(){return[a];},getClass:function getClass(){return f;}}),f.compare=function(t,e){return t<e?-1:t>e?1:i.isNaN(t)?i.isNaN(e)?0:-1:i.isNaN(e)?1:0;},h.DimensionalComparator=f,h.serialVersionUID=0x5cbf2c235c7e5800,h.NULL_ORDINATE=i.NaN,h.X=0,h.Y=1,h.Z=2,d.prototype.hasNext=function(){},d.prototype.next=function(){},d.prototype.remove=function(){},p.prototype.add=function(){},p.prototype.addAll=function(){},p.prototype.isEmpty=function(){},p.prototype.iterator=function(){},p.prototype.size=function(){},p.prototype.toArray=function(){},p.prototype.remove=function(){},g.prototype=new Error(),g.prototype.name="IndexOutOfBoundsException",v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.prototype.get=function(){},v.prototype.set=function(){},v.prototype.isEmpty=function(){},m.prototype=new Error(),m.prototype.name="NoSuchElementException",y.prototype=new Error(),y.prototype.name="OperationNotSupported",_.prototype=Object.create(v.prototype),_.prototype.constructor=_,_.prototype.ensureCapacity=function(){},_.prototype.interfaces_=function(){return[v,p];},_.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0;},_.prototype.clear=function(){this.array_=[];},_.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next());}return!0;},_.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n;},_.prototype.iterator=function(){return new Ar(this);},_.prototype.get=function(t){if(t<0||t>=this.size())throw new g();return this.array_[t];},_.prototype.isEmpty=function(){return 0===this.array_.length;},_.prototype.size=function(){return this.array_.length;},_.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e]);}return t;},_.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++){if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break;}}return e;};var Ar=function Ar(t){this.arrayList_=t,this.position_=0;};Ar.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new m();return this.arrayList_.get(this.position_++);},Ar.prototype.hasNext=function(){return this.position_<this.arrayList_.size();},Ar.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t);},Ar.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_));},Pr(b,_),Tr(b.prototype,{getCoordinate:function getCoordinate(t){return this.get(t);},addAll:function addAll(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();){this.add(i.next(),e),n=!0;}return n;}return _.prototype.addAll.apply(this,arguments);},clone:function clone(){for(var t=_.prototype.clone.call(this),e=0;e<this.size();e++){t.add(e,this.get(e).copy());}return t;},toCoordinateArray:function toCoordinateArray(){return this.toArray(b.coordArrayType);},add:function add(){if(1===arguments.length){var t=arguments[0];_.prototype.add.call(this,t);}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0;}if(arguments[0]instanceof h&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(i))return null;}_.prototype.add.call(this,i);}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];return this.add(a,s),!0;}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2];if(c)for(var f=0;f<u.length;f++){this.add(u[f],l);}else for(var f=u.length-1;f>=0;f--){this.add(u[f],l);}return!0;}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof h){var d=arguments[0],p=arguments[1],g=arguments[2];if(!g){var v=this.size();if(v>0){if(d>0){var m=this.get(d-1);if(m.equals2D(p))return null;}if(d<v){var y=this.get(d);if(y.equals2D(p))return null;}}}_.prototype.add.call(this,d,p);}}else if(4===arguments.length){var b=arguments[0],x=arguments[1],w=arguments[2],E=arguments[3],S=1;w>E&&(S=-1);for(var f=w;f!==E;f+=S){this.add(b[f],x);}return!0;}},closeRing:function closeRing(){this.size()>0&&this.add(new h(this.get(0)),!1);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return b;}}),b.coordArrayType=new Array(0).fill(null),Tr(x.prototype,{getArea:function getArea(){return this.getWidth()*this.getHeight();},equals:function equals(t){if(!(t instanceof x))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY();},intersection:function intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new x();var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny;return new x(e,this.maxx<t.maxx?this.maxx:t.maxx,n,this.maxy<t.maxy?this.maxy:t.maxy);},isNull:function isNull(){return this.maxx<this.minx;},getMaxX:function getMaxX(){return this.maxx;},covers:function covers(){if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];return this.covers(t.x,t.y);}if(arguments[0]instanceof x){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy;}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy;}},intersects:function intersects(){if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny);}if(arguments[0]instanceof h){var e=arguments[0];return this.intersects(e.x,e.y);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny);}},getMinY:function getMinY(){return this.miny;},getMinX:function getMinX(){return this.minx;},expandToInclude:function expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];this.expandToInclude(t.x,t.y);}else if(arguments[0]instanceof x){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy));}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i));}},minExtent:function minExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e;},getWidth:function getWidth(){return this.isNull()?0:this.maxx-this.minx;},compareTo:function compareTo(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0;},translate:function translate(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e);},toString:function toString(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]";},setToNull:function setToNull(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1;},getHeight:function getHeight(){return this.isNull()?0:this.maxy-this.miny;},maxExtent:function maxExtent(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e;},expandBy:function expandBy(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull();}},contains:function contains(){if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];return this.covers(t);}if(arguments[0]instanceof h){var e=arguments[0];return this.covers(e);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i);}},centre:function centre(){return this.isNull()?null:new h((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2);},init:function init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];this.init(t.x,t.x,t.y,t.y);}else if(arguments[0]instanceof x){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy;}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y);}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),a<s?(this.miny=a,this.maxy=s):(this.miny=s,this.maxy=a);}},getMaxY:function getMaxY(){return this.maxy;},distance:function distance(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n);},hashCode:function hashCode(){var t=17;return t=37*t+h.hashCode(this.minx),t=37*t+h.hashCode(this.maxx),t=37*t+h.hashCode(this.miny),t=37*t+h.hashCode(this.maxy);},interfaces_:function interfaces_(){return[r,s];},getClass:function getClass(){return x;}}),x.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y);}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||c<s));}},x.serialVersionUID=0x51845cd552189800,Pr(E,w),Tr(E.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return E;}}),Tr(S.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return S;}}),S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-";}throw new n("Unknown location value: "+t);},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1;var Lr=function Lr(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1;};Tr(M.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return M;}}),M.log10=function(t){var e=Math.log(t);return i.isInfinite(e)?e:i.isNaN(e)?e:e/M.LOG_10;},M.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r;},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t;}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i;}},M.wrap=function(t,e){return t<0?e- -t%e:t%e;},M.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i;}if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],i=r;return o>i&&(i=o),a>i&&(i=a),s>i&&(i=s),i;}},M.average=function(t,e){return(t+e)/2;},M.LOG_10=Math.log(10),C.prototype.append=function(t){this.str+=t;},C.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1);},C.prototype.toString=function(t){return this.str;},I.prototype.intValue=function(){return this.value;},I.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0;},I.isNaN=function(t){return Number.isNaN(t);},O.isWhitespace=function(t){return t<=32&&t>=0||127==t;},O.toUpperCase=function(t){return t.toUpperCase();},Tr(T.prototype,{le:function le(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo;},extractSignificantDigits:function extractSignificantDigits(t,e){var n=this.abs(),i=T.magnitude(n.hi),r=T.TEN.pow(i);n=n.divide(r),n.gt(T.TEN)?(n=n.divide(T.TEN),i+=1):n.lt(T.ONE)&&(n=n.multiply(T.TEN),i-=1);for(var o=i+1,a=new C(),s=T.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n.hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(T.valueOf(l)).multiply(T.TEN),c&&n.selfAdd(T.TEN);var f=!0,d=T.magnitude(n.hi);if(d<0&&Math.abs(d)>=s-u&&(f=!1),!f)break;}return e[0]=i,a.toString();},sqr:function sqr(){return this.multiply(this);},doubleValue:function doubleValue(){return this.hi+this.lo;},subtract:function subtract(){if(arguments[0]instanceof T){var t=arguments[0];return this.add(t.negate());}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e);}},equals:function equals(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo;}},isZero:function isZero(){return 0===this.hi&&0===this.lo;},selfSubtract:function selfSubtract(){if(arguments[0]instanceof T){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo);}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0);}},getSpecialNumberString:function getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null;},min:function min(t){return this.le(t)?this:t;},selfDivide:function selfDivide(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfDivide(t.hi,t.lo);}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this.hi/n,l=T.SPLIT*u,r=l-u,h=T.SPLIT*n,r=l-r,o=u-r,a=h-n,c=u*n,a=h-a,s=n-a,h=r*a-c+r*s+o*a+o*s,l=(this.hi-c-h+this.lo-u*i)/n,h=u+l,this.hi=h,this.lo=u-h+l,this;}},dump:function dump(){return"DD<"+this.hi+", "+this.lo+">";},divide:function divide(){if(arguments[0]instanceof T){var t=arguments[0],e=null,n=null,r=null,o=null,a=null,s=null,u=null,l=null;return a=this.hi/t.hi,s=T.SPLIT*a,e=s-a,l=T.SPLIT*t.hi,e=s-e,n=a-e,r=l-t.hi,u=a*t.hi,r=l-r,o=t.hi-r,l=e*r-u+e*o+n*r+n*o,s=(this.hi-u-l+this.lo-a*t.lo)/t.hi,l=a+s,new T(l,a-l+s);}if("number"==typeof arguments[0]){var c=arguments[0];return i.isNaN(c)?T.createNaN():T.copy(this).selfDivide(c,0);}},ge:function ge(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo;},pow:function pow(t){if(0===t)return T.valueOf(1);var e=new T(this),n=T.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;){i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());}else n=e;return t<0?n.reciprocal():n;},ceil:function ceil(){if(this.isNaN())return T.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new T(t,e);},compareTo:function compareTo(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0;},rint:function rint(){return this.isNaN()?this:this.add(.5).floor();},setValue:function setValue(){if(arguments[0]instanceof T){var t=arguments[0];return this.init(t),this;}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this;}},max:function max(t){return this.ge(t)?this:t;},sqrt:function sqrt(){if(this.isZero())return T.valueOf(0);if(this.isNegative())return T.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=T.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r);},selfAdd:function selfAdd(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfAdd(t.hi,t.lo);}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null;return r=this.hi+e,a=r-this.hi,o=r-a,o=e-a+(this.hi-o),s=o+this.lo,n=r+s,i=s+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this;}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],n=null,i=null,c=null,h=null,r=null,o=null,a=null,s=null;r=this.hi+u,c=this.lo+l,a=r-this.hi,s=c-this.lo,o=r-a,h=c-s,o=u-a+(this.hi-o),h=l-s+(this.lo-h),a=o+c,n=r+a,i=a+(r-n),a=h+i;var f=n+a,d=a+(n-f);return this.hi=f,this.lo=d,this;}},selfMultiply:function selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfMultiply(t.hi,t.lo);}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0);}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,u=null,l=null;u=T.SPLIT*this.hi,r=u-this.hi,l=T.SPLIT*n,r=u-r,o=this.hi-r,a=l-n,u=this.hi*n,a=l-a,s=n-a,l=r*a-u+r*s+o*a+o*s+(this.hi*i+this.lo*n);var c=u+l;r=u-c;var h=l+r;return this.hi=c,this.lo=h,this;}},selfSqr:function selfSqr(){return this.selfMultiply(this);},floor:function floor(){if(this.isNaN())return T.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new T(t,e);},negate:function negate(){return this.isNaN()?this:new T(-this.hi,-this.lo);},clone:function clone(){try{return null;}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t;}finally{}},multiply:function multiply(){if(arguments[0]instanceof T){var t=arguments[0];return t.isNaN()?T.createNaN():T.copy(this).selfMultiply(t);}if("number"==typeof arguments[0]){var e=arguments[0];return i.isNaN(e)?T.createNaN():T.copy(this).selfMultiply(e,0);}},isNaN:function isNaN(){return i.isNaN(this.hi);},intValue:function intValue(){return Math.trunc(this.hi);},toString:function toString(){var t=T.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation();},toStandardNotation:function toStandardNotation(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+T.stringOfChar("0",-i)+n;else if(n.indexOf(".")===-1){var o=i-n.length,a=T.stringOfChar("0",o);r=n+a+".0";}return this.isNegative()?"-"+r:r;},reciprocal:function reciprocal(){var t=null,e=null,n=null,i=null,r=null,o=null,a=null,s=null;r=1/this.hi,o=T.SPLIT*r,t=o-r,s=T.SPLIT*this.hi,t=o-t,e=r-t,n=s-this.hi,a=r*this.hi,n=s-n,i=this.hi-n,s=t*n-a+t*i+e*n+e*i,o=(1-a-s-r*this.lo)/this.hi;var u=r+o;return new T(u,r-u+o);},toSciNotation:function toSciNotation(){if(this.isZero())return T.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=T.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i;},abs:function abs(){return this.isNaN()?T.NaN:this.isNegative()?this.negate():new T(this);},isPositive:function isPositive(){return this.hi>0||0===this.hi&&this.lo>0;},lt:function lt(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo;},add:function add(){if(arguments[0]instanceof T){var t=arguments[0];return T.copy(this).selfAdd(t);}if("number"==typeof arguments[0]){var e=arguments[0];return T.copy(this).selfAdd(e);}},init:function init(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0;}else if(arguments[0]instanceof T){var e=arguments[0];this.hi=e.hi,this.lo=e.lo;}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i;}},gt:function gt(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo;},isNegative:function isNegative(){return this.hi<0||0===this.hi&&this.lo<0;},trunc:function trunc(){return this.isNaN()?T.NaN:this.isPositive()?this.floor():this.ceil();},signum:function signum(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0;},interfaces_:function interfaces_(){return[s,r,o];},getClass:function getClass(){return T;}}),T.sqr=function(t){return T.valueOf(t).selfMultiply(t);},T.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return T.parse(t);}if("number"==typeof arguments[0])return new T(arguments[0]);},T.sqrt=function(t){return T.valueOf(t).sqrt();},T.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));){e++;}var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0));}for(var o=new T(),a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,O.isDigit(l)){var c=l-"0";o.selfMultiply(T.TEN),o.selfAdd(c),a++;}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=I.parseInt(h);}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e;}finally{}break;}throw new NumberFormatException("Unexpected character \'"+l+"\' at position "+e+" in string "+t);}s=a;}}var f=o,d=a-s-u;if(0===d)f=o;else if(d>0){var p=T.TEN.pow(d);f=o.divide(p);}else if(d<0){var p=T.TEN.pow(-d);f=o.multiply(p);}return i?f.negate():f;},T.createNaN=function(){return new T(i.NaN,i.NaN);},T.copy=function(t){return new T(t);},T.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i;},T.stringOfChar=function(t,e){for(var n=new C(),i=0;i<e;i++){n.append(t);}return n.toString();},T.PI=new T(3.141592653589793,1.2246467991473532e-16),T.TWO_PI=new T(6.283185307179586,2.4492935982947064e-16),T.PI_2=new T(1.5707963267948966,6.123233995736766e-17),T.E=new T(2.718281828459045,1.4456468917292502e-16),T.NaN=new T(i.NaN,i.NaN),T.EPS=1.23259516440783e-32,T.SPLIT=134217729,T.MAX_PRINT_DIGITS=32,T.TEN=T.valueOf(10),T.ONE=T.valueOf(1),T.SCI_NOT_EXPONENT_CHAR="E",T.SCI_NOT_ZERO="0.0E0",Tr(P.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return P;}}),P.orientationIndex=function(t,e,n){var i=P.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=T.valueOf(e.x).selfAdd(-t.x),o=T.valueOf(e.y).selfAdd(-t.y),a=T.valueOf(n.x).selfAdd(-e.x),s=T.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum();},P.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum();},P.intersection=function(t,e,n,i){var r=T.valueOf(i.y).selfSubtract(n.y).selfMultiply(T.valueOf(e.x).selfSubtract(t.x)),o=T.valueOf(i.x).selfSubtract(n.x).selfMultiply(T.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=T.valueOf(i.x).selfSubtract(n.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),u=T.valueOf(i.y).selfSubtract(n.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u),c=l.selfDivide(a).doubleValue(),f=T.valueOf(t.x).selfAdd(T.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),d=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),p=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),g=d.subtract(p),v=g.selfDivide(a).doubleValue();return new h(f,T.valueOf(n.y).selfAdd(T.valueOf(i.y).selfSubtract(n.y).selfMultiply(v)).doubleValue());},P.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return P.signum(a);i=r+o;}else{if(!(r<0))return P.signum(a);if(o>=0)return P.signum(a);i=-r-o;}var s=P.DP_SAFE_EPSILON*i;return a>=s||-a>=s?P.signum(a):2;},P.signum=function(t){return t>0?1:t<0?-1:0;},P.DP_SAFE_EPSILON=1e-15,Tr(A.prototype,{setOrdinate:function setOrdinate(t,e,n){},size:function size(){},getOrdinate:function getOrdinate(t,e){},getCoordinate:function getCoordinate(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1]);},getCoordinateCopy:function getCoordinateCopy(t){},getDimension:function getDimension(){},getX:function getX(t){},clone:function clone(){},expandEnvelope:function expandEnvelope(t){},copy:function copy(){},getY:function getY(t){},toCoordinateArray:function toCoordinateArray(){},interfaces_:function interfaces_(){return[o];},getClass:function getClass(){return A;}}),A.X=0,A.Y=1,A.Z=2,A.M=3,L.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++){n[i+o]=t[a],o++;}},L.getProperty=function(t){return{"line.separator":"\\n"}[t];},Tr(N.prototype,{getY:function getY(){var t=this.y/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new E();return t;},getX:function getX(){var t=this.x/this.w;if(i.isNaN(t)||i.isInfinite(t))throw new E();return t;},getCoordinate:function getCoordinate(){var t=new h();return t.x=this.getX(),t.y=this.getY(),t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return N;}}),N.intersection=function(t,e,n,r){var o=t.y-e.y,a=e.x-t.x,s=t.x*e.y-e.x*t.y,u=n.y-r.y,l=r.x-n.x,c=n.x*r.y-r.x*n.y,f=a*c-l*s,d=u*s-o*c,p=o*l-u*a,g=f/p,v=d/p;if(i.isNaN(g)||i.isInfinite(g)||i.isNaN(v)||i.isInfinite(v))throw new E();return new h(g,v);},Tr(k.prototype,{create:function create(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:Lr(arguments[0],A)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1]);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return k;}}),Tr(R.prototype,{filter:function filter(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return R;}}),Tr(D.prototype,{isGeometryCollection:function isGeometryCollection(){return this.getSortIndex()===D.SORTINDEX_GEOMETRYCOLLECTION;},getFactory:function getFactory(){return this.factory;},getGeometryN:function getGeometryN(t){return this;},getArea:function getArea(){return 0;},isRectangle:function isRectangle(){return!1;},equals:function equals(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return null!==t&&this.equalsTopo(t);}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof D))return!1;var n=e;return this.equalsExact(n);}}},equalsExact:function equalsExact(t){return this===t||this.equalsExact(t,0);},geometryChanged:function geometryChanged(){this.apply(D.geometryChangedFilter);},geometryChangedAction:function geometryChangedAction(){this.envelope=null;},equalsNorm:function equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm());},getLength:function getLength(){return 0;},getNumGeometries:function getNumGeometries(){return 1;},compareTo:function compareTo(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t);}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i);}},getUserData:function getUserData(){return this.userData;},getSRID:function getSRID(){return this.SRID;},getEnvelope:function getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal());},checkNotGeometryCollection:function checkNotGeometryCollection(t){if(t.getSortIndex()===D.SORTINDEX_GEOMETRYCOLLECTION)throw new n("This method does not support GeometryCollection arguments");},equal:function equal(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n;},norm:function norm(){var t=this.copy();return t.normalize(),t;},getPrecisionModel:function getPrecisionModel(){return this.factory.getPrecisionModel();},getEnvelopeInternal:function getEnvelopeInternal(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new x(this.envelope);},setSRID:function setSRID(t){this.SRID=t;},setUserData:function setUserData(t){this.userData=t;},compare:function compare(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a;}return n.hasNext()?1:i.hasNext()?-1:0;},hashCode:function hashCode(){return this.getEnvelopeInternal().hashCode();},isGeometryCollectionOrDerived:function isGeometryCollectionOrDerived(){return this.getSortIndex()===D.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===D.SORTINDEX_MULTIPOINT||this.getSortIndex()===D.SORTINDEX_MULTILINESTRING||this.getSortIndex()===D.SORTINDEX_MULTIPOLYGON;},interfaces_:function interfaces_(){return[o,r,s];},getClass:function getClass(){return D;}}),D.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++){if(!t[e].isEmpty())return!0;}return!1;},D.hasNullElements=function(t){for(var e=0;e<t.length;e++){if(null===t[e])return!0;}return!1;},D.serialVersionUID=0x799ea46522854c00,D.SORTINDEX_POINT=0,D.SORTINDEX_MULTIPOINT=1,D.SORTINDEX_LINESTRING=2,D.SORTINDEX_LINEARRING=3,D.SORTINDEX_MULTILINESTRING=4,D.SORTINDEX_POLYGON=5,D.SORTINDEX_MULTIPOLYGON=6,D.SORTINDEX_GEOMETRYCOLLECTION=7,D.geometryChangedFilter={interfaces_:function interfaces_(){return[R];},filter:function filter(t){t.geometryChangedAction();}},Tr(F.prototype,{filter:function filter(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return F;}}),Tr(B.prototype,{isInBoundary:function isInBoundary(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return B;}}),Tr(j.prototype,{isInBoundary:function isInBoundary(t){return t%2==1;},interfaces_:function interfaces_(){return[B];},getClass:function getClass(){return j;}}),Tr(U.prototype,{isInBoundary:function isInBoundary(t){return t>0;},interfaces_:function interfaces_(){return[B];},getClass:function getClass(){return U;}}),Tr(z.prototype,{isInBoundary:function isInBoundary(t){return t>1;},interfaces_:function interfaces_(){return[B];},getClass:function getClass(){return z;}}),Tr(G.prototype,{isInBoundary:function isInBoundary(t){return 1===t;},interfaces_:function interfaces_(){return[B];},getClass:function getClass(){return G;}}),B.Mod2BoundaryNodeRule=j,B.EndPointBoundaryNodeRule=U,B.MultiValentEndPointBoundaryNodeRule=z,B.MonoValentEndPointBoundaryNodeRule=G,B.MOD2_BOUNDARY_RULE=new j(),B.ENDPOINT_BOUNDARY_RULE=new U(),B.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new z(),B.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new G(),B.OGC_SFS_BOUNDARY_RULE=B.MOD2_BOUNDARY_RULE,Tr(V.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return V;}}),V.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]));},V.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(V.indexOf(i,e)<0)return i;}return null;},V.scroll=function(t,e){var n=V.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);L.arraycopy(t,n,i,0,t.length-n),L.arraycopy(t,0,i,t.length-n,n),L.arraycopy(i,0,t,0,t.length);},V.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){if(!t[n].equals(e[n]))return!1;}return!0;}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++){if(0!==o.compare(i[n],r[n]))return!1;}return!0;}},V.intersection=function(t,e){for(var n=new b(),i=0;i<t.length;i++){e.intersects(t[i])&&n.add(t[i],!0);}return n.toCoordinateArray();},V.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++){if(t[e-1].equals(t[e]))return!0;}return!1;},V.removeRepeatedPoints=function(t){return V.hasRepeatedPoints(t)?new b(t,!1).toCoordinateArray():t;},V.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r;}},V.removeNull=function(t){for(var e=0,n=0;n<t.length;n++){null!==t[n]&&e++;}var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++){null!==t[n]&&(i[r++]=t[n]);}return i;},V.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++){e[n]=new h(t[n]);}return e;}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],n=0;n<s;n++){o[a+n]=new h(i[r+n]);}},V.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1;}return!0;},V.envelope=function(t){for(var e=new x(),n=0;n<t.length;n++){e.expandToInclude(t[n]);}return e;},V.toCoordinateArray=function(t){return t.toArray(V.coordArrayType);},V.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[];},V.indexOf=function(t,e){for(var n=0;n<e.length;n++){if(t.equals(e[n]))return n;}return-1;},V.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i;}return 1;},V.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++;}return n<e.length?-1:n<t.length?1:0;},V.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++){(null===e||e.compareTo(t[n])>0)&&(e=t[n]);}return e;},V.extract=function(t,e,n){e=M.clamp(e,0,t.length),n=M.clamp(n,-1,t.length);var i=n-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++){r[o++]=t[a];}return r;},Tr(X.prototype,{compare:function compare(t,e){var n=t,i=e;return V.compare(n,i);},interfaces_:function interfaces_(){return[a];},getClass:function getClass(){return X;}}),Tr(H.prototype,{compare:function compare(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=V.compare(n,i);return V.isEqualReversed(n,i)?0:r;},OLDcompare:function OLDcompare(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=V.increasingDirection(n),o=V.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(i[s]);if(0!==l)return l;a+=r,s+=o;}return 0;},interfaces_:function interfaces_(){return[a];},getClass:function getClass(){return H;}}),V.ForwardComparator=X,V.BidirectionalComparator=H,V.coordArrayType=new Array(0).fill(null),q.prototype.get=function(){},q.prototype.put=function(){},q.prototype.size=function(){},q.prototype.values=function(){},q.prototype.entrySet=function(){},Y.prototype=new q(),W.prototype=new p(),W.prototype.contains=function(){},Z.prototype=new W(),Z.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0;}return!1;},Z.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0);},Z.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next());}return!0;},Z.prototype.remove=function(t){throw new javascript.util.OperationNotSupported();},Z.prototype.size=function(){return this.array_.length;},Z.prototype.isEmpty=function(){return 0===this.array_.length;},Z.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e]);}return t;},Z.prototype.iterator=function(){return new Nr(this);};var Nr=function Nr(t){this.hashSet_=t,this.position_=0;};Nr.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new m();return this.hashSet_.array_[this.position_++];},Nr.prototype.hasNext=function(){return this.position_<this.hashSet_.size();},Nr.prototype.remove=function(){throw new y();};var kr=0;et.prototype=new Y(),et.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right;}}return null;},et.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:kr,getValue:function getValue(){return this.value;},getKey:function getKey(){return this.key;}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o;}r=r.right;}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:kr,getValue:function getValue(){return this.value;},getKey:function getKey(){return this.key;}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null;},et.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;){if(K(t)==$(K(K(t)))){var e=tt(K(K(t)));1==J(e)?(Q(K(t),kr),Q(e,kr),Q(K(K(t)),1),t=K(K(t))):(t==tt(K(t))&&(t=K(t),this.rotateLeft(t)),Q(K(t),kr),Q(K(K(t)),1),this.rotateRight(K(K(t))));}else{var e=$(K(K(t)));1==J(e)?(Q(K(t),kr),Q(e,kr),Q(K(K(t)),1),t=K(K(t))):(t==$(K(t))&&(t=K(t),this.rotateRight(t)),Q(K(t),kr),Q(K(K(t)),1),this.rotateLeft(K(K(t))));}}this.root_.color=kr;},et.prototype.values=function(){var t=new _(),e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=et.successor(e));){t.add(e.value);}return t;},et.prototype.entrySet=function(){var t=new Z(),e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=et.successor(e));){t.add(e);}return t;},et.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e;}},et.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e;}},et.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;){t=t.left;}return t;},et.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;){e=e.left;}return e;}for(var e=t.parent,n=t;null!==e&&n===e.right;){n=e,e=e.parent;}return e;},et.prototype.size=function(){return this.size_;},Tr(nt.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return nt;}}),it.prototype=new W(),rt.prototype=new it(),rt.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0;}return!1;},rt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;}return this.array_.push(t),!0;},rt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();){this.add(e.next());}return!0;},rt.prototype.remove=function(t){throw new y();},rt.prototype.size=function(){return this.array_.length;},rt.prototype.isEmpty=function(){return 0===this.array_.length;},rt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e]);}return t;},rt.prototype.iterator=function(){return new Rr(this);};var Rr=function Rr(t){this.treeSet_=t,this.position_=0;};Rr.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new m();return this.treeSet_.array_[this.position_++];},Rr.prototype.hasNext=function(){return this.position_<this.treeSet_.size();},Rr.prototype.remove=function(){throw new y();},ot.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function i(t,e){return t.compareTo(e);},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function i(t,e){return n.compare(t,e);},r.sort(i);else{if(3===arguments.length){e=r.slice(arguments[1],arguments[2]),e.sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++){r.push(o[t]);}return;}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function i(t,e){return n.compare(t,e);},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++){r.push(o[t]);}return;}}},ot.asList=function(t){for(var e=new _(),n=0,i=t.length;n<i;n++){e.add(t[n]);}return e;},Tr(at.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return at;}}),at.toDimensionSymbol=function(t){switch(t){case at.FALSE:return at.SYM_FALSE;case at.TRUE:return at.SYM_TRUE;case at.DONTCARE:return at.SYM_DONTCARE;case at.P:return at.SYM_P;case at.L:return at.SYM_L;case at.A:return at.SYM_A;}throw new n("Unknown dimension value: "+t);},at.toDimensionValue=function(t){switch(O.toUpperCase(t)){case at.SYM_FALSE:return at.FALSE;case at.SYM_TRUE:return at.TRUE;case at.SYM_DONTCARE:return at.DONTCARE;case at.SYM_P:return at.P;case at.SYM_L:return at.L;case at.SYM_A:return at.A;}throw new n("Unknown dimension symbol: "+t);},at.P=0,at.L=1,at.A=2,at.FALSE=-1,at.TRUE=-2,at.DONTCARE=-3,at.SYM_FALSE="F",at.SYM_TRUE="T",at.SYM_DONTCARE="*",at.SYM_P="0",at.SYM_L="1",at.SYM_A="2",Tr(st.prototype,{filter:function filter(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return st;}}),Tr(ut.prototype,{filter:function filter(t,e){},isDone:function isDone(){},isGeometryChanged:function isGeometryChanged(){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ut;}}),Pr(lt,D),Tr(lt.prototype,{computeEnvelopeInternal:function computeEnvelopeInternal(){for(var t=new x(),e=0;e<this.geometries.length;e++){t.expandToInclude(this.geometries[e].getEnvelopeInternal());}return t;},getGeometryN:function getGeometryN(t){return this.geometries[t];},getSortIndex:function getSortIndex(){return D.SORTINDEX_GEOMETRYCOLLECTION;},getCoordinates:function getCoordinates(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++){for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++){e++,t[e]=i[r];}}return t;},getArea:function getArea(){for(var t=0,e=0;e<this.geometries.length;e++){t+=this.geometries[e].getArea();}return t;},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++){if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;}return!0;}return D.prototype.equalsExact.apply(this,arguments);},normalize:function normalize(){for(var t=0;t<this.geometries.length;t++){this.geometries[t].normalize();}ot.sort(this.geometries);},getCoordinate:function getCoordinate(){return this.isEmpty()?null:this.geometries[0].getCoordinate();},getBoundaryDimension:function getBoundaryDimension(){for(var t=at.FALSE,e=0;e<this.geometries.length;e++){t=Math.max(t,this.geometries[e].getBoundaryDimension());}return t;},getDimension:function getDimension(){for(var t=at.FALSE,e=0;e<this.geometries.length;e++){t=Math.max(t,this.geometries[e].getDimension());}return t;},getLength:function getLength(){for(var t=0,e=0;e<this.geometries.length;e++){t+=this.geometries[e].getLength();}return t;},getNumPoints:function getNumPoints(){for(var t=0,e=0;e<this.geometries.length;e++){t+=this.geometries[e].getNumPoints();}return t;},getNumGeometries:function getNumGeometries(){return this.geometries.length;},reverse:function reverse(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++){e[n]=this.geometries[n].reverse();}return this.getFactory().createGeometryCollection(e);},compareToSameClass:function compareToSameClass(){if(1===arguments.length){var t=arguments[0],e=new rt(ot.asList(this.geometries)),n=new rt(ot.asList(t.geometries));return this.compare(e,n);}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++;}return u<a?1:u<s?-1:0;}},apply:function apply(){if(Lr(arguments[0],F))for(var t=arguments[0],e=0;e<this.geometries.length;e++){this.geometries[e].apply(t);}else if(Lr(arguments[0],ut)){var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++){}n.isGeometryChanged()&&this.geometryChanged();}else if(Lr(arguments[0],st)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++){this.geometries[e].apply(i);}}else if(Lr(arguments[0],R)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++){this.geometries[e].apply(r);}}},getBoundary:function getBoundary(){return this.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null;},clone:function clone(){var t=D.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++){t.geometries[e]=this.geometries[e].clone();}return t;},getGeometryType:function getGeometryType(){return"GeometryCollection";},copy:function copy(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++){t[e]=this.geometries[e].copy();}return new lt(t,this.factory);},isEmpty:function isEmpty(){for(var t=0;t<this.geometries.length;t++){if(!this.geometries[t].isEmpty())return!1;}return!0;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return lt;}}),lt.serialVersionUID=-0x4f07bcb1f857d800,Pr(ct,lt),Tr(ct.prototype,{getSortIndex:function getSortIndex(){return D.SORTINDEX_MULTILINESTRING;},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e);}return lt.prototype.equalsExact.apply(this,arguments);},getBoundaryDimension:function getBoundaryDimension(){return this.isClosed()?at.FALSE:0;},isClosed:function isClosed(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++){if(!this.geometries[t].isClosed())return!1;}return!0;},getDimension:function getDimension(){return 1;},reverse:function reverse(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++){e[t-1-n]=this.geometries[n].reverse();}return this.getFactory().createMultiLineString(e);},getBoundary:function getBoundary(){return new ht(this).getBoundary();},getGeometryType:function getGeometryType(){return"MultiLineString";},copy:function copy(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++){t[e]=this.geometries[e].copy();}return new ct(t,this.factory);},interfaces_:function interfaces_(){return[nt];},getClass:function getClass(){return ct;}}),ct.serialVersionUID=0x7155d2ab4afa8000,Tr(ht.prototype,{boundaryMultiLineString:function boundaryMultiLineString(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e);},getBoundary:function getBoundary(){return this.geom instanceof xt?this.boundaryLineString(this.geom):this.geom instanceof ct?this.boundaryMultiLineString(this.geom):this.geom.getBoundary();},boundaryLineString:function boundaryLineString(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()]);},getEmptyMultiPoint:function getEmptyMultiPoint(){return this.geomFact.createMultiPoint();},computeBoundaryCoordinates:function computeBoundaryCoordinates(t){var e=new _();this.endpointMap=new et();for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)));}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue(),s=a.count;this.bnRule.isInBoundary(s)&&e.add(o.getKey());}return V.toCoordinateArray(e);},addEndpoint:function addEndpoint(t){var e=this.endpointMap.get(t);null===e&&(e=new ft(),this.endpointMap.put(t,e)),e.count++;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ht;}}),ht.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new ht(t);return e.getBoundary();}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new ht(n,i);return e.getBoundary();}},Tr(ft.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ft;}}),Tr(_t.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return _t;}}),_t.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++){n[i]=t;}return new String(n);},_t.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new vt(),n=new dt(e);return t.printStackTrace(n),e.toString();}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new pt(_t.getStackTrace(i)),s=new yt(a),u=0;u<r;u++){try{o+=s.readLine()+_t.NEWLINE;}catch(t){if(!(t instanceof mt))throw t;c.shouldNeverReachHere();}finally{}}return o;}},_t.split=function(t,e){for(var n=e.length,i=new _(),r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),r=r.substring(o+n),o=r.indexOf(e);}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),u=0;u<s.length;u++){s[u]=i.get(u);}return s;},_t.toString=function(){if(1===arguments.length){var t=arguments[0];return _t.SIMPLE_ORDINATE_FORMAT.format(t);}},_t.spaces=function(t){return _t.chars(" ",t);},_t.NEWLINE=L.getProperty("line.separator"),_t.SIMPLE_ORDINATE_FORMAT=new gt("0.#"),Tr(bt.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return bt;}}),bt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++){n.setOrdinate(i,o,t.getOrdinate(e,o));}},bt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,A.X)===t.getOrdinate(e-1,A.X)&&t.getOrdinate(0,A.Y)===t.getOrdinate(e-1,A.Y);},bt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++){for(var a=0;a<r;a++){var s=t.getOrdinate(o,a),u=e.getOrdinate(o,a);if(!(t.getOrdinate(o,a)===e.getOrdinate(o,a)||i.isNaN(s)&&i.isNaN(u)))return!1;}}return!0;},bt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(bt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++){bt.copy(e,r-1,i,o,1);}return i;},bt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++){bt.swap(t,i,e-i);}},bt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r);}},bt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++){bt.copyCoord(t,e+o,n,i+o);}},bt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new C();i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++){o>0&&i.append(","),i.append(_t.toString(t.getOrdinate(r,o)));}}return i.append(")"),i.toString();}},bt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?bt.createClosedRing(t,e,4):e.getOrdinate(0,A.X)===e.getOrdinate(n-1,A.X)&&e.getOrdinate(0,A.Y)===e.getOrdinate(n-1,A.Y)?e:bt.createClosedRing(t,e,n+1);},bt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();bt.copy(e,0,i,0,r);for(var o=r;o<n;o++){bt.copy(e,0,i,o,1);}return i;},Pr(xt,D),Tr(xt.prototype,{computeEnvelopeInternal:function computeEnvelopeInternal(){return this.isEmpty()?new x():this.points.expandEnvelope(new x());},isRing:function isRing(){return this.isClosed()&&this.isSimple();},getSortIndex:function getSortIndex(){return D.SORTINDEX_LINESTRING;},getCoordinates:function getCoordinates(){return this.points.toCoordinateArray();},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++){if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;}return!0;}return D.prototype.equalsExact.apply(this,arguments);},normalize:function normalize(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&bt.reverse(this.points),null;}},getCoordinate:function getCoordinate(){return this.isEmpty()?null:this.points.getCoordinate(0);},getBoundaryDimension:function getBoundaryDimension(){return this.isClosed()?at.FALSE:0;},isClosed:function isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1));},getEndPoint:function getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1);},getDimension:function getDimension(){return 1;},getLength:function getLength(){return ae.computeLength(this.points);},getNumPoints:function getNumPoints(){return this.points.size();},reverse:function reverse(){var t=this.points.copy();return bt.reverse(t),this.getFactory().createLineString(t);},compareToSameClass:function compareToSameClass(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++;}return n<this.points.size()?1:i<e.points.size()?-1:0;}if(2===arguments.length){var o=arguments[0],a=arguments[1],e=o;return a.compare(this.points,e.points);}},apply:function apply(){if(Lr(arguments[0],F))for(var t=arguments[0],e=0;e<this.points.size();e++){t.filter(this.points.getCoordinate(e));}else if(Lr(arguments[0],ut)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++){}n.isGeometryChanged()&&this.geometryChanged();}else if(Lr(arguments[0],st)){var i=arguments[0];i.filter(this);}else if(Lr(arguments[0],R)){var r=arguments[0];r.filter(this);}},getBoundary:function getBoundary(){return new ht(this).getBoundary();},isEquivalentClass:function isEquivalentClass(t){return t instanceof xt;},clone:function clone(){var t=D.prototype.clone.call(this);return t.points=this.points.clone(),t;},getCoordinateN:function getCoordinateN(t){return this.points.getCoordinate(t);},getGeometryType:function getGeometryType(){return"LineString";},copy:function copy(){return new xt(this.points.copy(),this.factory);},getCoordinateSequence:function getCoordinateSequence(){return this.points;},isEmpty:function isEmpty(){return 0===this.points.size();},init:function init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new n("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t;},isCoordinate:function isCoordinate(t){for(var e=0;e<this.points.size();e++){if(this.points.getCoordinate(e).equals(t))return!0;}return!1;},getStartPoint:function getStartPoint(){return this.isEmpty()?null:this.getPointN(0);},getPointN:function getPointN(t){return this.getFactory().createPoint(this.points.getCoordinate(t));},interfaces_:function interfaces_(){return[nt];},getClass:function getClass(){return xt;}}),xt.serialVersionUID=0x2b2b51ba435c8e00,Tr(wt.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return wt;}}),Pr(Et,D),Tr(Et.prototype,{computeEnvelopeInternal:function computeEnvelopeInternal(){if(this.isEmpty())return new x();var t=new x();return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t;},getSortIndex:function getSortIndex(){return D.SORTINDEX_POINT;},getCoordinates:function getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()];},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e));}return D.prototype.equalsExact.apply(this,arguments);},normalize:function normalize(){},getCoordinate:function getCoordinate(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null;},getBoundaryDimension:function getBoundaryDimension(){return at.FALSE;},getDimension:function getDimension(){return 0;},getNumPoints:function getNumPoints(){return this.isEmpty()?0:1;},reverse:function reverse(){return this.copy();},getX:function getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x;},compareToSameClass:function compareToSameClass(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate());}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return i.compare(this.coordinates,e.coordinates);}},apply:function apply(){if(Lr(arguments[0],F)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate());}else if(Lr(arguments[0],ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged();}else if(Lr(arguments[0],st)){var n=arguments[0];n.filter(this);}else if(Lr(arguments[0],R)){var i=arguments[0];i.filter(this);}},getBoundary:function getBoundary(){return this.getFactory().createGeometryCollection(null);},clone:function clone(){var t=D.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t;},getGeometryType:function getGeometryType(){return"Point";},copy:function copy(){return new Et(this.coordinates.copy(),this.factory);},getCoordinateSequence:function getCoordinateSequence(){return this.coordinates;},getY:function getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y;},isEmpty:function isEmpty(){return 0===this.coordinates.size();},init:function init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),c.isTrue(t.size()<=1),this.coordinates=t;},isSimple:function isSimple(){return!0;},interfaces_:function interfaces_(){return[wt];},getClass:function getClass(){return Et;}}),Et.serialVersionUID=0x44077bad161cbc00,Tr(St.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return St;}}),Pr(Mt,D),Tr(Mt.prototype,{computeEnvelopeInternal:function computeEnvelopeInternal(){return this.shell.getEnvelopeInternal();},getSortIndex:function getSortIndex(){return D.SORTINDEX_POLYGON;},getCoordinates:function getCoordinates(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++){e++,t[e]=n[i];}for(var r=0;r<this.holes.length;r++){for(var o=this.holes[r].getCoordinates(),a=0;a<o.length;a++){e++,t[e]=o[a];}}return t;},getArea:function getArea(){var t=0;t+=Math.abs(ae.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++){t-=Math.abs(ae.signedArea(this.holes[e].getCoordinateSequence()));}return t;},isRectangle:function isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1;}for(var o=t.getX(0),a=t.getY(0),n=1;n<=4;n++){var i=t.getX(n),r=t.getY(n);if(i!==o==(r!==a))return!1;o=i,a=r;}return!0;},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++){if(!this.holes[o].equalsExact(n.holes[o],e))return!1;}return!0;}return D.prototype.equalsExact.apply(this,arguments);},normalize:function normalize(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++){this.normalize(this.holes[t],!1);}ot.sort(this.holes);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);L.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=V.minCoordinate(e.getCoordinates());V.scroll(i,r),L.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],ae.isCCW(e.getCoordinates())===n&&V.reverse(e.getCoordinates());}},getCoordinate:function getCoordinate(){return this.shell.getCoordinate();},getNumInteriorRing:function getNumInteriorRing(){return this.holes.length;},getBoundaryDimension:function getBoundaryDimension(){return 1;},getDimension:function getDimension(){return 2;},getLength:function getLength(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++){t+=this.holes[e].getLength();}return t;},getNumPoints:function getNumPoints(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++){t+=this.holes[e].getNumPoints();}return t;},reverse:function reverse(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++){t.holes[e]=this.holes[e].copy().reverse();}return t;},convexHull:function convexHull(){return this.getExteriorRing().convexHull();},compareToSameClass:function compareToSameClass(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n);}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,e=this.shell,n=o.shell,a=e.compareToSameClass(n,r);if(0!==a)return a;for(var s=this.getNumInteriorRing(),u=o.getNumInteriorRing(),l=0;l<s&&l<u;){var c=this.getInteriorRingN(l),h=o.getInteriorRingN(l),f=c.compareToSameClass(h,r);if(0!==f)return f;l++;}return l<s?1:l<u?-1:0;}},apply:function apply(){if(Lr(arguments[0],F)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++){this.holes[e].apply(t);}}else if(Lr(arguments[0],ut)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++){}n.isGeometryChanged()&&this.geometryChanged();}else if(Lr(arguments[0],st)){var i=arguments[0];i.filter(this);}else if(Lr(arguments[0],R)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++){this.holes[e].apply(r);}}},getBoundary:function getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++){t[e+1]=this.holes[e];}return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t);},clone:function clone(){var t=D.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++){t.holes[e]=this.holes[e].clone();}return t;},getGeometryType:function getGeometryType(){return"Polygon";},copy:function copy(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++){e[n]=this.holes[n].copy();}return new Mt(t,e,this.factory);},getExteriorRing:function getExteriorRing(){return this.shell;},isEmpty:function isEmpty(){return this.shell.isEmpty();},getInteriorRingN:function getInteriorRingN(t){return this.holes[t];},interfaces_:function interfaces_(){return[St];},getClass:function getClass(){return Mt;}}),Mt.serialVersionUID=-0x307ffefd8dc97200,Pr(Ct,lt),Tr(Ct.prototype,{getSortIndex:function getSortIndex(){return D.SORTINDEX_MULTIPOINT;},isValid:function isValid(){return!0;},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e);}return lt.prototype.equalsExact.apply(this,arguments);},getCoordinate:function getCoordinate(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate();}return lt.prototype.getCoordinate.apply(this,arguments);},getBoundaryDimension:function getBoundaryDimension(){return at.FALSE;},getDimension:function getDimension(){return 0;},getBoundary:function getBoundary(){return this.getFactory().createGeometryCollection(null);},getGeometryType:function getGeometryType(){return"MultiPoint";},copy:function copy(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++){t[e]=this.geometries[e].copy();}return new Ct(t,this.factory);},interfaces_:function interfaces_(){return[wt];},getClass:function getClass(){return Ct;}}),Ct.serialVersionUID=-0x6fb1ed4162e0fc00,Pr(It,xt),Tr(It.prototype,{getSortIndex:function getSortIndex(){return D.SORTINDEX_LINEARRING;},getBoundaryDimension:function getBoundaryDimension(){return at.FALSE;},isClosed:function isClosed(){return!!this.isEmpty()||xt.prototype.isClosed.call(this);},reverse:function reverse(){var t=this.points.copy();return bt.reverse(t),this.getFactory().createLinearRing(t);},validateConstruction:function validateConstruction(){if(!this.isEmpty()&&!xt.prototype.isClosed.call(this))throw new n("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<It.MINIMUM_VALID_SIZE)throw new n("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)");},getGeometryType:function getGeometryType(){return"LinearRing";},copy:function copy(){return new It(this.points.copy(),this.factory);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return It;}}),It.MINIMUM_VALID_SIZE=4,It.serialVersionUID=-0x3b229e262367a600,Pr(Ot,lt),Tr(Ot.prototype,{getSortIndex:function getSortIndex(){return D.SORTINDEX_MULTIPOLYGON;},equalsExact:function equalsExact(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&lt.prototype.equalsExact.call(this,t,e);}return lt.prototype.equalsExact.apply(this,arguments);},getBoundaryDimension:function getBoundaryDimension(){return 1;},getDimension:function getDimension(){return 2;},reverse:function reverse(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++){e[n]=this.geometries[n].reverse();}return this.getFactory().createMultiPolygon(e);},getBoundary:function getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new _(),e=0;e<this.geometries.length;e++){for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++){t.add(i.getGeometryN(r));}}var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o));},getGeometryType:function getGeometryType(){return"MultiPolygon";},copy:function copy(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++){t[e]=this.geometries[e].copy();}return new Ot(t,this.factory);},interfaces_:function interfaces_(){return[St];},getClass:function getClass(){return Ot;}}),Ot.serialVersionUID=-0x7a5aa1369171980,Tr(Tt.prototype,{setCopyUserData:function setCopyUserData(t){this.isUserDataCopied=t;},edit:function edit(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n;},editInternal:function editInternal(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof lt?this.editGeometryCollection(t,e):t instanceof Mt?this.editPolygon(t,e):t instanceof Et?e.edit(t,this.factory):t instanceof xt?e.edit(t,this.factory):(c.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null);},editGeometryCollection:function editGeometryCollection(t,e){for(var n=e.edit(t,this.factory),i=new _(),r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o);}return n.getClass()===Ct?this.factory.createMultiPoint(i.toArray([])):n.getClass()===ct?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Ot?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]));},editPolygon:function editPolygon(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new _(),o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a);}return this.factory.createPolygon(i,r.toArray([]));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Tt;}}),Tt.GeometryEditorOperation=Pt,Tr(At.prototype,{edit:function edit(t,e){return t;},interfaces_:function interfaces_(){return[Pt];},getClass:function getClass(){return At;}}),Tr(Lt.prototype,{edit:function edit(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof It?e.createLinearRing(n):t instanceof xt?e.createLineString(n):t instanceof Et?n.length>0?e.createPoint(n[0]):e.createPoint():t;},interfaces_:function interfaces_(){return[Pt];},getClass:function getClass(){return Lt;}}),Tr(Nt.prototype,{edit:function edit(t,e){return t instanceof It?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof xt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Et?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t;},interfaces_:function interfaces_(){return[Pt];},getClass:function getClass(){return Nt;}}),Tt.NoOpGeometryOperation=At,Tt.CoordinateOperation=Lt,Tt.CoordinateSequenceOperation=Nt,Tr(kt.prototype,{setOrdinate:function setOrdinate(t,e,i){switch(e){case A.X:this.coordinates[t].x=i;break;case A.Y:this.coordinates[t].y=i;break;case A.Z:this.coordinates[t].z=i;break;default:throw new n("invalid ordinateIndex");}},size:function size(){return this.coordinates.length;},getOrdinate:function getOrdinate(t,e){switch(e){case A.X:return this.coordinates[t].x;case A.Y:return this.coordinates[t].y;case A.Z:return this.coordinates[t].z;}return i.NaN;},getCoordinate:function getCoordinate(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t];}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z;}},getCoordinateCopy:function getCoordinateCopy(t){return new h(this.coordinates[t]);},getDimension:function getDimension(){return this.dimension;},getX:function getX(t){return this.coordinates[t].x;},clone:function clone(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++){t[e]=this.coordinates[e].clone();}return new kt(t,this.dimension);},expandEnvelope:function expandEnvelope(t){for(var e=0;e<this.coordinates.length;e++){t.expandToInclude(this.coordinates[e]);}return t;},copy:function copy(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++){t[e]=this.coordinates[e].copy();}return new kt(t,this.dimension);},toString:function toString(){if(this.coordinates.length>0){var t=new C(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++){t.append(", "),t.append(this.coordinates[e]);}return t.append(")"),t.toString();}return"()";},getY:function getY(t){return this.coordinates[t].y;},toCoordinateArray:function toCoordinateArray(){return this.coordinates;},interfaces_:function interfaces_(){return[A,s];},getClass:function getClass(){return kt;}}),kt.serialVersionUID=-0xcb44a778db18e00,Tr(Rt.prototype,{readResolve:function readResolve(){return Rt.instance();},create:function create(){if(1===arguments.length){if(arguments[0]instanceof Array)return new kt(arguments[0]);if(Lr(arguments[0],A))return new kt(arguments[0]);}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new kt(t):new kt(t,e);}},interfaces_:function interfaces_(){return[k,s];},getClass:function getClass(){return Rt;}}),Rt.instance=function(){return Rt.instanceObject;},Rt.serialVersionUID=-0x38e49fa6cf6f2e00,Rt.instanceObject=new Rt();var Dr,Fr=Object.defineProperty,Br=function(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&Ft.call(this,t),void 0):new n(t);}return e||Fr(t,"size",{get:Wt}),t.constructor=n,n.prototype=t,n;}({delete:Bt,has:zt,get:jt,set:Gt,keys:Xt,values:Ht,entries:qt,forEach:Zt,clear:Vt}),jr="undefined"!=typeof Map&&Map.prototype.values?Map:Br;Jt.prototype=new q(),Jt.prototype.get=function(t){return this.map_.get(t)||null;},Jt.prototype.put=function(t,e){return this.map_.set(t,e),e;},Jt.prototype.values=function(){for(var t=new _(),e=this.map_.values(),n=e.next();!n.done;){t.add(n.value),n=e.next();}return t;},Jt.prototype.entrySet=function(){var t=new Z();return this.map_.entries().forEach(function(e){return t.add(e);}),t;},Jt.prototype.size=function(){return this.map_.size();},Tr(Kt.prototype,{equals:function equals(t){if(!(t instanceof Kt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale;},compareTo:function compareTo(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new I(n).compareTo(new I(i));},getScale:function getScale(){return this.scale;},isFloating:function isFloating(){return this.modelType===Kt.FLOATING||this.modelType===Kt.FLOATING_SINGLE;},getType:function getType(){return this.modelType;},toString:function toString(){var t="UNKNOWN";return this.modelType===Kt.FLOATING?t="Floating":this.modelType===Kt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Kt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t;},makePrecise:function makePrecise(){if("number"==typeof arguments[0]){var t=arguments[0];return i.isNaN(t)?t:this.modelType===Kt.FLOATING_SINGLE?t:this.modelType===Kt.FIXED?Math.round(t*this.scale)/this.scale:t;}if(arguments[0]instanceof h){var e=arguments[0];if(this.modelType===Kt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y);}},getMaximumSignificantDigits:function getMaximumSignificantDigits(){var t=16;return this.modelType===Kt.FLOATING?t=16:this.modelType===Kt.FLOATING_SINGLE?t=6:this.modelType===Kt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t;},setScale:function setScale(t){this.scale=Math.abs(t);},interfaces_:function interfaces_(){return[s,r];},getClass:function getClass(){return Kt;}}),Kt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e;},Tr(Qt.prototype,{readResolve:function readResolve(){return Qt.nameToTypeMap.get(this.name);},toString:function toString(){return this.name;},interfaces_:function interfaces_(){return[s];},getClass:function getClass(){return Qt;}}),Qt.serialVersionUID=-552860263173159e4,Qt.nameToTypeMap=new Jt(),Kt.Type=Qt,Kt.serialVersionUID=0x6bee6404e9a25c00,Kt.FIXED=new Qt("FIXED"),Kt.FLOATING=new Qt("FLOATING"),Kt.FLOATING_SINGLE=new Qt("FLOATING SINGLE"),Kt.maximumPreciseValue=9007199254740992,Tr($t.prototype,{toGeometry:function toGeometry(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new h(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new h(t.getMinX(),t.getMinY()),new h(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new h(t.getMinX(),t.getMinY()),new h(t.getMinX(),t.getMaxY()),new h(t.getMaxX(),t.getMaxY()),new h(t.getMaxX(),t.getMinY()),new h(t.getMinX(),t.getMinY())]),null);},createLineString:function createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null);}if(Lr(arguments[0],A))return new xt(arguments[0],this);}},createMultiLineString:function createMultiLineString(){return 0===arguments.length?new ct(null,this):1===arguments.length?new ct(arguments[0],this):void 0;},buildGeometry:function buildGeometry(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0);}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection($t.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Mt)return this.createMultiPolygon($t.toPolygonArray(t));if(s instanceof xt)return this.createMultiLineString($t.toLineStringArray(t));if(s instanceof Et)return this.createMultiPoint($t.toPointArray(t));c.shouldNeverReachHere("Unhandled class: "+s.getClass().getName());}return s;},createMultiPointFromCoords:function createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null);},createPoint:function createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof h){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null);}if(Lr(arguments[0],A))return new Et(arguments[0],this);}},getCoordinateSequenceFactory:function getCoordinateSequenceFactory(){return this.coordinateSequenceFactory;},createPolygon:function createPolygon(){if(0===arguments.length)return new Mt(null,null,this);if(1===arguments.length){if(Lr(arguments[0],A)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t));}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e));}if(arguments[0]instanceof It){var n=arguments[0];return this.createPolygon(n,null);}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Mt(i,r,this);}},getSRID:function getSRID(){return this.SRID;},createGeometryCollection:function createGeometryCollection(){return 0===arguments.length?new lt(null,this):1===arguments.length?new lt(arguments[0],this):void 0;},createGeometry:function createGeometry(t){return new Tt(this).edit(t,{edit:function edit(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t);}}});},getPrecisionModel:function getPrecisionModel(){return this.precisionModel;},createLinearRing:function createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null);}if(Lr(arguments[0],A))return new It(arguments[0],this);}},createMultiPolygon:function createMultiPolygon(){return 0===arguments.length?new Ot(null,this):1===arguments.length?new Ot(arguments[0],this):void 0;},createMultiPoint:function createMultiPoint(){if(0===arguments.length)return new Ct(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ct(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null);}if(Lr(arguments[0],A)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());bt.copy(e,i,r,0,1),n[i]=this.createPoint(r);}return this.createMultiPoint(n);}}},interfaces_:function interfaces_(){return[s];},getClass:function getClass(){return $t;}}),$t.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.getDefaultCoordinateSequenceFactory=function(){return Rt.instance();},$t.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e);},$t.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t);},$t.serialVersionUID=-0x5ea75f2051eeb400;var Ur={typeStr:/^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$/,emptyTypeStr:/^\\s*(\\w+)\\s*EMPTY\\s*$/,spaces:/\\s+/,parenComma:/\\)\\s*,\\s*\\(/,doubleParenComma:/\\)\\s*\\)\\s*,\\s*\\(\\s*\\(/,trimParens:/^\\s*\\(?(.*?)\\)?\\s*$/};Tr(te.prototype,{read:function read(t){var e,n,i;t=t.replace(/[\\n\\r]/g," ");var r=Ur.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(r=Ur.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Gr[n]&&(e=Gr[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e;},write:function write(t){return this.extractGeometry(t);},extractGeometry:function extractGeometry(t){var e=t.getGeometryType().toLowerCase();if(!zr[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+zr[e].apply(this,[t])+")";}});var zr={coordinate:function coordinate(t){return t.x+" "+t.y;},point:function point(t){return zr.coordinate.call(this,t.coordinates.coordinates[0]);},multipoint:function multipoint(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n){e.push("("+zr.point.apply(this,[t.geometries[n]])+")");}return e.join(",");},linestring:function linestring(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n){e.push(zr.coordinate.apply(this,[t.points.coordinates[n]]));}return e.join(",");},linearring:function linearring(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n){e.push(zr.coordinate.apply(this,[t.points.coordinates[n]]));}return e.join(",");},multilinestring:function multilinestring(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n){e.push("("+zr.linestring.apply(this,[t.geometries[n]])+")");}return e.join(",");},polygon:function polygon(t){var e=[];e.push("("+zr.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n){e.push("("+zr.linestring.apply(this,[t.holes[n]])+")");}return e.join(",");},multipolygon:function multipolygon(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n){e.push("("+zr.polygon.apply(this,[t.geometries[n]])+")");}return e.join(",");},geometrycollection:function geometrycollection(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n){e.push(this.extractGeometry(t.geometries[n]));}return e.join(",");}},Gr={point:function point(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Ur.spaces);return this.geometryFactory.createPoint(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])));},multipoint:function multipoint(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r){e=n[r].replace(Ur.trimParens,"$1"),i.push(Gr.point.apply(this,[e]));}return this.geometryFactory.createMultiPoint(i);},linestring:function linestring(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r){e=n[r].trim().split(Ur.spaces),i.push(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])));}return this.geometryFactory.createLineString(i);},linearring:function linearring(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r){e=n[r].trim().split(Ur.spaces),i.push(new h(Number.parseFloat(e[0]),Number.parseFloat(e[1])));}return this.geometryFactory.createLinearRing(i);},multilinestring:function multilinestring(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Ur.parenComma),i=[],r=0,o=n.length;r<o;++r){e=n[r].replace(Ur.trimParens,"$1"),i.push(Gr.linestring.apply(this,[e]));}return this.geometryFactory.createMultiLineString(i);},polygon:function polygon(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(Ur.parenComma),a=[],s=0,u=o.length;s<u;++s){e=o[s].replace(Ur.trimParens,"$1"),n=Gr.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===s?r=i:a.push(i);}return this.geometryFactory.createPolygon(r,a);},multipolygon:function multipolygon(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Ur.doubleParenComma),i=[],r=0,o=n.length;r<o;++r){e=n[r].replace(Ur.trimParens,"$1"),i.push(Gr.polygon.apply(this,[e]));}return this.geometryFactory.createMultiPolygon(i);},geometrycollection:function geometrycollection(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],i=0,r=e.length;i<r;++i){n.push(this.read(e[i]));}return this.geometryFactory.createGeometryCollection(n);}};Tr(ee.prototype,{write:function write(t){return this.parser.write(t);}}),Tr(ee,{toLineString:function toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )";}}),Tr(ne.prototype,{getIndexAlongSegment:function getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e];},getTopologySummary:function getTopologySummary(){var t=new C();return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString();},computeIntersection:function computeIntersection(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i);},getIntersectionNum:function getIntersectionNum(){return this.result;},computeIntLineIndex:function computeIntLineIndex(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2);}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0);}},isProper:function isProper(){return this.hasIntersection()&&this._isProper;},setPrecisionModel:function setPrecisionModel(t){this.precisionModel=t;},isInteriorIntersection:function isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++){if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;}return!1;}},getIntersection:function getIntersection(t){return this.intPt[t];},isEndPoint:function isEndPoint(){return this.hasIntersection()&&!this._isProper;},hasIntersection:function hasIntersection(){return this.result!==ne.NO_INTERSECTION;},getEdgeDistance:function getEdgeDistance(t,e){return ne.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);},isCollinear:function isCollinear(){return this.result===ne.COLLINEAR_INTERSECTION;},toString:function toString(){return ee.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+ee.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary();},getEndpoint:function getEndpoint(t,e){return this.inputLines[t][e];},isIntersection:function isIntersection(t){for(var e=0;e<this.result;e++){if(this.intPt[e].equals2D(t))return!0;}return!1;},getIntersectionAlongSegment:function getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]];},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ne;}}),ne.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);o=i>r?a:s,0!==o||t.equals(e)||(o=Math.max(a,s));}return c.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o;},ne.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return c.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o;},ne.DONT_INTERSECT=0,ne.DO_INTERSECT=1,ne.COLLINEAR=2,ne.NO_INTERSECTION=0,ne.POINT_INTERSECTION=1,ne.COLLINEAR_INTERSECTION=2,Pr(ie,ne),Tr(ie.prototype,{isInSegmentEnvelopes:function isInSegmentEnvelopes(t){var e=new x(this.inputLines[0][0],this.inputLines[0][1]),n=new x(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t);},computeIntersection:function computeIntersection(){if(3!==arguments.length)return ne.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,x.intersects(e,n,t)&&0===ae.orientationIndex(e,n,t)&&0===ae.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=ne.POINT_INTERSECTION,null):void(this.result=ne.NO_INTERSECTION);},normalizeToMinimum:function normalizeToMinimum(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y;},safeHCoordinateIntersection:function safeHCoordinateIntersection(t,e,n,i){var r=null;try{r=N.intersection(t,e,n,i);}catch(o){if(!(o instanceof E))throw o;r=ie.nearestEndpoint(t,e,n,i);}finally{}return r;},intersection:function intersection(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new h(ie.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r;},smallestInAbsValue:function smallestInAbsValue(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r;},checkDD:function checkDD(t,e,n,i,r){var o=P.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);L.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&L.out.println("Distance = "+r.distance(o));},intersectionWithNormalization:function intersectionWithNormalization(t,e,n,i){var r=new h(t),o=new h(e),a=new h(n),s=new h(i),u=new h();this.normalizeToEnvCentre(r,o,a,s,u);var l=this.safeHCoordinateIntersection(r,o,a,s);return l.x+=u.x,l.y+=u.y,l;},computeCollinearIntersection:function computeCollinearIntersection(t,e,n,i){var r=x.intersects(t,e,n),o=x.intersects(t,e,i),a=x.intersects(n,i,t),s=x.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,ne.COLLINEAR_INTERSECTION):a&&s?(this.intPt[0]=t,this.intPt[1]=e,ne.COLLINEAR_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||s?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||a?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||s?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||a?ne.COLLINEAR_INTERSECTION:ne.POINT_INTERSECTION):ne.NO_INTERSECTION;},normalizeToEnvCentre:function normalizeToEnvCentre(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,d=o>l?o:l,p=s<h?s:h,g=a>c?a:c,v=u<f?u:f,m=(d+p)/2,y=(g+v)/2;r.x=m,r.y=y,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y;},computeIntersect:function computeIntersect(t,e,n,i){if(this._isProper=!1,!x.intersects(t,e,n,i))return ne.NO_INTERSECTION;var r=ae.orientationIndex(t,e,n),o=ae.orientationIndex(t,e,i);if(r>0&&o>0||r<0&&o<0)return ne.NO_INTERSECTION;var a=ae.orientationIndex(n,i,t),s=ae.orientationIndex(n,i,e);return a>0&&s>0||a<0&&s<0?ne.NO_INTERSECTION:0===r&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new h(n):0===o?this.intPt[0]=new h(i):0===a?this.intPt[0]=new h(t):0===s&&(this.intPt[0]=new h(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),ne.POINT_INTERSECTION);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ie;}}),ie.nearestEndpoint=function(t,e,n,i){var r=t,o=ae.distancePointLine(t,n,i),a=ae.distancePointLine(e,n,i);return a<o&&(o=a,r=e),a=ae.distancePointLine(n,t,e),a<o&&(o=a,r=n),a=ae.distancePointLine(i,t,e),a<o&&(o=a,r=i),r;},Tr(re.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return re;}}),re.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return re.signOfDet2x2(i,r,o,a);},re.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null,s=0;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(0<e?0<i?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):0<i?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),0<t){if(!(0<n))return r;if(!(t<=n))return r;}else{if(0<n)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n;}for(;;){if(s+=1,a=Math.floor(n/t),n-=a*t,(i-=a*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r;}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r;}if(0===i)return 0===n?0:-r;if(0===n)return r;if(a=Math.floor(t/n),t-=a*n,(e-=a*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r;}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r;}if(0===e)return 0===t?0:r;if(0===t)return-r;}},Tr(oe.prototype,{countSegment:function countSegment(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null;}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,a=e.x-this.p.x,s=e.y-this.p.y,u=re.signOfDet2x2(r,o,a,s);if(0===u)return this.isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this.crossingCount++;}},isPointInPolygon:function isPointInPolygon(){return this.getLocation()!==S.EXTERIOR;},getLocation:function getLocation(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2==1?S.INTERIOR:S.EXTERIOR;},isOnSegment:function isOnSegment(){return this.isPointOnSegment;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return oe;}}),oe.locatePointInRing=function(){if(arguments[0]instanceof h&&Lr(arguments[1],A)){for(var t=arguments[0],e=arguments[1],n=new oe(t),i=new h(),r=new h(),o=1;o<e.size();o++){if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();}return n.getLocation();}if(arguments[0]instanceof h&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],n=new oe(a),o=1;o<s.length;o++){var i=s[o],r=s[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation();}return n.getLocation();}},Tr(ae.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ae;}}),ae.orientationIndex=function(t,e,n){return P.orientationIndex(t,e,n);},ae.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o);}return e/2;}if(Lr(arguments[0],A)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new h(),l=new h(),c=new h();a.getCoordinate(0,l),a.getCoordinate(1,c);var n=l.x;c.x-=n;for(var e=0,i=1;i<s-1;i++){u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(i+1,c),c.x-=n,e+=l.x*(u.y-c.y);}return e/2;}},ae.distanceLineLine=function(t,e,n,i){if(t.equals(e))return ae.distancePointLine(t,n,i);if(n.equals(i))return ae.distancePointLine(i,t,e);var r=!1;if(x.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),s=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=s/o,l=a/o;(l<0||l>1||u<0||u>1)&&(r=!0);}}else r=!0;return r?M.min(ae.distancePointLine(t,n,i),ae.distancePointLine(e,n,i),ae.distancePointLine(n,t,e),ae.distancePointLine(i,t,e)):0;},ae.isPointInRing=function(t,e){return ae.locatePointInRing(t,e)!==S.EXTERIOR;},ae.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new h();t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,u=i.y,l=s-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=s,o=u;}return n;},ae.isCCW=function(t){var e=t.length-1;if(e<3)throw new n("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,o=1;o<=e;o++){var a=t[o];a.y>i.y&&(i=a,r=o);}var s=r;do{(s-=1)<0&&(s=e);}while(t[s].equals2D(i)&&s!==r);var u=r;do{u=(u+1)%e;}while(t[u].equals2D(i)&&u!==r);var l=t[s],c=t[u];if(l.equals2D(i)||c.equals2D(i)||l.equals2D(c))return!1;var h=ae.computeOrientation(l,i,c);return 0===h?l.x>c.x:h>0;},ae.locatePointInRing=function(t,e){return oe.locatePointInRing(t,e);},ae.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i);},ae.computeOrientation=function(t,e,n){return ae.orientationIndex(t,e,n);},ae.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new n("Line array must contain at least one vertex");for(var i=t.distance(e[0]),r=0;r<e.length-1;r++){var o=ae.distancePointLine(t,e[r],e[r+1]);o<i&&(i=o);}return i;}if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];if(s.x===u.x&&s.y===u.y)return a.distance(s);var l=(u.x-s.x)*(u.x-s.x)+(u.y-s.y)*(u.y-s.y),c=((a.x-s.x)*(u.x-s.x)+(a.y-s.y)*(u.y-s.y))/l;if(c<=0)return a.distance(s);if(c>=1)return a.distance(u);var h=((s.y-a.y)*(u.x-s.x)-(s.x-a.x)*(u.y-s.y))/l;return Math.abs(h)*Math.sqrt(l);}},ae.isOnLine=function(t,e){for(var n=new ie(),i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0;}return!1;},ae.CLOCKWISE=-1,ae.RIGHT=ae.CLOCKWISE,ae.COUNTERCLOCKWISE=1,ae.LEFT=ae.COUNTERCLOCKWISE,ae.COLLINEAR=0,ae.STRAIGHT=ae.COLLINEAR,Tr(se.prototype,{minX:function minX(){return Math.min(this.p0.x,this.p1.x);},orientationIndex:function orientationIndex(){if(arguments[0]instanceof se){var t=arguments[0],e=ae.orientationIndex(this.p0,this.p1,t.p0),n=ae.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0;}if(arguments[0]instanceof h){var i=arguments[0];return ae.orientationIndex(this.p0,this.p1,i);}},toGeometry:function toGeometry(t){return t.createLineString([this.p0,this.p1]);},isVertical:function isVertical(){return this.p0.x===this.p1.x;},equals:function equals(t){if(!(t instanceof se))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1);},intersection:function intersection(t){var e=new ie();return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null;},project:function project(){if(arguments[0]instanceof h){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new h(t);var e=this.projectionFactor(t),n=new h();return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n;}if(arguments[0]instanceof se){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new se(a,s);}},normalize:function normalize(){this.p1.compareTo(this.p0)<0&&this.reverse();},angle:function angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x);},getCoordinate:function getCoordinate(t){return 0===t?this.p0:this.p1;},distancePerpendicular:function distancePerpendicular(t){return ae.distancePointLinePerpendicular(t,this.p0,this.p1);},minY:function minY(){return Math.min(this.p0.y,this.p1.y);},midPoint:function midPoint(){return se.midPoint(this.p0,this.p1);},projectionFactor:function projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?i.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;},closestPoints:function closestPoints(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=i.MAX_VALUE,o=null,a=this.closestPoint(t.p0);r=a.distance(t.p0),n[0]=a,n[1]=t.p0;var s=this.closestPoint(t.p1);(o=s.distance(t.p1))<r&&(r=o,n[0]=s,n[1]=t.p1);var u=t.closestPoint(this.p0);(o=u.distance(this.p0))<r&&(r=o,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return o=l.distance(this.p1),o<r&&(r=o,n[0]=this.p1,n[1]=l),n;},closestPoint:function closestPoint(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1;},maxX:function maxX(){return Math.max(this.p0.x,this.p1.x);},getLength:function getLength(){return this.p0.distance(this.p1);},compareTo:function compareTo(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1);},reverse:function reverse(){var t=this.p0;this.p0=this.p1,this.p1=t;},equalsTopo:function equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0);},lineIntersection:function lineIntersection(t){try{return N.intersection(this.p0,this.p1,t.p0,t.p1);}catch(t){if(!(t instanceof E))throw t;}finally{}return null;},maxY:function maxY(){return Math.max(this.p0.y,this.p1.y);},pointAlongOffset:function pointAlongOffset(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=e*r/a,u=e*o/a;}return new h(n-u,i+s);},setCoordinates:function setCoordinates(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y;}},segmentFraction:function segmentFraction(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||i.isNaN(e))&&(e=1),e;},toString:function toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")";},isHorizontal:function isHorizontal(){return this.p0.y===this.p1.y;},distance:function distance(){if(arguments[0]instanceof se){var t=arguments[0];return ae.distanceLineLine(this.p0,this.p1,t.p0,t.p1);}if(arguments[0]instanceof h){var e=arguments[0];return ae.distancePointLine(e,this.p0,this.p1);}},pointAlong:function pointAlong(t){var e=new h();return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e;},hashCode:function hashCode(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32);},interfaces_:function interfaces_(){return[r,s];},getClass:function getClass(){return se;}}),se.midPoint=function(t,e){return new h((t.x+e.x)/2,(t.y+e.y)/2);},se.serialVersionUID=0x2d2172135f411c00;var Vr=Object.freeze({Coordinate:h,CoordinateList:b,Envelope:x,LineSegment:se,GeometryFactory:$t,Geometry:D,Point:Et,LineString:xt,LinearRing:It,Polygon:Mt,GeometryCollection:lt,MultiPoint:Ct,MultiLineString:ct,MultiPolygon:Ot});Tr(ue.prototype,{hasChildren:function hasChildren(){for(var t=0;t<4;t++){if(null!==this.subnode[t])return!0;}return!1;},isPrunable:function isPrunable(){return!(this.hasChildren()||this.hasItems());},addAllItems:function addAllItems(t){t.addAll(this.items);for(var e=0;e<4;e++){null!==this.subnode[e]&&this.subnode[e].addAllItems(t);}return t;},getNodeCount:function getNodeCount(){for(var t=0,e=0;e<4;e++){null!==this.subnode[e]&&(t+=this.subnode[e].size());}return t+1;},size:function size(){for(var t=0,e=0;e<4;e++){null!==this.subnode[e]&&(t+=this.subnode[e].size());}return t+this.items.size();},addAllItemsFromOverlapping:function addAllItemsFromOverlapping(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++){null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e);}},visitItems:function visitItems(t,e){for(var n=this.items.iterator();n.hasNext();){e.visitItem(n.next());}},hasItems:function hasItems(){return!this.items.isEmpty();},remove:function remove(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++){if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break;}}return n||(n=this.items.remove(e));},visit:function visit(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++){null!==this.subnode[n]&&this.subnode[n].visit(t,e);}},getItems:function getItems(){return this.items;},depth:function depth(){for(var t=0,e=0;e<4;e++){if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n);}}return t+1;},isEmpty:function isEmpty(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++){null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));}return t;},add:function add(t){this.items.add(t);},interfaces_:function interfaces_(){return[s];},getClass:function getClass(){return ue;}}),ue.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i;},le.exponent=function(t){return ce(64,t)-1023;},le.powerOf2=function(t){return Math.pow(2,t);},Tr(he.prototype,{getLevel:function getLevel(){return this.level;},computeKey:function computeKey(){if(1===arguments.length){var t=arguments[0];for(this.level=he.computeQuadLevel(t),this.env=new x(),this.computeKey(this.level,t);!this.env.contains(t);){this.level+=1,this.computeKey(this.level,t);}}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=le.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i);}},getEnvelope:function getEnvelope(){return this.env;},getCentre:function getCentre(){return new h((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2);},getPoint:function getPoint(){return this.pt;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return he;}}),he.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return le.exponent(i)+1;},Pr(fe,ue),Tr(fe.prototype,{find:function find(t){var e=ue.getSubnodeIndex(t,this.centrex,this.centrey);return e===-1?this:null!==this.subnode[e]?this.subnode[e].find(t):this;},isSearchMatch:function isSearchMatch(t){return this.env.intersects(t);},getSubnode:function getSubnode(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t];},getEnvelope:function getEnvelope(){return this.env;},getNode:function getNode(t){var e=ue.getSubnodeIndex(t,this.centrex,this.centrey);return e!==-1?this.getSubnode(e).getNode(t):this;},createSubnode:function createSubnode(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY();}return new fe(new x(e,n,i,r),this.level-1);},insertNode:function insertNode(t){c.isTrue(null===this.env||this.env.contains(t.env));var e=ue.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n;}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return fe;}}),fe.createNode=function(t){var e=new he(t);return new fe(e.getEnvelope(),e.getLevel());},fe.createExpanded=function(t,e){var n=new x(e);null!==t&&n.expandToInclude(t.env);var i=fe.createNode(n);return null!==t&&i.insertNode(t),i;},Tr(de.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return de;}}),de.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i;return le.exponent(r)<=de.MIN_BINARY_EXPONENT;},de.MIN_BINARY_EXPONENT=-50,Pr(pe,ue),Tr(pe.prototype,{insert:function insert(t,e){var n=ue.getSubnodeIndex(t,pe.origin.x,pe.origin.y);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=fe.createExpanded(i,t);this.subnode[n]=r;}this.insertContained(this.subnode[n],t,e);},isSearchMatch:function isSearchMatch(t){return!0;},insertContained:function insertContained(t,e,n){c.isTrue(t.getEnvelope().contains(e));var i=de.isZeroWidth(e.getMinX(),e.getMaxX()),r=de.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=i||r?t.find(e):t.getNode(e),o.add(n);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return pe;}}),pe.origin=new h(0,0),Tr(ge.prototype,{insert:function insert(t,e){},remove:function remove(t,e){},query:function query(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1]);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ge;}}),Tr(ve.prototype,{visitItem:function visitItem(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ve;}}),Tr(me.prototype,{visitItem:function visitItem(t){this.items.add(t);},getItems:function getItems(){return this.items;},interfaces_:function interfaces_(){return[ve];},getClass:function getClass(){return me;}}),Tr(ye.prototype,{size:function size(){return null!==this.root?this.root.size():0;},insert:function insert(t,e){this.collectStats(t);var n=ye.ensureExtent(t,this.minExtent);this.root.insert(n,e);},query:function query(){if(1===arguments.length){var t=arguments[0],e=new me();return this.query(t,e),e.getItems();}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i);}},queryAll:function queryAll(){var t=new _();return this.root.addAllItems(t),t;},remove:function remove(t,e){var n=ye.ensureExtent(t,this.minExtent);return this.root.remove(n,e);},collectStats:function collectStats(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n);},depth:function depth(){return null!==this.root?this.root.depth():0;},isEmpty:function isEmpty(){return null===this.root;},interfaces_:function interfaces_(){return[ge,s];},getClass:function getClass(){return ye;}}),ye.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(n-=e/2,i=n+e/2),r===o&&(r-=e/2,o=r+e/2),new x(n,i,r,o));},ye.serialVersionUID=-0x678b60c967a25400;var Xr=Object.freeze({Quadtree:ye}),Hr=Object.freeze({quadtree:Xr}),qr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];Tr(_e.prototype,{read:function read(t){var e=void 0;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!Yr[n])throw new Error("Unknown GeoJSON type: "+e.type);return qr.indexOf(n)!==-1?Yr[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Yr[n].apply(this,[e.geometries]):Yr[n].apply(this,[e]);},write:function write(t){var e=t.getGeometryType();if(!Wr[e])throw new Error("Geometry is not supported");return Wr[e].apply(this,[t]);}});var Yr={Feature:function Feature(t){var e={};for(var n in t){e[n]=t[n];}if(t.geometry){var i=t.geometry.type;if(!Yr[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry);}return t.bbox&&(e.bbox=Yr.bbox.apply(this,[t.bbox])),e;},FeatureCollection:function FeatureCollection(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n){e.features.push(this.read(t.features[n]));}}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e;},coordinates:function coordinates(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new h(i[0],i[1]));}return e;},bbox:function bbox(t){return this.geometryFactory.createLinearRing([new h(t[0],t[1]),new h(t[2],t[1]),new h(t[2],t[3]),new h(t[0],t[3]),new h(t[0],t[1])]);},Point:function Point(t){var e=new h(t[0],t[1]);return this.geometryFactory.createPoint(e);},MultiPoint:function MultiPoint(t){for(var e=[],n=0;n<t.length;++n){e.push(Yr.Point.apply(this,[t[n]]));}return this.geometryFactory.createMultiPoint(e);},LineString:function LineString(t){var e=Yr.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e);},MultiLineString:function MultiLineString(t){for(var e=[],n=0;n<t.length;++n){e.push(Yr.LineString.apply(this,[t[n]]));}return this.geometryFactory.createMultiLineString(e);},Polygon:function Polygon(t){for(var e=Yr.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],a=Yr.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);i.push(s);}return this.geometryFactory.createPolygon(n,i);},MultiPolygon:function MultiPolygon(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Yr.Polygon.apply(this,[i]));}return this.geometryFactory.createMultiPolygon(e);},GeometryCollection:function GeometryCollection(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i));}return this.geometryFactory.createGeometryCollection(e);}},Wr={coordinate:function coordinate(t){return[t.x,t.y];},Point:function Point(t){return{type:"Point",coordinates:Wr.coordinate.apply(this,[t.getCoordinate()])};},MultiPoint:function MultiPoint(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Wr.Point.apply(this,[i]);e.push(r.coordinates);}return{type:"MultiPoint",coordinates:e};},LineString:function LineString(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Wr.coordinate.apply(this,[r]));}return{type:"LineString",coordinates:e};},MultiLineString:function MultiLineString(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Wr.LineString.apply(this,[i]);e.push(r.coordinates);}return{type:"MultiLineString",coordinates:e};},Polygon:function Polygon(t){var e=[],n=Wr.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=Wr.LineString.apply(this,[r]);e.push(o.coordinates);}return{type:"Polygon",coordinates:e};},MultiPolygon:function MultiPolygon(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=Wr.Polygon.apply(this,[i]);e.push(r.coordinates);}return{type:"MultiPolygon",coordinates:e};},GeometryCollection:function GeometryCollection(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(Wr[r].apply(this,[i]));}return{type:"GeometryCollection",geometries:e};}};Tr(be.prototype,{read:function read(t){var e=this.parser.read(t);return this.precisionModel.getType()===Kt.FIXED&&this.reducePrecision(e),e;},reducePrecision:function reducePrecision(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++){this.precisionModel.makePrecise(t.points[e]);}else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++){this.reducePrecision(t.geometries[e]);}}}),Tr(xe.prototype,{write:function write(t){return this.parser.write(t);}});var Zr=Object.freeze({GeoJSONReader:be,GeoJSONWriter:xe});Tr(we.prototype,{next:function next(){if(this.atStart)return this.atStart=!1,we.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null;}if(this.index>=this.max)throw new m();var t=this.parent.getGeometryN(this.index++);return t instanceof lt?(this.subcollectionIterator=new we(t),this.subcollectionIterator.next()):t;},remove:function remove(){throw new UnsupportedOperationException(this.getClass().getName());},hasNext:function hasNext(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null;}return!(this.index>=this.max);},interfaces_:function interfaces_(){return[d];},getClass:function getClass(){return we;}}),we.isAtomic=function(t){return!(t instanceof lt);},Tr(Ee.prototype,{locateInternal:function locateInternal(){if(arguments[0]instanceof h&&arguments[1]instanceof Mt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===S.EXTERIOR)return S.EXTERIOR;if(i===S.BOUNDARY)return S.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===S.INTERIOR)return S.EXTERIOR;if(a===S.BOUNDARY)return S.BOUNDARY;}return S.INTERIOR;}if(arguments[0]instanceof h&&arguments[1]instanceof xt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return S.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?ae.isOnLine(s,l)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY;}if(arguments[0]instanceof h&&arguments[1]instanceof Et){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?S.INTERIOR:S.EXTERIOR;}},locateInPolygonRing:function locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?ae.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR;},intersects:function intersects(t,e){return this.locate(t,e)!==S.EXTERIOR;},updateLocationInfo:function updateLocationInfo(t){t===S.INTERIOR&&(this.isIn=!0),t===S.BOUNDARY&&this.numBoundaries++;},computeLocation:function computeLocation(t,e){if(e instanceof Et&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof xt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Mt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ct)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r));}else if(e instanceof Ot)for(var o=e,i=0;i<o.getNumGeometries();i++){var a=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,a));}else if(e instanceof lt)for(var s=new we(e);s.hasNext();){var u=s.next();u!==e&&this.computeLocation(t,u);}},locate:function locate(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof xt?this.locateInternal(t,e):e instanceof Mt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:this.numBoundaries>0||this.isIn?S.INTERIOR:S.EXTERIOR);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ee;}}),Tr(Se.prototype,{filter:function filter(t){t instanceof Mt&&this.comps.add(t);},interfaces_:function interfaces_(){return[st];},getClass:function getClass(){return Se;}}),Se.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Se.getPolygons(t,new _());}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Mt?n.add(e):e instanceof lt&&e.apply(new Se(n)),n;}},Tr(Me.prototype,{isInsideArea:function isInsideArea(){return this.segIndex===Me.INSIDE_AREA;},getCoordinate:function getCoordinate(){return this.pt;},getGeometryComponent:function getGeometryComponent(){return this.component;},getSegmentIndex:function getSegmentIndex(){return this.segIndex;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Me;}}),Me.INSIDE_AREA=-1;var Jr={reverseOrder:function reverseOrder(){return{compare:function compare(t,e){return e.compareTo(t);}};},min:function min(t){return Jr.sort(t),t.get(0);},sort:function sort(t,e){var n=t.toArray();e?ot.sort(n,e):ot.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++){i.next(),i.set(n[r]);}},singletonList:function singletonList(t){var e=new _();return e.add(t),e;}};Tr(Ce.prototype,{filter:function filter(t){t instanceof Et&&this.pts.add(t);},interfaces_:function interfaces_(){return[st];},getClass:function getClass(){return Ce;}}),Ce.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Et?Jr.singletonList(t):Ce.getPoints(t,new _());}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Et?n.add(e):e instanceof lt&&e.apply(new Ce(n)),n;}},Tr(Ie.prototype,{filter:function filter(t){(t instanceof Et||t instanceof xt||t instanceof Mt)&&this.locations.add(new Me(t,0,t.getCoordinate()));},interfaces_:function interfaces_(){return[st];},getClass:function getClass(){return Ie;}}),Ie.getLocations=function(t){var e=new _();return t.apply(new Ie(e)),e;},Tr(Oe.prototype,{filter:function filter(t){if(this.isForcedToLineString&&t instanceof It){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null;}t instanceof xt&&this.lines.add(t);},setForceToLineString:function setForceToLineString(t){this.isForcedToLineString=t;},interfaces_:function interfaces_(){return[R];},getClass:function getClass(){return Oe;}}),Oe.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Oe.getLines(t));}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Oe.getLines(e,n));}},Oe.getLines=function(){if(1===arguments.length){var t=arguments[0];return Oe.getLines(t,!1);}if(2===arguments.length){if(Lr(arguments[0],p)&&Lr(arguments[1],p)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Oe.getLines(r,n);}return n;}if(arguments[0]instanceof D&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new _();return o.apply(new Oe(s,a)),s;}if(arguments[0]instanceof D&&Lr(arguments[1],p)){var u=arguments[0],l=arguments[1];return u instanceof xt?l.add(u):u.apply(new Oe(l)),l;}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Lr(arguments[0],p)&&Lr(arguments[1],p)){for(var c=arguments[0],h=arguments[1],f=arguments[2],i=c.iterator();i.hasNext();){var r=i.next();Oe.getLines(r,h,f);}return h;}if("boolean"==typeof arguments[2]&&arguments[0]instanceof D&&Lr(arguments[1],p)){var d=arguments[0],g=arguments[1],v=arguments[2];return d.apply(new Oe(g,v)),g;}}},Tr(Te.prototype,{computeContainmentDistance:function computeContainmentDistance(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Se.getPolygons(this.geom[e]);if(r.size()>0){var o=Ie.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null;}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Lr(arguments[0],v)&&Lr(arguments[1],v)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++){for(var c=a.get(l),h=0;h<s.size();h++){if(this.computeContainmentDistance(c,s.get(h),u),this.minDistance<=this.terminateDistance)return null;}}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Me&&arguments[1]instanceof Mt){var f=arguments[0],d=arguments[1],p=arguments[2],g=f.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(g,d))return this.minDistance=0,p[0]=f,p[1]=new Me(d,g),null;}},computeMinDistanceLinesPoints:function computeMinDistanceLinesPoints(t,e,n){for(var i=0;i<t.size();i++){for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this.minDistance<=this.terminateDistance)return null;}}},computeFacetDistance:function computeFacetDistance(){var t=new Array(2).fill(null),e=Oe.getLines(this.geom[0]),n=Oe.getLines(this.geom[1]),i=Ce.getPoints(this.geom[0]),r=Ce.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))));},nearestLocations:function nearestLocations(){return this.computeMinDistance(),this.minDistanceLocation;},updateMinDistance:function updateMinDistance(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]));},nearestPoints:function nearestPoints(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];},computeMinDistance:function computeMinDistance(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance();}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof Et){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=ae.distancePointLine(r,i[o],i[o+1]);if(a<this.minDistance){this.minDistance=a;var s=new se(i[o],i[o+1]),u=s.closestPoint(r);n[0]=new Me(t,o,u),n[1]=new Me(e,0,r);}if(this.minDistance<=this.terminateDistance)return null;}}else if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof xt){var l=arguments[0],c=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this.minDistance)return null;for(var i=l.getCoordinates(),f=c.getCoordinates(),o=0;o<i.length-1;o++){for(var d=0;d<f.length-1;d++){var a=ae.distanceLineLine(i[o],i[o+1],f[d],f[d+1]);if(a<this.minDistance){this.minDistance=a;var p=new se(i[o],i[o+1]),g=new se(f[d],f[d+1]),v=p.closestPoints(g);h[0]=new Me(l,o,v[0]),h[1]=new Me(c,d,v[1]);}if(this.minDistance<=this.terminateDistance)return null;}}}},computeMinDistancePoints:function computeMinDistancePoints(t,e,n){for(var i=0;i<t.size();i++){for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this.minDistance&&(this.minDistance=s,n[0]=new Me(r,0,r.getCoordinate()),n[1]=new Me(a,0,a.getCoordinate())),this.minDistance<=this.terminateDistance)return null;}}},distance:function distance(){if(null===this.geom[0]||null===this.geom[1])throw new n("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance);},computeMinDistanceLines:function computeMinDistanceLines(t,e,n){for(var i=0;i<t.size();i++){for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this.minDistance<=this.terminateDistance)return null;}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Te;}}),Te.distance=function(t,e){return new Te(t,e).distance();},Te.isWithinDistance=function(t,e,n){return new Te(t,e,n).distance()<=n;},Te.nearestPoints=function(t,e){return new Te(t,e).nearestPoints();};var Kr=Object.freeze({DistanceOp:Te}),Qr=Object.freeze({distance:Kr});Tr(Pe.prototype,{map:function map(t){for(var e=new _(),n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i);}return t.getFactory().createGeometryCollection($t.toGeometryArray(e));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Pe;}}),Pe.map=function(t,e){return new Pe(e).map(t);},Tr(Ae.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ae;}}),Ae.opposite=function(t){return t===Ae.LEFT?Ae.RIGHT:t===Ae.RIGHT?Ae.LEFT:t;},Ae.ON=0,Ae.LEFT=1,Ae.RIGHT=2,Pr(Le,u),Tr(Le.prototype,{getCoordinate:function getCoordinate(){return this.pt;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Le;}}),Le.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t;},Tr(Ne.prototype,{setAllLocations:function setAllLocations(t){for(var e=0;e<this.location.length;e++){this.location[e]=t;}},isNull:function isNull(){for(var t=0;t<this.location.length;t++){if(this.location[t]!==S.NONE)return!1;}return!0;},setAllLocationsIfNull:function setAllLocationsIfNull(t){for(var e=0;e<this.location.length;e++){this.location[e]===S.NONE&&(this.location[e]=t);}},isLine:function isLine(){return 1===this.location.length;},merge:function merge(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ae.ON]=this.location[Ae.ON],e[Ae.LEFT]=S.NONE,e[Ae.RIGHT]=S.NONE,this.location=e;}for(var n=0;n<this.location.length;n++){this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n]);}},getLocations:function getLocations(){return this.location;},flip:function flip(){if(this.location.length<=1)return null;var t=this.location[Ae.LEFT];this.location[Ae.LEFT]=this.location[Ae.RIGHT],this.location[Ae.RIGHT]=t;},toString:function toString(){var t=new C();return this.location.length>1&&t.append(S.toLocationSymbol(this.location[Ae.LEFT])),t.append(S.toLocationSymbol(this.location[Ae.ON])),this.location.length>1&&t.append(S.toLocationSymbol(this.location[Ae.RIGHT])),t.toString();},setLocations:function setLocations(t,e,n){this.location[Ae.ON]=t,this.location[Ae.LEFT]=e,this.location[Ae.RIGHT]=n;},get:function get(t){return t<this.location.length?this.location[t]:S.NONE;},isArea:function isArea(){return this.location.length>1;},isAnyNull:function isAnyNull(){for(var t=0;t<this.location.length;t++){if(this.location[t]===S.NONE)return!0;}return!1;},setLocation:function setLocation(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ae.ON,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n;}},init:function init(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE);},isEqualOnSide:function isEqualOnSide(t,e){return this.location[e]===t.location[e];},allPositionsEqual:function allPositionsEqual(t){for(var e=0;e<this.location.length;e++){if(this.location[e]!==t)return!1;}return!0;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ne;}}),Tr(ke.prototype,{getGeometryCount:function getGeometryCount(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t;},setAllLocations:function setAllLocations(t,e){this.elt[t].setAllLocations(e);},isNull:function isNull(t){return this.elt[t].isNull();},setAllLocationsIfNull:function setAllLocationsIfNull(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t);}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n);}},isLine:function isLine(t){return this.elt[t].isLine();},merge:function merge(t){for(var e=0;e<2;e++){null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ne(t.elt[e]):this.elt[e].merge(t.elt[e]);}},flip:function flip(){this.elt[0].flip(),this.elt[1].flip();},getLocation:function getLocation(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ae.ON);}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n);}},toString:function toString(){var t=new C();return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString();},isArea:function isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea();}},isAnyNull:function isAnyNull(t){return this.elt[t].isAnyNull();},setLocation:function setLocation(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ae.ON,e);}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r);}},isEqualOnSide:function isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e);},allPositionsEqual:function allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e);},toLine:function toLine(t){this.elt[t].isArea()&&(this.elt[t]=new Ne(this.elt[t].location[0]));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ke;}}),ke.toLineLabel=function(t){for(var e=new ke(S.NONE),n=0;n<2;n++){e.setLocation(n,t.getLocation(n));}return e;},Tr(Re.prototype,{computeRing:function computeRing(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++){t[e]=this.pts.get(e);}this.ring=this.geometryFactory.createLinearRing(t),this._isHole=ae.isCCW(this.ring.getCoordinates());},isIsolated:function isIsolated(){return 1===this.label.getGeometryCount();},computePoints:function computePoints(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new Le("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Le("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();c.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e);}while(e!==this.startDe);},getLinearRing:function getLinearRing(){return this.ring;},getCoordinate:function getCoordinate(t){return this.pts.get(t);},computeMaxNodeDegree:function computeMaxNodeDegree(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t);}while(t!==this.startDe);this.maxNodeDegree*=2;},addPoints:function addPoints(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++){this.pts.add(i[o]);}}else{var r=i.length-2;n&&(r=i.length-1);for(var o=r;o>=0;o--){this.pts.add(i[o]);}}},isHole:function isHole(){return this._isHole;},setInResult:function setInResult(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext();}while(t!==this.startDe);},containsPoint:function containsPoint(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ae.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1;}return!0;},addHole:function addHole(t){this.holes.add(t);},isShell:function isShell(){return null===this.shell;},getLabel:function getLabel(){return this.label;},getEdges:function getEdges(){return this.edges;},getMaxNodeDegree:function getMaxNodeDegree(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree;},getShell:function getShell(){return this.shell;},mergeLabel:function mergeLabel(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1);}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Ae.RIGHT);if(i===S.NONE)return null;if(this.label.getLocation(n)===S.NONE)return this.label.setLocation(n,i),null;}},setShell:function setShell(t){this.shell=t,null!==t&&t.addHole(this);},toPolygon:function toPolygon(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++){e[n]=this.holes.get(n).getLinearRing();}return t.createPolygon(this.getLinearRing(),e);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Re;}}),Pr(De,Re),Tr(De.prototype,{setEdgeRing:function setEdgeRing(t,e){t.setMinEdgeRing(e);},getNext:function getNext(t){return t.getNextMin();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return De;}}),Pr(Fe,Re),Tr(Fe.prototype,{buildMinimalRings:function buildMinimalRings(){var t=new _(),e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new De(e,this.geometryFactory);t.add(n);}e=e.getNext();}while(e!==this.startDe);return t;},setEdgeRing:function setEdgeRing(t,e){t.setEdgeRing(e);},linkDirectedEdgesForMinimalEdgeRings:function linkDirectedEdgesForMinimalEdgeRings(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();}while(t!==this.startDe);},getNext:function getNext(t){return t.getNext();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Fe;}}),Tr(Be.prototype,{locate:function locate(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Be;}}),Tr(je.prototype,{locate:function locate(t){return je.locate(t,this.geom);},interfaces_:function interfaces_(){return[Be];},getClass:function getClass(){return je;}}),je.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ae.isPointInRing(t,e.getCoordinates());},je.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!je.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(je.isPointInRing(t,r))return!1;}return!0;},je.containsPoint=function(t,e){if(e instanceof Mt)return je.containsPointInPolygon(t,e);if(e instanceof lt)for(var n=new we(e);n.hasNext();){var i=n.next();if(i!==e&&je.containsPoint(t,i))return!0;}return!1;},je.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:je.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR;},Tr(Ue.prototype,{getNextCW:function getNextCW(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n);},propagateSideLabels:function propagateSideLabels(t){for(var e=S.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,Ae.LEFT)!==S.NONE&&(e=r.getLocation(t,Ae.LEFT));}if(e===S.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,Ae.ON)===S.NONE&&r.setLocation(t,Ae.ON,o),r.isArea(t)){var a=r.getLocation(t,Ae.LEFT),s=r.getLocation(t,Ae.RIGHT);if(s!==S.NONE){if(s!==o)throw new Le("side location conflict",i.getCoordinate());a===S.NONE&&c.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),o=a;}else c.isTrue(r.getLocation(t,Ae.LEFT)===S.NONE,"found single null side"),r.setLocation(t,Ae.RIGHT,o),r.setLocation(t,Ae.LEFT,o);}}},getCoordinate:function getCoordinate(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null;},print:function print(t){L.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t);}},isAreaLabelsConsistent:function isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0);},checkAreaLabelsConsistent:function checkAreaLabelsConsistent(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,Ae.LEFT);c.isTrue(r!==S.NONE,"Found unlabelled area edge");for(var o=r,a=this.iterator();a.hasNext();){var s=a.next(),u=s.getLabel();c.isTrue(u.isArea(t),"Found non-area edge");var l=u.getLocation(t,Ae.LEFT),h=u.getLocation(t,Ae.RIGHT);if(l===h)return!1;if(h!==o)return!1;o=l;}return!0;},findIndex:function findIndex(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e;}return-1;},iterator:function iterator(){return this.getEdges().iterator();},getEdges:function getEdges(){return null===this.edgeList&&(this.edgeList=new _(this.edgeMap.values())),this.edgeList;},getLocation:function getLocation(t,e,n){return this.ptInAreaLocation[t]===S.NONE&&(this.ptInAreaLocation[t]=je.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t];},toString:function toString(){var t=new C();t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\\n");}return t.toString();},computeEdgeEndLabels:function computeEdgeEndLabels(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t);}},computeLabelling:function computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();){for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++){r.isLine(o)&&r.getLocation(o)===S.BOUNDARY&&(e[o]=!0);}}for(var n=this.iterator();n.hasNext();){for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++){if(r.isAnyNull(o)){var a=S.NONE;if(e[o])a=S.EXTERIOR;else{var s=i.getCoordinate();a=this.getLocation(o,s,t);}r.setAllLocationsIfNull(o,a);}}}},getDegree:function getDegree(){return this.edgeMap.size();},insertEdgeEnd:function insertEdgeEnd(t,e){this.edgeMap.put(t,e),this.edgeList=null;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ue;}}),Tr(ze.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ze;}}),ze.isNorthern=function(t){return t===ze.NE||t===ze.NW;},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4;},ze.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e,i=t>e?t:e;return 0===n&&3===i?3:n;},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1;},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW;}if(arguments[0]instanceof h&&arguments[1]instanceof h){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new n("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?ze.NE:ze.SE:r.y>=i.y?ze.NW:ze.SW;}},ze.NE=0,ze.NW=1,ze.SW=2,ze.SE=3,Pr(Ge,Ue),Tr(Ge.prototype,{linkResultDirectedEdges:function linkResultDirectedEdges(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING;}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new Le("no outgoing dirEdge found",this.getCoordinate());c.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t);}},insert:function insert(t){var e=t;this.insertEdgeEnd(e,e);},getRightmostEdge:function getRightmostEdge(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return ze.isNorthern(r)&&ze.isNorthern(o)?n:ze.isNorthern(r)||ze.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):i;},print:function print(t){L.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println();}},getResultAreaEdges:function getResultAreaEdges(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new _();for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e);}return this.resultAreaEdgeList;},updateLabelling:function updateLabelling(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1));}},linkAllDirectedEdges:function linkAllDirectedEdges(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i;}e.setNext(t);},computeDepths:function computeDepths(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(Ae.LEFT)),i=t.getDepth(Ae.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Le("depth mismatch at "+t.getCoordinate());}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=s,l=o;l<a;l++){var c=this.edgeList.get(l);c.getLabel(),c.setEdgeDepths(Ae.RIGHT,u),u=c.getDepth(Ae.LEFT);}return u;}},mergeSymLabels:function mergeSymLabels(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel());}},linkMinimalDirectedEdges:function linkMinimalDirectedEdges(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING;}}i===this.LINKING_TO_OUTGOING&&(c.isTrue(null!==e,"found null for first outgoing dirEdge"),c.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e));},getOutgoingDegree:function getOutgoingDegree(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++;}return t;}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++;}return t;}},getLabel:function getLabel(){return this.label;},findCoveredLineEdges:function findCoveredLineEdges(){for(var t=S.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=S.INTERIOR;break;}if(i.isInResult()){t=S.EXTERIOR;break;}}}if(t===S.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===S.INTERIOR):(n.isInResult()&&(r=S.EXTERIOR),i.isInResult()&&(r=S.INTERIOR));}},computeLabelling:function computeLabelling(t){Ue.prototype.computeLabelling.call(this,t),this.label=new ke(S.NONE);for(var e=this.iterator();e.hasNext();){for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),o=0;o<2;o++){var a=r.getLocation(o);a!==S.INTERIOR&&a!==S.BOUNDARY||this.label.setLocation(o,S.INTERIOR);}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ge;}}),Tr(Ve.prototype,{setVisited:function setVisited(t){this._isVisited=t;},setInResult:function setInResult(t){this._isInResult=t;},isCovered:function isCovered(){return this._isCovered;},isCoveredSet:function isCoveredSet(){return this._isCoveredSet;},setLabel:function setLabel(t){this.label=t;},getLabel:function getLabel(){return this.label;},setCovered:function setCovered(t){this._isCovered=t,this._isCoveredSet=!0;},updateIM:function updateIM(t){c.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t);},isInResult:function isInResult(){return this._isInResult;},isVisited:function isVisited(){return this._isVisited;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ve;}}),Pr(Xe,Ve),Tr(Xe.prototype,{isIncidentEdgeInResult:function isIncidentEdgeInResult(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0;}return!1;},isIsolated:function isIsolated(){return 1===this.label.getGeometryCount();},getCoordinate:function getCoordinate(){return this.coord;},print:function print(t){t.println("node "+this.coord+" lbl: "+this.label);},computeIM:function computeIM(t){},computeMergedLocation:function computeMergedLocation(t,e){var n=S.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==S.BOUNDARY&&(n=i);}return n;},setLabel:function setLabel(){if(2!==arguments.length)return Ve.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new ke(t,e):this.label.setLocation(t,e);},getEdges:function getEdges(){return this.edges;},mergeLabel:function mergeLabel(){if(arguments[0]instanceof Xe){var t=arguments[0];this.mergeLabel(t.label);}else if(arguments[0]instanceof ke)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===S.NONE&&this.label.setLocation(n,i);}},add:function add(t){this.edges.insert(t),t.setNode(this);},setLabelBoundary:function setLabelBoundary(t){if(null===this.label)return null;var e=S.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case S.BOUNDARY:n=S.INTERIOR;break;case S.INTERIOR:default:n=S.BOUNDARY;}this.label.setLocation(t,n);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Xe;}}),Tr(He.prototype,{createNode:function createNode(t){return new Xe(t,null);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return He;}}),Pr(qe,He),Tr(qe.prototype,{createNode:function createNode(t){return new Xe(t,new Ge());},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return qe;}}),Tr(Ye.prototype,{find:function find(t){return this.nodeMap.get(t);},addNode:function addNode(){if(arguments[0]instanceof h){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e;}if(arguments[0]instanceof Xe){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e);}},print:function print(t){for(var e=this.iterator();e.hasNext();){e.next().print(t);}},iterator:function iterator(){return this.nodeMap.values().iterator();},values:function values(){return this.nodeMap.values();},getBoundaryNodes:function getBoundaryNodes(t){for(var e=new _(),n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===S.BOUNDARY&&e.add(i);}return e;},add:function add(t){var e=t.getCoordinate();this.addNode(e).add(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ye;}}),Tr(We.prototype,{compareDirection:function compareDirection(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:ae.computeOrientation(t.p0,t.p1,this.p1);},getDy:function getDy(){return this.dy;},getCoordinate:function getCoordinate(){return this.p0;},setNode:function setNode(t){this.node=t;},print:function print(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label);},compareTo:function compareTo(t){var e=t;return this.compareDirection(e);},getDirectedCoordinate:function getDirectedCoordinate(){return this.p1;},getDx:function getDx(){return this.dx;},getLabel:function getLabel(){return this.label;},getEdge:function getEdge(){return this.edge;},getQuadrant:function getQuadrant(){return this.quadrant;},getNode:function getNode(){return this.node;},toString:function toString(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label;},computeLabel:function computeLabel(t){},init:function init(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=ze.quadrant(this.dx,this.dy),c.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found");},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return We;}}),Pr(Ze,We),Tr(Ze.prototype,{getNextMin:function getNextMin(){return this.nextMin;},getDepth:function getDepth(t){return this.depth[t];},setVisited:function setVisited(t){this._isVisited=t;},computeDirectedLabel:function computeDirectedLabel(){this.label=new ke(this.edge.getLabel()),this._isForward||this.label.flip();},getNext:function getNext(){return this.next;},setDepth:function setDepth(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new Le("assigned depths do not match",this.getCoordinate());this.depth[t]=e;},isInteriorAreaEdge:function isInteriorAreaEdge(){for(var t=!0,e=0;e<2;e++){this.label.isArea(e)&&this.label.getLocation(e,Ae.LEFT)===S.INTERIOR&&this.label.getLocation(e,Ae.RIGHT)===S.INTERIOR||(t=!1);}return t;},setNextMin:function setNextMin(t){this.nextMin=t;},print:function print(t){We.prototype.print.call(this,t),t.print(" "+this.depth[Ae.LEFT]+"/"+this.depth[Ae.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult");},setMinEdgeRing:function setMinEdgeRing(t){this.minEdgeRing=t;},isLineEdge:function isLineEdge(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&n;},setEdgeRing:function setEdgeRing(t){this.edgeRing=t;},getMinEdgeRing:function getMinEdgeRing(){return this.minEdgeRing;},getDepthDelta:function getDepthDelta(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t;},setInResult:function setInResult(t){this._isInResult=t;},getSym:function getSym(){return this.sym;},isForward:function isForward(){return this._isForward;},getEdge:function getEdge(){return this.edge;},printEdge:function printEdge(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t);},setSym:function setSym(t){this.sym=t;},setVisitedEdge:function setVisitedEdge(t){this.setVisited(t),this.sym.setVisited(t);},setEdgeDepths:function setEdgeDepths(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ae.LEFT&&(i=-1);var r=Ae.opposite(t),o=n*i,a=e+o;this.setDepth(t,e),this.setDepth(r,a);},getEdgeRing:function getEdgeRing(){return this.edgeRing;},isInResult:function isInResult(){return this._isInResult;},setNext:function setNext(t){this.next=t;},isVisited:function isVisited(){return this._isVisited;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ze;}}),Ze.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0;},Tr(Je.prototype,{printEdges:function printEdges(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t);}},find:function find(t){return this.nodes.find(t);},addNode:function addNode(){if(arguments[0]instanceof Xe){var t=arguments[0];return this.nodes.addNode(t);}if(arguments[0]instanceof h){var e=arguments[0];return this.nodes.addNode(e);}},getNodeIterator:function getNodeIterator(){return this.nodes.iterator();},linkResultDirectedEdges:function linkResultDirectedEdges(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges();}},debugPrintln:function debugPrintln(t){L.out.println(t);},isBoundaryNode:function isBoundaryNode(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===S.BOUNDARY;},linkAllDirectedEdges:function linkAllDirectedEdges(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges();}},matchInSameDirection:function matchInSameDirection(t,e,n,i){return!!t.equals(n)&&ae.computeOrientation(t,e,i)===ae.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,i);},getEdgeEnds:function getEdgeEnds(){return this.edgeEndList;},debugPrint:function debugPrint(t){L.out.print(t);},getEdgeIterator:function getEdgeIterator(){return this.edges.iterator();},findEdgeInSameDirection:function findEdgeInSameDirection(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i;}return null;},insertEdge:function insertEdge(t){this.edges.add(t);},findEdgeEnd:function findEdgeEnd(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n;}return null;},addEdges:function addEdges(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new Ze(n,!0),r=new Ze(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r);}},add:function add(t){this.nodes.add(t),this.edgeEndList.add(t);},getNodes:function getNodes(){return this.nodes.values();},findEdge:function findEdge(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i;}return null;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Je;}}),Je.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges();}},Tr(Ke.prototype,{visitInteriorRing:function visitInteriorRing(t,e){var n=t.getCoordinates(),i=n[0],r=Ke.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),a=e.findEdgeEnd(o),s=null;a.getLabel().getLocation(0,Ae.RIGHT)===S.INTERIOR?s=a:a.getSym().getLabel().getLocation(0,Ae.RIGHT)===S.INTERIOR&&(s=a.getSym()),c.isTrue(null!==s,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(s);},visitShellInteriors:function visitShellInteriors(t,e){if(t instanceof Mt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e);}if(t instanceof Ot)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e);}},getCoordinate:function getCoordinate(){return this.disconnectedRingcoord;},setInteriorEdgesInResult:function setInteriorEdgesInResult(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Ae.RIGHT)===S.INTERIOR&&n.setInResult(!0);}},visitLinkedDirectedEdges:function visitLinkedDirectedEdges(t){var e=t,n=t;do{c.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();}while(n!==e);},buildEdgeRings:function buildEdgeRings(t){for(var e=new _(),n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new Fe(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o);}}return e;},hasUnvisitedShellEdge:function hasUnvisitedShellEdge(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Ae.RIGHT)===S.INTERIOR)for(var o=0;o<i.size();o++){if(r=i.get(o),!r.isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0;}}}return!1;},isInteriorsConnected:function isInteriorsConnected(){var t=new _();this.geomGraph.computeSplitEdges(t);var e=new Je(new qe());e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ke;}}),Ke.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++){if(!t[n].equals(e))return t[n];}return null;},Tr(Qe.prototype,{select:function select(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Qe;}}),Tr($e.prototype,{hasChildren:function hasChildren(){for(var t=0;t<2;t++){if(null!==this.subnode[t])return!0;}return!1;},isPrunable:function isPrunable(){return!(this.hasChildren()||this.hasItems());},addAllItems:function addAllItems(t){t.addAll(this.items);for(var e=0;e<2;e++){null!==this.subnode[e]&&this.subnode[e].addAllItems(t);}return t;},size:function size(){for(var t=0,e=0;e<2;e++){null!==this.subnode[e]&&(t+=this.subnode[e].size());}return t+this.items.size();},addAllItemsFromOverlapping:function addAllItemsFromOverlapping(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e),void 0):null;},hasItems:function hasItems(){return!this.items.isEmpty();},remove:function remove(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++){if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break;}}return n||(n=this.items.remove(e));},getItems:function getItems(){return this.items;},depth:function depth(){for(var t=0,e=0;e<2;e++){if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n);}}return t+1;},nodeSize:function nodeSize(){for(var t=0,e=0;e<2;e++){null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());}return t+1;},add:function add(t){this.items.add(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return $e;}}),$e.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n;},Tr(tn.prototype,{expandToInclude:function expandToInclude(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min);},getWidth:function getWidth(){return this.max-this.min;},overlaps:function overlaps(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max);}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e);}},getMin:function getMin(){return this.min;},toString:function toString(){return"["+this.min+", "+this.max+"]";},contains:function contains(){if(1===arguments.length){if(arguments[0]instanceof tn){var t=arguments[0];return this.contains(t.min,t.max);}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max;}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max;}},init:function init(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t);},getMax:function getMax(){return this.max;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return tn;}}),Tr(en.prototype,{getInterval:function getInterval(){return this.interval;},getLevel:function getLevel(){return this.level;},computeKey:function computeKey(t){for(this.level=en.computeLevel(t),this.interval=new tn(),this.computeInterval(this.level,t);!this.interval.contains(t);){this.level+=1,this.computeInterval(this.level,t);}},computeInterval:function computeInterval(t,e){var n=le.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n);},getPoint:function getPoint(){return this.pt;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return en;}}),en.computeLevel=function(t){var e=t.getWidth();return le.exponent(e)+1;},Pr(nn,$e),Tr(nn.prototype,{getInterval:function getInterval(){return this.interval;},find:function find(t){var e=$e.getSubnodeIndex(t,this.centre);return e===-1?this:null!==this.subnode[e]?this.subnode[e].find(t):this;},insert:function insert(t){c.isTrue(null===this.interval||this.interval.contains(t.interval));var e=$e.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n;}},isSearchMatch:function isSearchMatch(t){return t.overlaps(this.interval);},getSubnode:function getSubnode(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t];},getNode:function getNode(t){var e=$e.getSubnodeIndex(t,this.centre);return e!==-1?this.getSubnode(e).getNode(t):this;},createSubnode:function createSubnode(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax();}return new nn(new tn(e,n),this.level-1);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return nn;}}),nn.createNode=function(t){var e=new en(t);return new nn(e.getInterval(),e.getLevel());},nn.createExpanded=function(t,e){var n=new tn(e);null!==t&&n.expandToInclude(t.interval);var i=nn.createNode(n);return null!==t&&i.insert(t),i;},Pr(rn,$e),Tr(rn.prototype,{insert:function insert(t,e){var n=$e.getSubnodeIndex(t,rn.origin);if(n===-1)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=nn.createExpanded(i,t);this.subnode[n]=r;}this.insertContained(this.subnode[n],t,e);},isSearchMatch:function isSearchMatch(t){return!0;},insertContained:function insertContained(t,e,n){c.isTrue(t.getInterval().contains(e));var i=de.isZeroWidth(e.getMin(),e.getMax()),r=null;r=i?t.find(e):t.getNode(e),r.add(n);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return rn;}}),rn.origin=0,Tr(on.prototype,{size:function size(){return null!==this.root?this.root.size():0;},insert:function insert(t,e){this.collectStats(t);var n=on.ensureExtent(t,this.minExtent);this.root.insert(n,e);},query:function query(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new tn(t,t));}if(arguments[0]instanceof tn){var e=arguments[0],n=new _();return this.query(e,n),n;}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r);}},iterator:function iterator(){var t=new _();return this.root.addAllItems(t),t.iterator();},remove:function remove(t,e){var n=on.ensureExtent(t,this.minExtent);return this.root.remove(n,e);},collectStats:function collectStats(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);},depth:function depth(){return null!==this.root?this.root.depth():0;},nodeSize:function nodeSize(){return null!==this.root?this.root.nodeSize():0;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return on;}}),on.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new tn(n,i));},Tr(an.prototype,{getLineSegment:function getLineSegment(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1];},computeSelect:function computeSelect(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i);},getCoordinates:function getCoordinates(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++){t[e++]=this.pts[n];}return t;},computeOverlaps:function computeOverlaps(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e);},setId:function setId(t){this.id=t;},select:function select(t,e){this.computeSelect(t,this.start,this.end,e);},getEnvelope:function getEnvelope(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new x(t,e);}return this.env;},getEndIndex:function getEndIndex(){return this.end;},getStartIndex:function getStartIndex(){return this.start;},getContext:function getContext(){return this.context;},getId:function getId(){return this.id;},computeOverlapsInternal:function computeOverlapsInternal(t,e,n,i,r,o){var a=this.pts[t],s=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return an;}}),Tr(sn.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return sn;}}),sn.getChainStartIndices=function(t){var e=0,n=new _();n.add(new I(e));do{var i=sn.findChainEnd(t,e);n.add(new I(i)),e=i;}while(e<t.length-1);return sn.toIntArray(n);},sn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);){n++;}if(n>=t.length-1)return t.length-1;for(var i=ze.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||ze.quadrant(t[r-1],t[r])===i);){r++;}return r-1;},sn.getChains=function(){if(1===arguments.length){var t=arguments[0];return sn.getChains(t,null);}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new _(),r=sn.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new an(e,r[o],r[o+1],n);i.add(a);}return i;}},sn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++){e[n]=t.get(n).intValue();}return e;},Tr(un.prototype,{isInside:function isInside(t){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return un;}}),Tr(ln.prototype,{testLineSegment:function testLineSegment(t,e){var n=null,i=null,r=null,o=null,a=e.p0,s=e.p1;n=a.x-t.x,i=a.y-t.y,r=s.x-t.x,o=s.y-t.y,(i>0&&o<=0||o>0&&i<=0)&&0<re.signOfDet2x2(n,i,r,o)/(o-i)&&this.crossings++;},buildIndex:function buildIndex(){this.tree=new on();for(var t=V.removeRepeatedPoints(this.ring.getCoordinates()),e=sn.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i);}},testMonotoneChain:function testMonotoneChain(t,e,n){n.select(t,e);},isInside:function isInside(t){this.crossings=0;var e=new x(i.NEGATIVE_INFINITY,i.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new cn(this,t),o=n.iterator();o.hasNext();){var a=o.next();this.testMonotoneChain(e,r,a);}return this.crossings%2==1;},interfaces_:function interfaces_(){return[un];},getClass:function getClass(){return ln;}}),Pr(cn,Qe),Tr(cn.prototype,{select:function select(){if(1!==arguments.length)return Qe.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return cn;}}),ln.MCSelecter=cn,Tr(hn.prototype,{computeIntersections:function computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return hn;}}),Tr(fn.prototype,{isDelete:function isDelete(){return this.eventType===fn.DELETE;},setDeleteEventIndex:function setDeleteEventIndex(t){this.deleteEventIndex=t;},getObject:function getObject(){return this.obj;},compareTo:function compareTo(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0;},getInsertEvent:function getInsertEvent(){return this.insertEvent;},isInsert:function isInsert(){return this.eventType===fn.INSERT;},isSameLabel:function isSameLabel(t){return null!==this.label&&this.label===t.label;},getDeleteEventIndex:function getDeleteEventIndex(){return this.deleteEventIndex;},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return fn;}}),fn.INSERT=1,fn.DELETE=2,Tr(dn.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return dn;}}),Tr(pn.prototype,{isTrivialIntersection:function isTrivialIntersection(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(pn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0;}}return!1;},getProperIntersectionPoint:function getProperIntersectionPoint(){return this.properIntersectionPoint;},setIsDoneIfProperInt:function setIsDoneIfProperInt(t){this.isDoneWhenProperInt=t;},hasProperInteriorIntersection:function hasProperInteriorIntersection(){return this.hasProperInterior;},isBoundaryPointInternal:function isBoundaryPointInternal(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0;}return!1;},hasProperIntersection:function hasProperIntersection(){return this.hasProper;},hasIntersection:function hasIntersection(){return this._hasIntersection;},isDone:function isDone(){return this._isDone;},isBoundaryPoint:function isBoundaryPoint(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]));},setBoundaryNodes:function setBoundaryNodes(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e;},addIntersections:function addIntersections(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return pn;}}),pn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e);},Pr(gn,dn),Tr(gn.prototype,{prepareEvents:function prepareEvents(){Jr.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t);}},computeIntersections:function computeIntersections(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break;}}else if(3===arguments.length)if(arguments[2]instanceof pn&&Lr(arguments[0],v)&&Lr(arguments[1],v)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o);}else if("boolean"==typeof arguments[2]&&Lr(arguments[0],v)&&arguments[1]instanceof pn){var a=arguments[0],s=arguments[1],u=arguments[2];u?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s);}},addEdge:function addEdge(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new hn(n,r),a=new fn(e,n.getMinX(r),o);this.events.add(a),this.events.add(new fn(n.getMaxX(r),a));}},processOverlaps:function processOverlaps(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++);}}},addEdges:function addEdges(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n);}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return gn;}}),Tr(vn.prototype,{getMin:function getMin(){return this.min;},intersects:function intersects(t,e){return!(this.min>e||this.max<t);},getMax:function getMax(){return this.max;},toString:function toString(){return ee.toLineString(new h(this.min,0),new h(this.max,0));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return vn;}}),Tr(mn.prototype,{compare:function compare(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return r<o?-1:r>o?1:0;},interfaces_:function interfaces_(){return[a];},getClass:function getClass(){return mn;}}),vn.NodeComparator=mn,Pr(yn,vn),Tr(yn.prototype,{query:function query(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return yn;}}),Pr(_n,vn),Tr(_n.prototype,{buildExtent:function buildExtent(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max);},query:function query(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return _n;}}),Tr(bn.prototype,{buildTree:function buildTree(){Jr.sort(this.leaves,new IntervalRTreeNode.NodeComparator());for(var t=this.leaves,e=null,n=new _();;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e;}},insert:function insert(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new yn(t,e,n));},query:function query(t,e,n){this.init(),this.root.query(t,e,n);},buildRoot:function buildRoot(){return null!==this.root?null:void(this.root=this.buildTree());},printNode:function printNode(t){L.out.println(ee.toLineString(new h(t.min,this.level),new h(t.max,this.level)));},init:function init(){return null!==this.root?null:void this.buildRoot();},buildLevel:function buildLevel(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new _n(t.get(n),t.get(n+1));e.add(r);}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return bn;}}),Tr(xn.prototype,{locate:function locate(t){var e=new oe(t),n=new wn(e);return this.index.query(t.y,t.y,n),e.getLocation();},interfaces_:function interfaces_(){return[Be];},getClass:function getClass(){return xn;}}),Tr(wn.prototype,{visitItem:function visitItem(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1));},interfaces_:function interfaces_(){return[ve];},getClass:function getClass(){return wn;}}),Tr(En.prototype,{init:function init(t){for(var e=Oe.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r);}},addLine:function addLine(t){for(var e=1;e<t.length;e++){var n=new se(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n);}},query:function query(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new me();return this.index.query(t,e,n),n.getItems();}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return En;}}),xn.SegmentVisitor=wn,xn.IntervalIndexedGeometry=En,Tr(Sn.prototype,{getSegmentIndex:function getSegmentIndex(){return this.segmentIndex;},getCoordinate:function getCoordinate(){return this.coord;},print:function print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist);},compareTo:function compareTo(t){var e=t;return this.compare(e.segmentIndex,e.dist);},isEndPoint:function isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t;},toString:function toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist;},getDistance:function getDistance(){return this.dist;},compare:function compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0;},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return Sn;}}),Tr(Mn.prototype,{print:function print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t);}},iterator:function iterator(){return this.nodeMap.values().iterator();},addSplitEdges:function addSplitEdges(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i;}},addEndpoints:function addEndpoints(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0);},createSplitEdge:function createSplitEdge(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new h(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++){o[a++]=this.edge.pts[s];}return r&&(o[a]=e.coord),new Tn(o,new ke(this.edge.label));},add:function add(t,e,n){var i=new Sn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i);},isIntersection:function isIntersection(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0;}return!1;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Mn;}}),Tr(Cn.prototype,{getChainStartIndices:function getChainStartIndices(t){var e=0,n=new _();n.add(new I(e));do{var i=this.findChainEnd(t,e);n.add(new I(i)),e=i;}while(e<t.length-1);return Cn.toIntArray(n);},findChainEnd:function findChainEnd(t,e){for(var n=ze.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&ze.quadrant(t[i-1],t[i])===n;){i++;}return i-1;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Cn;}}),Cn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++){e[n]=t.get(n).intValue();}return e;},Tr(In.prototype,{getCoordinates:function getCoordinates(){return this.pts;},getMaxX:function getMaxX(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n;},getMinX:function getMinX(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n;},computeIntersectsForChain:function computeIntersectsForChain(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i);}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],f=a.pts[s],d=a.pts[u];if(o-r==1&&u-s==1)return l.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,d),!this.env1.intersects(this.env2))return null;var p=Math.trunc((r+o)/2),g=Math.trunc((s+u)/2);r<p&&(s<g&&this.computeIntersectsForChain(r,p,a,s,g,l),g<u&&this.computeIntersectsForChain(r,p,a,g,u,l)),p<o&&(s<g&&this.computeIntersectsForChain(p,o,a,s,g,l),g<u&&this.computeIntersectsForChain(p,o,a,g,u,l));}},getStartIndexes:function getStartIndexes(){return this.startIndex;},computeIntersects:function computeIntersects(t,e){for(var n=0;n<this.startIndex.length-1;n++){for(var i=0;i<t.startIndex.length-1;i++){this.computeIntersectsForChain(n,t,i,e);}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return In;}}),Tr(On.prototype,{getDepth:function getDepth(t,e){return this.depth[t][e];},setDepth:function setDepth(t,e,n){this.depth[t][e]=n;},isNull:function isNull(){if(0===arguments.length){for(var t=0;t<2;t++){for(var e=0;e<3;e++){if(this.depth[t][e]!==On.NULL_VALUE)return!1;}}return!0;}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===On.NULL_VALUE;}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===On.NULL_VALUE;}},normalize:function normalize(){for(var t=0;t<2;t++){if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i;}}}},getDelta:function getDelta(t){return this.depth[t][Ae.RIGHT]-this.depth[t][Ae.LEFT];},getLocation:function getLocation(t,e){return this.depth[t][e]<=0?S.EXTERIOR:S.INTERIOR;},toString:function toString(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2];},add:function add(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++){for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==S.EXTERIOR&&i!==S.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=On.depthAtLocation(i):this.depth[e][n]+=On.depthAtLocation(i));}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];a===S.INTERIOR&&this.depth[r][o]++;}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return On;}}),On.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:On.NULL_VALUE;},On.NULL_VALUE=-1,Pr(Tn,Ve),Tr(Tn.prototype,{getDepth:function getDepth(){return this.depth;},getCollapsedEdge:function getCollapsedEdge(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Tn(t,ke.toLineLabel(this.label));},isIsolated:function isIsolated(){return this._isIsolated;},getCoordinates:function getCoordinates(){return this.pts;},setIsolated:function setIsolated(t){this._isIsolated=t;},setName:function setName(t){this.name=t;},equals:function equals(t){if(!(t instanceof Tn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++){if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;}return!0;},getCoordinate:function getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t];}},print:function print(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++){e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);}t.print(")  "+this.label+" "+this.depthDelta);},computeIM:function computeIM(t){Tn.updateIM(this.label,t);},isCollapsed:function isCollapsed(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2]);},isClosed:function isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1]);},getMaximumSegmentIndex:function getMaximumSegmentIndex(){return this.pts.length-1;},getDepthDelta:function getDepthDelta(){return this.depthDelta;},getNumPoints:function getNumPoints(){return this.pts.length;},printReverse:function printReverse(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--){t.print(this.pts[e]+" ");}t.println("");},getMonotoneChainEdge:function getMonotoneChainEdge(){return null===this.mce&&(this.mce=new In(this)),this.mce;},getEnvelope:function getEnvelope(){if(null===this.env){this.env=new x();for(var t=0;t<this.pts.length;t++){this.env.expandToInclude(this.pts[t]);}}return this.env;},addIntersection:function addIntersection(t,e,n,i){var r=new h(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var u=this.pts[s];r.equals2D(u)&&(o=s,a=0);}this.eiList.add(r,o,a);},toString:function toString(){var t=new C();t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++){e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);}return t.append(")  "+this.label+" "+this.depthDelta),t.toString();},isPointwiseEqual:function isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++){if(!this.pts[e].equals2D(t.pts[e]))return!1;}return!0;},setDepthDelta:function setDepthDelta(t){this.depthDelta=t;},getEdgeIntersectionList:function getEdgeIntersectionList(){return this.eiList;},addIntersections:function addIntersections(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){this.addIntersection(t,e,n,i);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Tn;}}),Tn.updateIM=function(){if(2!==arguments.length)return Ve.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Ae.ON),t.getLocation(1,Ae.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Ae.LEFT),t.getLocation(1,Ae.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Ae.RIGHT),t.getLocation(1,Ae.RIGHT),2));},Pr(Pn,Je),Tr(Pn.prototype,{insertBoundaryPoint:function insertBoundaryPoint(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1,o=S.NONE;(o=i.getLocation(t,Ae.ON))===S.BOUNDARY&&r++;var a=Pn.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,a);},computeSelfNodes:function computeSelfNodes(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1);}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new pn(n,!0,!1);o.setIsDoneIfProperInt(r);var a=this.createEdgeSetIntersector(),s=this.parentGeom instanceof It||this.parentGeom instanceof Mt||this.parentGeom instanceof Ot,u=i||!s;return a.computeIntersections(this.edges,o,u),this.addSelfIntersectionNodes(this.argIndex),o;}},computeSplitEdges:function computeSplitEdges(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t);}},computeEdgeIntersections:function computeEdgeIntersections(t,e,n){var i=new pn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,i),i;},getGeometry:function getGeometry(){return this.parentGeom;},getBoundaryNodeRule:function getBoundaryNodeRule(){return this.boundaryNodeRule;},hasTooFewPoints:function hasTooFewPoints(){return this._hasTooFewPoints;},addPoint:function addPoint(){if(arguments[0]instanceof Et){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,S.INTERIOR);}else if(arguments[0]instanceof h){var n=arguments[0];this.insertPoint(this.argIndex,n,S.INTERIOR);}},addPolygon:function addPolygon(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR);}},addEdge:function addEdge(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],S.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],S.BOUNDARY);},addLineString:function addLineString(t){var e=V.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Tn(e,new ke(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),c.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1]);},getInvalidPoint:function getInvalidPoint(){return this.invalidPoint;},getBoundaryPoints:function getBoundaryPoints(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy();}return e;},getBoundaryNodes:function getBoundaryNodes(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes;},addSelfIntersectionNode:function addSelfIntersectionNode(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n));},addPolygonRing:function addPolygonRing(t,e,n){if(t.isEmpty())return null;var i=V.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;ae.isCCW(i)&&(r=n,o=e);var a=new Tn(i,new ke(this.argIndex,S.BOUNDARY,r,o));this.lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this.argIndex,i[0],S.BOUNDARY);},insertPoint:function insertPoint(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new ke(t,n):r.setLocation(t,n);},createEdgeSetIntersector:function createEdgeSetIntersector(){return new gn();},addSelfIntersectionNodes:function addSelfIntersectionNodes(t){for(var e=this.edges.iterator();e.hasNext();){for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i);}}},add:function add(){if(1!==arguments.length)return Je.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Ot&&(this.useBoundaryDeterminationRule=!1),t instanceof Mt)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof Et)this.addPoint(t);else if(t instanceof Ct)this.addCollection(t);else if(t instanceof ct)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else{if(!(t instanceof lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t);}},addCollection:function addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n);}},locate:function locate(t){return Lr(this.parentGeom,St)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new xn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom);},findEdge:function findEdge(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t);}return Je.prototype.findEdge.apply(this,arguments);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Pn;}}),Pn.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR;},Tr(An.prototype,{createEdgeEndForNext:function createEdgeEndForNext(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var a=new We(t,n.coord,o,new ke(t.getLabel()));e.add(a);},createEdgeEndForPrev:function createEdgeEndForPrev(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--;}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var a=new ke(t.getLabel());a.flip();var s=new We(t,n.coord,o,a);e.add(s);},computeEdgeEnds:function computeEdgeEnds(){if(1===arguments.length){for(var t=arguments[0],e=new _(),n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e);}return e;}if(2===arguments.length){var r=arguments[0],o=arguments[1],a=r.getEdgeIntersectionList();a.addEndpoints();var s=a.iterator(),u=null,l=null;if(!s.hasNext())return null;var c=s.next();do{u=l,l=c,c=null,s.hasNext()&&(c=s.next()),null!==l&&(this.createEdgeEndForPrev(r,o,l,u),this.createEdgeEndForNext(r,o,l,c));}while(null!==l);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return An;}}),Pr(Ln,We),Tr(Ln.prototype,{insert:function insert(t){this.edgeEnds.add(t);},print:function print(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println();}},iterator:function iterator(){return this.edgeEnds.iterator();},getEdgeEnds:function getEdgeEnds(){return this.edgeEnds;},computeLabelOn:function computeLabelOn(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next(),a=o.getLabel().getLocation(t);a===S.BOUNDARY&&n++,a===S.INTERIOR&&(i=!0);}var a=S.NONE;i&&(a=S.INTERIOR),n>0&&(a=Pn.determineBoundary(e,n)),this.label.setLocation(t,a);},computeLabelSide:function computeLabelSide(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===S.INTERIOR)return this.label.setLocation(t,e,S.INTERIOR),null;r===S.EXTERIOR&&this.label.setLocation(t,e,S.EXTERIOR);}}},getLabel:function getLabel(){return this.label;},computeLabelSides:function computeLabelSides(t){this.computeLabelSide(t,Ae.LEFT),this.computeLabelSide(t,Ae.RIGHT);},updateIM:function updateIM(t){Tn.updateIM(this.label,t);},computeLabel:function computeLabel(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0);}this.label=e?new ke(S.NONE,S.NONE,S.NONE):new ke(S.NONE);for(var i=0;i<2;i++){this.computeLabelOn(i,t),e&&this.computeLabelSides(i);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ln;}}),Pr(Nn,Ue),Tr(Nn.prototype,{updateIM:function updateIM(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t);}},insert:function insert(t){var e=this.edgeMap.get(t);null===e?(e=new Ln(t),this.insertEdgeEnd(t,e)):e.insert(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Nn;}}),Pr(kn,Xe),Tr(kn.prototype,{updateIMFromEdges:function updateIMFromEdges(t){this.edges.updateIM(t);},computeIM:function computeIM(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return kn;}}),Pr(Rn,He),Tr(Rn.prototype,{createNode:function createNode(t){return new kn(t,new Nn());},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Rn;}}),Tr(Dn.prototype,{insertEdgeEnds:function insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n);}},getNodeIterator:function getNodeIterator(){return this.nodes.iterator();},copyNodesAndLabels:function copyNodesAndLabels(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this.nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e));}},build:function build(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new An(),n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n);},computeIntersectionNodes:function computeIntersectionNodes(t,e){for(var n=t.getEdgeIterator();n.hasNext();){for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var a=o.next(),s=this.nodes.addNode(a.coord);r===S.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,S.INTERIOR);}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Dn;}}),Tr(Fn.prototype,{isNodeEdgeAreaLabelsConsistent:function isNodeEdgeAreaLabelsConsistent(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1;}return!0;},getInvalidPoint:function getInvalidPoint(){return this.invalidPoint;},hasDuplicateRings:function hasDuplicateRings(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0;}}return!1;},isNodeConsistentArea:function isNodeConsistentArea(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent());},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Fn;}}),Tr(Bn.prototype,{getBounds:function getBounds(){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Bn;}}),Tr(jn.prototype,{getItem:function getItem(){return this.item;},getBounds:function getBounds(){return this.bounds;},interfaces_:function interfaces_(){return[Bn,s];},getClass:function getClass(){return jn;}}),Tr(Un.prototype,{poll:function poll(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t;},size:function size(){return this._size;},reorder:function reorder(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e){this.items.set(t,this.items.get(e));}this.items.set(t,n);},clear:function clear(){this._size=0,this.items.clear();},isEmpty:function isEmpty(){return 0===this._size;},add:function add(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2){this.items.set(e,this.items.get(Math.trunc(e/2)));}this.items.set(e,t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Un;}}),Tr(zn.prototype,{getLevel:function getLevel(){return this.level;},size:function size(){return this.childBoundables.size();},getChildBoundables:function getChildBoundables(){return this.childBoundables;},addChildBoundable:function addChildBoundable(t){c.isTrue(null===this.bounds),this.childBoundables.add(t);},isEmpty:function isEmpty(){return this.childBoundables.isEmpty();},getBounds:function getBounds(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds;},interfaces_:function interfaces_(){return[Bn,s];},getClass:function getClass(){return zn;}}),zn.serialVersionUID=0x5a1e55ec41369800,Tr(Gn.prototype,{expandToQueue:function expandToQueue(t,e){var i=Gn.isComposite(this.boundable1),r=Gn.isComposite(this.boundable2);if(i&&r)return Gn.area(this.boundable1)>Gn.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(i)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new n("neither boundable is composite");},isLeaves:function isLeaves(){return!(Gn.isComposite(this.boundable1)||Gn.isComposite(this.boundable2));},compareTo:function compareTo(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0;},expand:function expand(t,e,n,i){for(var r=t.getChildBoundables(),o=r.iterator();o.hasNext();){var a=o.next(),s=new Gn(a,e,this.itemDistance);s.getDistance()<i&&n.add(s);}},getBoundable:function getBoundable(t){return 0===t?this.boundable1:this.boundable2;},getDistance:function getDistance(){return this._distance;},distance:function distance(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds());},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return Gn;}}),Gn.area=function(t){return t.getBounds().getArea();},Gn.isComposite=function(t){return t instanceof zn;},Tr(Vn.prototype,{getNodeCapacity:function getNodeCapacity(){return this.nodeCapacity;},lastNode:function lastNode(t){return t.get(t.size()-1);},size:function size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof zn?e+=this.size(i):i instanceof jn&&(e+=1);}return e;}},removeItem:function removeItem(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof jn&&r.getItem()===e&&(n=r);}return null!==n&&(t.getChildBoundables().remove(n),!0);},itemsTree:function itemsTree(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new _():t;}if(1===arguments.length){for(var e=arguments[0],n=new _(),i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof zn){var o=this.itemsTree(r);null!==o&&n.add(o);}else r instanceof jn?n.add(r.getItem()):c.shouldNeverReachHere();}return n.size()<=0?null:n;}},insert:function insert(t,e){c.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new jn(t,e));},boundablesAtLevel:function boundablesAtLevel(){if(1===arguments.length){var t=arguments[0],e=new _();return this.boundablesAtLevel(t,this.root,e),e;}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(c.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof zn?this.boundablesAtLevel(n,a,r):(c.isTrue(a instanceof jn),n===-1&&r.add(a));}return null;}},query:function query(){if(1===arguments.length){var t=arguments[0];this.build();var e=new _();return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e);}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i);}else if(3===arguments.length)if(Lr(arguments[2],ve)&&arguments[0]instanceof Object&&arguments[1]instanceof zn)for(var r=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof zn?this.query(r,l,a):l instanceof jn?a.visitItem(l.getItem()):c.shouldNeverReachHere());}else if(Lr(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof zn)for(var h=arguments[0],f=arguments[1],d=arguments[2],s=f.getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),h)&&(l instanceof zn?this.query(h,l,d):l instanceof jn?d.add(l.getItem()):c.shouldNeverReachHere());}},build:function build(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,this.built=!0,void 0);},getRoot:function getRoot(){return this.build(),this.root;},remove:function remove(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e);}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof zn&&(o=this.remove(n,u,r))){a=u;break;}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o;}},createHigherLevels:function createHigherLevels(t,e){c.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1);},depth:function depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof zn){var r=this.depth(i);r>e&&(e=r);}}return e+1;}},createParentBoundables:function createParentBoundables(t,e){c.isTrue(!t.isEmpty());var n=new _();n.add(this.createNode(e));var i=new _(t);Jr.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o);}return n;},isEmpty:function isEmpty(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty();},interfaces_:function interfaces_(){return[s];},getClass:function getClass(){return Vn;}}),Vn.compareDoubles=function(t,e){return t>e?1:t<e?-1:0;},Vn.IntersectsOp=Xn,Vn.serialVersionUID=-0x35ef64c82d4c5400,Vn.DEFAULT_NODE_CAPACITY=10,Tr(Hn.prototype,{distance:function distance(t,e){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Hn;}}),Pr(qn,Vn),Tr(qn.prototype,{createParentBoundablesFromVerticalSlices:function createParentBoundablesFromVerticalSlices(t,e){c.isTrue(t.length>0);for(var n=new _(),i=0;i<t.length;i++){n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));}return n;},createNode:function createNode(t){return new Yn(t);},size:function size(){return 0===arguments.length?Vn.prototype.size.call(this):Vn.prototype.size.apply(this,arguments);},insert:function insert(){if(2!==arguments.length)return Vn.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Vn.prototype.insert.call(this,t,e);},getIntersectsOp:function getIntersectsOp(){return qn.intersectsOp;},verticalSlices:function verticalSlices(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new _();for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++;}}return i;},query:function query(){if(1===arguments.length){var t=arguments[0];return Vn.prototype.query.call(this,t);}if(2===arguments.length){var e=arguments[0],n=arguments[1];Vn.prototype.query.call(this,e,n);}else if(3===arguments.length)if(Lr(arguments[2],ve)&&arguments[0]instanceof Object&&arguments[1]instanceof zn){var i=arguments[0],r=arguments[1],o=arguments[2];Vn.prototype.query.call(this,i,r,o);}else if(Lr(arguments[2],v)&&arguments[0]instanceof Object&&arguments[1]instanceof zn){var a=arguments[0],s=arguments[1],u=arguments[2];Vn.prototype.query.call(this,a,s,u);}},getComparator:function getComparator(){return qn.yComparator;},createParentBoundablesFromVerticalSlice:function createParentBoundablesFromVerticalSlice(t,e){return Vn.prototype.createParentBoundables.call(this,t,e);},remove:function remove(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Vn.prototype.remove.call(this,t,e);}return Vn.prototype.remove.apply(this,arguments);},depth:function depth(){return 0===arguments.length?Vn.prototype.depth.call(this):Vn.prototype.depth.apply(this,arguments);},createParentBoundables:function createParentBoundables(t,e){c.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new _(t);Jr.sort(i,qn.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e);},nearestNeighbour:function nearestNeighbour(){if(1===arguments.length){if(Lr(arguments[0],Hn)){var t=arguments[0],e=new Gn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e);}if(arguments[0]instanceof Gn){var n=arguments[0];return this.nearestNeighbour(n,i.POSITIVE_INFINITY);}}else if(2===arguments.length){if(arguments[0]instanceof qn&&Lr(arguments[1],Hn)){var r=arguments[0],o=arguments[1],e=new Gn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(e);}if(arguments[0]instanceof Gn&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=s,l=null,c=new Un();for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u);}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()];}}else if(3===arguments.length){var d=arguments[0],p=arguments[1],g=arguments[2],v=new jn(d,p),e=new Gn(this.getRoot(),v,g);return this.nearestNeighbour(e)[0];}},interfaces_:function interfaces_(){return[ge,s];},getClass:function getClass(){return qn;}}),qn.centreX=function(t){return qn.avg(t.getMinX(),t.getMaxX());},qn.avg=function(t,e){return(t+e)/2;},qn.centreY=function(t){return qn.avg(t.getMinY(),t.getMaxY());},Pr(Yn,zn),Tr(Yn.prototype,{computeBounds:function computeBounds(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new x(n.getBounds()):t.expandToInclude(n.getBounds());}return t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Yn;}}),qn.STRtreeNode=Yn,qn.serialVersionUID=0x39920f7d5f261e0,qn.xComparator={interfaces_:function interfaces_(){return[a];},compare:function compare(t,e){return Vn.compareDoubles(qn.centreX(t.getBounds()),qn.centreX(e.getBounds()));}},qn.yComparator={interfaces_:function interfaces_(){return[a];},compare:function compare(t,e){return Vn.compareDoubles(qn.centreY(t.getBounds()),qn.centreY(e.getBounds()));}},qn.intersectsOp={interfaces_:function interfaces_(){return[IntersectsOp];},intersects:function intersects(t,e){return t.intersects(e);}},qn.DEFAULT_NODE_CAPACITY=10,Tr(Wn.prototype,{buildIndex:function buildIndex(){this.index=new qn();for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e);}},getNestedPoint:function getNestedPoint(){return this.nestedPt;},isNonNested:function isNonNested(){this.buildIndex();for(var t=0;t<this.rings.size();t++){for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),a=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var s=Jn.findPtNotNode(n,o,this.graph);if(null!==s){var u=ae.isPointInRing(s,a);if(u)return this.nestedPt=s,!1;}}}}return!0;},add:function add(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal());},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Wn;}}),Tr(Zn.prototype,{getErrorType:function getErrorType(){return this.errorType;},getMessage:function getMessage(){return Zn.errMsg[this.errorType];},getCoordinate:function getCoordinate(){return this.pt;},toString:function toString(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Zn;}}),Zn.ERROR=0,Zn.REPEATED_POINT=1,Zn.HOLE_OUTSIDE_SHELL=2,Zn.NESTED_HOLES=3,Zn.DISCONNECTED_INTERIOR=4,Zn.SELF_INTERSECTION=5,Zn.RING_SELF_INTERSECTION=6,Zn.NESTED_SHELLS=7,Zn.DUPLICATE_RINGS=8,Zn.TOO_FEW_POINTS=9,Zn.INVALID_COORDINATE=10,Zn.RING_NOT_CLOSED=11,Zn.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],Tr(Jn.prototype,{checkInvalidCoordinates:function checkInvalidCoordinates(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++){if(!Jn.isValid(t[e]))return this.validErr=new Zn(Zn.INVALID_COORDINATE,t[e]),null;}}else if(arguments[0]instanceof Mt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++){if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null;}}},checkHolesNotNested:function checkHolesNotNested(t,e){for(var n=new Wn(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r);}n.isNonNested()||(this.validErr=new Zn(Zn.NESTED_HOLES,n.getNestedPoint()));},checkConsistentArea:function checkConsistentArea(t){var e=new Fn(t);return e.isNodeConsistentArea()?void(e.hasDuplicateRings()&&(this.validErr=new Zn(Zn.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Zn(Zn.SELF_INTERSECTION,e.getInvalidPoint()),null);},isValid:function isValid(){return this.checkValid(this.parentGeometry),null===this.validErr;},checkShellInsideHole:function checkShellInsideHole(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=Jn.findPtNotNode(i,e,n);if(null!==o&&!ae.isPointInRing(o,r))return o;var a=Jn.findPtNotNode(r,t,n);return null!==a?ae.isPointInRing(a,i)?a:null:(c.shouldNeverReachHere("points in shell and hole appear to be equal"),null);},checkNoSelfIntersectingRings:function checkNoSelfIntersectingRings(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null;}},checkConnectedInteriors:function checkConnectedInteriors(t){var e=new Ke(t);e.isInteriorsConnected()||(this.validErr=new Zn(Zn.DISCONNECTED_INTERIOR,e.getCoordinate()));},checkNoSelfIntersectingRing:function checkNoSelfIntersectingRing(t){for(var e=new rt(),n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Zn(Zn.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord);}}},checkHolesInShell:function checkHolesInShell(t,e){for(var n=t.getExteriorRing(),i=new ln(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),a=Jn.findPtNotNode(o.getCoordinates(),n,e);if(null===a)return null;if(!i.isInside(a))return this.validErr=new Zn(Zn.HOLE_OUTSIDE_SHELL,a),null;}},checkTooFewPoints:function checkTooFewPoints(t){if(t.hasTooFewPoints())return this.validErr=new Zn(Zn.TOO_FEW_POINTS,t.getInvalidPoint()),null;},getValidationError:function getValidationError(){return this.checkValid(this.parentGeometry),this.validErr;},checkValid:function checkValid(){if(arguments[0]instanceof Et){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates());}else if(arguments[0]instanceof Ct){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates());}else if(arguments[0]instanceof It){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new Pn(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new ie();i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i);}else if(arguments[0]instanceof xt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;var i=new Pn(0,o);this.checkTooFewPoints(i);}else if(arguments[0]instanceof Mt){var a=arguments[0];if(this.checkInvalidCoordinates(a),null!==this.validErr)return null;if(this.checkClosedRings(a),null!==this.validErr)return null;var i=new Pn(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(a,i),null!==this.validErr)return null;if(this.checkHolesNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i);}else if(arguments[0]instanceof Ot){for(var s=arguments[0],u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null;}var i=new Pn(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this.validErr)return null;}for(var u=0;u<s.getNumGeometries();u++){var l=s.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this.validErr)return null;}if(this.checkShellsNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i);}else if(arguments[0]instanceof lt)for(var c=arguments[0],u=0;u<c.getNumGeometries();u++){var h=c.getGeometryN(u);if(this.checkValid(h),null!==this.validErr)return null;}else if(arguments[0]instanceof D){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof Et)this.checkValid(f);else if(f instanceof Ct)this.checkValid(f);else if(f instanceof It)this.checkValid(f);else if(f instanceof xt)this.checkValid(f);else if(f instanceof Mt)this.checkValid(f);else if(f instanceof Ot)this.checkValid(f);else{if(!(f instanceof lt))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f);}}},setSelfTouchingRingFormingHoleValid:function setSelfTouchingRingFormingHoleValid(t){this.isSelfTouchingRingFormingHoleValid=t;},checkShellNotNested:function checkShellNotNested(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),a=Jn.findPtNotNode(i,r,n);if(null===a)return null;if(!ae.isPointInRing(a,o))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Zn(Zn.NESTED_SHELLS,a),null;for(var s=null,u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u);if(null===(s=this.checkShellInsideHole(t,l,n)))return null;}this.validErr=new Zn(Zn.NESTED_SHELLS,s);},checkClosedRings:function checkClosedRings(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++){if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null;}},checkClosedRing:function checkClosedRing(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Zn(Zn.RING_NOT_CLOSED,e);}},checkShellsNotNested:function checkShellsNotNested(t,e){for(var n=0;n<t.getNumGeometries();n++){for(var i=t.getGeometryN(n),r=i.getExteriorRing(),o=0;o<t.getNumGeometries();o++){if(n!==o){var a=t.getGeometryN(o);if(this.checkShellNotNested(r,a,e),null!==this.validErr)return null;}}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Jn;}}),Jn.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),o=0;o<t.length;o++){var a=t[o];if(!r.isIntersection(a))return a;}return null;},Jn.isValid=function(){if(arguments[0]instanceof D)return new Jn(arguments[0]).isValid();if(arguments[0]instanceof h){var t=arguments[0];return!(i.isNaN(t.x)||i.isInfinite(t.x)||i.isNaN(t.y)||i.isInfinite(t.y));}},Tr(Kn.prototype,{transformPoint:function transformPoint(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t));},transformPolygon:function transformPolygon(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof It&&!i.isEmpty()||(n=!1);for(var r=new _(),o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof It||(n=!1),r.add(a));}if(n)return this.factory.createPolygon(i,r.toArray([]));var s=new _();return null!==i&&s.add(i),s.addAll(r),this.factory.buildGeometry(s);},createCoordinateSequence:function createCoordinateSequence(t){return this.factory.getCoordinateSequenceFactory().create(t);},getInputGeometry:function getInputGeometry(){return this.inputGeom;},transformMultiLineString:function transformMultiLineString(t,e){for(var n=new _(),i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r));}return this.factory.buildGeometry(n);},transformCoordinates:function transformCoordinates(t,e){return this.copy(t);},transformLineString:function transformLineString(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t));},transformMultiPoint:function transformMultiPoint(t,e){for(var n=new _(),i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r));}return this.factory.buildGeometry(n);},transformMultiPolygon:function transformMultiPolygon(t,e){for(var n=new _(),i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r));}return this.factory.buildGeometry(n);},copy:function copy(t){return t.copy();},transformGeometryCollection:function transformGeometryCollection(t,e){for(var n=new _(),i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r));}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection($t.toGeometryArray(n)):this.factory.buildGeometry(n);},transform:function transform(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Et)return this.transformPoint(t,null);if(t instanceof Ct)return this.transformMultiPoint(t,null);if(t instanceof It)return this.transformLinearRing(t,null);if(t instanceof xt)return this.transformLineString(t,null);if(t instanceof ct)return this.transformMultiLineString(t,null);if(t instanceof Mt)return this.transformPolygon(t,null);if(t instanceof Ot)return this.transformMultiPolygon(t,null);if(t instanceof lt)return this.transformGeometryCollection(t,null);throw new n("Unknown Geometry subtype: "+t.getClass().getName());},transformLinearRing:function transformLinearRing(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Kn;}}),Tr(Qn.prototype,{snapVertices:function snapVertices(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new h(o)),0===i&&this._isClosed&&t.set(t.size()-1,new h(o)));}},findSnapForVertex:function findSnapForVertex(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n];}return null;},snapTo:function snapTo(t){var e=new b(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray();},snapSegments:function snapSegments(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new h(r),!1);}},findSegmentIndexToSnap:function findSegmentIndexToSnap(t,e){for(var n=i.MAX_VALUE,r=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1;}var a=this.seg.distance(t);a<this.snapTolerance&&a<n&&(n=a,r=o);}return r;},setAllowSnappingToSourceVertices:function setAllowSnappingToSourceVertices(t){this.allowSnappingToSourceVertices=t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Qn;}}),Qn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1]);},Tr($n.prototype,{snapTo:function snapTo(t,e){return new ti(e,this.extractTargetCoordinates(t)).transform(this.srcGeom);},snapToSelf:function snapToSelf(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new ti(t,n,!0),r=i.transform(this.srcGeom),o=r;return e&&Lr(o,St)&&(o=r.buffer(0)),o;},computeSnapTolerance:function computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10;},extractTargetCoordinates:function extractTargetCoordinates(t){for(var e=new rt(),n=t.getCoordinates(),i=0;i<n.length;i++){e.add(n[i]);}return e.toArray(new Array(0).fill(null));},computeMinimumSegmentLength:function computeMinimumSegmentLength(t){for(var e=i.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r);}return e;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return $n;}}),$n.snap=function(t,e,n){var i=new Array(2).fill(null),r=new $n(t);i[0]=r.snapTo(e,n);var o=new $n(e);return i[1]=o.snapTo(i[0],n),i;},$n.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$n.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Kt.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i);}return e;}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min($n.computeOverlaySnapTolerance(r),$n.computeOverlaySnapTolerance(o));}},$n.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$n.SNAP_PRECISION_FACTOR;},$n.snapToSelf=function(t,e,n){return new $n(t).snapToSelf(e,n);},$n.SNAP_PRECISION_FACTOR=1e-9,Pr(ti,Kn),Tr(ti.prototype,{snapLine:function snapLine(t,e){var n=new Qn(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e);},transformCoordinates:function transformCoordinates(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ti;}}),Tr(ei.prototype,{getCommon:function getCommon(){return i.longBitsToDouble(this.commonBits);},add:function add(t){var e=i.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=ei.signExpBits(this.commonBits),this.isFirst=!1,null):ei.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=ei.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=ei.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))));},toString:function toString(){if(1===arguments.length){var t=arguments[0],e=i.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,o=r.substring(r.length-64);return o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+e+" ]";}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ei;}}),ei.getBit=function(t,e){return 0!=(t&1<<e)?1:0;},ei.signExpBits=function(t){return t>>52;},ei.zeroLowerBits=function(t,e){return t&~((1<<e)-1);},ei.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(ei.getBit(t,i)!==ei.getBit(e,i))return n;n++;}return 52;},Tr(ni.prototype,{addCommonBits:function addCommonBits(t){var e=new ri(this.commonCoord);t.apply(e),t.geometryChanged();},removeCommonBits:function removeCommonBits(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new h(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t;},getCommonCoordinate:function getCommonCoordinate(){return this.commonCoord;},add:function add(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ni;}}),Tr(ii.prototype,{filter:function filter(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y);},getCommonCoordinate:function getCommonCoordinate(){return new h(this.commonBitsX.getCommon(),this.commonBitsY.getCommon());},interfaces_:function interfaces_(){return[F];},getClass:function getClass(){return ii;}}),Tr(ri.prototype,{filter:function filter(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i);},isDone:function isDone(){return!1;},isGeometryChanged:function isGeometryChanged(){return!0;},interfaces_:function interfaces_(){return[ut];},getClass:function getClass(){return ri;}}),ni.CommonCoordinateFilter=ii,ni.Translater=ri,Tr(oi.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return oi;}}),oi.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?i>=r?0:1:i>=r?7:6:e>=0?i>=r?3:2:i>=r?4:5;}if(arguments[0]instanceof h&&arguments[1]instanceof h){var o=arguments[0],a=arguments[1],s=a.x-o.x,u=a.y-o.y;if(0===s&&0===u)throw new n("Cannot compute the octant for two identical points "+o);return oi.octant(s,u);}},Tr(ai.prototype,{getCoordinates:function getCoordinates(){},size:function size(){},getCoordinate:function getCoordinate(t){},isClosed:function isClosed(){},setData:function setData(t){},getData:function getData(){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ai;}}),Tr(si.prototype,{getCoordinates:function getCoordinates(){return this.pts;},size:function size(){return this.pts.length;},getCoordinate:function getCoordinate(t){return this.pts[t];},isClosed:function isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1]);},getSegmentOctant:function getSegmentOctant(t){return t===this.pts.length-1?-1:oi.octant(this.getCoordinate(t),this.getCoordinate(t+1));},setData:function setData(t){this.data=t;},getData:function getData(){return this.data;},toString:function toString(){return ee.toLineString(new kt(this.pts));},interfaces_:function interfaces_(){return[ai];},getClass:function getClass(){return si;}}),Tr(ui.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ui;}}),ui.relativeSign=function(t,e){return t<e?-1:t>e?1:0;},ui.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=ui.relativeSign(e.x,n.x),r=ui.relativeSign(e.y,n.y);switch(t){case 0:return ui.compareValue(i,r);case 1:return ui.compareValue(r,i);case 2:return ui.compareValue(r,-i);case 3:return ui.compareValue(-i,r);case 4:return ui.compareValue(-i,-r);case 5:return ui.compareValue(-r,-i);case 6:return ui.compareValue(-r,i);case 7:return ui.compareValue(i,-r);}return c.shouldNeverReachHere("invalid octant value"),0;},ui.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0;},Tr(li.prototype,{getCoordinate:function getCoordinate(){return this.coord;},print:function print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex);},compareTo:function compareTo(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ui.compare(this.segmentOctant,this.coord,e.coord);},isEndPoint:function isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t;},isInterior:function isInterior(){return this._isInterior;},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return li;}});Tr(ci.prototype,{getSplitCoordinates:function getSplitCoordinates(){var t=new b();this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i;}return t.toCoordinateArray();},addCollapsedNodes:function addCollapsedNodes(){var t=new _();this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n);}},print:function print(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t);}},findCollapsesFromExistingVertices:function findCollapsesFromExistingVertices(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new I(e+1));}},addEdgeCoordinates:function addEdgeCoordinates(t,e,n){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||i--,n.add(new h(t.coord),!1);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++){n.add(this.edge.getCoordinate(a));}o&&n.add(new h(e.coord));},iterator:function iterator(){return this.nodeMap.values().iterator();},addSplitEdges:function addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i;}},findCollapseIndex:function findCollapseIndex(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0);},findCollapsesFromInsertedNodes:function findCollapsesFromInsertedNodes(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new I(e[0])),i=r;}},getEdge:function getEdge(){return this.edge;},addEndpoints:function addEndpoints(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t);},createSplitEdge:function createSplitEdge(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new h(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++){o[a++]=this.edge.getCoordinate(s);}return r&&(o[a]=new h(e.coord)),new di(o,this.edge.getData());},add:function add(t,e){var n=new li(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(c.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n);},checkSplitEdgesCorrectness:function checkSplitEdgesCorrectness(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new u("bad split edge start point at "+i);var r=t.get(t.size()-1),o=r.getCoordinates(),a=o[o.length-1];if(!a.equals2D(e[e.length-1]))throw new u("bad split edge end point at "+a);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ci;}}),Tr(hi.prototype,{next:function next(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null);},remove:function remove(){throw new UnsupportedOperationException(this.getClass().getName());},hasNext:function hasNext(){return null!==this.nextNode;},readNextNode:function readNextNode(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null;},interfaces_:function interfaces_(){return[d];},getClass:function getClass(){return hi;}}),Tr(fi.prototype,{addIntersection:function addIntersection(t,e){},interfaces_:function interfaces_(){return[ai];},getClass:function getClass(){return fi;}}),Tr(di.prototype,{getCoordinates:function getCoordinates(){return this.pts;},size:function size(){return this.pts.length;},getCoordinate:function getCoordinate(t){return this.pts[t];},isClosed:function isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1]);},getSegmentOctant:function getSegmentOctant(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1));},setData:function setData(t){this.data=t;},safeOctant:function safeOctant(t,e){return t.equals2D(e)?0:oi.octant(t,e);},getData:function getData(){return this.data;},addIntersection:function addIntersection(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e);}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new h(n.getIntersection(r));this.addIntersection(o,i);}},toString:function toString(){return ee.toLineString(new kt(this.pts));},getNodeList:function getNodeList(){return this.nodeList;},addIntersectionNode:function addIntersectionNode(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i);}return this.nodeList.add(t,n);},addIntersections:function addIntersections(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){this.addIntersection(t,e,n,i);}},interfaces_:function interfaces_(){return[fi];},getClass:function getClass(){return di;}}),di.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new _();return di.getNodedSubstrings(t,e),e;}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i);}},Tr(pi.prototype,{overlap:function overlap(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return pi;}}),Tr(gi.prototype,{computeNodes:function computeNodes(t){},getNodedSubstrings:function getNodedSubstrings(){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return gi;}}),Tr(vi.prototype,{setSegmentIntersector:function setSegmentIntersector(t){this.segInt=t;},interfaces_:function interfaces_(){return[gi];},getClass:function getClass(){return vi;}}),Pr(mi,vi),Tr(mi.prototype,{getMonotoneChains:function getMonotoneChains(){return this.monoChains;},getNodedSubstrings:function getNodedSubstrings(){return di.getNodedSubstrings(this.nodedSegStrings);},getIndex:function getIndex(){return this.index;},add:function add(t){for(var e=sn.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i);}},computeNodes:function computeNodes(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();){this.add(e.next());}this.intersectChains();},intersectChains:function intersectChains(){for(var t=new yi(this.segInt),e=this.monoChains.iterator();e.hasNext();){for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null;}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return mi;}}),Pr(yi,pi),Tr(yi.prototype,{overlap:function overlap(){if(4!==arguments.length)return pi.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return yi;}}),mi.SegmentOverlapAction=yi,Tr(_i.prototype,{processIntersections:function processIntersections(t,e,n,i){},isDone:function isDone(){},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return _i;}}),Tr(bi.prototype,{getInteriorIntersection:function getInteriorIntersection(){return this.interiorIntersection;},setCheckEndSegmentsOnly:function setCheckEndSegmentsOnly(t){this.isCheckEndSegmentsOnly=t;},getIntersectionSegments:function getIntersectionSegments(){return this.intSegments;},count:function count(){return this.intersectionCount;},getIntersections:function getIntersections(){return this.intersections;},setFindAllIntersections:function setFindAllIntersections(t){this.findAllIntersections=t;},setKeepIntersections:function setKeepIntersections(t){this.keepIntersections=t;},processIntersections:function processIntersections(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=o,this.intSegments[2]=a,this.intSegments[3]=s,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++);},isEndSegment:function isEndSegment(t,e){return 0===e||e>=t.size()-2;},hasIntersection:function hasIntersection(){return null!==this.interiorIntersection;},isDone:function isDone(){return!this.findAllIntersections&&null!==this.interiorIntersection;},interfaces_:function interfaces_(){return[_i];},getClass:function getClass(){return bi;}}),bi.createAllIntersectionsFinder=function(t){var e=new bi(t);return e.setFindAllIntersections(!0),e;},bi.createAnyIntersectionFinder=function(t){return new bi(t);},bi.createIntersectionCounter=function(t){var e=new bi(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e;},Tr(xi.prototype,{execute:function execute(){return null!==this.segInt?null:void this.checkInteriorIntersections();},getIntersections:function getIntersections(){return this.segInt.getIntersections();},isValid:function isValid(){return this.execute(),this._isValid;},setFindAllIntersections:function setFindAllIntersections(t){this.findAllIntersections=t;},checkInteriorIntersections:function checkInteriorIntersections(){this._isValid=!0,this.segInt=new bi(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new mi();if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null;},checkValid:function checkValid(){if(this.execute(),!this._isValid)throw new Le(this.getErrorMessage(),this.segInt.getInteriorIntersection());},getErrorMessage:function getErrorMessage(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+ee.toLineString(t[0],t[1])+" and "+ee.toLineString(t[2],t[3]);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return xi;}}),xi.computeIntersections=function(t){var e=new xi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections();},Tr(wi.prototype,{checkValid:function checkValid(){this.nv.checkValid();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return wi;}}),wi.toSegmentStrings=function(t){for(var e=new _(),n=t.iterator();n.hasNext();){var i=n.next();e.add(new si(i.getCoordinates(),i));}return e;},wi.checkValid=function(t){new wi(t).checkValid();},Tr(Ei.prototype,{sortShellsAndHoles:function sortShellsAndHoles(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r);}},computePolygons:function computePolygons(t){for(var e=new _(),n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r);}return e;},placeFreeHoles:function placeFreeHoles(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Le("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r);}}},buildMinimalEdgeRings:function buildMinimalEdgeRings(t,e,n){for(var i=new _(),r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a);}else i.add(o);}return i;},containsPoint:function containsPoint(t){for(var e=this.shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0;}return!1;},buildMaximalEdgeRings:function buildMaximalEdgeRings(t){for(var e=new _(),n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Fe(i,this.geometryFactory);e.add(r),r.setInResult();}}return e;},placePolygonHoles:function placePolygonHoles(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t);}},getPolygons:function getPolygons(){return this.computePolygons(this.shellList);},findEdgeRingContaining:function findEdgeRingContaining(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&ae.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u);}return o;},findShell:function findShell(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++);}return c.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n;},add:function add(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes());}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Je.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new _(),o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ei;}}),Tr(Si.prototype,{collectLines:function collectLines(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList);}},labelIsolatedLine:function labelIsolatedLine(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n);},build:function build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList;},collectLineEdge:function collectLineEdge(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)));},findCoveredLineEdges:function findCoveredLineEdges(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges();}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(n.getCoordinate());i.setCovered(r);}}},labelIsolatedLines:function labelIsolatedLines(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1));}},buildLines:function buildLines(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0);}},collectBoundaryTouchEdge:function collectBoundaryTouchEdge(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(c.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(i,e)&&e===Ti.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Si;}}),Tr(Mi.prototype,{filterCoveredNodeToPoint:function filterCoveredNodeToPoint(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n);}},extractNonCoveredResultNodes:function extractNonCoveredResultNodes(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ti.INTERSECTION)){var i=n.getLabel();Ti.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n);}}},build:function build(t){return this.extractNonCoveredResultNodes(t),this.resultPointList;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Mi;}}),Tr(Ci.prototype,{getArgGeometry:function getArgGeometry(t){return this.arg[t].getGeometry();},setComputationPrecision:function setComputationPrecision(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ci;}}),Tr(Ii.prototype,{compareTo:function compareTo(t){var e=t;return Ii.compareOriented(this.pts,this._orientation,e.pts,e._orientation);},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return Ii;}}),Ii.orientation=function(t){return 1===V.increasingDirection(t);},Ii.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;u+=r,l+=o;var h=u===a,f=l===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0;}},Tr(Oi.prototype,{print:function print(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++){r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);}t.println(")");}t.print(")  ");},addAll:function addAll(t){for(var e=t.iterator();e.hasNext();){this.add(e.next());}},findEdgeIndex:function findEdgeIndex(t){for(var e=0;e<this.edges.size();e++){if(this.edges.get(e).equals(t))return e;}return-1;},iterator:function iterator(){return this.edges.iterator();},getEdges:function getEdges(){return this.edges;},get:function get(t){return this.edges.get(t);},findEqualEdge:function findEqualEdge(t){var e=new Ii(t.getCoordinates());return this.ocaMap.get(e);},add:function add(t){this.edges.add(t);var e=new Ii(t.getCoordinates());this.ocaMap.put(e,t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Oi;}}),Pr(Ti,Ci),Tr(Ti.prototype,{insertUniqueEdge:function insertUniqueEdge(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i);}else this.edgeList.add(t);},getGraph:function getGraph(){return this.graph;},cancelDuplicateResultEdges:function cancelDuplicateResultEdges(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1));}},isCoveredByLA:function isCoveredByLA(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList);},computeGeometry:function computeGeometry(t,e,n,i){var r=new _();return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?Ti.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r);},mergeSymLabels:function mergeSymLabels(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels();}},isCovered:function isCovered(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this.ptLocator.locate(t,i)!==S.EXTERIOR)return!0;}return!1;},replaceCollapsedEdges:function replaceCollapsedEdges(){for(var t=new _(),e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()));}this.edgeList.addAll(t);},updateNodeLabelling:function updateNodeLabelling(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n);}},getResultGeometry:function getResultGeometry(t){return this.computeOverlay(t),this.resultGeom;},insertUniqueEdges:function insertUniqueEdges(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n);}},computeOverlay:function computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new _();this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),wi.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ei(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new Si(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new Mi(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t);},labelIncompleteNode:function labelIncompleteNode(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n);},copyPoints:function copyPoints(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t));}},findResultAreaEdges:function findResultAreaEdges(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&Ti.isResultOfOp(i.getLocation(0,Ae.RIGHT),i.getLocation(1,Ae.RIGHT),t)&&n.setInResult(!0);}},computeLabelsFromDepths:function computeLabelsFromDepths(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++){n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(c.isTrue(!i.isNull(r,Ae.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ae.LEFT,i.getLocation(r,Ae.LEFT)),c.isTrue(!i.isNull(r,Ae.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ae.RIGHT,i.getLocation(r,Ae.RIGHT))));}}}},computeLabelling:function computeLabelling(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg);}this.mergeSymLabels(),this.updateNodeLabelling();},labelIncompleteNodes:function labelIncompleteNodes(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(t++,i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i);}},isCoveredByA:function isCoveredByA(t){return!!this.isCovered(t,this.resultPolyList);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ti;}}),Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n);},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Pe.map(t,{interfaces_:function interfaces_(){return[MapOp];},map:function map(t){return t.intersection(n);}});}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ai.overlayOp(t,e,Ti.INTERSECTION);},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy();}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ai.overlayOp(t,e,Ti.SYMDIFFERENCE);},Ti.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(i,r);break;case Ti.UNION:o=Math.max(i,r);break;case Ti.DIFFERENCE:o=i;break;case Ti.SYMDIFFERENCE:o=Math.max(i,r);}return o;},Ti.createEmptyResult=function(t,e,n,i){var r=null;switch(Ti.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon();}return r;},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ai.overlayOp(t,e,Ti.DIFFERENCE));},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Ti.isResultOfOp(n,i,e);}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===S.BOUNDARY&&(r=S.INTERIOR),o===S.BOUNDARY&&(o=S.INTERIOR),a){case Ti.INTERSECTION:return r===S.INTERIOR&&o===S.INTERIOR;case Ti.UNION:return r===S.INTERIOR||o===S.INTERIOR;case Ti.DIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR;case Ti.SYMDIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR||r!==S.INTERIOR&&o===S.INTERIOR;}return!1;}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4,Tr(Pi.prototype,{selfSnap:function selfSnap(t){return new $n(t).snapTo(t,this.snapTolerance);},removeCommonBits:function removeCommonBits(t){this.cbr=new ni(),this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e;},prepareResult:function prepareResult(t){return this.cbr.addCommonBits(t),t;},getResultGeometry:function getResultGeometry(t){var e=this.snap(this.geom),n=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(n);},checkValid:function checkValid(t){t.isValid()||L.out.println("Snapped geometry is invalid");},computeSnapTolerance:function computeSnapTolerance(){this.snapTolerance=$n.computeOverlaySnapTolerance(this.geom[0],this.geom[1]);},snap:function snap(t){var e=this.removeCommonBits(t);return $n.snap(e[0],e[1],this.snapTolerance);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Pi;}}),Pi.overlayOp=function(t,e,n){return new Pi(t,e).getResultGeometry(n);},Pi.union=function(t,e){return Pi.overlayOp(t,e,Ti.UNION);},Pi.intersection=function(t,e){return Pi.overlayOp(t,e,Ti.INTERSECTION);},Pi.symDifference=function(t,e){return Pi.overlayOp(t,e,Ti.SYMDIFFERENCE);},Pi.difference=function(t,e){return Pi.overlayOp(t,e,Ti.DIFFERENCE);},Tr(Ai.prototype,{getResultGeometry:function getResultGeometry(t){var e=null,n=!1,i=null;try{e=Ti.overlayOp(this.geom[0],this.geom[1],t),n=!0;}catch(t){if(!(t instanceof u))throw t;i=t;}finally{}if(!n)try{e=Pi.overlayOp(this.geom[0],this.geom[1],t);}catch(t){throw t instanceof u?i:t;}finally{}return e;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ai;}}),Ai.overlayOp=function(t,e,n){return new Ai(t,e).getResultGeometry(n);},Ai.union=function(t,e){return Ai.overlayOp(t,e,Ti.UNION);},Ai.intersection=function(t,e){return Ai.overlayOp(t,e,Ti.INTERSECTION);},Ai.symDifference=function(t,e){return Ai.overlayOp(t,e,Ti.SYMDIFFERENCE);},Ai.difference=function(t,e){return Ai.overlayOp(t,e,Ti.DIFFERENCE);},Tr(Li.prototype,{addPolygon:function addPolygon(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=Ai.overlayOp(i,t,Ti.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=Li.centre(o.getEnvelopeInternal());}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n);},getInteriorPoint:function getInteriorPoint(){return this.interiorPoint;},widestGeometry:function widestGeometry(){if(arguments[0]instanceof lt){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++){t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));}return e;}if(arguments[0]instanceof D){var i=arguments[0];return i instanceof lt?this.widestGeometry(i):i;}},horizontalBisector:function horizontalBisector(t){var e=t.getEnvelopeInternal(),n=Ni.getBisectorY(t);return this.factory.createLineString([new h(e.getMinX(),n),new h(e.getMaxX(),n)]);},add:function add(t){if(t instanceof Mt)this.addPolygon(t);else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++){this.add(e.getGeometryN(n));}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Li;}}),Li.centre=function(t){return new h(Li.avg(t.getMinX(),t.getMaxX()),Li.avg(t.getMinY(),t.getMaxY()));},Li.avg=function(t,e){return(t+e)/2;},Tr(Ni.prototype,{updateInterval:function updateInterval(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t);},getBisectorY:function getBisectorY(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++){this.process(this.poly.getInteriorRingN(t));}return Li.avg(this.hiY,this.loY);},process:function process(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ni;}}),Ni.getBisectorY=function(t){return new Ni(t).getBisectorY();},Li.SafeBisectorFinder=Ni,Tr(ki.prototype,{extractElements:function extractElements(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i);}},combine:function combine(){for(var t=new _(),e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t);}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ki;}}),ki.combine=function(){if(1===arguments.length){var t=arguments[0],e=new ki(t);return e.combine();}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new ki(ki.createList(n,i));return e.combine();}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],e=new ki(ki.createList(r,o,a));return e.combine();}},ki.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory();},ki.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new _();return n.add(t),n.add(e),n;}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],n=new _();return n.add(i),n.add(r),n.add(o),n;}},Tr(Ri.prototype,{union:function union(){for(var t=new Ee(),e=new rt(),n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate();t.locate(r,this.otherGeom)===S.EXTERIOR&&e.add(r);}if(0===e.size())return this.otherGeom;var o=null,a=V.toCoordinateArray(e);return o=1===a.length?this.geomFact.createPoint(a[0]):this.geomFact.createMultiPointFromCoords(a),ki.combine(o,this.otherGeom);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ri;}}),Ri.union=function(t,e){return new Ri(t,e).union();},Tr(Di.prototype,{filter:function filter(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t);},interfaces_:function interfaces_(){return[st];},getClass:function getClass(){return Di;}}),Di.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Di.extract(t,e,new _());}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof lt&&n.apply(new Di(i,r)),r;}},Tr(Fi.prototype,{reduceToGeometries:function reduceToGeometries(t){for(var e=new _(),n=t.iterator();n.hasNext();){var i=n.next(),r=null;Lr(i,v)?r=this.unionTree(i):i instanceof D&&(r=i),e.add(r);}return e;},extractByEnvelope:function extractByEnvelope(t,e,n){for(var i=new _(),r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o);}return this.geomFactory.buildGeometry(i);},unionOptimized:function unionOptimized(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return ki.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r);},union:function union(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new qn(Fi.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n);}this.inputPolys=null;var i=t.itemsTree();return this.unionTree(i);},binaryUnion:function binaryUnion(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size());}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Fi.getGeometry(e,n);return this.unionSafe(r,null);}if(i-n==2)return this.unionSafe(Fi.getGeometry(e,n),Fi.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(r,a);}},repeatedUnion:function repeatedUnion(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i);}return e;},unionSafe:function unionSafe(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e);},unionActual:function unionActual(t,e){return Fi.restrictToPolygons(t.union(e));},unionTree:function unionTree(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e);},unionUsingEnvelopeIntersection:function unionUsingEnvelopeIntersection(t,e,n){var i=new _(),r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),ki.combine(i);},bufferUnion:function bufferUnion(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i;}if(2===arguments.length){var r=arguments[0],o=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,o]),i=n.buffer(0);return i;}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Fi;}}),Fi.restrictToPolygons=function(t){if(Lr(t,St))return t;var e=Se.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon($t.toPolygonArray(e));},Fi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e);},Fi.union=function(t){return new Fi(t).union();},Fi.STRTREE_NODE_CAPACITY=4,Tr(Bi.prototype,{unionNoOpt:function unionNoOpt(t){var e=this.geomFact.createPoint();return Ai.overlayOp(t,e,Ti.UNION);},unionWithNull:function unionWithNull(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e);},extract:function extract(){if(Lr(arguments[0],p))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n);}else if(arguments[0]instanceof D){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),Di.extract(i,D.SORTINDEX_POLYGON,this.polygons),Di.extract(i,D.SORTINDEX_LINESTRING,this.lines),Di.extract(i,D.SORTINDEX_POINT,this.points);}},union:function union(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e);}var n=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(i);}var r=null;this.polygons.size()>0&&(r=Fi.union(this.polygons));var o=this.unionWithNull(n,r),a=null;return a=null===t?o:null===o?t:Ri.union(t,o),null===a?this.geomFact.createGeometryCollection():a;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Bi;}}),Bi.union=function(){if(1===arguments.length){if(Lr(arguments[0],p)){var t=arguments[0],e=new Bi(t);return e.union();}if(arguments[0]instanceof D){var n=arguments[0],e=new Bi(n);return e.union();}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new Bi(i,r);return e.union();}},Tr(ji.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ji;}}),ji.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy();}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ai.overlayOp(t,e,Ti.UNION);},Tr(Ui.prototype,{addEndpoints:function addEndpoints(){if(arguments[0]instanceof D){var t=arguments[0];if(t instanceof xt)this.addEndpoints(t.getCoordinates());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++){this.addEndpoints(e.getGeometryN(n));}}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1]);}},getInteriorPoint:function getInteriorPoint(){return this.interiorPoint;},addInterior:function addInterior(){if(arguments[0]instanceof D){var t=arguments[0];if(t instanceof xt)this.addInterior(t.getCoordinates());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++){this.addInterior(e.getGeometryN(n));}}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++){this.add(i[n]);}},add:function add(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new h(t),this.minDistance=e);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ui;}}),Tr(zi.prototype,{isSimpleMultiPoint:function isSimpleMultiPoint(t){if(t.isEmpty())return!0;for(var e=new rt(),n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r);}return!0;},isSimplePolygonal:function isSimplePolygonal(t){for(var e=Oe.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1;}return!0;},hasClosedEndpointIntersection:function hasClosedEndpointIntersection(t){for(var e=new et(),n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var a=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,a,r);}for(var n=e.values().iterator();n.hasNext();){var s=n.next();if(s.isClosed&&2!==s.degree)return this.nonSimpleLocation=s.getCoordinate(),!0;}return!1;},getNonSimpleLocation:function getNonSimpleLocation(){return this.nonSimpleLocation;},isSimpleLinearGeometry:function isSimpleLinearGeometry(t){if(t.isEmpty())return!0;var e=new Pn(0,t),n=new ie(),i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)));},hasNonEndpointIntersection:function hasNonEndpointIntersection(t){for(var e=t.getEdgeIterator();e.hasNext();){for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0;}}return!1;},addEndpoint:function addEndpoint(t,e,n){var i=t.get(e);null===i&&(i=new Gi(e),t.put(e,i)),i.addEndpoint(n);},computeSimple:function computeSimple(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof xt?this.isSimpleLinearGeometry(t):t instanceof ct?this.isSimpleLinearGeometry(t):t instanceof Ct?this.isSimpleMultiPoint(t):Lr(t,St)?this.isSimplePolygonal(t):!(t instanceof lt)||this.isSimpleGeometryCollection(t));},isSimple:function isSimple(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom);},isSimpleGeometryCollection:function isSimpleGeometryCollection(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1;}return!0;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return zi;}}),Tr(Gi.prototype,{addEndpoint:function addEndpoint(t){this.degree++,this.isClosed|=t;},getCoordinate:function getCoordinate(){return this.pt;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Gi;}}),zi.EndpointInfo=Gi,Tr(Vi.prototype,{getEndCapStyle:function getEndCapStyle(){return this.endCapStyle;},isSingleSided:function isSingleSided(){return this._isSingleSided;},setQuadrantSegments:function setQuadrantSegments(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Vi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Vi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Vi.JOIN_ROUND&&(this.quadrantSegments=Vi.DEFAULT_QUADRANT_SEGMENTS);},getJoinStyle:function getJoinStyle(){return this.joinStyle;},setJoinStyle:function setJoinStyle(t){this.joinStyle=t;},setSimplifyFactor:function setSimplifyFactor(t){this.simplifyFactor=t<0?0:t;},getSimplifyFactor:function getSimplifyFactor(){return this.simplifyFactor;},getQuadrantSegments:function getQuadrantSegments(){return this.quadrantSegments;},setEndCapStyle:function setEndCapStyle(t){this.endCapStyle=t;},getMitreLimit:function getMitreLimit(){return this.mitreLimit;},setMitreLimit:function setMitreLimit(t){this.mitreLimit=t;},setSingleSided:function setSingleSided(t){this._isSingleSided=t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Vi;}}),Vi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2);},Vi.CAP_ROUND=1,Vi.CAP_FLAT=2,Vi.CAP_SQUARE=3,Vi.JOIN_ROUND=1,Vi.JOIN_MITRE=2,Vi.JOIN_BEVEL=3,Vi.DEFAULT_QUADRANT_SEGMENTS=8,Vi.DEFAULT_MITRE_LIMIT=5,Vi.DEFAULT_SIMPLIFY_FACTOR=.01,Xi.prototype=new Error(),Xi.prototype.name="EmptyStackException",Hi.prototype=new v(),Hi.prototype.add=function(t){return this.array_.push(t),!0;},Hi.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException();return this.array_[t];},Hi.prototype.push=function(t){return this.array_.push(t),t;},Hi.prototype.pop=function(t){if(0===this.array_.length)throw new Xi();return this.array_.pop();},Hi.prototype.peek=function(){if(0===this.array_.length)throw new Xi();return this.array_[this.array_.length-1];},Hi.prototype.empty=function(){return 0===this.array_.length;},Hi.prototype.isEmpty=function(){return this.empty();},Hi.prototype.search=function(t){return this.array_.indexOf(t);},Hi.prototype.size=function(){return this.array_.length;},Hi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++){t.push(this.array_[e]);}return t;},Tr(qi.prototype,{getCoordinate:function getCoordinate(){return this.minCoord;},getRightmostSide:function getRightmostSide(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n;},findRightmostEdgeAtVertex:function findRightmostEdgeAtVertex(){var t=this.minDe.getEdge().getCoordinates();c.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=ae.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===ae.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===ae.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1);},getRightmostSideOfSegment:function getRightmostSideOfSegment(t,e){var n=t.getEdge(),i=n.getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=Ae.LEFT;return i[e].y<i[e+1].y&&(r=Ae.RIGHT),r;},getEdge:function getEdge(){return this.orientedDe;},checkForRightmostCoordinate:function checkForRightmostCoordinate(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++){(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n]);}},findRightmostEdgeAtNode:function findRightmostEdgeAtNode(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1);},findEdge:function findEdge(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n);}c.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===Ae.LEFT&&(this.orientedDe=this.minDe.getSym());},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return qi;}}),Yi.prototype.addLast=function(t){this.array_.push(t);},Yi.prototype.removeFirst=function(){return this.array_.shift();},Yi.prototype.isEmpty=function(){return 0===this.array_.length;},Tr(Wi.prototype,{clearVisitedEdges:function clearVisitedEdges(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1);}},getRightmostCoordinate:function getRightmostCoordinate(){return this.rightMostCoord;},computeNodeDepth:function computeNodeDepth(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break;}}if(null===e)throw new Le("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i);}},computeDepth:function computeDepth(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Ae.RIGHT,t),this.copySymDepths(e),this.computeDepths(e);},create:function create(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate();},findResultEdges:function findResultEdges(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ae.RIGHT)>=1&&e.getDepth(Ae.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0);}},computeDepths:function computeDepths(t){var e=new Z(),n=new Yi(),i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next(),s=a.getSym();if(!s.isVisited()){var u=s.getNode();e.contains(u)||(n.addLast(u),e.add(u));}}}},compareTo:function compareTo(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0;},getEnvelope:function getEnvelope(){if(null===this.env){for(var t=new x(),e=this.dirEdgeList.iterator();e.hasNext();){for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++){t.expandToInclude(i[r]);}}this.env=t;}return this.env;},addReachable:function addReachable(t){var e=new Hi();for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e);}},copySymDepths:function copySymDepths(t){var e=t.getSym();e.setDepth(Ae.LEFT,t.getDepth(Ae.RIGHT)),e.setDepth(Ae.RIGHT,t.getDepth(Ae.LEFT));},add:function add(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),o=r.getNode();o.isVisited()||e.push(o);}},getNodes:function getNodes(){return this.nodes;},getDirectedEdges:function getDirectedEdges(){return this.dirEdgeList;},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return Wi;}}),Tr(Zi.prototype,{isDeletable:function isDeletable(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],a=this.inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i);},deleteShallowConcavities:function deleteShallowConcavities(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Zi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e);}return i;},isShallowConcavity:function isShallowConcavity(t,e,n,i){return ae.computeOrientation(t,e,n)===this.angleOrientation&&ae.distancePointLine(e,t,n)<i;},isShallowSampled:function isShallowSampled(t,e,n,i,r){var o=Math.trunc((i-n)/Zi.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o){if(!this.isShallow(t,e,this.inputLine[a],r))return!1;}return!0;},isConcave:function isConcave(t,e,n){return ae.computeOrientation(t,e,n)===this.angleOrientation;},simplify:function simplify(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=ae.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities();}while(e);return this.collapseLine();},findNextNonDeletedIndex:function findNextNonDeletedIndex(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Zi.DELETE;){e++;}return e;},isShallow:function isShallow(t,e,n,i){return ae.distancePointLine(e,t,n)<i;},collapseLine:function collapseLine(){for(var t=new b(),e=0;e<this.inputLine.length;e++){this.isDeleted[e]!==Zi.DELETE&&t.add(this.inputLine[e]);}return t.toCoordinateArray();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Zi;}}),Zi.simplify=function(t,e){return new Zi(t).simplify(e);},Zi.INIT=0,Zi.DELETE=1,Zi.KEEP=1,Zi.NUM_PTS_TO_CHECK=10,Tr(Ji.prototype,{getCoordinates:function getCoordinates(){return this.ptList.toArray(Ji.COORDINATE_ARRAY_TYPE);},setPrecisionModel:function setPrecisionModel(t){this.precisionModel=t;},addPt:function addPt(t){var e=new h(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e);},reverse:function reverse(){},addPts:function addPts(t,e){if(e)for(var n=0;n<t.length;n++){this.addPt(t[n]);}else for(var n=t.length-1;n>=0;n--){this.addPt(t[n]);}},isRedundant:function isRedundant(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance;},toString:function toString(){return new $t().createLineString(this.getCoordinates()).toString();},closeRing:function closeRing(){if(this.ptList.size()<1)return null;var t=new h(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t);},setMinimumVertexDistance:function setMinimumVertexDistance(t){this.minimimVertexDistance=t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ji;}}),Ji.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),Tr(Ki.prototype,{interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ki;}}),Ki.toDegrees=function(t){return 180*t/Math.PI;},Ki.normalize=function(t){for(;t>Math.PI;){t-=Ki.PI_TIMES_2;}for(;t<=-Math.PI;){t+=Ki.PI_TIMES_2;}return t;},Ki.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x);}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i);}},Ki.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0;},Ki.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0;},Ki.interiorAngle=function(t,e,n){var i=Ki.angle(e,t),r=Ki.angle(e,n);return Math.abs(r-i);},Ki.normalizePositive=function(t){if(t<0){for(;t<0;){t+=Ki.PI_TIMES_2;}t>=Ki.PI_TIMES_2&&(t=0);}else{for(;t>=Ki.PI_TIMES_2;){t-=Ki.PI_TIMES_2;}t<0&&(t=0);}return t;},Ki.angleBetween=function(t,e,n){var i=Ki.angle(e,t),r=Ki.angle(e,n);return Ki.diff(i,r);},Ki.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n;},Ki.toRadians=function(t){return t*Math.PI/180;},Ki.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ki.COUNTERCLOCKWISE:n<0?Ki.CLOCKWISE:Ki.NONE;},Ki.angleBetweenOriented=function(t,e,n){var i=Ki.angle(e,t),r=Ki.angle(e,n),o=r-i;return o<=-Math.PI?o+Ki.PI_TIMES_2:o>Math.PI?o-Ki.PI_TIMES_2:o;},Ki.PI_TIMES_2=2*Math.PI,Ki.PI_OVER_2=Math.PI/2,Ki.PI_OVER_4=Math.PI/4,Ki.COUNTERCLOCKWISE=ae.COUNTERCLOCKWISE,Ki.CLOCKWISE=ae.CLOCKWISE,Ki.NONE=ae.COLLINEAR,Tr(Qi.prototype,{addNextSegment:function addNextSegment(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=ae.computeOrientation(this.s0,this.s1,this.s2),i=n===ae.CLOCKWISE&&this.side===Ae.LEFT||n===ae.COUNTERCLOCKWISE&&this.side===Ae.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e);},addLineEndCap:function addLineEndCap(t,e){var n=new se(t,e),i=new se();this.computeOffsetSegment(n,Ae.LEFT,this.distance,i);var r=new se();this.computeOffsetSegment(n,Ae.RIGHT,this.distance,r);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this.bufParams.getEndCapStyle()){case Vi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ae.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Vi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Vi.CAP_SQUARE:var u=new h();u.x=Math.abs(this.distance)*Math.cos(s),u.y=Math.abs(this.distance)*Math.sin(s);var l=new h(i.p1.x+u.x,i.p1.y+u.y),c=new h(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c);}},getCoordinates:function getCoordinates(){return this.segList.getCoordinates();},addMitreJoin:function addMitreJoin(t,e,n,i){var r=!0,o=null;try{o=N.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this.bufParams.getMitreLimit()&&(r=!1);}catch(t){if(!(t instanceof E))throw t;o=new h(0,0),r=!1;}finally{}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit());},addFilletCorner:function addFilletCorner(t,e,n,i,r){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===ae.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,s,c,i,r),this.segList.addPt(n);},addOutsideTurn:function addOutsideTurn(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Qi.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Vi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Vi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)));},createSquare:function createSquare(t){this.segList.addPt(new h(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new h(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new h(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new h(t.x-this.distance,t.y+this.distance)),this.segList.closeRing();},addSegments:function addSegments(t,e){this.segList.addPts(t,e);},addFirstSegment:function addFirstSegment(){this.segList.addPt(this.offset1.p0);},addLastSegment:function addLastSegment(){this.segList.addPt(this.offset1.p1);},initSideSegments:function initSideSegments(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1);},addLimitedMitreJoin:function addLimitedMitreJoin(t,e,n,i){var r=this.seg0.p1,o=Ki.angle(r,this.seg0.p0),a=(Ki.angle(r,this.seg1.p1),Ki.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),s=a/2,u=Ki.normalize(o+s),l=Ki.normalize(u+Math.PI),c=i*n,f=c*Math.abs(Math.sin(s)),d=n-f,p=r.x+c*Math.cos(l),g=r.y+c*Math.sin(l),v=new h(p,g),m=new se(r,v),y=m.pointAlongOffset(1,d),_=m.pointAlongOffset(1,-d);this.side===Ae.LEFT?(this.segList.addPt(y),this.segList.addPt(_)):(this.segList.addPt(_),this.segList.addPt(y));},computeOffsetSegment:function computeOffsetSegment(t,e,n,i){var r=e===Ae.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=r*n*o/s,l=r*n*a/s;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u;},addFilletArc:function addFilletArc(t,e,n,i,r){var o=i===ae.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this.filletAngleQuantum+.5);if(s<1)return null;var u=null,l=null;u=0,l=a/s;for(var c=u,f=new h();c<a;){var d=e+o*c;f.x=t.x+r*Math.cos(d),f.y=t.y+r*Math.sin(d),this.segList.addPt(f),c+=l;}},addInsideTurn:function addInsideTurn(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Qi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new h((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new h((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i);}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0);}},createCircle:function createCircle(t){var e=new h(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing();},addBevelJoin:function addBevelJoin(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0);},init:function init(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ji(),this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Qi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR);},addCollinear:function addCollinear(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===Vi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Vi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,ae.CLOCKWISE,this.distance));},closeRing:function closeRing(){this.segList.closeRing();},hasNarrowConcaveAngle:function hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Qi;}}),Qi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Qi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Qi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Qi.MAX_CLOSING_SEG_LEN_FACTOR=80,Tr($i.prototype,{getOffsetCurve:function getOffsetCurve(t,e){if(this.distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&V.reverse(o),o;},computeSingleSidedBufferCurve:function computeSingleSidedBufferCurve(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Zi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ae.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--){n.addNextSegment(r[a],!0);}}else{n.addSegments(t,!1);var s=Zi.simplify(t,i),u=s.length-1;n.initSideSegments(s[0],s[1],Ae.LEFT),n.addFirstSegment();for(var a=2;a<=u;a++){n.addNextSegment(s[a],!0);}}n.addLastSegment(),n.closeRing();},computeRingBufferCurve:function computeRingBufferCurve(t,e,n){var i=this.simplifyTolerance(this.distance);e===Ae.RIGHT&&(i=-i);var r=Zi.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s);}n.closeRing();},computeLineBufferCurve:function computeLineBufferCurve(t,e){var n=this.simplifyTolerance(this.distance),i=Zi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ae.LEFT);for(var o=2;o<=r;o++){e.addNextSegment(i[o],!0);}e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Zi.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ae.LEFT);for(var o=s-2;o>=0;o--){e.addNextSegment(a[o],!0);}e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing();},computePointCurve:function computePointCurve(t,e){switch(this.bufParams.getEndCapStyle()){case Vi.CAP_ROUND:e.createCircle(t);break;case Vi.CAP_SQUARE:e.createSquare(t);}},getLineCurve:function getLineCurve(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i);}else this.computeLineBufferCurve(t,i);return i.getCoordinates();},getBufferParameters:function getBufferParameters(){return this.bufParams;},simplifyTolerance:function simplifyTolerance(t){return t*this.bufParams.getSimplifyFactor();},getRingCurve:function getRingCurve(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return $i.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates();},computeOffsetCurve:function computeOffsetCurve(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Zi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ae.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--){n.addNextSegment(r[a],!0);}}else{var s=Zi.simplify(t,i),u=s.length-1;n.initSideSegments(s[0],s[1],Ae.LEFT),n.addFirstSegment();for(var a=2;a<=u;a++){n.addNextSegment(s[a],!0);}}n.addLastSegment();},getSegGen:function getSegGen(t){return new Qi(this.precisionModel,this.bufParams,t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return $i;}}),$i.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++){e[n]=new h(t[n]);}return e;},Tr(tr.prototype,{findStabbedSegments:function findStabbedSegments(){if(1===arguments.length){for(var t=arguments[0],e=new _(),n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e);}return e;}if(3===arguments.length)if(Lr(arguments[2],v)&&arguments[0]instanceof h&&arguments[1]instanceof Ze)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),n=0;n<u.length-1;n++){this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var l=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(l<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||ae.computeOrientation(this.seg.p0,this.seg.p1,o)===ae.RIGHT)){var c=a.getDepth(Ae.LEFT);this.seg.p0.equals(u[n])||(c=a.getDepth(Ae.RIGHT));var f=new er(this.seg,c);s.add(f);}}else if(Lr(arguments[2],v)&&arguments[0]instanceof h&&Lr(arguments[1],v))for(var d=arguments[0],p=arguments[1],g=arguments[2],n=p.iterator();n.hasNext();){var m=n.next();m.isForward()&&this.findStabbedSegments(d,m,g);}},getDepth:function getDepth(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Jr.min(e).leftDepth;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return tr;}}),Tr(er.prototype,{compareTo:function compareTo(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(e.upwardSeg));},compareX:function compareX(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1);},toString:function toString(){return this.upwardSeg.toString();},interfaces_:function interfaces_(){return[r];},getClass:function getClass(){return er;}}),tr.DepthSegment=er,Tr(nr.prototype,{area:function area(){return nr.area(this.p0,this.p1,this.p2);},signedArea:function signedArea(){return nr.signedArea(this.p0,this.p1,this.p2);},interpolateZ:function interpolateZ(t){if(null===t)throw new n("Supplied point is null.");return nr.interpolateZ(t,this.p0,this.p1,this.p2);},longestSideLength:function longestSideLength(){return nr.longestSideLength(this.p0,this.p1,this.p2);},isAcute:function isAcute(){return nr.isAcute(this.p0,this.p1,this.p2);},circumcentre:function circumcentre(){return nr.circumcentre(this.p0,this.p1,this.p2);},area3D:function area3D(){return nr.area3D(this.p0,this.p1,this.p2);},centroid:function centroid(){return nr.centroid(this.p0,this.p1,this.p2);},inCentre:function inCentre(){return nr.inCentre(this.p0,this.p1,this.p2);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return nr;}}),nr.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2);},nr.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2;},nr.det=function(t,e,n,i){return t*i-e*n;},nr.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,u=n.y-o,l=i.y-o,c=a*l-s*u,h=t.x-r,f=t.y-o,d=(l*h-s*f)/c,p=(-u*h+a*f)/c;return e.z+d*(n.z-e.z)+p*(i.z-e.z);},nr.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a;},nr.isAcute=function(t,e,n){return!!Ki.isAcute(t,e,n)&&!!Ki.isAcute(e,n,t)&&!!Ki.isAcute(n,t,e);},nr.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,u=e.y-r,l=2*nr.det(o,a,s,u);return new h(i-nr.det(a,o*o+a*a,u,s*s+u*u)/l,r+nr.det(o,o*o+a*a,s,s*s+u*u)/l);},nr.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y;return new N(new N(t.x+n/2,t.y+i/2,1),new N(t.x-i+n/2,t.y+n+i/2,1));},nr.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),o=i/(i+r),a=n.x-t.x,s=n.y-t.y;return new h(t.x+o*a,t.y+o*s);},nr.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=r*u-o*s,c=o*a-i*u,h=i*s-r*a,f=l*l+c*c+h*h;return Math.sqrt(f)/2;},nr.centroid=function(t,e,n){return new h((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3);},nr.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o;return new h((i*t.x+r*e.x+o*n.x)/a,(i*t.y+r*e.y+o*n.y)/a);},Tr(ir.prototype,{addPoint:function addPoint(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR);},addPolygon:function addPolygon(t){var e=this.distance,n=Ae.LEFT;this.distance<0&&(e=-this.distance,n=Ae.RIGHT);var i=t.getExteriorRing(),r=V.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,S.EXTERIOR,S.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=V.removeRepeatedPoints(a.getCoordinates());this.distance>0&&this.isErodedCompletely(a,-this.distance)||this.addPolygonRing(s,e,Ae.opposite(n),S.INTERIOR,S.EXTERIOR);}},isTriangleErodedCompletely:function isTriangleErodedCompletely(t,e){var n=new nr(t[0],t[1],t[2]),i=n.inCentre();return ae.distancePointLine(i,n.p0,n.p1)<Math.abs(e);},addLineString:function addLineString(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=V.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR);},addCurve:function addCurve(t,e,n){if(null===t||t.length<2)return null;var i=new di(t,new ke(0,S.BOUNDARY,e,n));this.curveList.add(i);},getCurves:function getCurves(){return this.add(this.inputGeom),this.curveList;},addPolygonRing:function addPolygonRing(t,e,n,i,r){if(0===e&&t.length<It.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=It.MINIMUM_VALID_SIZE&&ae.isCCW(t)&&(o=r,a=i,n=Ae.opposite(n));var s=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a);},add:function add(t){if(t.isEmpty())return null;if(t instanceof Mt)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof Et)this.addPoint(t);else if(t instanceof Ct)this.addCollection(t);else if(t instanceof ct)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else{if(!(t instanceof lt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t);}},isErodedCompletely:function isErodedCompletely(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r;},addCollection:function addCollection(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ir;}}),Tr(rr.prototype,{isTrivialIntersection:function isTrivialIntersection(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(rr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0;}}return!1;},getProperIntersectionPoint:function getProperIntersectionPoint(){return this.properIntersectionPoint;},hasProperInteriorIntersection:function hasProperInteriorIntersection(){return this.hasProperInterior;},getLineIntersector:function getLineIntersector(){return this.li;},hasProperIntersection:function hasProperIntersection(){return this.hasProper;},processIntersections:function processIntersections(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)));},hasIntersection:function hasIntersection(){return this._hasIntersection;},isDone:function isDone(){return!1;},hasInteriorIntersection:function hasInteriorIntersection(){return this.hasInterior;},interfaces_:function interfaces_(){return[_i];},getClass:function getClass(){return rr;}}),rr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e);},Tr(or.prototype,{setWorkingPrecisionModel:function setWorkingPrecisionModel(t){this.workingPrecisionModel=t;},insertUniqueEdge:function insertUniqueEdge(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel()),i.flip()),n.merge(i);var r=or.depthDelta(i),o=e.getDepthDelta(),a=o+r;e.setDepthDelta(a);}else this.edgeList.add(t),t.setDepthDelta(or.depthDelta(t.getLabel()));},buildSubgraphs:function buildSubgraphs(t,e){for(var n=new _(),i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new tr(n),s=a.getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes());}},createSubgraphs:function createSubgraphs(t){for(var e=new _(),n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Wi();r.create(i),e.add(r);}}return Jr.sort(e,Jr.reverseOrder()),e;},createEmptyResultGeometry:function createEmptyResultGeometry(){return this.geomFact.createPolygon();},getNoder:function getNoder(t){if(null!==this.workingNoder)return this.workingNoder;var e=new mi(),n=new ie();return n.setPrecisionModel(t),e.setSegmentIntersector(new rr(n)),e;},buffer:function buffer(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new $i(n,this.bufParams),r=new ir(t,e,i),o=r.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new Je(new qe()),this.graph.addEdges(this.edgeList.getEdges());var a=this.createSubgraphs(this.graph),s=new Ei(this.geomFact);this.buildSubgraphs(a,s);var u=s.getPolygons();return u.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(u);},computeNodedEdges:function computeNodedEdges(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var o=r.next(),a=o.getCoordinates();if(2!==a.length||!a[0].equals2D(a[1])){var s=o.getData(),u=new Tn(o.getCoordinates(),new ke(s));this.insertUniqueEdge(u);}}},setNoder:function setNoder(t){this.workingNoder=t;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return or;}}),or.depthDelta=function(t){var e=t.getLocation(0,Ae.LEFT),n=t.getLocation(0,Ae.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0;},or.convertSegStrings=function(t){for(var e=new $t(),n=new _();t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r);}return e.buildGeometry(n);},Tr(ar.prototype,{rescale:function rescale(){if(Lr(arguments[0],p))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates());}else if(arguments[0]instanceof Array){var i=arguments[0];2===i.length&&(new h(i[0]),new h(i[1]));for(var e=0;e<i.length;e++){i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;}2===i.length&&i[0].equals2D(i[1])&&L.out.println(i);}},scale:function scale(){if(Lr(arguments[0],p)){for(var t=arguments[0],e=new _(),n=t.iterator();n.hasNext();){var i=n.next();e.add(new di(this.scale(i.getCoordinates()),i.getData()));}return e;}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),n=0;n<r.length;n++){o[n]=new h(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);}return V.removeRepeatedPoints(o);}},isIntegerPrecision:function isIntegerPrecision(){return 1===this.scaleFactor;},getNodedSubstrings:function getNodedSubstrings(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t;},computeNodes:function computeNodes(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e);},interfaces_:function interfaces_(){return[gi];},getClass:function getClass(){return ar;}}),Tr(sr.prototype,{checkEndPtVertexIntersections:function checkEndPtVertexIntersections(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings);}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();){for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++){if(n[o].equals(i))throw new u("found endpt/interior pt intersection at index "+o+" :pt "+i);}}},checkInteriorIntersections:function checkInteriorIntersections(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i);}}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++){for(var c=0;c<s.length-1;c++){this.checkInteriorIntersections(r,l,o,c);}}else if(4===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3];if(h===d&&f===p)return null;var g=h.getCoordinates()[f],v=h.getCoordinates()[f+1],m=d.getCoordinates()[p],y=d.getCoordinates()[p+1];if(this.li.computeIntersection(g,v,m,y),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,g,v)||this.hasInteriorIntersection(this.li,m,y)))throw new u("found non-noded intersection at "+g+"-"+v+" and "+m+"-"+y);}},checkValid:function checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses();},checkCollapses:function checkCollapses(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e);}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++){this.checkCollapse(i[t],i[t+1],i[t+2]);}},hasInteriorIntersection:function hasInteriorIntersection(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0;}return!1;},checkCollapse:function checkCollapse(t,e,n){if(t.equals(n))throw new u("found non-noded collapse at "+sr.fact.createLineString([t,e,n]));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return sr;}}),sr.fact=new $t(),Tr(ur.prototype,{intersectsScaled:function intersectsScaled(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return c.isTrue(!(a&&s),"Found bad envelope test"),s;},initCorners:function initCorners(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new h(this.maxx,this.maxy),this.corner[1]=new h(this.minx,this.maxy),this.corner[2]=new h(this.minx,this.miny),this.corner[3]=new h(this.maxx,this.miny);},intersects:function intersects(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled));},scale:function scale(t){return Math.round(t*this.scaleFactor);},getCoordinate:function getCoordinate(){return this.originalPt;},copyScaled:function copyScaled(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y);},getSafeEnvelope:function getSafeEnvelope(){if(null===this.safeEnv){var t=ur.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new x(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t);}return this.safeEnv;},intersectsPixelClosure:function intersectsPixelClosure(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))));},intersectsToleranceSquare:function intersectsToleranceSquare(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))));},addSnappedNode:function addSnappedNode(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return ur;}}),ur.SAFE_ENV_EXPANSION_FACTOR=.75,Tr(lr.prototype,{snap:function snap(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1);}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new cr(e,n,i);return this.index.query(r,{interfaces_:function interfaces_(){return[ve];},visitItem:function visitItem(t){t.select(r,o);}}),o.isNodeAdded();}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return lr;}}),Pr(cr,Qe),Tr(cr.prototype,{isNodeAdded:function isNodeAdded(){return this._isNodeAdded;},select:function select(){if(2!==arguments.length)return Qe.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return cr;}}),lr.HotPixelSnapAction=cr,Tr(hr.prototype,{processIntersections:function processIntersections(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,a,s),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++){this.interiorIntersections.add(this.li.getIntersection(u));}t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1);}},isDone:function isDone(){return!1;},getInteriorIntersections:function getInteriorIntersections(){return this.interiorIntersections;},interfaces_:function interfaces_(){return[_i];},getClass:function getClass(){return hr;}}),Tr(fr.prototype,{checkCorrectness:function checkCorrectness(t){var e=di.getNodedSubstrings(t),n=new sr(e);try{n.checkValid();}catch(t){if(!(t instanceof w))throw t;t.printStackTrace();}finally{}},getNodedSubstrings:function getNodedSubstrings(){return di.getNodedSubstrings(this.nodedSegStrings);},snapRound:function snapRound(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t);},findInteriorIntersections:function findInteriorIntersections(t,e){var n=new hr(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections();},computeVertexSnaps:function computeVertexSnaps(){if(Lr(arguments[0],p))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n);}else if(arguments[0]instanceof di)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var a=new ur(r[o],this.scaleFactor,this.li),s=this.pointSnapper.snap(a,i,o);s&&i.addIntersection(r[o],o);}},computeNodes:function computeNodes(t){this.nodedSegStrings=t,this.noder=new mi(),this.pointSnapper=new lr(this.noder.getIndex()),this.snapRound(t,this.li);},computeIntersectionSnaps:function computeIntersectionSnaps(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ur(n,this.scaleFactor,this.li);this.pointSnapper.snap(i);}},interfaces_:function interfaces_(){return[gi];},getClass:function getClass(){return fr;}}),Tr(dr.prototype,{bufferFixedPrecision:function bufferFixedPrecision(t){var e=new ar(new fr(new Kt(1)),t.getScale()),n=new or(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance);},bufferReducedPrecision:function bufferReducedPrecision(){if(0===arguments.length){for(var t=dr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t);}catch(t){if(!(t instanceof Le))throw t;this.saveException=t;}finally{}if(null!==this.resultGeometry)return null;}throw this.saveException;}if(1===arguments.length){var e=arguments[0],n=dr.precisionScaleFactor(this.argGeom,this.distance,e),i=new Kt(n);this.bufferFixedPrecision(i);}},computeGeometry:function computeGeometry(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Kt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision();},setQuadrantSegments:function setQuadrantSegments(t){this.bufParams.setQuadrantSegments(t);},bufferOriginalPrecision:function bufferOriginalPrecision(){try{var t=new or(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance);}catch(t){if(!(t instanceof u))throw t;this.saveException=t;}finally{}},getResultGeometry:function getResultGeometry(t){return this.distance=t,this.computeGeometry(),this.resultGeometry;},setEndCapStyle:function setEndCapStyle(t){this.bufParams.setEndCapStyle(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return dr;}}),dr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new dr(t),i=n.getResultGeometry(e);return i;}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof D&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],a=arguments[2],s=new dr(r);s.setQuadrantSegments(a);var i=s.getResultGeometry(o);return i;}if(arguments[2]instanceof Vi&&arguments[0]instanceof D&&"number"==typeof arguments[1]){var u=arguments[0],l=arguments[1],c=arguments[2],s=new dr(u,c),i=s.getResultGeometry(l);return i;}}else if(4===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],s=new dr(h);s.setQuadrantSegments(d),s.setEndCapStyle(p);var i=s.getResultGeometry(f);return i;}},dr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=M.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),o=e>0?e:0,a=r+2*o,s=Math.trunc(Math.log(a)/Math.log(10)+1),u=n-s;return Math.pow(10,u);},dr.CAP_ROUND=Vi.CAP_ROUND,dr.CAP_BUTT=Vi.CAP_FLAT,dr.CAP_FLAT=Vi.CAP_FLAT,dr.CAP_SQUARE=Vi.CAP_SQUARE,dr.MAX_PRECISION_DIGITS=12,Tr(pr.prototype,{filter:function filter(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t));},getCoordinates:function getCoordinates(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t);},interfaces_:function interfaces_(){return[F];},getClass:function getClass(){return pr;}}),pr.filterCoordinates=function(t){for(var e=new pr(),n=0;n<t.length;n++){e.filter(t[n]);}return e.getCoordinates();},Tr(gr.prototype,{preSort:function preSort(t){for(var e=null,n=1;n<t.length;n++){(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);}return ot.sort(t,1,t.length,new vr(t[0])),t;},computeOctRing:function computeOctRing(t){var e=this.computeOctPts(t),n=new b();return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray());},lineOrPolygon:function lineOrPolygon(t){if(t=this.cleanRing(t),3===t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null);},cleanRing:function cleanRing(t){c.equals(t[0],t[t.length-1]);for(var e=new _(),n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r);}e.add(t[t.length-1]);var a=new Array(e.size()).fill(null);return e.toArray(a);},isBetween:function isBetween(t,e,n){if(0!==ae.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0;}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0;}return!1;},reduce:function reduce(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new rt(),i=0;i<e.length;i++){n.add(e[i]);}for(var i=0;i<t.length;i++){ae.isPointInRing(t[i],e)||n.add(t[i]);}var r=V.toCoordinateArray(n);return r.length<3?this.padArray3(r):r;},getConvexHull:function getConvexHull(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i);},padArray3:function padArray3(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++){n<t.length?e[n]=t[n]:e[n]=t[0];}return e;},computeOctPts:function computeOctPts(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++){e[n]=t[0];}for(var i=1;i<t.length;i++){t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);}return e;},toCoordinateArray:function toCoordinateArray(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i;}return e;},grahamScan:function grahamScan(t){var e=null,n=new Hi();e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&ae.computeOrientation(n.peek(),e,t[i])>0;){e=n.pop();}e=n.push(e),e=n.push(t[i]);}return e=n.push(t[0]),n;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return gr;}}),gr.extractCoordinates=function(t){var e=new pr();return t.apply(e),e.getCoordinates();},Tr(vr.prototype,{compare:function compare(t,e){var n=t,i=e;return vr.polarCompare(this.origin,n,i);},interfaces_:function interfaces_(){return[a];},getClass:function getClass(){return vr;}}),vr.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,a=n.y-t.y,s=ae.computeOrientation(t,e,n);if(s===ae.COUNTERCLOCKWISE)return 1;if(s===ae.CLOCKWISE)return-1;var u=i*i+r*r,l=o*o+a*a;return u<l?-1:u>l?1:0;},gr.RadialComparator=vr,Tr(mr.prototype,{addPoint:function addPoint(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y;},setBasePoint:function setBasePoint(t){null===this.areaBasePt&&(this.areaBasePt=t);},addLineSegments:function addLineSegments(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o;}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0]);},addHole:function addHole(t){for(var e=ae.isCCW(t),n=0;n<t.length-1;n++){this.addTriangle(this.areaBasePt,t[n],t[n+1],e);}this.addLineSegments(t);},getCentroid:function getCentroid(){var t=new h();if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount;}return t;},addShell:function addShell(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!ae.isCCW(t),n=0;n<t.length-1;n++){this.addTriangle(this.areaBasePt,t[n],t[n+1],e);}this.addLineSegments(t);},addTriangle:function addTriangle(t,e,n,i){var r=i?1:-1;mr.centroid3(t,e,n,this.triangleCent3);var o=mr.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o;},add:function add(){if(arguments[0]instanceof Mt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++){this.addHole(t.getInteriorRingN(e).getCoordinates());}}else if(arguments[0]instanceof D){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Et)this.addPoint(n.getCoordinate());else if(n instanceof xt)this.addLineSegments(n.getCoordinates());else if(n instanceof Mt){var i=n;this.add(i);}else if(n instanceof lt)for(var r=n,e=0;e<r.getNumGeometries();e++){this.add(r.getGeometryN(e));}}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return mr;}}),mr.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y);},mr.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null;},mr.getCentroid=function(t){return new mr(t).getCentroid();},Tr(yr.prototype,{isIntersects:function isIntersects(){return!this.isDisjoint();},isCovers:function isCovers(){return(yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||yr.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||yr.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||yr.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.EXTERIOR][S.INTERIOR]===at.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===at.FALSE;},isCoveredBy:function isCoveredBy(){return(yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||yr.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||yr.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||yr.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))&&this.matrix[S.INTERIOR][S.EXTERIOR]===at.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===at.FALSE;},set:function set(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=at.toDimensionValue(t.charAt(e));}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.matrix[r][o]=a;}},isContains:function isContains(){return yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===at.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===at.FALSE;},setAtLeast:function setAtLeast(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,at.toDimensionValue(t.charAt(e)));}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this.matrix[r][o]<a&&(this.matrix[r][o]=a);}},setAtLeastIfValid:function setAtLeastIfValid(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n);},isWithin:function isWithin(){return yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===at.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===at.FALSE;},isTouches:function isTouches(t,e){return t>e?this.isTouches(e,t):(t===at.A&&e===at.A||t===at.L&&e===at.L||t===at.L&&e===at.A||t===at.P&&e===at.A||t===at.P&&e===at.L)&&this.matrix[S.INTERIOR][S.INTERIOR]===at.FALSE&&(yr.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||yr.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||yr.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]));},isOverlaps:function isOverlaps(t,e){return t===at.P&&e===at.P||t===at.A&&e===at.A?yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&yr.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&yr.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===at.L&&e===at.L&&1===this.matrix[S.INTERIOR][S.INTERIOR]&&yr.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&yr.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]);},isEquals:function isEquals(t,e){return t===e&&yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===at.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===at.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===at.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===at.FALSE;},toString:function toString(){for(var t=new C("123456789"),e=0;e<3;e++){for(var n=0;n<3;n++){t.setCharAt(3*e+n,at.toDimensionSymbol(this.matrix[e][n]));}}return t.toString();},setAll:function setAll(t){for(var e=0;e<3;e++){for(var n=0;n<3;n++){this.matrix[e][n]=t;}}},get:function get(t,e){return this.matrix[t][e];},transpose:function transpose(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this;},matches:function matches(t){if(9!==t.length)throw new n("Should be length 9: "+t);for(var e=0;e<3;e++){for(var i=0;i<3;i++){if(!yr.matches(this.matrix[e][i],t.charAt(3*e+i)))return!1;}}return!0;},add:function add(t){for(var e=0;e<3;e++){for(var n=0;n<3;n++){this.setAtLeast(e,n,t.get(e,n));}}},isDisjoint:function isDisjoint(){return this.matrix[S.INTERIOR][S.INTERIOR]===at.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===at.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===at.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===at.FALSE;},isCrosses:function isCrosses(t,e){return t===at.P&&e===at.L||t===at.P&&e===at.A||t===at.L&&e===at.A?yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&yr.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):t===at.L&&e===at.P||t===at.A&&e===at.P||t===at.A&&e===at.L?yr.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&yr.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===at.L&&e===at.L&&0===this.matrix[S.INTERIOR][S.INTERIOR];},interfaces_:function interfaces_(){return[o];},getClass:function getClass(){return yr;}}),yr.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===at.SYM_DONTCARE||e===at.SYM_TRUE&&(t>=0||t===at.TRUE)||e===at.SYM_FALSE&&t===at.FALSE||e===at.SYM_P&&t===at.P||e===at.SYM_L&&t===at.L||e===at.SYM_A&&t===at.A;}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return new yr(n).matches(i);}};yr.isTrue=function(t){return t>=0||t===at.TRUE;},Tr(_r.prototype,{insertEdgeEnds:function insertEdgeEnds(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n);}},computeProperIntersectionIM:function computeProperIntersectionIM(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF");},labelIsolatedEdges:function labelIsolatedEdges(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i));}},labelIsolatedEdge:function labelIsolatedEdge(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i);}else t.getLabel().setAllLocations(e,S.EXTERIOR);},computeIM:function computeIM(){var t=new yr();if(t.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new An(),i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t;},labelNodeEdges:function labelNodeEdges(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg);}},copyNodesAndLabels:function copyNodesAndLabels(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t));}},labelIntersectionNodes:function labelIntersectionNodes(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();){for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),a=this.nodes.find(o.coord);a.getLabel().isNull(t)&&(i===S.BOUNDARY?a.setLabelBoundary(t):a.setLabel(t,S.INTERIOR));}}},labelIsolatedNode:function labelIsolatedNode(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n);},computeIntersectionNodes:function computeIntersectionNodes(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();){for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),a=this.nodes.addNode(o.coord);i===S.BOUNDARY?a.setLabelBoundary(t):a.getLabel().isNull(t)&&a.setLabel(t,S.INTERIOR);}}},labelIsolatedNodes:function labelIsolatedNodes(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();c.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1));}},updateIM:function updateIM(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t);}for(var n=this.nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t);}},computeDisjointIM:function computeDisjointIM(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(S.INTERIOR,S.EXTERIOR,e.getDimension()),t.set(S.BOUNDARY,S.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(S.EXTERIOR,S.INTERIOR,n.getDimension()),t.set(S.EXTERIOR,S.BOUNDARY,n.getBoundaryDimension()));},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return _r;}}),Tr(br.prototype,{isContainedInBoundary:function isContainedInBoundary(t){if(t instanceof Mt)return!1;if(t instanceof Et)return this.isPointContainedInBoundary(t);if(t instanceof xt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1;}return!0;},isLineSegmentContainedInBoundary:function isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0;}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1;},isLineStringContainedInBoundary:function isLineStringContainedInBoundary(t){for(var e=t.getCoordinateSequence(),n=new h(),i=new h(),r=0;r<e.size()-1;r++){if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;}return!0;},isPointContainedInBoundary:function isPointContainedInBoundary(){if(arguments[0]instanceof Et){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate());}if(arguments[0]instanceof h){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY();}},contains:function contains(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t);},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return br;}}),br.contains=function(t,e){return new br(t).contains(e);},Tr(xr.prototype,{intersects:function intersects(t,e){var n=new x(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i;}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return xr;}}),Tr(wr.prototype,{applyTo:function applyTo(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof lt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null;}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return wr;}}),Tr(Er.prototype,{intersects:function intersects(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Sr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Mr(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Cr(this.rectangle);return i.applyTo(t),!!i.intersects();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Er;}}),Er.intersects=function(t,e){return new Er(t).intersects(e);},Pr(Sr,wr),Tr(Sr.prototype,{isDone:function isDone(){return this._intersects===!0;},visit:function visit(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null;},intersects:function intersects(){return this._intersects;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Sr;}}),Pr(Mr,wr),Tr(Mr.prototype,{isDone:function isDone(){return this._containsPoint===!0;},visit:function visit(t){if(!(t instanceof Mt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new h(),i=0;i<4;i++){if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&je.containsPointInPolygon(n,t))return this._containsPoint=!0,null;}},containsPoint:function containsPoint(){return this._containsPoint;},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Mr;}}),Pr(Cr,wr),Tr(Cr.prototype,{intersects:function intersects(){return this.hasIntersection;},isDone:function isDone(){return this.hasIntersection===!0;},visit:function visit(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Oe.getLines(t);this.checkIntersectionWithLineStrings(n);},checkIntersectionWithLineStrings:function checkIntersectionWithLineStrings(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null;}},checkIntersectionWithSegments:function checkIntersectionWithSegments(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++){if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null;}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Cr;}}),Pr(Ir,Ci),Tr(Ir.prototype,{getIntersectionMatrix:function getIntersectionMatrix(){return this._relate.computeIM();},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Ir;}}),Ir.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Ir.relate(t,e).isCovers());},Ir.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Er.intersects(t,e):e.isRectangle()?Er.intersects(e,t):Ir.relate(t,e).isIntersects());},Ir.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Ir.relate(t,e).isTouches(t.getDimension(),e.getDimension());},Ir.within=function(t,e){return e.contains(t);},Ir.coveredBy=function(t,e){return Ir.covers(e,t);},Ir.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ir(t,e),i=n.getIntersectionMatrix();return i;}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof D&&arguments[1]instanceof D){var r=arguments[0],o=arguments[1],a=arguments[2];return Ir.relateWithCheck(r,o).matches(a);}if(Lr(arguments[2],B)&&arguments[0]instanceof D&&arguments[1]instanceof D){var s=arguments[0],u=arguments[1],l=arguments[2],n=new Ir(s,u,l),i=n.getIntersectionMatrix();return i;}}},Ir.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Ir.relate(t,e).isOverlaps(t.getDimension(),e.getDimension());},Ir.disjoint=function(t,e){return!t.intersects(e);},Ir.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Ir.relate(t,e);},Ir.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Ir.relate(t,e).isCrosses(t.getDimension(),e.getDimension());},Ir.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?br.contains(t,e):Ir.relate(t,e).isContains());},Tr(Or.prototype,{getInteriorPoint:function getInteriorPoint(){return this.interiorPoint;},add:function add(){if(arguments[0]instanceof D){var t=arguments[0];if(t instanceof Et)this.add(t.getCoordinate());else if(t instanceof lt)for(var e=t,n=0;n<e.getNumGeometries();n++){this.add(e.getGeometryN(n));}}else if(arguments[0]instanceof h){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new h(i),this.minDistance=r);}},interfaces_:function interfaces_(){return[];},getClass:function getClass(){return Or;}}),Tr(D.prototype,{equalsTopo:function equalsTopo(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Ir.relate(this,t).isEquals(this.getDimension(),t.getDimension());},union:function union(){if(0===arguments.length)return Bi.union(this);if(1===arguments.length){var t=arguments[0];return ji.union(this,t);}},isValid:function isValid(){return Jn.isValid(this);},intersection:function intersection(t){if(this.isEmpty()||t.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Pe.map(this,{interfaces_:function interfaces_(){return[MapOp];},map:function map(t){return t.intersection(e);}});}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Ai.overlayOp(this,t,Ti.INTERSECTION);},covers:function covers(t){return Ir.covers(this,t);},coveredBy:function coveredBy(t){return Ir.coveredBy(this,t);},touches:function touches(t){return Ir.touches(this,t);},intersects:function intersects(t){return Ir.intersects(this,t);},within:function within(t){return Ir.within(this,t);},overlaps:function overlaps(t){return Ir.overlaps(this,t);},disjoint:function disjoint(t){return Ir.disjoint(this,t);},crosses:function crosses(t){return Ir.crosses(this,t);},buffer:function buffer(){if(1===arguments.length){var t=arguments[0];return dr.bufferOp(this,t);}if(2===arguments.length){var e=arguments[0],n=arguments[1];return dr.bufferOp(this,e,n);}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return dr.bufferOp(this,i,r,o);}},convexHull:function convexHull(){return new gr(this).getConvexHull();},relate:function relate(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++){e[n]=arguments[n];}return Ir.relate.apply(Ir,[this].concat(e));},getCentroid:function getCentroid(){if(this.isEmpty())return this.factory.createPoint();var t=mr.getCentroid(this);return this.createPointFromInternalCoord(t,this);},getInteriorPoint:function getInteriorPoint(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new Or(this);t=n.getInteriorPoint();}else if(1===e){var n=new Ui(this);t=n.getInteriorPoint();}else{var n=new Li(this);t=n.getInteriorPoint();}return this.createPointFromInternalCoord(t,this);},symDifference:function symDifference(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy();}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Ai.overlayOp(this,t,Ti.SYMDIFFERENCE);},createPointFromInternalCoord:function createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t);},toText:function toText(){return new ee().write(this);},toString:function toString(){this.toText();},contains:function contains(t){return Ir.contains(this,t);},difference:function difference(t){return this.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Ai.overlayOp(this,t,Ti.DIFFERENCE));},isSimple:function isSimple(){return new zi(this).isSimple();},isWithinDistance:function isWithinDistance(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&Te.isWithinDistance(this,t,e);},distance:function distance(t){return Te.distance(this,t);},isEquivalentClass:function isEquivalentClass(t){return this.getClass()===t.getClass();}}),t.version="1.4.0 (1ba5f4e)",t.geom=Vr,t.index=Hr,t.io=Zr,t.operation=Qr,Object.defineProperty(t,"__esModule",{value:!0});});},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(38),s=i(a),u=n(120),l=i(u),c=n(15),h=function(){function t(){r(this,t),this._emitter=new s.default(),this.id=l.default.generate();}return o(t,[{key:"on",value:function value(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++){e[n]=arguments[n];}if(e.length<2)return this;for(var i=e.pop(),r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;this._emitter.on(u,i);}return this;}},{key:"once",value:function value(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++){e[n]=arguments[n];}if(e.length<2)return this;for(var i=e.pop(),r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;this._emitter.once(u,i);}return this;}},{key:"off",value:function value(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++){e[n]=arguments[n];}if(e.length<2)return this;for(var i=e.pop(),r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;this._emitter.off(u,i);}return this;}},{key:"emit",value:function value(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++){i[r-1]=arguments[r];}return(e=this._emitter).emit.apply(e,[t].concat(i)),this;}},{key:"platform",value:function value(){var t=window.navigator.userAgent,e=/Android/i.test(t),n=/BlackBerry/i.test(t),i=/IEMobile/i.test(t),r=/iPhone|iPad|iPod/i.test(t),o=e||n||i||r;return r?c.Platform.iOS:e?c.Platform.Android:n?c.Platform.BlackBerry:i?c.Platform.WindowPhone:o?c.Platform.other:c.Platform.PC;}},{key:"fire",value:function value(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++){n[i-1]=arguments[i];}return this.emit.apply(this,[t].concat(n));}},{key:"listeners",value:function value(t){return this._emitter.listeners(t);}},{key:"hasListeners",value:function value(t){return this._emitter.hasListeners(t);}},{key:"id",get:function get(){return this._id;},set:function set(t){this._id=t;}}]),t;}();e.default=h;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=void 0,o=function(){function t(){n(this,t);}return i(t,[{key:"update",value:function value(t){this._provider.update(t);}},{key:"ofNumber",value:function value(){var t;return(t=this._provider).ofNumber.apply(t,arguments);}},{key:"ofObject",value:function value(){var t;return(t=this._provider).ofObject.apply(t,arguments);}},{key:"provider",get:function get(){return this._provider;},set:function set(t){this._provider=t;}}],[{key:"getInstance",value:function value(){return r||(r=new t()),r;}}]),t;}();e.default=o;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}Object.defineProperty(e,"__esModule",{value:!0}),e.DOMUtils=void 0;var r=n(47),o=i(r);e.DOMUtils=o;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),o=n(4),a=new o.geom.GeometryFactory(),s=new o.io.GeoJSONReader(a),u=new o.io.GeoJSONWriter(),l=function(){function t(){i(this,t);}return r(t,null,[{key:"getFactory",value:function value(){return a;}},{key:"getGeoReader",value:function value(){return s;}},{key:"getGeoWriter",value:function value(){return u;}},{key:"getLongEdge",value:function value(t){var e=null;if(!t)return e;var n=t.getGeometryType();if("Polygon"===n)for(var i=t.getExteriorRing(),r=i.getCoordinates(),a=0,s=1;s<r.length;s++){var u=new o.geom.LineSegment(r[s-1],r[s]),l=u.getLength();a<l&&(e=u,a=l);}return e;}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.Response=e.Request=e.Headers=void 0;var r=n(77),o=i(r),a=n(20),s=i(a),u=n(40),l=i(u),c=n(41),h=i(c),f=n(78),d=i(f);o.default.helper={timeout:d.default},e.default=o.default,e.Headers=s.default,e.Request=l.default,e.Response=h.default;},function(t,e,n){"use strict";function i(){r(this,o);}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o={type:function type(){return"default";},margin:0};e.default=i;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=i(l),h=n(19),f=i(h),d=n(3),p=n(7),g=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t)throw new Error("Control: Invalid name");var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._options=s({position:"bottomleft"},n),i._name=t,i._element=i._options.element,i._container=null,i._map=null,i._needAppend=!0,i._element&&(i._needAppend=!1),i._options.container&&i.setContainer(n.container),i;}return a(e,t),u(e,[{key:"setContainer",value:function value(t){return this._container=(0,d.isString)(t)?document.getElementById(t):t,this;}},{key:"getContainer",value:function value(){return this._container;}},{key:"getMap",value:function value(){return this._map;}},{key:"addTo",value:function value(t){return t instanceof f.default?t.addDomControl(this):console.warn("addTo: Invalid map"),this;}},{key:"removeFrom",value:function value(t){return t===this._map&&t.removeDomControl(this),this;}},{key:"hide",value:function value(){return this._element.style.display="none",this;}},{key:"display",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block";return this._element.style.display=t,this;}},{key:"disable",value:function value(){return this;}},{key:"enable",value:function value(){return this;}},{key:"_onAdd",value:function value(t){var e=this._options.position;if(this.emit("add",this),this._map=t,t.controlDom&&!this._container){var n=t.controlCorners[e],i=void 0,r=void 0;if(n)i="ngr-control",r=n;else{if("custom"!==e)throw new Error("Invalid control position");i="ngr-custom-control",r=t.controlDom;}p.DOMUtils.addClass(this._element,i),this.setContainer(r);}return this._needAppend&&(e.indexOf("bottom")!==-1?this._container.insertBefore(this._element,this._container.firstChild):this._container.appendChild(this._element)),this;}},{key:"_onRemove",value:function value(t){return this.emit("remove",this),this._map=null,this._needAppend&&(this._container.removeChild(this._element),this._container=null),this;}},{key:"_refocusOnMap",value:function value(){return this._map&&this._map.targetDom.focus(),this;}},{key:"element",get:function get(){return this._element;}}]),e;}(c.default);e.default=g;},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.devServerHost="http://localhost",e.blueVersion="2.0",e.supportParticle=!1,e.enableQuadTree=!1,e.isDev=!1,e.isProd=!0,e.isLite=!1,e.touchEmulator=!1;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,null,[{key:"parseColor",value:function value(t){var e=16777215;return"number"==typeof t?e=Math.floor(t):"string"==typeof t?e=parseInt(t,16):console.warn("Unknown Color",t),e;}},{key:"converToSharp",value:function value(t){var e=t;return"string"==typeof t&&(e=e.replace("0x","#")),e;}},{key:"parseStringColor",value:function value(t){var e=16777215;if("string"!=typeof t)return console.warn("Invalid String"),e;var n=/^\\#([A-Fa-f0-9]+)$/.exec(t);if(n){var i=n[1],r=i.length;if(3===r){var o=i.charAt(0)+i.charAt(0)+i.charAt(1)+i.charAt(1)+i.charAt(2)+i.charAt(2);e=parseInt(o,16);}else 6===r?e=parseInt(t,16):console.warn("Unknown Color",t);}else console.warn("Unknown Color",t);return e;}}]),t;}();e.default=r;},function(t,e,n){(function(e,i){/*!\n\t * @overview es6-promise - a tiny implementation of Promises/A+.\n\t * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n\t * @license   Licensed under MIT license\n\t *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n\t * @version   4.1.1\n\t */!function(e,n){t.exports=n();}(this,function(){"use strict";function t(t){var e=typeof t==="undefined"?"undefined":_typeof(t);return null!==t&&("object"===e||"function"===e);}function r(t){return"function"==typeof t;}function o(t){Z=t;}function a(t){J=t;}function s(){return function(){return e.nextTick(f);};}function u(){return"undefined"!=typeof W?function(){W(f);}:h();}function l(){var t=0,e=new $(f),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2;};}function c(){var t=new MessageChannel();return t.port1.onmessage=f,function(){return t.port2.postMessage(0);};}function h(){var t=setTimeout;return function(){return t(f,1);};}function f(){for(var t=0;t<Y;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0;}Y=0;}function d(){try{var t=n(216);return W=t.runOnLoop||t.runOnContext,u();}catch(t){return h();}}function p(t,e){var n=arguments,i=this,r=new this.constructor(v);void 0===r[rt]&&R(r);var o=i._state;return o?!function(){var t=n[o-1];J(function(){return L(o,r,t,i._result);});}():O(i,r,t,e),r;}function g(t){var e=this;if(t&&"object"==(typeof t==="undefined"?"undefined":_typeof(t))&&t.constructor===e)return t;var n=new e(v);return S(n,t),n;}function v(){}function m(){return new TypeError("You cannot resolve a promise with itself");}function y(){return new TypeError("A promises callback cannot return that same promise.");}function _(t){try{return t.then;}catch(t){return ut.error=t,ut;}}function b(t,e,n,i){try{t.call(e,n,i);}catch(t){return t;}}function x(t,e,n){J(function(t){var i=!1,r=b(n,e,function(n){i||(i=!0,e!==n?S(t,n):C(t,n));},function(e){i||(i=!0,I(t,e));},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,I(t,r));},t);}function w(t,e){e._state===at?C(t,e._result):e._state===st?I(t,e._result):O(e,void 0,function(e){return S(t,e);},function(e){return I(t,e);});}function E(t,e,n){e.constructor===t.constructor&&n===p&&e.constructor.resolve===g?w(t,e):n===ut?(I(t,ut.error),ut.error=null):void 0===n?C(t,e):r(n)?x(t,e,n):C(t,e);}function S(e,n){e===n?I(e,m()):t(n)?E(e,n,_(n)):C(e,n);}function M(t){t._onerror&&t._onerror(t._result),T(t);}function C(t,e){t._state===ot&&(t._result=e,t._state=at,0!==t._subscribers.length&&J(T,t));}function I(t,e){t._state===ot&&(t._state=st,t._result=e,J(M,t));}function O(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+at]=n,r[o+st]=i,0===o&&t._state&&J(T,t);}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3){i=e[a],r=e[a+n],i?L(n,i,r,o):r(o);}t._subscribers.length=0;}}function P(){this.error=null;}function A(t,e){try{return t(e);}catch(t){return lt.error=t,lt;}}function L(t,e,n,i){var o=r(n),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=A(n,i),a===lt?(l=!0,s=a.error,a.error=null):u=!0,e===a)return void I(e,y());}else a=i,u=!0;e._state!==ot||(o&&u?S(e,a):l?I(e,s):t===at?C(e,a):t===st&&I(e,a));}function N(t,e){try{e(function(e){S(t,e);},function(e){I(t,e);});}catch(e){I(t,e);}}function k(){return ct++;}function R(t){t[rt]=ct++,t._state=void 0,t._result=void 0,t._subscribers=[];}function D(t,e){this._instanceConstructor=t,this.promise=new t(v),this.promise[rt]||R(this.promise),q(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):I(this.promise,F());}function F(){return new Error("Array Methods must be provided an Array");}function B(t){return new D(this,t).promise;}function j(t){var e=this;return new e(q(t)?function(n,i){for(var r=t.length,o=0;o<r;o++){e.resolve(t[o]).then(n,i);}}:function(t,e){return e(new TypeError("You must pass an array to race."));});}function U(t){var e=this,n=new e(v);return I(n,t),n;}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function G(){throw new TypeError("Failed to construct \'Promise\': Please use the \'new\' operator, this object constructor cannot be called as a function.");}function V(t){this[rt]=k(),this._result=this._state=void 0,this._subscribers=[],v!==t&&("function"!=typeof t&&z(),this instanceof V?N(this,t):G());}function X(){var t=void 0;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")();}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment");}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve());}catch(t){}if("[object Promise]"===n&&!e.cast)return;}t.Promise=V;}var H=void 0;H=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t);};var q=H,Y=0,W=void 0,Z=void 0,J=function J(t,e){nt[Y]=t,nt[Y+1]=e,Y+=2,2===Y&&(Z?Z(f):it());},K="undefined"!=typeof window?window:void 0,Q=K||{},$=Q.MutationObserver||Q.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3),it=void 0;it=tt?s():$?l():et?c():void 0===K?d():h();var rt=Math.random().toString(36).substring(16),ot=void 0,at=1,st=2,ut=new P(),lt=new P(),ct=0;return D.prototype._enumerate=function(t){for(var e=0;this._state===ot&&e<t.length;e++){this._eachEntry(t[e],e);}},D.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===g){var r=_(t);if(r===p&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(v);E(o,t,r),this._willSettleAt(o,e);}else this._willSettleAt(new n(function(e){return e(t);}),e);}else this._willSettleAt(i(t),e);},D.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===ot&&(this._remaining--,t===st?I(i,n):this._result[e]=n),0===this._remaining&&C(i,this._result);},D.prototype._willSettleAt=function(t,e){var n=this;O(t,void 0,function(t){return n._settledAt(at,e,t);},function(t){return n._settledAt(st,e,t);});},V.all=B,V.race=j,V.resolve=g,V.reject=U,V._setScheduler=o,V._setAsap=a,V._asap=J,V.prototype={constructor:V,then:p,catch:function _catch(t){return this.then(null,t);}},V.polyfill=X,V.Promise=V,V;});}).call(e,n(72),function(){return this;}());},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Screen:1,World:2,WGS84:3},i={iOS:1,Android:2,BlackBerry:3,WindowPhone:4,PC:5,other:0};e.Platform=i,e.CoordType=n;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),o=n(3),a=function(){function t(e){i(this,t),this.name=e,this.features=[],this._featureMap={};}return r(t,[{key:"_setFeatureParent",value:function value(t){return this.forEach(function(e){e.parent=t;}),this;}},{key:"forEach",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return(0,o.isArray)(this.features)&&this.features.forEach(t,e),this;}},{key:"addFeature",value:function value(t){var e=t.id;if((0,o.isBlank)(t.id))return console.warn("Invalid feature"),this;if(this._featureMap[e])return console.warn("Feature is existed"),this;var n=this.features.push(t);return t.parent=this.parent,this._featureMap[t.id]=n-1,this;}},{key:"updateFeature",value:function value(t){var e=t.id,n=this._featureMap[e];return n>-1&&(this.features[n]=t,t.parent=this.parent),this;}},{key:"_removeFeature",value:function value(t,e){if(e>-1){this.features[e].parent=null,this.features.splice(e,1),delete this._featureMap[t];for(var n in this._featureMap){this._featureMap[n]>e&&(this._featureMan[n]-=1);}}return this;}},{key:"removeFeature",value:function value(t){return this.removeFeatureById(t.id),this;}},{key:"removeFeatureById",value:function value(t){var e=this._featureMap[t];return this._removeFeature(t,e),this;}},{key:"has",value:function value(t){return!!t&&(t.id in this._featureMap||this._features.indexOf(t)!==-1);}},{key:"getFeatureById",value:function value(t){var e=this._featureMap[t];return e>-1?this.features[e]:null;}},{key:"getFeatureCount",value:function value(){return this._features.length;}},{key:"copy",value:function value(){var e=new t(this.name),n=this.features;return e.features=n.map(function(t){return t.copy();}),e;}},{key:"name",get:function get(){return this._name;},set:function set(t){this._name=t;}},{key:"features",get:function get(){return this._features;},set:function set(t){if(this._setFeatureParent(null),this._features=[],(0,o.isArray)(t)){this._featureMap={};for(var e in t){var n=t[e];(0,o.isBlank)(n.id)?console.warn("Invalid feature"):this._featureMap[n.id]?console.warn("Feature is existed"):(t.parent=this.parent,this._featureMap[t.id]=this._features.push(n)-1);}}}},{key:"parent",set:function set(t){this._setFeatureParent(t),this._parent=t;},get:function get(){return this._parent;}}]),t;}();e.default=a;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._scenes={},n.id=t,n._sceneManager=null,n.visible=!0,n;}return a(e,t),s(e,[{key:"onAdd",value:function value(t){this._sceneManager=t;for(var e in this._scenes){this._sceneManager.addScene(this._scenes[e]);}}},{key:"onRemove",value:function value(t){for(var e in this._scenes){this._sceneManager.removeScene(this._scenes[e]);}this._sceneManager=null;}},{key:"add",value:function value(t){return t.id&&!this.has(t)&&(this._scenes[t.id]=t,this._sceneManager&&this._sceneManager.addScene(t)),this;}},{key:"remove",value:function value(t){return this.has(t)&&(delete this._scenes[t.id],this._sceneManager&&this._sceneManager.removeScene(t)),this;}},{key:"getAABB",value:function value(){}},{key:"makeCollision",value:function value(t){}},{key:"get",value:function value(t){var e=null;return this.has(t)&&(e=this._scenes[t]),e;}},{key:"has",value:function value(t){return!!t&&(t in this._scenes||t.id in this._scenes);}},{key:"render",value:function value(){if(this.visible)for(var t in this._scenes){this._scenes[t].render();}}},{key:"visible",get:function get(){return this._visible;},set:function set(t){this._visible=t;}},{key:"originStyle",set:function set(t){this._originStyle=t;},get:function get(){return this._originStyle;}}]),e;}(l.default);e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0}),e.CAType=e.CollisionAnimation=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(6),l=i(u),c=n(3),h=null,f=function(){function t(){a(this,t);}return s(t,[{key:"hasAnimation",value:function value(t){return!1;}},{key:"makeCollision",value:function value(t,e){}},{key:"reset",value:function value(t){}}]),t;}(),d=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return o(e,t),e;}(f),p=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return o(e,t),s(e,[{key:"hasAnimation",value:function value(t){var e=!1;if(t.children.length>0)for(var n=t.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;e=this.hasAnimation(a);break;}return this._hasOpacity(t)||e;}},{key:"makeParams",value:function value(t,e,n){if(t.children.length>0)for(var i=t.children,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;this.makeParams(s,e,n);}this._hasOpacity(t)&&(t.material.opacity=e.num);}},{key:"complete",value:function value(t,e){this._visibleScene(t,!e);}},{key:"makeCollision",value:function value(t,e){var n=this,i=this._getOpacity(t),r=void 0;return e?(t.visible||(i=0),r=0):r=(0,c.isNumber)(t.destOpacity)?t.destOpacity:t.children[0]&&(0,c.isNumber)(t.children[0].destOpacity)?t.children[0].destOpacity:1,t.visible||i!==r||(this.makeParams(t,{num:0},e),i=0),i===r?null:l.default.getInstance().ofNumber(i,r,300).on("update",function(i,r){n.makeParams(t,r,e);}).on("start",function(){n._visibleScene(t,!0);}).on("complete",function(){n.makeParams(t,{num:r},e),n.complete(t,e);}).on("stop",function(){n.complete(t,e);}).start();}},{key:"reset",value:function value(t){t.animation(h.Default);}},{key:"_getOpacity",value:function value(t){if(t.children.length>0)for(var e=t.children,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;if(this._hasOpacity(o))return o.material.opacity;}return t.material?t.material.opacity:0;}},{key:"_visibleScene",value:function value(t,e){if(t.children.length>0)for(var n=t.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;this._visibleScene(a,e);}t.visible=e;}},{key:"_hasOpacity",value:function value(t){return t&&t.material&&(0,c.isNumber)(t.material.opacity);}}]),e;}(f);e.CAType=h={Default:new d(),Opacity:new p()},e.CollisionAnimation=f,e.CAType=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++){n[e]=t[e];}return n;}return Array.from(t);}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0){}}catch(t){r=!0,o=t;}finally{try{!i&&s.return&&s.return();}finally{if(r)throw o;}}return n;}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance");};}(),l=n(1),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),h=n(68),f=i(h),d=n(5),p=i(d),g=n(25),v=i(g),m=n(30),y=i(m),_=n(170),b=i(_),x=n(175),w=i(x),E=n(6),S=i(E),M=n(33),C=i(M),I=n(11),O=i(I),T=n(18),P=n(45),A=i(P),L=n(69),N=n(12),k=n(3),R=n(15),D={Uninitialized:0,Initialized:1,Start:2,Loop:3,Stop:4,Destroy:5},F=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._name=t,i._layers={},i._layersIndex=[],i._planarGraphs=[],i._domControl={},i._floorHeight=30,i._options=l({styleGenerator:new C.default()},n),i.styleGenerator=i._options.styleGenerator,i._collisionSceneManager=new w.default(),i._sceneManager=new b.default(i),i.renderLoop=new L.AnimationFrameRenderLoop(),i._frame=0,i._frameF={},i._options.geomMap&&(i._goemMap=i._options.geomMap),i._beginFrame=i._beginFrame.bind(i),i.on("beginDraw",i._beginFrame),i;}return s(e,t),c(e,[{key:"_beginFrame",value:function value(t,e){var n=this._frameF[e];if(n&&n.length){try{for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;s();}}catch(t){throw delete this._frameF[e],t;}delete this._frameF[e];}}},{key:"changeMapViewLifeCycle",value:function value(t){this._lifeCycle!==t&&(this.emit("lifeCycleChange",this,this._lifeCycle,t),this._lifeCycle=t);}},{key:"addDomControl",value:function value(t){return!(t instanceof O.default)||t._map||t._name in this._domControl?(console.warn("adding control failed"),!1):(t._onAdd(this),this._domControl[t._name]=t,!0);}},{key:"removeDomControl",value:function value(t){var e=null;return(e=t instanceof O.default&&t._name in this._domControl&&t._map===this?t:this.getDomControl(t))?(e._onRemove(this),delete this._domControl[e._name],!0):(console.warn("removing control failed"),!1);}},{key:"getDomControl",value:function value(t){return this._domControl[t];}},{key:"addOverlay",value:function value(t,e){var n=e;if(!e&&(n=this.getLayer(this.currentPlanarGraphIds[0]),!n))for(var i in this._layers){n=this._layers[i];break;}this.emit("addOverlay",this,n,t);}},{key:"reAttachOverlay",value:function value(t,e){this.emit("reAttachOverlay",this,e,t);}},{key:"removeOverlay",value:function value(t){t.layer&&this.emit("removeOverlay",this,t.layer,t);}},{key:"addLayer",value:function value(t){if(t.parent)return console.warn("addLayer: Existed parent"),null;if(this.hasLayer(t.name))return console.warn("addLayer: Existed layer"),null;var e=this._sceneGenerator.generator(t,this),n=this._layersIndex.indexOf(t.name);return e&&this._sceneManager.add(e),t.parent=this,this._layers[t.name]=t,n!==-1&&this._layersIndex.splice(n,1),this._layersIndex.push(t.name),this.emit("addLayer",this,t),e;}},{key:"getLayer",value:function value(t){return this._layers[t];}},{key:"hasLayer",value:function value(t){return!!this._layers[t];}},{key:"getLayers",value:function value(t){var e=[];for(var n in this._layers){var i=this._layers[n];i instanceof y.default?i.foreach(function(n,i){n===t&&e.push(i);}):i.name===t&&e.push(i);}return e;}},{key:"removeLayer",value:function value(t){var e=this._sceneGenerator.find(t),n=this._layersIndex.indexOf(t.name);return e&&this._sceneManager.remove(e),t.parent=null,delete this._layers[t.name],n!==-1&&this._layersIndex.splice(n,1),this.emit("removeLayer",this,t),this;}},{key:"reSize",value:function value(t,e){this.engine.reSize(this,t,e),this.activeCamera.reSize(t,e),this.emit("reSize",this,t,e);}},{key:"drawPlanarGraphExt",value:function value(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(n.gradually){var r={};l(r,t.Area),t.Area.features=[];var o=new NGR.data.PlanarGraph(t);this.drawPlanarGraph(o,n);var a=o.planarGraphId,s=this.getLayer(a).getLayer("Area"),u=this.getLayer(a).getLayer("AreaText"),c=[],h=[];r.features.map(function(t){var e=s.renderer.getStyle(t),n=new NGR.data.Feature(NGR.geom.JTSUtils.getGeoReader().read(t.geometry),t.properties);return c.push(n),h.push(NGR.data.DataUtil.fuckYouBitch(n,e.height,!0)),null;});var f=n.perCount||100,d=n.perTime||200,p=0;if(!(0,k.isNumber)(f)||f<=0)throw new Error("drawPlanarGraphExt: Invalid perCount");var g=Math.ceil((c.length-1)/f),v=setInterval(function(){if(g<=p)return clearInterval(v),i&&i(),void(e.onLoaded&&e.onLoaded());var t=p*f,n=g===p+1?c.length:(p+1)*f;p++,s.addFeatures(c.slice(t,n),!1),u.addFeatures(h.slice(t,n),!1),e.collisionSceneManager.updateCollision();},d);}else{var m=new NGR.data.PlanarGraph(t);this.drawPlanarGraph(m,n);}}},{key:"drawMultiPlanarGraphExt",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.added,i=void 0!==n&&n,r=e.visible,o=void 0===r||r,a=e.autoAreaTextHeight,s=void 0!==a&&a,u=e.gradually,l=void 0===u||u;i||this.clear();var c=this._curPlanarGraphs?this._curPlanarGraphs.concat():[];this._curPlanarGraphs=[];for(var h=t,f=Array.isArray(h),d=0,h=f?h:h[Symbol.iterator]();;){var p;if(f){if(d>=h.length)break;p=h[d++];}else{if(d=h.next(),d.done)break;p=d.value;}var g=p;this.drawPlanarGraphExt(g,{gradually:l,added:!0,visible:o,autoAreaTextHeight:s});}this._changePlanarGraph(this._curPlanarGraphs.concat(),c);}},{key:"drawPlanarGraph",value:function value(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.added,r=void 0!==i&&i,o=n.visible,a=void 0===o||o,s=n.fireEvent,l=void 0===s||s,c=n.autoAreaTextHeight,h=void 0!==c&&c,d=new y.default(t.planarGraphId),p=t.features;if(r||this.clear(),this._planarGraphs.push(t.planarGraphId),!this._coordinateSystem||!r){var g=this._options,m=g.initSkewAngle,_=g.initRotationAngle;for(var b in p){if("Frame"===b){var x=p[b].features[0].geometry.getEnvelopeInternal(),w=[x.minx,x.miny,x.maxx,x.maxy],E=f.default.getExtentCenter(w),S=u(E,2),M=S[0],C=S[1];this._camera.initRect(w),this._coordinateSystem=new f.default(),this._coordinateSystem.setOffset([-M,-C]);}}this.activeControl&&((0,k.isNumber)(m)&&this.activeControl.skewTo(m),(0,k.isNumber)(_)&&this.activeControl.rotateTo(0,0,_));}for(var I in p){var O=p[I],T=new v.default(I,this._styleGenerator);if(T.coordinateSystem=this._coordinateSystem,T.features=O,d.addLayer(T),(N.enableQuadTree&&"Frame"===I||"Area"===I)&&(T.clickable=!0),"Area"===I){var P=new v.default("AreaText",this._styleGenerator);T.renderer||(P.coordinateSystem=this._coordinateSystem),h?P.features=A.default.kickYourAss(O,T,this._options.interiorPoint):P.features=A.default.featureCollectionPolygon2Point(O,this._options.interiorPoint),d.addLayer(P);}}this.addLayer(d);var L=d.getLayer("AreaText");L.coordinateSystem=this._coordinateSystem,L&&this._sceneManager.setVisible(L,null,null,!1),this._sceneManager.setVisible(d,null,null,!1),this.next(1,function(){e._sceneManager.setPosition(d,null,null,0,0,e._planarGraphs.indexOf(t.planarGraphId)*e._floorHeight),a&&(e._sceneManager.setVisible(d,null,null,!0),e.collisionSceneManager.updateCollision()),L&&e._sceneManager.setVisible(L,null,null,!0);}),l&&this._changePlanarGraph(this._curPlanarGraphs?this._curPlanarGraphs.concat([t.planarGraphId]):[t.planarGraphId],this._curPlanarGraphs?this._curPlanarGraphs.concat():[].concat(this.planarGraph&&this.planarGraph.planarGraphId||[])),r?(this._curPlanarGraphs=this._curPlanarGraphs||[],a&&this._curPlanarGraphs.push(t.planarGraphId)):this._planarGraph=t;}},{key:"drawMultiPlanarGraph",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.added,i=void 0!==n&&n,r=e.visible,o=void 0===r||r,a=e.autoAreaTextHeight,s=void 0!==a&&a;i||this.clear();var u=this._curPlanarGraphs?this._curPlanarGraphs.concat():[];this._curPlanarGraphs=[];for(var l=t,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var d=f;this.drawPlanarGraph(d,{added:!0,visible:o,autoAreaTextHeight:s});}this._changePlanarGraph(this._curPlanarGraphs.concat(),u);}},{key:"changePlanarGraphIndex",value:function value(t){if((0,k.isArray)(t)){for(var e=this._planarGraphs.concat(),n=[],i=t,o=Array.isArray(i),a=0,i=o?i:i[Symbol.iterator]();;){var s;if(o){if(a>=i.length)break;s=i[a++];}else{if(a=i.next(),a.done)break;s=a.value;}var u=s,l=this._layers[u];if(l){var c=e.indexOf(u);e.splice(c,1),this.sceneManager.setPosition(l,null,null,0,0,n.length*this._floorHeight),n[n.length]=u;}}return n.push.apply(n,r(e)),this._planarGraphs=n,!0;}return!1;}},{key:"showPlanarGraphs",value:function value(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];if(!(0,k.isArray)(t))throw new Error("showPlanarGraph: Invalid parameters");for(var r=this._planarGraphs,o=this.sceneManager,a=this.collisionSceneManager,s=[],u=0,l=function l(){if(h){if(f>=c.length)return"break";d=c[f++];}else{if(f=c.next(),f.done)return"break";d=f.value;}var n=d,r=e._layers[n],l=void 0;t.indexOf(n)!==-1?(o.setPosition(r,null,null,0,0,u++*e._floorHeight,i),o.setVisible(r,null,null,!0),s.push(n),l=!0):(o.setVisible(r,null,null,!1),l=!1),r.foreach(function(t,e){a.setFeatureLayerEnable(e,l);});},c=r,h=Array.isArray(c),f=0,c=h?c:c[Symbol.iterator]();;){var d,p=l();if("break"===p)break;}return this._changePlanarGraph(s,this._curPlanarGraphs),this._curPlanarGraphs=s,n&&this.next(1,function(){e.collisionSceneManager.animation(T.CAType.Opacity).updateCollision(!0);}),u;}},{key:"_changePlanarGraph",value:function value(t,e){this.emit("changePlanarGraph",this,t.concat(),e.concat());}},{key:"removePlanarGraph",value:function value(t){var e=t.planarGraphId,n=this._planarGraphs.indexOf(e),i=this.getLayer(e);n!==-1&&i&&i instanceof y.default&&(this.removeLayer(i),this._planarGraphs.splice(n,1));}},{key:"searchFeatureById",value:function value(t){console.warn("searchFeatureById is deprecated, please use searchFeature");var e=this._layers;for(var n in e){var i=e[n];if(i instanceof y.default)for(var r in i._layers){var o=i._layers[r].searchById(t);if(o)return o;}else{var a=i.searchById(t);if(a)return a;}}return null;}},{key:"searchFeature",value:function value(t,e){for(var n in this._layers){var i=this._layers[n],r=null;if(i instanceof y.default?r=i.searchFeature(t,e):i.id===t&&(r=i.searchById(e)),r)return r;}return null;}},{key:"start",value:function value(){var t=this;this._lifeCycle!==D.Start&&this._lifeCycle!==D.Loop&&(this.changeMapViewLifeCycle(D.Start),this._renderLoop.loop(function(e){t._loop(e);}));}},{key:"stop",value:function value(){this.changeMapViewLifeCycle(D.Stop),this._renderLoop.stop();}},{key:"destroy",value:function value(){var t=this;this.clear();var e=function e(){t.stop(),t.changeMapViewLifeCycle(D.Destroy),t._collisionSceneManager.clear(),t._sceneManager.destroy(),t._control.dispose(),t._camera.destroy(),t._gestureManager.destroy(),t._camera=null,t._control=null,t._planarGraph=null,t._control=null,t.sceneGenerator=null,t._coordinateSystem=null,t._engine=null,t._gestureManager=null,t._layers=null,t._layersIndex=null,t._options=null,t._styleGenerator=null,t._collisionSceneManager=null,t._sceneManager=null,t.off("beginDraw",t._beginFrame);};e();}},{key:"next",value:function value(t,e){var n=t+this._frame;n<this._frame||(this._frameF[n]||(this._frameF[n]=[]),this._frameF[n].push(e));}},{key:"clear",value:function value(){for(var t in this._layers){this.removeLayer(this._layers[t]);}return this._sceneManager.clearOctree(),this._collisionSceneManager.clear(),this._coordinateSystem=null,this._planarGraphs=[],this._curPlanarGraphs=null,this;}},{key:"searchObjectsByPoint",value:function value(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.CoordType.Screen,o=[],a=[t,e];switch(i){case R.CoordType.Screen:if(this.activeCamera&&this._coordinateSystem){var s=this.activeCamera.toCameraCoordinate(t,e,0);a=this._coordinateSystem.offset(s.x,s.y);}break;case R.CoordType.World:this._coordinateSystem&&(a=this._coordinateSystem.offset(t,e));break;case R.CoordType.WGS84:}for(var u=function u(){if(c){if(h>=l.length)return"break";f=l[h++];}else{if(h=l.next(),h.done)return"break";f=h.value;}var t=f,e=n._layers[t],i=void 0;e instanceof y.default?e.foreach(function(t,e){i=n._searchByPoint.apply(n,[e].concat(r(a))),o.push.apply(o,r(i));}):(i=n._searchByPoint.apply(n,[e].concat(r(a))),o.push.apply(o,r(i)));},l=this._layersIndex,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f,d=u();if("break"===d)break;}return o;}},{key:"_searchByPoint",value:function value(t,e,n){return t.clickable?t.searchByPoint(e,n):[];}},{key:"searchFeaturesByClientPoint",value:function value(t,e){for(var n=this._getObjectsByClinet(t,e),i=[],r=n,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s,l=u.object,c=l._layerId,h=l._sceneId,f=this.searchFeature(c,h);f&&i.push(f);}return i;}},{key:"searchObjectsByClient",value:function value(t,e){for(var n=this._getObjectsByClinet(t,e),i=[],r=n,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s,l=u.object,c=l._layerId,h=l._sceneId,f=this.searchFeature(c,h);f&&i.push({feature:f,point:u.point});}return i;}},{key:"_getObjectsByClinet",value:function value(t,e){var n=[];return this._camera?"three"!==this.engine.type()?(console.warn("Invalid Engine"),n):n=this._sceneManager._searchObjectsInOctree(t/this.width*2-1,2*-(e/this.height)+1):(console.warn("Invalid Camera"),n);}},{key:"_loop",value:function value(t){this._lifeCycle!==D.Stop&&this._lifeCycle!==D.Destroy&&(this.changeMapViewLifeCycle(D.Loop),S.default.getInstance().update(t),t&&(this.emit("beginDraw",this,this._frame,t),this._sceneManager&&(this.emit("drawing",this,this._frame,t),this._sceneManager.render()),this.emit("endDraw",this,this._frame++,t)));}},{key:"particleEngine",set:function set(t){this._particleEngine=t;},get:function get(){return this._particleEngine;}},{key:"sceneGenerator",set:function set(t){this._sceneGenerator=t;}},{key:"gestureManager",get:function get(){return this._gestureManager;},set:function set(t){this._gestureManager=t;}},{key:"activeCamera",set:function set(t){this._camera=t,this._camera.onActiveCamera(this),this._collisionSceneManager.activeCamera=t;},get:function get(){return this._camera;}},{key:"activeControl",set:function set(t){this._control=t,this._control&&this._control.onActiveControl&&this._control.onActiveControl(this);},get:function get(){return this._control;}},{key:"name",get:function get(){return this._name;}},{key:"engine",set:function set(t){this._engine=t;},get:function get(){return this._engine;}},{key:"renderLoop",set:function set(t){this._renderLoop=t;},get:function get(){return this._renderLoop;}},{key:"sceneManager",get:function get(){return this._sceneManager;}},{key:"collisionSceneManager",get:function get(){return this._collisionSceneManager;},set:function set(t){this._collisionSceneManager=t;}},{key:"coordinateSystem",get:function get(){return this._coordinateSystem;}},{key:"height",set:function set(t){this._height=t;},get:function get(){return this._height;}},{key:"width",set:function set(t){this._width=t;},get:function get(){return this._width;}},{key:"maxDistance",set:function set(t){this._maxDistance=t;},get:function get(){return this._maxDistance;}},{key:"minDistance",set:function set(t){this._minDistance=t;},get:function get(){return this._minDistance;}},{key:"currentPlanarGraphIds",set:function set(t){console.warn("currentPlanarGraphIds is readonly");},get:function get(){return this._curPlanarGraphs?this._curPlanarGraphs:this._planarGraphs;}},{key:"planarGraphs",set:function set(t){console.warn("planargraphs is readonly");},get:function get(){return this._planarGraphs;}},{key:"container",set:function set(t){this._container=t;},get:function get(){return this._container;}},{key:"targetDom",set:function set(t){this._targetDom=t;},get:function get(){return this._targetDom;}},{key:"controlDom",set:function set(t){this._controlDom=t;},get:function get(){return this._controlDom;}},{key:"overlayDom",set:function set(t){this._overlayDom=t;},get:function get(){return this._overlayDom;}},{key:"styleGenerator",set:function set(t){this._styleGenerator=t;},get:function get(){return this._styleGenerator;}},{key:"floorHeight",set:function set(t){this._floorHeight=t;},get:function get(){return this._floorHeight;}}]),e;}(p.default);e.default=F;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function i(t){var e=t;if("string"!=typeof t&&(e=String(t)),/[^a-z0-9\\-#$%&\'*+.\\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return e;}function r(t){var e=t;return"string"!=typeof t&&(e=String(t)),e;}function o(t){var e={next:function next(){var e=t.shift();return{value:e,done:"undefined"==typeof e};}};return s&&(e[Symbol.iterator]=function(){return e;}),e;}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s="Symbol"in self&&"iterator"in Symbol,u=function(){function t(e){var i=this;n(this,t),this.map={},e instanceof t?e.forEach(function(t){var e=t.name,n=t.value;return i.append(e,n);}):e&&Object.getOwnPropertyNames(e).forEach(function(t){i.append(t,e[t]);});}return a(t,[{key:"append",value:function value(t,e){var n=i(t),r=this.map[n];r||(r=[],this.map[n]=r),r.push(e);}},{key:"set",value:function value(t,e){this.map[i(t)]=[r(e)];}},{key:"delete",value:function value(t){delete this.map[i(t)];}},{key:"get",value:function value(t){var e=this.map[i(t)];return e?e[0]:null;}},{key:"getAll",value:function value(t){return this.map[i(t)]||[];}},{key:"has",value:function value(t){return this.map.hasOwnProperty(i(t));}},{key:"forEach",value:function value(t,e){var n=this;Object.getOwnPropertyNames(this.map).forEach(function(i){n.map[i].forEach(function(r){t.call(e,i,r,n);});});}},{key:"keys",value:function value(){var t=[];return this.forEach(function(e){return t.push(e);}),o(t);}},{key:"values",value:function value(){var t=[];return this.forEach(function(e,n){return t.push(n);}),o(t);}},{key:"entries",value:function value(){var t=[];return this.forEach(function(e,n){return t.push([e,n]);}),o(t);}}]),t;}();s&&(u.prototype[Symbol.iterator]=u.prototype.entries),e.default=u;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i,r){var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,i,r);}else if("value"in o&&o.writable)o.value=i;else{var s=o.set;void 0!==s&&s.call(r,i);}return i;},c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},h=n(110),f=r(h),d=n(2),p=i(d),g=n(90),v=function(t){function e(t,n,i,r){o(this,e);var s=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,-2));return s._camera=new p.PerspectiveCamera(t,n,i,r),s.id=s._camera.id,s._quaternion=s._camera.quaternion.clone(),s._rotation=s._camera.rotation.clone(),s._target0=new p.Vector3(),s._originDistance=100,s;}return s(e,t),u(e,[{key:"addLight",value:function value(t){var e=null;if("Point"===t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++){i[r-1]=arguments[r];}e=new(Function.prototype.bind.apply(p.PointLight,[null].concat(i)))(),this._camera.add(e);}return e;}},{key:"reSize",value:function value(t,e){this._camera.aspect=t/e,this._camera.updateProjectionMatrix();}},{key:"destroy",value:function value(){this._camera=null,this._quaternion=null,this._rotation=null;}},{key:"initRect",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.667,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,i=new p.Vector3(0,0,0);if(this._mapView&&4===t.length){this._camera.quaternion.set(this._quaternion.x,this._quaternion.y,this._quaternion.z,this._quaternion.w),this._camera.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z),this._camera.position.setZ(this._originDistance);var r=t[0],o=t[1],a=t[2],s=t[3],u=(r+a)/2,l=(s+o)/2,c=new p.Vector3(r-u,o-l,1),h=new p.Vector3(a-u,s-l,1),f=Math.sqrt(Math.pow(h.x-c.x,2)+Math.pow(h.y-c.y,2)+Math.pow(h.z-c.z,2))/2;this._mapBound=new g.EllipticCylinder(i,f,f),this._camera.updateMatrix(),this._camera.updateMatrixWorld();var d=this.toScreenCoordinate(c.x,c.y,c.z),v=this.toScreenCoordinate(h.x,h.y,h.z),m=(v.x-d.x)/this._mapView.width,y=(d.y-v.y)/this._mapView.height,_=Math.max(m,y);this._originDistance=this._camera.position.z*_/e,this._camera.position.setZ(this._originDistance),this._camera.updateMatrix(),this._camera.updateMatrixWorld();}else if(this._mapView&&6===t.length){this._camera.quaternion.set(this._quaternion.x,this._quaternion.y,this._quaternion.z,this._quaternion.w),this._camera.rotation.set(this._rotation.x,this._rotation.y,this._rotation.z),this._camera.position.setZ(100);var b=(t[0]+t[3])/2,x=(t[1]+t[4])/2,w=(t[2]+t[5])/2,E=new p.Vector3(t[0]-b,t[1]-x,t[2]-w),S=new p.Vector3(t[3]-b,t[4]-x,t[5]-w),M=Math.sqrt(Math.pow(S.x-E.x,2)+Math.pow(S.y-E.y,2)+Math.pow(S.z-E.z,2))/2;this._mapBound=new g.EllipticCylinder(i,M,M),this._camera.updateMatrix(),this._camera.updateMatrixWorld();var C=new p.Vector3(this._camera.up.y,-this._camera.up.x,0).normalize(),I=new p.Matrix4();I.makeRotationAxis(C,n*Math.PI/180),this._camera.position.applyMatrix4(I),this._camera.up.applyMatrix4(I);var O=this.toScreenCoordinate(E.x,E.y,E.z),T=this.toScreenCoordinate(E.x,S.y,E.z),P=this.toScreenCoordinate(S.x,E.y,E.z),A=this.toScreenCoordinate(S.x,S.y,E.z),L=this.toScreenCoordinate(E.x,E.y,S.z),N=this.toScreenCoordinate(E.x,S.y,S.z),k=this.toScreenCoordinate(S.x,E.y,S.z),R=this.toScreenCoordinate(S.x,S.y,S.z),D=Math.min(O.x,T.x,P.x,A.x,L.x,N.x,k.x,R.x),F=Math.max(O.x,T.x,P.x,A.x,L.x,N.x,k.x,R.x),B=Math.min(O.y,T.y,P.y,A.y,L.y,N.y,k.y,R.y),j=Math.max(O.y,T.y,P.y,A.y,L.y,N.y,k.y,R.y),U=(F-D)/this._mapView.width,z=(j-B)/this._mapView.height,G=Math.max(U,z);this._camera.position.setX(this._camera.position.x*G/e),this._camera.position.setY(this._camera.position.y*G/e),this._camera.position.setZ(this._camera.position.z*G/e),this._camera.updateMatrix(),this._camera.updateMatrixWorld();}}},{key:"toScreenCoordinate",value:function value(t,e,n){var i=void 0;if(this._mapView){var r=new p.Vector3(t,e,n);i=r.project(this._camera),i.x=(i.x+1)/2*this._mapView.width,i.y=-(i.y-1)/2*this._mapView.height;}return i.setZ(0);}},{key:"toCameraCoordinate",value:function value(t,e,n){var i=void 0;if(this._mapView){this._camera.updateProjectionMatrix();var r=new p.Vector3(t/this._mapView.width*2-1,2*-(e/this._mapView.height)+1,n),o=new p.Vector3().setFromMatrixPosition(this._camera.matrix);i=r.unproject(this._camera);var a=i.sub(o).normalize(),s=-o.z/a.z;i=o.clone().add(a.multiplyScalar(s));}var u=(this._target.z-this._camera.position.z)/(i.z-this._camera.position.z),l=this._camera.position.clone().multiplyScalar(1-u).add(i.multiplyScalar(u));return l;}},{key:"getMetersPerPixel",value:function value(){if(!this._mapView)return 0;var t=this._camera,e=new p.Vector3(this._mapView.width/2,this._mapView.height/2,0),n=this.toCameraCoordinate(e.x,e.y,e.z),i=new p.Vector3(),r=new p.Vector3(1,0,0),o=t.getWorldQuaternion(),a=null,s=0;return r.applyQuaternion(o),i.copy(n).add(r),a=this.toScreenCoordinate(i.x,i.y,i.z),s=e.distanceTo(a),1/s;}},{key:"removeLight",value:function value(t){this._camera.remove(t);}},{key:"lookAt",value:function value(t,e){this._target0.set(e.x,e.y,e.z),this._camera.lookAt(this._target0);}},{key:"originDistance",get:function get(){return this._originDistance;}},{key:"camera",get:function get(){return this._camera;}},{key:"bound",get:function get(){return this._mapBound;}},{key:"position",get:function get(){var t=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this);return t.x=this._camera.position.x,t.y=this._camera.position.y,t.z=this._camera.position.z,t;},set:function set(t){this._camera.position.set(t.x,t.y,t.z),t instanceof p.Vector3?(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).x=t.x,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).y=t.y,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).z=t.z):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",t,this);}},{key:"target",get:function get(){return this._target;},set:function set(t){t instanceof p.Vector3?(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"target",this).x=t.x,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"target",this).y=t.y,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"target",this).z=t.z):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"target",t,this);}},{key:"up",get:function get(){var t=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"up",this);return t.x=this._camera.up.x,t.y=this._camera.up.y,t.z=this._camera.up.z,t;},set:function set(t){this._camera.up.set(t.x,t.y,t.z),t instanceof p.Vector3?(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"up",this).x=t.x,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"up",this).y=t.y,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"up",this).z=t.z):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"up",t,this);}}]),e;}(f.default);e.default=v;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.name?"toggle-"+t.name:"toggle",s({disabled:!1,selected:!1,innerHTML:"",position:"topright"},t)));n._element&&console.warn("ToggleControl: Element will be overrided");var i=n._options.className?" "+n._options.className:"";return n._element=f.DOMUtils.createElement("div","ngr-toggle ngr-control ngr-bar"+i),n._button=f.DOMUtils.createElement("a","",n._element),n._button.innerHTML=n._options.innerHTML,n._button.href="#",n._disabled=n._options.disabled,n._selected=n._options.selected,n._selected&&f.DOMUtils.addClass(n._button,"selected"),n._disabled&&f.DOMUtils.addClass(n._button,"disabled"),n._onClick=n._onClick.bind(n),n;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this._button.addEventListener("click",this._onClick,!1),this;}},{key:"_onRemove",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this._button.removeEventListener("click",this._onClick),this;}},{key:"_onClick",value:function value(t){t.preventDefault(),t.stopPropagation(),this.trigger();}},{key:"trigger",value:function value(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._disabled||(this._selected?(f.DOMUtils.removeClass(this._button,"selected"),this._selected=!1):(f.DOMUtils.addClass(this._button,"selected"),this._selected=!0),t&&this.fire("toggle",{selected:this._selected,targetControl:this}));}},{key:"getSelected",value:function value(){return this._selected;}},{key:"disable",value:function value(){return this.disabled=!0,this;}},{key:"enable",value:function value(){return this.disabled=!1,this;}},{key:"disabled",set:function set(t){this._disabled=!!t,this._disabled?f.DOMUtils.addClass(this._button,"disabled"):f.DOMUtils.removeClass(this._button,"disabled");},get:function get(){return this._disabled;}}]),e;}(h.default);e.default=d;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=function(){function t(e,n){i(this,t),this.geometry=e,this.properties=n,this.id=this.properties&&this.properties.id,this.hasOffset=!0,this.priority=5;}return o(t,[{key:"copy",value:function value(){var e=this.geometry.copy(),n=r({},this.properties),i=new t(e,n);return i.hasOffset=this.hasOffset,i;}},{key:"priority",get:function get(){return this._priority;},set:function set(t){this._priority=t;}},{key:"id",get:function get(){return this._id;},set:function set(t){this._id=t;}},{key:"geometry",get:function get(){return this._geometry;},set:function set(t){this._geometry=t;}},{key:"properties",get:function get(){return this._properties;},set:function set(t){this._properties=t;}},{key:"hasOffset",set:function set(t){this._hasOffset=t;},get:function get(){return this._hasOffset;}},{key:"parent",set:function set(t){this._parent=t;},get:function get(){return this._parent;}}]),t;}();e.default=a;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++){n[e]=t[e];}return n;}return Array.from(t);}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(8),u=i(s),l=n(4),c=n(3),h=function(){function t(){o(this,t);}return a(t,null,[{key:"createPoint",value:function value(t){return t?u.default.getFactory().createPoint(new(Function.prototype.bind.apply(l.geom.Coordinate,[null].concat(r(t))))()):null;}},{key:"createPolygon",value:function value(t){if((0,c.isArray)(t)){for(var e=[],n=t,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++];}else{if(o=n.next(),o.done)break;a=o.value;}var s=a;if((0,c.isArray)(s)){var h=new(Function.prototype.bind.apply(l.geom.Coordinate,[null].concat(r(s))))();e.push(h);}}if(e.length>=3)return u.default.getFactory().createPolygon(e);}return null;}},{key:"createLineString",value:function value(t){if((0,c.isArray)(t)){for(var e=[],n=t,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++];}else{if(o=n.next(),o.done)break;a=o.value;}var s=a;if((0,c.isArray)(s)){var h=new(Function.prototype.bind.apply(l.geom.Coordinate,[null].concat(r(s))))();e.push(h);}}if(e.length>=2)return u.default.getFactory().createLineString(e);}return null;}},{key:"createMultiPoint",value:function value(t){if((0,c.isArray)(t)){for(var e=[],n=t,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var a;if(i){if(o>=n.length)break;a=n[o++];}else{if(o=n.next(),o.done)break;a=o.value;}var s=a;if((0,c.isArray)(s)){var h=new(Function.prototype.bind.apply(l.geom.Coordinate,[null].concat(r(s))))();e.push(h);}}if(e.length>=1)return u.default.getFactory().createMultiPoint(e);}return null;}},{key:"createMultiPolygon",value:function value(e){if((0,c.isArray)(e)){for(var n=[],i=e,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a,l=t.createPolygon(s);l&&n.push(l);}if(n.length>=1)return u.default.getFactory().createMultiPolygon(n);}return null;}},{key:"createMultiLineString",value:function value(e){if((0,c.isArray)(e)){for(var n=[],i=e,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a,l=t.createPolygon(s);l&&n.push(l);}if(n.length>=1)return u.default.getFactory().createMultiLineString(n);}return null;}}]),t;}();e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(26),l=i(u),c=n(16),h=i(c),f=n(33),d=i(f),p=n(4),g=n(8),v=i(g),m=n(125),y=i(m),_=n(12),b=n(3),x=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.features=new h.default(t),i._subHeight=1e-5,i._zIndex=i._subHeight,n instanceof d.default?i.renderer=n.generator(i):i.renderer=n,_.enableQuadTree&&(i._quadTree=new p.index.quadtree.Quadtree()),i.clickable=!1,i._parent=null,i;}return a(e,t),s(e,[{key:"visit",value:function value(t){var e=this;this.renderer&&this.features.forEach(function(n){return t(n,e.renderer.getStyle(n));},this);}},{key:"addFeatures",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,b.isArray)(t),i=n?t:t.features;if(!(0,b.isArray)(i))return console.warn("Invalid Features"),this;for(var r=i,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;this.addFeature(u,e);}return e||this.emit("addFeatures",this,i),this;}},{key:"addFeature",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._addFeature(t,!0,e);}},{key:"removeFeature",value:function value(t){return t&&this._features.has(t)&&(t.onRemove&&t.onRemove(this),this._features.removeFeature(t),_.enableQuadTree&&this._quadTree.remove(t.geometry.getEnvelopeInternal(),t),t.parent=null,this.emit("removeFeature",this,t)),this;}},{key:"clearFeatures",value:function value(){if(this.features){var t=this.features.getFeatureCount();this.features.parent=null;for(var e=t;e>=0;e--){var n=this.features.features[e];this.removeFeature(n);}}return this;}},{key:"search",value:function value(t,e){for(var n=[],i=this._features.features,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a,u=s.properties;t in u&&e===u[t]&&n.push(s);}return n;}},{key:"searchByPoint",value:function value(t,e){if(!_.enableQuadTree)return console.warn("FeatureLayer: quadTree is disabled"),null;var n=[],i=[t,e];if(!this.clickable)return n;if(this._coordinateSystem){var r=this._coordinateSystem.getOffset(),o=r[0],a=r[1];i[0]+=o,i[1]+=a;}i[2]=i[0]+.01,i[3]=i[1]+.01,i[0]-=.01,i[1]-=.01;var s=this._quadTree.query(new(Function.prototype.bind.apply(p.geom.Envelope,[null].concat(i)))()),u=s.size();if(u>0)for(var l=v.default.getFactory().createPoint(new p.geom.Coordinate(i[0]+.01,i[1]+.01)),c=s.array_,h=Array.isArray(c),f=0,c=h?c:c[Symbol.iterator]();;){var d;if(h){if(f>=c.length)break;d=c[f++];}else{if(f=c.next(),f.done)break;d=f.value;}var g=d;g.geometry.contains(l)&&n.push(g);}return n;}},{key:"searchById",value:function value(t){return this._features.getFeatureById(t);}},{key:"_addFeature",value:function value(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&!this._features.has(t)&&this.renderer){if(t.onAdd&&!t.onAdd(this))return this;this._coordinateSystem&&this._coordinateSystem.getOffset()&&t.hasOffset&&this._offset(t),e&&this._features.addFeature(t),_.enableQuadTree&&this._quadTree.insert(t.geometry.getEnvelopeInternal(),t),t.parent=this,n&&this.emit("addFeature",this,t,this.renderer.getStyle(t));}return this;}},{key:"_offset",value:function value(t){if(this._coordinateSystem&&this._coordinateSystem.getOffset()&&t.hasOffset){var e=this._coordinateSystem.getOffset(),n=e[0],i=e[1],r=new y.default(function(t){for(var e=t.coordinates,r=Array.isArray(e),o=0,e=r?e:e[Symbol.iterator]();;){var a;if(r){if(o>=e.length)break;a=e[o++];}else{if(o=e.next(),o.done)break;a=o.value;}var s=a;s.x+=n,s.y+=i;}return t;});t.geometry=r.transform(t.geometry),t.geometry.zIndex=this._zIndex,this._zIndex+=this._subHeight,t.hasOffset=!1;}return this;}},{key:"clickable",get:function get(){return this._clickable;},set:function set(t){this._clickable=t;}},{key:"renderer",get:function get(){return this._renderer;},set:function set(t){this._renderer=t;}},{key:"features",get:function get(){return this._features;},set:function set(t){var e=t.features;if(!(0,b.isArray)(e))return void console.warn("Invalid Features");this.clearFeatures();for(var n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;this._addFeature(a,!1);}this._features=t;}},{key:"coordinateSystem",get:function get(){return this._coordinateSystem;},set:function set(t){this._coordinateSystem=t;}},{key:"parent",get:function get(){return this._parent;},set:function set(t){this._parent=t;}}]),e;}(l.default);e.default=x;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name=t,n.height=0,n;}return a(e,t),s(e,[{key:"height",get:function get(){return this._height;},set:function set(t){this._height=t;}},{key:"name",get:function get(){return this._name;},set:function set(t){this._name=t;}}]),e;}(l.default);e.default=c;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(2),s=i(a),u=(new s.Vector3(1,0,0),new s.Vector3(0,1,0),new s.Vector3(0,0,1),function(){function t(){r(this,t);}return o(t,null,[{key:"getRelCoord",value:function value(e,n,i,r){var o=t.projectOnVectorScalar(e,n),a=t.projectOnVectorScalar(e,i),u=t.projectOnVectorScalar(e,r);return new s.Vector3(o,a,u);}},{key:"getRelCoordOnPlane",value:function value(e,n,i){var r=t.projectOnVectorScalar(e,n),o=t.projectOnVectorScalar(e,i);return new s.Vector3(r,o,0);}},{key:"directionalAdd",value:function value(t,e,n){var i=t.clone(),r=e.clone();return r.normalize(),i.x+=n*r.x,i.y+=n*r.y,i.z+=n*r.z,i;}},{key:"projectOnVectorScalar",value:function value(t,e){return t.dot(e)/e.length();}},{key:"subVector",value:function value(t,e){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z||0};}},{key:"getAngle",value:function value(e,n){var i=t.getVectorDot(e,n)/window.Math.sqrt(t.getLengthSq(e)*t.getLengthSq(n));return window.Math.acos(t.clamp(i,-1,1));}},{key:"angleTo",value:function value(t){var e=window.Math.atan2(t.y,t.x);return e<0&&(e+=2*window.Math.PI),e;}},{key:"getVectorDot",value:function value(t,e){return t.x*e.x+t.y*e.y+t.z*e.z;}},{key:"getLengthSq",value:function value(t){return t.x*t.x+t.y*t.y+t.z*t.z;}},{key:"clamp",value:function value(t,e,n){return window.Math.max(e,window.Math.min(n,t));}}]),t;}());e.default=u;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(51),l=i(u),c=n(29),h=i(c),f=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._connection=t,i?(a.from=new h.default(t.to,n),a.to=new h.default(t.from,n)):(a.from=new h.default(t.from,n),a.to=new h.default(t.to,n)),a;}return a(e,t),s(e,[{key:"connection",get:function get(){return this._connection;}},{key:"weight",get:function get(){return this._connection.rank;}},{key:"altitude",get:function get(){return this.to.vertex.altitude;}}]),e;}(l.default);e.default=f;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i){n(this,t),this._vertex=e,this._vertexLoader=i,this.needCalcExtraPath=!1,this.g=0,this.h=0;}return i(t,[{key:"findPath",value:function value(t){return this._paths.get(t.vertex.id);}},{key:"_loadPaths",value:function value(){var t=this;this._paths||(this._paths=new Map(),this._vertexLoader.loadPaths(this.vertex,this.needCalcExtraPath).forEach(function(e){t._paths.set(e.to.vertex.id,e);}));}},{key:"toString",value:function value(){return this.vertex.toString();}},{key:"equals",value:function value(t){return this===t||!!t&&this.vertex.equals(t.vertex);}},{key:"parent",get:function get(){return this._parent;},set:function set(t){this._parent=t;}},{key:"vertex",get:function get(){return this._vertex;}},{key:"paths",get:function get(){return this._loadPaths(),this._paths.values();}},{key:"g",get:function get(){return this._g;},set:function set(t){this._g=t;}},{key:"h",get:function get(){return this._h;},set:function set(t){this._h=t;}},{key:"needCalcExtraPath",get:function get(){return this._needCalcExtraPath;},set:function set(t){this._needCalcExtraPath=t;}}],[{key:"compareTo",value:function value(t,e){return t.g+t.h-e.g-e.h>0?-1:1;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(26),l=i(u),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._layers={},n;}return a(e,t),s(e,[{key:"addLayer",value:function value(t){if(!this.has(t)){if(t.parent)return void console.warn("addLayer: Existed parent");t.parent=this,this._layers[t.name]=t,this.emit("addToGroup",this,t);}}},{key:"removeLayer",value:function value(t){this.has(t)&&(t.parent=null,delete this._layers[t.name],this.emit("removeToGroup",this,t));}},{key:"getLayer",value:function value(t){return this._layers[t];}},{key:"foreach",value:function value(t){for(var e in this._layers){t(e,this._layers[e]);}}},{key:"has",value:function value(t){return!!t&&t.name in this._layers;}},{key:"searchFeature",value:function value(t,n){for(var i in this._layers){var r=this._layers[i],o=null;if(r instanceof e?o=r.searchFeature(t,n):r.id===t&&(o=r.searchById(n)),o)return o;}return null;}}]),e;}(l.default);e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(51),l=i(u),c=n(29),h=i(c),f=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._path=t,a._reverse=i,i?(a.from=new h.default(t.to,n),a.to=new h.default(t.from,n)):(a.from=new h.default(t.from,n),a.to=new h.default(t.to,n)),a;}return a(e,t),s(e,[{key:"path",get:function get(){return this._path;}},{key:"reverse",get:function get(){return this._reverse;}},{key:"weight",get:function get(){return this._path.shape.getLength()*(this._path.rank+1);}},{key:"altitude",get:function get(){return this._path.altitude;}}]),e;}(l.default);e.default=f;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(49),u=i(s),l=n(140),c=i(l),h=n(52),f=i(h),d=n(143),p=i(d),g=n(146),v=i(g),m=n(54),y=i(m),_=n(28),b=i(_),x=n(8),w=i(x),E=n(4),S=n(3),M="undefined"==typeof Promise?n(14).Promise:Promise,C=1,I=function(){function t(e,n){r(this,t),this._dataSource=e,this._options=o({},n||{});var i=this._options,a=i.vertex,s=i.path,u=i.connection,l=i.g,h=i.h;if(a&&s&&u){var d=new y.default(a,s,u);this._astar=new c.default(l||new f.default(),h||new p.default(),new v.default(d)),this._offLine=!0;}}return a(t,[{key:"navigate",value:function value(t){var e=this;return this._offLine?new M(function(n,i){try{var r=w.default.getFactory().createPoint(new E.geom.Coordinate(t.from_x,t.from_y)),o=w.default.getFactory().createPoint(new E.geom.Coordinate(t.to_x,t.to_y)),a=e._astar.astar(r,t.from_planar_graph,o,t.to_planar_graph,t.planarGraphIdList||null),s={},u=[];s.type="FeatureCollection",s.features=[];for(var l in a){var c=a[l],h={};if(c instanceof b.default)u.push(c);else{if(h.type="Feature",h.properties={planar_graph:c.from.vertex.planarGraphId,hasTransitPoint:!1,poi:null},u.length>0){var f=s.features.pop();f&&(f.properties.poi=u[0].connection.fromLocationId,s.features.push(f)),h.properties.poi=u.pop().connection.toLocationId,u=[];}var d=c.path.shape;if(c.reverse){var p=d.getCoordinates().map(function(t){var e=t.x,n=t.y,i=t.z;return new E.geom.Coordinate(e,n,i);});p.reverse(),d=new E.geom.LineString(w.default.getFactory().getCoordinateSequenceFactory().create(p),w.default.getFactory());}h.geometry=w.default.getGeoWriter().write(d),s.features.push(h);}}e._rawNavigates=s,e._parseNavi(s),n(e._navigates);}catch(t){i(t);}}):this._dataSource.requestNavigation(t).then(function(t){return(0,S.isBoolean)(t)?null:(e._rawNavigates=t,e._parseNavi(t),e._navigates);});}},{key:"transit",value:function value(t){var e=this;return this._dataSource.requestTransitNavigation(t).then(function(t){return e._parseNavi(t),e._navigates;});}},{key:"getNavigateByPlanarGraph",value:function value(t){return this._navigates&&this._navigates[t]?this._navigates[t].copy():null;}},{key:"getClosestPoints",value:function value(t,e,n){var i=w.default.getFactory(),r=i.createPoint(new E.geom.Coordinate(e,n)),o=this._navigates[t].features,a=o.map(function(t){return t.geometry;}),s=i.createMultiLineString(a),u=new E.operation.distance.DistanceOp(s,r),l=u.nearestPoints();return l.pop(),l.map(function(t){return t.copy();});}},{key:"_getDistance",value:function value(t,e){var n=0;return n=Math.hypot?Math.hypot(e.x-t.x,e.y-t.y):Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));}},{key:"_getArrayPointsDistance",value:function value(t,e){if(!t||!e)return null;var n=new E.geom.Coordinate(t[0],t[1]),i=new E.geom.Coordinate(e[0],e[1]);return this._getDistance(n,i);}},{key:"getWholeDistance",value:function value(){var t=this._distances,e=0;if(t)for(var n in t){for(var i=t[n],r=i,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;e+=u;}}return e;}},{key:"getDistancesByPlanarGraph",value:function value(t){return this._distances?this._distances[t]:null;}},{key:"getPlanarGraphOrder",value:function value(){return this._naviOrder;}},{key:"getTransitByPlanarGraph",value:function value(t){return this._transit?this._transit[t].copy():null;}},{key:"getConnectionInfo",value:function value(){return this._connectionInfo;}},{key:"getConnectionInfoByPlanarGraph",value:function value(t){return this._connectionInfo?this._connectionInfo[t]:null;}},{key:"getRawFC",value:function value(){return this._rawNavigates;}},{key:"_parseNavi",value:function value(t){var e={},n={},i=t.features,r=-1,a=void 0,s=0;this._navigates={},this._transit={},this._naviOrder=[],this._connectionInfo={},this._distances={};for(var l=i,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var d=f,p=d.properties,g=d.geometry.coordinates,v=p.hasTransitPoint,m=p.poi,y=p.planar_graph,_=this._naviOrder[this._naviOrder.length-1];if(_!==y&&(this._naviOrder.push(y),this._connectionInfo[y]=[],this._distances[y]=[],this._distances[_]&&this._distances[_].push(s),s=0),y){var b=this._createFs(y,e);a=this._createF(b,a,y,r,"LineString",m);for(var x=g,w=Array.isArray(x),E=0,x=w?x:x[Symbol.iterator]();;){var S;if(w){if(E>=x.length)break;S=x[E++];}else{if(E=x.next(),E.done)break;S=E.value;}var M=S,C=a.geometry.coordinates[a.geometry.coordinates.length-1],I=this._getArrayPointsDistance(C,M);C&&I<.01||(a.geometry.coordinates.push(M.concat()),s+=I);}}if(v){var O=this._createFs(y,n),T=this._createF(O,null,y,-1,"Point"),P=g[g.length-1];delete T.properties.poi,T.geometry.coordinates.push(P.concat());}m&&this._connectionInfo[y].push(o({},p)),r=y;}this._distances[r].push(s);for(var A in e){this._navigates[A]=u.default.parse(A,e[A]);}for(var L in n){this._transit[L]=u.default.parse(L,n[L]);}}},{key:"_createFs",value:function value(t,e){var n=e[t];return n||(n={type:"FeatureCollection",features:[]},e[t]=n),n;}},{key:"_createF",value:function value(t,e,n,i,r,o){var a=e;return n!==i?(a={type:"Feature",properties:{id:C++,poi:[o]},geometry:{type:r,coordinates:[]}},t.features.push(a)):a.properties.poi[1]=o,a;}}]),t;}();e.default=I;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"generator",value:function value(t){console.log("Please set StyleGenerator to "+t.name+" Layer");}}]),t;}();e.default=r;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t),this.clientX=this.clientY=this.pageX=this.pageY=0;}return i(t,[{key:"clientX",get:function get(){return this._clientX;},set:function set(t){this._clientX=t;}},{key:"clientY",get:function get(){return this._clientY;},set:function set(t){this._clientY=t;}},{key:"pageX",get:function get(){return this._pageX;},set:function set(t){this._pageX=t;}},{key:"pageY",get:function get(){return this._pageY;},set:function set(t){this._pageY=t;}},{key:"screenX",get:function get(){return this._screenX;},set:function set(t){this._screenX=t;}},{key:"screenY",get:function get(){return this._screenY;},set:function set(t){this._screenY=t;}},{key:"detail",get:function get(){return this._detail;},set:function set(t){this._detail=t;}}]),t;}();e.default=r;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t),this.touches=[],this.type="none",this.rotate=this.scale=0;}return i(t,[{key:"touches",get:function get(){return this._touchs;},set:function set(t){this._touchs=t;}},{key:"type",get:function get(){return this._type;},set:function set(t){this._type=t;}},{key:"rotate",get:function get(){return this._rotate;},set:function set(t){this._rotate=t;}},{key:"scale",get:function get(){return this._scale;},set:function set(t){this._scale=t;}},{key:"target",get:function get(){return this._target;},set:function set(t){this._target=t;}}]),t;}();e.default=r;},function(t,e){t.exports={name:"nagrand-webgl",version:"3.0.0",description:"",main:"index.js",scripts:{"webpack-dev":"webpack-dev-server --port 8080 --config ./scripts/webpack.config.babel.js --progress --display-error-details","webpack-build":" webpack --progress --config ./scripts/webpack.config.babel.js",start:"NODE_ENV=development BUILD_ENV=standard npm run webpack-dev","build-dev":"NODE_ENV=development BUILD_ENV=standard npm run webpack-build",build:"NODE_ENV=production BUILD_ENV=standard npm run webpack-build","build-lite":"NODE_ENV=production BUILD_ENV=lite npm run webpack-build","start:win":"set NODE_ENV=development&& set BUILD_ENV=standard&& npm run webpack-dev","build:win":"set NODE_ENV=development&& set BUILD_ENV=standard&& npm run webpack-build","build-lite:win":"set NODE_ENV=development&& set BUILD_ENV=lite&& npm run webpack-build",prebuild:"npm run clean","prebuild:win":"npm run clean",clean:"rimraf ./build",test:"mocha ./test/**/*.spec.js","build-examples":"metalsmith",jsdoc:"rimraf ./docs && jsdoc src lib/three-ext/planeLine lib/three-ext/tube -R src/README.md -r -c ./conf.json -d docs"},config:{commitizen:{path:"cz-conventional-changelog"}},author:"Palmap.Inc <sdk@palmaplus.com>",license:"UNLICENSED",devDependencies:{"babel-cli":"^6.10.1","babel-eslint":"^6.1.2","babel-loader":"^6.2.4","babel-preset-es2015":"^6.24.0","babel-preset-stage-3":"^6.11.0","babel-plugin-transform-es2015-for-of":"^6.23.0","babel-plugin-es6-promise":"^1.1.1","babel-plugin-transform-object-rest-spread":"^6.23.0","babel-polyfill":"^6.23.0","babel-plugin-transform-class-properties":"^6.23.0",chai:"^3.5.0","css-loader":"^0.23.1","cz-conventional-changelog":"^1.1.6",debug:"^2.6.0",docdash:"^0.4.0","es6-promise":"^4.0.5",eslint:"^3.3.1","eslint-loader":"^1.4.1","eslint-plugin-flow-vars":"^0.4.0","extract-text-webpack-plugin":"^1.0.1","file-loader":"^0.9.0",handlebars:"^4.0.2","html-loader":"^0.4.3","html-webpack-plugin":"^2.22.0","image-webpack-loader":"^2.0.0",jsdoc:"^3.4.3","json-loader":"^0.5.4",metalsmith:"^2.3.0","metalsmith-layouts":"1.8.0",mocha:"^2.5.3","postcss-loader":"^0.9.1","postcss-pxtorem":"^4.0.1",rimraf:"^2.5.3","style-loader":"^0.13.1","url-loader":"^0.5.7",webpack:"^1.13.1","webpack-dev-server":"^1.14.1","worker-loader":"^0.7.1"},dependencies:{"object-assign":"^4.1.0",rbush:"^2.0.1",hammerjs:"^2.0.8","string-hash":"^1.1.0",priorityqueuejs:"^1.0.0","tween.js":"~16.6.0","polyline-normals":"^2.0.0","three-line-2d":"^1.1.6","as-number":"^1.0.0","@hughsk/fulltilt":"^0.7.1"}};},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t;};},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t),this._callbacks={};}return i(t,[{key:"on",value:function value(t,e){var n=this._callbacks;return n[t]=n[t]||[],n[t].push(e),this;}},{key:"once",value:function value(t,e){var n=this,i=function i(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++){o[a]=arguments[a];}n.off(t,i),e.apply(n,o);};return i.fn=e,this.on(t,i),this;}},{key:"off",value:function value(t,e){var n=this._callbacks;if("undefined"==typeof t)return n={},this;var i=n[t];if(!i)return this;if("undefined"==typeof e)return delete n[t],this;for(var r=0,o=i.length;r<o;r++){var a=i[r];if(a===e||a.fn===e){i.splice(r,1);break;}}return this;}},{key:"emit",value:function value(t){var e=this._callbacks[t],n=e&&e.length;if(n){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++){r[o-1]=arguments[o];}for(var a=0;a<n;a++){e[a].apply(this,r);}}return this;}},{key:"listeners",value:function value(t){return this._callbacks[t]||[];}},{key:"hasListeners",value:function value(t){return!!this.listeners(t).length;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function r(t){return new c(function(e,n){t.onloaded=function(){return e(t.result);},t.onerror=function(){return n(t.error);};});}function o(t){var e=new FileReader();return e.readAsArrayBuffer(t),r(e);}function a(t){var e=new FileReader();return e.readAsText(t),r(e);}function s(t){var e=new FormData();return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\\+/g," "),r=n.join("=").replace(/\\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r));}}),e;}function u(t){return t.bodyUsed?c.reject(new TypeError("Body locked yet")):void(t.bodyUsed=!0);}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c="undefined"==typeof Promise?n(14).Promise:Promise,h={string:"text/plain;charset=UTF-8",json:"application/json",urlencoded:"application/x-www-form-urlencoded;charset=UTF-8"},f="FileReader"in self&&"Blob"in self,d="FormData"in self,p="ArrayBuffer"in self,g="URLSearchParams"in self,v=function(){function t(){i(this,t),this.bodyUsed=!1;}return l(t,[{key:"_initBody",value:function value(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(f&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p&&ArrayBuffer.prototype.isPrototypeOf(t));else if(d&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{if(t)throw new Error("Unsupported body type");this._bodyText="";}if(!this.headers.get("Content-Type"))if("string"==typeof t)try{JSON.parse(t),this.headers.set("Content-Type",h.json);}catch(t){this.headers.set("Content-Type",h.string);}else this._bodyBlob&&this._bodyBlob.type?this.headers.set("Content-Type",this._bodyBlob.type):g&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("Content-Type",h.urlencoded);}},{key:"blob",value:function value(){var t=u(this);if(t)return t;if(f){if(this._bodyBlob)return c.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read formData body as blob");return c.resolve(new Blob([this._bodyText]));}}},{key:"arrayBuffer",value:function value(){return this.blob().then(o);}},{key:"formData",value:function value(){if(d)return this.text().then(s);}},{key:"json",value:function value(){return this.text().then(JSON.parse);}},{key:"text",value:function value(){var t=u(this);if(t)return t;if(f){if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read formData body as text");}return c.resolve(this._bodyText);}}]),t;}();e.default=v;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function s(t){var e=t.toUpperCase();if(g.indexOf(e)!==-1)return e;throw new Error("invalid method name");}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},h=n(39),f=i(h),d=n(20),p=i(d),g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],v={mode:"cors",method:"GET",credientials:"omit"},m=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=u({},v,n),l=n.body;if(e.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Body already locked");l||(l=t.body,t.bodyUsed=!0),a.headers||(i.headers=new p.default(t.headers)),i.url=t.url,i.mode=t.mode,i.method=t.method,i.credientials=t.credientials;}else i.url=t;if(i.method=s(a.method||i.method),!a.headers&&i.headers||(i.headers=new p.default(a.headers)),i.mode=a.mode||i.mode,i.credientials=a.credientials||i.credientials,i.referrer=null,("GET"===i.method||"HEAD"===i.method)&&l)throw new TypeError("Body not allowed for GET or HEAD requests");return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initBody",i).call(i,l),i;}return a(e,t),l(e,[{key:"clone",value:function value(){return new e(this);}}]),e;}(f.default);e.default=m;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=n(39),c=i(l),h=n(20),f=i(h),d=[301,302,303,307,308],p={status:200,statusText:"OK",body:null,type:"default"},g=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.status<200||n.status>=599)throw new RangeError("Invalid response status code");var a=n.status,s=n.statusText,l=n.headers,c=n.url;return i.status=a,i.ok=a>=200&&i.status<300,i.statusText=s,i.headers=l instanceof f.default?l:new f.default(l),i.url=c,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initBody",i).call(i,t),i;}return a(e,t),s(e,[{key:"clone",value:function value(){var t=this.status,n=this.statusText,i=this.headers,r=this.url;return new e(this,{status:t,statusText:n,headers:new f.default(i),url:r});}}],[{key:"error",value:function value(){var t=new e(null,{status:0,statusText:""});return t.type="error",t;}},{key:"redirect",value:function value(t,n){if(d.indexOf(n)===-1)throw new RangeError("Invalid redirect status code");return new e(null,{status:n,headers:{location:t}});}}]),e;}(c.default);e.default=g;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=i(r);e.default={center:new o.Vector2(0,0),left:new o.Vector2(1,0),topLeft:new o.Vector2(1,-1),topRight:new o.Vector2(-1,-1),right:new o.Vector2(-1,0),bottomLeft:new o.Vector2(1,1),bottomRight:new o.Vector2(-1,1)};},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=n(3),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.name?"floor-"+t.name:"floor",i=t.className?" "+t.className:"",a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s({position:"bottomright"},t)));return a._element&&console.warn("FloorControl: Element will be overrided"),a.floorMap={},a.defaultFloor=null,a._element=f.DOMUtils.createElement("div","ngr-floor-switcher ngr-bar"+i),a._onItemClick=a._onItemClick.bind(a),a;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this._setFloorList(),this._setCurrentFloor(),this;}},{key:"setFloorList",value:function value(t){return this.floorList=t,this._setFloorList(),this;}},{key:"_onItemClick",value:function value(t){return t.preventDefault(),t.stopPropagation(),f.DOMUtils.hasClass(t.target,"ngr-disabled")?this:(this.fire("change",{from:this.currentFloor,to:t.target.floor,targetControl:this}),this);}},{key:"_setFloorList",value:function value(){if(this._map&&this.floorList){for(this.floorMap={};this._element.firstChild;){this._element.firstChild.removeEventListener("click",this._onItemClick),this._element.removeChild(this._element.firstChild);}for(var t=this.floorList,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++];}else{if(n=t.next(),n.done)break;i=n.value;}var r=i,o=f.DOMUtils.createElement("a","",this._element);o.innerHTML=r.address,o.href="#",o.floor=r.id,o.altitude=r.altitude,o.addEventListener("click",this._onItemClick),this.floorMap[r.id]=o;}}return this;}},{key:"getCurrentFloor",value:function value(){return this.currentFloor;}},{key:"_disable",value:function value(t){var e=this.floorMap[t];e&&f.DOMUtils.addClass(e,"ngr-disabled");}},{key:"_enable",value:function value(t){var e=this.floorMap[t];e&&f.DOMUtils.removeClass(e,"ngr-disabled");}},{key:"disable",value:function value(t){if((0,d.isBlank)(t))for(var e in this.floorMap){this._disable(e);}else this._disable(t);return this;}},{key:"enable",value:function value(t){if((0,d.isBlank)(t))for(var e in this.floorMap){this._enable(e);}else this._enable(t);return this;}},{key:"handleClass",value:function value(t,e,n){if((0,d.isBlank)(e))return this;var i=[];if((0,d.isBlank)(t))for(var r in this.floorMap){i.push(r);}else(0,d.isArray)(t)&&(i=t);for(var o=i,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++];}else{if(s=o.next(),s.done)break;u=s.value;}var l=u,c=this.floorMap[l];c&&n(c,e);}return this;}},{key:"addClass",value:function value(t,e){return this.handleClass(t,e,f.DOMUtils.addClass);}},{key:"removeClass",value:function value(t,e){return this.handleClass(t,e,f.DOMUtils.removeClass);}},{key:"setCurrentFloor",value:function value(t,e){return this.currentFloor=t,this._setCurrentFloor(),(0,d.isFunction)(e)&&e(t),this;}},{key:"_setCurrentFloor",value:function value(){if(!this._map||!this._element)return this;var t=this.floorMap[this.currentFloor];if(t){for(var e in this.floorMap){var n=this.floorMap[e];f.DOMUtils.removeClass(n,"selected");}f.DOMUtils.addClass(t,"selected");}return this;}}]),e;}(h.default);e.default=p;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.DimensionControl=e.ToggleControl=e.MultiFloorControl=e.FacilityControl=e.ZoomControl=e.SliderControl=e.ScaleControl=e.FloorControl=e.Control=e.CompassControl=void 0;var r=n(113),o=i(r),a=n(11),s=i(a),u=n(43),l=i(u),c=n(117),h=i(c),f=n(118),d=i(f),p=n(119),g=i(p),v=n(115),m=i(v),y=n(116),_=i(y),b=n(22),x=i(b),w=n(114),E=i(w);e.CompassControl=o.default,e.Control=s.default,e.FloorControl=l.default,e.ScaleControl=h.default,e.SliderControl=d.default,e.ZoomControl=g.default,e.FacilityControl=m.default,e.MultiFloorControl=_.default,e.ToggleControl=x.default,e.DimensionControl=E.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(23),s=i(a),u=n(16),l=i(u),c=n(26),h=i(c),f=n(27),d=i(f),p=n(4),g=function(){function t(){r(this,t);}return o(t,null,[{key:"featurePolygon2Point",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(t instanceof s.default))return console.warn("Invalid Feature"),null;var n=t.geometry.getGeometryType();if("Polygon"!==n&&"MultiPolygon"!==n)return console.warn("Invalid Geometry"),null;var i={},r=t.geometry;if(e)r=r.getInteriorPoint();else{var o=r.getEnvelopeInternal();r=r.factory.createPoint(new p.geom.Coordinate(o.minx+(o.maxx-o.minx)/2,o.miny+(o.maxy-o.miny)/2,0));}for(var a in t.properties){i[a]=t.properties[a];}return new s.default(r,i);}},{key:"featureCollectionPolygon2Point",value:function value(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(e instanceof l.default))return console.warn("Invalid FeatureCollection"),null;for(var i=new l.default(e.name),r=[],o=void 0,a=void 0,s=e.features,u=Array.isArray(s),c=0,s=u?s:s[Symbol.iterator]();;){if(u){if(c>=s.length)break;o=s[c++];}else{if(c=s.next(),c.done)break;o=c.value;}a=t.featurePolygon2Point(o,n),a&&r.push(a);}return i.features=r,i;}},{key:"fuckYouBitch",value:function value(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(t instanceof s.default))return console.warn("f__k off"),null;var i=t.geometry.getGeometryType(),r={},o=t.geometry;if("Polygon"!==i&&"MultiPolygon"!==i)return console.warn("f__k off"),null;if(n){o=o.getInteriorPoint();var a=o.getCoordinate();a.z=e||0;}else{var u=o.getEnvelopeInternal();o=o.factory.createPoint(new p.geom.Coordinate(u.minx+(u.maxx-u.minx)/2,u.miny+(u.maxy-u.miny)/2,e||0));}for(var l in t.properties){r[l]=t.properties[l];}return new s.default(o,r);}},{key:"kickYourAss",value:function value(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(e instanceof l.default&&n instanceof h.default))return console.warn("f__k off"),null;var r=new l.default(n.features.name),o=[];return n.visit(function(n,r){var a=e.getFeatureById(n.id),s=t.fuckYouBitch(a,r.height,i);s&&o.push(s);}),r.features=o,r;}},{key:"getHightLightOffset",value:function value(t,e){var n=[];if(!(t instanceof Array&&e instanceof Array&&t.length>0&&e.length>0))return n;for(var i=e,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;if("string"!=typeof s)return n;}for(var u=t,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var h;if(l){if(c>=u.length)break;h=u[c++];}else{if(c=u.next(),c.done)break;h=c.value;}var f=h;if("string"!=typeof f)return n;var d=[];n.push(d);for(var p=e,g=Array.isArray(p),v=0,p=g?p:p[Symbol.iterator]();;){var m;if(g){if(v>=p.length)break;m=p[v++];}else{if(v=p.next(),v.done)break;m=v.value;}for(var y=m,_=0,b=0;_>=0;){_=f.indexOf(y,b),b=_+y.length,_>=0&&d.push(_,b);}}}return n;}},{key:"getMapAngle",value:function value(t){var e=0;if(t&&t.angle_line){var n=t.angle_line,i=new p.geom.Coordinate(0,1,0),r=new p.geom.Coordinate(n.coordinates[1][0]-n.coordinates[0][0],n.coordinates[1][1]-n.coordinates[0][1],0);e=d.default.getAngle(i,r),e*=180/window.Math.PI;}return e;}}]),t;}();e.default=g;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.PlanarGraph=e.FeatureCollection=e.Feature=e.DataUtil=e.DataSource=void 0;var r=n(121),o=i(r),a=n(45),s=i(a),u=n(23),l=i(u),c=n(16),h=i(c),f=n(122),d=i(f);e.DataSource=o.default,e.DataUtil=s.default,e.Feature=l.default,e.FeatureCollection=h.default,e.PlanarGraph=d.default;},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},i=function i(t){n[t.type]=!0;},r=function r(t){var e=n[t.type];return n[t.type]=!1,e;},o=function o(t){return"undefined"==typeof t.className.baseVal?t.className:t.className.baseVal;},a=function a(t,e){"undefined"==typeof t.className.baseVal?t.className=e:t.className.baseVal=e;},s=function s(t,e,n){var i=document.createElement(t);return i.className=e,n&&n.appendChild(i),i;},u=function u(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var n=o(t);return n.length>0&&new RegExp("(^|\\\\s)"+e+"(\\\\s|$)").test(n);},l=function l(t,e){if("undefined"!=typeof t.classList)for(var n=e.trim().split(/\\s+/),i=n,r=Array.isArray(i),s=0,i=r?i:i[Symbol.iterator]();;){var l;if(r){if(s>=i.length)break;l=i[s++];}else{if(s=i.next(),s.done)break;l=s.value;}var c=l;t.classList.add(c);}else if(!u(t,e)){var h=o(t);a(t,""+(h?h:" ")+e);}},c=function c(t,e){if("undefined"!=typeof t.classList)t.classList.remove(e);else{var n=o(t);n=(" "+n+" ").replace(" "+e+" "," ").trim(),a(t,n);}},h=function h(t){t.stopPropagation?t.stopPropagation():t.cancelBubble(),r(t);},f=function f(t){for(var e=h,n=document.ontouchstart?["touchstart","mousedown"]:["mousedown"],r=n,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;t.addEventListener(u,e);}t.addEventListener("click",i),t.addEventListener("dblclick",e);},d=function d(t){t.preventDefault?t.preventDefault():t.returnValue=!1;},p=function p(t){d(t),h(t);};e.createElement=s,e.hasClass=u,e.addClass=l,e.removeClass=c,e.stopPropagation=h,e.disableClickPropagation=f,e.preventDefault=d,e.stop=p;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(123),h=r(c),f=n(2),d=i(f),p=n(88),g=(r(p),n(94)),v=r(g),m=n(60),y=r(m),_=n(174),b=r(_),x=n(166),w=n(167),E=n(111),S=r(E),M=n(6),C=r(M),I=n(108),O=r(I),T=n(184),P=r(T),A=n(185),L=r(A),N=n(186),k=r(N),R=n(7),D=n(69),F=n(12),B=n(3),j=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._renderers={},t._domRendererrs={},C.default.getInstance().provider=new O.default(),t;}return s(e,t),u(e,[{key:"_createCorner",value:function value(t,e,n,i){var r="ngr-",o=""+t+e,a=""+r+t+" "+r+e;i[o]=R.DOMUtils.createElement("div",a,n);}},{key:"_creatControlContainer",value:function value(){var t=R.DOMUtils.createElement("div","ngr-control-container"),e={};return this._createCorner("top","left",t,e),this._createCorner("top","right",t,e),this._createCorner("bottom","left",t,e),this._createCorner("bottom","right",t,e),{container:t,corners:e};}},{key:"initMapView",value:function value(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initMapView",this).call(this,t,n);if(i&&t){var r=null;if((0,B.isString)(t.name)?(r=document.getElementById(t.name),r||(r=document.querySelector(t.name))):t.name instanceof HTMLElement&&(r=t.name),!r)throw new Error("Invalid mapView container");var o=n.devicePixelRatio,a=void 0===o?window.devicePixelRatio:o,s=n.width,u=void 0===s?r.clientWidth:s,c=n.height,h=void 0===c?r.clientHeight:c,f=n.clearColor,p=void 0===f?14408667:f,g=n.autoClear,m=void 0===g||g,_=n.fps,E=n.clearImage,M=new b.default(),C=new d.WebGLRenderer({antialias:!0,preserveDrawingBuffer:m,alpha:!0,SpritePlugin:v.default}),I=new d.CSS2DRenderer(),O=this._creatControlContainer(),T=O.container,A=O.corners,N=new P.default(),j=t.activeCamera;if(t.changeMapViewLifeCycle(0),t.width=u,t.height=h,t.engine=this,t.sceneGenerator=M,C.autoClear=!m,C.setPixelRatio(a),C.setSize(u,h),I.setSize(u,h),this._renderers[t.name]=C,this._domRendererrs[t.name]=I,_&&_>0&&_<60?t.renderLoop=new D.LockFPSRenderLoop({fps:n.fps}):t.renderLoop=new D.AnimationFrameRenderLoop(),t.container=r,t.targetDom=C.domElement,t.controlDom=T,t.controlCorners=A,t._overlayDom=I.domElement,R.DOMUtils.addClass(C.domElement,"ngr-target"),R.DOMUtils.addClass(t._overlayDom,"ngr-overlay-container"),r.appendChild(T),r.appendChild(C.domElement),r.appendChild(t._overlayDom),E?(C.setClearColor(0,0),R.DOMUtils.addClass(t.targetDom,"clear-image"),t.targetDom.style.backgroundImage="url("+E+")"):C.setClearColor(p),N.init(t),N.addGesture(new L.default()),N.addGesture(new k.default()),t.gestureManager=N,j){var U=new S.default(j,t);if(M._threeNode.add(j),t.activeControl=U,j.camera.aspect=u/h,j.camera.updateProjectionMatrix(),F.supportParticle){var z=new y.default(),G=new w.ParticleNode(w.ParticleNodeId);t.particleEngine=z,M._threeNode.add(G);}var V=new x.OverlayNode(x.OverlayNodeId);V.add(j),t.sceneManager.add(V);}t.changeMapViewLifeCycle(1);}return i;}},{key:"reSize",value:function value(t,e,n){var i=this.getRenderer(t),r=this.getDomRenderer(t);i.setSize(e,n),r.setSize(e,n),t.width=e,t.height=n;}},{key:"remove",value:function value(t){var n=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this,t);if(n){var i=this._renderers[t.name];t.destroy(),i.dispose(),this._empty(t.container),delete this._renderers[t.name],delete this._domRendererrs[t.name];}return n;}},{key:"getRenderer",value:function value(t){return this._renderers[t.name];}},{key:"getRenderInfo",value:function value(t){var e=this._renderers[t.name].info,n=e.render,i=n.faces,r=n.points,o=n.vertices,a=n.calls,s=e.memory.geometries;return{faces:i,points:r,vertices:o,calls:a,geometries:s};}},{key:"getDomRenderer",value:function value(t){return this._domRendererrs[t.name];}},{key:"type",value:function value(){return"three";}},{key:"_empty",value:function value(t){for(;t.lastChild;){t.removeChild(t.lastChild);}}}]),e;}(h.default);e.default=j;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++){n[e]=t[e];}return n;}return Array.from(t);}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(8),l=i(u),c=n(4),h=n(16),f=i(h),d=n(23),p=i(d),g=n(3),v=function(){function t(){o(this,t);}return s(t,null,[{key:"parse",value:function value(e,n){return(0,g.isString)(n)?t.parseByStr(e,n):"object"===("undefined"==typeof n?"undefined":a(n))?t.parseByObj(e,n):null;}},{key:"parseByStr",value:function value(e,n){return t.parseByObj(e,JSON.parse(n));}},{key:"parseByObj",value:function value(t,e){for(var n=new f.default(t),i=e.features,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;n.addFeature(new p.default(l.default.getGeoReader().read(s.geometry),s.properties));}return n;}},{key:"parseLineString",value:function value(t,e,n){var i=e.map(function(t){return new(Function.prototype.bind.apply(c.geom.Coordinate,[null].concat(r(t))))();}),o=l.default.getFactory().createLineString(i),a=new f.default(t);return a.addFeature(new p.default(o,n)),a;}},{key:"parsePoints",value:function value(t,e,n){for(var i=new f.default(t),o=e,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++];}else{if(s=o.next(),s.done)break;u=s.value;}var h=u,d=new(Function.prototype.bind.apply(c.geom.Coordinate,[null].concat(r(h))))(),g=l.default.getFactory().createLinePoint(d);n&&n.id&&n.id++,i.addFeature(new p.default(g,n));}return i;}}]),t;}();e.default=v;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.SBLocationProvider=e.LocationStatus=e.LocationType=e.WiFiLocationManager=e.BleWorkerManager=e.BluetoothLocationManager=void 0;var r=n(133),o=i(r),a=n(132),s=i(a),u=n(136),l=n(135),c=i(l);e.BluetoothLocationManager=o.default,e.BleWorkerManager=s.default,e.WiFiLocationManager=u.WiFiLocationManager,e.LocationType=u.LocationType,e.LocationStatus=u.LocationStatus,e.SBLocationProvider=c.default;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"weight",get:function get(){}},{key:"altitude",get:function get(){}},{key:"from",get:function get(){return this._from;},set:function set(t){this._from=t;}},{key:"to",get:function get(){return this._to;},set:function set(t){this._to=t;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(144),l=i(u),c=n(31),h=i(c),f=n(28),d=i(f),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"g",value:function value(t,e,n){if(e instanceof h.default)return e.weight;if(e instanceof d.default){if(0===n)return 1e4;if(n>2){var i=e.connection.categoryId?e.connection.categoryId.toString():null;if(/2409[2-9]000/.test(i)||13164e3===e.connection.categoryId)return 1e4;}else{var r=e.connection.categoryId?e.connection.categoryId.toString():null;if(/2409[7-9]000/.test(r)||13164e3===e.connection.categoryId)return 1e4;if(24091e3===e.connection.categoryId||24092e3===e.connection.categoryId){var o=t.parent.findPath(t);return o instanceof d.default&&(24091e3===o.connection.categoryId||24092e3===e.connection.categoryId)?30:190;}}return 60;}return 0;}}]),e;}(l.default);e.default=p;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i,r,o,a,s,u){n(this,t),this.mapId=e,this.rank=i,this.direction=r,this.shape=o,this.planarGraphId=a,this.pathId=s,this.altitude=u;}return i(t,[{key:"toString",value:function value(){return 31*this.id+this.planarGraphId;}},{key:"equals",value:function value(t){return this===t||!!t&&this.id===t.id&&this.planarGraphId===t.planarGraphId;}},{key:"id",get:function get(){return this._id;},set:function set(t){this._id=t;}},{key:"mapId",get:function get(){return this._mapId;},set:function set(t){this._mapId=t;}},{key:"rank",get:function get(){return this._rank;},set:function set(t){this._rank=t;}},{key:"direction",get:function get(){return this._direction;},set:function set(t){this._direction=t;}},{key:"shape",get:function get(){return this._shape;},set:function set(t){this._shape=t;}},{key:"from",get:function get(){return this._from;},set:function set(t){this._from=t;}},{key:"to",get:function get(){return this._to;},set:function set(t){this._to=t;}},{key:"planarGraphId",get:function get(){return this._planarGraphId;},set:function set(t){this._planarGraphId=t;}},{key:"pathId",get:function get(){return this._pathId;},set:function set(t){this._pathId=t;}},{key:"altitude",get:function get(){return this._altitude;},set:function set(t){this._altitude=t;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(55),s=i(a),u=n(53),l=i(u),c=n(141),h=i(c),f=n(8),d=i(f),p=n(4),g=function(){function t(e,n,i){if(r(this,t),!e||!n||!i)throw new Error("PathService: Invalid input");var o="string"==typeof e?JSON.parse(e):e,a="string"==typeof n?JSON.parse(n):n,u="string"==typeof i?JSON.parse(i):i,c=new p.io.GeoJSONReader(d.default.getFactory());this._vertexes={},this._paths={},this._pathsMapping={},this._connections={},this._connectionsMapping={},this._quadtreeMapping={};for(var f=o,g=Array.isArray(f),v=0,f=g?f:f[Symbol.iterator]();;){var m;if(g){if(v>=f.length)break;m=f[v++];}else{if(v=f.next(),v.done)break;m=v.value;}var y=m,_=new s.default(y.mapId,c.read(y.shape),y.planarGraphId,y.altitude);_.id=y.id,_.virtual=y.virtual,this._vertexes[y.id]=_;}for(var b in a){var x=a[b];this._paths[b]={},this._pathsMapping[b]={},this._quadtreeMapping[b]=new p.index.quadtree.Quadtree();for(var w in x){var E=x[w];this._pathsMapping[b][w]=[];for(var S=E,M=Array.isArray(S),C=0,S=M?S:S[Symbol.iterator]();;){var I;if(M){if(C>=S.length)break;I=S[C++];}else{if(C=S.next(),C.done)break;I=C.value;}var O=I;if(!this._paths[b][O.id]){var T=new l.default(O.mapId,O.rank,O.direction,c.read(O.shape),O.planarGraphId,O.pathId,O.altitude);T.id=O.id,T.from=this._vertexes[O.from],T.to=this._vertexes[O.to],this._paths[b][O.id]=T,this._quadtreeMapping[b].insert(T.shape.getEnvelopeInternal(),T);}this._pathsMapping[b][w].push(this._paths[b][O.id]);}}}for(var P in u){var A=u[P];this._connections[P]={},this._connectionsMapping[P]={};for(var L in A){var N=A[L];this._connectionsMapping[P][L]=[];for(var k=N,R=Array.isArray(k),D=0,k=R?k:k[Symbol.iterator]();;){var F;if(R){if(D>=k.length)break;F=k[D++];}else{if(D=k.next(),D.done)break;F=D.value;}var B=F;if(!this._connections[P][B.id]){var j=new h.default(B.mapId,B.direction,B.rank,B.fromLocationId,B.toLocationId);j.id=B.id,j.from=this._vertexes[B.from],j.to=this._vertexes[B.to],j.categoryId=B.categoryId,this._connections[P][B.id]=j;}this._connectionsMapping[P][L].push(this._connections[P][B.id]);}}}}return o(t,[{key:"queryQuadTree",value:function value(t){return this._quadtreeMapping[t];}},{key:"queryPathsByVertex",value:function value(t){var e=this._pathsMapping[t.planarGraphId];return e&&e[t.id]?e[t.id]:[];}},{key:"queryConnectionsByVertex",value:function value(t){var e=this._connectionsMapping[t.planarGraphId];return e&&e[t.id]?e[t.id]:[];}},{key:"queryAllPathFromIndex",value:function value(t){var e=this._quadtreeMapping[t];return e?e.queryAll():[];}}]),t;}();e.default=g;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i,r,o){n(this,t),this.mapId=e,this.shape=i,this.planarGraphId=r,this.altitude=o;}return i(t,[{key:"toString",value:function value(){return 31*this.id+this.planarGraphId;}},{key:"equals",value:function value(t){return this===t||!!t&&this.id===t.id&&this.planarGraphId===t.planarGraphId;}},{key:"id",get:function get(){return this._id;},set:function set(t){this._id=t;}},{key:"mapId",get:function get(){return this._mapId;},set:function set(t){this._mapId=t;}},{key:"shape",get:function get(){return this._shape;},set:function set(t){this._shape=t;}},{key:"planarGraphId",get:function get(){return this._planarGraphId;},set:function set(t){this._planarGraphId=t;}},{key:"virtual",get:function get(){return this._virtual;},set:function set(t){this._virtual=t;}},{key:"altitude",get:function get(){return this._altitude;},set:function set(t){this._altitude=t;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(156),u=r(s),l=n(148),c=r(l),h=n(149),f=r(h),d=n(2),p=i(d),g=n(4),v=n(6),m=r(v),y=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{needAudio:!1,autoplay:!1,endThreshold:8},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{autoMove:!1},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{autoPullToEnd:!1,pullThreshold:5};o(this,t),this._mapView=e,this._navigateManager=n,this._messageOptions=i,this._cameraOptions=r,this._locationOptions=a,this._trigger=new u.default(new c.default(),i.needAudio),this._dynamicNavigationRule=new f.default(),this._dynamicNavigationRule.trigger=this._trigger,this._isArrived=!1,this._onSegmentChange=this._onSegmentChange.bind(this),this._dynamicNavigationRule.on("onSegmentChange",this._onSegmentChange),this._onLocationChange=this._onLocationChange.bind(this),this._dynamicNavigationRule.on("onLocationChange",this._onLocationChange),this._onArriveSegEnd=this._onArriveSegEnd.bind(this),this._dynamicNavigationRule.on("onArriveSegEnd",this._onArriveSegEnd),this._crtPlanarGraphId=null,this._onSegChangeCallback=null,this._onLocChangeCallback=null;}return a(t,[{key:"clearFeatureCollection",value:function value(){this._trigger._audioProvider.audioElmt.pause(),this._trigger._segments=[],this._dynamicNavigationRule.reset(),this._crtPlanarGraphId=null,this._isArrived=!1;}},{key:"addSegment",value:function value(t){return this._trigger.addSegment(t),this;}},{key:"removeSegment",value:function value(t){return this._trigger.removeSegment(t),this;}},{key:"start",value:function value(t,e){this._dynamicNavigationRule.start(t,e);}},{key:"isYawing",value:function value(t,e,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._crtPlanarGraphId,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]);return i?this.crtOffsetLocation.distance(new g.geom.Coordinate(t,e))>n:this.crtLocation.distance(new g.geom.Coordinate(t,e))>n;}},{key:"findNearestSegment",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this._mapView.coordinateSystem.getOffset(),a=null;this._crtPlanarGraphId=n,i?(a=new g.geom.Coordinate(t,e),r&&(a.x-=o[0],a.y-=o[1])):a=this._navigateManager.getClosestPoints(n,t,e)[0];var s=this._locationOptions,u=s.autoPullToEnd,l=s.pullThreshold;return this._dynamicNavigationRule.findNearestSegment(a.x,a.y,n,u,l);}},{key:"returnNearestSegment",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this._mapView.coordinateSystem.getOffset(),a=new g.geom.Coordinate(t,e);return i?(a=new g.geom.Coordinate(t,e),r&&(a.x-=o[0],a.y-=o[1])):a=this._navigateManager.getClosestPoints(n,t,e)[0],this._dynamicNavigationRule.returnNearestSegment(a.x,a.y,n);}},{key:"destroy",value:function value(){this._dynamicNavigationRule.reset(),this._dynamicNavigationRule.off("onSegmentChange",this._onSegmentChange),this._dynamicNavigationRule.off("onLocationChange",this._onLocationChange),this._dynamicNavigationRule.off("onArriveSegEnd",this._onArriveSegEnd),this._mapView=null,this._navigateManager=null,this._trigger._audioProvider.audioElmt.pause(),this._trigger._audioProvider.audioElmt.parentNode.removeChild(this._trigger._audioProvider.audioElmt),this._trigger=null,this._dynamicNavigationRule=null,this._messageOptions=null,this._crtPlanarGraphId=null,this._isArrived=!1,this._onSegChangeCallback=null,this._onLocChangeCallback=null;}},{key:"moveToSegment",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.crtOffsetLocation,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.crtSegment,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this,r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),o=this._mapView.activeControl.target,a=o.x,s=o.y;m.default.getInstance().ofNumber(1,0,300).on("update",function(e,n){var o=n.num;i._mapView.activeControl.zoomByFocalLength(50),i._mapView.activeControl.moveToPoint(a*o+(1-o)*t.x,s*o+(1-o)*t.y,null,!0,r,!1);}).on("start",function(){}).on("complete",function(){if(n){var o=e.spot.lineString.getCoordinate(),a=e.spot.nextLineSpot?e.spot.nextLineSpot.lineString.getCoordinate():e.spot.lineString.points.coordinates[1],s=new p.Vector3(a.x-o.x,a.y-o.y,0),u=i._mapView.activeControl.getRotate(),l=-(i._mapView.activeControl._getAngle(s)-270);u-l<-180?u+=360:u-l>180&&(l+=360),m.default.getInstance().ofNumber(u,l,500).on("update",function(e,n){i._mapView.activeControl.moveToPoint(t.x,t.y,null,!0,!0,!1),i._mapView.activeControl.zoomByFocalLength(50),i._mapView.activeControl.rotateTo(t.x,t.y,n.num,!0,r);}).on("start",function(){}).on("complete",function(){}).start();}}).start();}},{key:"distanceToEnd",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.crtOffsetLocation.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.crtOffsetLocation.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._crtPlanarGraphId,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===this._trigger._segments.length)return-1;var o=this.returnNearestSegment(t,e,n,i,r);if(!o.segment)return-1;var a=this._trigger._segments[o.index],s=new g.geom.Coordinate(t,e);if(r){var u=this._mapView.coordinateSystem.getOffset();s.x-=u[0],s.y-=u[1];}return a.state.distanceToEnd-a.spot.lineString.getCoordinate().distance(s);}},{key:"getConnectionInfo",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.crtOffsetLocation.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.crtOffsetLocation.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._crtPlanarGraphId,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===this._trigger._segments.length)return null;var o=this.returnNearestSegment(t,e,n,i,r);if(!o.segment)return null;var a=this._trigger._segments[o.index],s=new g.geom.Coordinate(t,e);if(r){var u=this._mapView.coordinateSystem.getOffset();s.x-=u[0],s.y-=u[1];}var l=a.state.distanceToConnection-a.spot.lineString.getCoordinate().distance(s);if(!l)return null;for(var c=void 0,h=void 0,f=o.index;a;){if(a.state&&a.state.targetFloor){c=a.state.targetFloor,h=a.state.isUp;break;}f++,a=this._trigger._segments[f];}return{connectionDist:l,targetFloor:c,isUp:h,index:f};}},{key:"distanceToSegmentEnd",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.crtOffsetLocation.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.crtOffsetLocation.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._crtPlanarGraphId,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===this._trigger._segments.length?null:this._trigger._segments[this._dynamicNavigationRule.currentIndex+1]?this.distanceToEnd(t,e,n,i,r)-this._trigger._segments[this._dynamicNavigationRule.currentIndex+1].state.distanceToEnd:this.distanceToEnd(t,e,n,i,r);}},{key:"distanceToSegmentStart",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.crtOffsetLocation.x,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.crtOffsetLocation.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._crtPlanarGraphId,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===this._trigger._segments.length?null:this._trigger._segments[this._dynamicNavigationRule.currentIndex].state.distanceToEnd-this.distanceToEnd(t,e,n,i,r);}},{key:"getMessageInNavi",value:function value(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(0===this._trigger._segments.length)return null;var e=this._trigger._segments[this._dynamicNavigationRule.currentIndex],n=this.crtLocation;if(!n)return null;if(!this._crtPlanarGraphId)return t||this.playMessage("开始导航，"+e.getMessageInNavi(0,t)),e.getMessageInNavi(0,!0);var i=this.getConnectionInfo();if(i&&i.connectionDist<10)return this.segments[i.index].getMessageInNavi(1e5,t);if(this.distanceToEnd()<this._messageOptions.endThreshold)return this._messageOptions.endMessage?this.playMessage(this._messageOptions.endMessage):this.segments[this.segments.length-1].getMessageInNavi(1e5,t);var r=e.state.distanceToEnd-this.distanceToEnd(n.x,n.y,this._crtPlanarGraphId,!0,!1);return e.getMessageInNavi(r,t);}},{key:"getMessageInList",value:function value(){var t=[];return this.segments&&this.segments.forEach(function(e){t.push(e.getMessageInList());}),t;}},{key:"playMessage",value:function value(t){return this._trigger._audioProvider&&this._trigger._audioProvider.playMessage(t),t;}},{key:"pauseMessage",value:function value(){this._trigger._audioProvider&&this._trigger._audioProvider.audioElmt.pause();}},{key:"_onLocationChange",value:function value(t){this._cameraOptions.autoMove&&this.moveToSegment(),this._onLocChangeCallback&&this._onLocChangeCallback(t),this.distanceToEnd()<=this._messageOptions.endThreshold&&this.distanceToEnd()>=0&&this._messageOptions.needAudio&&this._messageOptions.autoplay&&(this.getMessageInNavi(this._isArrived),this._isArrived=!0);}},{key:"_onSegmentChange",value:function value(t){this._messageOptions.needAudio&&this._messageOptions.autoplay&&this.getMessageInNavi(this._isArrived),this._onSegChangeCallback&&this._onSegChangeCallback(t);}},{key:"_onArriveSegEnd",value:function value(){this._messageOptions.needAudio&&this._messageOptions.autoplay;}},{key:"featureCollection",set:function set(t){this._trigger.trigger(t),this._dynamicNavigationRule.reset(),this._dynamicNavigationRule._center=this.crtSegment.spot.lineString.getCoordinate()||null,this._crtPlanarGraphId=null,this._isArrived=!1,this._dynamicNavigationRule._changeSegment(this.crtSegment,this.crtLocation);}},{key:"trigger",get:function get(){return this._trigger;}},{key:"dynamicNavigationRule",get:function get(){return this._dynamicNavigationRule;}},{key:"segments",get:function get(){return this._trigger._segments;}},{key:"crtLocation",get:function get(){return this._dynamicNavigationRule.center;}},{key:"crtOffsetLocation",get:function get(){var t=this._dynamicNavigationRule.center.copy(),e=this._mapView.coordinateSystem.getOffset();return t.x+=e[0],t.y+=e[1],t;}},{key:"crtIndex",get:function get(){return this._dynamicNavigationRule.currentIndex;}},{key:"crtSegment",get:function get(){return this._trigger._segments[this._dynamicNavigationRule.currentIndex]||null;}},{key:"crtPlanarGraphId",get:function get(){return this._crtPlanarGraphId;}},{key:"onSegmentChange",set:function set(t){this._onSegChangeCallback=t;}},{key:"onLocationChange",set:function set(t){this._onLocChangeCallback=t;}}]),t;}();e.default=y;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"mate",value:function value(t){return null;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=i(l),h=n(4),f=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.targetDom=t,i._options=s({},n),i._options.defaultDisplay||(i._options.defaultDisplay=i.targetDom&&i.targetDom.style.display?i.targetDom.style.display:"inline"),i._position=new h.geom.Coordinate(0,0,0),i;}return a(e,t),u(e,[{key:"attach",value:function value(t){this._layer=t;}},{key:"detach",value:function value(t){delete this._layer;}},{key:"layer",get:function get(){return this._layer;}},{key:"coordinateSystem",get:function get(){return this._coordinateSystem;},set:function set(t){this._coordinateSystem=t;}},{key:"targetDom",get:function get(){return this._dom;},set:function set(t){this._dom=t,this.emit("valueChange",this,"targetDom",t);}},{key:"position",get:function get(){return this._position;},set:function set(t){var e=t.x,n=t.y;if(this.coordinateSystem){var i=this._coordinateSystem.getOffset();e+=i[0],n+=i[1];}this._position.x=e,this._position.y=n,this._position.z=t.z,this.emit("valueChange",this,"position",this._position);}}]),e;}(c.default);e.default=f;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.IconOverlay=e.Overlay=void 0;var r=n(58),o=i(r),a=n(158),s=i(a);e.Overlay=o.default,e.IconOverlay=s.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._particleGroups={},t;}return a(e,t),s(e,[{key:"addParticleGroup",value:function value(t){!t&&this.has(t)||(this._particleGroups[t.id]=t,this.emit("addParticleGroup",t));}},{key:"removeParticleGroup",value:function value(t){this.has(t)&&(delete this._particleGroups[t.id],this.emit("removeParticleGroup",t));}},{key:"has",value:function value(t){return!!t&&t.id in this._particleGroups;}},{key:"destroy",value:function value(){for(var t in this._particleGroups){this.removeParticleGroup(this._particleGroups[t]);}}}]),e;}(l.default);e.default=c;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"getStyle",value:function value(t){return null;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),c);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u=n(13),l=i(u),c={font:"20px Arial",field:null,outlineWidth:null,shadowBlur:null,anchor:[.5,.5],anchorAuto:!1,anchorStyle:null,optTextRect:!1,type:function type(){return"Annotation";}};Object.defineProperty(r.prototype,"color",{get:function get(){return this._color;},set:function set(t){this._color=l.default.converToSharp(t);}}),Object.defineProperty(r.prototype,"outlineColor",{get:function get(){return this._outlineColor;},set:function set(t){this._outlineColor=l.default.converToSharp(t);}}),Object.defineProperty(r.prototype,"shadowColor",{get:function get(){return this._shadowColor;},set:function set(t){this._shadowColor=l.default.converToSharp(t);}}),e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),u);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u={anchor:[.5,.5],field:null,serverUrl:null,height:null,width:null,texture:null,plane:null,type:function type(){return"Icon";}};e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},u=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c=n(33),h=i(c),f=n(62),d=i(f),p=n(63),g=i(p),v=n(67),m=i(v),y=n(66),_=i(y),b=n(179),x=i(b),w=n(180),E=i(w),S=n(65),M=i(S),C=n(162),I=i(C),O=n(163),T=i(O),P=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._styleJson=t,n;}return a(e,t),l(e,[{key:"generator",value:function value(t){if(!(this._styleJson.default&&t&&this._styleJson.default[t.name]))return console.warn("Invalid Json or Layer"),null;var e=this._styleJson.default[t.name],n=null;if(t.height=e.height||0,e.renderer&&"simple"===e.renderer.type)n=new I.default(),n.style=this._generator(e.renderer.style);else if(e.renderer&&"unique"===e.renderer.type){n=new T.default(),n.defaultStyle=this._generator(e.renderer.default);for(var i=e.renderer.keys,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;n.addKey(s);}for(var u in e.renderer.styles){n.addStyle(u,this._generator(e.renderer.styles[u],n.defaultStyle));}}else console.warn("Invalid Renderer Type");return n;}},{key:"_initialsToCapitals",value:function value(t){return t.replace(/(\\w)/,function(t){return t.toUpperCase();});}},{key:"_parse",value:function value(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n&&u(e,n);for(var r in t){if("type"!==r){var o=t[r];if(i&&this._hasStyle(o)){var a=n&&n[r]||{};if(o=this._generator(o,a),e[r]){var s=e[r],l=this._generator({type:o.type()});o=u(l,s,o);}}e[r]=o;}}}},{key:"_generator",value:function value(t,e){var n=t.type,i=void 0;switch(n){case"Polygon":i=new m.default(),this._parse(t,i,e);for(var r in t.face){i[r]=t.face[r];}for(var o in t.outline){var a="outline"+this._initialsToCapitals(o);i[a]=t.outline[o];}break;case"Annotation":i=new d.default(),this._parse(t,i,e,!0);break;case"Icon":i=new g.default(),this._parse(t,i,e);break;case"LineString":i=new _.default(),this._parse(t,i,e);break;case"Light":i=new M.default(),this._parse(t,i,e);break;case"Model":i=new x.default(),this._parse(t,i,e);break;case"Sphere":i=new E.default(),this._parse(t,i,e);break;default:console.warn("Invalid Style Type");}return i;}},{key:"_hasStyle",value:function value(t){return"object"===("undefined"==typeof t?"undefined":s(t))&&!!t&&"type"in t;}}]),e;}(h.default);e.default=P;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),c);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u=n(13),l=i(u),c={intensity:1,lightType:"HemisphereLight",type:function type(){return"Light";}};Object.defineProperty(r.prototype,"color",{get:function get(){return this._color;},set:function set(t){this._color=l.default.parseColor(t);}}),Object.defineProperty(r.prototype,"options",{get:function get(){return this._options;},set:function set(t){this._options=o({},t),t.groudColor&&(this._options.groudColor=l.default.parseColor(t.groudColor));}}),e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),c);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u=n(13),l=i(u),c={type:function type(){return"LineString";}};Object.defineProperty(r.prototype,"color",{get:function get(){return this._color;},set:function set(t){this._color=l.default.parseColor(t);}}),Object.defineProperty(r.prototype,"dash",{get:function get(){return this._dash;},set:function set(t){t instanceof Array&&t.length>1&&(this._dash=[t[0],t[1]]);}}),e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),c);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u=n(13),l=i(u),c={texture:null,height:0,z:0,polygonMerge:!1,outlineMerge:!0,outlineBlending:!0,clickable:!0,type:function type(){return"Polygon";}};Object.defineProperty(r.prototype,"color",{get:function get(){return this._color;},set:function set(t){this._color=l.default.parseColor(t);}}),Object.defineProperty(r.prototype,"outlineColor",{get:function get(){return this._outlineColor;},set:function set(t){this._outlineColor=l.default.parseColor(t);}}),e.default=r;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),o=n(3),a=function(){function t(){i(this,t);}return r(t,[{key:"offset",value:function value(t,e){return[t-this._offset[0],e-this._offset[1]];}},{key:"setOffset",value:function value(t){return(0,o.isArray)(t)&&2===t.length?(this._offset=t,this):(console.warn("Invalid Offset"),this);}},{key:"getOffset",value:function value(){return this._offset;}}],[{key:"getExtentCenter",value:function value(t){var e=t[0],n=t[1],i=t[2],r=t[3];return[(e+i)/2,(n+r)/2];}}]),t;}();e.default=a;},function(t,e){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=function(){function t(){r(this,t),this._running=!1;}return a(t,[{key:"loop",value:function value(t){this._running||(this._running=!0,this._onLoop(t));}},{key:"hasRunning",value:function value(){return this._running;}},{key:"stop",value:function value(){this._running=!1;}},{key:"_onLoop",value:function value(t){}}]),t;}(),u=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return i(e,t),a(e,[{key:"_onLoop",value:function value(t){var e=this,n=function n(i){e._running&&(window.requestAnimationFrame(n),t(i));};window.requestAnimationFrame(n);}}]),e;}(s),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.fps,o=void 0===i?60:i;r(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._fps=o,a._interval=null,a;}return i(e,t),a(e,[{key:"_onLoop",value:function value(t){var e=this,n=function n(){e._running&&window.requestAnimationFrame(t);};this._interval=setInterval(n,1e3/this._fps);}},{key:"stop",value:function value(){this._interval&&clearInterval(this._interval),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this);}}]),e;}(s);e.RenderLoop=s,e.AnimationFrameRenderLoop=u,e.LockFPSRenderLoop=l;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"onAdd",value:function value(t){this._gestureManager=t;}},{key:"onRemove",value:function value(){this._gestureManager=null;}},{key:"providerEvent",value:function value(){return null;}},{key:"type",value:function value(){return"none";}}]),t;}();e.default=r;},function(t,e){function n(t){this._comparator=t||n.DEFAULT_COMPARATOR,this._elements=[];}t.exports=n,n.DEFAULT_COMPARATOR=function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:(t=t.toString(),e=e.toString(),t==e?0:t>e?1:-1);},n.prototype.isEmpty=function(){return 0===this.size();},n.prototype.peek=function(){if(this.isEmpty())throw new Error("PriorityQueue is empty");return this._elements[0];},n.prototype.deq=function(){var t=this.peek(),e=this._elements.pop(),n=this.size();if(0===n)return t;this._elements[0]=e;for(var i=0;i<n;){var r=i,o=2*i+1,a=2*i+2;if(o<n&&this._compare(o,r)>=0&&(r=o),a<n&&this._compare(a,r)>=0&&(r=a),r===i)break;this._swap(r,i),i=r;}return t;},n.prototype.enq=function(t){for(var e=this._elements.push(t),n=e-1;n>0;){var i=Math.floor((n-1)/2);if(this._compare(n,i)<=0)break;this._swap(i,n),n=i;}return e;},n.prototype.size=function(){return this._elements.length;},n.prototype.forEach=function(t){return this._elements.forEach(t);},n.prototype._compare=function(t,e){return this._comparator(this._elements[t],this._elements[e]);},n.prototype._swap=function(t,e){var n=this._elements[t];this._elements[t]=this._elements[e],this._elements[e]=n;};},function(t,e){function n(){throw new Error("setTimeout has not been defined");}function i(){throw new Error("clearTimeout has not been defined");}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0);}catch(e){try{return c.call(null,t,0);}catch(e){return c.call(this,t,0);}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t);}catch(e){try{return h.call(null,t);}catch(e){return h.call(this,t);}}}function a(){g&&d&&(g=!1,d.length?p=d.concat(p):v=-1,p.length&&s());}function s(){if(!g){var t=r(a);g=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;){d&&d[v].run();}v=-1,e=p.length;}d=null,g=!1,o(t);}}function u(t,e){this.fun=t,this.array=e;}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n;}catch(t){c=n;}try{h="function"==typeof clearTimeout?clearTimeout:i;}catch(t){h=i;}}();var d,p=[],g=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++){e[n-1]=arguments[n];}p.push(new u(t,e)),1!==p.length||g||r(s);},u.prototype.run=function(){this.fun.apply(null,this.array);},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.prependListener=l,f.prependOnceListener=l,f.listeners=function(t){return[];},f.binding=function(t){throw new Error("process.binding is not supported");},f.cwd=function(){return"/";},f.chdir=function(t){throw new Error("process.chdir is not supported");},f.umask=function(){return 0;};},function(t,e,n){var i,r;(function(n){var o=o||function(){var t=[];return{getAll:function getAll(){return t;},removeAll:function removeAll(){t=[];},add:function add(e){t.push(e);},remove:function remove(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1);},update:function update(e,n){if(0===t.length)return!1;var i=0;for(e=void 0!==e?e:o.now();i<t.length;){t[i].update(e)||n?i++:t.splice(i,1);}return!0;}};}();"undefined"==typeof window&&"undefined"!=typeof n?o.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6;}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return new Date().getTime();},o.Tween=function(t){var e,n=t,i={},r={},a={},s=1e3,u=0,l=!1,c=!1,h=!1,f=0,d=null,p=o.Easing.Linear.None,g=o.Interpolation.Linear,v=[],m=null,y=!1,_=null,b=null,x=null;this.to=function(t,e){return r=t,void 0!==e&&(s=e),this;},this.start=function(t){o.add(this),c=!0,y=!1,d=void 0!==t?t:o.now(),d+=f;for(var e in r){if(r[e]instanceof Array){if(0===r[e].length)continue;r[e]=[n[e]].concat(r[e]);}void 0!==n[e]&&(i[e]=n[e],i[e]instanceof Array==!1&&(i[e]*=1),a[e]=i[e]||0);}return this;},this.stop=function(){return c?(o.remove(this),c=!1,null!==x&&x.call(n,n),this.stopChainedTweens(),this):this;},this.end=function(){return this.update(d+s),this;},this.stopChainedTweens=function(){for(var t=0,e=v.length;t<e;t++){v[t].stop();}},this.delay=function(t){return f=t,this;},this.repeat=function(t){return u=t,this;},this.repeatDelay=function(t){return e=t,this;},this.yoyo=function(t){return l=t,this;},this.easing=function(t){return p=t,this;},this.interpolation=function(t){return g=t,this;},this.chain=function(){return v=arguments,this;},this.onStart=function(t){return m=t,this;},this.onUpdate=function(t){return _=t,this;},this.onComplete=function(t){return b=t,this;},this.onStop=function(t){return x=t,this;},this.update=function(t){var o,c,x;if(t<d)return!0;y===!1&&(null!==m&&m.call(n,n),y=!0),c=(t-d)/s,c=c>1?1:c,x=p(c);for(o in r){if(void 0!==i[o]){var w=i[o]||0,E=r[o];E instanceof Array?n[o]=g(E,x):("string"==typeof E&&(E="+"===E.charAt(0)||"-"===E.charAt(0)?w+parseFloat(E):parseFloat(E)),"number"==typeof E&&(n[o]=w+(E-w)*x));}}if(null!==_&&_.call(n,x),1===c){if(u>0){isFinite(u)&&u--;for(o in a){if("string"==typeof r[o]&&(a[o]=a[o]+parseFloat(r[o])),l){var S=a[o];a[o]=r[o],r[o]=S;}i[o]=a[o];}return l&&(h=!h),d=void 0!==e?t+e:t+f,!0;}null!==b&&b.call(n,n);for(var M=0,C=v.length;M<C;M++){v[M].start(d+s);}return!1;}return!0;};},o.Easing={Linear:{None:function None(t){return t;}},Quadratic:{In:function In(t){return t*t;},Out:function Out(t){return t*(2-t);},InOut:function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1);}},Cubic:{In:function In(t){return t*t*t;},Out:function Out(t){return--t*t*t+1;},InOut:function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2);}},Quartic:{In:function In(t){return t*t*t*t;},Out:function Out(t){return 1- --t*t*t*t;},InOut:function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2);}},Quintic:{In:function In(t){return t*t*t*t*t;},Out:function Out(t){return--t*t*t*t*t+1;},InOut:function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2);}},Sinusoidal:{In:function In(t){return 1-Math.cos(t*Math.PI/2);},Out:function Out(t){return Math.sin(t*Math.PI/2);},InOut:function InOut(t){return .5*(1-Math.cos(Math.PI*t));}},Exponential:{In:function In(t){return 0===t?0:Math.pow(1024,t-1);},Out:function Out(t){return 1===t?1:1-Math.pow(2,-10*t);},InOut:function InOut(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2);}},Circular:{In:function In(t){return 1-Math.sqrt(1-t*t);},Out:function Out(t){return Math.sqrt(1- --t*t);},InOut:function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1);}},Elastic:{In:function In(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI);},Out:function Out(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1;},InOut:function InOut(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1);}},Back:{In:function In(t){var e=1.70158;return t*t*((e+1)*t-e);},Out:function Out(t){var e=1.70158;return--t*t*((e+1)*t+e)+1;},InOut:function InOut(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2);}},Bounce:{In:function In(t){return 1-o.Easing.Bounce.Out(1-t);},Out:function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375;},InOut:function InOut(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5;}}},o.Interpolation={Linear:function Linear(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r);},Bezier:function Bezier(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++){n+=r(1-e,i-s)*r(e,s)*t[s]*a(i,s);}return n;},CatmullRom:function CatmullRom(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r);},Utils:{Linear:function Linear(t,e,n){return(e-t)*n+t;},Bernstein:function Bernstein(t,e){var n=o.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e);},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--){n*=i;}return t[e]=n,n;};}(),CatmullRom:function CatmullRom(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r,u=r*s;return(2*e-2*n+o+a)*u+(-3*e+3*n-2*o-a)*s+o*r+e;}}},function(n){i=[],r=function(){return o;}.apply(e,i),!(void 0!==r&&(t.exports=r));}(this);}).call(e,n(72));},function(t,e){!function(t){function e(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1;}function n(t){var e=new Promise(function(e,n){var i=function i(r){setTimeout(function(){t&&t.data?e():r>=20?n():i(++r);},50);};i(0);});return e;}function i(){p=d?(t.screen.orientation.angle||0)*l:(t.orientation||0)*l;}function r(t){h.orientation.data=t;for(var e in h.orientation.callbacks){h.orientation.callbacks[e].call(this);}}function o(t){h.motion.data=t;for(var e in h.motion.callbacks){h.motion.callbacks[e].call(this);}}if(void 0===t.FULLTILT||null===t.FULLTILT){var a=Math.PI,s=a/2,u=2*a,l=a/180,c=180/a,h={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},f=!1,d=!(!t.screen||!t.screen.orientation||void 0===t.screen.orientation.angle||null===t.screen.orientation.angle),p=(d?t.screen.orientation.angle:t.orientation||0)*l,g=s,v=a,m=u/3,y=-s,_={};_.version="0.5.3",_.getDeviceOrientation=function(t){var e=new Promise(function(e,i){var r=new _.DeviceOrientation(t);r.start();var o=new n(h.orientation);o.then(function(){e(r);}).catch(function(){r.stop(),i("DeviceOrientation is not supported");});});return e;},_.getDeviceMotion=function(t){var e=new Promise(function(e,i){var r=new _.DeviceMotion(t);r.start();var o=new n(h.motion);o.then(function(){e(r);}).catch(function(){r.stop(),i("DeviceMotion is not supported");});});return e;},_.Quaternion=function(t,n,i,r){var o;this.set=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=i||1;},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w;},this.setFromEuler=function(){var t,e,n,i,r,o,a,s,u,c,h,f;return function(d){return d=d||{},n=(d.alpha||0)*l,t=(d.beta||0)*l,e=(d.gamma||0)*l,o=n/2,i=t/2,r=e/2,a=Math.cos(i),s=Math.cos(r),u=Math.cos(o),c=Math.sin(i),h=Math.sin(r),f=Math.sin(o),this.set(c*s*u-a*h*f,a*h*u+c*s*f,a*s*f+c*h*u,a*s*u-c*h*f),this.normalize(),this;};}(),this.setFromRotationMatrix=function(){var t;return function(n){return t=n.elements,this.set(.5*Math.sqrt(1+t[0]-t[4]-t[8])*e(t[7]-t[5]),.5*Math.sqrt(1-t[0]+t[4]-t[8])*e(t[2]-t[6]),.5*Math.sqrt(1-t[0]-t[4]+t[8])*e(t[3]-t[1]),.5*Math.sqrt(1+t[0]+t[4]+t[8])),this;};}(),this.multiply=function(t){return o=_.Quaternion.prototype.multiplyQuaternions(this,t),this.copy(o),this;},this.rotateX=function(t){return o=_.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(o),this;},this.rotateY=function(t){return o=_.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(o),this;},this.rotateZ=function(t){return o=_.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(o),this;},this.normalize=function(){return _.Quaternion.prototype.normalize(this);},this.set(t,n,i,r);},_.Quaternion.prototype={constructor:_.Quaternion,multiplyQuaternions:function(){var t=new _.Quaternion();return function(e,n){var i=e.x,r=e.y,o=e.z,a=e.w,s=n.x,u=n.y,l=n.z,c=n.w;return t.set(i*c+a*s+r*l-o*u,r*c+a*u+o*s-i*l,o*c+a*l+i*u-r*s,a*c-i*s-r*u-o*l),t;};}(),normalize:function normalize(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w);return 0===e?(t.x=0,t.y=0,t.z=0,t.w=1):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e),t;},rotateByAxisAngle:function(){var t,e,n=new _.Quaternion(),i=new _.Quaternion();return function(r,o,a){return t=(a||0)/2,e=Math.sin(t),i.set((o[0]||0)*e,(o[1]||0)*e,(o[2]||0)*e,Math.cos(t)),n=_.Quaternion.prototype.multiplyQuaternions(r,i),_.Quaternion.prototype.normalize(n);};}()},_.RotationMatrix=function(t,e,n,i,r,o,a,s,u){var c;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this;},this.set=function(t,e,n,i,r,o,a,s,u){this.elements[0]=t||1,this.elements[1]=e||0,this.elements[2]=n||0,this.elements[3]=i||0,this.elements[4]=r||1,this.elements[5]=o||0,this.elements[6]=a||0,this.elements[7]=s||0,this.elements[8]=u||1;},this.copy=function(t){this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8];},this.setFromEuler=function(){var t,e,n,i,r,o,a,s,u;return function(c){return c=c||{},n=(c.alpha||0)*l,t=(c.beta||0)*l,e=(c.gamma||0)*l,i=Math.cos(t),r=Math.cos(e),o=Math.cos(n),a=Math.sin(t),s=Math.sin(e),u=Math.sin(n),this.set(o*r-u*a*s,-i*u,r*u*a+o*s,r*u+o*a*s,o*i,u*s-o*r*a,-i*s,a,i*r),this.normalize(),this;};}(),this.setFromQuaternion=function(){var t,e,n,i;return function(r){return t=r.w*r.w,e=r.x*r.x,n=r.y*r.y,i=r.z*r.z,this.set(t+e-n-i,2*(r.x*r.y-r.w*r.z),2*(r.x*r.z+r.w*r.y),2*(r.x*r.y+r.w*r.z),t-e+n-i,2*(r.y*r.z-r.w*r.x),2*(r.x*r.z-r.w*r.y),2*(r.y*r.z+r.w*r.x),t-e-n+i),this;};}(),this.multiply=function(t){return c=_.RotationMatrix.prototype.multiplyMatrices(this,t),this.copy(c),this;},this.rotateX=function(t){return c=_.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(c),this;},this.rotateY=function(t){return c=_.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(c),this;},this.rotateZ=function(t){return c=_.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(c),this;},this.normalize=function(){return _.RotationMatrix.prototype.normalize(this);},this.set(t,e,n,i,r,o,a,s,u);},_.RotationMatrix.prototype={constructor:_.RotationMatrix,multiplyMatrices:function(){var t,e,n=new _.RotationMatrix();return function(i,r){return t=i.elements,e=r.elements,n.set(t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]),n;};}(),normalize:function normalize(t){var e=t.elements,n=e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6];return e[0]/=n,e[1]/=n,e[2]/=n,e[3]/=n,e[4]/=n,e[5]/=n,e[6]/=n,e[7]/=n,e[8]/=n,t.elements=e,t;},rotateByAxisAngle:function(){var t,e,n=new _.RotationMatrix(),i=new _.RotationMatrix(),r=!1;return function(o,a,s){return i.identity(),r=!1,t=Math.sin(s),e=Math.cos(s),1===a[0]&&0===a[1]&&0===a[2]?(r=!0,i.elements[4]=e,i.elements[5]=-t,i.elements[7]=t,i.elements[8]=e):1===a[1]&&0===a[0]&&0===a[2]?(r=!0,i.elements[0]=e,i.elements[2]=t,i.elements[6]=-t,i.elements[8]=e):1===a[2]&&0===a[0]&&0===a[1]&&(r=!0,i.elements[0]=e,i.elements[1]=-t,i.elements[3]=t,i.elements[4]=e),r?(n=_.RotationMatrix.prototype.multiplyMatrices(o,i),n=_.RotationMatrix.prototype.normalize(n)):n=o,n;};}()},_.Euler=function(t,e,n){this.set=function(t,e,n){this.alpha=t||0,this.beta=e||0,this.gamma=n||0;},this.copy=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma;},this.setFromRotationMatrix=function(){var t,e,n,i;return function(r){t=r.elements,t[8]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),i=Math.atan2(-t[6],t[8])):t[8]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-a:a,i=Math.atan2(t[6],-t[8])):t[6]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),i=-s):t[6]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-a:a,i=-s):(e=Math.atan2(t[3],t[0]),n=t[7]>0?s:-s,i=0),e<0&&(e+=u),e*=c,n*=c,i*=c,this.set(e,n,i);};}(),this.setFromQuaternion=function(){var t,e,n;return function(i){var r=i.w*i.w,o=i.x*i.x,l=i.y*i.y,h=i.z*i.z,f=r+o+l+h,d=i.w*i.x+i.y*i.z,p=1e-6;if(d>(.5-p)*f)t=2*Math.atan2(i.y,i.w),e=s,n=0;else if(d<(-.5+p)*f)t=-2*Math.atan2(i.y,i.w),e=-s,n=0;else{var g=r-o+l-h,v=2*(i.w*i.z-i.x*i.y),m=r-o-l+h,y=2*(i.w*i.y-i.x*i.z);m>0?(t=Math.atan2(v,g),e=Math.asin(2*d/f),n=Math.atan2(y,m)):(t=Math.atan2(-v,-g),e=-Math.asin(2*d/f),e+=e<0?a:-a,n=Math.atan2(-y,-m));}t<0&&(t+=u),t*=c,e*=c,n*=c,this.set(t,e,n);};}(),this.rotateX=function(t){return _.Euler.prototype.rotateByAxisAngle(this,[1,0,0],t),this;},this.rotateY=function(t){return _.Euler.prototype.rotateByAxisAngle(this,[0,1,0],t),this;},this.rotateZ=function(t){return _.Euler.prototype.rotateByAxisAngle(this,[0,0,1],t),this;},this.set(t,e,n);},_.Euler.prototype={constructor:_.Euler,rotateByAxisAngle:function(){var t=new _.RotationMatrix();return function(e,n,i){return t.setFromEuler(e),t=_.RotationMatrix.prototype.rotateByAxisAngle(t,n,i),e.setFromRotationMatrix(t),e;};}()},_.DeviceOrientation=function(e){this.options=e||{};var n=0,i=200,r=0,o=10;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var a=function(e){return null!==e.alpha&&(this.alphaOffsetDevice=new _.Euler(e.alpha,0,0),this.alphaOffsetDevice.rotateZ(-p),++r>=o)?void t.removeEventListener("deviceorientation",a,!1):void(++n>=i&&t.removeEventListener("deviceorientation",a,!1));}.bind(this);t.addEventListener("deviceorientation",a,!1);}else if("world"===this.options.type){var s=function(e){return e.absolute!==!0&&void 0!==e.webkitCompassAccuracy&&null!==e.webkitCompassAccuracy&&+e.webkitCompassAccuracy>=0&&+e.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new _.Euler(e.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(p),this.alphaOffsetScreen=p,++r>=o)?void t.removeEventListener("deviceorientation",s,!1):void(++n>=i&&t.removeEventListener("deviceorientation",s,!1));}.bind(this);t.addEventListener("deviceorientation",s,!1);}},_.DeviceOrientation.prototype={constructor:_.DeviceOrientation,start:function start(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.orientation.callbacks.push(e),f||(d?t.screen.orientation.addEventListener("change",i,!1):t.addEventListener("orientationchange",i,!1)),h.orientation.active||(t.addEventListener("deviceorientation",r,!1),h.orientation.active=!0);},stop:function stop(){h.orientation.active&&(t.removeEventListener("deviceorientation",r,!1),h.orientation.active=!1);},listen:function listen(t){this.start(t);},getFixedFrameQuaternion:function(){var t=new _.Euler(),e=new _.RotationMatrix(),n=new _.Quaternion();return function(){var i=h.orientation.data||{alpha:0,beta:0,gamma:0},r=i.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,r-=t.alpha),t.set(r,i.beta,i.gamma),n.setFromEuler(t),n;};}(),getScreenAdjustedQuaternion:function(){var t;return function(){return t=this.getFixedFrameQuaternion(),t.rotateZ(-p),t;};}(),getFixedFrameMatrix:function(){var t=new _.Euler(),e=new _.RotationMatrix();return function(){var n=h.orientation.data||{alpha:0,beta:0,gamma:0},i=n.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,i-=t.alpha),t.set(i,n.beta,n.gamma),e.setFromEuler(t),e;};}(),getScreenAdjustedMatrix:function(){var t;return function(){return t=this.getFixedFrameMatrix(),t.rotateZ(-p),t;};}(),getFixedFrameEuler:function(){var t,e=new _.Euler();return function(){return t=this.getFixedFrameMatrix(),e.setFromRotationMatrix(t),e;};}(),getScreenAdjustedEuler:function(){var t,e=new _.Euler();return function(){return t=this.getScreenAdjustedMatrix(),e.setFromRotationMatrix(t),e;};}(),isAbsolute:function isAbsolute(){return!(!h.orientation.data||h.orientation.data.absolute!==!0);},getLastRawEventData:function getLastRawEventData(){return h.orientation.data||{};},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},_.DeviceMotion=function(t){this.options=t||{};},_.DeviceMotion.prototype={constructor:_.DeviceMotion,start:function start(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.motion.callbacks.push(e),f||(d?t.screen.orientation.addEventListener("change",i,!1):t.addEventListener("orientationchange",i,!1)),h.motion.active||(t.addEventListener("devicemotion",o,!1),h.motion.active=!0);},stop:function stop(){h.motion.active&&(t.removeEventListener("devicemotion",o,!1),h.motion.active=!1);},listen:function listen(t){this.start(t);},getScreenAdjustedAcceleration:function getScreenAdjustedAcceleration(){var t=h.motion.data&&h.motion.data.acceleration?h.motion.data.acceleration:{x:0,y:0,z:0},e={};switch(p){case g:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case m:case y:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y;}return e.z=t.z,e;},getScreenAdjustedAccelerationIncludingGravity:function getScreenAdjustedAccelerationIncludingGravity(){var t=h.motion.data&&h.motion.data.accelerationIncludingGravity?h.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},e={};switch(p){case g:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case m:case y:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y;}return e.z=t.z,e;},getScreenAdjustedRotationRate:function getScreenAdjustedRotationRate(){var t=h.motion.data&&h.motion.data.rotationRate?h.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},e={};switch(p){case g:e.beta=-t.gamma,e.gamma=t.beta;break;case v:e.beta=-t.beta,e.gamma=-t.gamma;break;case m:case y:e.beta=t.gamma,e.gamma=-t.beta;break;default:e.beta=t.beta,e.gamma=t.gamma;}return e.alpha=t.alpha,e;},getLastRawEventData:function getLastRawEventData(){return h.motion.data||{};}},t.FULLTILT=_;}}(window);},function(t,e){t.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0;};},function(t,e,n){function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r,o,a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},s=n(2),u=i(s),l={distributions:{BOX:1,SPHERE:2,DISC:3},valueOverLifetimeLength:4};r=l,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o)),l.TypedArrayHelper=function(t,e,n,i){"use strict";this.componentSize=n||1,this.size=e||1,this.TypedArrayConstructor=t||Float32Array,this.array=new t(e*this.componentSize),this.indexOffset=i||0;},l.TypedArrayHelper.constructor=l.TypedArrayHelper,l.TypedArrayHelper.prototype.setSize=function(t,e){"use strict";var n=this.array.length;return e||(t*=this.componentSize),t<n?this.shrink(t):t>n?this.grow(t):void console.info("TypedArray is already of size:",t+".","Will not resize.");},l.TypedArrayHelper.prototype.shrink=function(t){"use strict";return this.array=this.array.subarray(0,t),this.size=t,this;},l.TypedArrayHelper.prototype.grow=function(t){"use strict";var e=this.array,n=new this.TypedArrayConstructor(t);return n.set(e),this.array=n,this.size=t,this;},l.TypedArrayHelper.prototype.splice=function(t,e){"use strict";t*=this.componentSize,e*=this.componentSize;for(var n=[],i=this.array,r=i.length,o=0;o<r;++o){(o<t||o>=e)&&n.push(i[o]);}return this.setFromArray(0,n),this;},l.TypedArrayHelper.prototype.setFromArray=function(t,e){"use strict";var n=e.length,i=t+n;return i>this.array.length?this.grow(i):i<this.array.length&&this.shrink(i),this.array.set(e,this.indexOffset+t),this;},l.TypedArrayHelper.prototype.setVec2=function(t,e){"use strict";return this.setVec2Components(t,e.x,e.y);},l.TypedArrayHelper.prototype.setVec2Components=function(t,e,n){"use strict";var i=this.array,r=this.indexOffset+t*this.componentSize;return i[r]=e,i[r+1]=n,this;},l.TypedArrayHelper.prototype.setVec3=function(t,e){"use strict";return this.setVec3Components(t,e.x,e.y,e.z);},l.TypedArrayHelper.prototype.setVec3Components=function(t,e,n,i){"use strict";var r=this.array,o=this.indexOffset+t*this.componentSize;return r[o]=e,r[o+1]=n,r[o+2]=i,this;},l.TypedArrayHelper.prototype.setVec4=function(t,e){"use strict";return this.setVec4Components(t,e.x,e.y,e.z,e.w);},l.TypedArrayHelper.prototype.setVec4Components=function(t,e,n,i,r){"use strict";var o=this.array,a=this.indexOffset+t*this.componentSize;return o[a]=e,o[a+1]=n,o[a+2]=i,o[a+3]=r,this;},l.TypedArrayHelper.prototype.setMat3=function(t,e){"use strict";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements);},l.TypedArrayHelper.prototype.setMat4=function(t,e){"use strict";return this.setFromArray(this.indexOffset+t*this.componentSize,e.elements);},l.TypedArrayHelper.prototype.setColor=function(t,e){"use strict";return this.setVec3Components(t,e.r,e.g,e.b);},l.TypedArrayHelper.prototype.setNumber=function(t,e){"use strict";return this.array[this.indexOffset+t*this.componentSize]=e,this;},l.TypedArrayHelper.prototype.getValueAtIndex=function(t){"use strict";return this.array[this.indexOffset+t];},l.TypedArrayHelper.prototype.getComponentValueAtIndex=function(t){"use strict";return this.array.subarray(this.indexOffset+t*this.componentSize);},l.ShaderAttribute=function(t,e,n){"use strict";var i=l.ShaderAttribute.typeSizeMap;this.type="string"==typeof t&&i.hasOwnProperty(t)?t:"f",this.componentSize=i[this.type],this.arrayType=n||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!e,this.updateMin=0,this.updateMax=0;},l.ShaderAttribute.constructor=l.ShaderAttribute,l.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},l.ShaderAttribute.prototype.setUpdateRange=function(t,e){"use strict";this.updateMin=Math.min(t*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math.max(e*this.componentSize,this.updateMax*this.componentSize);},l.ShaderAttribute.prototype.flagUpdate=function(){"use strict";var t=this.bufferAttribute,e=t.updateRange;e.offset=this.updateMin,e.count=Math.min(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),t.needsUpdate=!0;},l.ShaderAttribute.prototype.resetUpdateRange=function(){"use strict";this.updateMin=0,this.updateMax=0;},l.ShaderAttribute.prototype.resetDynamic=function(){"use strict";this.bufferAttribute.dynamic=this.dynamicBuffer;},l.ShaderAttribute.prototype.splice=function(t,e){"use strict";this.typedArray.splice(t,e),this.forceUpdateAll();},l.ShaderAttribute.prototype.forceUpdateAll=function(){"use strict";this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.dynamic=!1,this.bufferAttribute.needsUpdate=!0;},l.ShaderAttribute.prototype._ensureTypedArray=function(t){"use strict";null!==this.typedArray&&this.typedArray.size===t*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==t?this.typedArray.setSize(t):null===this.typedArray&&(this.typedArray=new l.TypedArrayHelper(this.arrayType,t,this.componentSize)));},l.ShaderAttribute.prototype._createBufferAttribute=function(t){"use strict";return this._ensureTypedArray(t),null!==this.bufferAttribute?(this.bufferAttribute.array=this.typedArray.array,parseFloat(u.REVISION)>=81&&(this.bufferAttribute.count=this.bufferAttribute.array.length/this.bufferAttribute.itemSize),void(this.bufferAttribute.needsUpdate=!0)):(this.bufferAttribute=new u.BufferAttribute(this.typedArray.array,this.componentSize),void(this.bufferAttribute.dynamic=this.dynamicBuffer));},l.ShaderAttribute.prototype.getLength=function(){"use strict";return null===this.typedArray?0:this.typedArray.array.length;},l.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\\n"),uniforms:["uniform float deltaTime;","uniform float runTime;","uniform sampler2D texture;","uniform vec4 textureAnimation;","uniform float scale;"].join("\\n"),attributes:["attribute vec4 acceleration;","attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"].join("\\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"].join("\\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"].join("\\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","   return c;","}"].join("\\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"].join("\\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"].join("\\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}","float getAge() {","   return params.y;","}","float getMaxAge() {","   return params.z;","}","float getWiggle() {","   return params.w;","}"].join("\\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"].join("\\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;","      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"].join("\\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #endif","","    vec4 rotatedTexture = texture2D( texture, vUv );"].join("\\n")},l.shaders={vertex:[l.shaderChunks.defines,l.shaderChunks.uniforms,l.shaderChunks.attributes,l.shaderChunks.varyings,u.ShaderChunk.common,u.ShaderChunk.logdepthbuf_pars_vertex,u.ShaderChunk.fog_pars_vertex,l.shaderChunks.branchAvoidanceFunctions,l.shaderChunks.unpackColor,l.shaderChunks.unpackRotationAxis,l.shaderChunks.floatOverLifetime,l.shaderChunks.colorOverLifetime,l.shaderChunks.paramFetchingFunctions,l.shaderChunks.forceFetchingFunctions,l.shaderChunks.rotationFunctions,"void main() {","    highp float age = getAge();","    highp float alive = getAlive();","    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPosition.xyz );","    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,","           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),","           unpackColor( color.w )","       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPosition;",u.ShaderChunk.logdepthbuf_vertex,u.ShaderChunk.fog_vertex,"}"].join("\\n"),fragment:[l.shaderChunks.uniforms,u.ShaderChunk.common,u.ShaderChunk.fog_pars_fragment,u.ShaderChunk.logdepthbuf_pars_fragment,l.shaderChunks.varyings,l.shaderChunks.branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",l.shaderChunks.rotateTexture,u.ShaderChunk.logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",u.ShaderChunk.fog_fragment,"}"].join("\\n")},l.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:function ensureTypedArg(t,e,n){"use strict";return("undefined"==typeof t?"undefined":a(t))===e?t:n;},ensureArrayTypedArg:function ensureArrayTypedArg(t,e,n){"use strict";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i){if(a(t[i])!==e)return n;}return t;}return this.ensureTypedArg(t,e,n);},ensureInstanceOf:function ensureInstanceOf(t,e,n){"use strict";return void 0!==e&&t instanceof e?t:n;},ensureArrayInstanceOf:function ensureArrayInstanceOf(t,e,n){"use strict";if(Array.isArray(t)){for(var i=t.length-1;i>=0;--i){if(void 0!==e&&t[i]instanceof e==!1)return n;}return t;}return this.ensureInstanceOf(t,e,n);},ensureValueOverLifetimeCompliance:function ensureValueOverLifetimeCompliance(t,e,n){"use strict";e=e||3,n=n||3,Array.isArray(t._value)===!1&&(t._value=[t._value]),Array.isArray(t._spread)===!1&&(t._spread=[t._spread]);var i=this.clamp(t._value.length,e,n),r=this.clamp(t._spread.length,e,n),o=Math.max(i,r);t._value.length!==o&&(t._value=this.interpolateArray(t._value,o)),t._spread.length!==o&&(t._spread=this.interpolateArray(t._spread,o));},interpolateArray:function interpolateArray(t,e){"use strict";for(var n=t.length,i=["function"==typeof t[0].clone?t[0].clone():t[0]],r=(n-1)/(e-1),o=1;o<e-1;++o){var a=o*r,s=Math.floor(a),u=Math.ceil(a),l=a-s;i[o]=this.lerpTypeAgnostic(t[s],t[u],l);}return i.push("function"==typeof t[n-1].clone?t[n-1].clone():t[n-1]),i;},clamp:function clamp(t,e,n){"use strict";return Math.max(e,Math.min(t,n));},zeroToEpsilon:function zeroToEpsilon(t,e){"use strict";var n=1e-5,i=t;return i=e?Math.random()*n*10:n,t<0&&t>-n&&(i=-i),i;},lerpTypeAgnostic:function lerpTypeAgnostic(t,e,n){"use strict";var i,r=this.types;return("undefined"==typeof t?"undefined":a(t))===r.NUMBER&&("undefined"==typeof e?"undefined":a(e))===r.NUMBER?t+(e-t)*n:t instanceof u.Vector2&&e instanceof u.Vector2?(i=t.clone(),i.x=this.lerp(t.x,e.x,n),i.y=this.lerp(t.y,e.y,n),i):t instanceof u.Vector3&&e instanceof u.Vector3?(i=t.clone(),i.x=this.lerp(t.x,e.x,n),i.y=this.lerp(t.y,e.y,n),i.z=this.lerp(t.z,e.z,n),i):t instanceof u.Vector4&&e instanceof u.Vector4?(i=t.clone(),i.x=this.lerp(t.x,e.x,n),i.y=this.lerp(t.y,e.y,n),i.z=this.lerp(t.z,e.z,n),i.w=this.lerp(t.w,e.w,n),i):t instanceof u.Color&&e instanceof u.Color?(i=t.clone(),i.r=this.lerp(t.r,e.r,n),i.g=this.lerp(t.g,e.g,n),i.b=this.lerp(t.b,e.b,n),i):void console.warn("Invalid argument types, or argument types do not match:",t,e);},lerp:function lerp(t,e,n){"use strict";return t+(e-t)*n;},roundToNearestMultiple:function roundToNearestMultiple(t,e){"use strict";var n=0;return 0===e?t:(n=Math.abs(t)%e,0===n?t:t<0?-(Math.abs(t)-n):t+e-n);},arrayValuesAreEqual:function arrayValuesAreEqual(t){"use strict";for(var e=0;e<t.length-1;++e){if(t[e]!==t[e+1])return!1;}return!0;},randomFloat:function randomFloat(t,e){"use strict";return t+e*(Math.random()-.5);},randomVector3:function randomVector3(t,e,n,i,r){"use strict";var o=n.x+(Math.random()*i.x-.5*i.x),a=n.y+(Math.random()*i.y-.5*i.y),s=n.z+(Math.random()*i.z-.5*i.z);r&&(o=.5*-r.x+this.roundToNearestMultiple(o,r.x),a=.5*-r.y+this.roundToNearestMultiple(a,r.y),s=.5*-r.z+this.roundToNearestMultiple(s,r.z)),t.typedArray.setVec3Components(e,o,a,s);},randomColor:function randomColor(t,e,n,i){"use strict";var r=n.r+Math.random()*i.x,o=n.g+Math.random()*i.y,a=n.b+Math.random()*i.z;r=this.clamp(r,0,1),o=this.clamp(o,0,1),a=this.clamp(a,0,1),t.typedArray.setVec3Components(e,r,o,a);},randomColorAsHex:function(){"use strict";var t=new u.Color();return function(e,n,i,r){for(var o=i.length,a=[],s=0;s<o;++s){var u=r[s];t.copy(i[s]),t.r+=Math.random()*u.x-.5*u.x,t.g+=Math.random()*u.y-.5*u.y,t.b+=Math.random()*u.z-.5*u.z,t.r=this.clamp(t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this.clamp(t.b,0,1),a.push(t.getHex());}e.typedArray.setVec4Components(n,a[0],a[1],a[2],a[3]);};}(),randomVector3OnSphere:function randomVector3OnSphere(t,e,n,i,r,o,a,s){"use strict";var u=2*Math.random()-1,l=6.2832*Math.random(),c=Math.sqrt(1-u*u),h=this.randomFloat(i,r),f=0,d=0,p=0;a&&(h=Math.round(h/a)*a),f=c*Math.cos(l)*h,d=c*Math.sin(l)*h,p=u*h,f*=o.x,d*=o.y,p*=o.z,f+=n.x,d+=n.y,p+=n.z,t.typedArray.setVec3Components(e,f,d,p);},seededRandom:function seededRandom(t){var e=1e4*Math.sin(t);return e-(0|e);},randomVector3OnDisc:function randomVector3OnDisc(t,e,n,i,r,o,a){"use strict";var s=6.2832*Math.random(),u=Math.abs(this.randomFloat(i,r)),l=0,c=0,h=0;a&&(u=Math.round(u/a)*a),l=Math.cos(s)*u,c=Math.sin(s)*u,l*=o.x,c*=o.y,l+=n.x,c+=n.y,h+=n.z,t.typedArray.setVec3Components(e,l,c,h);},randomDirectionVector3OnSphere:function(){"use strict";var t=new u.Vector3();return function(e,n,i,r,o,a,s,u){t.copy(a),t.x-=i,t.y-=r,t.z-=o,t.normalize().multiplyScalar(-this.randomFloat(s,u)),e.typedArray.setVec3Components(n,t.x,t.y,t.z);};}(),randomDirectionVector3OnDisc:function(){"use strict";var t=new u.Vector3();return function(e,n,i,r,o,a,s,u){t.copy(a),t.x-=i,t.y-=r,t.z-=o,t.normalize().multiplyScalar(-this.randomFloat(s,u)),e.typedArray.setVec3Components(n,t.x,t.y,0);};}(),getPackedRotationAxis:function(){"use strict";var t=new u.Vector3(),e=new u.Vector3(),n=new u.Color(),i=new u.Vector3(1,1,1);return function(r,o){return t.copy(r).normalize(),e.copy(o).normalize(),t.x+=.5*-o.x+Math.random()*o.x,t.y+=.5*-o.y+Math.random()*o.y,t.z+=.5*-o.z+Math.random()*o.z,t.normalize().add(i).multiplyScalar(.5),n.setRGB(t.x,t.y,t.z),n.getHex();};}()},l.Group=function(t){"use strict";var e=l.utils,n=e.types;t=e.ensureTypedArg(t,n.OBJECT,{}),t.texture=e.ensureTypedArg(t.texture,n.OBJECT,{}),this.uuid=u.Math.generateUUID(),this.fixedTimeStep=e.ensureTypedArg(t.fixedTimeStep,n.NUMBER,.016),this.texture=e.ensureInstanceOf(t.texture.value,u.Texture,null),this.textureFrames=e.ensureInstanceOf(t.texture.frames,u.Vector2,new u.Vector2(1,1)),this.textureFrameCount=e.ensureTypedArg(t.texture.frameCount,n.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=e.ensureTypedArg(t.texture.loop,n.NUMBER,1),this.textureFrames.max(new u.Vector2(1,1)),this.hasPerspective=e.ensureTypedArg(t.hasPerspective,n.BOOLEAN,!0),this.colorize=e.ensureTypedArg(t.colorize,n.BOOLEAN,!0),this.maxParticleCount=e.ensureTypedArg(t.maxParticleCount,n.NUMBER,null),this.blending=e.ensureTypedArg(t.blending,n.NUMBER,u.AdditiveBlending),this.transparent=e.ensureTypedArg(t.transparent,n.BOOLEAN,!0),this.alphaTest=parseFloat(e.ensureTypedArg(t.alphaTest,n.NUMBER,0)),this.depthWrite=e.ensureTypedArg(t.depthWrite,n.BOOLEAN,!1),this.depthTest=e.ensureTypedArg(t.depthTest,n.BOOLEAN,!0),this.fog=e.ensureTypedArg(t.fog,n.BOOLEAN,!0),this.scale=e.ensureTypedArg(t.scale,n.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={texture:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new u.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},fogColor:{type:"c",value:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:l.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new l.ShaderAttribute("v3",!0),acceleration:new l.ShaderAttribute("v4",!0),velocity:new l.ShaderAttribute("v3",!0),rotation:new l.ShaderAttribute("v4",!0),rotationCenter:new l.ShaderAttribute("v3",!0),params:new l.ShaderAttribute("v4",!0),size:new l.ShaderAttribute("v4",!0),angle:new l.ShaderAttribute("v4",!0),color:new l.ShaderAttribute("v4",!0),opacity:new l.ShaderAttribute("v4",!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new u.ShaderMaterial({uniforms:this.uniforms,vertexShader:l.shaders.vertex,fragmentShader:l.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new u.BufferGeometry(),this.mesh=new u.Points(this.geometry,this.material),null===this.maxParticleCount&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.");},l.Group.constructor=l.Group,l.Group.prototype._updateDefines=function(){"use strict";var t,e=this.emitters,n=e.length-1,i=this.defines;for(n;n>=0;--n){t=e[n],i.SHOULD_CALCULATE_SPRITE||(i.SHOULD_ROTATE_TEXTURE=i.SHOULD_ROTATE_TEXTURE||!!Math.max(Math.max.apply(null,t.angle.value),Math.max.apply(null,t.angle.spread))),i.SHOULD_ROTATE_PARTICLES=i.SHOULD_ROTATE_PARTICLES||!!Math.max(t.rotation.angle,t.rotation.angleSpread),i.SHOULD_WIGGLE_PARTICLES=i.SHOULD_WIGGLE_PARTICLES||!!Math.max(t.wiggle.value,t.wiggle.spread);}this.material.needsUpdate=!0;},l.Group.prototype._applyAttributesToGeometry=function(){"use strict";var t,e,n=this.attributes,i=this.geometry,r=i.attributes;for(var o in n){n.hasOwnProperty(o)&&(t=n[o],e=r[o],e?e.array=t.typedArray.array:i.addAttribute(o,t.bufferAttribute),t.bufferAttribute.needsUpdate=!0);}this.geometry.setDrawRange(0,this.particleCount);},l.Group.prototype.addEmitter=function(t){"use strict";if(t instanceof l.Emitter==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(this.emitterIDs.indexOf(t.uuid)>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==t.group)return void console.error("Emitter already belongs to another group. Will not add to requested group.");var e=this.attributes,n=this.particleCount,i=n+t.particleCount;this.particleCount=i,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,"particles, can support only",this.maxParticleCount),t._calculatePPSValue(t.maxAge._value+t.maxAge._spread),t._setBufferUpdateRanges(this.attributeKeys),t._setAttributeOffset(n),t.group=this,t.attributes=this.attributes;for(var r in e){e.hasOwnProperty(r)&&e[r]._createBufferAttribute(null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);}for(var o=n;o<i;++o){t._assignPositionValue(o),t._assignForceValue(o,"velocity"),t._assignForceValue(o,"acceleration"),t._assignAbsLifetimeValue(o,"opacity"),t._assignAbsLifetimeValue(o,"size"),t._assignAngleValue(o),t._assignRotationValue(o),t._assignParamsValue(o),t._assignColorValue(o);}return this._applyAttributesToGeometry(),this.emitters.push(t),this.emitterIDs.push(t.uuid),this._updateDefines(t),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this;},l.Group.prototype.removeEmitter=function(t){"use strict";var e=this.emitterIDs.indexOf(t.uuid);if(t instanceof l.Emitter==!1)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",t);if(e===-1)return void console.error("Emitter does not exist in this group. Will not remove.");for(var n=t.attributeOffset,i=n+t.particleCount,r=this.attributes.params.typedArray,o=n;o<i;++o){r.array[4*o]=0,r.array[4*o+1]=0;}this.emitters.splice(e,1),this.emitterIDs.splice(e,1);for(var a in this.attributes){this.attributes.hasOwnProperty(a)&&this.attributes[a].splice(n,i);}this.particleCount-=t.particleCount,t._onRemove(),this._attributesNeedRefresh=!0;},l.Group.prototype.getFromPool=function(){"use strict";var t=this._pool,e=this._createNewWhenPoolEmpty;if(t.length)return t.pop();if(e){var n=new l.Emitter(this._poolCreationSettings);return this.addEmitter(n),n;}return null;},l.Group.prototype.releaseIntoPool=function(t){"use strict";return t instanceof l.Emitter==!1?void console.error("Argument is not instanceof SPE.Emitter:",t):(t.reset(),this._pool.unshift(t),this);},l.Group.prototype.getPool=function(){"use strict";return this._pool;},l.Group.prototype.addPool=function(t,e,n){"use strict";var i;this._poolCreationSettings=e,this._createNewWhenPoolEmpty=!!n;for(var r=0;r<t;++r){i=Array.isArray(e)?new l.Emitter(e[r]):new l.Emitter(e),this.addEmitter(i),this.releaseIntoPool(i);}return this;},l.Group.prototype._triggerSingleEmitter=function(t){"use strict";var e=this.getFromPool(),n=this;return null===e?void console.log("SPE.Group pool ran out."):(t instanceof u.Vector3&&(e.position.value.copy(t),e.position.value=e.position.value),e.enable(),setTimeout(function(){e.disable(),n.releaseIntoPool(e);},1e3*Math.max(e.duration,e.maxAge.value+e.maxAge.spread)),this);},l.Group.prototype.triggerPoolEmitter=function(t,e){"use strict";if("number"==typeof t&&t>1)for(var n=0;n<t;++n){this._triggerSingleEmitter(e);}else this._triggerSingleEmitter(e);return this;},l.Group.prototype._updateUniforms=function(t){"use strict";this.uniforms.runTime.value+=t,this.uniforms.deltaTime.value=t;},l.Group.prototype._resetBufferRanges=function(){"use strict";var t=this.attributeKeys,e=this.attributeCount-1,n=this.attributes;for(e;e>=0;--e){n[t[e]].resetUpdateRange();}},l.Group.prototype._updateBuffers=function(t){"use strict";var e,n,i,r=this.attributeKeys,o=this.attributeCount-1,a=this.attributes,s=t.bufferUpdateRanges;for(o;o>=0;--o){e=r[o],n=s[e],i=a[e],i.setUpdateRange(n.min,n.max),i.flagUpdate();}},l.Group.prototype.tick=function(t){"use strict";var e,n=this.emitters,i=n.length,r=t||this.fixedTimeStep,o=this.attributeKeys,a=this.attributes;if(this._updateUniforms(r),this._resetBufferRanges(),0!==i||this._attributesNeedRefresh!==!1||this._attributesNeedDynamicReset!==!1){for(var s,e=0;e<i;++e){s=n[e],s.tick(r),this._updateBuffers(s);}if(this._attributesNeedDynamicReset===!0){for(e=this.attributeCount-1;e>=0;--e){a[o[e]].resetDynamic();}this._attributesNeedDynamicReset=!1;}if(this._attributesNeedRefresh===!0){for(e=this.attributeCount-1;e>=0;--e){a[o[e]].forceUpdateAll();}this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0;}}},l.Group.prototype.dispose=function(){"use strict";return this.geometry.dispose(),this.material.dispose(),this;},l.Emitter=function(t){"use strict";var e=l.utils,n=e.types,i=l.valueOverLifetimeLength;t=e.ensureTypedArg(t,n.OBJECT,{}),t.position=e.ensureTypedArg(t.position,n.OBJECT,{}),t.velocity=e.ensureTypedArg(t.velocity,n.OBJECT,{}),t.acceleration=e.ensureTypedArg(t.acceleration,n.OBJECT,{}),t.radius=e.ensureTypedArg(t.radius,n.OBJECT,{}),t.drag=e.ensureTypedArg(t.drag,n.OBJECT,{}),t.rotation=e.ensureTypedArg(t.rotation,n.OBJECT,{}),t.color=e.ensureTypedArg(t.color,n.OBJECT,{}),t.opacity=e.ensureTypedArg(t.opacity,n.OBJECT,{}),t.size=e.ensureTypedArg(t.size,n.OBJECT,{}),t.angle=e.ensureTypedArg(t.angle,n.OBJECT,{}),t.wiggle=e.ensureTypedArg(t.wiggle,n.OBJECT,{}),t.maxAge=e.ensureTypedArg(t.maxAge,n.OBJECT,{}),t.onParticleSpawn&&console.warn("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=u.Math.generateUUID(),this.type=e.ensureTypedArg(t.type,n.NUMBER,l.distributions.BOX),this.position={_value:e.ensureInstanceOf(t.position.value,u.Vector3,new u.Vector3()),_spread:e.ensureInstanceOf(t.position.spread,u.Vector3,new u.Vector3()),_spreadClamp:e.ensureInstanceOf(t.position.spreadClamp,u.Vector3,new u.Vector3()),_distribution:e.ensureTypedArg(t.position.distribution,n.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1),_radius:e.ensureTypedArg(t.position.radius,n.NUMBER,10),_radiusScale:e.ensureInstanceOf(t.position.radiusScale,u.Vector3,new u.Vector3(1,1,1)),_distributionClamp:e.ensureTypedArg(t.position.distributionClamp,n.NUMBER,0)},this.velocity={_value:e.ensureInstanceOf(t.velocity.value,u.Vector3,new u.Vector3()),_spread:e.ensureInstanceOf(t.velocity.spread,u.Vector3,new u.Vector3()),_distribution:e.ensureTypedArg(t.velocity.distribution,n.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.acceleration={_value:e.ensureInstanceOf(t.acceleration.value,u.Vector3,new u.Vector3()),_spread:e.ensureInstanceOf(t.acceleration.spread,u.Vector3,new u.Vector3()),_distribution:e.ensureTypedArg(t.acceleration.distribution,n.NUMBER,this.type),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.drag={_value:e.ensureTypedArg(t.drag.value,n.NUMBER,0),_spread:e.ensureTypedArg(t.drag.spread,n.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.wiggle={_value:e.ensureTypedArg(t.wiggle.value,n.NUMBER,0),_spread:e.ensureTypedArg(t.wiggle.spread,n.NUMBER,0)},this.rotation={_axis:e.ensureInstanceOf(t.rotation.axis,u.Vector3,new u.Vector3(0,1,0)),_axisSpread:e.ensureInstanceOf(t.rotation.axisSpread,u.Vector3,new u.Vector3()),_angle:e.ensureTypedArg(t.rotation.angle,n.NUMBER,0),_angleSpread:e.ensureTypedArg(t.rotation.angleSpread,n.NUMBER,0),_static:e.ensureTypedArg(t.rotation.static,n.BOOLEAN,!1),_center:e.ensureInstanceOf(t.rotation.center,u.Vector3,this.position._value.clone()),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.maxAge={_value:e.ensureTypedArg(t.maxAge.value,n.NUMBER,2),_spread:e.ensureTypedArg(t.maxAge.spread,n.NUMBER,0)},this.color={_value:e.ensureArrayInstanceOf(t.color.value,u.Color,new u.Color()),_spread:e.ensureArrayInstanceOf(t.color.spread,u.Vector3,new u.Vector3()),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.opacity={_value:e.ensureArrayTypedArg(t.opacity.value,n.NUMBER,1),_spread:e.ensureArrayTypedArg(t.opacity.spread,n.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.size={_value:e.ensureArrayTypedArg(t.size.value,n.NUMBER,1),_spread:e.ensureArrayTypedArg(t.size.spread,n.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.angle={_value:e.ensureArrayTypedArg(t.angle.value,n.NUMBER,0),_spread:e.ensureArrayTypedArg(t.angle.spread,n.NUMBER,0),_randomise:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.particleCount=e.ensureTypedArg(t.particleCount,n.NUMBER,100),this.duration=e.ensureTypedArg(t.duration,n.NUMBER,null),this.isStatic=e.ensureTypedArg(t.isStatic,n.BOOLEAN,!1),this.activeMultiplier=e.ensureTypedArg(t.activeMultiplier,n.NUMBER,1),this.direction=e.ensureTypedArg(t.direction,n.NUMBER,1),this.alive=e.ensureTypedArg(t.alive,n.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:e.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)||e.ensureTypedArg(t.radius.randomise,n.BOOLEAN,!1),velocity:e.ensureTypedArg(t.velocity.randomise,n.BOOLEAN,!1),acceleration:e.ensureTypedArg(t.acceleration.randomise,n.BOOLEAN,!1)||e.ensureTypedArg(t.drag.randomise,n.BOOLEAN,!1),rotation:e.ensureTypedArg(t.rotation.randomise,n.BOOLEAN,!1),rotationCenter:e.ensureTypedArg(t.rotation.randomise,n.BOOLEAN,!1),size:e.ensureTypedArg(t.size.randomise,n.BOOLEAN,!1),color:e.ensureTypedArg(t.color.randomise,n.BOOLEAN,!1),opacity:e.ensureTypedArg(t.opacity.randomise,n.BOOLEAN,!1),angle:e.ensureTypedArg(t.angle.randomise,n.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:"position",velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:"params",rotation:"rotation",size:"size",color:"color",opacity:"opacity",angle:"angle"};for(var r in this.updateMap){this.updateMap.hasOwnProperty(r)&&(this.updateCounts[this.updateMap[r]]=0,this.updateFlags[this.updateMap[r]]=!1,this._createGetterSetters(this[r],r));}this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,e.ensureValueOverLifetimeCompliance(this.color,i,i),e.ensureValueOverLifetimeCompliance(this.opacity,i,i),e.ensureValueOverLifetimeCompliance(this.size,i,i),e.ensureValueOverLifetimeCompliance(this.angle,i,i);},l.Emitter.constructor=l.Emitter,l.Emitter.prototype._createGetterSetters=function(t,e){"use strict";var n=this;for(var i in t){if(t.hasOwnProperty(i)){var r=i.replace("_","");Object.defineProperty(t,r,{get:function(t){return function(){return this[t];};}(i),set:function(t){return function(i){var r=n.updateMap[e],o=this[t],a=l.valueOverLifetimeLength;"_rotationCenter"===t?(n.updateFlags.rotationCenter=!0,n.updateCounts.rotationCenter=0):"_randomise"===t?n.resetFlags[r]=i:(n.updateFlags[r]=!0,n.updateCounts[r]=0),n.group._updateDefines(),this[t]=i,Array.isArray(o)&&l.utils.ensureValueOverLifetimeCompliance(n[e],a,a);};}(i)});}}},l.Emitter.prototype._setBufferUpdateRanges=function(t){"use strict";this.attributeKeys=t,this.attributeCount=t.length;for(var e=this.attributeCount-1;e>=0;--e){this.bufferUpdateRanges[t[e]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};}},l.Emitter.prototype._calculatePPSValue=function(t){"use strict";var e=this.particleCount;this.duration?this.particlesPerSecond=e/(t<this.duration?t:this.duration):this.particlesPerSecond=e/t;},l.Emitter.prototype._setAttributeOffset=function(t){this.attributeOffset=t,this.activationIndex=t,this.activationEnd=t+this.particleCount;},l.Emitter.prototype._assignValue=function(t,e){"use strict";switch(t){case"position":this._assignPositionValue(e);break;case"velocity":case"acceleration":this._assignForceValue(e,t);break;case"size":case"opacity":this._assignAbsLifetimeValue(e,t);break;case"angle":this._assignAngleValue(e);break;case"params":this._assignParamsValue(e);break;case"rotation":this._assignRotationValue(e);break;case"color":this._assignColorValue(e);}},l.Emitter.prototype._assignPositionValue=function(t){"use strict";var e=l.distributions,n=l.utils,i=this.position,r=this.attributes.position,o=i._value,a=i._spread,s=i._distribution;switch(s){case e.BOX:n.randomVector3(r,t,o,a,i._spreadClamp);break;case e.SPHERE:n.randomVector3OnSphere(r,t,o,i._radius,i._spread.x,i._radiusScale,i._spreadClamp.x,i._distributionClamp||this.particleCount);break;case e.DISC:n.randomVector3OnDisc(r,t,o,i._radius,i._spread.x,i._radiusScale,i._spreadClamp.x);}},l.Emitter.prototype._assignForceValue=function(t,e){"use strict";var n,i,r,o,a,s=l.distributions,u=l.utils,c=this[e],h=c._value,f=c._spread,d=c._distribution;switch(d){case s.BOX:u.randomVector3(this.attributes[e],t,h,f);break;case s.SPHERE:n=this.attributes.position.typedArray.array,a=3*t,i=n[a],r=n[a+1],o=n[a+2],u.randomDirectionVector3OnSphere(this.attributes[e],t,i,r,o,this.position._value,c._value.x,c._spread.x);break;case s.DISC:n=this.attributes.position.typedArray.array,a=3*t,i=n[a],r=n[a+1],o=n[a+2],u.randomDirectionVector3OnDisc(this.attributes[e],t,i,r,o,this.position._value,c._value.x,c._spread.x);}if("acceleration"===e){var p=u.clamp(u.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*t+3]=p;}},l.Emitter.prototype._assignAbsLifetimeValue=function(t,e){"use strict";var n,i=this.attributes[e].typedArray,r=this[e],o=l.utils;o.arrayValuesAreEqual(r._value)&&o.arrayValuesAreEqual(r._spread)?(n=Math.abs(o.randomFloat(r._value[0],r._spread[0])),i.setVec4Components(t,n,n,n,n)):i.setVec4Components(t,Math.abs(o.randomFloat(r._value[0],r._spread[0])),Math.abs(o.randomFloat(r._value[1],r._spread[1])),Math.abs(o.randomFloat(r._value[2],r._spread[2])),Math.abs(o.randomFloat(r._value[3],r._spread[3])));},l.Emitter.prototype._assignAngleValue=function(t){"use strict";var e,n=this.attributes.angle.typedArray,i=this.angle,r=l.utils;r.arrayValuesAreEqual(i._value)&&r.arrayValuesAreEqual(i._spread)?(e=r.randomFloat(i._value[0],i._spread[0]),n.setVec4Components(t,e,e,e,e)):n.setVec4Components(t,r.randomFloat(i._value[0],i._spread[0]),r.randomFloat(i._value[1],i._spread[1]),r.randomFloat(i._value[2],i._spread[2]),r.randomFloat(i._value[3],i._spread[3]));},l.Emitter.prototype._assignParamsValue=function(t){"use strict";this.attributes.params.typedArray.setVec4Components(t,this.isStatic?1:0,0,Math.abs(l.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),l.utils.randomFloat(this.wiggle._value,this.wiggle._spread));},l.Emitter.prototype._assignRotationValue=function(t){"use strict";this.attributes.rotation.typedArray.setVec3Components(t,l.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),l.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(t,this.rotation._center);},l.Emitter.prototype._assignColorValue=function(t){"use strict";l.utils.randomColorAsHex(this.attributes.color,t,this.color._value,this.color._spread);},l.Emitter.prototype._resetParticle=function(t){"use strict";for(var e,n,i=this.resetFlags,r=this.updateFlags,o=this.updateCounts,a=this.attributeKeys,s=this.attributeCount-1;s>=0;--s){e=a[s],n=r[e],i[e]!==!0&&n!==!0||(this._assignValue(e,t),this._updateAttributeUpdateRange(e,t),n===!0&&o[e]===this.particleCount?(r[e]=!1,o[e]=0):1==n&&++o[e]);}},l.Emitter.prototype._updateAttributeUpdateRange=function(t,e){"use strict";var n=this.bufferUpdateRanges[t];n.min=Math.min(e,n.min),n.max=Math.max(e,n.max);},l.Emitter.prototype._resetBufferRanges=function(){"use strict";var t,e=this.bufferUpdateRanges,n=this.bufferUpdateKeys,i=this.bufferUpdateCount-1;for(i;i>=0;--i){t=n[i],e[t].min=Number.POSITIVE_INFINITY,e[t].max=Number.NEGATIVE_INFINITY;}},l.Emitter.prototype._onRemove=function(){"use strict";this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0;},l.Emitter.prototype._decrementParticleCount=function(){"use strict";--this.activeParticleCount;},l.Emitter.prototype._incrementParticleCount=function(){"use strict";++this.activeParticleCount;},l.Emitter.prototype._checkParticleAges=function(t,e,n,i){"use strict";for(var r,o,a,s,u=e-1;u>=t;--u){r=4*u,s=n[r],0!==s&&(a=n[r+1],o=n[r+2],1===this.direction?(a+=i,a>=o&&(a=0,s=0,this._decrementParticleCount())):(a-=i,a<=0&&(a=o,s=0,this._decrementParticleCount())),n[r]=s,n[r+1]=a,this._updateAttributeUpdateRange("params",u));}},l.Emitter.prototype._activateParticles=function(t,e,n,i){"use strict";for(var r,o,a=this.direction,s=t;s<e;++s){r=4*s,0!=n[r]&&1!==this.particleCount||(this._incrementParticleCount(),n[r]=1,this._resetParticle(s),o=i*(s-t),n[r+1]=a===-1?n[r+2]-o:o,this._updateAttributeUpdateRange("params",s));}},l.Emitter.prototype.tick=function(t){"use strict";if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var e=this.attributeOffset,n=e+this.particleCount,i=this.paramsArray,r=this.particlesPerSecond*this.activeMultiplier*t,o=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(e,n,i,t),this.alive===!1)return void(this.age=0);if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var a=1===this.particleCount?o:0|o,s=Math.min(a+r,this.activationEnd),u=s-this.activationIndex|0,l=u>0?t/u:0;this._activateParticles(a,s,i,l),this.activationIndex+=r,this.activationIndex>n&&(this.activationIndex=e),this.age+=t;}},l.Emitter.prototype.reset=function(t){"use strict";if(this.age=0,this.alive=!1,t===!0){for(var e,n=this.attributeOffset,i=n+this.particleCount,r=this.paramsArray,o=this.attributes.params.bufferAttribute,a=i-1;a>=n;--a){e=4*a,r[e]=0,r[e+1]=0;}o.updateRange.offset=0,o.updateRange.count=-1,o.needsUpdate=!0;}return this;},l.Emitter.prototype.enable=function(){"use strict";return this.alive=!0,this;},l.Emitter.prototype.disable=function(){"use strict";return this.alive=!1,this;},l.Emitter.prototype.remove=function(){"use strict";return null!==this.group?this.group.removeEmitter(this):console.error("Emitter does not belong to a group, cannot remove."),this;};},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){var e=new c.default(),n=t.getAllResponseHeaders().trim().split("\\n");return n.forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();i&&0!==i.length&&e.append(i,r);}),e;}Object.defineProperty(e,"__esModule",{value:!0});var o=n(40),a=i(o),s=n(41),u=i(s),l=n(20),c=i(l),h="undefined"==typeof Promise?n(14).Promise:Promise,f=function f(t,e){var n=new XMLHttpRequest();return new h(function(i,o){function s(){return"responseURL"in n?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null;}var l=void 0;l=a.default.prototype.isPrototypeOf(t)&&!e?t:new a.default(t,e),n.onload=function(){var t=n.status,e=n.statusText,o={status:t,statusText:e,headers:r(n),url:s()},a="response"in n?n.response:n.responseText;i(new u.default(a,o));},n.onerror=function(){o(new TypeError("Network request failed"));},n.open(l.method,l.url,!0),"include"===l.credientials&&(n.withCredientials=!0),l.headers.forEach(function(t,e){return n.setRequestHeader(t,e);}),n.send(l._bodyInit?l._bodyInit:null);});};e.default=f;},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"==typeof Promise?n(14).Promise:Promise,r=function r(t){return new i(function(e){return setTimeout(e,t);});},o=function o(t,e){return i.race([t,r(e).then(function(){throw new Error("Request Timeout after "+e+" ms");})]);};o.wait=r,e.default=o;},function(t,e,n){"use strict";var i=n(213);t.exports=function t(e){function n(t){var e=toString.call(t);if(void 0===g[e])return!1;var n=i(""+t);if(void 0===g[e][n])return!1;for(var r=g[e][n],o=0;o<r.length;++o){if(this.fEquals&&this.fEquals(r[o],t)||r[o]===t)return!0;}return!1;}function r(t){var e=toString.call(t);void 0===g[e]&&(g[e]=Object.create(null));var n=i(""+t);if(void 0===g[e][n])return g[e][n]=[t],p++,!0;for(var r=0,o=-1,a=g[e][n];r<a.length;++r){if(this.fEquals&&this.fEquals(a[r],t)||a[r]===t)return!1;void 0===a[r]&&(o=r);}return o>=0?a[o]=t:a.push(t),p++,!0;}function o(t){var e=toString.call(t);if(void 0===g[e])return!1;var n=i(""+t);if(void 0===g[e][n])return!1;for(var r=g[e][n],o=0;o<r.length;++o){if(this.fEquals&&this.fEquals(r[o],t)||r[o]===t)return r[o]=void 0,p--,!0;}return!1;}function a(){var t,e=[],n=Object.keys(g);return n.forEach(function(n){t=Object.keys(g[n]),t.forEach(function(t){for(var i=g[n][t],r=0;r<i.length;++r){e.push(i[r]);}});}),e;}function s(t){if(p<1)return!0;if(t.length<1)return!1;var e=a();for(var n in e){if(!t.contains(e[n]))return!1;}return!0;}function u(t){if(0===t.length)return!0;if(this.length<t.length)return!1;var e=t.toArray();for(var i in e){if(!n(e[i]))return!1;}return!0;}function l(t){var e=t.toArray();e.forEach(function(t){r(t);});}function c(t){if(p!==t.length)return!1;var e=t.toArray();for(var i in e){if(!n(e[i]))return!1;}return!0;}function h(t){if(0!==p)for(var e=a(),n=0;n<e.length;++n){t.contains(e[n])||o(e[n]);}}if(!(this instanceof t)){for(var f=new t(),d=0;d<arguments.length;++d){f.add(arguments[d]);}return f;}var p=0,g=Object.create(null);Object.defineProperty(this,"length",{get:function get(){return p;}});var v=this;[].forEach.call(arguments,function(t){"function"==typeof t?v.fEquals=e:r(t);}),this.contains=n,this.equals=c,this.add=r,this.remove=o,this.toArray=a,this.isSubSetOf=s,this.isSuperSetOf=u,this.unionWith=l,this.intersectWith=h;};},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function n(t,e){return t.replace(/\\/+$/,"")+"/"+e.replace(/^\\/+/,"");};e.default=n;},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function n(t){return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(t);};e.default=n;},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]");},o=function o(t){var e=[];return Object.keys(t).forEach(function(n){var o=t[n];(0,i.isPresent)(o)&&e.push(r(n)+"="+r(o));}),e.join("&");};e.default=o;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),o=i(r);e.default=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){var n={};for(var i in t){e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);}return n;}function o(t,e,n){var i=a(t,e,n),u=i.endpoint,l=r(i,["endpoint"]),c=(0,h.default)(u,l).then(s);return b(c,o.defaults.timeout).catch(function(t){return y.reject(t);});}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=void 0;i=(0,m.default)(t)?t:(0,g.default)(o.defaults.baseURL,t);var r={method:n,endpoint:i,headers:x()};return r=l({},r,e),e.json&&(r.headers["Content-Type"]="application/json;charset=utf-8",r.body=JSON.stringify(e.json)),e.form&&(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",r.body=(0,d.default)(e.form)),e.body&&(r.body=e.body),e.params&&(i+="?"+(0,d.default)(l({},e.params,o.defaults.params)),r.endpoint=i),r;}function s(t){return new y(function(e,n){var i=[204,205];if(i.indexOf(t.status)!==-1)return e(t.ok);if(t.ok){var r=t.headers.get("Content-Type");r.indexOf("application/json")!==-1&&e(t.json()),e(t);}var o=new Error(t.statusText);try{t.clone().json().then(function(e){o.body=e,o.response=t,n(o);});}catch(e){o.response=t,n(o);}});}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=u||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}}return t;},c=n(9),h=i(c),f=n(82),d=i(f),p=n(80),g=i(p),v=n(81),m=i(v),y="undefined"==typeof Promise?n(14).Promise:Promise,_=function _(t){return new y(function(e){return setTimeout(e,t);});},b=function b(t,e){return y.race([t,_(e).then(function(){var t=new Error("网络连接超时");throw t.statusCode=408,t;})]);};o.defaults={baseURL:"https://api.ipalmap.com",timeout:1e4,headers:{Accept:"application/json"},params:{}};var x=function x(){var t=l({},o.defaults.headers);return o.defaults.jwt&&(t.Authorization="Bearer "+o.defaults.jwt),t;};o.get=function(t,e){return o(t,e,"GET");},o.head=function(t,e){return o(t,e,"HEAD");},o.options=function(t,e){return o(t,e,"OPTIONS");},o.post=function(t,e){return o(t,e,"POST");},o.put=function(t,e){return o(t,e,"PUT");},o.delete=function(t,e){return o(t,e,"DELETE");},o.del=o.delete,e.default=o;},function(t,e,n){var i,r;(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);};!function(){function a(t){switch(this.clear(),arguments.length){case 0:break;case 1:this.copy(t);break;default:u(this,arguments);}}function s(t){var e=Object.prototype.toString.call(t),n=e.slice(8,-1).toLowerCase();return"domwindow"!==n||t?n:t+"";}function u(t,e){for(var n=0;n<e.length;n+=2){t.set(e[n],e[n+1]);}}function l(t){return function(){return t.apply(this,arguments),this;};}function c(t,e){Object.defineProperty&&Object.defineProperty(t,e,{enumerable:!1});}function h(t,e){this.x=t,this.y=e;}function f(t,e){this.firstPoint=t,this.secondPoint=e;}function d(t,e){this.scope=t,this.intercept=e;}function p(t,e){this.firstLine=t,this.secondLine=e;}function g(t,e){this.center=t,this.radius=e;}function v(t,e){this.firstCircle=t,this.secondCircle=e;}function m(t,e,n,i,r,o,a,s,u,l,c){this.beaconId=t,this.mapId=e,this.sceneId=n,this.floorId=i,this.uuid=r,this.major=o,this.minor=a,this.x=s,this.y=u,this.atten=l,this.lossCoe=c;}function y(t,e,n,i){this.uuid=t,this.major=e,this.minor=n,this.distance=i;}function _(){}function b(t){return this.rssiBoundary=t&&t.rssiBoundary?t.rssiBoundary:10,this.distBoundary=t&&t.distBoundary?t.distBoundary:6,this;}function x(){}var w=a.prototype={constructor:a,get:function get(t){var e=this._data[this.hash(t)];return e&&e[1];},put:function put(t,e){var n=this.hash(t);n in this._data||this._count++,this._data[n]=[t,e];},multi:function multi(){u(this,arguments);},copy:function copy(t){for(var e in t._data){e in this._data||this._count++,this._data[e]=t._data[e];}},containsKey:function containsKey(t){var e=this.hash(t),n=e in this._data;return n;},search:function search(t){for(var e in this._data){if(this._data[e][1]===t)return this._data[e][0];}return null;},remove:function remove(t){var e=this.hash(t);e in this._data&&(this._count--,delete this._data[e]);},isEmpty:function isEmpty(){return 0==this._count;},keyArray:function keyArray(){var t=[];return this.forEach(function(e,n){t.push(n);}),t;},values:function t(){var t=[];return this.forEach(function(e){t.push(e);}),t;},size:function size(){return this._count;},clear:function clear(){this._data={},this._count=0;},clone:function clone(){return new a(this);},hash:function hash(t){switch(s(t)){case"undefined":case"null":case"boolean":case"number":case"regexp":return t+"";case"date":return"♣"+t.getTime();case"string":return"♠"+t;case"array":for(var e=[],n=0;n<t.length;n++){e[n]=this.hash(t[n]);}return"♥"+e.join("⁞");default:return t.hasOwnProperty("_hmuid_")||(t._hmuid_=++a.uid,c(t,"_hmuid_")),"♦"+t._hmuid_;}},forEach:function forEach(t,e){for(var n in this._data){var i=this._data[n];t.call(e||this,i[1],i[0]);}}};a.uid=0;for(var E in w){if("constructor"!==E&&w.hasOwnProperty(E)){var S=w[E];S.toString().indexOf("return ")===-1&&(w[E]=l(S));}}h.prototype.setPoint=function(t,e){this.x=t,this.y=e;},f.prototype.setPoints=function(t,e){this.firstPoint=t,this.secondPoint=e;},f.prototype.getRelation=function(){var t=this.firstPoint.x==this.secondPoint.x?10:20,e=this.firstPoint.y==this.secondPoint.y?1:2,n=t+e,i=0;switch(n){case 11:i=1;break;case 12:i=2;break;case 21:i=3;break;case 22:i=4;}return i;},f.prototype.getDistance=function(){return Math.sqrt((this.firstPoint.x-this.secondPoint.x)*(this.firstPoint.x-this.secondPoint.x)+(this.firstPoint.y-this.secondPoint.y)*(this.firstPoint.y-this.secondPoint.y));},d.prototype.setLine=function(t,e){this.scope=t,this.intercept=e;},d.prototype.lineGenerateByTwoPoints=function(t,e){this.scope=(t.y-e.y)/(t.x-e.x),this.intercept=t.y-this.scope*t.x;},d.prototype.lineGenerateByPointScope=function(t,e){this.scope=e,this.intercept=t.y-e*t.x;},p.prototype.setLines=function(t,e){this.firstLine=t,this.secondLine=e;},p.prototype.getRelation=function(){var t=this.firstLine.scope==this.secondLine.scope?10:20,e=this.firstLine.intercept==this.secondLine.intercept?1:2,n=t+e,i=0;switch(n){case 11:i=1;break;case 12:i=2;break;case 21:i=3;break;case 22:i=4;}return i;},p.prototype.insect=function(){var t=this.getRelation(),e=Object.create(h.prototype);switch(t){case 3:e.setPoint(0,this.firstLine.intercept);break;case 4:var n=(this.secondLine.intercept-this.firstLine.intercept)/(this.firstLine.scope-this.secondLine.scope),i=this.firstLine.scope*n+this.firstLine.intercept;e.setPoint(n,i);break;default:console.log("no crossPoint between lines");}return e;},g.prototype.setCircle=function(t,e){this.center=t,this.radius=e;},v.prototype.setCircles=function(t,e){this.firstCircle=t,this.secondCircle=e;},v.prototype.getRelation=function(){var t=this.firstCircle.center==this.secondCircle.center?1:2,e=this.firstCircle.radius==this.secondCircle.radius?10:20,n=t+e,i=0;switch(n){case 11:i=1;break;case 12:i=2;break;case 21:i=3;break;case 22:i=4;}return i;},v.prototype.insect=function(){for(var t=Object.create(Array.prototype),e=0;e<2;e++){t[e]=Object.create(h.prototype);}var n=Object.create(f.prototype);n.setPoints(this.firstCircle.center,this.secondCircle.center);var i=n.getRelation();return t=this.locationOption(i);},v.prototype.locationOption=function(t){switch(t){case 1:return this.CenterXYEqual();case 2:return this.CenterXEqual();case 3:return this.CenterYEqual();case 4:return this.CenterNoEqual();default:return 1;}},v.prototype.CenterXYEqual=function(){console.warn("the centers of the circle are the same!");for(var t=Object.create(Array.prototype),e=0;e<2;e++){t[e]=Object.create(h.prototype);}return t[0]=C,t[1]=C,t;},v.prototype.CenterXEqual=function(){for(var t=Object.create(Array.prototype),e=0;e<2;e++){t[e]=Object.create(h.prototype);}var n=0,i=Math.abs(this.firstCircle.center.y-this.secondCircle.center.y);return this.firstCircle.center.y<this.secondCircle.center.y?(n=(Math.pow(i,2)+Math.pow(this.firstCircle.radius,2)-Math.pow(this.secondCircle.radius,2))/(2*this.firstCircle.radius*i),t[0].y=this.firstCircle.center.y+this.firstCircle.radius*n,t[1].y=t[0].y,t[0].x=this.firstCircle.center.x+this.firstCircle.radius*Math.sqrt(1-Math.pow(n,2)),t[1].x=this.firstCircle.center.x-this.firstCircle.radius*Math.sqrt(1-Math.pow(n,2))):(n=(Math.pow(i,2)+Math.pow(this.secondCircle.radius,2)-Math.pow(this.firstCircle.radius,2))/(2*this.secondCircle.radius*i),t[0].y=this.secondCircle.center.y+this.secondCircle.radius*n,t[1].y=t[0].y,t[0].x=this.secondCircle.center.x+this.secondCircle.radius*Math.sqrt(1-Math.pow(n,2)),t[1].x=this.secondCircle.center.x-this.secondCircle.radius*Math.sqrt(1-Math.pow(n,2))),t;},v.prototype.CenterYEqual=function(){for(var t=Object.create(Array.prototype),e=0;e<3;e++){t[e]=Object.create(h.prototype);}var n=0,i=Math.abs(this.firstCircle.center.x-this.secondCircle.center.x);return this.firstCircle.center.x<this.secondCircle.center.x?(n=(Math.pow(i,2)+Math.pow(this.firstCircle.radius,2)-Math.pow(this.secondCircle.radius,2))/(2*this.firstCircle.radius*i),t[0].x=this.firstCircle.center.x+this.firstCircle.radius*n,t[1].x=t[0].x,t[0].y=this.firstCircle.center.y+this.firstCircle.radius*Math.sqrt(1-Math.pow(n,2)),t[1].y=this.firstCircle.center.y-this.firstCircle.radius*Math.sqrt(1-Math.pow(n,2))):(n=(Math.pow(i,2)+Math.pow(this.secondCircle.radius,2)-Math.pow(this.firstCircle.radius,2))/(2*this.secondCircle.radius*i),t[0].x=this.secondCircle.center.x+this.secondCircle.radius*n,t[1].x=t[0].x,t[0].y=this.secondCircle.center.y+this.secondCircle.radius*Math.sqrt(1-Math.pow(n,2)),t[1].y=this.secondCircle.center.y-this.secondCircle.radius*Math.sqrt(1-Math.pow(n,2))),t;},v.prototype.CenterNoEqual=function(){for(var t=Object.create(Array.prototype),e=0;e<2;e++){t[e]=Object.create(h.prototype);}var n,i,r,o,a,s,u=Object.create(Array.prototype),l=Object.create(Array.prototype),c=Object.create(Array.prototype),d=Object.create(_.prototype);for(e=0;e<3;e++){c[e]=Object.create(f.prototype);}return c[0].setPoints(this.firstCircle.center,this.secondCircle.center),n=2*this.firstCircle.radius*(this.firstCircle.center.x-this.secondCircle.center.x),i=2*this.firstCircle.radius*(this.firstCircle.center.y-this.secondCircle.center.y),r=this.secondCircle.radius*this.secondCircle.radius-this.firstCircle.radius*this.firstCircle.radius-c[0].getDistance()*c[0].getDistance(),o=n*n+i*i,a=-2*n*r,s=r*r-i*i,u[0]=(Math.sqrt(a*a-4*o*s)-a)/(2*o),u[1]=(-Math.sqrt(a*a-4*o*s)-a)/(2*o),l[0]=Math.sqrt(1-u[0]*u[0]),l[1]=Math.sqrt(1-u[1]*u[1]),t[0].x=this.firstCircle.radius*u[0]+this.firstCircle.center.x,t[1].x=this.firstCircle.radius*u[1]+this.firstCircle.center.x,t[0].y=this.firstCircle.radius*l[0]+this.firstCircle.center.y,t[1].y=this.firstCircle.radius*l[1]+this.firstCircle.center.y,c[1].setPoints(t[0],this.secondCircle.center),c[2].setPoints(t[1],this.secondCircle.center),d.varEquals(c[1].getDistance(),this.secondCircle.radius)||(t[0].y=this.firstCircle.center.y-this.firstCircle.radius*l[0]),d.varEquals(c[2].getDistance(),this.secondCircle.radius)||(t[1].y=this.firstCircle.center.y-this.firstCircle.radius*l[1]),d.varEquals(t[0].y,t[1].y)&&d.varEquals(t[0].x,t[1].x)&&(t[0].y>0?t[1].y=-t[1].y:t[0].y=-t[0].y),t;},_.prototype.varEquals=function(t,e){var n=.001;return t.constructor==Number&&e.constructor==Number?Math.abs(t-e)<n:(console.log("type error!"),-1);},_.prototype.sortRule=function(t,e){return t-e;},_.prototype.calcDistByRssi=function(t,e,n){var i=Math.abs(t),r=Math.abs(e),o=(i-r)/(10*n);return Math.pow(10,o);},b.prototype.setBoundaries=function(t){return this.rssiBoundary=t&&t.rssiBoundary?t.rssiBoundary:this.rssiBoundary?this.rssiBoundary:10,this.distBoundary=t&&t.distBoundary?t.distBoundary:this.distBoundary?this.distBoundary:6,this;},b.prototype.rssiFilter=function(t,e){return t<0&&t>e-this.rssiBoundary;},b.prototype.distanceFilter=function(t){return t>0&&t<this.distBoundary;},b.prototype.locationFilter=function(t,e){var n=Object.create(h.prototype),i=Object.create(f.prototype),r=Object.create(h.prototype),o=4;n.x=(t[0].x+t[1].x+t[2].x)/3,n.y=(t[0].y+t[1].y+t[2].y)/3,i.setPoints(n,e);var a=i.getDistance();return a>o?(r.x=n.x+(e.x-n.x)*(o/a),r.y=n.y+(e.y-n.y)*(o/a),r):e;},b.prototype.historyLocationFilter=function(t){var e=Object.create(f.prototype),n=Object.create(h.prototype);e.setPoints(t,I);var i=2,r=e.getDistance();return r<=i||0==I.x&&0==I.y?(I=t,t):(n.x=I.x+(I.x-t.x)*(i/r),n.y=I.y+(I.y-t.y)*(i/r),I=n,n);},x.prototype.parseInfo=function(t){try{return JSON.parse(t);}catch(t){return t;}},x.prototype.stringifyInfo=function(t){try{return JSON.stringify(t);}catch(t){return t;}};var M={BEACON_USE_NUM:"3",DIS_A:"0",DIS_B:"1",DIS_C:"2"},C=new h(-1e3,-1e3),I=new h(0,0),O=function O(t,e){this.BeaconsCfg=t,this.bleConfig=e,this.bleLocationInfo=function(){function t(){return void 0==n&&(n=new e()),n;}function e(){return e.instance={type:"FeatureCollection",features:[{type:"Feature",properties:{floor_id:0},geometry:{type:"Point",coordinates:[0,0]}}]},e.instance;}var n;return{getInstance:t};}(),this.bleLocationInfoInstance=this.bleLocationInfo.getInstance(),this.bleLocationStrategy=function(t,e,n,i){var r;switch(t){case 1:r="beaconNumEqualOne";break;case 2:r="beaconNumEqualTwo";break;case 3:r="beaconNumEqualThree";break;default:r="beaconNumMoreThanThree";}var o=function o(t,e){for(var n=Object.create(Array.prototype),i=Object.create(Array.prototype),r=Object.create(Array.prototype),o=0;o<M.BEACON_USE_NUM;o++){r[o]=Object.create(f.prototype);}r[0].setPoints(t[0],t[1]),r[1].setPoints(t[0],t[2]),r[2].setPoints(t[1],t[2]),n[0]=r[0].getDistance(),n[1]=r[1].getDistance(),n[2]=r[2].getDistance(),i[0]=e[M.DIS_A]+e[M.DIS_B],i[1]=e[M.DIS_A]+e[M.DIS_C],i[2]=e[M.DIS_B]+e[M.DIS_C],i[3]=Math.abs(e[M.DIS_A]-e[M.DIS_B]),i[4]=Math.abs([M.DIS_A]-e[M.DIS_C]),i[5]=Math.abs(e[M.DIS_B]-e[M.DIS_C]);var a,s=(n[0]>i[0]?300:n[0]<i[3]?100:200,n[1]>i[1]?30:n[1]<i[4]?10:20,n[2]>i[2]?3:n[2]<i[5]?1:2,333);switch(s){case 333:a="allDeviation",console.info("C0-C1 C0-C2 C1-C2");break;case 222:a="disWeightAlg",console.info("C0+C1 C0+C2 C1+C2");break;case 233:a="CirTwoDeviation",console.info("C0+C1 C0-C2 C1-C2");break;case 323:a="CirOneDeviation",console.info("C0-C1 C0+C2 C1-C2");break;case 332:a="CirZeroDeviation",console.info("C0-C1 C0-C2 C1+C2");break;case 221:case 223:a="CirOneTwoDeviation",console.info("C0+C1 C0+C2 C1-&C2");break;case 212:case 232:a="CirZeroTwoDeviation",console.info("C0+C1 C0-&C2 C1+C2");break;case 122:case 322:a="CirZeroOneDeviation",console.info("C0-&C1 C0+C2 C1+C2");break;default:console.log("no Result!");}var u={allDeviation:function allDeviation(t,e){for(var n=Object.create(Array.prototype),i=0,r=0,o=0,a=0;a<3;++a){i+=1/e[a];}for(var s=0;s<3;++s){n[s]=1/e[s]/i;}for(var u=Object.create(h.prototype),l=0;l<3;++l){r+=n[l]*t[l].x,o+=n[l]*t[l].y;}return u.setPoint(r,o),u;},disWeightAlg:function disWeightAlg(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(Array.prototype),o=Object.create(Array.prototype),a=Object.create(Array.prototype),s=0;s<M.BEACON_USE_NUM;s++){i[s]=Object.create(g.prototype),r[s]=Object.create(v.prototype);}i[0].setCircle(t[0],e[M.DIS_A]),i[1].setCircle(t[1],e[M.DIS_B]),i[2].setCircle(t[2],e[M.DIS_C]),r[0].setCircles(i[0],i[1]),r[1].setCircles(i[0],i[2]),r[2].setCircles(i[1],i[2]),a[0]=r[0].insect(),a[1]=r[1].insect(),a[2]=r[2].insect();var u=Object.create(Array.prototype);for(s=0;s<2*Number(M.BEACON_USE_NUM);s++){u[s]=Object.create(f.prototype);}return u[0].setPoints(a[0][0],t[2]),u[1].setPoints(a[0][1],t[2]),u[2].setPoints(a[1][0],t[1]),u[3].setPoints(a[1][1],t[1]),u[4].setPoints(a[2][0],t[0]),u[5].setPoints(a[2][1],t[0]),u[0].getDistance()<u[1].getDistance()?o[0]=a[0][0]:o[0]=a[0][1],u[2].getDistance()<u[3].getDistance()?o[1]=a[1][0]:o[1]=a[1][1],u[4].getDistance()<u[5].getDistance()?o[2]=a[2][0]:o[2]=a[2][1],n.x=(o[0].x/(e[M.DIS_A]*e[M.DIS_A])+o[1].x/(e[M.DIS_B]*e[M.DIS_B])+o[2].x/(e[M.DIS_C]*e[M.DIS_C]))/(1/(e[M.DIS_A]*e[M.DIS_A])+1/(e[M.DIS_B]*e[M.DIS_B])+1/(e[M.DIS_C]*e[M.DIS_C])),n.y=(o[0].y/(e[M.DIS_A]*e[M.DIS_A])+o[1].y/(e[M.DIS_B]*e[M.DIS_B])+o[2].y/(e[M.DIS_C]*e[M.DIS_C]))/(1/(e[M.DIS_A]*e[M.DIS_A])+1/(e[M.DIS_B]*e[M.DIS_B])+1/(e[M.DIS_C]*e[M.DIS_C])),n;},CirZeroDeviation:function CirZeroDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(v.prototype),o=Object.create(Array.prototype),a=0;a<2;a++){i[a]=Object.create(g.prototype),o[a]=Object.create(f.prototype);}i[0].setCircle(t[1],e[1]),i[1].setCircle(t[2],e[2]),r.setCircles(i[0],i[1]);var s=r.insect();return o[0].setPoints(s[0],t[0]),o[1].setPoints(s[1],t[0]),n=o[0].getDistance()<o[1].getDistance()?s[0]:s[1];},CirOneDeviation:function CirOneDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(v.prototype),o=Object.create(Array.prototype),a=0;a<2;a++){i[a]=Object.create(g.prototype),o[a]=Object.create(f.prototype);}i[0].setCircle(t[0],e[0]),i[1].setCircle(t[2],e[2]),r.setCircles(i[0],i[1]);var s=r.insect();return o[0].setPoints(s[0],t[1]),o[1].setPoints(s[1],t[1]),n=o[0].getDistance()<o[1].getDistance()?s[0]:s[1];},CirTwoDeviation:function CirTwoDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(v.prototype),o=Object.create(Array.prototype),a=0;a<2;a++){i[a]=Object.create(g.prototype),o[a]=Object.create(f.prototype);}i[0].setCircle(t[0],e[0]),i[1].setCircle(t[1],e[1]),r.setCircles(i[0],i[1]);var s=r.insect();return o[0].setPoints(s[0],t[2]),o[1].setPoints(s[1],t[2]),n=o[0].getDistance()<o[1].getDistance()?s[0]:s[1];},CirOneTwoDeviation:function CirOneTwoDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(Array.prototype),o=Object.create(Array.prototype),a=Object.create(Array.prototype),s=Object.create(Array.prototype),u=0;u<2;u++){i[u]=Object.create(h.prototype),o[u]=Object.create(v.prototype),a[u]=Object.create(f.prototype);}for(u=0;u<3;u++){r[u]=Object.create(g.prototype);}for(u=0;u<4;u++){s[u]=Object.create(f.prototype);}return r[0].setCircle(t[0],e[0]),r[1].setCircle(t[1],e[1]),r[2].setCircle(t[2],e[2]),o[0].setCircles(r[0],r[1]),o[1].setCircles(r[0],r[2]),a[0]=o[0].insect(),a[1]=o[1].insect(),s[0].setPoints(a[0][0],t[2]),s[1].setPoints(a[0][1],t[2]),s[2].setPoints(a[1][0],t[1]),s[3].setPoints(a[1][1],t[1]),s[0].getDistance()<s[1].getDistance()?i[0]=a[0][0]:i[0]=a[0][1],s[2].getDistance()<s[3].getDistance()?i[1]=a[1][0]:i[1]=a[1][1],n.setPoint((i[0].x+i[1].x)/2,(i[0].y+i[1].y)/2),n;},CirZeroTwoDeviation:function CirZeroTwoDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(Array.prototype),o=Object.create(Array.prototype),a=Object.create(Array.prototype),s=Object.create(Array.prototype),u=0;u<2;u++){i[u]=Object.create(h.prototype),o[u]=Object.create(v.prototype),a[u]=Object.create(f.prototype);}for(u=0;u<3;u++){r[u]=Object.create(g.prototype);}for(u=0;u<4;u++){s[u]=Object.create(f.prototype);}return r[0].setCircle(t[0],e[0]),r[1].setCircle(t[1],e[1]),r[2].setCircle(t[2],e[2]),o[0].setCircles(r[0],r[1]),o[1].setCircles(r[1],r[2]),a[0]=o[0].insect(),a[1]=o[1].insect(),s[0].setPoints(a[0][0],t[2]),s[1].setPoints(a[0][1],t[2]),s[2].setPoints(a[1][0],t[0]),s[3].setPoints(a[1][1],t[0]),s[0].getDistance()<s[1].getDistance()?i[0]=a[0][0]:i[0]=a[0][1],s[2].getDistance()<s[3].getDistance()?i[1]=a[1][0]:i[1]=a[1][1],n.setPoint((i[0].x+i[1].x)/2,(i[0].y+i[1].y)/2),n;},CirZeroOneDeviation:function CirZeroOneDeviation(t,e){for(var n=Object.create(h.prototype),i=Object.create(Array.prototype),r=Object.create(Array.prototype),o=Object.create(Array.prototype),a=Object.create(Array.prototype),s=Object.create(Array.prototype),u=0;u<2;u++){i[u]=Object.create(h.prototype),o[u]=Object.create(v.prototype),a[u]=Object.create(f.prototype);}for(u=0;u<3;u++){r[u]=Object.create(g.prototype);}for(u=0;u<4;u++){s[u]=Object.create(f.prototype);}return r[0].setCircle(t[0],e[0]),r[1].setCircle(t[1],e[1]),r[2].setCircle(t[2],e[2]),o[0].setCircles(r[0],r[2]),o[1].setCircles(r[1],r[2]),a[0]=o[0].insect(),a[1]=o[1].insect(),s[0].setPoints(a[0][0],t[1]),s[1].setPoints(a[0][1],t[1]),s[2].setPoints(a[1][0],t[0]),s[3].setPoints(a[1][1],t[0]),s[0].getDistance()<s[1].getDistance()?i[0]=a[0][0]:i[0]=a[0][1],s[2].getDistance()<s[3].getDistance()?i[1]=a[1][0]:i[1]=a[1][1],n.setPoint((i[0].x+i[1].x)/2,(i[0].y+i[1].y)/2),n;}},l=Object.create(b.prototype),c=u[a](t,e);return l.locationFilter(t,c);},a={beaconNumEqualOne:function beaconNumEqualOne(t,e,n){var i,r=Object.create(h.prototype),o=t.keyArray()[0];r.setPoint(e.get(o).x,e.get(o).y),i=t.get(o).distance,n.features[0].properties.floor_id=e.get(o).floorId,n.features[0].geometry.coordinates[0]=e.get(o).x,n.features[0].geometry.coordinates[1]=e.get(o).y;},beaconNumEqualTwo:function beaconNumEqualTwo(t,e,n){for(var i,r=2,o=Object.create(Array.prototype),a=Object.create(Array.prototype),s=Object.create(Array.prototype),u=Object.create(Array.prototype),l=0,c=0,f=0,d=0;d<r;d++){o[d]=Object.create(h.prototype);}var p=t.keyArray();for(d=0;d<r;d++){s[d]=p[d],a[d]=Number(t.get(s[d]).distance),o[d].setPoint(e.get(s[d]).x,e.get(s[d]).y);}for(i=a[M.DIS_A]<a[M.DIS_B]?0:1,d=0;d<r;++d){l+=1/a[d];}for(d=0;d<r;++d){u[d]=1/a[d]/l;}for(d=0;d<r;++d){c+=u[d]*o[d].x,f+=u[d]*o[d].y;}n.features[0].properties.floor_id=e.get(s[i]).floorId,n.features[0].geometry.coordinates[0]=c,n.features[0].geometry.coordinates[1]=f;},beaconNumEqualThree:function beaconNumEqualThree(t,e,n){for(var i,r=3,a=Object.create(Array.prototype),s=Object.create(Array.prototype),u=Object.create(Array.prototype),l=Object.create(Array.prototype),c=new Array(3),f=1e3,d=0;d<r;d++){a[d]=Object.create(h.prototype);}var p=t.keyArray();for(d=0;d<r;d++){u[d]=p[d],s[d]=Number(t.get(u[d]).distance),a[d].setPoint(e.get(u[d]).x,e.get(u[d]).y),l[d]=Number(t.get(u[d]).distance),c[d]=e.get(u[d]).floorId,f>l[d]&&(f=l[d],i=e.get(u[d]).floorId);}var g=o(a,s);c.sort(_.sortRule),s.sort(_.sortRule),s[0]!=s[1]?n.features[0].properties.floor_id=i:n.features[0].properties.floor_id=floorArrayToUse[(Number(M.BEACON_USE_NUM)+1)/2-1],n.features[0].geometry.coordinates[0]=g.x,n.features[0].geometry.coordinates[1]=g.y;},beaconNumMoreThanThree:function beaconNumMoreThanThree(t,e,n){for(var i,r=t.size(),a=new Array(r),s=Object.create(Array.prototype),u=Object.create(Array.prototype),l=Object.create(Array.prototype),c=new Array(3),f=1e3,d=0;d<M.BEACON_USE_NUM;d++){s[d]=Object.create(h.prototype);}var p=t.keyArray();for(d=0;d<r;d++){a[d]=Number(t.get(p[d]).distance);}for(a.sort(_.sortRule),d=0;d<M.BEACON_USE_NUM;d++){for(var g=0;g<t.size();g++){var v=t.get(p[g]);if(v&&v.distance&&v.distance==a[d]){u[d]=p[g],s[d].setPoint(e.get(u[d]).x,e.get(u[d]).y),l[d]=Number(t.get(u[d]).distance),c[d]=e.get(u[d]).floorId,f>l[d]&&(f=l[d],i=e.get(u[d]).floorId);break;}}}var m=o(s,l);c.sort(_.sortRule),l.sort(_.sortRule),l[0]!=l[1]?n.features[0].properties.floor_id=i:n.features[0].properties.floor_id=c[(Number(M.BEACON_USE_NUM)+1)/2-1],n.features[0].geometry.coordinates[0]=m.x,n.features[0].geometry.coordinates[1]=m.y;}};a[r](e,n,i);};};O.prototype.init=function(t){this.BeaconsCfg=t;},O.prototype.locate=function(t){var e,n,i,r,o,s=Object.create(_.prototype),u=Object.create(b.prototype),l=new a(),c=new a();if(u.setBoundaries(this.bleConfig),i=this.BeaconsCfg,e=t,r=i.length,n=e.length,0==r)return console.warn("beaconsCfg is empty!"),this.bleLocationInfoInstance;for(var h=0;h<r;h++){var f,d;"atten"in i[h]&&"lossCoe"in i[h]?(f=i[h].atten,d=i[h].lossCoe):(f=-59,d=2);var p=new m(i[h].beaconId,i[h].mapId,i[h].sceneId,i[h].floorId,i[h].uuid,i[h].major,i[h].minor,Number(i[h].geom.x),Number(i[h].geom.y),f,d),g=new String(i[h].uuid+i[h].major+i[h].minor);l.put(g,p);}if(l.isEmpty())return console.log("BeaconCfgNum = 0"),this.bleLocationInfoInstance;if(0==n)return console.warn("beacons is empty!"),this.bleLocationInfoInstance;for(h=0;h<n;h++){var v=new String(e[h].uuid+e[h].major+e[h].minor);if(l.containsKey(v)){var x=0;if("distance"in e[h]?u.distanceFilter(e[h].distance)&&(x=e[h].distance):u.rssiFilter(Number(e[h].rssi),l.get(v).atten)&&(x=s.calcDistByRssi(Number(e[h].rssi),l.get(v).atten,l.get(v).lossCoe)),x){var w=new y(e[h].uuid,e[h].major,e[h].minor,x);c.put(v,w);}}}return c.isEmpty()?(console.warn("BeaconNum = 0"),this.bleLocationInfoInstance):(o=c.size(),l.isEmpty()||c.isEmpty()?(console.warn("beaconsCfgMap or beaconsMap is empty!"),this.bleLocationInfoInstance):(this.bleLocationStrategy(o,c,l,this.bleLocationInfoInstance),c.clear(),l.clear(),this.bleLocationInfoInstance));},O.prototype.getBleLocationInfo=function(){var t=Object.create(x.prototype);return t.stringifyInfo(this.bleLocationInfoInstance);},"object"===o(t)&&"object"===o(t.exports)?t.exports=O:(i=O,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r)));}();}).call(e,n(37)(t));},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){var n=l[e];if(!n){var i=document.getElementsByTagName("body")[0],r=document.createElement("div"),o=document.createTextNode(t);r.appendChild(o),r.setAttribute("style","font:"+e+";position:absolute;top:0;left:0"),i.appendChild(r),n=r.offsetHeight,l[e]=n,i.removeChild(r);}return n;}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(2),u=i(s),l={},c=function(){function t(){r(this,t),this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d");}return a(t,[{key:"drawText",value:function value(t,e){return e.optTextRect?this.drawTextOpt(t,e):this.drawTextRect(t,e);}},{key:"drawTextOpt",value:function value(t,e){var n=this.canvas,i=this.ctx;i.font=e.font;var r=Math.ceil(this.ctx.measureText(t).width),a=o(t,i.font),s=r+(e.lineWidth?2*e.lineWidth:0)+30,l=a+30,c=0;e.lineWidth&&(c=2*e.lineWidth);var h=0,f=0,d=c+r,p=c/2+a;return s=d-h,l=p-f,this.textWidth=s,this.textHeight=l,n.width=u.Math.nextPowerOfTwo(s),n.height=u.Math.nextPowerOfTwo(l),i.font=e.font,i.textAlign="left",i.textBaseline="top",e.lineWidth&&e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.lineWidth,i.strokeText(t,c,c)),i.shadowColor=e.shadowColor?e.shadowColor:i.shadowColor,i.shadowBlur=e.shadowBlur?e.shadowBlur:i.shadowColor,i.fillStyle=e.fillStyle,i.fillText(t,c,c),this.canvas;}},{key:"drawTextRect",value:function value(t,e){var n=this.canvas,i=this.ctx;i.font=e.font;var r=Math.ceil(this.ctx.measureText(t).width),a=o(t,i.font),s=r+(e.lineWidth?2*e.lineWidth:0)+30,l=a+30;n.width=s,n.height=l,i.clearRect(0,0,this.canvas.width,this.canvas.height);var c=0;e.lineWidth&&(c=2*e.lineWidth),i.font=e.font,i.textAlign="left",i.textBaseline="top",e.lineWidth&&e.strokeStyle&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.lineWidth,i.strokeText(t,c,c)),i.shadowColor=e.shadowColor?e.shadowColor:i.shadowColor,i.shadowBlur=e.shadowBlur?e.shadowBlur:i.shadowColor,i.fillStyle=e.fillStyle,i.fillText(t,c,c);var h=i.getImageData(0,0,s,l),f=0,d=0,p=0,g=0,v=void 0,m=void 0,y=void 0,_=h.data;for(m=c;m>0;--m){for(y=0;y<h.height&&(v=4*(y*h.width+m)+3,!_[v]);++y){}if(!_[v]){f=m+1;break;}}for(m=c;m>0;--m){for(y=f;y<h.width&&(v=4*(m*h.width+y)+3,!_[v]);++y){}if(!_[v]){d=m+1;break;}}var b=c-f,x=c-d;for(m=a-x;m<h.height;++m){for(y=f;y<h.width&&(v=4*(m*h.width+y)+3,!_[v]);++y){}if(!_[v]){g=m-1;break;}}for(m=r-b;m<h.width;++m){for(y=d;y<=g&&(v=4*(y*h.width+m)+3,!_[v]);++y){}if(!_[v]){p=m-1;break;}}return s=p-f,l=g-d,h=i.getImageData(f,d,s,l),this.textWidth=s,this.textHeight=l,n.width=u.Math.nextPowerOfTwo(s),n.height=u.Math.nextPowerOfTwo(l),i.putImageData(h,0,0,0,0,this.textWidth,this.textHeight),this.canvas;}},{key:"width",get:function get(){return this.canvas.width;}},{key:"height",get:function get(){return this.canvas.height;}}]),t;}();e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c=n(2),h=r(c),f=n(42),d=i(f),p=n(86),g=i(p),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments[1];o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._options=u({font:"30px Arial",fillStyle:"#FFFFFF",depthTest:!1,antialias:!0,align:d.default.center,optTextRect:!1},n||{}),i.canvas=new g.default(),i.text=t,i;}return s(e,t),l(e,[{key:"raycast",value:function value(){var t;return(t=this.sprite).raycast.apply(t,arguments);}},{key:"updateText",value:function value(){this.canvas&&(this.canvas.drawText(this._text,this._options),this.cleanUp(),this.texture=new h.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new h.SpriteMaterial({map:this.texture,depthTest:this._options.depthTest,alphaTest:.01}),this.texture.offset.x=0,this.texture.offset.y=1-this.canvas.textHeight/this.canvas.height,this.texture.repeat.x=this.canvas.textWidth/this.canvas.width,this.texture.repeat.y=this.canvas.textHeight/this.canvas.height,this.sprite||(this.sprite=new h.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite)),this.sprite.scale.set(this.canvas.textWidth/2,this.canvas.textHeight/2,0),this.sprite.position.x=this.canvas.textWidth/2*this._options.align.x,this.sprite.position.y=this.canvas.textHeight/2*this._options.align.y);}},{key:"cleanUp",value:function value(){this.texture&&this.texture.dispose();}},{key:"applyAntiAlias",value:function value(){this._options.antialias===!1?(this.texture.magFilter=h.LinearFilter,this.texture.minFilter=h.LinearFilter):(this.texture.magFilter=h.LinearFilter,this.texture.minFilter=h.LinearFilter);}},{key:"getAABB",value:function value(t){var e=new h.Vector3(0,0,0),n=this.margin||0,i=this.sprite.scale,r=i.x/2,o=i.y/2,a=[],s=this.sprite.matrixWorld;e.setFromMatrixPosition(s),e=t.toScreenCoordinate(e.x,e.y,e.z);var u=this.sprite.material.anchor,l=0,c=0;return u&&(l=r-i.x*u[0],c=o-i.y*u[1],e.setX(e.x+l),e.setY(e.y+c)),a.push(e.x-r-n),a.push(e.y-o-n),a.push(0),a.push(e.x+r+n),a.push(e.y+o+n),a.push(0),a;}},{key:"makeCollision",value:function value(t){var e=!t,n=this.destOpacity?this.destOpacity:1;this.visible=e,this.material.opacity=n;for(var i=this.children,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;s.visible=e;}return this;}},{key:"width",get:function get(){return this.canvas.textWidth;}},{key:"height",get:function get(){return this.canvas.textHeight;}},{key:"text",get:function get(){return this._text;},set:function set(t){this._text!==t&&(this._text=t,this.updateText());}},{key:"font",get:function get(){return this._options.font;},set:function set(t){this._options.font!==t&&(this._options.font=t,this.updateText());}},{key:"fillStyle",get:function get(){return this._options.fillStyle;},set:function set(t){this._options.fillStyle!==t&&(this._options.fillStyle=t,this.updateText());}}]),e;}(h.Object3D);e.default=v;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r=n(2),o=i(r);o.CSS2DObject=function(t){o.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.element.style.pointerEvents="all",this.addEventListener("removed",function(t){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element);});},o.CSS2DObject.prototype=Object.create(o.Object3D.prototype),o.CSS2DObject.prototype.constructor=o.CSS2DObject,o.CSS2DRenderer=function(){console.log("THREE.CSS2DRenderer",o.REVISION);var t,e,n,i,r=new o.Vector3(),a=new o.Matrix4(),s=new o.Matrix4(),u=document.createElement("div");u.style.overflow="hidden",this.domElement=u,this.setSize=function(r,o){t=r,e=o,n=t/2,i=e/2,u.style.width=r+"px",u.style.height=o+"px";};var l=function t(e,a){if(e instanceof o.CSS2DObject){r.setFromMatrixPosition(e.matrixWorld),r.applyMatrix4(s);var l=e.element,c="translate(-50%,-50%) translate("+(r.x*n+n)+"px,"+(-r.y*i+i)+"px)";l.style.WebkitTransform=c,l.style.MozTransform=c,l.style.oTransform=c,l.style.transform=c,l.parentNode!==u&&u.appendChild(l);}for(var h=0,f=e.children.length;h<f;h++){t(e.children[h],a);}};this.render=function(t,e){t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),a.copy(e.matrixWorldInverse.getInverse(e.matrixWorld)),s.multiplyMatrices(e.projectionMatrix,a),l(t,e);};};},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r=n(2),o=i(r);o.ColladaLoader=function(){function t(t,n,i,r){var o=0;if(document.implementation&&document.implementation.createDocument){var a=new XMLHttpRequest();a.onreadystatechange=function(){4===a.readyState?0===a.status||200===a.status?a.response?(jt=n,e(a.response,void 0,t)):r?r({type:"error",url:t}):console.error("ColladaLoader: Empty or non-existing file ("+t+")"):r?r({type:"error",url:t}):console.error("ColladaLoader: Couldn\'t load \\""+t+\'" (\'+a.status+")"):3===a.readyState&&i&&(0===o&&(o=a.getResponseHeader("Content-Length")),i({total:o,loaded:a.responseText.length}));},a.open("GET",t,!0),a.send(null);}else alert("Don\'t know how to parse XML!");}function e(t,e,n){if(Ft=new DOMParser().parseFromString(t,"text/xml"),e=e||jt,void 0!==n){var l=n.split("/");l.pop(),kt=(l.length<1?".":l.join("/"))+"/";}i(),xt(),zt=r("library_images image",I,"image"),Ht=r("library_materials material",Y,"material"),qt=r("library_effects effect",Q,"effect"),Xt=r("library_geometries geometry",F,"geometry"),Yt=r("library_cameras camera",rt,"camera"),Wt=r("library_lights light",at,"light"),Vt=r("library_controllers controller",O,"controller"),Gt=r("library_animations animation",tt,"animation"),Lt=r("library_visual_scenes visual_scene",A,"visual_scene"),Nt=r("library_kinematics_models kinematics_model",ut,"kinematics_model"),Rt=[],Dt=[],Ot=a(),Bt=new o.Group();for(var c=0;c<Ot.nodes.length;c++){Bt.add(y(Ot.nodes[c]));}Bt.scale.multiplyScalar(Kt),u(),Tt=s(),m();var h={scene:Bt,morphs:Rt,skins:Dt,animations:Pt,kinematics:At,dae:{images:zt,materials:Ht,cameras:Yt,lights:Wt,effects:qt,geometries:Xt,controllers:Vt,animations:Gt,visualScenes:Lt,visualScene:Ot,scene:Ot,kinematicsModels:Nt,kinematicsModel:Tt}};return e&&e(h),h;}function n(t){Zt=t;}function i(){var t=Ft.querySelectorAll("asset"),e=t[0];if(e&&e.childNodes)for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];switch(i.nodeName){case"unit":var r=i.getAttribute("meter");r&&(Kt=parseFloat(r));break;case"up_axis":Qt=i.textContent.charAt(0);}}}function r(t,e,n){for(var i=Ft.querySelectorAll(t),r={},o=0,a=i.length,s=0;s<a;s++){var u=i[s],l=new e().parse(u);l.id&&0!==l.id.length||(l.id=n+o++),r[l.id]=l;}return r;}function a(){var t=Ft.querySelectorAll("scene instance_visual_scene")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return Lt[e.length>0?e:"visual_scene0"];}return null;}function s(){var t=Ft.querySelectorAll("instance_kinematics_model")[0];if(t){var e=t.getAttribute("url").replace(/^#/,"");return Nt[e.length>0?e:"kinematics_model0"];}return null;}function u(){Pt=[],l(Bt);}function l(t){var e=Ot.getChildById(t.colladaId,!0),n=null;if(e&&e.keys){n={fps:60,hierarchy:[{node:e,keys:e.keys,sids:e.sids}],node:t,name:"animation_"+t.name,length:0},Pt.push(n);for(var i=0,r=e.keys.length;i<r;i++){n.length=Math.max(n.length,e.keys[i].time);}}else n={hierarchy:[{keys:[],sids:[]}]};for(var i=0,r=t.children.length;i<r;i++){for(var o=l(t.children[i]),a=0,s=o.hierarchy.length;a<s;a++){n.hierarchy.push({keys:[],sids:[]});}}return n;}function c(){var t,e=1e6,n=-e,i=0;for(var r in Gt){var o=Gt[r];t=t||o.id;for(var a=0;a<o.sampler.length;a++){var s=o.sampler[a];s.create(),e=Math.min(e,s.startTime),n=Math.max(n,s.endTime),i=Math.max(i,s.input.length);}}return{start:e,end:n,frames:i,ID:t};}function h(t,e){var n=e instanceof k?Vt[e.url]:e;if(!n||!n.morph)return void console.log("could not find morph controller!");for(var i=n.morph,r=0;r<i.targets.length;r++){var o=i.targets[r],a=Xt[o];if(a.mesh&&a.mesh.primitives&&a.mesh.primitives.length){var s=a.mesh.primitives[0].geometry;s.vertices.length===t.vertices.length&&t.morphTargets.push({name:"target_1",vertices:s.vertices});}}t.morphTargets.push({name:"target_Z",vertices:t.vertices});}function f(t,e,n,i){if(t.world=t.world||new o.Matrix4(),t.localworld=t.localworld||new o.Matrix4(),t.world.copy(t.matrix),t.localworld.copy(t.matrix),t.channels&&t.channels.length){var r=t.channels[0],a=r.sampler.output[n];a instanceof o.Matrix4&&(t.world.copy(a),t.localworld.copy(a),0===n&&t.matrix.copy(a));}i&&t.world.multiplyMatrices(i,t.world),e.push(t);for(var s=0;s<t.nodes.length;s++){f(t.nodes[s],e,n,t.world);}}function d(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=-1;if("JOINT"==i.type){for(var a=0;a<e.joints.length;a++){if(i.sid===e.joints[a]){r=a;break;}}if(r>=0){var s=e.invBindMatrices[r];i.invBindMatrix=s,i.skinningMatrix=new o.Matrix4(),i.skinningMatrix.multiplyMatrices(i.world,s),i.animatrix=new o.Matrix4(),i.animatrix.copy(i.localworld),i.weights=[];for(var a=0;a<e.weights.length;a++){for(var u=0;u<e.weights[a].length;u++){var l=e.weights[a][u];l.joint===r&&i.weights.push(l);}}}else console.warn("ColladaLoader: Could not find joint \'"+i.sid+"\'."),i.skinningMatrix=new o.Matrix4(),i.weights=[];}}}function p(t){var e=[],n=function t(e,n,i){var r={};r.name=n.sid,r.parent=e,r.matrix=n.matrix;var a=[new o.Vector3(),new o.Quaternion(),new o.Vector3()];r.matrix.decompose(a[0],a[1],a[2]),r.pos=[a[0].x,a[0].y,a[0].z],r.scl=[a[2].x,a[2].y,a[2].z],r.rotq=[a[1].x,a[1].y,a[1].z,a[1].w],i.push(r);for(var s in n.nodes){t(n.sid,n.nodes[s],i);}};return n(-1,t,e),e;}function g(t,e,n){var i=[];f(e,i,-1),d(i,n.skin);for(var r=new o.Vector3(),a=[],s=0;s<t.vertices.length;s++){a.push(new o.Vector3());}for(s=0;s<i.length;s++){if("JOINT"==i[s].type)for(var u=0;u<i[s].weights.length;u++){var l=i[s].weights[u],c=l.index,h=l.weight,p=t.vertices[c],g=a[c];r.x=p.x,r.y=p.y,r.z=p.z,r.applyMatrix4(i[s].skinningMatrix),g.x+=r.x*h,g.y+=r.y*h,g.z+=r.z*h;}}for(var s=0;s<t.vertices.length;s++){t.vertices[s]=a[s];}}function v(t,e,n){var i=Vt[e.url];if(n=void 0!==n?n:40,!i||!i.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!e.skeleton||!e.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var r=c(),a=Ot.getChildById(e.skeleton[0],!0)||Ot.getChildBySid(e.skeleton[0],!0),s=p(a),u=i.skin.joints,l=[],h=0;h<u.length;h++){for(var v=0;v<s.length;v++){s[v].name===u[h]&&(l[h]=s[v]);}}for(var h=0;h<l.length;h++){for(var v=0;v<l.length;v++){l[h].parent===l[v].name&&(l[h].parent=v);}}var h,v,m;new o.Vector3();for(h=0;h<t.vertices.length;h++){t.vertices[h].applyMatrix4(i.skin.bindShapeMatrix);}for(var y=[],_=[],b=i.skin.weights,h=0;h<b.length;h++){var x=new o.Vector4(b[h][0]?b[h][0].joint:0,b[h][1]?b[h][1].joint:0,b[h][2]?b[h][2].joint:0,b[h][3]?b[h][3].joint:0),m=new o.Vector4(b[h][0]?b[h][0].weight:0,b[h][1]?b[h][1].weight:0,b[h][2]?b[h][2].weight:0,b[h][3]?b[h][3].weight:0);y.push(x),_.push(m);}t.skinIndices=y,t.skinWeights=_,t.bones=l;for(var w={name:r.ID,fps:30,length:r.frames/30,hierarchy:[]},v=0;v<l.length;v++){w.hierarchy.push({parent:l[v].parent,name:l[v].name,keys:[]});}for(console.log("ColladaLoader:",r.ID+" has "+l.length+" bones."),g(t,a,i),n=0;n<r.frames;n++){var E=[];f(a,E,n),d(E,i.skin);for(var h=0;h<E.length;h++){for(var v=0;v<w.hierarchy.length;v++){if(w.hierarchy[v].name===E[h].sid){var S={};S.time=n/30,S.matrix=E[h].animatrix,0===n&&(E[h].matrix=S.matrix);var M=[new o.Vector3(),new o.Quaternion(),new o.Vector3()];S.matrix.decompose(M[0],M[1],M[2]),S.pos=[M[0].x,M[0].y,M[0].z],S.scl=[M[2].x,M[2].y,M[2].z],S.rot=M[1],w.hierarchy[v].keys.push(S);}}}t.animation=w;}}function m(){if(Tt&&0===Tt.joints.length)return void(At=void 0);var t={},e=function e(_e2,n){var i=n.getAttribute("id"),r=Ot.getChildById(i,!0),o=Tt.joints[_e2];Bt.traverse(function(n){n.colladaId==i&&(t[_e2]={node:n,transforms:r.transforms,joint:o,position:o.zeroPosition});});};At={joints:Tt&&Tt.joints,getJointValue:function getJointValue(e){var n=t[e];return n?n.position:void console.log("getJointValue: joint "+e+" doesn\'t exist");},setJointValue:function setJointValue(e,n){var r=t[e];if(r){var a=r.joint;if(n>a.limits.max||n<a.limits.min)console.log("setJointValue: joint "+e+" value "+n+" outside of limits (min: "+a.limits.min+", max: "+a.limits.max+")");else if(a.static)console.log("setJointValue: joint "+e+" is static");else{var s=r.node,u=a.axis,l=r.transforms,c=new o.Matrix4();for(i=0;i<l.length;i++){var h=l[i];if(h.sid&&h.sid.indexOf("joint"+e)!==-1)switch(a.type){case"revolute":c.multiply(f.makeRotationAxis(u,o.Math.degToRad(n)));break;case"prismatic":c.multiply(f.makeTranslation(u.x*n,u.y*n,u.z*n));break;default:console.warn("setJointValue: unknown joint type: "+a.type);}else{var f=new o.Matrix4();switch(h.type){case"matrix":c.multiply(h.obj);break;case"translate":c.multiply(f.makeTranslation(h.obj.x,h.obj.y,h.obj.z));break;case"rotate":c.multiply(f.makeRotationAxis(h.obj,h.angle));}}}var d=c.elements,p=Array.prototype.slice.call(d),g=[p[0],p[4],p[8],p[12],p[1],p[5],p[9],p[13],p[2],p[6],p[10],p[14],p[3],p[7],p[11],p[15]];s.matrix.set.apply(s.matrix,g),s.matrix.decompose(s.position,s.quaternion,s.scale);}}else console.log("setJointValue: joint "+e+" doesn\'t exist");}};var n=Ft.querySelector("scene instance_kinematics_scene");if(n)for(var i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];if(1==r.nodeType)switch(r.nodeName){case"bind_joint_axis":var a=r.getAttribute("target").split("/").pop(),s=r.querySelector("axis param").textContent,u=parseInt(s.split("joint").pop().split(".")[0]),l=Ft.querySelector(\'[sid="\'+a+\'"]\');if(l){var c=l.parentElement;e(u,c);}}}}function y(t,e){var n,i,r,a,s=new o.Object3D(),u=!1;for(r=0;r<t.controllers.length;r++){var l=Vt[t.controllers[r].url];switch(l.type){case"skin":if(Xt[l.skin.source]){var c=new D();c.url=l.skin.source,c.instance_material=t.controllers[r].instance_material,t.geometries.push(c),u=!0,n=t.controllers[r];}else if(Vt[l.skin.source]){var f=Vt[l.skin.source];if(i=f,f.morph&&Xt[f.morph.source]){var c=new D();c.url=f.morph.source,c.instance_material=t.controllers[r].instance_material,t.geometries.push(c);}}break;case"morph":if(Xt[l.morph.source]){var c=new D();c.url=l.morph.source,c.instance_material=t.controllers[r].instance_material,t.geometries.push(c),i=t.controllers[r];}console.log("ColladaLoader: Morph-controller partially supported.");}}var d={};for(r=0;r<t.geometries.length;r++){var p,g=t.geometries[r],m=g.instance_material,_=Xt[g.url],b={},x=[],w=0;if(_){if(!_.mesh||!_.mesh.primitives)continue;if(0===s.name.length&&(s.name=_.id),m)for(a=0;a<m.length;a++){var E=m[a],S=Ht[E.target],M=S.instance_effect.url,C=qt[M].shader,I=C.material;if(_.doubleSided){if(!(E.symbol in d)){var O=I.clone();O.side=o.DoubleSide,d[E.symbol]=O;}I=d[E.symbol];}I.opacity=I.opacity?I.opacity:1,b[E.symbol]=w,x.push(I),p=I,p.name=null===S.name||""===S.name?S.id:S.name,w++;}var T,P=p||new o.MeshLambertMaterial({color:14540253,side:_.doubleSided?o.DoubleSide:o.FrontSide}),A=_.mesh.geometry3js;if(w>1)for(P=new o.MultiMaterial(x),a=0;a<A.faces.length;a++){var L=A.faces[a];L.materialIndex=b[L.daeMaterial];}void 0!==n?(v(A,n),A.morphTargets.length>0?(P.morphTargets=!0,P.skinning=!1):(P.morphTargets=!1,P.skinning=!0),T=new o.SkinnedMesh(A,P,!1),T.name="skin_"+Dt.length,Dt.push(T)):void 0!==i?(h(A,i),P.morphTargets=!0,T=new o.Mesh(A,P),T.name="morph_"+Rt.length,Rt.push(T)):T=A.isLineStrip===!0?new o.Line(A):new o.Mesh(A,P),s.add(T);}}for(r=0;r<t.cameras.length;r++){var N=t.cameras[r],k=Yt[N.url],R=new o.PerspectiveCamera(k.yfov,parseFloat(k.aspect_ratio),parseFloat(k.znear),parseFloat(k.zfar));s.add(R);}for(r=0;r<t.lights.length;r++){var F=null,B=t.lights[r],j=Wt[B.url];if(j&&j.technique){var U=j.color.getHex(),z=j.intensity,G=j.distance,V=j.falloff_angle;switch(j.technique){case"directional":F=new o.DirectionalLight(U,z,G),F.position.set(0,0,1);break;case"point":F=new o.PointLight(U,z,G);break;case"spot":F=new o.SpotLight(U,z,G,V),F.position.set(0,0,1);break;case"ambient":F=new o.AmbientLight(U);}}F&&s.add(F);}if(s.name=t.name||t.id||"",s.colladaId=t.id||"",s.layer=t.layer||"",s.matrix=t.matrix,s.matrix.decompose(s.position,s.quaternion,s.scale),Jt.centerGeometry&&s.geometry){var X=s.geometry.center();X.multiply(s.scale),X.applyQuaternion(s.quaternion),s.position.sub(X);}for(r=0;r<t.nodes.length;r++){s.add(y(t.nodes[r],t));}return s;}function _(t){for(var e=Ft.querySelectorAll("library_nodes node"),n=0;n<e.length;n++){var i=e[n].attributes.getNamedItem("id");if(i&&i.value===t)return e[n];}}function b(t){var e=[],n=1e6,i=-1e6;for(var r in Gt){for(var o=Gt[r],a=0;a<o.channel.length;a++){var s=o.channel[a],u=o.sampler[a],r=s.target.split("/")[0];r==t.id&&(u.create(),s.sampler=u,n=Math.min(n,u.startTime),i=Math.max(i,u.endTime),e.push(s));}}return e.length&&(t.startTime=n,t.endTime=i),e;}function x(t){if(t.channels&&t.channels.length){for(var e=[],n=[],i=0,r=t.channels.length;i<r;i++){var o,a=t.channels[i],s=a.fullSid,u=a.sampler,l=u.input,c=t.getTransformBySid(a.sid);if(a.arrIndices){o=[];for(var h=0,f=a.arrIndices.length;h<f;h++){o[h]=Ct(a.arrIndices[h]);}}else o=It(a.member);if(c){n.indexOf(s)===-1&&n.push(s);for(var h=0,f=l.length;h<f;h++){var d=l[h],p=u.getData(c.type,h,o),g=w(e,d);if(!g){g=new it(d);var v=E(e,d);e.splice(v===-1?e.length:v,0,g);}g.addTarget(s,c,o,p);}}else console.log(\'Could not find transform "\'+a.sid+\'" in node \'+t.id);}for(var i=0;i<n.length;i++){for(var m=n[i],h=0;h<e.length;h++){var g=e[h];g.hasTarget(m)||S(e,g,h,m);}}t.keys=e,t.sids=n;}}function w(t,e){for(var n=null,i=0,r=t.length;i<r&&null===n;i++){var o=t[i];if(o.time===e)n=o;else if(o.time>e)break;}return n;}function E(t,e){for(var n=-1,i=0,r=t.length;i<r&&n===-1;i++){var o=t[i];o.time>=e&&(n=i);}return n;}function S(t,e,n,i){var r=C(t,i,n?n-1:0),o=M(t,i,n+1);if(r&&o){var a,s=(e.time-r.time)/(o.time-r.time),u=r.getTarget(i),l=o.getTarget(i).data,c=u.data;if("matrix"===u.type)a=c;else if(c.length){a=[];for(var h=0;h<c.length;++h){a[h]=c[h]+(l[h]-c[h])*s;}}else a=c+(l-c)*s;e.addTarget(i,u.transform,u.member,a);}}function M(t,e,n){for(;n<t.length;n++){var i=t[n];if(i.hasTarget(e))return i;}return null;}function C(t,e,n){for(n=n>=0?n:n+t.length;n>=0;n--){var i=t[n];if(i.hasTarget(e))return i;}return null;}function I(){this.id="",this.init_from="";}function O(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null;}function T(){this.method=null,this.source=null,this.targets=null,this.weights=null;}function P(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[];}function A(){this.id="",this.name="",this.nodes=[],this.scene=new o.Group();}function L(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new o.Matrix4();}function N(){this.sid="",this.type="",this.data=[],this.obj=null;}function k(){this.url="",this.skeleton=[],this.instance_material=[];}function R(){this.symbol="",this.target="";}function D(){this.url="",this.instance_material=[];}function F(){this.id="",this.mesh=null;}function B(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null;}function j(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new o.Geometry();}function U(){j.call(this),this.vcount=[];}function z(){j.call(this),this.vcount=1;}function G(){j.call(this),this.vcount=3;}function V(){this.source="",this.count=0,this.stride=0,this.params=[];}function X(){this.input={};}function H(){this.semantic="",this.offset=0,this.source="",this.set=0;}function q(t){this.id=t,this.type=null;}function Y(){this.id="",this.name="",this.instance_effect=null;}function W(){this.color=new o.Color(),this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null;}function Z(t,e){this.type=t,this.effect=e,this.material=null;}function J(t){this.effect=t,this.init_from=null,this.format=null;}function K(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null;}function Q(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={};}function $(){this.url="";}function tt(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[];}function et(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null;}function nt(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0;}function it(t){this.targets=[],this.time=t;}function rt(){this.id="",this.name="",this.technique="";}function ot(){this.url="";}function at(){this.id="",this.name="",this.technique="";}function st(){this.url="";}function ut(){this.id="",this.name="",this.joints=[],this.links=[];}function lt(){this.sid="",this.name="",this.axis=new o.Vector3(),this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;}function ct(){this.sid="",this.name="",this.transforms=[],this.attachments=[];}function ht(){this.joint="",this.transforms=[],this.links=[];}function ft(t){var e=t.getAttribute("id");return void 0!=Ut[e]?Ut[e]:(Ut[e]=new q(e).parse(t),Ut[e]);}function dt(t){for(var e=vt(t),n=[],i=0,r=e.length;i<r;i++){n.push("true"===e[i]||"1"===e[i]);}return n;}function pt(t){for(var e=vt(t),n=[],i=0,r=e.length;i<r;i++){n.push(parseFloat(e[i]));}return n;}function gt(t){for(var e=vt(t),n=[],i=0,r=e.length;i<r;i++){n.push(parseInt(e[i],10));}return n;}function vt(t){return t.length>0?mt(t).split(/\\s+/):[];}function mt(t){return t.replace(/^\\s+/,"").replace(/\\s+$/,"");}function yt(t,e,n){return t.hasAttribute(e)?parseInt(t.getAttribute(e),10):n;}function _t(t,e){var n=new o.ImageLoader();n.load(e,function(e){t.image=e,t.needsUpdate=!0;});}function bt(t,e){t.doubleSided=!1;var n=e.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(t.doubleSided=!0);}function xt(){if(Jt.convertUpAxis!==!0||Qt===Jt.upAxis)$t=null;else switch(Qt){case"X":$t="Y"===Jt.upAxis?"XtoY":"XtoZ";break;case"Y":$t="X"===Jt.upAxis?"YtoX":"YtoZ";break;case"Z":$t="X"===Jt.upAxis?"ZtoX":"ZtoY";}}function wt(t,e){if(Jt.convertUpAxis===!0&&Qt!==Jt.upAxis)switch($t){case"XtoY":var n=t[0];t[0]=e*t[1],t[1]=n;break;case"XtoZ":var n=t[2];t[2]=t[1],t[1]=t[0],t[0]=n;break;case"YtoX":var n=t[0];t[0]=t[1],t[1]=e*n;break;case"YtoZ":var n=t[1];t[1]=e*t[2],t[2]=n;break;case"ZtoX":var n=t[0];t[0]=t[1],t[1]=t[2],t[2]=n;break;case"ZtoY":var n=t[1];t[1]=t[2],t[2]=e*n;}}function Et(t,e){if(Jt.convertUpAxis!==!0||Qt===Jt.upAxis)return e;switch(t){case"X":e="XtoY"===$t?e*-1:e;break;case"Y":e="YtoZ"===$t||"YtoX"===$t?e*-1:e;break;case"Z":e="ZtoY"===$t?e*-1:e;}return e;}function St(t,e){var n=[t[e],t[e+1],t[e+2]];return wt(n,-1),new o.Vector3(n[0],n[1],n[2]);}function Mt(t){if(Jt.convertUpAxis){var e=[t[0],t[4],t[8]];wt(e,-1),t[0]=e[0],t[4]=e[1],t[8]=e[2],e=[t[1],t[5],t[9]],wt(e,-1),t[1]=e[0],t[5]=e[1],t[9]=e[2],e=[t[2],t[6],t[10]],wt(e,-1),t[2]=e[0],t[6]=e[1],t[10]=e[2],e=[t[0],t[1],t[2]],wt(e,-1),t[0]=e[0],t[1]=e[1],t[2]=e[2],e=[t[4],t[5],t[6]],wt(e,-1),t[4]=e[0],t[5]=e[1],t[6]=e[2],e=[t[8],t[9],t[10]],wt(e,-1),t[8]=e[0],t[9]=e[1],t[10]=e[2],e=[t[3],t[7],t[11]],wt(e,-1),t[3]=e[0],t[7]=e[1],t[11]=e[2];}return new o.Matrix4().set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]);}function Ct(t){if(t>-1&&t<3){var e=["X","Y","Z"],n={X:0,Y:1,Z:2};t=It(e[t]),t=n[t];}return t;}function It(t){if(Jt.convertUpAxis)switch(t){case"X":switch($t){case"XtoY":case"XtoZ":case"YtoX":t="Y";break;case"ZtoX":t="Z";}break;case"Y":switch($t){case"XtoY":case"YtoX":case"ZtoX":t="X";break;case"XtoZ":case"YtoZ":case"ZtoY":t="Z";}break;case"Z":switch($t){case"XtoZ":t="X";break;case"YtoZ":case"ZtoX":case"ZtoY":t="Y";}}return t;}var Ot,Tt,Pt,At,Lt,Nt,kt,Rt,Dt,Ft=null,Bt=null,jt=null,Ut={},zt={},Gt={},Vt={},Xt={},Ht={},qt={},Yt={},Wt={},Zt=o.SmoothShading,Jt={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},Kt=1,Qt="Y",$t=null;return I.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];"init_from"===n.nodeName&&(this.init_from=n.textContent);}return this;},O.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.type="none";for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"skin":this.skin=new P().parse(n),this.type=n.nodeName;break;case"morph":this.morph=new T().parse(n),this.type=n.nodeName;}}return this;},T.prototype.parse=function(t){var e,n={},i=[];for(this.method=t.getAttribute("method"),this.source=t.getAttribute("source").replace(/^#/,""),e=0;e<t.childNodes.length;e++){var r=t.childNodes[e];if(1==r.nodeType)switch(r.nodeName){case"source":var o=new q().parse(r);n[o.id]=o;break;case"targets":i=this.parseInputs(r);break;default:console.log(r.nodeName);}}for(e=0;e<i.length;e++){var a=i[e],o=n[a.source];switch(a.semantic){case"MORPH_TARGET":this.targets=o.read();break;case"MORPH_WEIGHT":this.weights=o.read();}}return this;},T.prototype.parseInputs=function(t){for(var e=[],n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":e.push(new H().parse(i));}}return e;},P.prototype.parse=function(t){var e,n,i={};this.source=t.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(1==o.nodeType)switch(o.nodeName){case"bind_shape_matrix":var a=pt(o.textContent);this.bindShapeMatrix=Mt(a);break;case"source":var s=new q().parse(o);i[s.id]=s;break;case"joints":e=o;break;case"vertex_weights":n=o;break;default:console.log(o.nodeName);}}return this.parseJoints(e,i),this.parseWeights(n,i),this;},P.prototype.parseJoints=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"input":var r=new H().parse(i),o=e[r.source];"JOINT"===r.semantic?this.joints=o.read():"INV_BIND_MATRIX"===r.semantic&&(this.invBindMatrices=o.read());}}},P.prototype.parseWeights=function(t,e){for(var n,i,r=[],o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1==a.nodeType)switch(a.nodeName){case"input":r.push(new H().parse(a));break;case"v":n=gt(a.textContent);break;case"vcount":i=gt(a.textContent);}}for(var s=0,o=0;o<i.length;o++){for(var u=i[o],l=[],c=0;c<u;c++){for(var h={},f=0;f<r.length;f++){var d=r[f],p=n[s+d.offset];switch(d.semantic){case"JOINT":h.joint=p;break;case"WEIGHT":h.weight=e[d.source].data[p];}}l.push(h),s+=r.length;}for(var c=0;c<l.length;c++){l[c].index=o;}this.weights.push(l);}},A.prototype.getChildById=function(t,e){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(t,e);if(i)return i;}return null;},A.prototype.getChildBySid=function(t,e){for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(t,e);if(i)return i;}return null;},A.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.nodes=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push(new L().parse(n));}}return this;},L.prototype.getChannelForTransform=function(t){for(var e=0;e<this.channels.length;e++){var n,i,r=this.channels[e],o=r.target.split("/"),a=(o.shift(),o.shift()),s=a.indexOf(".")>=0,u=a.indexOf("(")>=0;if(s)o=a.split("."),a=o.shift(),i=o.shift();else if(u){n=a.split("("),a=n.shift();for(var l=0;l<n.length;l++){n[l]=parseInt(n[l].replace(/\\)/,""));}}if(a===t)return r.info={sid:a,dotSyntax:s,arrSyntax:u,arrIndices:n},r;}return null;},L.prototype.getChildById=function(t,e){if(this.id===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildById(t,e);if(i)return i;}return null;},L.prototype.getChildBySid=function(t,e){if(this.sid===t)return this;if(e)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n].getChildBySid(t,e);if(i)return i;}return null;},L.prototype.getTransformBySid=function(t){for(var e=0;e<this.transforms.length;e++){if(this.transforms[e].sid===t)return this.transforms[e];}return null;},L.prototype.parse=function(t){var e;this.id=t.getAttribute("id"),this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.type=t.getAttribute("type"),this.layer=t.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new o.Matrix4();for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push(new L().parse(i));break;case"instance_camera":this.cameras.push(new ot().parse(i));break;case"instance_controller":this.controllers.push(new k().parse(i));break;case"instance_geometry":this.geometries.push(new D().parse(i));break;case"instance_light":this.lights.push(new st().parse(i));break;case"instance_node":e=i.getAttribute("url").replace(/^#/,"");var r=_(e);r&&this.nodes.push(new L().parse(r));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push(new N().parse(i));break;case"extra":break;default:console.log(i.nodeName);}}return this.channels=b(this),x(this),this.updateMatrix(),this;},L.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++){this.transforms[t].apply(this.matrix);}},N.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=pt(t.textContent),this.convert(),this;},N.prototype.convert=function(){switch(this.type){case"matrix":this.obj=Mt(this.data);break;case"rotate":this.angle=o.Math.degToRad(this.data[3]);case"translate":wt(this.data,-1),this.obj=new o.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":wt(this.data,1),this.obj=new o.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type);}},N.prototype.apply=function(){var t=new o.Matrix4();return function(e){switch(this.type){case"matrix":e.multiply(this.obj);break;case"translate":e.multiply(t.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":e.multiply(t.makeRotationAxis(this.obj,this.angle));break;case"scale":e.scale(this.obj);}};}(),N.prototype.update=function(t,e){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(e){if(1===e.length)switch(e[0]){case 0:this.obj.n11=t[0],this.obj.n21=t[1],this.obj.n31=t[2],this.obj.n41=t[3];break;case 1:this.obj.n12=t[0],this.obj.n22=t[1],this.obj.n32=t[2],this.obj.n42=t[3];break;case 2:this.obj.n13=t[0],this.obj.n23=t[1],this.obj.n33=t[2],this.obj.n43=t[3];break;case 3:this.obj.n14=t[0],this.obj.n24=t[1],this.obj.n34=t[2],this.obj.n44=t[3];}else if(2===e.length){var i="n"+(e[0]+1)+(e[1]+1);this.obj[i]=t;}else console.log("Incorrect addressing of matrix in transform.");}else this.obj.copy(t);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2];}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(e)&&(e=n[e[0]]),e){case"X":this.obj.x=t;break;case"Y":this.obj.y=t;break;case"Z":this.obj.z=t;break;case"ANGLE":this.angle=o.Math.degToRad(t);break;default:this.obj.x=t[0],this.obj.y=t[1],this.obj.z=t[2],this.angle=o.Math.degToRad(t[3]);}}},k.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push(new R().parse(o));}break;case"extra":}}return this;},R.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this;},D.prototype.parse=function(t){this.url=t.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var i=n.querySelectorAll("instance_material"),r=0;r<i.length;r++){var o=i[r];this.instance_material.push(new R().parse(o));}break;}}return this;},F.prototype.parse=function(t){this.id=t.getAttribute("id"),bt(this,t);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"mesh":this.mesh=new B(this).parse(n);break;case"extra":}}return this;},B.prototype.parse=function(t){this.primitives=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"source":ft(n);break;case"vertices":this.vertices=new X().parse(n);break;case"linestrips":this.primitives.push(new z().parse(n));break;case"triangles":this.primitives.push(new G().parse(n));break;case"polygons":this.primitives.push(new j().parse(n));break;case"polylist":this.primitives.push(new U().parse(n));}}if(this.geometry3js=new o.Geometry(),null===this.vertices)return this;for(var i=Ut[this.vertices.input.POSITION.source].data,e=0;e<i.length;e+=3){this.geometry3js.vertices.push(St(i,e).clone());}for(var e=0;e<this.primitives.length;e++){var r=this.primitives[e];r.setVertices(this.vertices),this.handlePrimitive(r,this.geometry3js);}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this;},B.prototype.handlePrimitive=function(t,e){if(t instanceof z)return void(e.isLineStrip=!0);var n,i,r,a,s,u,l,c=t.p,h=t.inputs,f=0,d=3,p=0,g=[];for(n=0;n<h.length;n++){r=h[n];var v=r.offset+1;switch(p=p<v?v:p,r.semantic){case"TEXCOORD":g.push(r.set);}}for(var m=0;m<c.length;++m){for(var y=c[m],_=0;_<y.length;){var b=[],x=[],w=null,E=[];for(d=t.vcount?t.vcount.length?t.vcount[f++]:t.vcount:y.length/p,n=0;n<d;n++){for(i=0;i<h.length;i++){switch(r=h[i],u=Ut[r.source],a=y[_+n*p+r.offset],l=u.accessor.params.length,s=a*l,r.semantic){case"VERTEX":b.push(a);break;case"NORMAL":x.push(St(u.data,s));break;case"TEXCOORD":w=w||{},void 0===w[r.set]&&(w[r.set]=[]),w[r.set].push(new o.Vector2(u.data[s],u.data[s+1]));break;case"COLOR":E.push(new o.Color().setRGB(u.data[s],u.data[s+1],u.data[s+2]));}}}if(0===x.length)if(r=this.vertices.input.NORMAL){u=Ut[r.source],l=u.accessor.params.length;for(var S=0,M=b.length;S<M;S++){x.push(St(u.data,b[S]*l));}}else e.calcNormals=!0;if(!w&&(w={},r=this.vertices.input.TEXCOORD)){g.push(r.set),u=Ut[r.source],l=u.accessor.params.length;for(var S=0,M=b.length;S<M;S++){s=b[S]*l,void 0===w[r.set]&&(w[r.set]=[]),w[r.set].push(new o.Vector2(u.data[s],1-u.data[s+1]));}}if(0===E.length&&(r=this.vertices.input.COLOR)){u=Ut[r.source],l=u.accessor.params.length;for(var S=0,M=b.length;S<M;S++){s=b[S]*l,E.push(new o.Color().setRGB(u.data[s],u.data[s+1],u.data[s+2]));}}var C,I,O=null,T=[];if(3===d)T.push(new o.Face3(b[0],b[1],b[2],x,E.length?E:new o.Color()));else if(4===d)T.push(new o.Face3(b[0],b[1],b[3],x.length?[x[0].clone(),x[1].clone(),x[3].clone()]:[],E.length?[E[0],E[1],E[3]]:new o.Color())),T.push(new o.Face3(b[1],b[2],b[3],x.length?[x[1].clone(),x[2].clone(),x[3].clone()]:[],E.length?[E[1],E[2],E[3]]:new o.Color()));else if(d>4&&Jt.subdivideFaces){var P=E.length?E:new o.Color();for(i=1;i<d-1;){T.push(new o.Face3(b[0],b[i],b[i+1],x.length?[x[0].clone(),x[i++].clone(),x[i].clone()]:[],P));}}if(T.length)for(var S=0,M=T.length;S<M;S++){for(O=T[S],O.daeMaterial=t.material,e.faces.push(O),i=0;i<g.length;i++){C=w[g[i]],I=d>4?[C[0],C[S+1],C[S+2]]:4===d?0===S?[C[0],C[1],C[3]]:[C[1].clone(),C[2],C[3].clone()]:[C[0],C[1],C[2]],void 0===e.faceVertexUvs[i]&&(e.faceVertexUvs[i]=[]),e.faceVertexUvs[i].push(I);}}else console.log("dropped face with vcount "+d+" for geometry with id: "+e.id);_+=p*d;}}},j.prototype.setVertices=function(t){for(var e=0;e<this.inputs.length;e++){this.inputs[e].source===t.id&&(this.inputs[e].source=t.input.POSITION.source);}},j.prototype.parse=function(t){this.material=t.getAttribute("material"),this.count=yt(t,"count",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"input":this.inputs.push(new H().parse(t.childNodes[e]));break;case"vcount":this.vcount=gt(n.textContent);break;case"p":this.p.push(gt(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!");}}return this;},U.prototype=Object.create(j.prototype),U.prototype.constructor=U,z.prototype=Object.create(j.prototype),z.prototype.constructor=z,G.prototype=Object.create(j.prototype),G.prototype.constructor=G,V.prototype.parse=function(t){this.params=[],this.source=t.getAttribute("source"),this.count=yt(t,"count",0),this.stride=yt(t,"stride",0);for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if("param"===n.nodeName){var i={};i.name=n.getAttribute("name"),i.type=n.getAttribute("type"),this.params.push(i);}}return this;},X.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){if("input"===t.childNodes[e].nodeName){var n=new H().parse(t.childNodes[e]);this.input[n.semantic]=n;}}return this;},H.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=yt(t,"set",-1),this.offset=yt(t,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this;},q.prototype.parse=function(t){this.id=t.getAttribute("id");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"bool_array":this.data=dt(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=pt(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=gt(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=vt(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var i=0;i<n.childNodes.length;i++){if("accessor"===n.childNodes[i].nodeName){this.accessor=new V().parse(n.childNodes[i]);break;}}}}return this;},q.prototype.read=function(){var t=[],e=this.accessor.params[0];switch(e.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var i=this.data.slice(n,n+16),r=Mt(i);t.push(r);}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+e.type+".");}return t;},Y.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){if("instance_effect"===t.childNodes[e].nodeName){this.instance_effect=new $().parse(t.childNodes[e]);break;}}return this;},W.prototype.isColor=function(){return null===this.texture;},W.prototype.isTexture=function(){return null!=this.texture;},W.prototype.parse=function(t){"transparent"===t.nodeName&&(this.opaque=t.getAttribute("opaque"));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"color":var i=pt(n.textContent);this.color=new o.Color(),this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n);}}return this;},W.prototype.parseTexture=function(t){if(!t.childNodes)return this;t.childNodes[1]&&"extra"===t.childNodes[1].nodeName&&(t=t.childNodes[1],t.childNodes[1]&&"technique"===t.childNodes[1].nodeName&&(t=t.childNodes[1]));for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent;}}return this;},Z.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=new W().parse(n);break;case"bump":var i=n.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=new W().parse(n):"normalmap"===i.toLowerCase()?this.normal=new W().parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute \'bumptype\' ("+i+") - valid bumptypes are \'HEIGHTFIELD\' and \'NORMALMAP\' - defaulting to \'HEIGHTFIELD\'"),this.bump=new W().parse(n)):(console.warn("Shader.prototype.parse: Attribute \'bumptype\' missing from bump node - defaulting to \'HEIGHTFIELD\'"),this.bump=new W().parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var r=n.querySelectorAll("float");r.length>0&&(this[n.nodeName]=parseFloat(r[0].textContent));}}return this.create(),this;},Z.prototype.create=function(){var t={},e=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var n=(this.transparent,(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency);n>0&&(e=!0,t.transparent=!0,t.opacity=1-n);}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var r in this){switch(r){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var a=this[r];if(a instanceof W)if(a.isTexture()){var s=a.texture,u=this.effect.sampler[s];if(void 0!==u&&void 0!==u.source){var l=this.effect.surface[u.source];if(void 0!==l){var c=zt[l.init_from];if(c){var h,f=kt+c.init_from,d=o.Loader.Handlers.get(f);null!==d?h=d.load(f):(h=new o.Texture(),_t(h,f)),h.wrapS=a.texOpts.wrapU?o.RepeatWrapping:o.ClampToEdgeWrapping,h.wrapT=a.texOpts.wrapV?o.RepeatWrapping:o.ClampToEdgeWrapping,h.offset.x=a.texOpts.offsetU,h.offset.y=a.texOpts.offsetV,h.repeat.x=a.texOpts.repeatU,h.repeat.y=a.texOpts.repeatV,t[i[r]]=h,"emission"===r&&(t.emissive=16777215);}}}}else"diffuse"!==r&&e||("emission"===r?t.emissive=a.color.getHex():t[r]=a.color.getHex());break;case"shininess":t[r]=this[r];break;case"reflectivity":t[r]=this[r],t[r]>0&&(t.envMap=Jt.defaultEnvMap),t.combine=o.MixOperation;break;case"index_of_refraction":t.refractionRatio=this[r],1!==this[r]&&(t.envMap=Jt.defaultEnvMap);break;case"transparency":}}switch(t.shading=Zt,t.side=this.effect.doubleSided?o.DoubleSide:o.FrontSide,void 0!==t.diffuse&&(t.color=t.diffuse,delete t.diffuse),this.type){case"constant":void 0!=t.emissive&&(t.color=t.emissive),this.material=new o.MeshBasicMaterial(t);break;case"phong":case"blinn":this.material=new o.MeshBasicMaterial(t);break;case"lambert":default:this.material=new o.MeshLambertMaterial(t);}return this.material;},J.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName);}}return this;},K.prototype.parse=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName);}}return this;},Q.prototype.create=function(){if(null===this.shader)return null;},Q.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),bt(this,t),this.shader=null;for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n));}}return this;},Q.prototype.parseNewparam=function(t){for(var e=t.getAttribute("sid"),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"surface":this.surface[e]=new J(this).parse(i);break;case"sampler2D":this.sampler[e]=new K(this).parse(i);break;case"extra":break;default:console.log(i.nodeName);}}},Q.prototype.parseProfileCOMMON=function(t){for(var e,n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1==i.nodeType)switch(i.nodeName){case"profile_COMMON":this.parseProfileCOMMON(i);break;case"technique":e=i;break;case"newparam":this.parseNewparam(i);break;case"image":var r=new I().parse(i);zt[r.id]=r;break;case"extra":break;default:console.log(i.nodeName);}}return e;},Q.prototype.parseTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new Z(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n);}}},Q.prototype.parseExtra=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n);}}},Q.prototype.parseExtraTechnique=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(t);}}},$.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this;},tt.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.source={};for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"animation":var i=new tt().parse(n);for(var r in i.source){this.source[r]=i.source[r];}for(var o=0;o<i.channel.length;o++){this.channel.push(i.channel[o]),this.sampler.push(i.sampler[o]);}break;case"source":var r=new q().parse(n);this.source[r.id]=r;break;case"sampler":this.sampler.push(new nt(this).parse(n));break;case"channel":this.channel.push(new et(this).parse(n));}}return this;},et.prototype.parse=function(t){this.source=t.getAttribute("source").replace(/^#/,""),this.target=t.getAttribute("target");var e=this.target.split("/"),n=(e.shift(),e.shift()),i=n.indexOf(".")>=0,r=n.indexOf("(")>=0;if(i)e=n.split("."),this.sid=e.shift(),this.member=e.shift();else if(r){var o=n.split("(");this.sid=o.shift();for(var a=0;a<o.length;a++){o[a]=parseInt(o[a].replace(/\\)/,""));}this.arrIndices=o;}else this.sid=n;return this.fullSid=n,this.dotSyntax=i,this.arrSyntax=r,this;},nt.prototype.parse=function(t){this.id=t.getAttribute("id"),this.inputs=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push(new H().parse(n));}}return this;},nt.prototype.create=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t],n=this.animation.source[e.source];switch(e.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":break;case"OUT_TANGENT":break;default:console.log(e.semantic);}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var t=0;t<this.input.length;t++){this.startTime=Math.min(this.startTime,this.input[t]),this.endTime=Math.max(this.endTime,this.input[t]);}this.duration=this.endTime-this.startTime;}},nt.prototype.getData=function(t,e,n){var i;if("matrix"===t&&16===this.strideOut)i=this.output[e];else if(this.strideOut>1){i=[],e*=this.strideOut;for(var r=0;r<this.strideOut;++r){i[r]=this.output[e+r];}if(3===this.strideOut)switch(t){case"rotate":case"translate":wt(i,-1);break;case"scale":wt(i,1);}else 4===this.strideOut&&"matrix"===t&&wt(i,-1);}else i=this.output[e],n&&"translate"===t&&(i=Et(n,i));return i;},it.prototype.addTarget=function(t,e,n,i){this.targets.push({sid:t,member:n,transform:e,data:i});},it.prototype.apply=function(t){for(var e=0;e<this.targets.length;++e){var n=this.targets[e];t&&n.sid!==t||n.transform.update(n.data,n.member);}},it.prototype.getTarget=function(t){for(var e=0;e<this.targets.length;++e){if(this.targets[e].sid===t)return this.targets[e];}return null;},it.prototype.hasTarget=function(t){for(var e=0;e<this.targets.length;++e){if(this.targets[e].sid===t)return!0;}return!1;},it.prototype.interpolate=function(t,e){for(var n=0,i=this.targets.length;n<i;n++){var r,o=this.targets[n],a=t.getTarget(o.sid);if("matrix"!==o.transform.type&&a){var s=(e-this.time)/(t.time-this.time),u=a.data,l=o.data;if(s<0&&(s=0),s>1&&(s=1),l.length){r=[];for(var c=0;c<l.length;++c){r[c]=l[c]+(u[c]-l[c])*s;}}else r=l+(u-l)*s;}else r=o.data;o.transform.update(r,o.member);}},rt.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n);}}return this;},rt.prototype.parseOptics=function(t){for(var e=0;e<t.childNodes.length;e++){if("technique_common"===t.childNodes[e].nodeName)for(var n=t.childNodes[e],i=0;i<n.childNodes.length;i++){if(this.technique=n.childNodes[i].nodeName,"perspective"===this.technique)for(var r=n.childNodes[i],o=0;o<r.childNodes.length;o++){var a=r.childNodes[o];switch(a.nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent;}}else if("orthographic"===this.technique)for(var s=n.childNodes[i],o=0;o<s.childNodes.length;o++){var a=s.childNodes[o];switch(a.nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent;}}}}return this;},ot.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this;},at.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n);}}return this;},at.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++){switch(t.childNodes[e].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=t.childNodes[e].nodeName;for(var n=t.childNodes[e],i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];switch(r.nodeName){case"color":var a=pt(r.textContent);this.color=new o.Color(0),this.color.setRGB(a[0],a[1],a[2]),this.color.a=a[3];break;case"falloff_angle":this.falloff_angle=parseFloat(r.textContent);break;case"quadratic_attenuation":var s=parseFloat(r.textContent);this.distance=s?Math.sqrt(1/s):0;}}}}return this;},at.prototype.parseTechnique=function(t){this.profile=t.getAttribute("profile");for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent);}}return this;},st.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this;},ut.prototype.parse=function(t){this.id=t.getAttribute("id"),this.name=t.getAttribute("name"),this.joints=[],this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);}}return this;},ut.prototype.parseCommon=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(t.childNodes[e].nodeName){case"joint":this.joints.push(new lt().parse(n));break;case"link":this.links.push(new ct().parse(n));}}return this;},lt.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.axis=new o.Vector3(),this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var e=t.querySelector("axis"),n=pt(e.textContent);this.axis=St(n,0);var i=t.querySelector("limits min")?parseFloat(t.querySelector("limits min").textContent):-360,r=t.querySelector("limits max")?parseFloat(t.querySelector("limits max").textContent):360;this.limits={min:i,max:r};for(var a=["prismatic","revolute"],s=0;s<a.length;s++){var u=a[s],l=t.querySelector(u);l&&(this.type=u);}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this;},ct.prototype.parse=function(t){this.sid=t.getAttribute("sid"),this.name=t.getAttribute("name"),this.transforms=[],this.attachments=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push(new ht().parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push(new N().parse(n));}}return this;},ht.prototype.parse=function(t){this.joint=t.getAttribute("joint").split("/").pop(),this.links=[];for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push(new ct().parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push(new N().parse(n));}}return this;},{load:t,parse:e,setPreferredShading:n,applySkin:v,geometries:Xt,options:Jt};};},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i,r){n(this,t),this._center=e,this._radius=i,this._height=r;}return i(t,[{key:"containsPoint",value:function value(t){var e=t.clone();return e.sub(this._center).setZ(0).length()<this._radius&&Math.abs(t.z-this._center.z)<this._height;}},{key:"clone",value:function value(){return new this.constructor(this._center,this._radius,this._height);}},{key:"scaleRadius",value:function value(t){this._radius*=t;}}]),t;}(),o=function(){function t(e,i,r){n(this,t),this._center=e,this._a=i,this._b=r;}return i(t,[{key:"containsPoint",value:function value(t){var e=t.clone();return(e.x-this._center.x)*(e.x-this._center.x)/this._a/this._a+(e.y-this._center.y)*(e.y-this._center.y)/this._b/this._b<1;}},{key:"clone",value:function value(){return new this.constructor(this._center,this._a,this._b);}},{key:"scaleRadius",value:function value(t){this._a*=t,this._b*=t;}}]),t;}();e.EllipticCylinder=o,e.Cylinder=r;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r=n(1),o=n(2),a=i(o);!function(){function t(){this.position=new a.Vector3(),this.normal=new a.Vector3(),this.uv=new a.Vector2(),this.skinIndices=new a.Vector4(0,0,0,0),this.skinWeights=new a.Vector4(0,0,0,0);}function e(){this.vertices=[];}function n(){this.triangles=[],this.materialIndex=0;}function i(){this.faces=[],this.skeleton=null;}function o(){}function s(){}function u(t){for(var e=["K","a","y","d","a","r","a","\\\\","F","B","X","\\\\","B","i","n","a","r","y","\\\\","\\\\"],n=0,i=function i(e){var i=t[e-1];return t=t.slice(n+e),n++,i;},r=0;r<e.length;++r){var o=i(1);if(o==e[r])return!1;}return!0;}function l(t){var e=/FBXVersion: (\\d+)/,n=t.match(e);if(n){var i=parseInt(n[1]);return i;}throw new Error("FBXLoader: Cannot find the version number for the file given.");}function c(t){return t/46186158e3;}function h(t){return t.split(",").map(function(t){return parseFloat(t);});}function f(t){return t.split(",").map(function(t){return parseInt(t);});}function d(t){return new a.Matrix4().fromArray(h(t));}function p(t){return t*Math.PI/180;}a.FBXLoader=function(t){a.Loader.call(this),this.manager=void 0!==t?t:a.DefaultLoadingManager,this.fileLoader=new a.FileLoader(this.manager),this.textureLoader=new a.TextureLoader(this.manager);},r(a.FBXLoader.prototype,a.Loader.prototype),a.FBXLoader.prototype.constructor=a.FBXLoader,r(a.FBXLoader.prototype,{load:function load(t,e,n,i){var r=this,o=t.split(/[\\\\\\/]/);o.pop(),o=o.join("/"),this.fileLoader.load(t,function(n){if(!u(n))return console.error("FBXLoader: FBX Binary format not supported."),void r.manager.itemError(t);if(l(n)<7e3)return console.error("FBXLoader: FBX version not supported for file at "+t+", FileVersion: "+l(n)),void r.manager.itemError(t);var i=r.parse(n,o);e(i);},n,i);},parse:function parse(e,r){function s(t){var e=new Map();if("Connections"in t){var n=t.Connections.properties.connections;n.forEach(function(t){e.has(t[0])||e.set(t[0],{parents:[],children:[]});var n={ID:t[1],relationship:t[2]};e.get(t[0]).parents.push(n),e.has(t[1])||e.set(t[1],{parents:[],children:[]});var i={ID:t[0],relationship:t[2]};e.get(t[1]).children.push(i);});}return e;}function u(t){function e(t){var e=t.id,n=t.name,i=t.properties.FileName,o=i.split(/[\\\\\\/]/);if(o.length>0)var a=o[o.length-1];else var a=i;var s=w.textureLoader.load(r+"/"+a);return s.name=n,s.FBX_ID=e,s;}var n=new Map();if("Texture"in t.Objects.subNodes){var i=t.Objects.subNodes.Texture;for(var o in i){var a=e(i[o]);n.set(parseInt(o),a);}}return n;}function l(t,e,n){function i(t,e,n){function i(t,e,n){var i={};return t.Diffuse&&(i.color=x(t.Diffuse)),t.Specular&&(i.specular=x(t.Specular)),t.Shininess&&(i.shininess=t.Shininess.value),t.Emissive&&(i.emissive=x(t.Emissive)),t.EmissiveFactor&&(i.emissiveIntensity=t.EmissiveFactor.value),t.Opacity&&(i.opacity=t.Opacity.value),i.opacity<1&&(i.transparent=!0),n.forEach(function(t){var n=t.relationship;switch(n){case\' "AmbientColor\':break;case\' "DiffuseColor\':i.map=e.get(t.ID);break;default:console.warn("Unknown texture application of type "+n+", skipping texture");}}),i;}var r,o=t.id,s=t.attrName,u=t.properties.ShadingModel,l=n.get(o).children,c=i(t.properties,e,l);switch(u){case"phong":r=new a.MeshPhongMaterial();break;case"lambert":r=new a.MeshLambertMaterial();break;default:console.warn("No implementation given for material type "+u+" in FBXLoader.js.  Defaulting to basic material"),r=new a.MeshBasicMaterial({color:3342591});}return r.setValues(c),r.name=s,r;}var r=new Map();if("Material"in t.Objects.subNodes){var o=t.Objects.subNodes.Material;for(var s in o){var u=i(o[s],e,n);r.set(parseInt(s),u);}}return r;}function g(t,e){function n(t,e){var n=new Map(),i=[];return t.children.forEach(function(t){var r=e[t.ID],o={FBX_ID:t.ID,indices:f(r.subNodes.Indexes.properties.a),weights:h(r.subNodes.Weights.properties.a),transform:d(r.subNodes.Transform.properties.a),transformLink:d(r.subNodes.TransformLink.properties.a),linkMode:r.properties.Mode};n.set(t.ID,o),i.push(o);}),{map:n,array:i,bones:[]};}var i=new Map();if("Deformer"in t.Objects.subNodes){var r=t.Objects.subNodes.Deformer;for(var o in r){var a=r[o];if("Skin"===a.attrType){var s=e.get(parseInt(o)),u=n(s,r);u.FBX_ID=parseInt(o),i.set(parseInt(o),u);}}}return i;}function v(e,r,o){function s(e,r,o){function s(e,r,o){function s(e,r){function o(t){var e=t.subNodes.LayerElementNormal[0],n=e.properties.MappingInformationType,i=e.properties.ReferenceInformationType,r=h(e.subNodes.Normals.properties.a),o=[];return"IndexToDirect"===i&&(o=f(e.subNodes.NormalIndex.properties.a)),{dataSize:3,buffer:r,indices:o,mappingType:n,referenceType:i};}function s(t){var e=t.subNodes.LayerElementUV[0],n=e.properties.MappingInformationType,i=e.properties.ReferenceInformationType,r=h(e.subNodes.UV.properties.a),o=[];return"IndexToDirect"===i&&(o=f(e.subNodes.UVIndex.properties.a)),{dataSize:2,buffer:r,indices:o,mappingType:n,referenceType:i};}function u(t){var e=t.subNodes.LayerElementMaterial[0],n=e.properties.MappingInformationType,i=e.properties.ReferenceInformationType,r=f(e.subNodes.Materials.properties.a),o=[];return r.forEach(function(t,e){o.push(e);}),{dataSize:1,buffer:r,indices:o,mappingType:n,referenceType:i};}function l(t,e,n,i){var r={ByPolygonVertex:{Direct:function Direct(t,e,n,i){return i.buffer.slice(t*i.dataSize,t*i.dataSize+i.dataSize);},IndexToDirect:function IndexToDirect(t,e,n,i){var r=i.indices[t];return i.buffer.slice(r*i.dataSize,r*i.dataSize+i.dataSize);}},ByPolygon:{Direct:function Direct(t,e,n,i){return i.buffer.slice(e*i.dataSize,e*i.dataSize+i.dataSize);},IndexToDirect:function IndexToDirect(t,e,n,i){var r=i.indices[e];return i.buffer.slice(r*i.dataSize,r*i.dataSize+i.dataSize);}},AllSame:{IndexToDirect:function IndexToDirect(t,e,n,i){return i.buffer.slice(i.indices[0]*i.dataSize,i.indices[0]*i.dataSize+i.dataSize);}}};return r[i.mappingType][i.referenceType](t,e,n,i);}var c=new i(),d=h(e.subNodes.Vertices.properties.a),p=f(e.subNodes.PolygonVertexIndex.properties.a);if("LayerElementNormal"in e.subNodes)var g=o(e);if("LayerElementUV"in e.subNodes)var v=s(e);if("LayerElementMaterial"in e.subNodes)var m=u(e);for(var y=[],_=0,b=0;b<p.length;++b){var x,w=p[b];p[b]<0&&(w^=-1,p[b]=w,x=!0);var E=new t(),S=[],M=[];if(E.position.fromArray(d,3*w),r){for(var C=0;C<r.array.length;++C){var I=r.array[C].indices.findIndex(function(t){return t===p[b];});I!==-1&&(M.push(r.array[C].weights[I]),S.push(C));}if(M.length>4){console.warn("FBXLoader: Vertex has more than 4 skinning weights assigned to vertex.  Deleting additional weights.");for(var O=[0,0,0,0],T=[0,0,0,0],b=0;b<M.length;++b){for(var P=M[b],A=S[b],C=0;C<T.length;++C){if(P>T[C]){var L=T[C];T[C]=P,P=L,L=O[C],O[C]=A,A=L;}}}S=O,M=T;}for(var N=M.length;N<4;N++){M[N]=0,S[N]=0;}E.skinWeights.fromArray(M),E.skinIndices.fromArray(S);}if(g&&E.normal.fromArray(l(b,_,w,g)),v&&E.uv.fromArray(l(b,_,w,v)),y.push(E),x){var k=new n(),R=l(b,_,w,m);k.genTrianglesFromVertices(y),k.materialIndex=R[0],c.faces.push(k),y=[],_++,x=!1;}}var D=c.flattenToBuffers(),F=new a.BufferGeometry();F.name=e.name,F.addAttribute("position",new a.BufferAttribute(new Float32Array(D.vertexBuffer),3)),D.normalBuffer.length>0&&F.addAttribute("normal",new a.BufferAttribute(new Float32Array(D.normalBuffer),3)),D.uvBuffer.length>0&&F.addAttribute("uv",new a.BufferAttribute(new Float32Array(D.uvBuffer),2)),r&&(F.addAttribute("skinIndex",new a.BufferAttribute(new Float32Array(D.skinIndexBuffer),4)),F.addAttribute("skinWeight",new a.BufferAttribute(new Float32Array(D.skinWeightBuffer),4)),F.FBX_Deformer=r);for(var B=D.materialIndexBuffer[0],j=0,U=0;U<D.materialIndexBuffer.length;++U){D.materialIndexBuffer[U]!==B&&(F.addGroup(j,U-j,B),j=U,B=D.materialIndexBuffer[U]);}return F;}for(var u=(e.id,e.attrName,0);u<r.children.length;++u){if(o.has(r.children[u].ID)){var l=o.get(r.children[u].ID);break;}}var c=s(e,l);return c;}function u(t,e){if(void 0===a.NURBSCurve)return console.error("THREE.FBXLoader relies on THREE.NURBSCurve for any nurbs present in the model.  Nurbs will show up as empty geometry."),new a.BufferGeometry();var n=parseInt(t.properties.Order);if(isNaN(n))return console.error("FBXLoader: Invalid Order "+t.properties.Order+" given for geometry ID: "+t.id),new a.BufferGeometry();for(var i=h(t.subNodes.KnotVector.properties.a),r=[],o=h(t.subNodes.Points.properties.a),s=0;s<o.length;s+=4){r.push(new a.Vector4(o[s],o[s+1],o[s+2],o[s+3]));}"Closed"===t.properties.Form&&r.push(r[0]);var u=new a.NURBSCurve(n-1,i,r),l=u.getPoints(1.5*r.length),c=[];l.forEach(function(t){var e=t.toArray();c=c.concat(e);});var f=new a.BufferGeometry();return f.addAttribute("position",new a.BufferAttribute(new Float32Array(c),3)),f;}switch(e.attrType){case"Mesh":return s(e,r,o);case"NurbsCurve":return u(e,r,o);}}var u=new Map();if("Geometry"in e.Objects.subNodes){var l=e.Objects.subNodes.Geometry;for(var c in l){var d=r.get(parseInt(c)),p=s(l[c],d,o);u.set(parseInt(c),p);}}return u;}function m(t,e,n,i,r){var o=new a.Group(),s=t.Objects.subNodes.Model,u=[],l=new Map();for(var c in s){for(var f=parseInt(c),p=s[c],g=e.get(f),v=null,m=0;m<g.parents.length;++m){n.forEach(function(t){if(t.map.has(g.parents[m].ID)){v=new a.Bone();var e=t.array.findIndex(function(t){return t.FBX_ID===g.parents[m].ID;});t.bones[e]=v;}});}if(!v)switch(p.attrType){case"Mesh":var b=null,x=null,w=[];g.children.forEach(function(t){i.has(t.ID)&&(b=i.get(t.ID)),r.has(t.ID)&&w.push(r.get(t.ID));}),x=w.length>1?new a.MultiMaterial(w):w.length>0?w[0]:new a.MeshBasicMaterial({color:3342591}),b.FBX_Deformer?(w.forEach(function(t){t.skinning=!0;}),x.skinning=!0,v=new a.SkinnedMesh(b,x)):v=new a.Mesh(b,x);break;case"NurbsCurve":var b=null;g.children.forEach(function(t){i.has(t.ID)&&(b=i.get(t.ID));}),x=new a.LineBasicMaterial({color:3342591,linewidth:5}),v=new a.Line(b,x);break;default:v=new a.Object3D();}v.name=p.attrName.replace(/:/,"").replace(/_/,"").replace(/-/,""),v.FBX_ID=f,u.push(v),l.set(f,v);}u.forEach(function(t){var n=s[t.FBX_ID];if("Lcl_Translation"in n.properties&&t.position.fromArray(h(n.properties.Lcl_Translation.value)),"Lcl_Rotation"in n.properties){var i=h(n.properties.Lcl_Rotation.value).map(function(t){return t*Math.PI/180;});i.push("ZYX"),t.rotation.fromArray(i);}"Lcl_Scaling"in n.properties&&t.scale.fromArray(h(n.properties.Lcl_Scaling.value));for(var r=e.get(t.FBX_ID),a=0;a<r.parents.length;a++){var l=u.findIndex(function(t){return t.FBX_ID===r.parents[a].ID;});if(l>-1){u[l].add(t);break;}}null===t.parent&&o.add(t);}),o.updateMatrixWorld(!0);var E=t.Objects.subNodes.Pose;for(var c in E){if("BindPose"===E[c].attrType){E=E[c];break;}}if(E){var S=E.subNodes.PoseNode,M=new Map();S.forEach(function(t){var e=d(t.subNodes.Matrix.properties.a);M.set(parseInt(t.id),e);});}n.forEach(function(t,n){t.array.forEach(function(e,n){var i=t.bones[n];if(M.has(i.FBX_ID)){var r=M.get(i.FBX_ID);i.matrixWorld.copy(r);}}),t.skeleton=new a.Skeleton(t.bones);var r=e.get(n);r.parents.forEach(function(n){if(i.has(n.ID))for(var r=n.ID,o=e.get(r),a=0;a<o.parents.length;++a){if(l.has(o.parents[a].ID)){var s=l.get(o.parents[a].ID);s.bind(t.skeleton,s.matrixWorld);break;}}});}),u.forEach(function(t){var e=s[t.FBX_ID];if("Lcl_Translation"in e.properties&&t.position.fromArray(h(e.properties.Lcl_Translation.value)),"Lcl_Rotation"in e.properties){var n=h(e.properties.Lcl_Rotation.value).map(function(t){return t*Math.PI/180;});n.push("ZYX"),t.rotation.fromArray(n);}"Lcl_Scaling"in e.properties&&t.scale.fromArray(h(e.properties.Lcl_Scaling.value));}),o.skeleton={bones:u};var C=y(t,e,o);return _(o,C),o;}function y(t,e,n){function i(t,e,n,i){var r={id:e.id,attr:e.attrName,internalID:e.id,attrX:!1,attrY:!1,attrZ:!1,containerBoneID:-1,containerID:-1,curves:{x:null,y:null,z:null}};if(!r.attr.match(/S|R|T/))return null;for(var o in e.properties){o.match(/X/)&&(r.attrX=!0),o.match(/Y/)&&(r.attrY=!0),o.match(/Z/)&&(r.attrZ=!0);}for(var a=n.get(r.id),s=a.parents,u=s.length-1;u>=0;--u){var l=i.skeleton.bones.findIndex(function(t){return t.FBX_ID===s[u].ID;});if(l>-1){r.containerBoneID=l,r.containerID=s[u].ID;break;}}return r;}function r(t){return{version:null,id:t.id,internalID:t.id,times:h(t.subNodes.KeyTime.properties.a).map(function(t){return c(t);}),values:h(t.subNodes.KeyValueFloat.properties.a),attrFlag:f(t.subNodes.KeyAttrFlags.properties.a),attrData:h(t.subNodes.KeyAttrDataFloat.properties.a)};}var o=t.Objects.subNodes.AnimationCurveNode,a=t.Objects.subNodes.AnimationCurve,s=t.Objects.subNodes.AnimationLayer,u=t.Objects.subNodes.AnimationStack,l={curves:new Map(),layers:new Map(),stacks:new Map(),length:0,fps:30,frames:0},d=[];for(var p in o){if(p.match(/\\d+/)){var g=i(t,o[p],e,n);d.push(g);}}for(var v=new Map(),m=0;m<d.length;++m){null!==d[m]&&v.set(d[m].id,d[m]);}var y=[];for(p in a){if(p.match(/\\d+/)){var _=r(a[p]);y.push(_);var b=e.get(_.id).parents[0],x=b.ID,w=b.relationship,E="";if(w.match(/X/))E="x";else if(w.match(/Y/))E="y";else{if(!w.match(/Z/))continue;E="z";}v.get(x).curves[E]=_;}}v.forEach(function(t){var e=t.containerBoneID;l.curves.has(e)||l.curves.set(e,{T:null,R:null,S:null}),l.curves.get(e)[t.attr]=t;});for(var p in s){for(var S=[],M=e.get(parseInt(p)).children,C=0;C<M.length;C++){if(v.has(M[C].ID)){var I=v.get(M[C].ID),O=I.containerBoneID;void 0===S[O]&&(S[O]={T:null,R:null,S:null}),S[O][I.attr]=I;}}l.layers.set(parseInt(p),S);}for(var p in u){for(var T=[],M=e.get(parseInt(p)).children,P=0,A=Number.MAX_VALUE,C=0;C<M.length;++C){if(l.layers.has(M[C].ID)){var L=l.layers.get(M[C].ID);T.push(L),L.forEach(function(t){function e(t){function e(t){function e(t){P=t.times[t.times.length-1]>P?t.times[t.times.length-1]:P,A=t.times[0]<A?t.times[0]:A;}t.x&&e(t.x),t.y&&e(t.y),t.z&&e(t.z);}t.R&&e(t.R.curves),t.S&&e(t.S.curves),t.T&&e(t.T.curves);}t&&e(t);});}}P>A&&l.stacks.set(parseInt(p),{name:u[p].attrName,layers:T,length:P-A,frames:30*(P-A)});}return l;}function _(t,e){void 0===t.animations&&(t.animations=[]),e.stacks.forEach(function(n){function i(t,n,i){function r(t,e){if(void 0===t)return!1;var n=t[e];return!!n&&["x","y","z"].every(function(t){return void 0!==n.curves[t];});}function o(t,e){return["x","y","z"].every(function(n){function i(t,e){return void 0!==t.values[e];}return i(t.curves[n],e);});}var s={time:i/e.fps,pos:n.position.toArray(),rot:n.quaternion.toArray(),scl:n.scale.toArray()};if(void 0===t)return s;try{if(r(t,"T")&&o(t.T,i)&&(s.pos=[t.T.curves.x.values[i],t.T.curves.y.values[i],t.T.curves.z.values[i]]),r(t,"R")&&o(t.R,i)){var u=p(t.R.curves.x.values[i]),l=p(t.R.curves.y.values[i]),c=p(t.R.curves.z.values[i]),h=new a.Euler(u,l,c,"ZYX");s.rot=new a.Quaternion().setFromEuler(h).toArray();}r(t,"S")&&o(t.S,i)&&(s.scl=[t.S.curves.x.values[i],t.S.curves.y.values[i],t.S.curves.z.values[i]]);}catch(t){console.log(n),console.log(t);}return s;}var r={name:n.name,fps:30,length:n.length,hierarchy:[]},o=t.skeleton.bones;o.forEach(function(t){var e=t.name.replace(/.*:/,""),n=o.findIndex(function(e){return t.parent===e;});r.hierarchy.push({parent:n,name:e,keys:[]});});for(var s=0;s<n.frames;s++){o.forEach(function(t,e){var o=n.layers[0][e];r.hierarchy.forEach(function(e){e.name===t.name&&e.keys.push(i(o,t,s));});});}t.animations.push(a.AnimationClip.parseAnimation(r,o));});}function b(t){return new a.Vector3(parseFloat(t.value.x),parseFloat(t.value.y),parseFloat(t.value.z));}function x(t){return new a.Color().fromArray(b(t).toArray());}var w=this,E=new o().parse(e),S=s(E),M=u(E),C=l(E,M,S),I=g(E,S),O=v(E,S,I),T=m(E,S,I,O,C);return T;}}),r(t.prototype,{copy:function copy(e){var n=e||new t();return n.position.copy(this.position),n.normal.copy(this.normal),n.uv.copy(this.uv),n.skinIndices.copy(this.skinIndices),n.skinWeights.copy(this.skinWeights),n;},flattenToBuffers:function flattenToBuffers(){var t=this.position.toArray(),e=this.normal.toArray(),n=this.uv.toArray(),i=this.skinIndices.toArray(),r=this.skinWeights.toArray();return{vertexBuffer:t,normalBuffer:e,uvBuffer:n,skinIndexBuffer:i,skinWeightBuffer:r};}}),r(e.prototype,{copy:function copy(t){for(var n=t||new e(),i=0;i<this.vertices.length;++i){this.vertices[i].copy(n.vertices[i]);}return n;},flattenToBuffers:function flattenToBuffers(){var t=[],e=[],n=[],i=[],r=[];return this.vertices.forEach(function(o){var a=o.flattenToBuffers();t=t.concat(a.vertexBuffer),e=e.concat(a.normalBuffer),n=n.concat(a.uvBuffer),i=i.concat(a.skinIndexBuffer),r=r.concat(a.skinWeightBuffer);}),{vertexBuffer:t,normalBuffer:e,uvBuffer:n,skinIndexBuffer:i,skinWeightBuffer:r};}}),r(n.prototype,{copy:function copy(t){for(var e=t||new n(),i=0;i<this.triangles.length;++i){this.triangles[i].copy(e.triangles[i]);}return e.materialIndex=this.materialIndex,e;},genTrianglesFromVertices:function genTrianglesFromVertices(t){for(var n=2;n<t.length;++n){var i=new e();i.vertices[0]=t[0],i.vertices[1]=t[n-1],i.vertices[2]=t[n],this.triangles.push(i);}},flattenToBuffers:function flattenToBuffers(){var t=[],e=[],n=[],i=[],r=[],o=[],a=this.materialIndex;return this.triangles.forEach(function(s){var u=s.flattenToBuffers();t=t.concat(u.vertexBuffer),e=e.concat(u.normalBuffer),n=n.concat(u.uvBuffer),i=i.concat(u.skinIndexBuffer),r=r.concat(u.skinWeightBuffer),o=o.concat([a,a,a]);}),{vertexBuffer:t,normalBuffer:e,uvBuffer:n,skinIndexBuffer:i,skinWeightBuffer:r,materialIndexBuffer:o};}}),r(i.prototype,{flattenToBuffers:function flattenToBuffers(){var t=[],e=[],n=[],i=[],r=[],o=[];return this.faces.forEach(function(a){var s=a.flattenToBuffers();t=t.concat(s.vertexBuffer),e=e.concat(s.normalBuffer),n=n.concat(s.uvBuffer),i=i.concat(s.skinIndexBuffer),r=r.concat(s.skinWeightBuffer),o=o.concat(s.materialIndexBuffer);}),{vertexBuffer:t,normalBuffer:e,uvBuffer:n,skinIndexBuffer:i,skinWeightBuffer:r,materialIndexBuffer:o};}}),r(o.prototype,{getPrevNode:function getPrevNode(){return this.nodeStack[this.currentIndent-2];},getCurrentNode:function getCurrentNode(){return this.nodeStack[this.currentIndent-1];},getCurrentProp:function getCurrentProp(){return this.currentProp;},pushStack:function pushStack(t){this.nodeStack.push(t),this.currentIndent+=1;},popStack:function popStack(){this.nodeStack.pop(),this.currentIndent-=1;},setCurrentProp:function setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e;},parse:function parse(t){this.currentIndent=0,this.allNodes=new s(),this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=t.split("\\n");for(var n in e){var i=e[n];if(!i.match(/^[\\s\\t]*;/)&&!i.match(/^[\\s\\t]*$/)){var r=new RegExp("^\\\\t{"+this.currentIndent+"}(\\\\w+):(.*){",""),o=i.match(r);if(o){var a=o[1].trim().replace(/^"/,"").replace(/"$/,""),u=o[2].split(",").map(function(t){return t.trim().replace(/^"/,"").replace(/"$/,"");});this.parseNodeBegin(i,a,u||null);}else{var l=new RegExp("^\\\\t{"+this.currentIndent+"}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)"),o=i.match(l);if(o){var c=o[1].replace(/^"/,"").replace(/"$/,"").trim(),h=o[2].replace(/^"/,"").replace(/"$/,"").trim();this.parseNodeProperty(i,c,h);}else{var f=new RegExp("^\\\\t{"+(this.currentIndent-1)+"}}");i.match(f)?this.nodeEnd():i.match(/^[^\\s\\t}]/)&&this.parseNodePropertyContinued(i);}}}}return this.allNodes;},parseNodeBegin:function parseNodeBegin(t,e,n){var i={name:e,properties:{},subNodes:{}},r=this.parseNodeAttr(n),o=this.getCurrentNode();if(0===this.currentIndent)this.allNodes.add(e,i);else if(e in o.subNodes){var a=o.subNodes[e];this.isFlattenNode(o.subNodes[e])&&(""===r.id?(o.subNodes[e]=[],o.subNodes[e].push(a)):(o.subNodes[e]={},o.subNodes[e][a.id]=a)),""===r.id?o.subNodes[e].push(i):o.subNodes[e][r.id]=i;}else"number"==typeof r.id||r.id.match(/^\\d+$/)?(o.subNodes[e]={},o.subNodes[e][r.id]=i):o.subNodes[e]=i;n&&(i.id=r.id,i.attrName=r.name,i.attrType=r.type),this.pushStack(i);},parseNodeAttr:function parseNodeAttr(t){var e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));var n,i;return t.length>1&&(n=t[1].replace(/^(\\w+)::/,""),i=t[2]),{id:e,name:n||"",type:i||""};},parseNodeProperty:function parseNodeProperty(t,e,n){var i=this.getCurrentNode(),r=i.name;if(void 0!==r){var o=r.match(/Properties(\\d)+/);if(o)return void this.parseNodeSpecialProperty(t,e,n);}if("C"==e){var a=n.split(",").slice(1),s=parseInt(a[0]),u=parseInt(a[1]),l=n.split(",").slice(3);e="connections",n=[s,u],n=n.concat(l),void 0===i.properties[e]&&(i.properties[e]=[]);}if("Node"==e){var c=parseInt(n);i.properties.id=c,i.id=c;}e in i.properties?Array.isArray(i.properties[e])?i.properties[e].push(n):i.properties[e]+=n:Array.isArray(i.properties[e])?i.properties[e].push(n):i.properties[e]=n,this.setCurrentProp(i.properties,e);},parseNodePropertyContinued:function parseNodePropertyContinued(t){this.currentProp[this.currentPropName]+=t;},parseNodeSpecialProperty:function parseNodeSpecialProperty(t,e,n){var i=n.split(\'",\').map(function(t){return t.trim().replace(/^\\"/,"").replace(/\\s/,"_");}),r=i[0],o=i[1],s=i[2],u=i[3],l=i[4];switch(o){case"int":l=parseInt(l);break;case"double":l=parseFloat(l);break;case"ColorRGB":case"Vector3D":var c=l.split(",");l=new a.Vector3(c[0],c[1],c[2]);}this.getPrevNode().properties[r]={type:o,type2:s,flag:u,value:l},this.setCurrentProp(this.getPrevNode().properties,r);},nodeEnd:function nodeEnd(){this.popStack();},isFlattenNode:function isFlattenNode(t){return"subNodes"in t&&"properties"in t;}}),r(s.prototype,{add:function add(t,e){this[t]=e;},searchConnectionParent:function searchConnectionParent(t){if(void 0===this.__cache_search_connection_parent&&(this.__cache_search_connection_parent=[]),void 0!==this.__cache_search_connection_parent[t])return this.__cache_search_connection_parent[t];this.__cache_search_connection_parent[t]=[];for(var e=this.Connections.properties.connections,n=[],i=0;i<e.length;++i){if(e[i][0]==t){var r=0===e[i][1]?-1:e[i][1];n.push(r);}}return n.length>0?(this.__cache_search_connection_parent[t]=this.__cache_search_connection_parent[t].concat(n),n):(this.__cache_search_connection_parent[t]=[-1],[-1]);},searchConnectionChildren:function searchConnectionChildren(t){if(void 0===this.__cache_search_connection_children&&(this.__cache_search_connection_children=[]),void 0!==this.__cache_search_connection_children[t])return this.__cache_search_connection_children[t];this.__cache_search_connection_children[t]=[];for(var e=this.Connections.properties.connections,n=[],i=0;i<e.length;++i){e[i][1]==t&&n.push(0===e[i][0]?-1:e[i][0]);}return n.length>0?(this.__cache_search_connection_children[t]=this.__cache_search_connection_children[t].concat(n),n):(this.__cache_search_connection_children[t]=[],[]);},searchConnectionType:function searchConnectionType(t,e){var n=t+","+e;if(void 0===this.__cache_search_connection_type&&(this.__cache_search_connection_type={}),void 0!==this.__cache_search_connection_type[n])return this.__cache_search_connection_type[n];this.__cache_search_connection_type[n]="";for(var i=this.Connections.properties.connections,r=0;r<i.length;++r){if(i[r][0]==t&&i[r][1]==e)return this.__cache_search_connection_type[n]=i[r][2],i[r][2];}return this.__cache_search_connection_type[t]=null,null;}});}();},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r=n(2),o=i(r);o.MTLLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager;},o.MTLLoader.prototype={constructor:o.MTLLoader,load:function load(t,e,n,i){var r=this,a=new o.FileLoader(this.manager);a.setPath(this.path),a.load(t,function(t){e(r.parse(t));},n,i);},setPath:function setPath(t){this.path=t;},setTexturePath:function setTexturePath(t){this.texturePath=t;},setBaseUrl:function setBaseUrl(t){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t);},setCrossOrigin:function setCrossOrigin(t){this.crossOrigin=t;},setMaterialOptions:function setMaterialOptions(t){this.materialOptions=t;},parse:function parse(t){for(var e=t.split("\\n"),n={},i=/\\s+/,r={},a=0;a<e.length;a++){var s=e[a];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var u=s.indexOf(" "),l=u>=0?s.substring(0,u):s;l=l.toLowerCase();var c=u>=0?s.substring(u+1):"";if(c=c.trim(),"newmtl"===l)n={name:c},r[c]=n;else if(n)if("ka"===l||"kd"===l||"ks"===l){var h=c.split(i,3);n[l]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])];}else n[l]=c;}}var f=new o.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return f.setCrossOrigin(this.crossOrigin),f.setManager(this.manager),f.setMaterials(r),f;}},o.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:o.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:o.RepeatWrapping;},o.MTLLoader.MaterialCreator.prototype={constructor:o.MTLLoader.MaterialCreator,setCrossOrigin:function setCrossOrigin(t){this.crossOrigin=t;},setManager:function setManager(t){this.manager=t;},setMaterials:function setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={};},convert:function convert(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};e[n]=r;for(var o in i){var a=!0,s=i[o],u=o.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1);}a&&(r[u]=s);}}return e;},preload:function preload(){for(var t in this.materialsInfo){this.create(t);}},getIndex:function getIndex(t){return this.nameLookup[t];},getAsArray:function getAsArray(){var t=0;for(var e in this.materialsInfo){this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;}return this.materialsArray;},create:function create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t];},createMaterial_:function createMaterial_(t){function e(t,e){return"string"!=typeof e||""===e?"":/^https?:\\/\\//i.test(e)?e:t+e;}function n(t,n){if(!a[t]){var r=i.getTextureParams(n,a),o=i.loadTexture(e(i.baseUrl,r.url));o.repeat.copy(r.scale),o.offset.copy(r.offset),o.wrapS=i.wrap,o.wrapT=i.wrap,a[t]=o;}}var i=this,r=this.materialsInfo[t],a={name:t,side:this.side};for(var s in r){var u=r[s];if(""!==u)switch(s.toLowerCase()){case"kd":a.color=new o.Color().fromArray(u);break;case"ks":a.specular=new o.Color().fromArray(u);break;case"map_kd":n("map",u);break;case"map_ks":n("specularMap",u);break;case"map_bump":case"bump":n("bumpMap",u);break;case"ns":a.shininess=parseFloat(u);break;case"d":u<1&&(a.opacity=u,a.transparent=!0);break;case"Tr":u>0&&(a.opacity=1-u,a.transparent=!0);}}return this.materials[t]=new o.MeshPhongMaterial(a),this.materials[t];},getTextureParams:function getTextureParams(t,e){var n,i={scale:new o.Vector2(1,1),offset:new o.Vector2(0,0)},r=t.split(/\\s+/);return n=r.indexOf("-bm"),n>=0&&(e.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),n=r.indexOf("-s"),n>=0&&(i.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),n=r.indexOf("-o"),n>=0&&(i.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),i.url=r.join(" ").trim(),i;},loadTexture:function loadTexture(t,e,n,i,r){var a,s=o.Loader.Handlers.get(t),u=void 0!==this.manager?this.manager:o.DefaultLoadingManager;return null===s&&(s=new o.TextureLoader(u)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(t,n,i,r),void 0!==e&&(a.mapping=e),a;}};},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function r(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=function t(e,n,i,r){var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,i,r);}else if("value"in o&&o.writable)o.value=i;else{var s=o.set;void 0!==s&&s.call(r,i);}return i;},u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=n(2),c=function(t){function e(){i(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.type="MeshProxy",t._proxy=null;var n=t;return t._removedListener=function(){n.removeEventListener("removed",n._removedListener),n._proxy=null;},t.addEventListener("removed",t._removedListener),t;}return o(e,t),a(e,[{key:"addProxy",value:function value(t){this._proxy=t,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t);}},{key:"proxyPosition",get:function get(){return this._proxy?this._proxy.position:u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this);},set:function set(t){this._proxy?this._proxy.position=t:s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"positon",t,this);}},{key:"proxyRotation",get:function get(){return this._proxy?this._proxy.rotation:u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotation",this);},set:function set(t){this._proxy?this._proxy.rotation=t:s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rotation",t,this);}},{key:"proxyScale",get:function get(){return this._proxy?this._proxy.scale:u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"scale",this);},set:function set(t){this._proxy?this._proxy.scale=t:s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"scale",t,this);}}]),e;}(l.Group);e.default=c;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(2),s=i(a),u=function(){function t(e,n){var i=this;r(this,t);var o=e.context,a=e.state,u=null,l=null,c=null,h=null,f=null,d=void 0,p=new s.Vector3(),g=new s.Vector3();this.init=function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);u=o.createBuffer(),l=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,u),o.bufferData(o.ARRAY_BUFFER,t,o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e,o.STATIC_DRAW),c=i.createProgram(),h={position:o.getAttribLocation(c,"position"),uv:o.getAttribLocation(c,"uv")},f={uvOffset:o.getUniformLocation(c,"uvOffset"),uvScale:o.getUniformLocation(c,"uvScale"),rotation:o.getUniformLocation(c,"rotation"),scale:o.getUniformLocation(c,"scale"),offset:o.getUniformLocation(c,"offset"),anchor:o.getUniformLocation(c,"anchor"),color:o.getUniformLocation(c,"color"),map:o.getUniformLocation(c,"map"),opacity:o.getUniformLocation(c,"opacity"),modelViewMatrix:o.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:o.getUniformLocation(c,"projectionMatrix"),fogType:o.getUniformLocation(c,"fogType"),fogDensity:o.getUniformLocation(c,"fogDensity"),fogNear:o.getUniformLocation(c,"fogNear"),fogFar:o.getUniformLocation(c,"fogFar"),fogColor:o.getUniformLocation(c,"fogColor"),alphaTest:o.getUniformLocation(c,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),d=new s.Texture(n),d.needsUpdate=!0;},this.render=function(t,r){if(0!==n.length){c||i.init(),o.useProgram(c),a.initAttributes(),a.enableAttribute(h.position),a.enableAttribute(h.uv),a.disableUnusedAttributes(),a.disable(o.CULL_FACE),a.enable(o.BLEND),o.bindBuffer(o.ARRAY_BUFFER,u),o.vertexAttribPointer(h.position,2,o.FLOAT,!1,16,0),o.vertexAttribPointer(h.uv,2,o.FLOAT,!1,16,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l),o.uniformMatrix4fv(f.projectionMatrix,!1,r.projectionMatrix.elements),a.activeTexture(o.TEXTURE0),o.uniform1i(f.map,0);var v=0,m=0,y=t.fog;y?(o.uniform3f(f.fogColor,y.color.r,y.color.g,y.color.b),y instanceof s.Fog?(o.uniform1f(f.fogNear,y.near),o.uniform1f(f.fogFar,y.far),o.uniform1i(f.fogType,1),v=1,m=1):y instanceof s.FogExp2&&(o.uniform1f(f.fogDensity,y.density),o.uniform1i(f.fogType,2),v=2,m=2)):(o.uniform1i(f.fogType,0),v=0,m=0);for(var _=e.domElement.width,b=e.domElement.height,x=e.getPixelRatio(),w=[],E=0,S=n.length;E<S;E++){var M=n[E],C=M.material;if(C.visible){M.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,M.matrixWorld),o.uniform1f(f.alphaTest,C.alphaTest),o.uniformMatrix4fv(f.modelViewMatrix,!1,M.modelViewMatrix.elements),p.setFromMatrixPosition(M.modelViewMatrix),o.uniform3f(f.offset,p.x,p.y,p.z),C.materialScale?(w[0]=M.scale.x/_*(x+1),w[1]=M.scale.y/b*(x+1)):(w[0]=g.x,w[1]=g.y);var I=0;t.fog&&C.fog&&(I=m),v!==I&&(o.uniform1i(f.fogType,I),v=I),null!==C.map?(o.uniform2f(f.uvOffset,C.map.offset.x,C.map.offset.y),o.uniform2f(f.uvScale,C.map.repeat.x,C.map.repeat.y)):(o.uniform2f(f.uvOffset,0,0),o.uniform2f(f.uvScale,1,1)),o.uniform1f(f.opacity,C.opacity),o.uniform3f(f.color,C.color.r,C.color.g,C.color.b),o.uniform1f(f.rotation,C.rotation),C.anchor&&o.uniform2f(f.anchor,C.anchor[0],C.anchor[1]),o.uniform2fv(f.scale,w),a.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),a.buffers.depth.setTest(C.depthTest),a.buffers.depth.setMask(C.depthWrite),C.map?e.setTexture2D(C.map,0):e.setTexture2D(d,0),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0);}}e.resetGLState();}},this.createProgram=function(){var t=o.createProgram(),n=o.createShader(o.VERTEX_SHADER),i=o.createShader(o.FRAGMENT_SHADER),r=e.getPrecision(),a="precision "+r+" float;";return o.shaderSource(n,[a,"uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","uniform vec3 offset;","uniform vec2 anchor;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = vec2(position.x + (0.5 - anchor.x), position.y - (0.5 - anchor.y)) * scale;","vec4 basePosition = projectionMatrix * vec4(offset, 1.0);","vec4 finalPosition = vec4(basePosition.x / basePosition.w, basePosition.y / basePosition.w, basePosition.z / basePosition.w, 1.0);","finalPosition.xy += alignedPosition;","gl_Position = finalPosition;","}"].join("\\n")),o.shaderSource(i,[a,"uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\\n")),o.compileShader(n),o.compileShader(i),o.attachShader(t,n),o.attachShader(t,i),o.linkProgram(t),t;},this.painterSortStable=function(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id;};}return o(t,[{key:"getAABB",value:function value(){return"getAABB";}}]),t;}();e.default=u;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var r=n(2),o=i(r);o.OBJLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,normal_pattern:/^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,uv_pattern:/^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,face_vertex:/^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,face_vertex_uv:/^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,face_vertex_uv_normal:/^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,face_vertex_normal:/^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,object_pattern:/^[og]\\s*(.+)?/,smoothing_pattern:/^s\\s+(\\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /};},o.OBJLoader.prototype={constructor:o.OBJLoader,load:function load(t,e,n,i){var r=this,a=new o.FileLoader(r.manager);a.setPath(this.path),a.load(t,function(t){e(r.parse(t));},n,i);},setPath:function setPath(t){this.path=t;},setMaterials:function setMaterials(t){this.materials=t;},_createParserState:function _createParserState(){var t={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function startObject(t,e){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=e!==!1);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:e!==!1,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function startMaterial(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function clone(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e;}};return this.materials.push(i),i;},currentMaterial:function currentMaterial(){if(this.materials.length>0)return this.materials[this.materials.length-1];},_finalize:function _finalize(t){var e=this.currentMaterial();if(e&&e.groupEnd===-1&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--){this.materials[n].groupCount<=0&&this.materials.splice(n,1);}return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e;}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i);}this.objects.push(this.object);},finalize:function finalize(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0);},parseVertexIndex:function parseVertexIndex(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3);},parseNormalIndex:function parseNormalIndex(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3);},parseUVIndex:function parseUVIndex(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2);},addVertex:function addVertex(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0]),r.push(i[t+1]),r.push(i[t+2]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[e+2]),r.push(i[n+0]),r.push(i[n+1]),r.push(i[n+2]);},addVertexLine:function addVertexLine(t){var e=this.vertices,n=this.object.geometry.vertices;n.push(e[t+0]),n.push(e[t+1]),n.push(e[t+2]);},addNormal:function addNormal(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0]),r.push(i[t+1]),r.push(i[t+2]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[e+2]),r.push(i[n+0]),r.push(i[n+1]),r.push(i[n+2]);},addUV:function addUV(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0]),r.push(i[t+1]),r.push(i[e+0]),r.push(i[e+1]),r.push(i[n+0]),r.push(i[n+1]);},addUVLine:function addUVLine(t){var e=this.uvs,n=this.object.geometry.uvs;n.push(e[t+0]),n.push(e[t+1]);},addFace:function addFace(t,e,n,i,r,o,a,s,u,l,c,h){var f,d=this.vertices.length,p=this.parseVertexIndex(t,d),g=this.parseVertexIndex(e,d),v=this.parseVertexIndex(n,d);if(void 0===i?this.addVertex(p,g,v):(f=this.parseVertexIndex(i,d),this.addVertex(p,g,f),this.addVertex(g,v,f)),void 0!==r){var m=this.uvs.length;p=this.parseUVIndex(r,m),g=this.parseUVIndex(o,m),v=this.parseUVIndex(a,m),void 0===i?this.addUV(p,g,v):(f=this.parseUVIndex(s,m),this.addUV(p,g,f),this.addUV(g,v,f));}if(void 0!==u){var y=this.normals.length;p=this.parseNormalIndex(u,y),g=u===l?p:this.parseNormalIndex(l,y),v=u===c?p:this.parseNormalIndex(c,y),void 0===i?this.addNormal(p,g,v):(f=this.parseNormalIndex(h,y),this.addNormal(p,g,f),this.addNormal(g,v,f));}},addLineGeometry:function addLineGeometry(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++){this.addVertexLine(this.parseVertexIndex(t[r],n));}for(var a=0,o=e.length;a<o;a++){this.addUVLine(this.parseUVIndex(e[a],i));}}};return t.startObject("",!1),t;},parse:function parse(t){console.time("OBJLoader");var e=this._createParserState();t.indexOf("\\r\\n")!==-1&&(t=t.replace(/\\r\\n/g,"\\n")),t.indexOf("\\\\\\n")!==-1&&(t=t.replace(/\\\\\\n/g,""));for(var n=t.split("\\n"),i="",r="",a="",s=0,u=[],l="function"==typeof"".trimLeft,c=0,h=n.length;c<h;c++){if(i=n[c],i=l?i.trimLeft():i.trim(),s=i.length,0!==s&&(r=i.charAt(0),"#"!==r))if("v"===r){if(a=i.charAt(1)," "===a&&null!==(u=this.regexp.vertex_pattern.exec(i)))e.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));else if("n"===a&&null!==(u=this.regexp.normal_pattern.exec(i)))e.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));else{if("t"!==a||null===(u=this.regexp.uv_pattern.exec(i)))throw new Error("Unexpected vertex/normal/uv line: \'"+i+"\'");e.uvs.push(parseFloat(u[1]),parseFloat(u[2]));}}else if("f"===r){if(null!==(u=this.regexp.face_vertex_uv_normal.exec(i)))e.addFace(u[1],u[4],u[7],u[10],u[2],u[5],u[8],u[11],u[3],u[6],u[9],u[12]);else if(null!==(u=this.regexp.face_vertex_uv.exec(i)))e.addFace(u[1],u[3],u[5],u[7],u[2],u[4],u[6],u[8]);else if(null!==(u=this.regexp.face_vertex_normal.exec(i)))e.addFace(u[1],u[3],u[5],u[7],void 0,void 0,void 0,void 0,u[2],u[4],u[6],u[8]);else{if(null===(u=this.regexp.face_vertex.exec(i)))throw new Error("Unexpected face line: \'"+i+"\'");e.addFace(u[1],u[2],u[3],u[4]);}}else if("l"===r){var f=i.substring(1).trim().split(" "),d=[],p=[];if(i.indexOf("/")===-1)d=f;else for(var g=0,v=f.length;g<v;g++){var m=f[g].split("/");""!==m[0]&&d.push(m[0]),""!==m[1]&&p.push(m[1]);}e.addLineGeometry(d,p);}else if(null!==(u=this.regexp.object_pattern.exec(i))){var y=(" "+u[0].substr(1).trim()).substr(1);e.startObject(y);}else if(this.regexp.material_use_pattern.test(i))e.object.startMaterial(i.substring(7).trim(),e.materialLibraries);else if(this.regexp.material_library_pattern.test(i))e.materialLibraries.push(i.substring(7).trim());else{if(null===(u=this.regexp.smoothing_pattern.exec(i))){if("\\0"===i)continue;throw new Error("Unexpected line: \'"+i+"\'");}var _=u[1].trim().toLowerCase();e.object.smooth="1"===_||"on"===_;var b=e.object.currentMaterial();b&&(b.smooth=e.object.smooth);}}e.finalize();var x=new o.Group();x.materialLibraries=[].concat(e.materialLibraries);for(var c=0,h=e.objects.length;c<h;c++){var w=e.objects[c],E=w.geometry,S=w.materials,M="Line"===E.type;if(0!==E.vertices.length){var C=new o.BufferGeometry();C.addAttribute("position",new o.BufferAttribute(new Float32Array(E.vertices),3)),E.normals.length>0?C.addAttribute("normal",new o.BufferAttribute(new Float32Array(E.normals),3)):C.computeVertexNormals(),E.uvs.length>0&&C.addAttribute("uv",new o.BufferAttribute(new Float32Array(E.uvs),2));for(var I=[],O=0,T=S.length;O<T;O++){var P=S[O],b=void 0;if(null!==this.materials&&(b=this.materials.create(P.name),M&&b&&!(b instanceof o.LineBasicMaterial))){var A=new o.LineBasicMaterial();A.copy(b),b=A;}b||(b=M?new o.LineBasicMaterial():new o.MeshPhongMaterial(),b.name=P.name),b.shading=P.smooth?o.SmoothShading:o.FlatShading,I.push(b);}var L;if(I.length>1){for(var O=0,T=S.length;O<T;O++){var P=S[O];C.addGroup(P.groupStart,P.groupCount,O);}L=M?new o.LineSegments(C,I):new o.Mesh(C,I);}else L=M?new o.LineSegments(C,I[0]):new o.Mesh(C,I[0]);L.name=w.name,x.add(L);}}return console.timeEnd("OBJLoader"),x;}};},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t){return!isNaN(t)&&isFinite(t);}function a(t){return"[object Array]"===Object.prototype.toString.call(t);}function s(t){return t?a(t)!==!0?[t]:t:[];}function u(t,e){for(var n in t){if(t[n]===e)return n;}return-1;}function l(t,e,n){for(var i in t){if(t[i][e]===n)return i;}return-1;}Object.defineProperty(e,"__esModule",{value:!0}),e.RaycasterUtils=e.Octree=void 0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),h=n(2),f=i(h),d=null,p=function(){function t(e,n){r(this,t),this.object=e,n instanceof f.Face3?(this.faces=n,this.face3=!0,this.utilVec31FaceBounds=new f.Vector3()):n instanceof f.Vector3&&(this.vertices=n),this.radius=0,this.position=new f.Vector3(),this.object instanceof f.Object3D&&this.update(),this.positionLast=this.position.clone();}return c(t,[{key:"update",value:function value(){this.face3?(this.radius=this.getFace3BoundingRadius(this.object,this.faces),this.position.copy(this.faces.centroid).applyMatrix4(this.object.matrixWorld)):this.vetices?(this.radius=this.object.material.size||1,this.position.copy(this.vertices).applyMatrix4(this.object.matrixWorld)):this.object.geometry?(null===this.object.geometry.boundingSphere&&this.object.geometry.computeBoundingSphere(),this.radius=this.object.geometry.boundingSphere.radius,this.position.copy(this.object.geometry.boundingSphere.center).applyMatrix4(this.object.matrixWorld)):(this.radius=this.object.boundRadius,this.position.setFromMatrixPosition(this.object.matrixWorld)),this.radius=this.radius*Math.max(this.object.scale.x,this.object.scale.y,this.object.scale.z);}},{key:"getFace3BoundingRadius",value:function value(t,e){"undefined"==typeof e.centroid&&(e.centroid=new f.Vector3());var n=t.geometry||t,i=n.vertices,r=e.centroid,o=i[e.a],a=i[e.b],s=i[e.c],u=this.utilVec31FaceBounds;return r.addVectors(o,a).add(s).divideScalar(3),Math.max(u.subVectors(r,o).length(),u.subVectors(r,a).length(),u.subVectors(r,s).length());}}]),t;}(),g=function(){function t(e){r(this,t),this.utilVec31Branch=new f.Vector3(),this.utilVec31Expand=new f.Vector3(),this.utilVec31Ray=new f.Vector3();var n=e||{};n.tree instanceof d?this.tree=n.tree:n.parent instanceof t!=!0&&(n.root=this,this.tree=new d(n)),this.id=this.tree.nodeCount++,this.position=n.position instanceof f.Vector3?n.position:new f.Vector3(),this.radius=n.radius>0?n.radius:1,this.indexOctant=n.indexOctant,this.depth=0,this.reset(),this.setParent(n.parent),this.overlap=this.radius*this.tree.overlapPct,this.radiusOverlap=this.radius+this.overlap,this.left=this.position.x-this.radiusOverlap,this.right=this.position.x+this.radiusOverlap,this.bottom=this.position.y-this.radiusOverlap,this.top=this.position.y+this.radiusOverlap,this.back=this.position.z-this.radiusOverlap,this.front=this.position.z+this.radiusOverlap,this.tree.scene&&(this.visual=new f.Mesh(this.tree.visualGeometry,this.tree.visualMaterial),this.visual.scale.set(2*this.radiusOverlap,2*this.radiusOverlap,2*this.radiusOverlap),this.visual.position.copy(this.position),this.tree.scene.add(this.visual));}return c(t,[{key:"setParent",value:function value(t){t!==this&&this.parent!==t&&(this.parent=t,this.updateProperties());}},{key:"updateProperties",value:function value(){this.parent instanceof t?(this.tree=this.parent.tree,this.depth=this.parent.depth+1):this.depth=0;for(var e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;this.nodesByIndex[o].updateProperties();}}},{key:"reset",value:function value(t,e){var n=this.nodesIndices||[],i=this.nodesByIndex;this.objects=[],this.nodesIndices=[],this.nodesByIndex={};for(var r=n,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s,l=i[u];l.setParent(),t===!0&&l.reset(t,e);}e===!0&&this.visual&&this.visual.parent&&this.visual.parent.remove(this.visual);}},{key:"addNode",value:function value(t,e){t.indexOctant=e,u(this.nodesIndices,e)===-1&&this.nodesIndices.push(e),this.nodesByIndex[e]=t,t.parent!==this&&t.setParent(this);}},{key:"removeNode",value:function value(t){var e=u(this.nodesIndices,t),n=this.nodesByIndex[t];this.nodesIndices.splice(e,1),delete this.nodesByIndex[t],n&&n.parent===this&&n.setParent();}},{key:"addObject",value:function value(e){var n=this.getOctantIndex(e);if(n>-1&&this.nodesIndices.length>0){var i=this.branch(n);i.addObject(e);}else if(n<-1&&this.parent instanceof t)this.parent.addObject(e);else{var r=u(this.objects,e);r===-1&&this.objects.push(e),e.node=this,this.checkGrow();}}},{key:"addObjectWithoutCheck",value:function value(t){for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;this.objects.push(o),o.node=this;}}},{key:"removeObject",value:function value(t){var e=this.removeObjectRecursive(t,{searchComplete:!1,nodesRemovedFrom:[],objectsDataRemoved:[]}),n=e.nodesRemovedFrom;if(n.length>0)for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;s.shrink();}return e.objectsDataRemoved;}},{key:"removeObjectRecursive",value:function value(t,e){var n=void 0;if(t instanceof p){var i=u(this.objects,t);i!==-1&&(this.objects.splice(i,1),delete t.node,e.objectsDataRemoved.push(t),e.searchComplete=n=!0);}else for(var r=this.objects.length-1;r>=0;r--){var o=this.objects[r];if(o.object===t&&(this.objects.splice(r,1),delete o.node,e.objectsDataRemoved.push(o),n=!0,!o.faces&&!o.vertices)){e.searchComplete=!0;break;}}if(n===!0&&e.nodesRemovedFrom.push(this),e.searchComplete!==!0)for(var a=this.nodesIndices,s=Array.isArray(a),l=0,a=s?a:a[Symbol.iterator]();;){var c;if(s){if(l>=a.length)break;c=a[l++];}else{if(l=a.next(),l.done)break;c=l.value;}var h=c,f=this.nodesByIndex[h];if(e=f.removeObjectRecursive(t,e),e.searchComplete===!0)break;}return e;}},{key:"checkGrow",value:function value(){this.objects.length>this.tree.objectsThreshold&&this.tree.objectsThreshold>0&&this.grow();}},{key:"grow",value:function value(){for(var t=[],e=[],n=[],i=[],r=[],o=this.objects,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++];}else{if(s=o.next(),s.done)break;u=s.value;}var l=u,c=this.getOctantIndex(l);c>-1?(n.push(l),i.push(c)):c<-1?(t.push(l),e.push(c)):r.push(l);}n.length>0&&(r=r.concat(this.split(n,i))),t.length>0&&(r=r.concat(this.expand(t,e))),this.objects=r,this.checkMerge();}},{key:"split",value:function value(t,e){var n=void 0;if(this.depth<this.tree.depthMax){var i=t||this.objects,r=e||[];n=[];for(var o=0;o<i.length;o++){var a=i[o],s=r[o];if(s>-1){var u=this.branch(s);u.addObject(a);}else n.push(a);}i===this.objects&&(this.objects=n);}else n=this.objects;return n;}},{key:"branch",value:function value(e){var n=void 0;if(this.nodesByIndex[e]instanceof t)n=this.nodesByIndex[e];else{var i=.5*this.radiusOverlap,r=i*this.tree.overlapPct,o=i-r,a=this.utilVec31Branch.set(1&e?o:-o,2&e?o:-o,4&e?o:-o),s=new f.Vector3().addVectors(this.position,a);n=new t({tree:this.tree,parent:this,position:s,radius:i,indexOctant:e}),this.addNode(n,e);}return n;}},{key:"expand",value:function value(e,n){var i=void 0;if(this.tree.root.getDepthEnd()<this.tree.depthMax){var r=this.tree.INDEX_OUTSIDE_MAP,o=this.utilVec31Expand,a=[];e=e||this.objects,n=n||[],i=[];for(var s=r,u=Array.isArray(s),l=0,s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++];}else{if(l=s.next(),l.done)break;c=l.value;}var h=c;h.count=0;}for(var d=0;d<e.length;d++){var p=e[d],g=n[d];if(g<-1){var v=-g-this.tree.INDEX_OUTSIDE_OFFSET;v&this.tree.FLAG_POS_X?r[this.tree.INDEX_OUTSIDE_POS_X].count++:v&this.tree.FLAG_NEG_X&&r[this.tree.INDEX_OUTSIDE_NEG_X].count++,v&this.tree.FLAG_POS_Y?r[this.tree.INDEX_OUTSIDE_POS_Y].count++:v&this.tree.FLAG_NEG_Y&&r[this.tree.INDEX_OUTSIDE_NEG_Y].count++,v&this.tree.FLAG_POS_Z?r[this.tree.INDEX_OUTSIDE_POS_Z].count++:v&this.tree.FLAG_NEG_Z&&r[this.tree.INDEX_OUTSIDE_NEG_Z].count++,a.push(p);}else i.push(p);}if(a.length>0){var m=r.slice(0);m.sort(function(t,e){return e.count-t.count;});var y=void 0,_=void 0,b=void 0,x=m[0],w=1|x.index;_=m[1],b=m[2];var E=(1|_.index)!==w?_:b,S=1|E.index;_=m[2],b=m[3];var M=m[4],C=1|_.index,I=1|b.index;y=C!==w&&C!==S?_:I!==w&&I!==S?b:M;var O=x.x+E.x+y.x,T=x.y+E.y+y.y,P=x.z+E.z+y.z,A=this.getOctantIndexFromPosition(O,T,P),L=this.getOctantIndexFromPosition(-O,-T,-P),N=this.overlap,k=this.radius,R=this.tree.overlapPct>0?N/(.5*this.tree.overlapPct*(1+this.tree.overlapPct)):2*k,D=R*this.tree.overlapPct,F=R+D-(k+N);o.set(1&A?F:-F,2&A?F:-F,4&A?F:-F);var B=new f.Vector3().addVectors(this.position,o),j=new t({tree:this.tree,position:B,radius:R});j.addNode(this,L),this.tree.setRoot(j);for(var U=a,z=Array.isArray(U),G=0,U=z?U:U[Symbol.iterator]();;){var V;if(z){if(G>=U.length)break;V=U[G++];}else{if(G=U.next(),G.done)break;V=G.value;}var X=V;this.tree.root.addObject(X);}}e===this.objects&&(this.objects=i);}else i=e;return i;}},{key:"shrink",value:function value(){this.checkMerge(),this.tree.root.checkContract();}},{key:"checkMerge",value:function value(){for(var e=this,n=void 0;e.parent instanceof t&&e.getObjectCountEnd()<this.tree.objectsThreshold;){n=e,e=e.parent;}e!==this&&e.merge(n);}},{key:"merge",value:function value(t){t=s(t);for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;this.addObjectWithoutCheck(o.getObjectsEnd()),o.reset(!0,!0),this.removeNode(o.indexOctant,o);}this.checkMerge();}},{key:"checkContract",value:function value(){if(this.nodesIndices.length>0){for(var e=0,n=this.objects.length,i=void 0,r=this.nodesIndices,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s,l=this.nodesByIndex[u],c=l.getObjectCountEnd();n+=c,(i instanceof t==!1||c>e)&&(i=l,e=c);}n-=e,n<this.tree.objectsThreshold&&i instanceof t&&this.contract(i);}}},{key:"contract",value:function value(t){for(var e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r,a=this.nodesByIndex[o];a!==t&&(t.addObjectWithoutCheck(a.getObjectsEnd()),a.reset(!0,!0));}t.addObjectWithoutCheck(this.objects),this.reset(!1,!0),this.tree.setRoot(t),t.checkContract();}},{key:"getOctantIndex",value:function value(e){var n=void 0,i=void 0;e instanceof p?(i=e.radius,n=e.position,e.positionLast.copy(n)):e instanceof t&&(n=e.position,i=0);var r=this.position,o=n.x-r.x,a=n.y-r.y,s=n.z-r.z,u=Math.abs(o),l=Math.abs(a),c=Math.abs(s),h=Math.max(u,l,c),f=this.radiusOverlap,d=0;if(h+i>f)return u+i>f&&(d^=o>0?this.tree.FLAG_POS_X:this.tree.FLAG_NEG_X),l+i>f&&(d^=a>0?this.tree.FLAG_POS_Y:this.tree.FLAG_NEG_Y),c+i>f&&(d^=s>0?this.tree.FLAG_POS_Z:this.tree.FLAG_NEG_Z),e.indexOctant=-d-this.tree.INDEX_OUTSIDE_OFFSET,e.indexOctant;var g=this.overlap;if(o-i>-g)d|=1;else if(!(o+i<g))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;if(a-i>-g)d|=2;else if(!(a+i<g))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;if(s-i>-g)d|=4;else if(!(s+i<g))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;return e.indexOctant=d,e.indexOctant;}},{key:"getOctantIndexFromPosition",value:function value(t,e,n){var i=0;return t>0&&(i|=1),e>0&&(i|=2),n>0&&(i|=4),i;}},{key:"search",value:function value(t,e,n,i,r){var o=void 0;if(o=i?this.intersectRay(t,i,e,r):this.intersectSphere(t,e),o===!0){n=n.concat(this.objects);for(var a=this.nodesIndices,s=Array.isArray(a),u=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(u>=a.length)break;l=a[u++];}else{if(u=a.next(),u.done)break;l=u.value;}var c=l,h=this.nodesByIndex[c];n=h.search(t,e,n,i);}}return n;}},{key:"intersectSphere",value:function value(t,e){var n=t.x,i=t.y,r=t.z,o=e*e;return n<this.left?o-=Math.pow(n-this.left,2):n>this.right&&(o-=Math.pow(n-this.right,2)),i<this.bottom?o-=Math.pow(i-this.bottom,2):i>this.top&&(o-=Math.pow(i-this.top,2)),r<this.back?o-=Math.pow(r-this.back,2):r>this.front&&(o-=Math.pow(r-this.front,2)),o>=0;}},{key:"intersectRay",value:function value(t,e,n,i){"undefined"==typeof i&&(i=this.utilVec31Ray.set(1,1,1).divide(e));var r=(this.left-t.x)*i.x,o=(this.right-t.x)*i.x,a=(this.bottom-t.y)*i.y,s=(this.top-t.y)*i.y,u=(this.back-t.z)*i.z,l=(this.front-t.z)*i.z,c=Math.min(Math.min(Math.max(r,o),Math.max(a,s)),Math.max(u,l));if(c<0)return!1;var h=Math.max(Math.max(Math.min(r,o),Math.min(a,s)),Math.min(u,l));return!(h>c||h>n);}},{key:"getDepthEnd",value:function value(t){if(this.nodesIndices.length>0)for(var e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r,a=this.nodesByIndex[o];t=a.getDepthEnd(t);}else t=!t||this.depth>t?this.depth:t;return t;}},{key:"getNodeCountEnd",value:function value(){return this.tree.root.getNodeCountRecursive()+1;}},{key:"getNodeCountRecursive",value:function value(){for(var t=this.nodesIndices.length,e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;t+=this.nodesByIndex[o].getNodeCountRecursive();}return t;}},{key:"getObjectsEnd",value:function value(t){t=(t||[]).concat(this.objects);for(var e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r,a=this.nodesByIndex[o];t=a.getObjectsEnd(t);}return t;}},{key:"getObjectCountEnd",value:function value(){for(var t=this.objects.length,e=this.nodesIndices,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;t+=this.nodesByIndex[o].getObjectCountEnd();}return t;}},{key:"getObjectCountStart",value:function value(){for(var e=this.objects.length,n=this.parent;n instanceof t;){e+=n.objects.length,n=n.parent;}return e;}},{key:"toConsole",value:function value(t){var e="   ";t="string"==typeof t?t:e,console.log(this.parent?t+" octree NODE > ":" octree ROOT > ",this," // id: ",this.id," // indexOctant: ",this.indexOctant," // position: ",this.position.x,this.position.y,this.position.z," // radius: ",this.radius," // depth: ",this.depth),console.log(this.parent?t+" ":" ","+ objects ( ",this.objects.length," ) ",this.objects),console.log(this.parent?t+" ":" ","+ children ( ",this.nodesIndices.length," )",this.nodesIndices,this.nodesByIndex);for(var n=this.nodesIndices,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o,s=this.nodesByIndex[a];s.toConsole(t+e);}}}]),t;}(),v=function(){function t(e){r(this,t);var n=e||{};n.tree=this,this.nodeCount=0,this.INDEX_INSIDE_CROSS=-1,this.INDEX_OUTSIDE_OFFSET=2,this.INDEX_OUTSIDE_POS_X=o(n.INDEX_OUTSIDE_POS_X)?n.INDEX_OUTSIDE_POS_X:0,this.INDEX_OUTSIDE_NEG_X=o(n.INDEX_OUTSIDE_NEG_X)?n.INDEX_OUTSIDE_NEG_X:1,this.INDEX_OUTSIDE_POS_Y=o(n.INDEX_OUTSIDE_POS_Y)?n.INDEX_OUTSIDE_POS_Y:2,this.INDEX_OUTSIDE_NEG_Y=o(n.INDEX_OUTSIDE_NEG_Y)?n.INDEX_OUTSIDE_NEG_Y:3,this.INDEX_OUTSIDE_POS_Z=o(n.INDEX_OUTSIDE_POS_Z)?n.INDEX_OUTSIDE_POS_Z:4,this.INDEX_OUTSIDE_NEG_Z=o(n.INDEX_OUTSIDE_NEG_Z)?n.INDEX_OUTSIDE_NEG_Z:5,this.INDEX_OUTSIDE_MAP=[],this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_X]={index:this.INDEX_OUTSIDE_POS_X,count:0,x:1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_X]={index:this.INDEX_OUTSIDE_NEG_X,count:0,x:-1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Y]={index:this.INDEX_OUTSIDE_POS_Y,count:0,x:0,y:1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Y]={index:this.INDEX_OUTSIDE_NEG_Y,count:0,x:0,y:-1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Z]={index:this.INDEX_OUTSIDE_POS_Z,count:0,x:0,y:0,z:1},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Z]={index:this.INDEX_OUTSIDE_NEG_Z,count:0,x:0,y:0,z:-1},this.FLAG_POS_X=1<<this.INDEX_OUTSIDE_POS_X+1,this.FLAG_NEG_X=1<<this.INDEX_OUTSIDE_NEG_X+1,this.FLAG_POS_Y=1<<this.INDEX_OUTSIDE_POS_Y+1,this.FLAG_NEG_Y=1<<this.INDEX_OUTSIDE_NEG_Y+1,this.FLAG_POS_Z=1<<this.INDEX_OUTSIDE_POS_Z+1,this.FLAG_NEG_Z=1<<this.INDEX_OUTSIDE_NEG_Z+1,this.utilVec31Search=new f.Vector3(),this.utilVec32Search=new f.Vector3(),this.scene=n.scene,this.scene&&(this.visualGeometry=new f.BoxGeometry(1,1,1),this.visualMaterial=new f.MeshBasicMaterial({color:16711782,wireframe:!0,wireframeLinewidth:1})),this.objects=[],this.objectsMap={},this.objectsData=[],this.objectsDeferred=[],this.depthMax=o(n.depthMax)?n.depthMax:1/0,this.objectsThreshold=o(n.objectsThreshold)?n.objectsThreshold:8,this.overlapPct=o(n.overlapPct)?n.overlapPct:.15,this.undeferred=n.undeferred||!1,this.root=n.root instanceof g?n.root:new g(n);}return c(t,[{key:"update",value:function value(){if(this.objectsDeferred.length>0){for(var t=this.objectsDeferred,e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(n>=t.length)break;i=t[n++];}else{if(n=t.next(),n.done)break;i=n.value;}var r=i;this.addDeferred(r.object,r.options);}this.objectsDeferred.length=0;}}},{key:"add",value:function value(t,e){this.undeferred?(this.updateObject(t),this.addDeferred(t,e)):this.objectsDeferred.push({object:t,options:e});}},{key:"addDeferred",value:function value(t,e){var n=void 0,i=void 0,r=void 0;if(t instanceof p&&(t=t.object),t.uuid||(t.uuid=f.Math.generateUUID()),!this.objectsMap[t.uuid])if(this.objects.push(t),this.objectsMap[t.uuid]=t,e&&(i=e.useFaces,r=e.useVertices),r===!0){n=t.geometry;for(var o=n.vertices,a=o,s=Array.isArray(a),u=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(u>=a.length)break;l=a[u++];}else{if(u=a.next(),u.done)break;l=u.value;}var c=l;this.addObjectData(t,c);}}else if(i===!0){n=t.geometry;for(var h=n.faces,d=h,g=Array.isArray(d),v=0,d=g?d:d[Symbol.iterator]();;){var m;if(g){if(v>=d.length)break;m=d[v++];}else{if(v=d.next(),v.done)break;m=v.value;}var y=m;this.addObjectData(t,y);}}else this.addObjectData(t);}},{key:"addObjectData",value:function value(t,e){var n=new p(t,e);this.objectsData.push(n),this.root.addObject(n);}},{key:"remove",value:function value(t){var e=void 0,n=void 0;if(t instanceof p&&(t=t.object),this.objectsMap[t.uuid]){if(delete this.objectsMap[t.uuid],e=u(this.objects,t),e!==-1){this.objects.splice(e,1),n=this.root.removeObject(t);for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;e=u(this.objectsData,s),e!==-1&&this.objectsData.splice(e,1);}}}else this.objectsDeferred.length>0&&(e=l(this.objectsDeferred,"object",t),e!==-1&&this.objectsDeferred.splice(e,1));}},{key:"extend",value:function value(e){if(e instanceof t)for(var n=e.objectsData,i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;this.add(s,{useFaces:s.faces,useVertices:s.vertices});}}},{key:"rebuild",value:function value(){for(var t=[],e=this.objectsData,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r,a=o.node;if(o.update(),a instanceof g&&!o.positionLast.equals(o.position)){var s=o.indexOctant,u=a.getOctantIndex(o);u!==s&&t.push(o);}}for(var l=t,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var d=f;d.node.removeObject(d),this.root.addObject(d);}}},{key:"updateObject",value:function value(t){for(var e=[t],n=t.parent,i=void 0;n;){e.push(n),n=n.parent;}for(var r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;u.matrixWorldNeedsUpdate===!0&&(i=u);}"undefined"!=typeof i&&i.updateMatrixWorld();}},{key:"setRoot",value:function value(t){t instanceof g&&(this.root=t,this.root.updateProperties());}},{key:"search",value:function value(t,e,n,i){var r=void 0,o=void 0,a=void 0;r=[].concat(this.root.objects),e>0||(e=Number.MAX_VALUE),i instanceof f.Vector3&&(i=this.utilVec31Search.copy(i).normalize(),a=this.utilVec32Search.set(1,1,1).divide(i));for(var s=this.root.nodesIndices,l=Array.isArray(s),c=0,s=l?s:s[Symbol.iterator]();;){var h;if(l){if(c>=s.length)break;h=s[c++];}else{if(c=s.next(),c.done)break;h=c.value;}var d=h,p=this.root.nodesByIndex[d];r=p.search(t,e,r,i,a);}if(n===!0){var g=[];o=[];for(var v=r,m=Array.isArray(v),y=0,v=m?v:v[Symbol.iterator]();;){var _;if(m){if(y>=v.length)break;_=v[y++];}else{if(y=v.next(),y.done)break;_=y.value;}var b=_,x=b.object,w=u(g,x),E=void 0;w===-1?(E={object:x,faces:[],vertices:[]},o.push(E),g.push(x)):E=o[w],b.faces?E.faces.push(b.faces):b.vertices&&E.vertices.push(b.vertices);}}else o=r;return o;}},{key:"getDepthEnd",value:function value(){return this.root.getDepthEnd();}},{key:"getNodeCountEnd",value:function value(){return this.root.getNodeCountEnd();}},{key:"getObjectCountEnd",value:function value(){return this.root.getObjectCountEnd();}},{key:"toConsole",value:function value(){this.root.toConsole();}}]),t;}();d=v;var m=function(){function t(){r(this,t);}return c(t,null,[{key:"intersectOctreeObject",value:function value(t,e,n){var i=void 0;if(e.object instanceof f.Object3D){var r=e,o=e.object,a=r.faces,s=o.geometry.faces;a.length>0&&(o.geometry.faces=a),i=t.intersectObject(o,n),a.length>0&&(o.geometry.faces=s);}else i=t.intersectObject(e,n);return i;}},{key:"intersectOctreeObjects",value:function value(e,n,i){for(var r=[],o=function o(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0;},a=n,s=Array.isArray(a),u=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(u>=a.length)break;l=a[u++];}else{if(u=a.next(),u.done)break;l=u.value;}var c=l;r=r.concat(t.intersectOctreeObject(e,c,i));}return r.sort(o);}}]),t;}();e.Octree=v,e.RaycasterUtils=m;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e,n){var i,r,o=1,a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=a*a+s*s,f=a*c-s*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(l*l+c*c),g=e.x-s/d,v=e.y+a/d,m=n.x-c/p,y=n.y+l/p,_=((m-g)*c-(y-v)*l)/(a*c-s*l);i=g+a*_-t.x,r=v+s*_-t.y;var b=i*i+r*r;if(b<=2)return new u.Vector2(i,r);o=Math.sqrt(b/2);}else{var x=!1;a>Number.EPSILON?l>Number.EPSILON&&(x=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(c)&&(x=!0),x?(i=-s,r=a,o=Math.sqrt(h)):(i=a,r=s,o=Math.sqrt(h/2));}return new u.Vector2(i/o,r/o);}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(2),u=i(s),l=function(){function t(){r(this,t);}return a(t,null,[{key:"createExpandedPointsGeometry",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,r=t.extractPoints(i).shape,a=!u.ShapeUtils.isClockWise(r),s=r.length,l=new u.Geometry();a&&(r=r.reverse(),a=!1),(t.autoClose||r[0].equals(r[s-1]))&&(r.pop(),s--);for(var c=0;c<s;c++){var h=(c-1+s)%s,f=(c+1)%s,d=o(r[c],r[h],r[f]),p=e*Math.sin(n*Math.PI/2),g=d.clone().multiplyScalar(p).add(r[c]);l.vertices.push(new u.Vector3(g.x,g.y,0));}return l.vertices.push(l.vertices[0].clone()),l;}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(2),l=i(u),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"getAABB",value:function value(t){var e=new l.Vector3(0,0,0),n=this.margin||0,i=this.scale,r=i.x/2,o=i.y/2,a=[],s=this.matrixWorld,u=this.material.anchor,c=0,h=0;return e.setFromMatrixPosition(s),e=t.toScreenCoordinate(e.x,e.y,e.z),u&&(c=r-i.x*u[0],h=o-i.y*u[1],e.setX(e.x+c),e.setY(e.y+h)),a.push(e.x-r-n),a.push(e.y-o-n),a.push(0),a.push(e.x+r+n),a.push(e.y+o+n),a.push(0),a;}},{key:"makeCollision",value:function value(t){return this.visible=!t,this.material.opacity=this.destOpacity?this.destOpacity:1,this;}}]),e;}(l.Sprite);e.default=c;},function(t,e,n){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},n=function t(){function e(t){return r.appendChild(t.dom),t;}function n(t){for(var e=0;e<r.children.length;e++){r.children[e].style.display=e===t?"block":"none";}i=t;}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(t){t.preventDefault(),n(++i%r.children.length);},!1);var o=(performance||Date).now(),a=o,s=0,u=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:e,showPanel:n,begin:function begin(){o=(performance||Date).now();},end:function end(){s++;var t=(performance||Date).now();if(l.update(t-o,200),t>a+1e3&&(u.update(1e3*s/(t-a),100),a=t,s=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576);}return t;},update:function update(){o=this.end();},domElement:r,setMode:n};};n.Panel=function(t,e,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,l=3*a,c=2*a,h=3*a,f=15*a,d=74*a,p=30*a,g=document.createElement("canvas");g.width=s,g.height=u,g.style.cssText="width:80px;height:48px";var v=g.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,u),v.fillStyle=e,v.fillText(t,l,c),v.fillRect(h,f,d,p),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,f,d,p),{dom:g,update:function update(u,m){i=Math.min(i,u),r=Math.max(r,u),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,f),v.fillStyle=e,v.fillText(o(u)+" "+t+" ("+o(i)+"-"+o(r)+")",l,c),v.drawImage(g,h+a,f,d-a,p,h,f,d-a,p),v.fillRect(h+d-a,f,a,p),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+d-a,f,a,o((1-u/m)*p));}};},"object"===e(t)&&(t.exports=n);}).call(e,n(37)(t));},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(26),l=r(u),c=n(19),h=r(c),f=n(6),d=r(f),p=n(2),g=i(p),v={duration:500},m=function(){function t(e,n,i){if(o(this,t),!(e instanceof h.default&&n instanceof l.default))throw new Error("PlaneLineOffsetAnimation: Invalid parameter");this._options=a({},v,i);var r=e.sceneManager.get(-1),s=r._findMesh(n);if(!(s&&s.children[0]&&s.children[0].geometry instanceof g.TubeGeometry))throw new Error("PlaneLineOffsetAnimation: Can not find tube");this._tube=s.children[0],this._onUpdate=this._onUpdate.bind(this),this._animator=d.default.getInstance().ofNumber(1,0,this._options.duration).repeat(1/0).on("update",this._onUpdate);}return s(t,[{key:"_onUpdate",value:function value(t,e){this._tube.material.map&&this._tube.material.map.offset.setX(e.num);}},{key:"start",value:function value(){this._animator.start();}},{key:"stop",value:function value(){this._animator.stop(),this._animator=null,this._tube=null;}}]),t;}();e.default=m;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=r(l),h=n(2),f=i(h),d=function(t){function e(t){if(o(this,e),!(t instanceof f.Group))throw new Error("Invalid three group");var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._root=t,n._originRadius=n._root.children[0].geometry.parameters.radius,n.scaleX=n.scaleX.bind(n),n;}return s(e,t),u(e,[{key:"scaleX",value:function value(t){if(isNaN(t)||!isFinite(t)||t<=0)return console.warn("TubeScaleHandler: Invalid scale"),this;var e=this._root.children[0],n=e.geometry.parameters,i=new f.TubeGeometry(n.path,n.segments,this._originRadius*t,n.radialSegments,n.closed),r=e.material.clone(),o=new f.Mesh(i,r);return o._sceneId=e._sceneId,this._root.remove(e),e.geometry.dispose(),e.material.map.dispose(),e.material.dispose(),this._root.add(o),this;}},{key:"dispose",value:function value(){var t=this._root.children[0],e=t.geometry;this._root.remove(t),e.dispose(),t.material.map.dispose(),t.material.map.dispose(),this._root=null;}}]),e;}(c.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.TubeOffsetAnimation=e.TubeScaleHandler=void 0;var r=n(101),o=i(r),a=n(100),s=i(a);e.TubeScaleHandler=o.default,e.TubeOffsetAnimation=s.default;},function(t,e,n){"use strict";var i=n(75),r=n(1);t.exports=function(t){return function(e){e=e||{};var n=r({transparent:!0,uniforms:{thickness:{value:i(e.thickness,.1)},opacity:{value:i(e.opacity,1)},diffuse:{value:new t.Color(e.diffuse)},dashSteps:{value:12},dashDistance:{value:.2},dashSmooth:{value:.01}},vertexShader:["uniform float thickness;","attribute float lineMiter;","attribute vec2 lineNormal;","attribute float lineDistance;","varying float lineU;","void main() {","lineU = lineDistance;","vec3 pointPos = position.xyz + vec3(lineNormal * thickness/2.0 * lineMiter, 0.0);","gl_Position = projectionMatrix * modelViewMatrix * vec4( pointPos, 1.0 );","}"].join("\\n"),fragmentShader:["varying float lineU;","uniform float opacity;","uniform vec3 diffuse;","uniform float dashSteps;","uniform float dashSmooth;","uniform float dashDistance;","void main() {","float lineUMod = mod(lineU, 1.0/dashSteps) * dashSteps;","float dash = smoothstep(dashDistance, dashDistance+dashSmooth, length(lineUMod-0.5));","gl_FragColor = vec4(diffuse * vec3(dash), opacity * dash);","}"].join("\\n")},e);delete n.thickness,delete n.opacity,delete n.diffuse;var o=0|(parseInt(t.REVISION,10)||0);return o<72&&(n.attributes={lineMiter:{type:"f",value:0},lineDistance:{type:"f",value:0},lineNormal:{type:"v2",value:new t.Vector2()}}),n;};};},function(t,e,n){var i;!function(r,o,a,s){"use strict";function u(t,e,n,i,r){i=i||0,r=r||0,this.identifier=e,this.target=t,this.clientX=n.clientX+i,this.clientY=n.clientY+r,this.screenX=n.screenX+i,this.screenY=n.screenY+r,this.pageX=n.pageX+i,this.pageY=n.pageY+r;}function l(){var t=[];return t.item=function(t){return this[t]||null;},t.identifiedTouch=function(t){return this[t+1]||null;},t;}function c(){for(var t=[r,o.documentElement],e=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"],n=0;n<t.length;n++){for(var i=0;i<e.length;i++){t[n]&&t[n][e[i]]==s&&(t[n][e[i]]=null);}}}function h(){return"ontouchstart"in r||r.Modernizr&&r.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>2;}function f(t){t.preventDefault(),t.stopPropagation();}function d(t){return function(e){f(e),1===e.which&&(("mousedown"==e.type||!x||x&&!x.dispatchEvent)&&(x=e.target),w&&!e.shiftKey&&(p("touchend",e),w=!1),p(t,e),!w&&e.shiftKey&&(w=!0,b={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY},p("touchstart",e)),"mouseup"==e.type&&(b=null,w=!1,x=null));};}function p(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.touches=v(e,t),n.targetTouches=v(e,t),n.changedTouches=m(e,t),x.dispatchEvent(n);}function g(t){var e=new l();if(w){var n=_.multiTouchOffset,i=b.pageX-t.pageX,r=b.pageY-t.pageY;e.push(new u(x,1,b,i*-1-n,r*-1)),e.push(new u(x,2,b,i+n,r));}else e.push(new u(x,1,t,0,0));return e;}function v(t,e){if("mouseup"==t.type)return new l();var n=g(t);return w&&"mouseup"!=t.type&&"touchend"==e&&n.splice(1,1),n;}function m(t,e){var n=g(t);return!w||"mouseup"==t.type||"touchstart"!=e&&"touchend"!=e||n.splice(0,1),n;}function y(t){var e,n,i,r;for(n=0;n<t.touches.length;n++){e=t.touches[n],i=E[e.identifier],i||(i=E[e.identifier]=o.createElement("div"),o.body.appendChild(i)),r=_.template(e);for(var a in r){i.style[a]=r[a];}}if("touchend"==t.type||"touchcancel"==t.type)for(n=0;n<t.changedTouches.length;n++){e=t.changedTouches[n],i=E[e.identifier],i&&(i.parentNode.removeChild(i),delete E[e.identifier]);}}function _(){h()||(c(),r.addEventListener("mousedown",d("touchstart"),!0),r.addEventListener("mousemove",d("touchmove"),!0),r.addEventListener("mouseup",d("touchend"),!0),r.addEventListener("mouseenter",f,!0),r.addEventListener("mouseleave",f,!0),r.addEventListener("mouseout",f,!0),r.addEventListener("mouseover",f,!0),r.addEventListener("touchstart",y,!1),r.addEventListener("touchmove",y,!1),r.addEventListener("touchend",y,!1),r.addEventListener("touchcancel",y,!1));}var b,x,w=!1,E={};o.createTouch||(o.createTouch=function(t,e,n,i,o,a,l,c,h){return c!=s&&h!=s||(c=i-r.pageXOffset,h=o-r.pageYOffset),new u(e,n,{pageX:i,pageY:o,screenX:a,screenY:l,clientX:c,clientY:h});}),o.createTouchList||(o.createTouchList=function(){for(var t=new l(),e=0;e<arguments.length;e++){t[e]=arguments[e];}return t.length=arguments.length,t;}),_.multiTouchOffset=75,_.template=function(t){var e=30,n="translate("+(t.clientX-e/2)+"px, "+(t.clientY-e/2)+"px)";return{position:"fixed",left:0,top:0,background:"#fff",border:"solid 1px #999",opacity:.6,borderRadius:"100%",height:e+"px",width:e+"px",padding:0,margin:0,display:"block",overflow:"hidden",pointerEvents:"none",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",webkitTransform:n,mozTransform:n,transform:n};},i=function(){return _;}.call(e,n,e,t),!(i!==s&&(t.exports=i));}(window,document,"TouchEmulator");},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"start",value:function value(t){}},{key:"stop",value:function value(){return this;}},{key:"end",value:function value(){}},{key:"repeat",value:function value(t){return this;}},{key:"delay",value:function value(t){return this;}},{key:"timeInterpolator",get:function get(){return this._timeInterpolator;},set:function set(t){this._timeInterpolator=t;}},{key:"typeEvaluator",get:function get(){return this._typeEvaluator;},set:function set(t){this._typeEvaluator=t;}}]),e;}(l.default);e.default=c;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"update",value:function value(t){}},{key:"ofNumber",value:function value(){}},{key:"ofObject",value:function value(){}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=function t(e,n,i,r){var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,i,r);}else if("value"in o&&o.writable)o.value=i;else{var s=o.set;void 0!==s&&s.call(r,i);}return i;},l=n(105),c=i(l),h=n(73),f=i(h),d=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));a._t=new f.default.Tween(t).to(n,i);var s=a;return a._t.onStart(function(t){s.emit("start",s,t);}),a._t.onUpdate(function(t){s.emit("update",s,this,t);}),a._t.onComplete(function(){s.emit("complete",s,this);}),a._t.onStop(function(){s.emit("stop",s,this);}),a;}return a(e,t),s(e,[{key:"start",value:function value(t){return this._t.start(t),this;}},{key:"stop",value:function value(){return this._t.stop(),this;}},{key:"repeat",value:function value(t){return this._t.repeat(t),this;}},{key:"delay",value:function value(t){return this._t.delay(t),this;}},{key:"easing",value:function value(t){return this._t.easing(t),this;}},{key:"interpolation",value:function value(t){return this._t.interpolation(t),this;}},{key:"Easing",get:function get(){return f.default.Easing;}},{key:"Interpolation",get:function get(){return f.default.Interpolation;}},{key:"timeInterpolator",set:function set(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"timeInterpolator",t,this),this._t.easing(function(e){return t.getInterpolation(e);});}},{key:"typeEvaluator",set:function set(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"typeEvaluator",t,this),this._t.interpolation(function(e,n){t.evaluate(n,e,e);});}}]),e;}(c.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(106),l=i(u),c=n(107),h=i(c),f=n(73),d=i(f),p=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"update",value:function value(t){d.default.update(t);}},{key:"ofNumber",value:function value(){var t,e;if(arguments.length<3)throw new Error("At least three parameters are required!");var n={num:arguments.length<=0?void 0:arguments[0]},i={num:(t=arguments.length-2,arguments.length<=t?void 0:arguments[t])},r=(e=arguments.length-1,arguments.length<=e?void 0:arguments[e]);return new h.default(n,i,r);}},{key:"ofObject",value:function value(){var t,e;if(arguments.length<3)throw new Error("At least three parameters are required!");var n=arguments.length<=0?void 0:arguments[0],i=(t=arguments.length-2,arguments.length<=t?void 0:arguments[t]),r=(e=arguments.length-1,arguments.length<=e?void 0:arguments[e]);return new h.default(n,i,r);}}]),e;}(l.default);e.default=p;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.AnimatorFactory=void 0;var r=n(6),o=i(r);e.AnimatorFactory=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(17),l=i(u),c=n(4),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._position=new c.geom.Coordinate(0,0,0),n._target=new c.geom.Coordinate(0,0,0),n._up=new c.geom.Coordinate(0,0,0),n;}return a(e,t),s(e,[{key:"initRect",value:function value(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:.667,arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;}},{key:"reSize",value:function value(t,e){}},{key:"onActiveCamera",value:function value(t){this._mapView=t;}},{key:"toScreenCoordinate",value:function value(t,e,n){}},{key:"toCameraCoordinate",value:function value(t,e,n){}},{key:"lookAt",value:function value(t,e,n){}},{key:"position",get:function get(){return this._position;},set:function set(t){this._position=t;}},{key:"target",get:function get(){return this._target;},set:function set(t){this._target=t;}},{key:"up",get:function get(){return this._up;},set:function set(t){this._up=t;}}]),e;}(l.default);e.default=h;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=r(l),h=n(2),f=i(h),d=n(27),p=i(d),g=n(35),v=r(g),m=n(18),y=n(6),_=r(y),b=n(3),x=180/Math.PI,w=Math.PI/180,E=0,S=0,M=function(t){function e(t,n){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._activeCamera=t,i._camera=t.camera,i._mapView=n,i._EPS=1e-6,i._target=new f.Vector3(),i._minDistance=30,i._maxDistance=1/0,i._curDistance=0,i._curZoomStatus=0,i._minSkewAngle=0,i._maxSkewAngle=60,i._boundScale=1.5,i._enableVerticalMove=!1,i._passMinMove=!0,i._staticMove=!0,i._staticZoom=!1,i._target0=i._target.clone(),i._position0=i._camera.position.clone(),i._spherical=new f.Spherical(),i._sphericalDelta=new f.Spherical(),i._scale=1,i._panOffset=new f.Vector3(),i._zoomChanged=!1,i.__rotateStart=0,i.__rotateEnd=0,i.__rotateDelta=0,i._panStart=new f.Vector2(),i._panEnd=new f.Vector2(),i._panDelta=new f.Vector2(),i._shoveStart=0,i._shoveEnd=0,i._shoveDelta=0,i._shoveStart0=0,i._shoveStart1=0,i._shoveDelta0=0,i._shoveDelta1=0,i._dollyStart=0,i._dollyEnd=0,i._dollyDelta=0,i._offset=new f.Vector3(),i._quat=new f.Quaternion().setFromUnitVectors(i._camera.up,new f.Vector3(0,1,0)),i._quatInverse=i._quat.clone().inverse(),i._rotateMatrixAngle=new f.Matrix4(),i._rotateAxis=new f.Vector3(0,0,1),i._rotatePan=new f.Vector3(0,0,0),i._rotateCenter=new f.Vector3(0,0,0),i._skewMatrixAngle=new f.Matrix4(),i._lastPosition=new f.Vector3(),i._lastQuaternion=new f.Quaternion(),i._moveStart=i._moveStart.bind(i),i._moveEnd=i._moveEnd.bind(i),i._move=i._move.bind(i),i._rotateStart=i._rotateStart.bind(i),i._rotateEnd=i._rotateEnd.bind(i),i._rotate=i._rotate.bind(i),i._zoomStart=i._zoomStart.bind(i),i._zoomEnd=i._zoomEnd.bind(i),i._zoom=i._zoom.bind(i),i._skewStart=i._skewStart.bind(i),i._skewEnd=i._skewEnd.bind(i),i._skew=i._skew.bind(i),i._doubleTapZoom=i._doubleTapZoom.bind(i),i._changePlanarGraph=i._changePlanarGraph.bind(i),i._mapView.gestureManager.on("moveStart",i._moveStart),i._mapView.gestureManager.on("moveEnd",i._moveEnd),i._mapView.gestureManager.on("move",i._move),i._mapView.gestureManager.on("rotateStart",i._rotateStart),i._mapView.gestureManager.on("rotateEnd",i._rotateEnd),i._mapView.gestureManager.on("rotate",i._rotate),i._mapView.gestureManager.on("zoomStart",i._zoomStart),i._mapView.gestureManager.on("zoomEnd",i._zoomEnd),i._mapView.gestureManager.on("zoom",i._zoom),i._mapView.gestureManager.on("skewStart",i._skewStart),i._mapView.gestureManager.on("skewEnd",i._skewEnd),i._mapView.gestureManager.on("skewUp",i._skew),i._mapView.gestureManager.on("skewDown",i._skew),i._mapView.gestureManager.on("doubleTap",i._doubleTapZoom),i._mapView.on("changePlanarGraph",i._changePlanarGraph),i;}return s(e,t),u(e,[{key:"_doubleTapZoom",value:function value(){var t=this;_.default.getInstance().ofNumber(1.5,0,300).on("update",function(){t.zoom(.95,!0,!1,!1);}).on("start",function(){}).on("complete",function(){}).start();var e=new v.default();e.type="cameraControl",this._mapView.gestureManager.emit("zoomEnd",e);}},{key:"_moveStart",value:function value(t){var e=t.touches[0],n=e.clientX,i=e.clientY;this._panStart.set(n,i),this._moveOrigin=this._panStart.clone();}},{key:"_moveEnd",value:function value(t){var e=this,n=t.type,i=new f.Vector2();this._moveOrigin?i.subVectors(this._panEnd,this._moveOrigin):this._passMinMove=!1,i.length()<50&&(this._passMinMove=!1),this._staticMove&&this._passMinMove&&_.default.getInstance().ofNumber(1.5,0,300).on("update",function(t,n){var i=n.num;e.move(e._panDelta.x*i,e._panDelta.y*i,0,!0,!1,!1);}).on("start",function(){}).on("complete",function(){}).start(),"cameraControl"!==n&&(this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),this._moveOrigin=null);}},{key:"_move",value:function value(t){var e=t.touches[0],n=e.clientX,i=e.clientY;this._panEnd.set(n,i),this._panDelta.subVectors(this._panEnd,this._panStart),this.move(this._panDelta.x,this._panDelta.y,0,!1,!1,!1),this._passMinMove=!0,this._panDelta.length()<19,this._panStart.copy(this._panEnd),this.update();}},{key:"_rotateStart",value:function value(t){var e=t.rotate;this.__rotateStart=e;}},{key:"_rotateEnd",value:function value(t){var e=t.type;"cameraControl"!==e&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0);}},{key:"_rotate",value:function value(t){var e=t.rotate,n=this._activeCamera.toCameraCoordinate(this._mapView.width/2,this._mapView.length/2,0),i=n.x,r=n.y;this.__rotateEnd=e,this.__rotateDelta=this.__rotateEnd-this.__rotateStart,Math.abs(this.__rotateDelta)>.2&&this.rotate(i,r,this.__rotateDelta,!1,!1,!1),this.__rotateStart=this.__rotateEnd,this.update();}},{key:"_zoomStart",value:function value(t){var e=t.scale;this._dollyStart=e;}},{key:"_zoomEnd",value:function value(t){var e=this,n=t.type;this._staticZoom&&_.default.getInstance().ofNumber(1.5,1,300).on("update",function(t,n){var i=n.num;e.zoom(i,!0,!1,!1);}).on("start",function(){}).on("complete",function(){}).start(),"cameraControl"!==n&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0);}},{key:"_zoom",value:function value(t){var e=t.scale,n=t.touches.length;this._dollyEnd=e,1===n?(this._dollyDelta=this._dollyEnd-this._dollyStart,this.zoom(1-this._dollyDelta,!1,!1,!1)):(this._dollyDelta=this._dollyStart/this._dollyEnd,this.zoom(this._dollyDelta,!1,!1,!1)),this._dollyStart=this._dollyEnd,this.update();}},{key:"_skewStart",value:function value(t){var e=t.touches;this._shoveStart=e[0].clientY,e.length>1&&(this._shoveStart0=e[0].clientY,this._shoveStart1=e[1].clientY);}},{key:"_skewEnd",value:function value(t){var e=t.type;"cameraControl"!==e&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0);}},{key:"_skew",value:function value(t){var e=t.type,n=t.touches;this._shoveEnd=n[0].clientY,n.length>1&&(this._shoveDelta0=n[0].clientY-this._shoveStart0,this._shoveDelta1=n[1].clientY-this._shoveStart1),this._shoveDelta=this._shoveEnd-this._shoveStart,(this._shoveDelta0*this._shoveDelta1>0||1===n.length)&&Math.abs(this._shoveDelta/4)>.1&&("skewUp"===e?this.skew(this._shoveDelta/4,!1,!1,!1):"skewDown"===e&&this.skew(this._shoveDelta/4,!1,!1,!1)),this._shoveStart=this._shoveEnd,n.length>1&&(this._shoveStart0=n[0].clientY,this._shoveStart1=n[1].clientY),this.update();}},{key:"_changePlanarGraph",value:function value(t,e){this._bound=this._activeCamera.bound.clone(),this._bound.scaleRadius(this._boundScale),1===e.length?this._maxDistance=1.2*this._activeCamera.originDistance:this._maxDistance=this._activeCamera.originDistance+this._mapView._floorHeight*(e.length-1),this._minDistance>=this._maxDistance&&(this._minDistance=.6*this._maxDistance),this._position0.setZ(this._camera.position.z),this._calculateCameraZ(),this.update();}},{key:"dispose",value:function value(){return this._mapView.gestureManager.off("moveStart",this._moveStart),this._mapView.gestureManager.off("moveEnd",this._moveEnd),this._mapView.gestureManager.off("move",this._move),this._mapView.gestureManager.off("rotateStart",this._rotateStart),this._mapView.gestureManager.off("rotateEnd",this._rotateEnd),this._mapView.gestureManager.off("rotate",this._rotate),this._mapView.gestureManager.off("skewStart",this._skewStart),this._mapView.gestureManager.off("skewEnd",this._skewEnd),this._mapView.gestureManager.off("skew",this._skew),this._mapView.gestureManager.off("doubleTap",this._doubleTapZoom),this._mapView.off("changePlanarGraph",this._changePlanarGraph),this._activeCamera=null,this._camera=null,this._mapView=null,this._skewMatrixAngle=null,this._rotateMatrixAngle=null,this;}},{key:"reset",value:function value(){return this._target=this._target0,this._activeCamera.position=this._position0,this._activeCamera.up=new f.Vector3(0,1,0),this._camera.updateProjectionMatrix(),this.update(),this;}},{key:"update",value:function value(){var t=this._camera.position;this._offset.copy(t).sub(this._target),this._offset.applyQuaternion(this._quat),this._spherical.setFromVector3(this._offset),this._spherical.makeSafe(),this._spherical.radius*=this._scale,this._spherical.radius=Math.max(this._minDistance,Math.min(this._maxDistance,this._spherical.radius)),1!==this._scale&&(this._spherical.radius>=this._maxDistance?this._changeZoomStatus(1):this._spherical.radius<=this._minDistance?this._changeZoomStatus(2):this._changeZoomStatus(0));var e=this._target.clone();return e.add(this._panOffset),this._bound&&this._bound.containsPoint(e)&&this._target.copy(e),this._offset.setFromSpherical(this._spherical),this._offset.applyQuaternion(this._quatInverse),t.copy(this._target).add(this._offset),this._activeCamera.target=this._target,this._camera.lookAt(this._target),this._curDistance=t.distanceTo(this._target),this._sphericalDelta.set(0,0,0),this._scale=1,this._panOffset.set(0,0,0),this._zoomChanged||this._lastPosition.distanceToSquared(this._camera.position)>this._EPS||8*(1-this._lastQuaternion.dot(this._camera.quaternion))>this._EPS?(this._lastPosition.copy(this._camera.position),this._lastQuaternion.copy(this._camera.quaternion),this._zoomChanged=!1,!0):(this._lastPosition.copy(this._camera.position),!1);}},{key:"enableVerticalMove",value:function value(){return this._enableVerticalMove=!0,this;}},{key:"disableVerticalMove",value:function value(){return this._enableVerticalMove=!1,this;}},{key:"move",value:function value(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=n;if(E+=t,S+=e,E>300)return E=300;if(E<-300)return E=-300;if(S>500)return S=500;if(S<-500)return S=-500;a=this._enableVerticalMove===!1?0:n;var s=this._camera.position,u=new f.Vector3().copy(s).sub(this._target),l=u.length();if(l*=Math.tan(this._camera.fov/2*w),this._moveLeft(2*t*l/this._mapView.height,this._camera.matrix),this._moveForward(2*e*l/this._mapView.height,this._camera.matrix),this._camera.position.z-=a,this._target.z-=a,i&&this.update(),r&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),o){var c=new v.default();c.type="cameraControl",this._mapView.gestureManager.emit("moveEnd",c);}return this;}},{key:"moveToPoint",value:function value(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=t-this._target.x,s=e-this._target.y;if(this._enableVerticalMove===!0&&(0,b.isPresent)(n)){var u=n-this._target.z;this._panOffset.set(a,s,u);}else this._panOffset.setX(a),this._panOffset.setY(s);if(i&&this.update(),r&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),o){var l=new v.default();l.type="cameraControl",this._mapView.gestureManager.emit("moveEnd",l);}return this;}},{key:"fitBounds",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];if(4!==t.length&&6!==t.length)throw new Error("Invalid bounds");var u=this.getRotate(),l=this.getSkew();return this.skewTo(.1,i,r,o),this._fitBoundsInVerticalView(t,l,e,n,i,r,o,a),this.skewTo(l,i,r,o),s||this.rotateTo(this._target.x,this._target.y,u,i,r,o),this;}},{key:"_fitBoundsInVerticalView",value:function value(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=(!(arguments.length>3&&void 0!==arguments[3])||arguments[3],!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=t.slice(),l=this._mapView.activeCamera;l.camera.updateMatrix(),l.camera.updateMatrixWorld(),4===t.length&&(u=[t[0],t[1],0,t[2],t[3],0]);var c=(u[0]+u[3])/2,h=(u[1]+u[4])/2,d=(u[2]+u[5])/2;this.moveToPoint(c,h,d,i,r,a),this.rotateTo(c,h,0);var p=new f.Vector3(u[0]-c,u[1]-h,u[2]-d),g=new f.Vector3(u[3]-c,u[4]-h,u[5]-d),y=l.toScreenCoordinate(p.x,p.y,p.z),b=l.toScreenCoordinate(p.x,g.y,p.z),x=l.toScreenCoordinate(g.x,p.y,p.z),w=l.toScreenCoordinate(g.x,g.y,p.z),E=l.toScreenCoordinate(p.x,p.y,g.z),S=l.toScreenCoordinate(p.x,g.y,g.z),M=l.toScreenCoordinate(g.x,p.y,g.z),C=l.toScreenCoordinate(g.x,g.y,g.z),I=Math.min(y.x,b.x,x.x,w.x,E.x,S.x,M.x,C.x),O=Math.max(y.x,b.x,x.x,w.x,E.x,S.x,M.x,C.x),T=Math.min(y.y,b.y,x.y,w.y,E.y,S.y,M.y,C.y),P=Math.max(y.y,b.y,x.y,w.y,E.y,S.y,M.y,C.y),A=(O-I)/this._mapView.width,L=(P-T)/this._mapView.height,N=Math.max(A,L),k=this._camera.position.clone(),R=this._target,D=k.clone().sub(R).multiplyScalar(N/n),F=R.clone().add(D);if(s&&i){var B=new f.Vector3();_.default.getInstance().ofNumber(1,0,500).on("update",function(t,n){var i=n.num;B.setX(i*k.x+(1-i)*F.x),B.setY(i*k.y+(1-i)*F.y),B.setZ(i*k.z+(1-i)*F.z),o._camera.position.copy(B),o.skewTo(e,!0,!1,!1);}).on("start",function(){}).on("complete",function(){if(r&&o._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),a){var t=new v.default();t.type="cameraControl",o._mapView.gestureManager.emit("zoomEnd",t);}}).start();}else if(this._camera.position.copy(F),i&&this.update(),r&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),a){var j=new v.default();j.type="cameraControl",this._mapView.gestureManager.emit("zoomEnd",j);}return this;}},{key:"zoom",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this._scale=t,e&&this.update(),n&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),i){var r=new v.default();r.type="cameraControl",this._mapView.gestureManager.emit("zoomEnd",r);}return this;}},{key:"zoomByFocalLength",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new f.Vector3();if(r.subVectors(this._camera.position,this._target),this._scale=t/r.length(),e&&this.update(),n&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),i){var o=new v.default();o.type="cameraControl",this._mapView.gestureManager.emit("zoomEnd",o);}return this;}},{key:"skewTo",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=t;t>this._maxSkewAngle+.01?r=this._maxSkewAngle+.01:t<this._minSkewAngle+.01&&(r=this._minSkewAngle+.01),0===r&&(r=.01);var o=this._camera.position,a=this._target,s=o.clone().sub(a),u=a.clone().setZ(s.length()+a.z);s=u.sub(a),this._camera.up.setZ(0);var l=new f.Vector3(this._camera.up.y,-this._camera.up.x,0).normalize();if(this._skewMatrixAngle.makeRotationAxis(l,r*w),s.applyMatrix4(this._skewMatrixAngle),o.copy(a).add(s),this._camera.up.applyMatrix4(this._skewMatrixAngle),e&&this.update(),n&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),i){var c=new v.default();c.type="cameraControl",this._mapView.gestureManager.emit("skewEnd",c);}return this;}},{key:"getSkew",value:function value(){var t=this._camera.position.clone().sub(this._target).normalize();return t.angleTo(this._rotateAxis)*x;}},{key:"skew",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this._camera.position,o=this._target,a=new f.Vector3().copy(r).sub(o),s=a.angleTo(this._rotateAxis)*x,u=t;if(u+s>this._maxSkewAngle+.01||u+s<this._minSkewAngle+.01)u=0;else{var l=this._camera.up.clone();l.cross(a).normalize(),this._skewMatrixAngle.makeRotationAxis(l,u*w),a.applyMatrix4(this._skewMatrixAngle),r.copy(o).add(a),this._camera.up.applyMatrix4(this._skewMatrixAngle);}if(e&&this.update(),n&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),i){var c=new v.default();c.type="cameraControl",this._mapView.gestureManager.emit("skewEnd",c);}return this;}},{key:"getRotate",value:function value(){var t=this._camera.position.clone().sub(this._target),e=this._camera.up.clone().cross(t).normalize();return 360-this._getAngle(e);}},{key:"rotate",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this._rotateCenter.set(t,e,this._target.z),this._rotateMatrixAngle.makeRotationAxis(this._rotateAxis,n*w),this._rotateMatrixAngle.setPosition(this._rotateCenter);var a=new f.Vector3(),s=new f.Vector3();a.subVectors(this._camera.position,this._rotateCenter),a.setZ(0),s.subVectors(this._target,this._rotateCenter),s.setZ(0),s=p.default.getRelCoordOnPlane(s,a,new f.Vector3(-a.y,a.x,0)),this._rotatePan.subVectors(this._camera.position,this._rotateCenter),this._rotatePan.applyMatrix4(this._rotateMatrixAngle),this._camera.position.copy(this._rotatePan),a.subVectors(this._camera.position,this._rotateCenter),a.setZ(0),this._target=p.default.directionalAdd(this._rotateCenter,a,s.x),this._target=p.default.directionalAdd(this._target,new f.Vector3(-a.y,a.x,0),s.y),this._activeCamera.target=this._target;var u=new f.Vector3();if(u.subVectors(this._camera.position,this._target),Math.abs(u.x)<1e-4&&Math.abs(u.y)<1e-4?this._camera.up.applyMatrix4(this._rotateMatrixAngle):(this._camera.up.x=-u.x,this._camera.up.y=-u.y,this._camera.up.z=(u.x*u.x+u.y*u.y)/u.z,this._camera.up.normalize()),i&&this.update(),r&&this._mapView.collisionSceneManager.animation(m.CAType.Opacity).updateCollision(!0),o){var l=new v.default();l.type="cameraControl",this._mapView.gestureManager.emit("rotateEnd",l);}return this;}},{key:"rotateTo",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(this.rotate(t,e,-this.getRotate(),!1,!1,!1),this.rotate(t,e,n,!1,!1,!1),i&&this.update(),r&&this._mapView.collisionSceneManager.updateCollision(),o){var a=new v.default();a.type="cameraControl",this._mapView.gestureManager.emit("rotateEnd",a);}return this;}},{key:"_changeZoomStatus",value:function value(t){return t===this._curZoomStatus?null:(this._curZoomStatus=t,this.emit("changeZoomStatus",this,this._curZoomStatus),this);}},{key:"_moveLeft",value:function value(t,e){var n=new f.Vector3();return n.setFromMatrixColumn(e,0),n.multiplyScalar(-t),this._panOffset.add(n),this._panOffset.z=0,this;}},{key:"_moveForward",value:function value(t,e){var n=new f.Vector3();return n.setFromMatrixColumn(e,1),n.multiplyScalar(t),this._panOffset.add(n),this._panOffset.z=0,this;}},{key:"_setFromSpherical",value:function value(t,e){var n=Math.sin(e.phi)*e.radius;return t.y=n*Math.sin(e.theta),t.z=Math.cos(e.phi)*e.radius,t.x=n*Math.cos(e.theta),t;}},{key:"_calculateCameraZ",value:function value(){if(0===this._curDistance)return null;var t=this._camera.position,e=t.distanceTo(this._target);return e>this._maxDistance&&(e=this._maxDistance),e<this._minDistance&&(e=this._minDistance),this._offset.copy(this._lastPosition).sub(this._target),this._offset.normalize().multiplyScalar(e),t.copy(this._target).add(this._offset),this;}},{key:"_setFromVector3",value:function value(t,e){return t.radius=e.length(),0===t.radius?(t.theta=0,t.phi=0):(t.theta=Math.atan2(e.y,e.x),t.phi=Math.acos(f.Math.clamp(e.z/t.radius,-1,1))),t;}},{key:"_getVectorAngle",value:function value(t,e){var n=t.length(),i=e.length();return 0===n||0===i?0:Math.acos(e.dot(t)/(n*i))*x;}},{key:"_getAngle1",value:function value(t){if(0===t.z)return t.y>0?180:0;if(0===t.y)return t.z>0?90:270;var e=f.Math.clamp(t.z/Math.sqrt(t.y*t.y+t.z*t.z),-1,1),n=Math.atan(Math.sqrt(1-e*e)/e)*x;return t.y<0&&t.z<0?n+270:t.y<0&&t.z>0?n+90:t.y>0&&t.z>0?90-n:t.y>0&&t.z<0?270-n:n;}},{key:"_getAngle",value:function value(t){if(0===t.y)return t.x<0?180:0;if(0===t.x)return t.y<0?90:270;var e=f.Math.clamp(t.y/Math.sqrt(t.x*t.x+t.y*t.y),-1,1),n=Math.atan(Math.sqrt(1-e*e)/e)*x;return t.x>0&&t.y>0?n+270:t.x>0&&t.y<0?n+90:t.x<0&&t.y<0?90-n:t.x<0&&t.y>0?270-n:n;}},{key:"minDistance",set:function set(t){t>=0&&t<this._maxDistance&&(this._minDistance=t);},get:function get(){return this._minDistance;}},{key:"maxDistance",set:function set(t){t>this._minDistance&&(this._maxDistance=t);},get:function get(){return this._maxDistance;}},{key:"minSkewAngle",set:function set(t){t>=0&&t<=this._maxSkewAngle&&(this._minSkewAngle=t,this.getSkew()<this._minSkewAngle&&this.skewTo(this._minSkewAngle));},get:function get(){return this._minSkewAngle;}},{key:"maxSkewAngle",set:function set(t){t<=90&&t>=this._minSkewAngle&&(this._maxSkewAngle=t,this.getSkew()>this._maxSkewAngle&&this.skewTo(this._maxSkewAngle));},get:function get(){return this._maxSkewAngle;}},{key:"boundScale",set:function set(t){if(isNaN(t)||!isFinite(t)||t<=0)throw new Error("Invalid bound scale");this._boundScale=t;},get:function get(){return this._boundScale;}},{key:"target",set:function set(t){this._target=t;},get:function get(){return this._target;}},{key:"focalLength",get:function get(){var t=new f.Vector3();return t.subVectors(this._camera.position,this._target).length();}}]),e;}(c.default);e.default=M;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeCamera=void 0;var r=n(21),o=i(r);e.ThreeCamera=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=n(6),p=i(d),g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.name?"compass-"+t.name:"compass",i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s({position:"topright"},t)));return i._currentAngle=null,i._disabled=!0,i._element||(i._element=f.DOMUtils.createElement("div","ngr-compass"),i._button=f.DOMUtils.createElement("div","compass-button",i._element),i._divCompass=f.DOMUtils.createElement("div","compass-icon",i._button)),i.rotateCompass=i.rotateCompass.bind(i),i._onClick=i._onClick.bind(i),i;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this._disabled=!1,this._map.gestureManager.on("rotate","rotateEnd",this.rotateCompass),this._button.addEventListener("click",this._onClick),this;}},{key:"_onRemove",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this._disabled=!0,this._map.gestureManager.off("rotate","rotateEnd",this.rotateCompass),this._button.removeEventListener("click",this._onClick),this;}},{key:"disable",value:function value(){this._disabled=!0;}},{key:"enable",value:function value(){this._disabled=!1;}},{key:"rotateCompass",value:function value(){if(this._map.activeControl){var t=this._map.activeControl.getRotate();this._currentAngle=t,this.onUpdate(this._divCompass||this._element,t);}}},{key:"onUpdate",value:function value(t,e){t.style.webkitTransform="rotate("+e+"deg)";}},{key:"onClick",value:function value(){var t=this._map.activeControl,e=this._currentAngle,n=e>180?360:0;p.default.getInstance().ofNumber(e,n,300).on("update",function(e,n){var i=n.num;t.rotateTo(0,0,i,!0,!1,!1);}).on("complete",function(){t.rotateTo(0,0,n,!0,!0,!0);}).start();}},{key:"_onClick",value:function value(){this.onClick();}},{key:"getCurrentAngle",value:function value(){return this._currentAngle;}}]),e;}(h.default);e.default=g;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(22),h=i(c),f=n(6),d=i(f),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s({name:"dimension",innerHTML:"2D",className:"toggle-dimension",minSkewAngle:0,maxSkewAngle:60},t)));return n._onToggle=n._onToggle.bind(n),n;}return a(e,t),u(e,[{key:"_onToggle",value:function value(t){var e=t.selected,n=this._map.activeControl,i=this._options,r=i.maxSkewAngle,o=i.minSkewAngle,a=this._button,s=n.getSkew(),u=0;return e?(a.innerHTML="3D",u=o):(a.innerHTML="2D",u=r),d.default.getInstance().ofNumber(s,u,300).on("update",function(t,e){var i=e.num;n.skewTo(i,!0,!1,!1);}).on("complete",function(){n.skewTo(u,!0,!0,!0);}).start(),this;}},{key:"_onAdd",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this.on("toggle",this._onToggle),this;}},{key:"_onRemove",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this.off("toggle",this._onToggle),this;}}]),e;}(h.default);e.default=p;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(22),h=i(c),f=n(6),d=i(f),p=n(7),g=n(3),v={className:"ngr-toggle-facility",selectedDisplay:"block",floorControlName:"multiFloor",blurOpacity:.3,animation:{type:"scale",minScale:25,maxScale:50}},m=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=(0,g.isArray)(t)?t:[],a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s({},v,n)));a._name=a._options.name?"facility-"+a._options.name:"facility",a.facilityContainer=p.DOMUtils.createElement("div","ngr-facility-container"),a.facilityItems=[];for(var u=i,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var h;if(l){if(c>=u.length)break;h=u[c++];}else{if(c=u.next(),c.done)break;h=c.value;}var f=h,d=p.DOMUtils.createElement("div","ngr-facility-button",a.facilityContainer),m=f.id,y=f.backgroudImage,_=f.innerHTML,b=f.categories;d.categories=b,m&&(d.id=m),_&&(d.innerHTML=_),y&&(d.style["background-image"]="url("+f.backgroudImage+")"),a.facilityItems.push(d);}return a._blurOpacity=a._options.blurOpacity,a.unblur=!1,a.facilityAnimationId=0,a.facilityAnimationCounts={},a.onToggle=a.onToggle.bind(a),a.onFacilityClick=a.onFacilityClick.bind(a),a;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this._container.appendChild(this.facilityContainer),this.onToggle({selected:this._selected,targetControl:this}),this.on("toggle",this.onToggle);for(var n=this.facilityItems,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;a.addEventListener("click",this.onFacilityClick,!1);}return this;}},{key:"_onRemove",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this._container.removeChild(this.facilityContainer),this.off("toggle",this.onToggle);for(var n=this.facilityItems,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;a.removeEventListener("click",this.onFacilityClick);}return this;}},{key:"onToggle",value:function value(t){var e=t.selected;return this.facilityContainer.style.display=e?this._options.selectedDisplay:"none",this;}},{key:"onFacilityClick",value:function value(t){var e=t.target.categories;return e&&this._initFacilityAnimationByCategory(e),this;}},{key:"_initFacilityAnimationByCategory",value:function value(t){var e=this,n=this._map,i=n.currentPlanarGraphIds,r=n.getDomControl(this._options.floorControlName),o=this._options.animation,a=o.minScale,s=o.maxScale;if(!r)throw new Error("FacilityControl: Invalid floor control name");var u=r.getCurrentFloor(),l={maxCount:i.length,curCount:0},c=this.facilityAnimationId++;this.facilityAnimationCounts[c]=l;for(var h=i,f=Array.isArray(h),d=0,h=f?h:h[Symbol.iterator]();;){var p;if(f){if(d>=h.length)break;p=h[d++];}else{if(d=h.next(),d.done)break;p=d.value;}var g=p,v=n.getLayer(g).getLayer("Facility");n.sceneManager.setVisible(v,"category",t,!0),n.sceneManager.setOpacity(v,"category",t,this.unblur||g===Number(u)?1:this.blurOpacity),this._startFacilityAnimation(v,t,a,s,function(){var t=e.facilityAnimationCounts[c];t.curCount++,t.curCount>=t.maxCount&&(delete e.facilityAnimationCounts[c],n.collisionSceneManager.updateCollision());});}}},{key:"_startFacilityAnimation",value:function value(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:300,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2;d.default.getInstance().ofNumber(n,i+n,s).on("update",function(r,o){var s=o.num,u=s>2*n?2*i-s:s;a._map.sceneManager.setScale(t,"category",e,u,u,0);}).on("complete",r).delay(o).repeat(u).start();}},{key:"hide",value:function value(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hide",this).call(this),this.facilityContainer.style.display="none";}},{key:"display",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block";l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"display",this).call(this,t),"none"!==t&&this.getSelected()&&(this.facilityContainer.style.display=this._options.selectedDisplay);}},{key:"unblur",set:function set(t){this._unblur=t;},get:function get(){return this._unblur;}},{key:"blurOpacity",set:function set(t){this._blurOpacity=t;},get:function get(){return this._blurOpacity;}}]),e;}(h.default);e.default=m;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(43),h=i(c),f=n(22),d=i(f),p=n(6),g=i(p),v=n(18),m=n(3),y={className:"ngr-multi-floor-switcher",scrollOptions:{disabled:!1,barHeight:27,maxBarCount:null}},_={selected:!0,className:"ngr-toggle-floor",position:"bottomright",name:"floor"},b=function(t){function e(t){r(this,e);var n=s({},y,t),i=s({},_,n.toggleOptions),a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return a._name=n.name?"multiFloor-"+n.name:"multiFloor",a.toggle=new d.default(i),a._defaulPriority=a._options.defaulPriority?a._options.defaulPriority:4,a._ignoreOpacityLayers=a._options.ignoreOpacityLayers?a._options.ignoreOpacityLayers:["pickMarker"],a._blurOpacity=a._options.blurOpacity?a._options.blurOpacity:.3,a._floorAnimationCount=0,a._options.scrollOptions.maxBarCount&&(a._element.style["max-height"]=a._options.scrollOptions.maxBarCount*a._options.scrollOptions.barHeight+"px"),a.onToggle=a.onToggle.bind(a),a.onFloorChange=a.onFloorChange.bind(a),a;}return a(e,t),u(e,[{key:"setContainer",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setContainer",this).call(this,t),this.toggle.setContainer(t),this;}},{key:"_onAdd",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this.toggle._onAdd(t),this.on("change",this.onFloorChange),this.toggle.on("toggle",this.onToggle);}},{key:"_onRemove",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this.toggle._onRemove(t),this.toggle._map=null,this.off("change",this.onFloorChange),this.toggle.off("toggle",this.onToggle);}},{key:"hide",value:function value(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hide",this).call(this),this.toggle.hide(),this;}},{key:"display",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block";return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"display",this).call(this,t),this.toggle.display(t),this;}},{key:"disable",value:function value(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disable",this).call(this),this.toggle.disable(),this;}},{key:"enable",value:function value(){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"enable",this).call(this),this.toggle.enable(),this;}},{key:"_startFloorAnimation",value:function value(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:300;if(!this._map)return this;var s=this._map.getLayer(t);return g.default.getInstance().ofNumber(e,n,a).on("update",function(t,e){var n=e.num;r._map.sceneManager.quickSetPosition(s,null,null,0,0,n);}).on("complete",i).delay(o).start(),this;}},{key:"_setPGPriority",value:function value(t,e,n){var i=this;if(e&&this._setPGPriority(e,null,this._defaulPriority+1),!t)return this;var r=this._map.getLayer(t),o=r.getLayer("AreaText"),a=r.getLayer("Facility");return o&&o.visit(function(t){t.priority=n===i._defaulPriority?n-1:n;}),a&&a.visit(function(t){t.priority=n;}),this;}},{key:"_setPGOpacity",value:function value(t,e){var n=this,i=this._map.getLayer(t);return i?(i.foreach(function(t,i){var r=n._ignoreOpacityLayers.indexOf(t);r===-1&&n._map.sceneManager.setOpacity(i,null,null,e);}),this):this;}},{key:"_highlightPG",value:function value(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;u===Number(t)?this._setPGOpacity(u,i):this._setPGOpacity(u,n);}return this;}},{key:"highlightPGs",value:function value(t){if((0,m.isArray)(t))if(1===t.length)this._highlightPG(t[0],this._map.currentPlanarGraphIds,this._blurOpacity),this._setPGPriority(t[0],null,this._defaulPriority);else{for(var e=t,n=Array.isArray(e),i=0,e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++];}else{if(i=e.next(),i.done)break;r=i.value;}var o=r;this._setPGOpacity(o,1);}this._setPGPriority(null,this.currentFloor,this._defaulPriority);}return this;}},{key:"onMultiFloorChange",value:function value(t){var e=this,n=this._map,i=n.planarGraphs,r=n.activeControl._target,o=r.x,a=r.y,s=r.z;return g.default.getInstance().ofNumber(s,i.indexOf(Number(t.to))*n._floorHeight,300).on("update",function(t,e){var i=e.num;n.activeControl.moveToPoint(o,a,i,!0,!1,!1);}).on("complete",function(){n.collisionSceneManager.animation(v.CAType.Opacity).updateCollision(!0),e.enable(),e.toggle.disabled=!1,e.fire("animationCompleted",{targetControl:e});}).start(),this._highlightPG(t.to,i,this._blurOpacity),this._setPGPriority(t.to,t.from,this._defaulPriority),this;}},{key:"onSingleFloorChange",value:function value(t){var e=this,n=this._map,i=n.planarGraphs.indexOf(Number(t.from)),r=n.planarGraphs.indexOf(Number(t.to)),o=n.activeControl.maxDistance+50;if(r===-1||i===-1)throw new Error("MultiFloorControl: Invalid index");var a=n.getLayer(t.to),s=a.getLayer("AreaText"),u=a.getLayer("Facility");return this._setPGOpacity(t.to,1),n.showPlanarGraphs([t.to],!1),n.sceneManager.setOpacity(s,null,null,0),n.sceneManager.setOpacity(u,null,null,0),n.collisionSceneManager.animation(v.CAType.Opacity).updateCollision(!0),this._startFloorAnimation(t.to,r<i?-o:o,0,function(){n.sceneManager.setOpacity(s,null,null,1),n.sceneManager.setOpacity(u,null,null,1),n.collisionSceneManager.animation(v.CAType.Opacity).updateCollision(!0),e.enable(),e.toggle.disabled=!1,e.fire("animationCompleted",{targetControl:e});}),this;}},{key:"onToggle",value:function value(t){var e=this,n=t.selected,i=this._map,r=this.getCurrentFloor(),o=i.planarGraphs,a=i._floorHeight,s=i.activeControl.maxDistance+50,u=i.activeControl._target,l=u.x,c=u.y,h=0,f=!0,d=void 0,p=void 0;if(this.disable(),this.toggle.disabled=!1,n){var g=function g(){e._floorAnimationCount++,e._floorAnimationCount>=o.length&&(i.next(1,function(){i.collisionSceneManager.animation(v.CAType.Opacity).updateCollision(!0);}),e.enable(),e.toggle.disabled=!1,e.fire("animationCompleted",{targetControl:e}),e._floorAnimationCount=0,e._map.sceneManager._octreeManager.rebuild());};this._setPGPriority(r,null,this._defaulPriority),i.showPlanarGraphs(o),this._highlightPG(r,o,this._blurOpacity);for(var m=o,y=Array.isArray(m),_=0,m=y?m:m[Symbol.iterator]();;){var b;if(y){if(_>=m.length)break;b=m[_++];}else{if(_=m.next(),_.done)break;b=_.value;}var x=b;x===Number(r)?(d=0,f=!1):d=f?-s:s,this._startFloorAnimation(x,d,h,g),h+=a;}i.activeControl.moveToPoint(l,c,o.indexOf(Number(r))*a,!0,!0,!1);}else{var w=function w(){e._floorAnimationCount++,e._floorAnimationCount>=o.length&&(i.showPlanarGraphs([r]),e.enable(),e.toggle.disabled=!1,e.fire("animationCompleted",{targetControl:e}),e._floorAnimationCount=0,e._map.sceneManager._octreeManager.rebuild());};this._setPGPriority(null,r,this._defaulPriority);for(var E=o,S=Array.isArray(E),M=0,E=S?E:E[Symbol.iterator]();;){var C;if(S){if(M>=E.length)break;C=E[M++];}else{if(M=E.next(),M.done)break;C=M.value;}var I=C;I===Number(r)?(p=0,f=!1):p=f?-s:s,this._startFloorAnimation(I,h,p,w);}i.activeControl.moveToPoint(l,c,0,!0,!1,!1);}}},{key:"_scrollByFloor",value:function value(t){var e=this._map.height,n=this._element,i=this._map.planarGraphs.concat().reverse(),r=i.indexOf(Number(t)),o=this._options.scrollOptions.barHeight,a=this._options.scrollOptions.maxBarCount,s=void 0;if(r===-1)return this;a||(a=e<=510?4:e<=550?5:7);var u=(i.length-a)*o;return u<=0?this:(s=o*(r-window.Math.floor((a-1)/2)),s<0?s=0:s>u&&(s=u),g.default.getInstance().ofNumber(n.scrollTop,s,300).on("update",function(t,e){var i=e.num;n.scrollTop=i;}).start(),this);}},{key:"onFloorChange",value:function value(t){return t.from===t.to?this:(this._options.scrollOptions.disabled||this._scrollByFloor(Number(t.to)),this.disable(),this.toggle.disabled=!1,this.toggle.getSelected()?this.onMultiFloorChange(t):this.onSingleFloorChange(t),this.setCurrentFloor(t.to),this);}},{key:"setCurrentFloor",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setCurrentFloor",this).call(this,t),this._options.scrollOptions.disabled||this._scrollByFloor(Number(t)),this;}}]),e;}(h.default);e.default=b;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.name?"scale-"+t.name:"scale",i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,s({maxWidth:100,position:"bottomleft"},t)));return i._element=f.DOMUtils.createElement("div","ngr-control-scale"),i.update=i.update.bind(i),i;}return a(e,t),u(e,[{key:"disable",value:function value(){return this.hide(),this;}},{key:"enable",value:function value(){return this.display(),this;}},{key:"update",value:function value(){var t=this;this._map.next(1,function(){var e=t._map.activeCamera.getMetersPerPixel()*t._options.maxWidth,n=t._getRoundNum(e),i=Math.round(n/e*t._options.maxWidth);t._scaleMiddle.style.width=i+"px",t._scaleEdgeRight.style.left=i+1+"px",t._scaleText.innerHTML=n+"米",t._scaleText.style.width=i+"px";});}},{key:"_onAdd",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t);var n="ngr-control-scale";return this._scaleText=f.DOMUtils.createElement("div",n+"-text",this._element),this._scaleLine=f.DOMUtils.createElement("div",n+"-line",this._element),this._scaleEdgeLeft=f.DOMUtils.createElement("div",n+"-edgeleft",this._scaleLine),this._scaleEdgeRight=f.DOMUtils.createElement("div",n+"-edgeright",this._scaleLine),this._scaleMiddle=f.DOMUtils.createElement("div",n+"-middle",this._scaleLine),this._map.gestureManager.on("zoomEnd",this.update),this;}},{key:"_onRemove",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this._map.gestureManager.off("zoomEnd",this.update),this;}},{key:"_getRoundNum",value:function value(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=2?2:1,e*n;}}]),e;}(h.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=n(3),p={size:"100px",min:0,max:250,step:1,id:"slider",value:50,collapsed:!0,title:"NGR Slider",logo:"S",orientation:"horizontal",increment:!1,getValue:function getValue(t){return t;},showValue:!0,syncSlider:!1},g=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.name?"slider-"+n.name:"slider",s({},p,n)));return(0,d.isFunction)(t)?i.update=t:i.update=function(t){console.log(t);},(0,d.isFunction)(i._options.getValue)||(i._options.getValue=function(t){return t;}),"vertical"!==i._options.orientation&&(i._options.orientation="horizontal"),i._updateValue=i._updateValue.bind(i),i._expand=i._expand.bind(i),i._collapse=i._collapse.bind(i),i._increment=i._increment.bind(i),i._decrement=i._decrement.bind(i),i;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){return this._initLayout(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this;}},{key:"_updateValue",value:function value(){var t=this._options,e=t.showValue,n=t.getValue;this.value=this.slider.value,e&&(this._sliderValue.innerHTML=n(this.value)),this.update(this.value);}},{key:"_expand",value:function value(){f.DOMUtils.addClass(this._element,"ngr-control-slider-expanded"),this.slider.focus();}},{key:"_collapse",value:function value(){f.DOMUtils.removeClass(this._element,"ngr-control-slider-expanded");}},{key:"_increment",value:function value(){this.slider.value=Number(this.slider.value)+Number(this.slider.step),this._updateValue();}},{key:"_decrement",value:function value(){this.slider.value=Number(this.slider.value)-Number(this.slider.step),this._updateValue();}},{key:"setValue",value:function value(t){var e=this._options,n=e.min,i=e.max,r=e.showValue,o=e.getValue;return(0,d.isNumber)(t)&&t>=n&&t<=i&&(this.slider.value=t,this.value=this.slider.value,r&&(this._sliderValue.innerHTML=o(this.value))),this;}},{key:"_initLayout",value:function value(){var t=this,e="ngr-control-slider",n=this._options,i=n.orientation,r=n.title,o=n.logo,a=n.getValue,s=n.value,u=n.showValue,l=n.increment,c=n.id,h=n.min,d=n.max,p=n.step,g=n.syncSlider,v=n.size,m=n.collapsed;this._element&&console.warn("SliderControl: Element will be overrided"),this._element=f.DOMUtils.createElement("div",e+" "+e+"-"+i),this._sliderLink=f.DOMUtils.createElement("a",e+"-toggle",this._element),this._sliderLink.setAttribute("title",r),this._sliderLink.setAttribute("href","#"),this._sliderLink.innerHTML=o,u&&(this._sliderValue=f.DOMUtils.createElement("p",e+"-value",this._element),this._sliderValue.innerHTML=a(s)),l&&(this._plus=f.DOMUtils.createElement("a",e+"-plus",this._element),this._plus.innerHTML="+",this._plus.addEventListener("click",this._increment,!1),f.DOMUtils.addClass(this._element,"ngr-control-slider-incdec")),this._sliderContainer=f.DOMUtils.createElement("div","ngr-slider-container",this._element),this.slider=f.DOMUtils.createElement("input","ngr-slider",this._sliderContainer),"vertical"===i&&this.slider.setAttribute("orient","vertical"),this.slider.setAttribute("title",r),this.slider.setAttribute("id",c),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",h),this.slider.setAttribute("max",d),this.slider.setAttribute("step",p),this.slider.setAttribute("value",s),g?this.slider.addEventListener("input",this._updateValue,!1):this.slider.addEventListener("change",this._updateValue,!1),this.slider.addEventListener("change",function(){t.emit("slideEnd",t.slider.value);},!1),l&&(this._minius=f.DOMUtils.createElement("a",e+"-minus",this._element),this._minius.innerHTML="-",this._minius.addEventListener("click",this._decrement,!1)),u?window.matchMedia("screen and (-webkit-min-device-pixel-ratio:0)").matches&&"vertical"===i?(this.slider.style.width=v.replace("px","")-36+"px",this._sliderContainer.style.height=v.replace("px","")-36+"px"):"vertical"===i?this._sliderContainer.style.height=v.replace("px","")-36+"px":this._sliderContainer.style.width=v.replace("px","")-56+"px":window.matchMedia("screen and (-webkit-min-device-pixel-ratio:0)").matches&&"vertical"===i?(this.slider.style.width=v.replace("px","")-10+"px",this._sliderContainer.style.height=v.replace("px","")-10+"px"):"vertical"===i?this._sliderContainer.style.height=v.replace("px","")-10+"px":this._sliderContainer.style.width=v.replace("px","")-25+"px",f.DOMUtils.disableClickPropagation(this._element),m?(this._sliderLink.addEventListener("click",f.DOMUtils.stop),this._sliderLink.addEventListener("click",this._expand),this.slider.addEventListener("blur",this._collapse)):this._expand();}}]),e;}(h.default);e.default=g;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(11),h=i(c),f=n(7),d=n(6),p=i(d),g=n(3),v=function(t){function e(t){r(this,e);var n=s({zoomInText:"+",zoomInTitle:"放大",zoomOutText:"-",zoomOutTitle:"缩小",animation:{disabled:!1,duration:300},position:"bottomright"},t),i=n.name?"zoom-"+n.name:"zoom",a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return a._element||(a._element=f.DOMUtils.createElement("div","ngr-control-zoom ngr-bar"),a._zoomInButton=a._createButton(a._options.zoomInText,a._options.zoomInTitle,"ngr-control-zoom-in",a._element,a.zoomIn),a._zoomOutButton=a._createButton(a._options.zoomOutText,a._options.zoomOutTitle,"ngr-control-zoom-out",a._element,a.zoomOut)),a.updateDisabled=a.updateDisabled.bind(a),a.zoomIn=a.zoomIn.bind(a),a.zoomOut=a.zoomOut.bind(a),a;}return a(e,t),u(e,[{key:"_onAdd",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onAdd",this).call(this,t),this._map.activeControl&&this._zoomInButton&&this._zoomOutButton&&this._map.activeControl.on("changeZoomStatus",this.updateDisabled),this;}},{key:"_onRemove",value:function value(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onRemove",this).call(this,t),this._map.activeControl&&this._zoomInButton&&this._zoomOutButton&&this._map.activeControl.off("changeZoomStatus",this.updateDisabled),this;}},{key:"_createButton",value:function value(t,e,n,i,r){var o=this,a=f.DOMUtils.createElement("a",n,i);return a.innerHTML=t,a.href="#",a.title=e,a.addEventListener("click",function(t){var e=null;return f.DOMUtils.stopPropagation(t),f.DOMUtils.preventDefault(t),e=r.call(o,t),o._refocusOnMap(),e;},!1),a.addEventListener("mousedown",f.DOMUtils.stopPropagation,!1),a.addEventListener("dblclick",f.DOMUtils.stopPropagation,!1),a;}},{key:"updateDisabled",value:function value(t,e){var n="ngr-disabled";return this._zoomInButton&&this._zoomOutButton&&(f.DOMUtils.removeClass(this._zoomInButton,n),f.DOMUtils.removeClass(this._zoomOutButton,n),2===e&&f.DOMUtils.addClass(this._zoomInButton,n),1===e&&f.DOMUtils.addClass(this._zoomOutButton,n)),this;}},{key:"_startZoomAnimation",value:function value(t,e,n){var i=this;return p.default.getInstance().ofNumber(t,e,n).on("update",function(t,e){var n=e.num;i._map.activeControl.zoomByFocalLength(n,!0,!1,!1);}).on("complete",function(){i._map.activeControl.zoomByFocalLength(e,!0,!0,!0);}).start(),this;}},{key:"zoomIn",value:function value(){if(this._map&&this._map.activeControl)if(this._options.animation.disabled)this._map.activeControl.zoom(.5,!0,!0,!1);else{var t=this._map.activeControl._curDistance,e=(0,g.isNumber)(this._options.animation.duration)?this._options.animation.duration:300;this._startZoomAnimation(t,t/2,e);}return this;}},{key:"zoomOut",value:function value(){if(this._map&&this._map.activeControl)if(this._options.animation.disabled)this._map.activeControl.zoom(2,!0,!0,!1);else{var t=this._map.activeControl._curDistance,e=(0,g.isNumber)(this._options.animation.duration)?this._options.animation.duration:300;this._startZoomAnimation(t,2*t,e);}return this;}}]),e;}(h.default);e.default=v;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=1,o=function(){function t(){n(this,t);}return i(t,null,[{key:"generate",value:function value(){return r++;}}]),t;}();e.default=o;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){var n={};for(var i in t){e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);}return n;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=a||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}}return t;},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(36),c=n(83),h=i(c),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=e.server,i=e.appKey,a=e.headers,u=r(e,["server","appKey","headers"]),c=s({Accept:"application/json","NAG-Version":l.version,"NAG-Key":i},a);n&&(this.server=n),this.options=s({headers:c},u);}return u(t,[{key:"requestRegions",value:function value(t){return h.default.get("region",s({},this.options,{params:t}));}},{key:"requestCategory",value:function value(t){return h.default.get("category/"+t,this.options);}},{key:"requestCategories",value:function value(t){return h.default.get("category/list",s({},this.options,{params:t}));}},{key:"requestMap",value:function value(t){return h.default.get("map/"+t,this.options);}},{key:"requestMaps",value:function value(t){return h.default.get("map/list",s({},this.options,{params:t}));}},{key:"requestPlanarGraph",value:function value(t){return h.default.get("planar_graph/"+t,this.options);}},{key:"requestPOI",value:function value(t){return h.default.get("poi/"+t,this.options);}},{key:"requestPOIChildren",value:function value(t){return h.default.get("poi/"+t+"/children",this.options);}},{key:"searchPOI",value:function value(t){return h.default.post("poi/search",s({},this.options,{body:JSON.stringify(t)}));}},{key:"searchPOIByCoord",value:function value(t){return h.default.post("poi/coord",s({},this.options,{body:JSON.stringify(t)}));}},{key:"requestNavigation",value:function value(t){return h.default.get("navi",s({},this.options,{params:t}));}},{key:"requestTransitNavigation",value:function value(t){return h.default.post("navi/transit",s({},this.options,{body:JSON.stringify(t)}));}},{key:"server",set:function set(t){h.default.defaults.baseURL=t;}}]),t;}();e.default=f;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(49),u=i(s),l=function(){function t(e){r(this,t);var n=null;n="string"==typeof e?JSON.parse(e):e,this.features={};for(var i in n){"object"===o(n[i])&&(this.features[i]=u.default.parse(i,n[i]));}t:for(var a in this.features){for(var s=this.features[a].features,l=s,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var d=f,p=d.properties.planar_graph;if(p){this._planarGraphId=p;break t;}}}}return a(t,[{key:"planarGraphId",get:function get(){return this._planarGraphId;}},{key:"features",get:function get(){return this._features;},set:function set(t){this._features=t;}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=n(12),h=n(104),f=i(h);c.touchEmulator&&(0,f.default)();var d=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._mapViews={},t;}return a(e,t),s(e,[{key:"initMapView",value:function value(t,e){return!this.hasMapView(t)&&(this._mapViews[t.name]=t,!0);}},{key:"reSize",value:function value(t,e,n){}},{key:"hasMapView",value:function value(t){return!!t&&(t in this._mapViews||t.name in this._mapViews);}},{key:"remove",value:function value(t){return!!this.hasMapView(t)&&(delete this._mapViews[t.name],!0);}},{key:"type",value:function value(){return null;}}]),e;}(l.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeEngine=void 0;var r=n(48),o=i(r);e.ThreeEngine=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(4),s=n(8),u=i(s),l=function(){function t(e){r(this,t),this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1,this._callback=e;}return o(t,[{key:"transformPoint",value:function value(t){return u.default.getFactory().createPoint(this.transformCoordinates(t.getCoordinateSequence(),t));}},{key:"transformPolygon",value:function value(t){var e=this.transformLinearRing(t.getExteriorRing(),t);null===e||!(e instanceof a.geom.LinearRing)||e.isEmpty();for(var n=[],i=0;i<t.getNumInteriorRing();i++){var r=this.transformLinearRing(t.getInteriorRingN(i),t);null===r||r.isEmpty()||(!(r instanceof a.geom.LinearRing),n.push(r));}return u.default.getFactory().createPolygon(e,n);}},{key:"createCoordinateSequence",value:function value(t){return u.default.getFactory().getCoordinateSequenceFactory().create(t);}},{key:"transformMultiLineString",value:function value(t){for(var e=[],n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||e.push(i));}return u.default.getFactory().createMultiLineString(e);}},{key:"transformCoordinates",value:function value(t,e){return this._callback(t,e);}},{key:"transformLineString",value:function value(t){return u.default.getFactory().createLineString(this.transformCoordinates(t.getCoordinateSequence(),t));}},{key:"transformMultiPoint",value:function value(t){for(var e=[],n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||e.push(i));}return u.default.getFactory().createMultiPoint(e);}},{key:"transformMultiPolygon",value:function value(t){for(var e=[],n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||e.push(i));}return u.default.getFactory().createMultiPolygon(e);}},{key:"copy",value:function value(t){return t.copy();}},{key:"transformGeometryCollection",value:function value(t){for(var e=[],n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this.pruneEmptyGeometry&&i.isEmpty()||e.push(i));}return this.preserveGeometryCollectionType?u.default.getFactory().createGeometryCollection(u.default.getFactory().toGeometryArray(e)):u.default.getFactory().createGeometryCollection(e);}},{key:"transform",value:function value(t){return t instanceof a.geom.Point?this.transformPoint(t,null):t instanceof a.geom.MultiPoint?this.transformMultiPoint(t,null):t instanceof a.geom.LinearRing?this.transformLinearRing(t,null):t instanceof a.geom.LineString?this.transformLineString(t,null):t instanceof a.geom.MultiLineString?this.transformMultiLineString(t,null):t instanceof a.geom.Polygon?this.transformPolygon(t,null):t instanceof a.geom.MultiPolygon?this.transformMultiPolygon(t,null):t instanceof a.geom.GeometryCollection?this.transformGeometryCollection(t,null):null;}},{key:"transformLinearRing",value:function value(t){var e=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===e)return u.default.getFactory().createLinearRing(null);var n=e.size();return n>0&&n<4&&!this.preserveType?u.default.getFactory().createLineString(e):u.default.getFactory().createLinearRing(e);}}]),t;}();e.default=l;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e){n(this,t),this._polygon=e,this._linearRingCouet=e.getNumInteriorRing();}return i(t,[{key:"shellCreator",value:function value(t){return this._shellCreator=t,this;}},{key:"shell",value:function t(e){var n=this._shellCreator();if(n)for(var t=this._polygon.getExteriorRing(),i=t.getCoordinates(),r=0;r<i.length;r++){e(n,i[r],r);}return this;}},{key:"holeCreator",value:function value(t){return this._holeCreator=t,this;}},{key:"holes",value:function value(t){if(this._linearRingCouet>0)for(var e=0;e<this._linearRingCouet;e++){var n=this._holeCreator();if(n)for(var i=this._polygon.getInteriorRingN(e),r=i.getCoordinates(),o=0;o<r.length;o++){t(n,r[o],o);}}return this;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.JTSUtils=e.Coordinate=e.GeometryFactory=void 0;var r=n(24),o=i(r),a=n(4),s=n(8),u=i(s),l=a.geom.Coordinate;e.GeometryFactory=o.default,e.Coordinate=l,e.JTSUtils=u.default;},function(t,e,n){var i,r;(function(t){"use strict";function o(t){return t&&t.__esModule?t:{default:t};}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}var s="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return typeof t==="undefined"?"undefined":_typeof(t);}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t==="undefined"?"undefined":_typeof(t);},u=n(1),l=n(12),c=n(36);n(199),n(193),n(195),n(197),n(192),n(201),n(198),n(200),n(194),n(196);var h=n(2),f=a(h),d=n(4),p=a(d),g=n(109),v=a(g),m=n(112),y=a(m),_=n(44),b=a(_),x=n(15),w=a(x),E=n(46),S=a(E),M=n(7),C=a(M),I=n(124),O=a(I),T=n(127),P=a(T),A=n(131),L=a(A),N=n(50),k=a(N),R=n(138),D=a(R),F=n(139),B=a(F),j=n(157),U=a(j),z=n(59),G=a(z),V=n(161),X=a(V),H=n(176),q=a(H),Y=n(178),W=a(Y),Z=n(181),J=a(Z),K=n(187),Q=a(K),$=n(9),tt=o($),et=n(102),nt=a(et);l.isDev&&(window.THREE=f),window.JSTS=p;var it={animation:v,camera:y,core:w,data:S,dom:C,engine:O,geom:P,fetch:tt.default,layer:L,location:k,map:D,math:B,navi:U,overlay:G,scene:q,sensor:W,style:J,view:Q,version:c.version};if(l.supportParticle&&u(it,{particle:X}),!l.isLite){var rt={tubeHelper:nt};it.helper=rt,it.control=b;}"object"===s(t)&&"object"===s(t.exports)?t.exports=it:(i=it,r="function"==typeof i?i.call(e,n,e,t):i,!(void 0!==r&&(t.exports=r))),window.NGR=it,Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{enumerable:!1});}).call(e,n(37)(t));},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.serialize=function(t){var e="",n=[];for(var i in t){if(t.hasOwnProperty(i)){var r=t[i];n.push(encodeURIComponent(i)+"="+encodeURIComponent(r));}}return n.join("&").length>0&&(e="?"+n.join("&")),e;},e.checkStatus=function(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e;};},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(2),s=i(a),u=function(){function t(e){r(this,t),this._loader=e,this._loader.setCrossOrigin(""),this._cache={};}return o(t,[{key:"load",value:function value(t,e,n,i){var r=this,o=s.Cache.get(t);if(o)return this._loader.load(t,e,n,i),void delete this._cache[t];var a=this._cache[t];return a?void a.push({load:e,error:i}):(a=[],this._cache[t]=a,void this._loader.load(t,function(n){e&&e(n),r._forCache(a,function(t){t.load&&t.load(n);}),delete r._cache[t];},function(t){n&&n(t);},function(e){r._forCache(a,function(t){t.error&&t.error(e);}),delete r._cache[t],i&&i(e);}));}},{key:"_forCache",value:function value(t,e){for(;0!==t.length;){e(t.pop());}}}]),t;}();e.default=u;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.LayerGroup=e.FeatureLayer=void 0;var r=n(25),o=i(r),a=n(30),s=i(a);e.FeatureLayer=o.default,e.LayerGroup=s.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(215),l=i(u),c=n(190),h=i(c),f=n(191),d=i(f),p=n(9),g=i(p),v=n(38),m=i(v),y=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._beaconContext=t,i._config=n||{},i;}return a(e,t),s(e,[{key:"name",value:function value(){return"InitBeaconConfigProtocal";}},{key:"params",value:function value(){return{beaconContext:this._beaconContext,config:this._config};}},{key:"success",value:function value(t,e,n){}}]),e;}(h.default),_=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._beacons=t,n;}return a(e,t),s(e,[{key:"name",value:function value(){return"LocationProtocal";}},{key:"params",value:function value(){return{beacons:this._beacons};}},{key:"success",value:function value(t,e,n){e(n.result.location);}}]),e;}(h.default),b=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._beacons=t,n;}return a(e,t),s(e,[{key:"name",value:function value(){return"BeaconsProtocal";}},{key:"params",value:function value(){return{beacons:this._beacons};}},{key:"success",value:function value(t,e,n){e(n.result.location);}}]),e;}(h.default),x=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n=new l.default();return t._workerExecutor=new d.default(n),t.startPositioning=!1,t;}return a(e,t),s(e,[{key:"fetchBeaconConfig",value:function value(t){if(!t||!t.appKey||!t.mapId)throw new Error("Invalid appKey or mapId");var e=t.server||"https://www.ipalmap.com/open/scene/ble/beacons",n=e+"?appKey="+t.appKey+"&mapId="+t.mapId;return(0,g.default)(n,{headers:{Accept:"application/json"}}).then(function(t){return t.json();});}},{key:"initBeaconConfig",value:function value(t,e){var n=e||{};return this._intervalID=setInterval(this.calculatingPos.bind(this),n.interval||1e3),this._workerExecutor.exec(new y(JSON.stringify(t),n));}},{key:"updateReceivedBeacons",value:function value(t){var e=this;return this._workerExecutor.exec(new b(JSON.stringify(t))).then(function(){e.startPositioning=!0;});}},{key:"destroy",value:function value(){clearInterval(this._intervalID),this._workerExecutor.destroy();}},{key:"calculatingPos",value:function value(){var t=this;this.startPositioning&&this._workerExecutor.exec(new _()).then(function(e){t.emit("locationChange",e);});}}]),e;}(m.default);e.default=x;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(85),s=i(a),u=n(9),l=i(u),c=function(){function t(){r(this,t),this._bluetoothLocationEngine=null;}return o(t,[{key:"initBeaconConfig",value:function value(t,e){var n={};return n.BeaconsCfgArray=t,n=JSON.stringify(n),this._bluetoothLocationEngine=new s.default(n,e),this;}},{key:"fetchBeaconConfig",value:function value(t){if(!t||!t.appKey||!t.mapId)throw new Error("Invalid appKey or mapId");var e=t.server||"https://www.ipalmap.com/open/scene/ble/beacons",n=e+"?appKey="+t.appKey+"&mapId="+t.mapId;return(0,l.default)(n,{headers:{Accept:"application/json"}}).then(function(t){return t.json();});}},{key:"locate",value:function value(t){if(!this._bluetoothLocationEngine)throw new Error("Invalid BleLocationEngine");var e={};return e.BeaconsArray=t,e=JSON.stringify(e),JSON.parse(this._bluetoothLocationEngine.locate(e));}},{key:"getBleLocationInfo",value:function value(){return JSON.parse(this._bluetoothLocationEngine.getBleLocationInfo());}}]),t;}();e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(9),u=i(s),l=function(){function t(e){r(this,t);var n=e.baseUrl,i=e.MAC;if(!n||!i)throw new Error("Invalid options");this._options=o({},e);}return a(t,[{key:"_parseBeacon",value:function value(t){var e=t.major,n=t.minor,i=t.accuracy,r=t.rssi;return{mac:e+":"+n,accuracy:Number(i),rssi:Number(r)};}},{key:"fetchLocation",value:function value(t){var e=this,n=this._options,i=n.baseUrl,r=n.MAC,o={};if(!Array.isArray(t))throw new Error("Invalid beacons");return o.ble=t.map(function(t){return e._parseBeacon(t);}).filter(function(t){var e=t.accuracy;return e>-1;}),o.userid=r,o.wifi=[],(0,u.default)(i,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(o)}).then(function(t){return t.json();});}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(134),s=i(a),u=function(){function t(){r(this,t);}return o(t,[{key:"provide",value:function value(t){var e=t.type,n=t.MAC,i=t.baseUrl,r=void 0===i?"http://locationtest.palmap.cn:80":i;if(!n)throw new Error("MAC");switch(e){case"BLE":return new s.default({baseUrl:r,MAC:n});default:throw new Error("Invalid locator type");}}}]),t;}();e.default=u;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0}),e.LocationStatus=e.LocationType=e.WiFiLocationManager=void 0;var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=i(l),h=n(9),f=i(h),d=n(129),p=n(36),g={server:"https://api.ipalmap.com",headers:{"NAG-Version":p.version,Accept:"application/json"}},v={MAC:"mac",PLANARGRAPH:"floorId",IP:"ip",UUID:"uuid",TAG:"tag"},m={ENTER:0,MOVE:1,OUT:2,HEARTBEAT:3},y=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if("undefined"==typeof i.appKey)throw new Error("should provide an appKey");return a.server=i.server||g.server,a.options={headers:s({},g.headers,{"NAG-Key":i.appKey})},a._parseURL(t,n),a._working=!1,a._cooldDownTime=1e3,a._type=t,a._value=n,a;}return a(e,t),u(e,[{key:"start",value:function value(){this._working||(this._working=!0,this._loop());}},{key:"stop",value:function value(){this._working&&(this._working=!1);}},{key:"_parseURL",value:function value(t,e){var n=void 0,i=t;switch(e instanceof Array?(n=e.join(","),i=t+"s"):n=e,t){case v.MAC:case v.PLANARGRAPH:case v.IP:case v.UUID:case v.TAG:this._url=this.server+"/pos?"+i+"="+n;break;default:this._url=this.server+"/pos?mac="+n;}}},{key:"_loop",value:function value(){var t=this;this._url&&(this._loopRequest=function(){return function(){return(0,f.default)(t._url,t.options).then(d.checkStatus).then(function(e){t._working&&(t._parse(e._bodyText),1e3!==t._cooldDownTime&&(t._cooldDownTime=1e3),t._loopRequest());}).catch(function(e){console.error(e),t._working&&setTimeout(function(){t._loopRequest();},t._cooldDownTime*=2);});};}(),this._loopRequest());}},{key:"_parse",value:function value(t){if(t&&0!==t.length)try{var e=JSON.parse(t);if("Feature"===e.type)this._parseFeature(e);else if("FeatureCollection"===e.type)for(var n=e.features,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;this._parseFeature(a);}}catch(t){console.error("parse error!");}}},{key:"_parseFeature",value:function value(t){this.emit("onParseFeature",{result:t,type:this._type,value:this._value});}}]),e;}(c.default),_=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._loops={},t._macPool={};var n=t;return t._onParseFeature=function(t){n._fireFeature(t);},t;}return a(e,t),u(e,[{key:"watch",value:function value(t,e,n){var i=this._generatorKey(t,e);if(!this.has(i)){var r=new y(t,e,n);this._loops[i]=r,r.on("onParseFeature",this._onParseFeature),r.start();}}},{key:"unWatch",value:function value(t,e){var n=this._generatorKey(t,e);if(this.has(n)){var i=this._loops[n];i.off("onParseFeature",this._onParseFeature),i.stop(),delete this._loops[n];}}},{key:"has",value:function value(t){return t in this._loops;}},{key:"_generatorKey",value:function value(t,e){return t+e;}},{key:"_fireFeature",value:function value(t){var e=t.result;if(e){var n=e.properties;if(n&&n.status){var i=n.id_data,r=void 0;switch(n.status){case"ENTER":i in this._macPool?r=m.MOVE:(r=m.ENTER,this._macPool[i]=1);break;case"MOVE":r=m.MOVE;break;case"OUT":r=m.OUT,delete this._macPool[i];break;case"HEARTBEAT":r=m.HEARTBEAT;break;default:r=m.OUT,delete this._macPool[i];}t.locationStatus=r,this.emit("onLocationChange",t);}}}}]),e;}(c.default);e.WiFiLocationManager=_,e.LocationType=v,e.LocationStatus=m;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++){n[e]=t[e];}return n;}return Array.from(t);}function o(t,e){var n={};for(var i in t){e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);}return n;}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0}),e.lifecycleEnum=void 0;var s=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0){}}catch(t){r=!0,o=t;}finally{try{!i&&s.return&&s.return();}finally{if(r)throw o;}}return n;}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance");};}(),u=l||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n){Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);}}return t;},l=n(1),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),h=n(9),f=i(h),d=n(46),p=n(64),g=i(p),v=n(48),m=i(v),y=n(21),_=i(y),b=n(19),x=i(b),w=n(25),E=i(w),S=n(24),M=i(S),C=n(44),I=n(3),O=n(4),T=n(59),P=n(32),A=i(P),L=n(56),N=i(L),k=n(50),R=n(6),D=i(R),F="undefined"==typeof Promise?n(14).Promise:Promise,B={UNLOADED:0,LOADING:1,LOADED:2,RUNNING:3,STOPPING:4,DESTROYED:5},j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=e.appKey,i=e.styleTemplate;if(!n||!i)throw new Error("Invalid appKey or sytleTemplate");this._options=l({target:"#ngr-webgl",server:"https://api.ipalmap.com",initRotationAngle:0,initSkewAngle:60,floorControl:{},zoomControl:{},compassControl:{},scaleControl:{},dimensionControl:{},multiFloorControl:{},buildingControl:{},light:{},navi:{},location:{},dynamicNavi:{}},e);var r=this._options,o=r.server,s=r.navi,u=r.location;this._status=B.UNLOADED,this._engine=new m.default(),this.planarGraphs={},this.dataSource=new d.DataSource({appKey:n,server:o}),this.navigationManager=this._initNaviManager(this.dataSource,s),this.locationManager=this._initLocationManager(u),this._onClick=this._onClick.bind(this),this.renderPlanarGraph=this.renderPlanarGraph.bind(this),this.addOverlay=this.addOverlay.bind(this),this.removeOverlay=this.removeOverlay.bind(this),this.addLayer=this.addLayer.bind(this),this.removeLayer=this.removeLayer.bind(this);}return c(t,[{key:"_initNaviManager",value:function value(t,e){var n=e.enable,i=void 0===n||n,r=o(e,["enable"]);return i?new A.default(t,r):null;}},{key:"_initDynimicNaviManager",value:function value(t){var e=t.enable,n=void 0!==e&&e,i=t.messageOptions,r=t.cameraOptions,o=t.locationOptions,a=this.mapView,s=this.navigationManager;return n&&s?new N.default(a,s,i,r,o):null;}},{key:"_initLocationManager",value:function value(t){var e=t.type;switch(e){case"Wi-Fi":return new k.WiFiLocationManager();case"bluetooth":return new k.BleWorkerManager();default:return null;}}},{key:"_genLightLayer",value:function value(t,e){var n=e.enable,i=void 0===n||n,r=e.position,o=void 0===r?[0,300,300]:r,a=e.id,s=void 0===a?1:a,u=null;if(i){var l=new d.Feature(M.default.createPoint(o.concat()),{id:s});u=new E.default("light",t),u.addFeature(l);}return u;}},{key:"_genControl",value:function value(t,e){var n=this,i=e.enable,r=void 0===i||i,a=o(e,["enable"]),s=null;if(r){switch(t){case"zoom":s=new C.ZoomControl(a);break;case"scale":s=new C.ScaleControl(a);break;case"compass":s=new C.CompassControl(a);break;case"dimension":s=new C.DimensionControl(a);break;case"floor":var l=a.floorList,c=o(a,["floorList"]);s=new C.FloorControl(c),s.setFloorList(l.concat().reverse()),s.on("change",function(t){var e=t.from,i=t.to,r=t.targetControl,o=Number(r.floorMap[i].altitude)||0,a=Number(r.floorMap[e].altitude)||0;console.log("floor change from "+e+" to "+i),r.setCurrentFloor(i),n.renderPlanarGraph(Number(i),{direction:o-a>0?"up":"down"});});break;case"multiFloor":var h=a.floorList,f=o(a,["floorList"]);s=new C.MultiFloorControl(f),s.setFloorList(h.concat().reverse());break;case"building":var d=a.baseAddress,p=void 0===d?"base":d,g=a.buildingList,v=o(a,["baseAddress","buildingList"]),m=g.concat();m.push({id:this._baseFloorId,address:p}),s=new C.FloorControl(u({name:"multiBuilding",className:"ngr-building-switcher"},v)),s.setFloorList(m.reverse()),s.on("change",function(t){var e=t.from,i=t.to,r=t.targetControl;console.log("building change from "+e+" to "+i),r.setCurrentFloor(i,function(t){n._clearFloorControl(),t===n.baseFloorId?n.loadBaseFloor():n.renderBuilding(t);});});break;default:console.warn("Invalid control type");}s&&s.addTo(this.mapView);}return s;}},{key:"_clear",value:function value(){return this._clearBuildingControl(),this._clearFloorControl(),this.planarGraphs={},this._baseFloorId=null,this._buildingInfoList=null,this._buildingList=null,this._floorInfoMap=null,this._mapId=null,this._offsetCoord=null,this;}},{key:"_createOverlay",value:function value(t){var e=t.element,n=t.url,i=o(t,["element","url"]),r=null;if(e&&e instanceof HTMLElement)r=new T.Overlay(e);else{if(!n)throw new Error("Invalid element or url");r=new T.IconOverlay(u({},i,{url:n}));}return r;}},{key:"_createLayer",value:function value(t,e){var n=this;if(!(0,I.isString)(t))throw new Error("Invalid layer name");var i=new E.default(t,this.mapView.styleGenerator);return e.forEach(function(t){return i.addFeature(n.createFeature(t));},this),i;}},{key:"_checkRunning",value:function value(){if(this._status!==B.RUNNING)throw new Error("map is not running");return this;}},{key:"offset",value:function t(e,n){var t=this.getOffset();return{x:e+t.x,y:n+t.y};}},{key:"unoffset",value:function value(t,e){var n=this.getOffset();return{x:t-n.x,y:e-n.y};}},{key:"_onClick",value:function value(t){var e=s(t.touches,1),n=e[0],i=n.clientX,r=n.clientY;if(!(0,I.isFunction)(this.onClick)||this._status!==B.RUNNING)return this;var o=this.mapView.searchObjectsByClient(i,r);if(0===o.length)return this;var a=o[0],u=a.feature,l=a.point,c=l.x,h=l.y,f=l.z,d=this.unoffset(c,h),p=d.x,g=d.y;return this.onClick({point:{x:p,y:g,z:f},feature:u,layer:u.parent}),this;}},{key:"_clearFloorControl",value:function value(){var t=this.floorControl||this.multiFloorControl;return this.mapView&&t&&(this.mapView.removeDomControl(t),this.floorControl=null,this.multiFloorControl=null),this;}},{key:"_clearBuildingControl",value:function value(){var t=this.buildingControl;return this.mapView&&t&&(this.mapView.removeDomControl(t),this.buildingControl=null),this;}},{key:"_initMapView",value:function value(){if(this.mapView)return this;var t=this._options,e=t.dynamicNavi,n=t.target,i=t.initRotationAngle,r=t.initSkewAngle,o=t.light,a=t.zoomControl,s=t.compassControl,l=t.scaleControl,c=t.dimensionControl,h=t.width,f=t.height,d=t.devicePixelRatio,p=void 0===d?1:d,v=t.clearColor,m=t.clearImage,y=t.fps,b=(h||window.innerWidth)/(f||window.innerHeight),w=new _.default(45,b,1,8e4),E=new g.default(this._styleJson),S=new x.default(n,{styleGenerator:E,initSkewAngle:r,initRotationAngle:i});return w.camera.position.set(0,0,100),S.activeCamera=w,this._engine.initMapView(S,{width:h,height:f,devicePixelRatio:p,clearColor:v,clearImage:m,fps:y}),this.mapView=S,this._sceneManager=S.sceneManager,this._activeControl=S.activeControl,this._light=this._genLightLayer(E,o),this.zoomControl=this._genControl("zoom",a),this.compassControl=this._genControl("compass",s),this.scaleControl=this._genControl("scale",l),this.dimensionControl=this._genControl("dimension",u({enable:!1},c)),S.start(),S.gestureManager.on("tap",this._onClick),this.dynamicNavigationManager=this._initDynimicNaviManager(e),this;}},{key:"_renderBuilding",value:function value(t){var e=this;this._status=B.LOADED;var n=this._options,i=n.defaultFloorId,r=n.floorControl,o=n.multiFloorControl,a=this.mapView,s=this.onLoad,l=this._floorInfoMap[t].concat(),c=void 0;if(this.floorControl=this._genControl("floor",u({},r,{floorList:l})),this.floorControl||(this.multiFloorControl=this._genControl("multiFloor",u({enable:!1,floorList:l},o))),i)c=i;else{c=l[0].id;for(var h=l,f=Array.isArray(h),d=0,h=f?h:h[Symbol.iterator]();;){var p;if(f){if(d>=h.length)break;p=h[d++];}else{if(d=h.next(),d.done)break;p=d.value;}var g=p;if(g.default||g.defaultFloor){c=g.id;break;}}}return this._status=B.RUNNING,this.multiFloorControl?(this.multiFloorControl.defaultFloorId=c,this.multiFloorControl.setCurrentFloor(c),this._renderMultiPlanarGraphs(t),this.multiFloorControl.highlightPGs([c])):(this.renderPlanarGraph(c),this.floorControl&&(this.floorControl.defaultFloorId=c,this.floorControl.setCurrentFloor(c))),this._baseFloorId||a.next(1,function(){e.scaleControl&&e.scaleControl.update(),(0,I.isFunction)(s)&&s(e);}),this;}},{key:"_renderMultiPlanarGraphs",value:function value(t){var e=this,n=this._options.floorHeight,i=void 0===n?60:n,r=this._light,o=this.mapView,a=this._floorInfoMap[t].concat().map(function(t){var n=t.id;return new d.PlanarGraph(e.planarGraphs[n]);});o.floorHeight=i,o.activeControl._enableVerticalMove=!0,o.drawMultiPlanarGraph(a),r&&o.addLayer(r);}},{key:"getLayer",value:function value(t){var e=null;return this.mapView&&(e=this.mapView.getLayer(t)),e;}},{key:"hasLayer",value:function value(t){return!!this.getLayer(t);}},{key:"showPlanarGraphs",value:function value(t){return this._checkRunning(),this.multiFloorControl||console.warn("map is not in multi-floor mode"),this.mapView.showPlanarGraphs(t);}},{key:"renderPlanarGraph",value:function value(t,e){var n=this;this._checkRunning(),this.multiFloorControl&&console.warn("map is in multi-floor mode");var i=this.planarGraphs[t];if(!i)throw new Error("planarGraph unloaded");if(this.mapView.drawPlanarGraph(new d.PlanarGraph(i)),this._light&&this.mapView.addLayer(this._light),e){var r=e.direction,o=this.mapView.activeControl.target,a=this.unoffset(o.x,o.y),s=a.x,u=a.y,l=0;this.enableVerticalMove(),"up"===r?l=-100:"down"===r&&(l=100),D.default.getInstance().ofNumber(l,0,300).on("update",function(t,e){var i=e.num;n.moveToPoint({x:s,y:u,z:i},{needUpdate:!0,needCollision:!1,emitEnd:!1});}).on("complete",function(){n.move({x:s,y:u,z:0},{needUpdate:!0,needCollision:!0,emitEnd:!0});}).start();}return this;}},{key:"renderBuilding",value:function value(t){var e=this;if(this._buildingList.indexOf(t)===-1)throw new Error("Invalid building id");var n=this.dataSource;return this._status=B.LOADING,this._floorInfoMap[t]?this._renderBuilding(t):n.requestPOIChildren(t).then(function(i){return e._floorInfoMap[t]=i.concat(),F.all(i.map(function(t){return n.requestPlanarGraph(t.id);}));}).then(function(n){var i=e._floorInfoMap[t].map(function(t){return t.id;});n.forEach(function(t,n){e.planarGraphs[i[n]]=t;}),e._renderBuilding(t);}),this;}},{key:"createFeature",value:function value(t){var e=t.id,n=t.type,i=t.coordinates,r=t.properties,o=null;if(!(0,I.isNumber)(e))throw new Error("Invalid id: id must be a number");switch(n){case"Point":o=M.default.createPoint(i);break;case"Polygon":o=M.default.createPolygon(i);break;case"LineString":o=M.default.createLineString(i);break;case"MultiPoint":o=M.default.createMultiPoint(i);break;case"MultiPolygon":o=M.default.createMultiPolygon(i);break;case"MultiLineString":o=M.default.createMultiLineString(i);break;default:throw new Error("Invalid geometry type");}return new d.Feature(o,u({},r,{id:e}));}},{key:"createLayer",value:function value(t){var e=this,n=t.name,i=t.needOffset,r=void 0===i||i,o=t.features;if(!(0,I.isString)(n))throw new Error("Invalid layer name");var a=new E.default(n,this.mapView.styleGenerator);if(r)try{a.coordinateSystem=this.mapView.coordinateSystem;}catch(t){throw new Error("Invalid map coordinate system");}return o.forEach(function(t){return a.addFeature(e.createFeature(t));},this),a;}},{key:"addLayer",value:function value(t){var e=null;return this._checkRunning(),e=t instanceof E.default?t:this.createLayer(t),this.mapView.addLayer(e),e;}},{key:"removeLayer",value:function value(t){return this._checkRunning(),this.mapView.removeLayer(t),this;}},{key:"addOverlay",value:function value(t){var e=t.needOffset,n=void 0===e||e,i=t.position,a=o(t,["needOffset","position"]);if(this._checkRunning(),!(0,I.isArray)(i))throw new Error("Invalid position: position must be an array");var s=this._createOverlay(a);return n&&(s.coordinateSystem=this.mapView.coordinateSystem),this.mapView.addOverlay(s),s.position=new(Function.prototype.bind.apply(O.geom.Coordinate,[null].concat(r(i))))(),s;}},{key:"removeOverlay",value:function value(t){return this._checkRunning(),this.mapView.removeOverlay(t),this;}},{key:"getOffset",value:function value(){if(this._offsetCoord)return this._offsetCoord.copy();try{return this._offsetCoord=new(Function.prototype.bind.apply(O.geom.Coordinate,[null].concat(r(this.mapView.coordinateSystem.getOffset()))))(),this._offsetCoord.copy();}catch(t){return null;}}},{key:"setScale",value:function value(t,e,n,i,r,o){return this._sceneManager.setScale(t,e,n,i,r,o),this;}},{key:"setPosition",value:function value(t,e,n,i,r,o){return this._sceneManager.setPosition(t,e,n,i,r,o),this;}},{key:"quickSetPosition",value:function value(t,e,n,i,r,o){return this._sceneManager.quickSetPosition(t,e,n,i,r,o),this;}},{key:"setRotation",value:function value(t,e,n,i,r,o){return this._sceneManager.setRotation(t,e,n,i,r,o),this;}},{key:"setVisible",value:function value(t,e,n,i){return this._sceneManager.setVisible(t,e,n,i),this;}},{key:"setColor",value:function value(t,e,n,i){return this._sceneManager.setColor(t,e,n,i),this;}},{key:"resetColor",value:function value(t,e,n){return this._sceneManager.resetColor(t,e,n),this;}},{key:"setOpacity",value:function value(t,e,n,i){return this._sceneManager.setOpacity(t,e,n,i),this;}},{key:"resetStyle",value:function value(t,e,n,i){return this._sceneManager.resetStyle(t,e,n,i),this;}},{key:"setValueChangeByFeatures",value:function value(t,e,n){for(var i,r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++){o[a-3]=arguments[a];}return(i=this._sceneManager).setValueChangeByFeatures.apply(i,[t,e,n].concat(o)),this;}},{key:"setDistanceRange",value:function value(t){var e=t.minDistance,n=t.maxDistance;return(0,I.isNumber)(e)&&(this._activeControl.minDistance=e),(0,I.isNumber)(n)&&(this._activeControl.maxDistance=n),this;}},{key:"getDistance",value:function value(){return this._activeControl.getfocalLength();}},{key:"setSkewAngleRange",value:function value(t){var e=t.minAngle,n=t.maxAngle;return(0,I.isNumber)(e)&&(this._activeControl.minAngle=e),(0,I.isNumber)(n)&&(this._activeControl.maxAngle=n),this;}},{key:"getSkewAngle",value:function value(){return this._activeControl.getSkew();}},{key:"getRotationAngle",value:function value(){return this._activeControl.getRotate();}},{key:"enableVerticalMove",value:function value(){return this._activeControl.enableVerticalMove(),this;}},{key:"disableVerticalMove",value:function value(){return this._activeControl.disableVerticalMove(),this;}},{key:"move",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.x,i=t.y,r=t.z,o=void 0===r?0:r,a=e.needUpdate,s=e.needCollision,u=e.emitEnd;return this._activeControl.move(n,i,o,a,s,u),this;}},{key:"moveToPoint",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.x,i=t.y,r=t.z,o=void 0===r?0:r,a=this.offset(n,i),s=a.x,u=a.y,l=e.needUpdate,c=e.needCollision,h=e.emitEnd;return this._activeControl.moveToPoint(s,u,o,l,c,h),this;}},{key:"fitBounds",value:function value(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(4!==t.length&&6!==t.length)throw new Error("Invalid bounds");var n=e.ratio,i=e.hasOffset,r=e.needUpdate,o=e.needCollision,a=e.emitEnd,u=e.needAnimation,l=e.needRotateToZero,c=null;if(4===t.length){var h=s(t,4),f=h[0],d=h[1],p=h[2],g=h[3],v=this.offset(f,d),m=v.x,y=v.y,_=this.offset(p,g),b=_.x,x=_.y;c=[m,y,b,x];}else{if(6!==t.length)throw new Error("Invalid bounds");var w=s(t,6),E=w[0],S=w[1],M=w[2],C=w[3],I=w[4],O=w[5],T=this.offset(E,S),P=T.x,A=T.y,L=this.offset(C,I),N=L.x,k=L.y;c=[P,A,M,N,k,O];}this._activeControl(c,n,i,r,o,a,u,l);}},{key:"zoom",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.needUpdate,i=e.needCollision,r=e.emitEnd;return this._activeControl.zoom(t,n,i,r),this;}},{key:"zoomByFocalLength",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.needUpdate,i=e.needCollision,r=e.emitEnd;return this._activeControl.zoomByFocalLength(t,n,i,r),this;}},{key:"skewTo",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.needUpdate,i=e.needCollision,r=e.emitEnd;return this._activeControl.skewTo(t,n,i,r),this;}},{key:"skew",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.needUpdate,i=e.needCollision,r=e.emitEnd;return this._activeControl.skew(t,n,i,r),this;}},{key:"rotate",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.center,i=e.needUpdate,r=e.needCollision,o=e.emitEnd,a=0,s=0;if(n&&n.x&&n.y){var u=this.offset(n.x,n.y),l=u.x,c=u.y;a=l,s=c;}return this._activeControl.rotate(a,s,t,i,r,o),this;}},{key:"rotateTo",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.center,i=e.needUpdate,r=e.needCollision,o=e.emitEnd,a=0,s=0;if(n&&n.x&&n.y){var u=this.offset(n.x,n.y),l=u.x,c=u.y;a=l,s=c;}return this._activeControl.rotateTo(a,s,t,i,r,o),this;}},{key:"getBuildingIdList",value:function value(){return[].concat(this._buildingList||[]);}},{key:"loadBaseFloor",value:function value(){var t=this,e=this.dataSource,n=this.mapView,i=this._baseFloorId,r=this.onLoad,o=this._options.buildingControl,a=[];return i?(this._status=B.LOADING,this._buildingList&&0!==this._buildingList.length?a.push(!1):a.push(e.requestPOIChildren(i)),this.planarGraphs[i]?a.push(!1):a.push(e.requestPlanarGraph(i)),F.all(a).then(function(e){var a=s(e,2),l=a[0],c=a[1];t._status=B.LOADED,l&&(t._buildingInfoList=l.filter(function(t){return"BUILDING"===t.type;}),t._buildingList=t._buildingInfoList.map(function(t){return t.id;})),c&&(t.planarGraphs[i]=c),t.buildingControl||(t.buildingControl=t._genControl("building",u({},o,{buildingList:t._buildingInfoList.concat()}))),t._status=B.RUNNING,t.renderPlanarGraph(i),n.next(1,function(){t.scaleControl&&t.scaleControl.update(),(0,I.isFunction)(r)&&r(t);});}).catch(function(t){return console.error(t,t.stack);}),this):(console.warn("no base floor"),this);}},{key:"render",value:function value(t){var e=this;if(this._status===B.LOADING||this._status===B.DESTROYED)throw new Error("map is loading or destroyed");var n=this._options.styleTemplate,i=this.dataSource,r=void 0;return this._clear(),r=this._styleJson?new F(function(t){return t(e._styleJson);}):(0,I.isString)(n)?(0,f.default)(n,{}).then(function(t){return t.json();}):new F(function(t){return t(n);}),this._status=B.LOADING,r.then(function(n){return e._styleJson=n,t?i.requestMap(t):i.requestMaps();}).then(function(t){return e._mapId=t.list?t.list[0].poi:t.poi,i.requestPOI(e._mapId);}).then(function(t){if(e._floorInfoMap={},e._initMapView(),"BUILDING"===t.type)e._buildingList=[t.id],e.renderBuilding(t.id);else{if("PLANAR_GRAPH"!==t.type)throw new Error("Invalid poi type");e._baseFloorId=t.id,e._buildingList=[],e.loadBaseFloor();}}).catch(function(t){return console.error(t,t.stack);}),this;}},{key:"destroy",value:function value(){if(this._status===B.DESTROYED)throw new Error("map is already destroyed");return this._clear(),this.mapView.gestureManager.off("tap",this._onClick),this._engine.remove(this.mapView),this.navigationManager=null,this.dynamicNavigationManager=null,this.locationManager=null,this.planarGraphs=null,this.mapView=null,this.dataSource=null,this.floorControl=null,this.zoomControl=null,this.compassControl=null,this.scaleControl=null,this._styleJson=null,this._options=null,this._light=null,this._engine=null,this._status=B.DESTROYED,(0,I.isFunction)(this.onDestoy)&&this.onDestroy(this),this;}},{key:"baseFloorId",get:function get(){return this._baseFloorId;},set:function set(t){console.warn("baseFloorId is readonly");}},{key:"currentPlanarGraphIds",get:function get(){return this.mapView.currentPlanarGraphIds;}}]),t;}();e.default=j,e.lifecycleEnum=B;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;var r=n(137),o=i(r);e.Map=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var r=n(27),o=i(r);e.Math=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(79),s=i(a),u=n(8),l=i(u),c=n(53),h=i(c),f=n(55),d=i(f),p=n(28),g=i(p),v=n(31),m=i(v),y=n(29),_=i(y),b=n(4),x=n(71),w=i(x),E=1e-8,S=function(){function t(e,n,i){r(this,t),this._g=e,this._h=n,this._vertexLoader=i;}return o(t,[{key:"astar",value:function value(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=new w.default(_.default.compareTo),a=new s.default(function(t,e){return t.equals(e);}),u=[],l=this._vertexLoader.findNearestPath(t,e),c=this._vertexLoader.findNearestPath(n,i),h=this._vertexLoader.findNearestVertexOnNearestPath(t,l),f=this._vertexLoader.findNearestVertexOnNearestPath(n,c);if(!h||!f)return[];if(h.equals(f)){if(b.operation.distance.DistanceOp.distance(t,n)<.01)return u;var d=void 0;return d=l===c?this.genPathForOneLine(l,t,n):b.operation.distance.DistanceOp.distance(t,h.vertex.shape)<=b.operation.distance.DistanceOp.distance(n,h.vertex.shape)?this.genPathForOneLine(c,h.vertex.shape,n):this.genPathForOneLine(l,t,n.vertex.shape),d&&u.push(d),u;}var p=void 0;if(p=r?Math.abs(r.indexOf(e)-r.indexOf(i)):e===i?0:1,!h.equals(f)){o.enq(h);var g=void 0;t:for(;o.size()>0;){g=o.deq(),a.add(g),g.needCalcExtraPath=!0;for(var v=g.paths,m=v,y=Array.isArray(m),x=0,m=y?m:m[Symbol.iterator]();;){var E;if(y){if(x>=m.length)break;E=m[x++];}else{if(x=m.next(),x.done)break;E=x.value;}var S=E,M=S.to;if(!a.contains(M)){var C=this._g.g(g,S,p)+g.g,I=this._h.h(g,f);if(this._isContainsByQueue(o,M)?C+I<M.g+M.h&&(M.g=C,M.h=I,M.parent=g,this._removeByQueue(o,M),o.enq(M)):(M.g=C,M.h=I,M.parent=g,o.enq(M)),M.equals(f)){do{u.push(M.parent.findPath(M)),M=M.parent;}while(!M.equals(h));break t;}}}}}return u.reverse(),this._adjustPaths(u,l,c,t,n),this._filterExtraPath(u),u;}},{key:"genPathForOneLine",value:function value(t,e,n){var i=t.shape.getCoordinates(),r=this.genLineStringByCoordinates(i),o=l.default.getFactory().createPoint(this.getProjectOnLine(e,t.shape)),a=l.default.getFactory().createPoint(this.getProjectOnLine(n,t.shape)),s=this.getIndexProjectliedOn(o,r),u=this.getIndexProjectliedOn(a,r),c=void 0;if(s===u){var h=r[s];c=b.operation.distance.DistanceOp.distance(e,h.getStartPoint())>b.operation.distance.DistanceOp.distance(n,h.getStartPoint());}else c=s>u;c&&i.reverse(),r=this.genLineStringByCoordinates(i),s=this.getIndexProjectliedOn(o,r),u=this.getIndexProjectliedOn(a,r);var f=[];if(f.push(o.getCoordinate()),u-s===1)f.push(r[s].getEndPoint().getCoordinate());else for(var d=s+1;d<u;d++){f.push(r[d].getStartPoint().getCoordinate()),d===u-1&&f.push(r[d].getEndPoint().getCoordinate());}f.push(a.getCoordinate());var p=new b.geom.LineString(l.default.getFactory().getCoordinateSequenceFactory().create(f),l.default.getFactory()),g=this._getNewAStarPath(t,p);return g;}},{key:"genLineStringByCoordinates",value:function value(t){if(!t||0===t.length)return null;for(var e=new Array(t.length-1),n=0;n<t.length-1;n++){var i=t[n],r=t[n+1],o=new b.geom.LineString(l.default.getFactory().getCoordinateSequenceFactory().create([i,r]),l.default.getFactory());e[n]=o;}return e;}},{key:"getProjectOnLine",value:function value(t,e){var n=b.operation.distance.DistanceOp.nearestPoints(t,e)[0];return n;}},{key:"getIndexProjectliedOn",value:function value(t,e){var n=void 0;for(var i in e){this._checkIfPointOnLine(t,e[i])&&(n=i);}return n;}},{key:"_getNewAStarPath",value:function value(t,e){var n=t.planarGraphId,i=new h.default();i.planarGraphId=n,i.direction=t.direction,i.rank=t.rank,i.shape=e,i.from=this._getNewVertex(e.getStartPoint(),n),i.to=this._getNewVertex(e.getEndPoint(),n);var r=new m.default(i,this._vertexLoader,!1);return r;}},{key:"_getNewVertex",value:function value(t,e){if(!t)return null;var n=new d.default();return n.planarGraphId=e,n.shape=t,n;}},{key:"_checkIfPointOnLine",value:function value(t,e){return b.operation.distance.DistanceOp.distance(t,e)<E;}},{key:"_needCalcExtraPath",value:function value(t,e,n,i){var r=i.vertex.id;return r===e.vertex.id||r===n.vertex.id||r===t.from.id||r===t.to.id;}},{key:"_adjustPaths",value:function value(t,e,n,i,r){t&&0!==t.length&&(this._adjustFirstPath(t,e,i),this._adjustLastPath(t,n,r),this._filterExtraPath(t));}},{key:"_adjustFirstPath",value:function value(t,e,n){var i=this.getProjectOnLine(n,e.shape),r=l.default.getFactory().createPoint(i);this._addFromExactPath(t,r,e);}},{key:"_adjustLastPath",value:function value(t,e,n){var i=this.getProjectOnLine(n,e.shape),r=l.default.getFactory().createPoint(i);this._addToExtraPath(t,r,e);}},{key:"_addToExtraPath",value:function value(t,e,n){var i=t.length-1,r=this._checkIfPointOnLine(e,n.shape);if(r&&!(t[i]instanceof g.default)){var o=t[i],a=this._genToExactPath(o,n,e);o.path.id===n.id?t.splice(i,0,a):t[0]=a;}}},{key:"_addFromExactPath",value:function value(t,e,n){var i=this._checkIfPointOnLine(e,n.shape);if(!(i||t[0]instanceof g.default)){var r=t[0],o=this._genFromExtraPath(e,n,r);r.path.id===n.id?t[0]=o:t.splice(0,0,o);}}},{key:"_genFromExtraPath",value:function value(t,e,n){var i=this._splitPath(n,e,!0),r=[],o=this.getIndexProjectliedOn(t,i);r.push(t.getCoordinate());for(var a=o+1;a<i.length;a++){r.push(i[a].getStartPoint().getCoordinate()),a===i.length-1&&r.push(i[a].getEndPoint().getCoordinate());}if(1===r.length){var s=i.length>o?o:i.length-1;r.push(i[s].getEndPoint().getCoordinate());}var u=new b.geom.LineString(l.default.getFactory().getCoordinateSequenceFactory().create(r),l.default.getFactory());return this._getNewAStarPath(e,u);}},{key:"_genToExactPath",value:function value(t,e,n){for(var i=this._splitPath(t,e,!0),r=[],o=this.getIndexProjectliedOn(n,i),a=0;a<o;a++){r.push(i[a].getStartPoint().getCoordinate()),a===o-1&&r.push(i[a].getEndPoint().getCoordinate());}if(0===r.length){var s=i.length>o?o:i.length-1;r.push(i[s].getStartPoint().getCoordinate());}r.push(n.getCoordinate());var u=new b.geom.LineString(l.default.getFactory().getCoordinateSequenceFactory().create(r),l.default.getFactory()),c=this._getNewAStarPath(e,u);return c;}},{key:"_splitPath",value:function value(t,e,n){for(var i=[],r=e.shape.getCoordinates(),o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;i.push(new b.geom.Coordinate(u.x,u.y,u.z));}var l=void 0;if(t.path.id===e.id)l=t.reverse;else if(n){var c=t.reverse?t.path.shape.getEndPoint():t.path.shape.getStartPoint();l=b.operation.distance.DistanceOp.distance(c,e.shape.getEndPoint())>b.operation.distance.DistanceOp.distance(c,e.shape.getStartPoint());}else{var h=t.reverse?t.path.shape.getStartPoint():t.path.shape.getEndPoint();l=b.operation.distance.DistanceOp.distance(h,e.shape.getStartPoint())>b.operation.distance.DistanceOp.distance(h,e.shape.getEndPoint());}l&&i.reverse();var f=this.genLineStringByCoordinates(i);return f;}},{key:"_filterExtraPath",value:function value(t){if(t&&0!==t.length){var e=t[0],n=void 0;t.length>1&&(n=t[t.length-1]),this._checkThenRemove(t,e),this._checkThenRemove(t,n);}}},{key:"_checkThenRemove",value:function value(t,e){if(e&&e instanceof m.default){var n=e.path.rank;if(10===n){var i=t.indexOf(e);t.splice(i,1);}}}},{key:"_isContainsByQueue",value:function value(t,e){var n=!1;return t.forEach(function(t){t.equals(e)&&(n=!0);}),n;}},{key:"_removeByQueue",value:function value(t,e){var n=t._elements,i=null;for(var r in n){var o=n[r];o.equals(e)&&(i=r);}i&&n.splice(i,1);}}]),t;}();e.default=S;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i,r,o,a){n(this,t),this.mapId=e,this.direction=i,this.rank=r,this.fromLocationId=o,this.toLocationId=a;}return i(t,[{key:"id",get:function get(){return this._id;},set:function set(t){this._id=t;}},{key:"mapId",get:function get(){return this._mapId;},set:function set(t){this._mapId=t;}},{key:"direction",get:function get(){return this._direction;},set:function set(t){this._direction=t;}},{key:"rank",get:function get(){return this._rank;},set:function set(t){this._rank=t;}},{key:"fromLocationId",get:function get(){return this._fromLocationId;},set:function set(t){this._fromLocationId=t;}},{key:"toLocationId",get:function get(){return this._toLocationId;},set:function set(t){this._toLocationId=t;}},{key:"from",get:function get(){return this._from;},set:function set(t){this._from=t;}},{key:"to",get:function get(){return this._to;},set:function set(t){this._to=t;}},{key:"categoryId",get:function get(){return this._categoryId;},set:function set(t){this._categoryId=t;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=n(52),c=i(l),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._func=t,n;}return a(e,t),s(e,[{key:"g",value:function value(t,n,i){var r=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"g",this).call(this,t,n,i);return r+=this._func(t,n,i);}}]),e;}(c.default);e.default=h;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"h",value:function value(t,e){return Math.abs(e.vertex.altitude-t.vertex.altitude)+t.vertex.shape.distance(e.vertex.shape);}}]),t;}();e.default=r;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"g",value:function value(t,e,n){}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0}),e.naviFilter=e.NaviUtils=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(32),l=i(u),c=n(19),h=i(c),f=n(16),d=i(f),p=n(23),g=i(p),v=n(8),m=i(v),y=n(3),_=n(4),b=function(){function t(){a(this,t);}return s(t,[{key:"onFilter",value:function value(t,e){return!1;}}]),t;}(),x=function(t){function e(t){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._distanceThreshold=t,n;}return o(e,t),s(e,[{key:"onFilter",value:function value(t,e){for(var n=0,i=t,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;n+=s;}return!(n>this._distanceThreshold);}}]),e;}(b),w=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return o(e,t),s(e,[{key:"onFilter",value:function value(t,e){return!(!e||2!==e.length||e[0].category!==e[1].category);}}]),e;}(b),E=function(){function t(){a(this,t);}return s(t,null,[{key:"getMultiNavigation",value:function value(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!(t instanceof h.default&&e instanceof l.default&&(0,y.isArray)(n)))throw new Error("NaviUtils: Invalid parameters");var o=e.getPlanarGraphOrder();if((0,y.isEmpty)(o))throw new Error("NaviUtils: Empty navigation data");var a=r.floorHeight,s=void 0===a?40:a,u=r.id,c=void 0===u?1:u,f=r.name,p=void 0===f?"multiNavigation":f,v=r.zOffset,_=void 0===v?0:v,b=t._planarGraphs.concat(),x={},w={},E=function E(t,e){var n=b.indexOf(t),i=b.indexOf(e);return n<i?-1:n>i?1:0;},S=_,M=[];for(var C in o){var I=o[C];if(b.indexOf(I)!==-1){var O=e.getDistancesByPlanarGraph(I),T=e.getConnectionInfoByPlanarGraph(I),P=(0,y.isArray)(i)?i:[],A=!1;if(n.indexOf(I)===-1){var L=!0;A=!0,0===P.length&&(L=!1);for(var N=P,k=Array.isArray(N),R=0,N=k?N:N[Symbol.iterator]();;){var D;if(k){if(R>=N.length)break;D=N[R++];}else{if(R=N.next(),R.done)break;D=R.value;}var F=D;if(!F.onFilter(O,T)){L=!1;break;}}L&&(A=!1);}A&&n.push(I);}}n.sort(E);for(var B=n,j=Array.isArray(B),U=0,B=j?B:B[Symbol.iterator]();;){var z;if(j){if(U>=B.length)break;z=B[U++];}else{if(U=B.next(),U.done)break;z=U.value;}var G=z;x[G]=S,S+=s;}for(var V=o,X=Array.isArray(V),H=0,V=X?V:V[Symbol.iterator]();;){var q;if(X){if(H>=V.length)break;q=V[H++];}else{if(H=V.next(),H.done)break;q=H.value;}var Y=q;if(Y in x){var W=e.getNavigateByPlanarGraph(Y),Z=x[Y],J=void 0;if((0,y.isPresent)(w[Y])?J=W.features[++w[Y]]:(J=W.features[0],w[Y]=0),!J)throw new Error("getMultiNavigation: Invalid feature");for(var K=J.geometry.points.coordinates,Q=K,$=Array.isArray(Q),tt=0,Q=$?Q:Q[Symbol.iterator]();;){var et;if($){if(tt>=Q.length)break;et=Q[tt++];}else{if(tt=Q.next(),tt.done)break;et=tt.value;}var nt=et;nt.z=Z;}M=M.concat(K);}}var it=m.default.getFactory().createLineString(M),rt=new d.default(p);return rt.addFeature(new g.default(it,{id:c})),rt;}},{key:"getMultiTransits",value:function value(){}},{key:"_getDistance",value:function value(t,e){var n=0;return n=Math.hypot?Math.hypot(e.x-t.x,e.y-t.y):Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));}},{key:"getDistance",value:function value(e,n){var i=e,r=n;return(0,y.isArray)(e)&&(i=new _.geom.Coordinate(e[0],e[1])),(0,y.isArray)(n)&&(r=new _.geom.Coordinate(n[0],n[1])),t._getDistance(i,r);}}]),t;}(),S={NaviCustomFilter:b,NaviDistanceFilter:x,NaviSameCateFilter:w};e.NaviUtils=E,e.naviFilter=S;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++){n[e]=t[e];}return n;}return Array.from(t);}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(29),u=i(s),l=n(28),c=i(l),h=n(31),f=i(h),d=n(4),p=function(){function t(e){o(this,t),this._pathService=e;}return a(t,[{key:"findNearestVertexOnNearestPath",value:function value(t,e){if(null===e)return null;var n=e.from,i=e.to,r=this._pathService.queryConnectionsByVertex(n);if(0!==r.length)return new u.default(i,this);if(r=this._pathService.queryConnectionsByVertex(i),0!==r.length)return new u.default(n,this);var o=t.distance(e.from.shape)<t.distance(e.to.shape)?e.from:e.to;return new u.default(o,this);}},{key:"findNearestPath",value:function value(t,e){var n=this._pathService.queryQuadTree(e);if(!n)return null;var i=t.getEnvelopeInternal();i.minx-=200,i.miny-=200,i.maxx+=200,i.maxy+=200;var r=n.query(i);r.isEmpty()&&(r=this._pathService.queryAllPathFromIndex(e));for(var o=void 0,a=Number.MAX_VALUE,s=r.array_,u=Array.isArray(s),l=0,s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++];}else{if(l=s.next(),l.done)break;c=l.value;}var h=c,f=h.shape,p=d.operation.distance.DistanceOp.distance(t,f);a>p&&(a=p,o=h);}return o;}},{key:"loadPaths",value:function value(t,e){var n=this,i=[],o=this._pathService.queryPathsByVertex(t);e||(o=o.filter(function(t){return 10!==t.rank;})),0!==o.length&&i.push.apply(i,r(o.map(function(e){return e.from.id===t.id?new f.default(e,n,!1):new f.default(e,n,!0);})));var a=this._pathService.queryConnectionsByVertex(t);return 0===a.length?i:(i.push.apply(i,r(a.map(function(e){return e.from.id===t.id?new c.default(e,n,!1):new c.default(e,n,!0);}))),i);}}]),t;}();e.default=p;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(47),s=n(9),u=i(s),l=function(){function t(){var e=this;r(this,t),this.cuid="palmap",this.accessToken="24.ad5029324bbdd18b08ade3ae8d477cb9.2592000.1496474155.282335-9602705",this.audioElmt=(0,a.createElement)("audio"),this.audioElmt.id="audioElmt",document.body.appendChild(this.audioElmt),this.tokenReqUrl="https://api.ipalmap.com/baidu/oauth/2.0/token?grant_type=client_credentials&client_id=R1DRhpUC1k1B7GhNe5Ol9myt&client_secret=7d37b04b8d197409cef1d385edca99c0",(0,u.default)(this.tokenReqUrl,{}).then(function(t){t.json().then(function(t){e.accessToken=t.access_token;});}).catch(function(t){throw Error(t);});}return o(t,[{key:"playMessage",value:function value(t){var e="http://tsn.baidu.com/text2audio?lan=zh&cuid="+this.cuid+"&ctp=1&tok="+this.accessToken+"&tex="+t;this.audioElmt.setAttribute("src",e),this.audioElmt.play();}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(153),l=i(u),c=n(155),h=i(c),f=n(57),d=i(f),p=n(151),g=i(p),v=function(){function t(e,n){a(this,t),this.x=e.x-n.x,this.y=e.y-n.y;}return s(t,[{key:"length",value:function value(){return Math.sqrt(this.x*this.x+this.y*this.y);}}],[{key:"dot",value:function value(t,e){return t.x*e.x+t.y*e.y;}}]),t;}(),m=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return o(e,t),s(e,[{key:"mate",value:function value(t){var e={},n=t.property,i=t.lastLineSpot,r=t.nextLineSpot,o=e.startPt=t.lineString.getCoordinate(),a=void 0,s=void 0;return r||(a=t.lineString.points.coordinates[1],s=new v(a,o),e.isEndSegment=!0),!i||i.property.altitude&&n.altitude&&n.altitude!==i.property.altitude?(e.isEndSegment||(a=r.lineString.getCoordinate(),s=new v(a,o)),e.distance=s.length(),e.orientation=this._computeOrientation(s.x,s.y)):n.altitude&&r.property.altitude&&n.altitude!==r.property.altitude?(a=t.lineString.points.coordinates[1],s=new v(a,o),e.distance=s.length(),e.direction=this._computeDirection(i.lineString.getCoordinate(),o,a),e.isUp=n.altitude-r.property.altitude<0,e.targetFloor=r.property.floorAddress):(e.isEndSegment||(a=r.lineString.getCoordinate(),s=new v(a,o)),e.distance=s.length(),e.direction=this._computeDirection(i.lineString.getCoordinate(),o,a)),e.orientationAngle=360*Math.atan2(s.y,s.x)/(2*Math.PI)-90,e;}},{key:"_computeOrientation",value:function value(t,e){var n=360*-Math.atan2(e,t)/(2*Math.PI);return n>=-15&&n<15?"east":n>=15&&n<75?"southeast":n>=-75&&n<-15?"northeast":n>=75&&n<105?"south":n>=-105&&n<-75?"north":n>=-165&&n<-105?"northwest":n>=105&&n<165?"southwest":n>=165&&n<180||n>=-180&&n<-165?"west":"";}},{key:"_computeDirection",value:function value(t,e,n){var i=new v(n,e),r=new v(e,t),o=v.dot(i,r)/(i.length()*r.length()),a=360*Math.acos(o)/(2*Math.PI),s=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x),u=void 0;u=s>0?"left":"right";var l=null;if(a>=0&&a<15)l="forward";else if(a>=15&&a<60)switch(u){case"left":l="leftForward";break;case"right":l="rightForward";break;default:throw new Error("WalkingMate#mate: Invalid direction");}else if(a>=60&&a<120)switch(u){case"left":l="left";break;case"right":l="right";break;default:throw new Error("WalkingMate#mate: Invalid direction");}else if(a>=120&&a<165)switch(u){case"left":l="leftBackward";break;case"right":l="rightBackward";break;default:throw new Error("WalkingMate#mate: Invalid direction");}else a>=165&&a<=180&&(l="backward");return l;}}]),e;}(d.default),y={defaultMate:new d.default(),walkingMate:new m()},_=function(t){function e(){a(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.stateMate=new g.default(y.walkingMate),t;}return o(e,t),s(e,[{key:"nextMove",get:function get(){return this._nextMove;},set:function set(t){this._nextMove=t;}},{key:"distanceToEnd",get:function get(){return this._distanceToEnd;},set:function set(t){this._distanceToEnd=t;}},{key:"distance",get:function get(){return this._distance;},set:function set(t){this._distance=t;}},{key:"direction",get:function get(){return this._direction;},set:function set(t){this._direction=t;}},{key:"orientation",get:function get(){return this._orientation;},set:function set(t){this._orientation=t;}},{key:"orientationAngle",get:function get(){return this._orientationAngle;},set:function set(t){this._orientationAngle=t;}},{key:"targetFloor",get:function get(){return this._targetFloor;},set:function set(t){this._targetFloor=t;}},{key:"isUp",get:function get(){return this._isUp;},set:function set(t){this._isUp=t;}},{key:"isEndSegment",get:function get(){return this._isEndSegment;},set:function set(t){this._isEndSegment=t;}}]),e;}(h.default),b=[new _()],x=function(t){function e(){return a(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,b));}return o(e,t),e;}(l.default);e.default=x;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=n(24),h=i(c),f=n(4),d=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.reset(),t;}return a(e,t),s(e,[{key:"start",value:function value(t,e){for(var n=this._segments.length-1;n>=0;n--){var i=this._segments[n];if(this._isOnSegment(t,e,i))return this._currentIndex!==n&&this._changeSegment(i),this._currentIndex=n,!0;}return!1;}},{key:"returnNearestSegment",value:function value(t,e,n){for(var i={index:-1,segment:null},r=0;r<this._segments.length;++r){var o=this._segments[r];if(o.spot.property.planar_graph===n&&this._isOnSegment(t,e,o)){i.index=r,i.segment=o;break;}}return i;}},{key:"findNearestSegment",value:function value(t,e,n,i,r){var o=this.returnNearestSegment(t,e,n),a=o.index,s=o.segment;if(!s)return!1;if(null!==this._currentIndex){if(this._currentIndex<a){this._currentIndex=a,this._center=new f.geom.Coordinate(t,e);var u=this._segments[this._currentIndex+1],l=!s.state.isEndSegment&&!s.state.targetFloor,c=l?u.spot.lineString.getCoordinate():s.spot.lineString.points.coordinates[1];i&&c.distance(new f.geom.Coordinate(t,e))<=r&&0!==this.currentIndex&&(this._center=c,this.emit("onArriveSegEnd")),this._changeSegment(s,this._center);}else{var h=s.spot.lineString.getCoordinate();if(h.distance(new f.geom.Coordinate(t,e))>h.distance(this._center)){this._center=new f.geom.Coordinate(t,e);var d=this._segments[this._currentIndex+1],p=!s.state.isEndSegment&&!s.state.targetFloor,g=p?d.spot.lineString.getCoordinate():s.spot.lineString.points.coordinates[1];i&&g.distance(new f.geom.Coordinate(t,e))<=r&&0!==this.currentIndex&&(this._center=g,this.emit("onArriveSegEnd")),this._changeLocation(this._center);}}}else this._currentIndex=a,this._center=new f.geom.Coordinate(t,e),this._changeSegment(s,this._center);return!0;}},{key:"clearCurSt",value:function value(){this._currentIndex=0,this._center=null;}},{key:"reset",value:function value(){var t=this;this._currentIndex=0,this._center=null,this._segments=[],this.clearCurSt(),this._trigger&&this._trigger.forEach(function(e){t._segments.push(e);});}},{key:"_isOnSegment",value:function value(t,e,n){for(var i=h.default.createPoint([t,e]),r=n.spot;r;){var o=r.lineString;if(o.buffer(.1).contains(i))return!0;if(r=r.nextLineSpot,r&&r.isValid)break;}return!1;}},{key:"_changeSegment",value:function value(t,e){this.emit("onSegmentChange",t),this.emit("onLocationChange",e);}},{key:"_changeLocation",value:function value(t){this.emit("onLocationChange",t);}},{key:"currentIndex",get:function get(){return this._currentIndex;}},{key:"center",get:function get(){return this._center;}},{key:"trigger",set:function set(t){this._trigger=t,this.reset();}}]),e;}(l.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(154),s=n(24),u=i(s),l=function(){function t(e){r(this,t),this._spots=[];for(var n=e.features,i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++];}else{if(o=n.next(),o.done)break;s=o.value;}for(var l=s,c=l.properties,h=l.geometry,f=h.coordinates,d=[],p=f,g=Array.isArray(p),v=0,p=g?p:p[Symbol.iterator]();;){var m;if(g){if(v>=p.length)break;m=p[v++];}else{if(v=p.next(),v.done)break;m=v.value;}var y=m;if(d.push(y),2===d.length&&!this.needToThrow(d)){var _=new a.LineSpot(c,u.default.createLineString(d)),b=this._spots[this._spots.length-1];b&&(b.nextLineSpot=_),_.lastLineSpot=b,this._spots.push(_);}2===d.length&&d.shift();}}}return o(t,[{key:"next",value:function value(){return this._spots.shift();}},{key:"has",value:function value(){return 0!==this._spots.length;}},{key:"needToThrow",value:function value(t){return Math.sqrt(Math.pow(t[0][0]-t[1][0],2)+Math.pow(t[0][1]-t[1][1],2))<.01;}}]),t;}();e.default=l;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(57),l=i(u),c=function(t){function e(t,n,i){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._mate=t,a._map=n,a._reduce=i,a._spots=[],a;}return a(e,t),s(e,[{key:"mate",value:function value(t){if(!t.isValid)return null;var e=this._mate.mate(t);if(e.distanceToEnd=e.distance,!t.nextLineSpot)return e;for(var n=t.nextLineSpot,i=this._mate.mate(n);n&&(i.direction&&"forward"===i.direction||!i.direction)&&!i.orientation;){if(e.distance+=i.distance,n.isValid=!1,i.isEndSegment){e.isEndSegment=!0;break;}if(i.targetFloor){e.targetFloor=i.targetFloor,e.isUp=i.isUp;break;}n=n.nextLineSpot,i=this._mate.mate(n);}for(n=t.nextLineSpot;n;){i=this._mate.mate(n),e.distanceToEnd+=i.distance,n=n.nextLineSpot;}for(var r=t,o=void 0,a=0,s=!1;r;){o=this._mate.mate(r),a+=o.distance,r=r.nextLineSpot,!s&&o.targetFloor&&(e.distanceToConnection=a,s=!0);}return e;}}]),e;}(l.default);e.default=c;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(e,i,r){n(this,t),this._spot=e,this._state=i,this._lastSegment=this._nextSegment=null,this._audioProvider=r;}return i(t,[{key:"getMessageInNavi",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null,i=null;return this._nextSegment&&this._nextSegment.state.direction&&(i=this._parseDirectionInNavi(this._nextSegment.state.direction)),this.state.isEndSegment&&(i="到达目的地附近"),this.state.targetFloor&&(i=this.state.isUp?"乘电梯上行至"+this.state.targetFloor+"层":"乘电梯下行至"+this.state.targetFloor+"层"),n=t?"直行"+parseFloat(this.state.distance-t).toFixed(1)+"米后"+i:"直行"+parseFloat(this.state.distance).toFixed(1)+"米后"+i,parseFloat(this.state.distance-t).toFixed(1)<=0&&(n=""+i),e||(this._audioProvider?this._audioProvider.playMessage(n):console.log("Audio not provided when initializing DynamicNavigation")),n;}},{key:"_parseDirectionInNavi",value:function value(t){var e=null;switch(t){case"leftForward":e="左前方直行";break;case"leftBackward":e="左后方直行";break;case"left":e="向左转";break;case"rightForward":e="右前方直行";break;case"rightBackward":e="右后方直行";break;case"right":e="向右转";break;case"backward":e="向后转";break;default:throw new Error("WalkingMate#message: Invalid direction or orientation");}return e;}},{key:"_parseOrientationInNavi",value:function value(t){var e=null;switch(t){case"east":e="向东";break;case"west":e="向西";break;case"south":e="向南";break;case"north":e="向北";break;case"northeast":e="向东北";break;case"northwest":e="向西北";break;case"southeast":e="向东南";break;case"southwest":e="向西南";break;default:throw new Error("WalkingMate#message: Invalid direction or orientation");}return e;}},{key:"getMessageInList",value:function value(){var t=null;if(this.state.direction?t=this._parseDirection(this.state.direction):this.state.orientation&&(t=this._parseOrientation(this.state.orientation)),this.state.isEndSegment)return t+"后到达目的地";if(this.state.targetFloor){var e=this.state.isUp?"后上行至"+this.state.targetFloor+"层":"后下行至"+this.state.targetFloor+"层";return""+t+e;}return t;}},{key:"_parseDirection",value:function value(t){var e=null;switch(t){case"forward":e="直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"leftForward":e="左前方直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"leftBackward":e="左后方直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"left":e="向左直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"rightForward":e="右前方直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"rightBackward":e="右后方直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"right":e="向右直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"backward":e="向后直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;default:throw new Error("WalkingMate#message: Invalid direction or orientation");}return e;}},{key:"_parseOrientation",value:function value(t){var e=null;switch(t){case"east":e="向东直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"west":e="向西直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"south":e="向南直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"north":e="向北直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"northeast":e="向东北直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"northwest":e="向西北直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"southeast":e="向东南直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;case"southwest":e="向西南直行"+parseFloat(this.state.distance).toFixed(1)+"米";break;default:throw new Error("WalkingMate#message: Invalid direction or orientation");}return e;}},{key:"spot",get:function get(){return this._spot;}},{key:"state",get:function get(){return this._state;}},{key:"lastSegment",set:function set(t){this._lastSegment=t;},get:function get(){return this._lastSegment;}},{key:"nextSegment",set:function set(t){this._nextSegment=t;},get:function get(){return this._nextSegment;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(152),s=i(a),u=function(){function t(e){r(this,t),this.states=e;}return o(t,[{key:"provider",value:function value(t,e,n){return new s.default(t,e,n);}},{key:"states",get:function get(){return this._states;},set:function set(t){this._states=t;}}]),t;}();e.default=u;},function(t,e){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=function(){function t(e){r(this,t),this.property=e||{};}return o(t,[{key:"property",get:function get(){return this._property;},set:function set(t){this._property=t;}}]),t;}(),s=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o._coordinate=i,o;}return i(e,t),o(e,[{key:"coordinate",get:function get(){return this._coordinate;}}]),e;}(a),u=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o._lineString=i,o._lastLineSpot=o._nextLineSpot=null,o._isValid=!0,o;}return i(e,t),o(e,[{key:"lineString",get:function get(){return this._lineString;}},{key:"lastLineSpot",get:function get(){return this._lastLineSpot;},set:function set(t){this._lastLineSpot=t;}},{key:"nextLineSpot",get:function get(){return this._nextLineSpot;},set:function set(t){this._nextLineSpot=t;}},{key:"isValid",get:function get(){return this._isValid;},set:function set(t){this._isValid=t;}}]),e;}(a);e.Spot=a,e.PointSpot=s,e.LineSpot=u;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"message",get:function get(){return this._message;},set:function set(t){this._message=t;}},{key:"stateMate",get:function get(){return this._stateMate;},set:function set(t){this._stateMate=t;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(150),s=i(a),u=n(147),l=i(u),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,t),this._provider=e,this._audioProvider=n?new l.default():null,this._segments=[];}return o(t,[{key:"addSegment",value:function value(t){return 0!==this._segments.length&&(this._segments[this._segments.length-1].nextSegment=t,t.lastSegment=this._segments[this._segments.length-1]),this._segments.push(t),this;}},{key:"removeSegment",value:function value(t){return this._segments.splice(t,1),this;}},{key:"getSegment",value:function value(t){return this._segments[t];}},{key:"size",value:function value(){return this._segments.length;}},{key:"forEach",value:function value(t){[].forEach.call(this._segments,t);}},{key:"trigger",value:function value(t){var e=new s.default(t),n=this.provider.states;for(this._segments=[];e.has();){for(var i=e.next(),r=n,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var u;if(o){if(a>=r.length)break;u=r[a++];}else{if(a=r.next(),a.done)break;u=a.value;}var l=u,c=l.stateMate.mate(i);if(c){var h=Object.create(Object.getPrototypeOf(l));for(var f in c){h[f]=c[f];}var d=this._provider.provider(i,h,this._audioProvider);this.addSegment(d);}}}}},{key:"provider",get:function get(){return this._provider;},set:function set(t){this._provider=t;}}]),t;}();e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.CustomG=e.DynamicNavigation=e.naviFilter=e.NaviUtils=e.PathService=e.NavigateManager=void 0;var r=n(32),o=i(r),a=n(54),s=i(a),u=n(145),l=n(56),c=i(l),h=n(142),f=i(h);e.NavigateManager=o.default,e.PathService=s.default,e.NaviUtils=u.NaviUtils,e.naviFilter=u.naviFilter,e.DynamicNavigation=c.default,e.CustomG=f.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(58),c=i(l),h=n(4),f={anchor:[0,0],className:"",crossOrigin:!1,interactive:!0},d=function(t){function e(t){r(this,e);var n=s({},f,t),i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,null,n));return i._dom=i._createIcon(),i;}return a(e,t),u(e,[{key:"_createIcon",value:function value(){var t=this,e=this._options,n=e.url,i=e.interactive;if(!n)throw new Error("url not set in IconOverlay options.");var r=this._createImg(n);return r.addEventListener("load",function(e){t.emit("load",t,e);},!1),r.addEventListener("error",function(e){t.emit("error",t,e);},!1),r.addEventListener("click",function(e){i&&t.emit("click",t,e);},!1),this._setStyles(r),r;}},{key:"_createImg",value:function value(t){var e=this._options,n=e.crossOrigin,i=e.alt,r=document.createElement("img");return r.src=t,n&&(r.crossOrigin=""),i&&(r.alt=i),r;}},{key:"setStyles",value:function value(t){return s({},this._options,t),this._setStyles(this._dom),this;}},{key:"_setStyles",value:function value(t){var e=this._options.className;e&&(t.className="ngr-iconOverlay "+e);var n=this._options,i=n.anchor,r=n.size;return i=this._translate2Coord(i),r=this._translate2Coord(r),i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px"),this;}},{key:"_translate2Coord",value:function value(t){if(!t)return null;var e=void 0,n=void 0;return Array.isArray(t)?(e=t[0]?t[0]:0,n=t[1]?t[1]:0):(e=t.x?t.x:0,n=t.y?t.y:0),new h.geom.Coordinate(e,n);}},{key:"url",set:function set(t){t!==this._options.url&&(this._dom.src=t);}}]),e;}(c.default);e.default=d;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=n(4),h=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.particleCount=10,t.colors=[[.5,.5,.5],[1,0,0]],t.position=new c.geom.Coordinate(0,0,0),t;}return a(e,t),s(e,[{key:"parent",get:function get(){return this._parent;},set:function set(t){this._parent=t;}},{key:"particleCount",get:function get(){return this._particleCount;},set:function set(t){this._particleCount=t,this.emit("valueChange",this,"particleCount",t);}},{key:"position",get:function get(){return this._position;},set:function set(t){this._position=t,this.emit("valueChange",this,"position",t);}},{key:"colors",get:function get(){return this._colors;},set:function set(t){this._colors=t,this.emit("valueChange",this,"colors",t);}}]),e;}(l.default);e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=n(5),c=i(l),h=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._particlesIndex=[],n._particles={},s(n,t||{}),n;}return a(e,t),u(e,[{key:"addParticle",value:function value(t){t&&this.has(t)||(this._particles[t.id]=t,this._particlesIndex[this._particlesIndex.length]=t.id,this.emit("addParticle",this,t),t.parent=this);}},{key:"removeParticle",value:function value(t){if(t&&this.has(t)){delete this._particles[t.id];var e=this._particlesIndex.indexOf(t.id);e!==-1&&this._particlesIndex.splice(e,1),this.emit("removeParticle",this,t),t.parent=null;}}},{key:"forEach",value:function value(t){var e=this;this._particlesIndex.forEach(function(n,i){t(e._particles[n],i);});}},{key:"getIndex",value:function value(t){return this._particlesIndex.indexOf(t);}},{key:"has",value:function value(t){return!!t&&t.id in this._particlesIndex;}},{key:"texture",get:function get(){return this._texture;},set:function set(t){this._texture=t;}}]),e;}(c.default);e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleEngine=e.ParticleGroup=e.Particle=void 0;var r=n(159),o=i(r),a=n(160),s=i(a),u=n(60),l=i(u);e.Particle=o.default,e.ParticleGroup=s.default,e.ParticleEngine=l.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(61),l=i(u),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"getStyle",value:function value(t){return this.style;}},{key:"style",set:function set(t){this._style=t;},get:function get(){return this._style;}}]),e;}(l.default);e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(61),l=i(u),c=new RegExp(),h=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._keys=[],t._styles={},t;}return a(e,t),s(e,[{key:"addKey",value:function value(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++){n[i]=arguments[i];}n.forEach(function(e){t._keys.push(e);});}},{key:"addStyle",value:function value(t,e){this._styles[t]=e;}},{key:"getStyle",value:function value(t){for(var e in this._keys){var n=this._keys[e];if(n in t.properties)for(var i in this._styles){if(c.compile(i,"g"),c.test(t.properties[n]))return this._styles[i];}}return this.defaultStyle;}},{key:"defaultStyle",get:function get(){return this._defaultStyle;},set:function set(t){this._defaultStyle=t;}}]),e;}(l.default);e.default=h;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"merge",value:function value(t,e,n){return this;}},{key:"has",value:function value(t){return!1;}},{key:"destroy",value:function value(){}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(2),u=i(s),l=n(96),c=n(3),h={undeferred:!1,depthMax:1/0,objectsThreshold:8,overlap:.15},f=function(){function t(e){r(this,t),this.options=o({},h,e),this._octree=new l.Octree(o({},this.options)),this.featureMapping={},this.groupMapping={},this.virtualGroups={};}return a(t,[{key:"update",value:function value(){this._octree.update();}},{key:"_add",value:function value(t,e,n){if(t instanceof u.Group)for(var i=t.children,r=i,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var l=s;this._add(l,e,n);}else e.push(t.uuid),this._octree.add(t);}},{key:"add",value:function value(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!((0,c.isBlank)(t)||(0,c.isBlank)(e)||(0,c.isBlank)(n))){(0,c.isBlank)(this.featureMapping[e])&&(this.featureMapping[e]={}),(0,c.isBlank)(this.featureMapping[e][n])&&(this.featureMapping[e][n]=[]);var r=this.featureMapping[e][n],o=i.layerGroupId,a=i.sceneGroupId,s=null;if(o&&a){if(this.groupMapping[a]){if(o!==this.groupMapping[a])throw new Error("OctreeManager: Unmatch in groupMapping");}else this.groupMapping[a]=o;this.virtualGroups[o]||(this.virtualGroups[o]=new u.Group()),s=this.virtualGroups[o],s.add(t),t._virtual=!0;}this._add(t,r,s);}}},{key:"remove",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t._virtual&&t.parent.remove(t),t instanceof u.Group)for(var n=t.children,i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;this.remove(s,e);}else this._octree.remove(t),e&&t.geometry.dispose();}},{key:"removeByLayerAndFeature",value:function value(t,e){if(this.featureMapping[t]&&this.featureMapping[t][e]){var n=this.featureMapping[t][e];if(n&&n.length>0)for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a,u=this._octree.objectsMap[s];u&&this.remove(u);}delete this.featureMapping[t][e];}}},{key:"has",value:function value(t,e){var n=this.featureMapping;return n[t]&&n[t][e]&&n[t][e].length>0;}},{key:"rebuild",value:function value(){this._octree.rebuild();}},{key:"clearOctree",value:function value(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._octree.objects,n=e.length;if(this._octree=new l.Octree(o({},this.options)),this.featureMapping={},this.groupMapping={},this.virtualGroups={},t)for(var i=n-1;i>=0;--i){var r=e[i];e.splice(i,1),r.geometry.dispose();}}},{key:"searchByClientPoint",value:function value(t,e,n){var i=new u.Raycaster(),r=[];i.setFromCamera(new u.Vector2(t,e),n);for(var o=this._octree.search(i.ray.origin,i.far,!0,i.ray.direction),a=l.RaycasterUtils.intersectOctreeObjects(i,o),s=a,c=Array.isArray(s),h=0,s=c?s:s[Symbol.iterator]();;){var f;if(c){if(h>=s.length)break;f=s[h++];}else{if(h=s.next(),h.done)break;f=h.value;}for(var d=f,p=d.object,g=p.visible;p&&(g=p.visible);){p=p.parent;}g&&r.push(d);}return r;}}]),t;}();e.default=f;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayNodeId=e.OverlayNode=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(2),h=r(c),f=n(17),d=i(f),p=n(21),g=i(p),v=-2,m=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._layerOverlay={},n._overlays={},n._domMapping={},n._domScene=new h.Scene(),n._addOverlay=n._addOverlay.bind(n),n._removeOverlay=n._removeOverlay.bind(n),n._reAttachOverlay=n._reAttachOverlay.bind(n),n._removeLayer=n._removeLayer.bind(n),n._onSceneChange=n._onSceneChange.bind(n),n._overlayValueChange=n._overlayValueChange.bind(n),n;}return s(e,t),u(e,[{key:"_removeOverlay",value:function value(t,e,n){this.removeOverlay(e,n);}},{key:"_reAttachOverlay",value:function value(t,e,n){this.reAttachOverlay(e,n);}},{key:"_removeLayer",value:function value(t,e){var n=this._layerOverlay[e.id];if(n)for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a,u=this._overlays[s];u&&this.removeOverlay(e,u);}delete this._layerOverlay[e.id];}},{key:"_onSceneChange",value:function value(t,e,n){var i=this._layerOverlay[e.id];if(i&&null===n)switch(t){case"visible":for(var r=i,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s,l=this._overlays[u],c=arguments.length<=3?void 0:arguments[3];l&&(c===!0?l.targetDom.style.display=l._options.defaultDisplay:c===!1&&(l.targetDom.style.display="none"));}break;case"position":for(var h=i,f=Array.isArray(h),d=0,h=f?h:h[Symbol.iterator]();;){var p;if(f){if(d>=h.length)break;p=h[d++];}else{if(d=h.next(),d.done)break;p=d.value;}var g=p,v=this._domMapping[g];if(v){var m=arguments.length<=3?void 0:arguments[3];v.position.setZ(m[2]);}}}}},{key:"_overlayValueChange",value:function value(t,e,n){var i=this._domMapping[t.id];"position"===e&&(i.position.setX(n.x),i.position.setY(n.y),i.position.setZ(n.z||i.position.z));}},{key:"_addOverlay",value:function value(t,e,n){n.id in this._domMapping&&this.removeOverlay(n.layer,n);var i=new h.CSS2DObject(n.targetDom),r=this._layerOverlay[e.id];r||(r=[],this._layerOverlay[e.id]=r),r.push(n.id),this._overlays[n.id]=n,this._domMapping[n.id]=i,this._domScene.add(i),n.attach(e),n.on("valueChange",this._overlayValueChange),n.position&&this._overlayValueChange(n,"position",n.position);}},{key:"add",value:function value(t){t instanceof d.default&&l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t),t instanceof g.default&&(this._camera=t.camera);}},{key:"removeOverlay",value:function value(t,e){if(e.id in this._domMapping){var n=this._domMapping[e.id],i=this._layerOverlay[t.id];if(this._domScene.remove(n),delete this._domMapping[e.id],delete this._overlays[e.id],e.detach(t),i){var r=i.indexOf(e.id);r!==-1&&i.splice(r,1),0===i.length&&delete this._layerOverlay[t.id];}e.off("valueChange",this._overlayValueChange),e.targetDom.style.display=e._options.defaultDisplay;}}},{key:"reAttachOverlay",value:function value(t,e){if(!t||!e)throw new Error("reAttachOverlay: Invalid parameter");var n=e.layer,i=this._layerOverlay[n.id];if(i){var r=i.indexOf(e.id);if(r!==-1){var o=this._layerOverlay[t.id];o||(o=[],this._layerOverlay[t.id]=o),i.splice(r,1),o.push(e.id),e.detach(n),e.attach(t);}}}},{key:"onAdd",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),this._domRenderer=t.mapView.engine.getDomRenderer(t.mapView),this._sceneManager.mapView.on("addOverlay",this._addOverlay),this._sceneManager.mapView.on("removeOverlay",this._removeOverlay),this._sceneManager.mapView.on("reAttachOverlay",this._reAttachOverlay),this._sceneManager.mapView.on("removeLayer",this._removeLayer),this._sceneManager.on("onSceneChange",this._onSceneChange);}},{key:"onRemove",value:function value(t){this._sceneManager.mapView.off("addOverlay",this._addOverlay),this._sceneManager.mapView.off("removeOverlay",this._removeOverlay),this._sceneManager.mapView.off("reAttachOverlay",this._reAttachOverlay),this._sceneManager.mapView.off("removeLayer",this._removeLayer),this._sceneManager.off("onSceneChange",this._onSceneChange),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t);}},{key:"render",value:function value(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this._domRenderer&&this._camera&&this._domRenderer.render(this._domScene,this._camera);}}]),e;}(d.default);e.OverlayNode=m,e.OverlayNodeId=v;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleNodeId=e.ParticleNode=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(2),h=r(c),f=n(76),d=i(f),p=n(17),g=i(p),v=-3,m=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._particleGroup=new h.Group(),n._group_group={},n._clock=new h.Clock(),n._valueChange=n._valueChange.bind(n),n._addParticle=n._addParticle.bind(n),n._removeParticle=n._removeParticle.bind(n),n._addParticleGroup=n._addParticleGroup.bind(n),n._removeParticleGroup=n._removeParticleGroup.bind(n),n;}return s(e,t),u(e,[{key:"_valueChange",value:function value(t,e){var n=t.parent;if(n){var i=self._group_group[n.id];if(!i)return;var r=n.getIndex(t);if(r===-1)return;var o=i.emitters[r];if(!o)return;for(var a=arguments.length,s=Array(a>2?a-2:0),u=2;u<a;u++){s[u-2]=arguments[u];}switch(e){case"position":o.position.value=o.position.value.set(s[0],s[1],s[2]);break;case"particleCount":o.particleCount=s[0];break;case"colors":for(var l=[],c=s,f=Array.isArray(c),d=0,c=f?c:c[Symbol.iterator]();;){var p;if(f){if(d>=c.length)break;p=c[d++];}else{if(d=c.next(),d.done)break;p=d.value;}var g=p;l[l.length]=new h.Color(g[0],g[1],g[2]);}o.color.value=l;}}}},{key:"_addParticle",value:function value(t,e){var n=this._group_group[t.id];n&&this.addEmitterByParticle(t,n,e);}},{key:"_removeParticle",value:function value(t,e){var n=this._group_group[t.id];n&&this.removeEmitterByParticle(t,n,e);}},{key:"_addParticleGroup",value:function value(t){var e=self._group_group[t.id];e||(e=new d.default.Group({texture:{value:h.ImageUtils.loadTexture(t.texture)}}),self._group_group[t.id]=e,t.forEach(function(n){self.addEmitterByParticle(t,e,n);}),t.on("addParticle",self._addParticle),t.on("removeParticle",self._addParticle),self._particleGroup.add(e.mesh));}},{key:"_removeParticleGroup",value:function value(t){var e=this,n=this._group_group[t.id];n&&(t.forEach(function(i){e.removeEmitterByParticle(t,n,i);}),this._particleGroup.remove(n.mesh),delete this._group_group[t.id],t.off("addParticle",this._addParticle),t.off("removeParticle",this._addParticle));}},{key:"addEmitterByParticle",value:function value(t,e,n){for(var i=[],r=n.colors,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;i[i.length]=new h.Color(u[0],u[1],u[2]);}var l=new d.default.Emitter({type:1,maxAge:{value:1},size:{value:1},velocity:{value:new h.Vector3(3,3,3),distribution:d.default.distributions.DISC},position:{value:new h.Vector3(n.position.x,n.position.y,n.position.z||0),radius:5,spread:new h.Vector3(3,3,3)},color:{value:i},particleCount:n.particleCount});e.addEmitter(l),n.on("valueChange",this._valueChange);}},{key:"removeEmitterByParticle",value:function value(t,e,n){var i=t.getIndex(n);i!==-1&&(e.removeEmitter(e.emitters[i]),n.off("valueChange",this._valueChange));}},{key:"onAdd",value:function value(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t);var n=t.get(-1);n.renderScene.add(this._particleGroup),t.mapView&&t.mapView.particleEngine&&t.mapView.particleEngine.on("addParticleGroup",this._addParticleGroup);}},{key:"onRemove",value:function value(t){t.mapView&&t.mapView.particleEngine&&t.mapView.particleEngine.off("addParticleGroup",this._addParticleGroup);var n=t.get(-1);n.renderScene.remove(this._particleGroup),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t);}},{key:"render",value:function value(){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this._group_group)for(var t in this._group_group){this._group_group[t].tick(this._clock.getDelta());}}},{key:"particleGroup",get:function get(){return this._particleGroup;}}]),e;}(g.default);e.ParticleNode=m,e.ParticleNodeId=v;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function u(t){return!isNaN(t)&&isFinite(t);}function l(t){return u(t)&&t>=0;}Object.defineProperty(e,"__esModule",{value:!0}),e.SceneAnimationManager=void 0;var c=n(1),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),f=n(6),d=r(f),p=n(2),g=i(p),v=n(3),m=function(){function t(){s(this,t),this._animator=null;}return h(t,[{key:"hasAnimation",value:function value(t){return!1;}},{key:"isValidParams",value:function value(t){return!1;}},{key:"setParams",value:function value(t,e){return null;}},{key:"getParams",value:function value(t){return null;}},{key:"parseParams",value:function value(t){return t;}},{key:"start",value:function value(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.getParams(t),s=c({},a),u=this.parseParams(e),h=l(r)?r:300,f=l(o)?o:0;if(!this.hasAnimation(t)||!this.isValidParams(a)||!this.isValidParams(u))return console.warn("SceneAnimation: Invalid parameter."),null;var p=function p(e,n){i.setParams(t,n);};return this.stop(),this.animator=d.default.getInstance().ofObject(s,u,h).on("update",p).on("complete",function(t){n?d.default.getInstance().ofObject(u,a,h).on("update",p).on("complete",function(t){t.stop();}).start():t.stop();}).repeat(f).start(),this;}},{key:"stop",value:function value(){this.animator&&this.animator.stop&&this.animator.stop();}}]),t;}(),y=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),h(e,[{key:"hasAnimation",value:function value(t){return t&&t.material&&(0,v.isPresent)(t.material.opacity);}},{key:"isValidParams",value:function value(t){return t&&t.num&&l(t.num)&&t.num<=1;}},{key:"setParams",value:function value(t,e){return!(!this.hasAnimation(t)||!this.isValidParams(e))&&(t.material.opacity=e.num,e.num>=1&&(t.material.transparent=!1),!0);}},{key:"getParams",value:function value(t){return this.hasAnimation(t)?{num:t.material.opacity}:null;}},{key:"parseParams",value:function value(t){return t&&t.num?t:{num:t};}}]),e;}(m),_=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),h(e,[{key:"hasAnimation",value:function value(t){return t&&t.material&&(0,v.isPresent)(t.material.color);}},{key:"_isValidColorCom",value:function value(t){return l(t)&&t<=1;}},{key:"isValidParams",value:function value(t){return t&&this._isValidColorCom(t.r)&&this._isValidColorCom(t.g)&&this._isValidColorCom(t.b);}},{key:"setParams",value:function value(t,e){return!(!this.hasAnimation(t)||!this.isValidParams(e))&&(t.material.color.setRGB(e.r,e.g,e.b),!0);}},{key:"getParams",value:function value(t){if(this.hasAnimation(t)){var e=t.material.color;return{r:e.r,g:e.g,b:e.b};}return null;}},{key:"parseParams",value:function value(t){if(t&&t.r&&t.g&&t.b)return t;var e=new g.Color().set(t);return{r:e.r,g:e.g,b:e.b};}}]),e;}(m),b=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),h(e,[{key:"hasAnimation",value:function value(t){return t&&t.position;}},{key:"isValidParams",value:function value(t){return t&&u(t.x)&&u(t.y)&&u(t.z);}},{key:"setParams",value:function value(t,e){return!(!this.hasAnimation(t)||!this.isValidParams(e))&&(t.position.set(e.x,e.y,e.z),!0);}},{key:"getParams",value:function value(t){if(this.hasAnimation(t)){var e=t.position;return{x:e.x,y:e.y,z:e.z};}return null;}}]),e;}(m),x=function(){function t(){s(this,t),this._animationList={opacity:new y(),color:new _(),position:new b()};}return h(t,[{key:"setAnimation",value:function value(t,e){return!!(t&&e instanceof m)&&(this._animationList[t]=e,!0);}},{key:"getAnimation",value:function value(t){return this._animationList[t];}},{key:"removeAnimation",value:function value(t){return!!this._animationList[t]&&(delete this._animationList[t],!0);}}]),t;}();e.SceneAnimationManager=x;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t);}return i(t,[{key:"generator",value:function value(t,e){return null;}},{key:"find",value:function value(t){return null;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function s(t){return[].concat((0,p.isNumber)(t)||(0,p.isString)(t)||(0,p.isArray)(t)?t:[]);}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(17),h=i(c),f=n(165),d=i(f),p=n(3),g=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,0));return n.onAdd(n),n._mapView=t,n._allScene={},n._octreeManager=new d.default(),n;}return a(e,t),u(e,[{key:"clearOctree",value:function value(){this._octreeManager.clearOctree();}},{key:"_searchObjectsInOctree",value:function value(t,e){var n=this._mapView.activeCamera.camera;return this._octreeManager.searchByClientPoint(t,e,n);}},{key:"render",value:function value(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this._octreeManager.update();}},{key:"addScene",value:function value(t){return t.id&&!this.hasScene(t)&&(this._allScene[t.id]=t,t.onAdd(this)),this;}},{key:"setScale",value:function value(t,e,n,i,r,o){var a=this._search(t,e,n);return this.emit("onSceneChange","scale",t,a,[i,r,o]),this;}},{key:"setPosition",value:function value(t,e,n,i,r,o){var a=this._search(t,e,n),s=i,u=r;if(t.coordinateSystem){var l=t.coordinateSystem.getOffset();s=i+l[0],u=r+l[1];}return this.emit("onSceneChange","position",t,a,[s,u,o]),this;}},{key:"quickSetPosition",value:function value(t,e,n,i,r,o){var a=this._search(t,e,n),s=i,u=r;if(t.coordinateSystem){var l=t.coordinateSystem.offset(i,r);s=l[0],u=l[1];}return this.emit("onSceneChange","quickPosition",t,a,[s,u,o]),this;}},{key:"setRotation",value:function value(t,e,n,i,r,o){var a=this._search(t,e,n);return this.emit("onSceneChange","rotation",t,a,[i,r,o]),this;}},{key:"setVisible",value:function value(t,e,n,i){var r=this._search(t,e,n);return this.emit("onSceneChange","visible",t,r,i),this;}},{key:"highlight",value:function value(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.414,r=this._search(t,e,n);return this.emit("onSceneChange","highlight",t,r,i),this;}},{key:"setColor",value:function value(t,e,n,i,r){var o=this._search(t,e,n);return this.emit("onSceneChange","color",t,o,i,r),this;}},{key:"setColors",value:function value(t,e,n,i,r){var o=this,a=(0,p.isArray)(n)?n:[n],s=a.map(function(n){return o._search(t,e,n);});return this.emit("onSceneChange","colors",t,s,i,r),this;}},{key:"resetStyle",value:function value(t,e,n,i){var r=this._search(t,e,n);return this.emit("onSceneChange","styleResetting",t,r,i),this;}},{key:"setValueChangeByFeatures",value:function value(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++){r[o-3]=arguments[o];}return this.emit.apply(this,["onSceneChange",t,e,n].concat(r)),this;}},{key:"resetColor",value:function value(t,e,n){var i=this._search(t,e,n);return this.emit("onSceneChange","colorResetting",t,i),this;}},{key:"setOpacity",value:function value(t,e,n,i,r){var o=this._search(t,e,n);return this.emit("onSceneChange","opacity",t,o,i,r),this;}},{key:"setDepthTest",value:function value(t,e,n,i){if(!(0,p.isBoolean)(i))throw new Error("Unsupported depthTest type");var r=this._search(t,e,n);this.emit("onSceneChange","depthTest",t,r,i);}},{key:"getAABB",value:function value(t,e,n,i){if((0,p.isArray)(i))throw new Error("SceneManager#getAABB: Invalid outBox");var r=this._search(t,e,n),o=void 0;if((0,p.isArray)(r)?(o=r[0],console.warn("SceneManager#getAABB: Get the first feature of several features")):o=r,!o)throw new Error("SceneManager#getAABB: Feature not found");return i.length=0,this.emit("onGetAABB",t,o,i),this;}},{key:"removeScene",value:function value(t){return t.id&&this.hasScene(t)&&(delete this._allScene[t.id],t.onRemove(this)),this;}},{key:"hasScene",value:function value(t){return!!t&&(t in this._allScene||t.id in this._allScene);}},{key:"destroy",value:function value(){for(var t in this._allScene){this.removeScene(this._allScene[t]);}this._mapView=null;}},{key:"_search",value:function value(t,e,n){if(!e&&!n)return null;var i=s(n),r=[],o=t;if("string"==typeof t&&(o=this._mapView.getLayer(t)),o)if("id"===e){for(var a=i,u=Array.isArray(a),l=0,a=u?a:a[Symbol.iterator]();;){var c;if(u){if(l>=a.length)break;c=a[l++];}else{if(l=a.next(),l.done)break;c=l.value;}var h=c;r.push(o.searchById(h));}1===r.length&&(r=r.pop());}else for(var f=i,d=Array.isArray(f),p=0,f=d?f:f[Symbol.iterator]();;){var g;if(d){if(p>=f.length)break;g=f[p++];}else{if(p=f.next(),p.done)break;g=p.value;}var v=g;r=r.concat(o.search(e,v));}return r;}},{key:"mapView",get:function get(){return this._mapView;}}]),e;}(h.default);e.default=g;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c=n(164),h=r(c),f=n(2),d=i(f),p=n(10),g=r(p),v=n(13),m=r(v),y=n(3),_=function(){function t(e){s(this,t),this._container=e;}return l(t,[{key:"reset",value:function value(){this._range={},this._rangeIndex=[],this._rangeLength=0;}},{key:"merge",value:function value(t,e){}},{key:"update",value:function value(){}},{key:"remove",value:function value(t){}},{key:"has",value:function value(t){return t in this._range;}},{key:"type",value:function value(){return null;}},{key:"clear",value:function value(){this.reset();}}]),t;}(),b=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),l(e,[{key:"reset",value:function value(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this._lineGeoBuffer&&this._lineGeoBuffer.dispose(),this._lineGeoBuffer=new d.BufferGeometry(),this._lineIndex=[],this._linePosition=[],this._lineColor=[],this._lineMesh=new d.LineSegments(this._lineGeoBuffer,new d.LineBasicMaterial({vertexColors:d.VertexColors})),this._lineMesh.material.transparent=!0,this.blending&&(this._lineMesh.material.blending=d.CustomBlending,this._lineMesh.material.blendEquation=d.MinEquation);}},{key:"clear",value:function value(){this._container.remove(this._lineMesh),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this);}},{key:"setValue",value:function value(t,e){switch(e){case"color":break;case"opacity":if(0===t){this._lineMesh.material.opacity=arguments.length<=2?void 0:arguments[2],this._lineMesh.material.blending=d.NormalBlending,1===(arguments.length<=2?void 0:arguments[2])&&(this._lineMesh.material.transparent=!0,this.blending&&(this._lineMesh.material.blending=d.CustomBlending,this._lineMesh.material.blendEquation=d.MinEquation));break;}break;case"colorResetting":}}},{key:"merge",value:function value(t,e){var n=e.material.color,i=e.geometry.vertices;if(0===i.length)return null;var r=this._range[t];r&&this.remove(t),r=[],this._range[t]=r,this._rangeIndex.push(t),r.push(this._linePosition.length),r.push(this._lineIndex.length);for(var o in i){o>0&&this._lineIndex.push(this._rangeLength-1,this._rangeLength);var a=i[o];this._linePosition[3*this._rangeLength]=a.x,this._linePosition[3*this._rangeLength+1]=a.y,this._linePosition[3*this._rangeLength+2]=a.z,this._lineColor[3*this._rangeLength]=n.r,this._lineColor[3*this._rangeLength+1]=n.g,this._lineColor[3*this._rangeLength+2]=n.b,this._rangeLength++;}return r.push(this._linePosition.length),r.push(this._lineIndex.length),e.geometry.dispose(),this._lineMesh;}},{key:"update",value:function value(){this._resetLineBuffer();}},{key:"remove",value:function value(t){var e=this._range[t];if(!e){var n=e[0],i=e[2],r=e[1],o=e[3],a=o-r,s=i-n,u=s/3;this._rangeLength-=u,this._linePosition.splice(n,i-n),this._lineColor.splice(n,i-n),this._lineIndex.splice(r,o-r);for(var l=r;l<this._lineIndex.length;l++){this._lineIndex[l]-=u;}var c=this._rangeIndex.indexOf(t);if(c!==-1){for(var h=c+1;h<this._rangeIndex.length;h++){var f=this._range[this._rangeIndex[h]];f&&(f[0]-=s,f[2]-=s,f[1]-=a,f[3]-=a);}this._rangeIndex.splice(c,1);}delete this._range[t];}}},{key:"type",value:function value(){return"line";}},{key:"_resetLineBuffer",value:function value(){this._lineGeoBuffer.setIndex(new d.BufferAttribute(new Uint16Array(this._lineIndex),1)),this._lineGeoBuffer.addAttribute("position",new d.BufferAttribute(new Float32Array(this._linePosition),3)),this._lineGeoBuffer.addAttribute("color",new d.BufferAttribute(new Float32Array(this._lineColor),3)),this._lineGeoBuffer.computeBoundingSphere(),this._container.add(this._lineMesh);}},{key:"blending",get:function get(){return this._blending;},set:function set(t){this._blending=t;}}]),e;}(_),x=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),l(e,[{key:"reset",value:function value(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"reset",this).call(this),this._polygonPosition=[],this._polygonId=[],this._polygonColor=[],this._polygonNormals=[],this._range={},this._rangeIndex=[],this._polygonBuffer&&this._polygonBuffer.dispose(),this._polygonBuffer=new d.BufferGeometry(),this._polygonMesh=new d.Mesh(this._polygonBuffer,new d.ShaderMaterial({uniforms:{coloredPOI:{value:-1},pickedColor:{value:new d.Vector3(1,0,0)},transparentPOI:{value:-1},opacity:{value:1},universalOpacity:{value:1}},vertexShader:["attribute float polygonId;","attribute vec3 color;","varying vec3 vColor;","varying float vAlpha;","uniform float coloredPOI;","uniform vec3 pickedColor;","uniform float transparentPOI;","uniform float opacity;","uniform float universalOpacity;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);","vColor = color;","vAlpha = universalOpacity;","if (polygonId == coloredPOI) vColor =  pickedColor;","if (polygonId == transparentPOI) vAlpha =  opacity;","}"].join("\\n"),fragmentShader:["varying vec3 vColor;","varying float vAlpha;","void main() {","gl_FragColor = vec4(vColor, vAlpha);","}"].join("\\n"),transparent:!0})),this._rangeLength=0;}},{key:"clear",value:function value(){this._container.remove(this._polygonMesh),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clear",this).call(this);}},{key:"setColors",value:function value(t,e){var n=this;t.map(function(t){if(t<0)return null;for(var i=m.default.parseColor(e),r=new d.Color(i),o=["r","g","b"],a=n._range[t][0],s=n._range[t][1],u=a;u<=s;u++){var l=o[u%3];n._polygonColor[u]=r[l];}return null;});}},{key:"setValue",value:function value(t,e){switch(e){case"color":var n=m.default.parseColor(arguments.length<=2?void 0:arguments[2]),i=new d.Color(n);this._polygonMesh.material.uniforms.coloredPOI.value=t,this._polygonMesh.material.uniforms.pickedColor.value=new d.Vector3(i.r,i.g,i.b);break;case"colors":if(t<0)break;for(var r=m.default.parseColor(arguments.length<=2?void 0:arguments[2]),o=new d.Color(r),a=["r","g","b"],s=this._range[t][0],u=this._range[t][1],l=s;l<=u;l++){var c=a[l%3];this._polygonColor[l]=o[c];}this._resetPolygonBuffer();break;case"opacity":if(1!==(arguments.length<=2?void 0:arguments[2])?this._polygonMesh.material.transparent=!0:this._polygonMesh.material.transparent=!1,0===t){this._polygonMesh.material.uniforms.transparentPOI.value=-1,this._polygonMesh.material.uniforms.universalOpacity.value=arguments.length<=2?void 0:arguments[2];break;}this._polygonMesh.material.uniforms.transparentPOI.value=t,this._polygonMesh.material.uniforms.opacity.value=arguments.length<=2?void 0:arguments[2];break;case"colorResetting":this._polygonMesh.material.uniforms.coloredPOI.value=-1;}}},{key:"merge",value:function value(t,e){var n=this,i=e.geometry,r=e.position,o=e.material.color;if(!i)return null;if(i.faces.length>0){var a=e.material;!(this._polygonMesh.material instanceof d.MeshPhongMaterial)&&a instanceof d.MeshPhongMaterial&&(this._polygonMesh.material=new d.ShaderMaterial({uniforms:{coloredPOI:{value:-1},pickedColor:{value:new d.Vector3(1,0,0)},transparentPOI:{value:-1},opacity:{value:1},universalOpacity:{value:1},directionalLights:{value:[]},ambientLightColor:{value:[]},spotLights:{value:[]},pointLights:{value:[]},hemisphereLights:{value:[]},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]}},vertexShader:["attribute float polygonId;","attribute vec3 color;","varying vec3 vColor;","varying float vAlpha;","uniform float coloredPOI;","uniform vec3 pickedColor;","uniform float transparentPOI;","uniform float opacity;","uniform float universalOpacity;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);","// vec3 transformedNormal = normalMatrix * normal;","float nDotL = max(dot(vec3(0.57735,0.57735,-0.57735), normal), 0.0);","// vec3 pointLight = vec3(10,10,100);","// float nDotL = dot(normalize( pointLight-position), normal);","vColor = color - color.xyz * nDotL * 0.5;","// vColor = color.xyz * nDotL * 0.5 + color;","vAlpha = universalOpacity;","if (polygonId == coloredPOI) vColor =  pickedColor;","if (polygonId == transparentPOI) vAlpha =  opacity;","}"].join("\\n"),fragmentShader:["varying vec3 vColor;","varying float vAlpha;","void main() {","gl_FragColor = vec4(vColor, vAlpha);","}"].join("\\n"),transparent:!0,lights:!1}));var s=9,u=["a","b","c"],l=["x","y","z"],c=["r","g","b"],h=this._range[t];h&&this.remove(t,parent),h=[],this._range[t]=h,this._rangeIndex.push(t),h.push(this._polygonPosition.length),i.faces.forEach(function(e){for(var a=o?o:e.color,h=0;h<s;h++){var f=n._rangeLength*s+h,d=u[Math.floor(h/3)],p=l[h%3],g=c[h%3];n._polygonPosition[f]=i.vertices[e[d]][p]+r[p],n._polygonNormals[f]=e.normal[p],n._polygonColor[f]=a[g];}n._polygonId[3*n._rangeLength+0]=t,n._polygonId[3*n._rangeLength+1]=t,n._polygonId[3*n._rangeLength+2]=t,n._rangeLength++;}),h.push(this._polygonPosition.length),i.dispose();}return this._polygonMesh;}},{key:"update",value:function value(){this._resetPolygonBuffer();}},{key:"remove",value:function value(t){var e=this._range[t];if(e){var n=e[0],i=e[1],r=i-n,o=r/9,a=this._rangeIndex.indexOf(t);if(this._rangeLength-=o,this._polygonPosition.splice(n,r),this._polygonNormals.splice(n,r),this._polygonColor.splice(n,r),this._polygonId.splice(n/3,r/3),a!==-1){for(var s=a+1;s<this._rangeIndex.length;s++){var u=this._range[this._rangeIndex[s]];u&&(u[0]-=r,u[1]-=r);}this._rangeIndex.splice(a,1);}delete this._range[t];}}},{key:"type",value:function value(){return"polygon";}},{key:"_resetPolygonBuffer",value:function value(){this._polygonBuffer.addAttribute("position",new d.BufferAttribute(new Float32Array(this._polygonPosition),3)),this._polygonBuffer.addAttribute("normal",new d.BufferAttribute(new Float32Array(this._polygonNormals),3)),this._polygonBuffer.addAttribute("color",new d.BufferAttribute(new Float32Array(this._polygonColor),3)),this._polygonBuffer.addAttribute("polygonId",new d.BufferAttribute(new Float32Array(this._polygonId),1)),this._polygonBuffer.computeBoundingSphere(),this._container.add(this._polygonMesh);}}]),e;}(_),w=function(t){function e(t){s(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._sceneManager=t,n._lastLeaf={},n.lastLayerId=0,n._featuresMapping={},n._mergeLeafs={},n._onSceneChange=n._onSceneChange.bind(n),n._sceneManager.on("onSceneChange",n._onSceneChange),n;}return a(e,t),l(e,[{key:"_onSceneChange",value:function value(t,e,n){if("color"===t||"colors"===t||"opacity"===t||"colorResetting"===t){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++){r[o-3]=arguments[o];}if("colors"===t&&this._setColors(e,n,r[0]),n){if(!(0,y.isArray)(n)&&this.has(n)){if(this.lastLayerId!==e.id){for(var a in this._lastLeaf){var s=this._lastLeaf[a];s.setValue.apply(s,[-1,a].concat(r));}this.lastLayerId=e.id;}this.setValue.apply(this,[e,n,t].concat(r));}}else this.setValue.apply(this,[e,null,t].concat(r));}}},{key:"has",value:function value(t,e){var n=t.id,i=this._featuresMapping[n];return!!i&&(!e||e.id in i);}},{key:"hasLayer",value:function value(t){return t in this._mergeLeafs;}},{key:"merge",value:function value(t,e,n,i,r){var o=0;if(!e&&!e instanceof g.default)return o;var a=e.type();if("Polygon"===a){var s=e.polygonMerge,u=e.outlineMerge;if(!s&&!u)return o;if(n instanceof d.Group){for(var l=n.children,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var p=f;o=this.merge(t,e,p,i,r),2===o&&n.remove(p);}return 0===n.children.length?2:o;}var v=this._featuresMapping[t.id];v||(v=[],this._featuresMapping[t.id]=v);var m=this._mergeLeafs[i];if(m||(m={},this._mergeLeafs[i]=m),u&&n.children.length>0){var y=n.children[0];n.remove(y);var _=m.line;_||(_=new b(r),_.blending=e.outlineBlending,_.reset(),m.line=_),_.merge(y.id,y),v.push(y.id),o=1;}if(s){var w=m.polygon;w||(w=new x(r),w.reset(),m.polygon=w),w.merge(n.id,n),v.push(n.id),o=1===o?2:1;}}return o;}},{key:"update",value:function value(t){var e=this._mergeLeafs[t];if(e)for(var n in e){var i=e[n];i.update();}}},{key:"_setColors",value:function value(t,e,n){var i=this,r=[],o=this._mergeLeafs[t.id],a=o.polygon;e.map(function(t){if(!t)return null;var e=i._featuresMapping[t.id];return e&&(r=r.concat(e.filter(function(t){return a.has(t);}))),null;}),a.setColors(r,n),a.update();}},{key:"setValue",value:function value(t,e,n){for(var i=t.id,r=this._mergeLeafs[i],o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++){a[s-3]=arguments[s];}if(!e&&r)this._setValue.apply(this,[r,null,n].concat(a));else if(e){var u=this._featuresMapping[e.id];if(!u)return;for(var l in this._mergeLeafs){r=this._mergeLeafs[l],this._setValue.apply(this,[r,u,n].concat(a));}}}},{key:"_setValue",value:function value(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++){r[o-3]=arguments[o];}if(t.line&&!e){var a;(a=t.line).setValue.apply(a,[0,n].concat(r));}var s=t.polygon;if(s)if(e)for(var u=e,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var h;if(l){if(c>=u.length)break;h=u[c++];}else{if(c=u.next(),c.done)break;h=c.value;}var f=h;s.has(f)&&(s.setValue.apply(s,[f,n].concat(r)),this._lastLeaf[n]=s);}else s.setValue.apply(s,[0,n].concat(r));}},{key:"remove",value:function value(t){var e=t.id,n=this._featuresMapping[e];if(n){for(var i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var s=a;for(var u in this._mergeLeafs){var l=this._mergeLeafs[u];if(l)for(var c in l){var h=l[c];h.remove(s);}}}delete this._featuresMapping[e];}}},{key:"removeByLayer",value:function value(t,e){var n=this;t.visit(function(t){var e=n._featuresMapping[t.id];e&&delete n._featuresMapping[t.id];});var i=this._mergeLeafs[e];if(i){for(var r in i){var o=i[r];o.clear();}delete this._mergeLeafs[e];}}},{key:"destroy",value:function value(){this._sceneManager.off("onSceneChange",this._onSceneChange),this._lastLeaf=[],this._featuresMapping=[];for(var t in this._mergeLeafs){var e=this._mergeLeafs[t];for(var n in e){var i=e[n];i.clear();}}this._mergeLeafs=[];}}]),e;}(h.default);e.default=w;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t){for(var e=this.margin||0,n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=n,o=i,a=this.children,s=Array.isArray(a),u=0,a=s?a:a[Symbol.iterator]();;){var l;if(s){if(u>=a.length)break;l=a[u++];}else{if(u=a.next(),u.done)break;l=u.value;}var c=l;if(c.getAABB){var h=c.getAABB(t);n>h[0]&&(n=h[0]),r>h[1]&&(r=h[1]),i<h[3]&&(i=h[3]),o<h[4]&&(o=h[4]);}}return[n-e,r-e,0,i+e,o+e,0];}function s(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.children,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;a.makeCollision&&a.makeCollision(t,e);}this.visible=!t;}Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),c=n(2),h=r(c),f=n(130),d=i(f),p=n(126),g=i(p),v=n(93),m=i(v),y=n(87),_=i(y),b=n(42),x=i(b),w=n(98),E=i(w),S=n(97),M=i(S),C=n(8),I=i(C),O=n(27),T=i(O),P=n(3),A=n(214),L=i(A),N=n(103),k=i(N),R=n(95),D=(i(R),n(89)),F=(i(D),n(92)),B=(i(F),n(91)),j=(i(B),new h.TextureLoader()),U=new d.default(new h.TextureLoader()),z={},G=(0,L.default)(h),V=(0,k.default)(h),X={Annotation:{outlineColor:"strokeStyle",outlineWidth:"lineWidth",shadowColor:"shadowColor",shadowBlur:"shadowBlur",color:"fillStyle"}},H=function(){function t(){o(this,t);}return l(t,null,[{key:"generator",value:function value(e,n,i,r){var o=e.mapView.engine,a=r.type(),s=null;switch(a){case"Polygon":s=t.polygon(e,o,i,r);break;case"Annotation":s=t.annotation(e,n,o,i,r);break;case"Icon":s=t.icon(e,n,o,i,r);break;case"LineString":s=t.lineString(e,o,i,r);break;case"Light":s=t.light(e,o,i,r);break;case"Model":s=t.model(e,n,o,i,r);break;case"Sphere":s=t.sphere(e,n,o,i,r);break;default:console.warn("Invalid style type");}if(s){if(s.originStyle=r,i.properties.id&&(s._sceneId=i.properties.id,s._layerId=n.id,s instanceof h.Group))for(var u=s.children,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var f;if(l){if(c>=u.length)break;f=u[c++];}else{if(c=u.next(),c.done)break;f=c.value;}var d=f;d._sceneId=i.properties.id,d._layerId=n.id;}if(r.collision&&e.mapView.collisionSceneManager.add(i,s),r.alwaysVisible&&(e.mapView.collisionSceneManager.add(i,s,!0),"PlaneLineGroup"===s.type))for(var p=function p(){if(v){if(m>=g.length)return"break";y=g[m++];}else{if(m=g.next(),m.done)return"break";y=m.value;}var t=y;t.on("loaded",function(){return e.mapView.collisionSceneManager.add(i,t,!0);});},g=s.children,v=Array.isArray(g),m=0,g=v?g:g[Symbol.iterator]();;){var y,_=p();if("break"===_)break;}}return s;}},{key:"annotation",value:function value(e,n,i,r,o){var u=r.geometry,l=u.getGeometryType(),c=null;if("Point"===l){var f=o.field,d=t.parseParams(r,o,["font","color","outlineColor","outlineWidth","shadowColor","shadowBlur","depthTest","optTextRect"]);if(d.antialias=!1,d.align=x.default.center,f&&r.properties[f]){var p=e.mapView,g=i.getRenderer(p),v=g.getPixelRatio()===window.devicePixelRatio?1:window.devicePixelRatio,m=o.anchorStyle,y=o.z,b=void 0===y?0:y,w=o.margin,E=o.anchor,S=o.anchorAuto,M=null;if(c=new _.default(r.properties[f],d),c.position.set(u.getX(),u.getY(),(u.getCoordinate().z||0)+b),c.sprite.scale.x=c.canvas.textWidth/2*v,c.sprite.scale.y=c.canvas.textHeight/2*v,c.sprite.material.materialScale=!0,c.margin=w,c.sprite.material.anchor=E.slice(),c.sprite.material.transparent=!0,m){var C=m.type();"Icon"===C&&(M=t.icon(e,n,i,r,o.anchorStyle));}if(M){var I=new h.Group();S&&m.width&&(c.sprite.material.anchor[0]=-m.width/2/c.sprite.scale.x),I.add(c),I.add(M),c=I,I.margin=w,I.getAABB=a,I.makeCollision=s;}}}return c;}},{key:"icon",value:function value(e,n,i,r,o){var a=r.geometry,s=a.getGeometryType(),u=null;if("Point"===s){var l=t.parseParams(r,o,["texture","serverUrl"]),c=o.depthTest,f=void 0===c||c,d=o.plane,p=o.anchor,g=o.margin,v=o.z,m=void 0===v?0:v;if(l.fog=!0,l.depthTest=!!f,l.transparent=!0,l.alphaTest=.01,d){var y=t._generateTexturePlane(1,1),_=new h.MeshBasicMaterial(l);u=new h.Mesh(y,_),u.renderOrder=1,t.parseTexture(e,n,u,o,l);}else u=new E.default(new h.SpriteMaterial(l)),u.margin=g,u.material.anchor=p.slice(),t.parseTexture(e,n,u,o,l);u.position.set(a.getX(),a.getY(),(a.getCoordinate().z||0)+m);}return u;}},{key:"lineString",value:function value(e,n,i,r){var o=i.geometry,a=o.getGeometryType(),s=void 0;if("LineString"===a){var u=o.getCoordinates();if(0!==u.length){var l=t.parseParams(i,r,["color","depthTest"]);if(l.depthTest=!(0,P.isBoolean)(r.depthTest)||r.depthTest,r["2d"]){var c=r.width,f=r.opacity,d=r.dashSteps,p=void 0===d?12:d,g=r.dashDistance,v=void 0===g?.2:g,m=r.dashSmooth,y=void 0===m?.01:m,_=u.map(function(t){var e=t.x,n=t.y,i=t.z,r=void 0===i?0:i;return[e,n,r];}),b=G(_),x=new h.ShaderMaterial(V({side:h.DoubleSide,diffuse:l.color,thickness:c,opacity:f,depthTest:l.depthTest}));x.uniforms.dashSteps.value=p,x.uniforms.dashDistance.value=v,x.uniforms.dashSmooth.value=y,s=new h.Mesh(b,x),s.position.z+=.1;}else{var w=r.tension,E=r.texture,S=r.density,M=r.width,C=void 0===M?1:M,I=u.map(function(t){var e=t.x,n=t.y,i=t.z,r=void 0===i?0:i;return new h.Vector3(e,n,r);}),O=new h.CatmullRomCurve3(I);O.type="catmullrom",O.tension=w>=0&&w<=1?w:0;var T=new h.TubeGeometry(O,Math.ceil(O.getLength()*(S>0?S:1)),C/2,8,!1);E&&(j.load(E,function(t){var e=t.image.width/t.image.height,n=T.parameters.path.getLength(),i=2*T.parameters.radius;s.material.needsUpdate=!0,s.material.map=t,s.material.map.wrapS=h.RepeatWrapping,s.material.map.repeat.setX(n/i/e);}),l.transparent=!0),s=new h.Mesh(T,new h.MeshBasicMaterial(l));}}}return s;}},{key:"polygon",value:function value(e,n,i,r){var o=i.geometry,a=t.parseParams(i,r,["color","opacity","texture"]),s=o.getGeometryType(),u=null;if("Polygon"===s)u=t._polygon(e,n,o,r,a,o.zIndex,i.id);else if("MultiPolygon"===s){u=new h.Group();for(var l=0;l<o.getNumGeometries();l++){var c=t._polygon(e,n,o.getGeometryN(l),r,a,o.zIndex,i.id);u.add(c);}}return u;}},{key:"_polygon",value:function value(e,n,i,r,o,a,s){var u=r.height,l=r.bevelEnabled,c=r.bevelThickness,f=r.bevelSize,d=r.bevelSegments,p=r.light,v=r.z,m=r.outlineColor,y=r.lineHeight,_=new h.Shape(),b=new g.default(i),x={amount:Math.abs(u),bevelEnabled:!1},w=o.map,E=null,S=void 0,C=null;if(b.shellCreator(function(){return _;}),b.shell(function(t,e,n){var i=e.x,r=e.y;0===n?t.moveTo(i,r):t.lineTo(i,r);}),b.holeCreator(function(){var t=new h.Path();return _.holes.push(t),t;}),b.holes(function(t,e,n){var i=e.x,r=e.y;0===n?t.moveTo(i,r):t.lineTo(i,r);}),e.mapView._goemMap&&e.mapView._goemMap[s]?S=e.mapView._goemMap[s].geometry:(0,P.isNumber)(u)&&0!==u?(l&&(x.bevelEnabled=!0,x.bevelThickness=(0,P.isNumber)(c)?c:0,x.bevelSize=(0,P.isNumber)(f)&&f>0?f:1,x.bevelSegments=(0,P.isNumber)(d)?d:1),S=new h.ExtrudeGeometry(_,x)):S=new h.ShapeGeometry(_),w&&delete o.map,(0,P.isNumber)(o.opacity)&&(o.transparent=!0),E=new h.Mesh(S,p?new h.MeshPhongMaterial(o):new h.MeshBasicMaterial(o)),v&&E.position.setZ(v),u<0&&E.position.setZ(E.position.z+u),x.bevelEnabled?C=M.default.createExpandedPointsGeometry(_,x.bevelSize):(_.autoClose=!0,C=_.createPointsGeometry()),(0,P.isPresent)(m)){var I=y?y:(u||0)+.03;C.translate(0,0,I+a);var O=new h.Line(C,new h.LineBasicMaterial({color:m}));E.add(O);}if(w){var T=w.depthTest,A=void 0===T||T,L=w.alphaTest,N=void 0===L?.01:L,k=w.size,R=void 0===k?[1,1]:k,D=w.offset,F=void 0===D?[0,0]:D,B=w.url,j=w.rotation;U.load(B,function(e){var n=t._generateTexturePlane(R[0]||1,R[1]||1);e.magFilter=h.LinearFilter,e.minFilter=h.LinearFilter,e.anisotropy=8;var r=new h.MeshBasicMaterial({map:e,transparent:!0,depthTest:!!A,alphaTest:N}),o=new h.Mesh(n,r),a=i.getCentroid();if(E.add(o),o.position.set(a.getX()+(F[0]||0),a.getY()+(F[1]||0),u+.1),(0,P.isNumber)(j)){var s=Math.PI*j/180;o.rotateZ(s),e.dispose();}});}return E;}},{key:"light",value:function value(t,e,n,i){var r=i.lightType,o=i.intensity,a=void 0===o?1:o,s=i.color,u=void 0===s?16777215:s,l=i.options,c=void 0===l?{}:l,f=n.geometry,d=f.getGeometryType(),p=null;if("Point"===d){switch(r){case"PointLight":p=new h[r]();break;case"SpotLight":p=new h[r]();break;case"DirectionalLight":p=new h[r]();break;case"HemisphereLight":var g=c.groudColorc||16777215;p=new h[r](u,g,a);break;case"AmbientLight":p=new h[r]();}if(p){var v=f.getCoordinate();if(p.position.set(v.x,v.y,v.z),p.shadow){var m=20;p.castShadow=!0,p.shadow.mapSize.width=1024,p.shadow.mapSize.height=1024,p.shadow.camera.left=-m,p.shadow.camera.right=m,p.shadow.camera.top=m,p.shadow.camera.bottom=-m,p.shadow.camera.far=1e3;}}}return p;}},{key:"_postProcessOctreeForModel",value:function value(t,e,n,i){if(n instanceof h.Group)for(var r=n.children,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;u._sceneId=i.id,u._layerId=e.id;}else n._sceneId=i.id,n._layerId=e.id;t._octreeManager.add(n,e.id,i.id);}},{key:"model",value:function value(e,n,i,r,o){var a=o.path,s=o.fileType,l=o.autoAttach,c=o.position,f=o.scale,d=o.rotate,p=o.clickable,g=o.params,v=void 0===g?{}:g;if(!a||!s)return null;var y=new m.default(),_=r.geometry,b=_.getGeometryType(),x=u({},{position:c,scale:f,rotate:d});switch(b){case"Point":var w=_.getCoordinate(),E=w.x,S=w.y,M=w.z;u(x,{position:[E,S,M||0]});break;case"Polygon":var C=_.getEnvelope(),O=C.getCentroid(),P=O.getCoordinate(),A=P.x,L=P.y,N=P.z;if(u(x,{position:[A,L,N||0]}),l){var k=I.default.getLongEdge(_),R=T.default.subVector(k.p1,k.p0),D=T.default.getAngle(R,{x:0,y:1,z:0});u(x,{rotate:[0,0,D]});}}switch(s){case"obj":var F=new h.OBJLoader();if(v.mtl){var B=new h.MTLLoader();v.texturePath&&B.setTexturePath(v.texturePath),B.load(v.mtl,function(i){i.preload(),F.setMaterials(i),F.load(a,function(i){t._setModelParam(i,x),y.addProxy(i),p&&t._postProcessOctreeForModel(e,n,i,r);}),r.onload&&r.onload();});}else F.load(a,function(i){var o=null;if(v.texture){var a=new h.ImageLoader();o=new h.Texture(),a.load(v.texture,function(t){o.image=t;});}i.traverse(function(t){t instanceof h.Mesh&&o&&(t.material.map=o);}),t._setModelParam(i,x),y.addProxy(i),p&&t._postProcessOctreeForModel(e,n,i,r),r.onload&&r.onload();});break;case"dae":var j=new h.ColladaLoader();j.options.convertUpAxis=!0,j.load(a,function(i){var o=i.scene;o.updateMatrix(),t._setModelParam(o,x),y.addProxy(o),p&&t._postProcessOctreeForModel(e,n,o,r);});break;case"fbx":var U=new h.FBXLoader();U.load(a,function(i){y.addProxy(i),p&&t._postProcessOctreeForModel(e,n,i,r);});break;case"js":var z=new h.JSONLoader();z.load(a,function(i,a){var s=new h.Mesh(i,new h.MultiMaterial(a));y.addProxy(s),t._setModelParam(s,o),p&&t._postProcessOctreeForModel(e,n,s,r);});}return y;}},{key:"sphere",value:function value(e,n,i,r,o){var a=r.geometry,s=a.getGeometryType(),u=null;if("Point"===s){var l=o.radius,c=o.widthSegments,f=o.heightSegments,d=o.light,p=new h.SphereGeometry(l,c,f),g=t.parseParams(r,o,["color","opacity"]),v=a.getCoordinate(),m=v.x,y=v.y,_=v.z;(0,P.isNumber)(g.opacity)&&(g.transparent=!0),u=new h.Mesh(p,d?new h.MeshPhongMaterial(g):new h.MeshBasicMaterial(g)),u.position.set(m,y,_||0);}return u;}},{key:"parseParams",value:function value(t,e,n){for(var i={},r=X[e.type()],o=n,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++];}else{if(s=o.next(),s.done)break;u=s.value;}var l=u,c=e[l];if((0,P.isPresent)(c)){if("texture"===l||"serverUrl"===l){t.properties[e.field]&&(c+=t.properties[e.field]),e.suffix&&(c+=e.suffix),i.map=c;continue;}r&&r[l]?i[r[l]]=c:i[l]=c;}}return i;}},{key:"beginLayerCount",value:function value(t){z[t.id]={layerFeatureCount:t.features.getFeatureCount(),layerFeatureIndex:0};}},{key:"resetLayer",value:function value(t){var e=z[t.id];e.async||delete z[t.id];}},{key:"removeLayerCount",value:function value(t){delete z[t.id];}},{key:"parseTexture",value:function value(e,n,i,r,o){var a=r.width,s=r.height;if(o.map){var u=z[n.id];u||(t.beginLayerCount(n),u=z[n.id]),u.async=!0,i.material.map=null,U.load(o.map,function(r){if(e.mapView&&e.mapView.activeCamera){if(r.minFilter=h.LinearFilter,r.magFilter=h.LinearFilter,i.material.map=r,i.material.needsUpdate=!0,i.scale.set(a||r.image.width,s||r.image.height,1),i.material.materialScale=!0,i.material.map.dispose(),!u)return void e.mapView.collisionSceneManager.updateCollision();t._allComplete(n,e);}else i.scale.set(4,4,0);},function(){},function(){t._allComplete(n,e);});}}},{key:"_allComplete",value:function value(t,e){var n=z[t.id];n&&(n.layerFeatureIndex++,t.features.getFeatureCount()===n.layerFeatureIndex&&e.mapView.collisionSceneManager.updateCollision());}},{key:"_setModelParam",value:function value(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.scale,i=e.rotate,r=e.position;n&&t.scale.set(n[0],n[1],n[2]),i&&t.rotation.set(i[0],i[1],i[2]),r&&t.position.set(r[0],r[1],r[2]);}},{key:"_generateTexturePlane",value:function value(t,e){var n=(0,P.isNumber)(t)?t/2:.5,i=(0,P.isNumber)(e)?e/2:.5,r=new h.Shape();r.moveTo(-n,-i),r.lineTo(n,-i),r.lineTo(n,i),r.lineTo(-n,i),r.lineTo(-n,-i);var o=new h.ShapeGeometry(r);return o.faceVertexUvs[0]=[[new h.Vector2(0,0),new h.Vector2(1,0),new h.Vector2(1,1)],[new h.Vector2(1,1),new h.Vector2(0,1),new h.Vector2(0,0)]],o;}}]),t;}();e.default=H;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function a(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeNodeId=e.ThreeNode=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},c=n(12),h=n(3),f=n(17),d=r(f),p=n(21),g=r(p),v=n(172),m=r(v),y=n(171),_=r(y),b=n(30),x=r(b),w=n(13),E=r(w),S=n(2),M=i(S),C=n(99),I=r(C),O=n(7),T=n(168),P=n(4),A=-1,L=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._scene=new M.Scene(),n._groupLayers={},n._groups={},n._meshMapping={},n._sceneAnimationManager=new T.SceneAnimationManager(),n._addLayerToGroup=n._preAddToGroup.bind(n),n._removeLayerToGroup=n._preRemoveToGroup.bind(n),n._addLayer=n._addLayer.bind(n),n._removeLayer=n._removeLayer.bind(n),n._addFeature=n._addSceneByFeature.bind(n),n._addFeatures=n._addFeatures.bind(n),n._updateFeature=n._updateSceneByFeature.bind(n),n._removeFeature=n._removeSceneByFeature.bind(n),n._onSceneChange=n._parseSceneChange.bind(n),n._onGetAABB=n._onGetAABB.bind(n),n;}return s(e,t),u(e,[{key:"_addLayer",value:function value(t,e){var n=this;return e instanceof x.default?(e.on("addToGroup",this._addLayerToGroup),e.on("removeToGroup",this._removeLayerToGroup),void e.foreach(function(t,i){n._preAddToGroup(e,i);})):void this.addLayer(e);}},{key:"_removeLayer",value:function value(t,e){var n=this;return e instanceof x.default?(e.off("addToGroup",this._addLayerToGroup),e.off("removeToGroup",this._removeLayerToGroup),void e.foreach(function(t,i){n._preRemoveToGroup(e,i);})):void this.removeLayer(e);}},{key:"_onGetAABB",value:function value(t,e,n){var i=this._findMesh(t,e);if(!i)throw new Error("ThreeNode#_onGetAABB: Mesh not found");var r=new M.Box3().setFromObject(i),o=r.min,a=r.max;n.push(new P.geom.Coordinate(o.x,o.y,o.z),new P.geom.Coordinate(a.x,a.y,a.z));}},{key:"onAdd",value:function value(t){var n=t.mapView.engine;if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),this._mergeNode=new _.default(t),this._targetRenderer=n.getRenderer(t.mapView),this._sceneManager.mapView.on("addLayer",this._addLayer),this._sceneManager.mapView.on("removeLayer",this._removeLayer),this._sceneManager.on("onSceneChange",this._onSceneChange),this._sceneManager.on("onGetAABB",this._onGetAABB),c.isDev){var i=t.mapView.container;this._stats=new I.default(),O.DOMUtils.addClass(this._stats.dom,"ngr-stats"),i.appendChild(this._stats.dom);}}},{key:"onRemove",value:function value(t){this._mergeNode.destroy(),this._mergeNode=null,this._sceneManager.mapView.off("addLayer",this._addLayer),this._sceneManager.mapView.off("removeLayer",this._removeLayer),this._sceneManager.off("onSceneChange",this._onSceneChange),this._sceneManager.off("onGetAABB",this._onGetAABB),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t);}},{key:"add",value:function value(t){t instanceof d.default&&l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t),t instanceof g.default&&(this._camera=t.camera,this._scene.children.unshift(this._camera));}},{key:"addLayer",value:function value(t){var e=this;return this.hasLayer(t)||(t.on("addFeature",this._addFeature),t.on("addFeatures",this._addFeatures),t.on("updateFeature",this._updateFeature),t.on("removeFeature",this._removeFeature),m.default.beginLayerCount(t),t.visit(function(n,i){e._addSceneByFeature(t,n,i,!1);}),m.default.resetLayer(t),this._mergeNode&&this._mergeNode.update(t.id)),this;}},{key:"_preAddToGroup",value:function value(t,e){var n=this._groups[t.id],i=this._groupLayers[t.id];n||(n=new M.Group(),this._groups[t.id]=n,t.height&&n.position.setZ(t.height),this._scene.add(n)),i||(i=[],this._groupLayers[t.id]=i),i.push(e.id),this.addLayer(e);}},{key:"_preRemoveToGroup",value:function value(t,e){var n=this._groups[t.id];if(n){var i=this._groupLayers[t.id],r=i.indexOf(e.id);r!==-1&&i.splice(r,1),0===i.length&&(this._scene.remove(n),delete this._groups[t.id],delete this._groupLayers[t.id]),this.removeLayer(e);}}},{key:"removeLayer",value:function value(t){var e=this;if(this.hasLayer(t)){var n=this._groups[t.id];t.off("addFeatures",this._addFeatures),t.off("addFeature",this._addFeature),t.off("updateFeature",this._updateFeature),t.off("removeFeature",this._removeFeature),m.default.removeLayerCount(t),n&&n.parent&&n.parent.remove(n),this._mergeNode&&this._mergeNode.hasLayer(t.id)&&this._mergeNode.removeByLayer(t,t.id),t.visit(function(n){e._removeSceneByFeature(t,n,!1);}),this._mergeManger&&this._mergeManger.updateAll(),delete this._groups[t.id];}return this;}},{key:"hasLayer",value:function value(t){return!!t&&(t in this._groups||t.id in this._groups);}},{key:"render",value:function value(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this),this._targetRenderer&&this._camera&&(this._targetRenderer.autoClear||this._targetRenderer.clear(),this._targetRenderer.render(this._scene,this._camera),c.isDev&&this._stats.update());}},{key:"_addFeatures",value:function value(t,e){for(var n=e,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o,s=t.renderer.getStyle(a);this._addSceneByFeature(t,a,s,!1);}this._mergeNode&&this._mergeNode.update(t.id);}},{key:"_addSceneByFeature",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=e.id,o=this._meshMapping[r],a=this._groups[t.id],s=null,u=null;if((0,h.isBlank)(r))return void console.warn("error feature\'s id");if((!o||!o[t.id])&&(s=this._getPgroupByLayer(t),a||(a=new M.Group(),this._groups[t.id]=a,t.height&&a.position.setZ(t.height),s!==-1?this._groups[s].add(a):this._scene.add(a)),u=m.default.generator(this._sceneManager,t,e,n))){var l=u.children.concat(),c=this._mergeNode.merge(e,n,u,t.id,this._groups[t.id]||this._scene);0!==c&&i&&this._mergeNode.update(t.id),2!==c&&(a.add(u),o||(o={},o.size=0,this._meshMapping[r]=o),this._meshMapping[r][t.id]=u.id,o.size++),"Polygon"===n.type()&&n.clickable&&(2===c?(u instanceof M.Group&&0!==l.length&&l.forEach(function(t){u.add(t);}),this._sceneManager._octreeManager.add(u,t.id,r,{layerGroupId:t.parent.id,sceneGroupId:a.parent.id})):this._sceneManager._octreeManager.add(u,t.id,r));}}},{key:"_getPgroupByLayer",value:function value(t){for(var e in this._groupLayers){var n=this._groupLayers[e];if(n.indexOf(t.id)!==-1)return e;}return-1;}},{key:"_updateSceneByFeature",value:function value(t,e,n){var i=e.id;if(i){var r=this._groups[t.id],o=this._meshMapping[i];if(r&&o){var a=o[t.id],s=r.getObjectById(a),u=e.geometry;"Icon"===n.type()&&s.position.set(u.getCoordinates()[0],u.getCoordinates()[1],0);}}}},{key:"_removeSceneByFeature",value:function value(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=e.id,o=this._groups[t.id],a=this._meshMapping[r],s=null;if(!(0,h.isBlank)(r)){if(o&&a){var u=a[t.id];s=o.getObjectById(u),s&&(o.remove(s),s.proxy&&delete s.proxy,s&&s.geometry&&s.geometry.dispose(),this._sceneManager.mapView.collisionSceneManager.remove(e),delete a[t.id],a.size--,0===a.size&&delete this._meshMapping[r]);}this._sceneManager._octreeManager.removeByLayerAndFeature(t.id,r),this._mergeNode&&this._mergeNode.has(r,s)&&(this._mergeNode.remove(r,s),i&&this._mergeNode.update(t.id)),this._mergeManger&&this._mergeManger.remove(e,n);}}},{key:"_findMesh",value:function value(t,e){var n=(0,h.isString)(t)?t:t.id,i=this._groups[n],r=void 0;if((0,h.isBlank)(e)||(0,h.isArray)(e))return i;if((0,h.isNumber)(e.id)){var o=this._meshMapping[e.id];if(o){var a=o[n];i&&a&&(r=i.getObjectById(a));}}return r;}},{key:"_parseSceneChange",value:function value(t,e,n){for(var i=void 0,r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++){o[a-3]=arguments[a];}switch(t){case"scale":i=this._setMeshScale;break;case"quickPosition":i=this._quickSetMeshPosition;break;case"position":i=this._setMeshPosition;break;case"rotation":i=this._setMeshRotation;break;case"visible":i=this._setMeshVisible;break;case"color":i=this._setMeshColor;break;case"colorResetting":i=this._setMeshColor;break;case"highlight":i=this._hightlight;break;case"opacity":i=this._setOpacity;break;case"depthTest":i=this._setDepthTest;break;case"styleResetting":return this._resetStyle.apply(this,[e,n].concat(o)),this;}if((0,h.isArray)(n))for(var s=n,u=Array.isArray(s),l=0,s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++];}else{if(l=s.next(),l.done)break;c=l.value;}var f=c;this._callMeshValue.apply(this,[t,e,f,i].concat(o));}else this._callMeshValue.apply(this,[t,e,n,i].concat(o));return this;}},{key:"_callMeshValue",value:function value(t,e,n,i){for(var r=this._findMesh(e,n),o=arguments.length,a=Array(o>4?o-4:0),s=4;s<o;s++){a[s-4]=arguments[s];}"colorResetting"===t&&(a[0]=this._getColorByFeature(e,n)),r&&i.call.apply(i,[this,r].concat(a));}},{key:"_resetStyle",value:function value(t,e,n){var i=this;if(t&&n)if((0,h.isEmpty)(e))t.visit(function(e){i._removeSceneByFeature(t,e,!1),i._addSceneByFeature(t,e,n);});else if(e.length)for(var r=e,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var u=s;this._removeSceneByFeature(t,u,!1),this._addSceneByFeature(t,u,n);}else this._removeSceneByFeature(t,e,!1),this._addSceneByFeature(t,e,n);}},{key:"_quickSetMeshPosition",value:function value(t,e){var n=new M.Vector3(e[0],e[1],e[2]);return"MeshProxy"===t.type?t.proxyPosition.copy(n):t.position.copy(n),n;}},{key:"_setMeshPosition",value:function value(t,e){var n=this._sceneManager._octreeManager,i=!1;if(this._quickSetMeshPosition(t,e),t instanceof M.Group){var r=n.virtualGroups[n.groupMapping[t.id]];if(r){var o=e[0],a=e[1],s=e[2];i=!0,"MeshProxy"===r.type?r.proxyPosition.set(o,a,s):r.position.set(o,a,s),r.updateMatrixWorld();}}else n.has(t._layerId,t._sceneId)&&(i=!0);i&&n.rebuild();}},{key:"_setMeshScale",value:function value(t,e){"MeshProxy"===t.type?t.proxyScale.set(e[0],e[1],e[2]):t.scale.set(e[0],e[1],e[2]);}},{key:"_setMeshRotation",value:function value(t,e){"MeshProxy"===t.type?t.proxyRotation.set(e[0],e[1],e[2]):t.rotation.set(e[0],e[1],e[2]);}},{key:"_setMeshVisible",value:function value(t,e){if(t.visible=e,t instanceof M.Group){var n=this._sceneManager._octreeManager,i=n.virtualGroups[n.groupMapping[t.id]];i&&(i.visible=e);}}},{key:"_getColorByFeature",value:function value(t,e){if(!e)return null;var n=(0,h.isString)(t)?this._sceneManager.mapView.getLayer(t):t,i=n.renderer.getStyle(e);return i.color;}},{key:"_setMeshColor",value:function value(t,e,n){if(t instanceof M.Group)return this;var i=E.default.parseColor(e);return t.material.needsUpdate=!0,n?this._sceneAnimationManager.getAnimation("color").start(t,i,n.blink,n.duration,n.repeat):(this._sceneAnimationManager.getAnimation("color").stop(),t.material.color=new M.Color().set(i)),this;}},{key:"_hightlight",value:function value(t,e){if(t instanceof M.Group)return this;var n=(0,h.isNumber)(e)?e:1.414,i=t.material.color,r=i.r*n>1?1:i.r*n,o=i.g*n>1?1:i.g*n,a=i.b*n>1?1:i.b*n,s=new M.Color(r,o,a);return t.material.color=s,t.material.needsUpdate=!0,this;}},{key:"_setOpacity",value:function value(t,e,n){var i=this;return t instanceof M.Group?(t.children.forEach(function(t){i._setOpacity(t,e,n);},this),this):(t&&t.material&&(0,h.isNumber)(e)&&e>=0&&e<=1&&(t.material.transparent=!0,t.destOpacity=e,n?this._sceneAnimationManager.getAnimation("opacity").start(t,e,n.blink,n.duration,n.repeat):(t.material.opacity=e,1===e&&(t.material.transparent=!1))),this);}},{key:"_setDepthTest",value:function value(t,e){var n=this;return t instanceof M.Group?(t.children.forEach(function(t){n._setDepthTest(t,e);},this),this):(t&&t.material&&(0,h.isBoolean)(e)&&(t.material.depthTest=e),this);}},{key:"renderScene",get:function get(){return this._scene;}}]),e;}(d.default);e.ThreeNode=L,e.ThreeNodeId=A;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(169),l=i(u),c=n(173),h=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._threeNode=new c.ThreeNode(c.ThreeNodeId),t;}return a(e,t),s(e,[{key:"generator",value:function value(t,e){return this._threeNode._sceneManager||(this._threeNode._sceneManager=e.sceneManager),this._threeNode;}},{key:"find",value:function value(t){return null;}}]),e;}(l.default);e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(2),u=r(s),l=n(212),c=i(l),h=n(71),f=i(h),d=n(18),p=n(25),g=i(p),v=function v(t,e){return e.priority-t.priority;},m=function(){function t(){o(this,t),this._rbush=null,this._priorityQueue=null,this._features={},this._collsionFeatures={},this._collisionDetectionScenes={},this._visibleScenes={},this._animators={},this._animation=d.CAType.Default;}return a(t,[{key:"add",value:function value(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e instanceof u.Group&&!e.getAABB){for(var r=e.children,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var s;if(o){if(a>=r.length)break;s=r[a++];}else{if(a=r.next(),a.done)break;s=a.value;}var l=s;this.add(t,l,n);}return i&&this.updateCollision(),this;}var c=this._collisionDetectionScenes[t.id];return c||(c=[],this._collisionDetectionScenes[t.id]=c),this._features[t.id]=t,this._collsionFeatures[t.id]=t,c.push(e),i&&this.updateCollision(),this;}},{key:"hide",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return this;if(t.features){for(var n=t.features,i=Array.isArray(n),r=0,n=i?n:n[Symbol.iterator]();;){var o;if(i){if(r>=n.length)break;o=n[r++];}else{if(r=n.next(),r.done)break;o=r.value;}var a=o;this.hide(a,e);}return this;}var s=this._collisionDetectionScenes[t.id];if(s)for(var u=s,l=Array.isArray(u),c=0,u=l?u:u[Symbol.iterator]();;){var h;if(l){if(c>=u.length)break;h=u[c++];}else{if(c=u.next(),c.done)break;h=c.value;}var f=h;f&&(f.makeCollision(!0),e&&this.remove(t));}return this;}},{key:"remove",value:function value(t){return this.hasCollision(t)&&delete this._collisionDetectionScenes[t.id],this.hasVisible(t)&&delete this._visibleScenes[t.id],delete this._features[t.id],delete this._collsionFeatures[t.id],this;}},{key:"setEnable",value:function value(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.hasCollision(t)&&(e?this._collsionFeatures[t.id]=this._features[t.id]:delete this._collsionFeatures[t.id],n&&this.updateCollision()),this;}},{key:"setFeatureLayerEnable",value:function value(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(t instanceof g.default))throw new Error("setFeatureLayerEnable: Invalid featureLayer");return t.visit(function(t,i){i.collision&&e.setEnable(t,n);}),i&&this.updateCollision(),this;}},{key:"hasCollision",value:function value(t){return!!t&&t.id in this._collisionDetectionScenes;}},{key:"hasVisible",value:function value(t){return!!t&&t.id in this._visibleScenes;}},{key:"isEnabled",value:function value(t){return!!t&&t.id in this._collsionFeatures;}},{key:"_AABB2RbushBox",value:function value(t){if(!(t instanceof Array&&6===t.length))return console.warn("Invalid AABB"),null;var e={minX:t[0],minY:t[1],maxX:t[3],maxY:t[4]};return e;}},{key:"animation",value:function value(t){return this._animation=t,this;}},{key:"updateCollision",value:function value(){var t=this._activeCamera;if(t){var e=void 0,n=void 0;this._clearAnimation(),t.camera.updateMatrix(),t.camera.updateMatrixWorld(),this._visibleScenes={},this._rbush=(0,c.default)(),this._priorityQueue=new f.default(v);for(var i in this._collsionFeatures){this._priorityQueue.enq(this._collsionFeatures[i]);}for(;this._priorityQueue.size();){var r=this._priorityQueue.deq();e=this._collisionDetectionScenes[r.id];for(var o=e,a=Array.isArray(o),s=0,o=a?o:o[Symbol.iterator]();;){var u;if(a){if(s>=o.length)break;u=o[s++];}else{if(s=o.next(),s.done)break;u=s.value;}var l=u;if(n=this._AABB2RbushBox(l.getAABB(t))){var h=this._rbush.search(n),d=!1;h.length>0?d=!0:(this._visibleScenes[l._sceneId]=l,this._rbush.insert(n),d=!1);var p=this._animation.hasAnimation(l);if(p){var g=this._animation.makeCollision(l,d);this._postProcessAnimator(l,g);}else l.makeCollision(d,p);}}}this._animation.reset(this);}return this;}},{key:"_postProcessAnimator",value:function value(t,e){var n=this;e&&(this._animators[t.uuid]=e,e.on("complete",function(){delete n._animators[t.uuid];}).on("stop",function(){delete n._animators[t.uuid];}));}},{key:"_clearAnimation",value:function value(){for(var t in this._animators){var e=this._animators[t];e.stop();}this._animators={};}},{key:"clear",value:function value(){return this._rbush=null,this._priorityQueue=null,this._features={},this._collsionFeatures={},this._collisionDetectionScenes={},this._visibleScenes={},this._clearAnimation(),this;}},{key:"activeCamera",get:function get(){return this._activeCamera;},set:function set(t){this._activeCamera=t;}}]),t;}();e.default=m;},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAType=void 0;var i=n(18);e.CAType=i.CAType;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=i(r),a=n(74),s=(i(a),new o.default()),u={compass:"compass"},l=function l(){if(s.orientationControl){var t=s.orientationControl.getScreenAdjustedEuler(),e=t.alpha;e&&s.emit(u.compass,{type:u.compass,alpha:e});}},c=function c(t,e){var n=s.listeners(e);switch(e){case u.compass:if(window.FULLTILT&&window.FULLTILT.getDeviceOrientation&&0===n.length){var i={type:"world"};window.FULLTILT.getDeviceOrientation(i).then(function(t){s.orientationControl=t,s.orientationControl.listen(l);});}break;default:throw new Error(e+" is a invalid value!");}s.on(e,t);},h=function h(t,e){var n=s.listeners(e);switch(s.off(e,t),e){case u.compass:0===n.length&&window.FULLTILT&&window.FULLTILT.getDeviceOrientation&&s.orientationControl&&(s.orientationControl.stop(),delete s.orientationControl);break;default:throw new Error(e+" is a invalid value!");}};e.default={sensorType:u,registerListener:c,unregisterListener:h};},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.SensorManager=void 0;var r=n(177),o=i(r);e.SensorManager=o.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),u);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u={clickable:!0,scale:null,rotate:null,params:null,autoAttach:null,fileType:null,type:function type(){return"Model";}};Object.defineProperty(r.prototype,"path",{get:function get(){return this._path;},set:function set(t){var e=r.getFileType(t);e&&0!==e.length&&(this.fileType=e[0]),this._path=t;}}),r.getFileType=function(t){return /[.]/.exec(t)?/[^.]+$/.exec(t):null;},e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(){o(this,new s.default(),c);}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(10),s=i(a),u=n(13),l=i(u),c={radius:1,widthSegments:8,heightSegments:6,type:function type(){return"Sphere";}};Object.defineProperty(r.prototype,"color",{get:function get(){return this._color;},set:function set(t){this._color=l.default.parseColor(t);}}),e.default=r;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=e.LineString=e.Light=e.JSONStyleGenerator=e.Icon=e.Annotation=e.Style=void 0;var r=n(10),o=i(r),a=n(62),s=i(a),u=n(63),l=i(u),c=n(64),h=i(c),f=n(65),d=i(f),p=n(66),g=i(p),v=n(67),m=i(v);e.Style=o.default,e.Annotation=s.default,e.Icon=l.default,e.JSONStyleGenerator=h.default,e.Light=d.default,e.LineString=g.default,e.Polygon=m.default;},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t){Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);}return e.default=t,e;}function r(t){return t&&t.__esModule?t:{default:t};}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),s=n(9),u=r(s),l=n(2),c=i(l),h=function(){function t(){o(this,t);}return a(t,null,[{key:"export",value:function value(t,e,n){var i=[],r=t.getLayer(e.features[0].properties.planar_graph).getLayer("Area");return e.features.forEach(function(e){if(n){if(e.properties.category===n){var o=t.sceneManager.get(-1),a=o._findMesh(r,e);delete a.geometry.parameters,i.push({fId:e.id,gData:a.geometry.toJSON()});}}else{var s=t.sceneManager.get(-1),u=s._findMesh(r,e);delete u.geometry.parameters,i.push({fId:e.id,gData:u.geometry.toJSON()});}}),i;}},{key:"load",value:function value(t){var e={},n=new c.JSONLoader();return(0,u.default)(t,{}).then(function(t){var i=JSON.parse(t._bodyText);return i.forEach(function(t){e[t.fId]=n.parse(t.gData.data);}),e;});}}]),t;}();e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c={low:2,high:3},h=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._mapView=t,i.callType=c.high,i.callOne=!1,i.switchThreshold=n,i._switchType=i._switchType.bind(i),t&&(t.gestureManager.on("skewEnd",i._switchType),t.on("changePlanarGraph",i._switchType)),i;}return a(e,t),s(e,[{key:"_switchType",value:function value(){if(this._mapView.activeControl){var t=this._mapView.activeControl.getSkew();if(this.callType===c.high&&t<this.switchThreshold?(this.callType=c.low,this.callOne=!0):this.callType===c.low&&t>this.switchThreshold&&(this.callType=c.high,this.callOne=!0),this.callOne)switch(this.callOne=!1,this.callType){case c.low:this.emit("switch",{mode:c.low});break;case c.high:this.emit("switch",{mode:c.high});}}}},{key:"destroy",value:function value(){this._mapView&&(this._mapView.gestureManager.off("skewEnd",this._switchType),this._mapView.off("changePlanarGraph",this._switchType));}},{key:"switchThreshold",get:function get(){return this._switchThreshold;},set:function set(t){this._switchThreshold=t;}}]),e;}(l.default);e.default=h;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(5),l=i(u),c=(n(15),function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._gestures={},t._events={},t._platform=t.platform(),t;}return a(e,t),s(e,[{key:"init",value:function value(t){this._mapView=t;}},{key:"addGesture",value:function value(t){var e=t.type(),n=t.validPlatform();if(!this.hasGesture(t)&&n.indexOf(this._platform)>-1){this._gestures[e]=t;var i=t.providerEvent();i&&(this._events[e]=i),t.onAdd(this);}}},{key:"removeGesture",value:function value(t){var e=t.type();if(this.hasGesture(t)){delete this._gestures[e];for(var n=this._events[e],i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}for(var s=a,u=this.listeners(s),l=u,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();;){var f;if(c){if(h>=l.length)break;f=l[h++];}else{if(h=l.next(),h.done)break;f=h.value;}var d=f;this.off(s,d);}}n&&delete this._events[e],t.onRemove(this);}}},{key:"hasGesture",value:function value(t){return!!t&&t.type()in this._gestures;}},{key:"destroy",value:function value(){for(var t in this._gestures){this.removeGesture(this._gestures[t]);}this._gesture=[],this._events=[];}},{key:"mapView",get:function get(){return this._mapView;}}]),e;}(l.default));e.default=c;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=n(70),c=i(l),h=n(188),f=i(h),d=n(207),p=i(d),g=n(15),v=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"onAdd",value:function value(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),this._eventManager=new p.default.Manager(t.mapView.targetDom),this._eventManager.add(new p.default.Tap({event:"doubletap",taps:2})),this._eventManager.add(new p.default.Tap({event:"singletap"})),this._eventManager.get("doubletap").recognizeWith("singletap"),this._eventManager.get("singletap").requireFailure("doubletap"),this._eventManager.on("singletap",function(e){var n=new f.default();n.cast(e),n.type="singleTap",t.emit("singleTap",n),t.emit("tap",n);}),this._eventManager.on("doubletap",function(e){var n=new f.default();n.cast(e),n.type="doubleTap",t.emit("doubleTap",n);}),this._eventManager.add(new p.default.Press({event:"press"})),this._eventManager.on("press",function(e){var n=new f.default();n.cast(e),n.type="longTap",t.emit("longTap",n);});var n=new f.default();this._eventManager.add(new p.default.Pan()),this._eventManager.on("panstart panmove panend pinchin pinchout",function(e){switch(n.cast(e),e.type){case"panstart":n.type="moveStart",t.emit("moveStart",n);break;case"panend":n.type="moveEnd",t.emit("moveEnd",n);break;case"panmove":n.type="move",t.emit("move",n);}});var i=0,r=0,o=new f.default();this._eventManager.add(new p.default.Pan({event:"skew",pointers:2,direction:p.default.DIRECTION_ALL})),this._eventManager.on("skewstart skewup skewdown skewend",function(e){switch(o.cast(e),console.log("hammer:"+e.type),e.type){case"skewstart":o.type="skewStart",t.emit("skewStart",o);break;case"skewend":i=0,o.type="skewEnd",t.emit("skewEnd",o);break;case"skewup":o.type="skewUp",t.emit("skewUp",o);break;case"skewdown":o.type="skewDown",t.emit("skewDown",o);}}),this._eventManager.get("pan").recognizeWith(this._eventManager.get("skew")),this._eventManager.get("skew").requireFailure(this._eventManager.get("pan"));var a=new p.default.Pinch({threshold:0}),s=function s(t,e){return Math.abs(e)>8&&Math.abs(e)<352||t.scale>1.15||t.scale<.85;},l=new f.default(),c=0,h=0;this._eventManager.add(a),this._eventManager.on("pinchstart pinchmove pinchend",function(e){switch(l.cast(e),console.log("hammer:"+e.type),e.type){case"pinchstart":c=e.rotation,h=0;break;case"pinchend":l.type="zoomEnd",t.emit("zoomEnd",l),l.type="rotateEnd",t.emit("rotateEnd",l),i=0,r=0;break;case"pinchmove":var n=Math.abs(e.rotation-c);r++<5?h+=n:6===r?(r++,l.type="zoomStart",t.emit("zoomStart",l),l.type="rotateStart",t.emit("rotateStart",l),h/=r,i=0===i&&s(e,h)?1:2):(l.type="zoom",t.emit("zoom",l),l.type="rotate",t.emit("rotate",l));}}),this._eventManager.get("pinch").recognizeWith(this._eventManager.get("skew"));}},{key:"onRemove",value:function value(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t),this._eventManager.destroy();}},{key:"providerEvent",value:function value(){return["singleTap","doubleTap","longTap","moveStart","moveEnd","move","skewStart","skewEnd","skewUp","skewDown","zoomStart","zoomEnd","zoom","rotateStart","rotateEnd","rotate"];}},{key:"type",value:function value(){return"hammer";}},{key:"validPlatform",value:function value(){return[g.Platform.iOS,g.Platform.Android,g.Platform.BlackBerry,g.Platform.other,g.Platform.PC];}}],[{key:"getTouchEvent",value:function value(t){var e=void 0;return 2===t.pointers.length&&(e=t.pointers),2===t.changedPointers.length&&(e=t.changedPointers),e;}}]),e;}(c.default);e.default=v;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i);}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i);},l=n(70),c=i(l),h=n(189),f=i(h),d=n(35),p=i(d),g=n(34),v=i(g),m=n(12),y=n(15),_=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));}return a(e,t),s(e,[{key:"onAdd",value:function value(t){var n=this;if(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onAdd",this).call(this,t),!m.touchEmulator){var i=t.mapView.targetDom;this._contextMenu=function(t){t.preventDefault();},i.addEventListener("contextmenu",this._contextMenu,!1);var r=new f.default(),o=void 0;this._mouseWheel=function(e){e.preventDefault(),e.stopPropagation(),r.cast(e),o||(r.scale=1,r.type="zoomStart",t.emit("zoomStart",r)),clearTimeout(o),o=setTimeout(function(){o=null,r.type="zoomEnd",t.emit("zoomEnd",r);},250),o&&(r.type="zoom",t.emit("zoom",r));},i.addEventListener("mousewheel",this._mouseWheel,!1),i.addEventListener("MozMousePixelScroll",this._mouseWheel,!1);var a=0,s=0,l=new p.default(),c={clientX:0,clientY:0},h=function h(t,e){var n=[],i=new v.default();i.clientX=e.clientX,i.clientY=e.clientY,i.pageX=e.pageX,i.pageY=e.pageY,i.screenX=e.screenX,i.screenY=e.screenY,i.detail=e.detail,n.push(i),t.touches=n,t.target=e.target;var r=e.clientX-c.clientX;r>0?(t.rotate-=r,t.scale=0):(t.rotate-=r,t.scale=0),c.clientX=e.clientX,c.clientY=e.clientY;};this._mouseDown=function(e){2===e.button&&(e.preventDefault(),l.rotate=0,l.scale=1,c.clientX=e.clientX,c.clientY=e.clientY,h(l,e),i.addEventListener("mousemove",n._mouseMove,!1),i.addEventListener("mouseup",n._mouseUp,!1),l.type="rotateStart",t.emit("rotateStart",l),l.type="skewStart",t.emit("skewStart",l),a=e.clientX,s=e.clientY);},this._mouseMove=function(e){h(l,e),a=e.clientX-a,s=e.clientY-s,l.type="rotate",t.emit("rotate",l),s>0?(l.type="skewDown",t.emit("skewDown",l)):(l.type="skewUp",t.emit("skewUp",l)),a=e.clientX,s=e.clientY;},this._mouseUp=function(e){h(l,e),i.removeEventListener("mousemove",n._mouseMove,!1),i.removeEventListener("mouseup",n._mouseUp,!1),l.type="rotateEnd",t.emit("rotateEnd",l),l.type="skewEnd",t.emit("skewEnd",l);},i.addEventListener("mousedown",this._mouseDown,!1);}}},{key:"onRemove",value:function value(t){if(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onRemove",this).call(this,t),!m.touchEmulator){var n=t.mapView.targetDom;n.removeEventListener("contextmenu",this._contextMenu,!1),n.removeEventListener("mousewheel",this._mouseWheel,!1),n.removeEventListener("MozMousePixelScroll",this._mouseWheel,!1),n.removeEventListener("mousedown",this._mouseDown,!1);}}},{key:"providerEvent",value:function value(){return["skewStart","skewEnd","skewUp","skewDown","zoomStart","zoomEnd","zoom","rotateStart","rotateEnd","rotate"];}},{key:"type",value:function value(){return"mouse";}},{key:"validPlatform",value:function value(){return[y.Platform.PC];}}]),e;}(c.default);e.default=_;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryTransporter=e.SwitchDispatcher=e.CoordinateSystem=e.MapView=void 0;var r=n(19),o=i(r),a=n(68),s=i(a),u=n(183),l=i(u),c=n(182),h=i(c);e.MapView=o.default,e.CoordinateSystem=s.default,e.SwitchDispatcher=l.default,e.GeometryTransporter=h.default;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),a=n(34),s=i(a),u=function(){function t(){r(this,t);}return o(t,[{key:"cast",value:function value(t){if(t){for(var e=[],n=t.pointers.length>0?t.pointers:t.changedPointers,i=n,r=Array.isArray(i),o=0,i=r?i:i[Symbol.iterator]();;){var a;if(r){if(o>=i.length)break;a=i[o++];}else{if(o=i.next(),o.done)break;a=o.value;}var u=a,l=new s.default();l.clientX=u.clientX,l.clientY=u.clientY,l.pageX=u.pageX,l.pageY=u.pageY,l.screenX=u.screenX,l.screenY=u.screenY,l.detail=u.detail,e.push(l);}this.touches=e,this.target=t.target,this.rotate=t.rotation,this.scale=t.scale;}}}]),t;}();e.default=u;},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t};}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}function o(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!=(typeof e==="undefined"?"undefined":_typeof(e))&&"function"!=typeof e?t:e;}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(typeof e==="undefined"?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),u=n(35),l=i(u),c=n(34),h=i(c),f=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.scale=1,t;}return a(e,t),s(e,[{key:"cast",value:function value(t){var e=[],n=new h.default();n.clientX=t.clientX,n.clientY=t.clientY,n.pageX=t.pageX,n.pageY=t.pageY,n.screenX=t.screenX,n.screenY=t.screenY,e.push(n),this.touches=e,this.rotate=0,this.target=t.target,"undefined"!=typeof t.wheelDelta?this.delta=t.wheelDelta:"undefined"!=typeof t.detail&&(this.delta=-t.detail),this.scale+=this.delta>0?.1:-.1;}},{key:"delta",get:function get(){return this._delta;},set:function set(t){this._delta=t;}}]),e;}(l.default);e.default=f;},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),r=function(){function t(){n(this,t),this._messageChannel=new MessageChannel();}return i(t,[{key:"name",value:function value(){return"null";}},{key:"params",value:function value(){return null;}},{key:"action",value:function value(t,e,n,i){if(i){if("error"===i.type)return void this.error(t,n,i);this.success(t,e,i);}}},{key:"success",value:function value(t,e,n){}},{key:"error",value:function value(t,e,n){e(n.result.message);}},{key:"channel",get:function get(){return this._messageChannel;}}]),t;}();e.default=r;},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i);}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e;};}(),o="undefined"==typeof Promise?n(14).Promise:Promise,a=function(){function t(e){i(this,t),this._worker=e;}return r(t,[{key:"exec",value:function value(t){var e=new o(function(n,i){return t?void(t.channel.port1.onmessage=function(r){t.action(e,n,i,r.data);}):void i("protocal is null");});return t?(this._worker.postMessage({type:t.name(),params:t.params()},[t.channel.port2]),e):e;}},{key:"destroy",value:function value(){this._worker.terminate();}}]),t;}();e.default=a;},function(t,e){},192,192,192,192,192,192,192,192,192,function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t;}t.exports=n;},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1];}t.exports=n;},function(t,e){function n(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t;}t.exports=n;},function(t,e){function n(t,e,n){return t[0]=e,t[1]=n,t;}t.exports=n;},function(t,e){function n(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t;}t.exports=n;},function(t,e,n){var i;/*! Hammer.JS - v2.0.7 - 2016-04-22\n\t * http://hammerjs.github.io/\n\t *\n\t * Copyright (c) 2016 Jorik Tangelder;\n\t * Licensed under the MIT license */!function(r,o,a,s){"use strict";function u(t,e,n){return setTimeout(d(t,n),e);}function l(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0);}function c(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(i=0;i<t.length;){e.call(n,t[i],i,t),i++;}else for(i in t){t.hasOwnProperty(i)&&e.call(n,t[i],i,t);}}function h(t,e,n){var i="DEPRECATED METHOD: "+e+"\\n"+n+" AT \\n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\\(]+?[\\n$]/gm,"").replace(/^\\s+at\\s+/gm,"").replace(/^Object.<anonymous>\\s*\\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments);};}function f(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&gt(i,n);}function d(t,e){return function(){return t.apply(e,arguments);};}function p(t,e){return(typeof t==="undefined"?"undefined":_typeof(t))==yt?t.apply(e?e[0]||s:s,e):t;}function g(t,e){return t===s?e:t;}function v(t,e,n){c(b(e),function(e){t.addEventListener(e,n,!1);});}function m(t,e,n){c(b(e),function(e){t.removeEventListener(e,n,!1);});}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode;}return!1;}function _(t,e){return t.indexOf(e)>-1;}function b(t){return t.trim().split(/\\s+/g);}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++;}return-1;}function w(t){return Array.prototype.slice.call(t,0);}function E(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(r,a)<0&&i.push(t[o]),r[o]=a,o++;}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e];}):i.sort()),i;}function S(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<vt.length;){if(n=vt[o],i=n?n+r:e,i in t)return i;o++;}return s;}function M(){return St++;}function C(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r;}function I(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){p(t.options.enable,[t])&&n.handler(e);},this.init();}function O(t){var e,n=t.options.inputClass;return new(e=n?n:It?G:Ot?H:Ct?Y:z)(t,T);}function T(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&kt&&i-r===0,a=e&(Dt|Ft)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,P(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n;}function P(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=N(e)),r>1&&!n.firstMultiple?n.firstMultiple=N(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=k(i);e.timeStamp=xt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=B(s,u),e.distance=F(s,u),A(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var l=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=bt(l.x)>bt(l.y)?l.x:l.y,e.scale=a?U(a.pointers,i):1,e.rotation=a?j(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,L(n,e);var c=t.element;y(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c;}function A(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==kt&&o.eventType!==Dt||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y);}function L(t,e){var n,i,r,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Ft&&(u>Nt||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=R(u,l,c);i=h.x,r=h.y,n=bt(h.x)>bt(h.y)?h.x:h.y,o=D(l,c),t.lastInterval=e;}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o;}function N(t){for(var e=[],n=0;n<t.pointers.length;){e[n]={clientX:_t(t.pointers[n].clientX),clientY:_t(t.pointers[n].clientY)},n++;}return{timeStamp:xt(),pointers:e,center:k(e),deltaX:t.deltaX,deltaY:t.deltaY};}function k(t){var e=t.length;if(1===e)return{x:_t(t[0].clientX),y:_t(t[0].clientY)};for(var n=0,i=0,r=0;r<e;){n+=t[r].clientX,i+=t[r].clientY,r++;}return{x:_t(n/e),y:_t(i/e)};}function R(t,e,n){return{x:e/t||0,y:n/t||0};}function D(t,e){return t===e?Bt:bt(t)>=bt(e)?t<0?jt:Ut:e<0?zt:Gt;}function F(t,e,n){n||(n=qt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r);}function B(t,e,n){n||(n=qt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI;}function j(t,e){return B(e[1],e[0],Yt)+B(t[1],t[0],Yt);}function U(t,e){return F(e[0],e[1],Yt)/F(t[0],t[1],Yt);}function z(){this.evEl=Zt,this.evWin=Jt,this.pressed=!1,I.apply(this,arguments);}function G(){this.evEl=$t,this.evWin=te,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[];}function V(){this.evTarget=ne,this.evWin=ie,this.started=!1,I.apply(this,arguments);}function X(t,e){var n=w(t.touches),i=w(t.changedTouches);return e&(Dt|Ft)&&(n=E(n.concat(i),"identifier",!0)),[n,i];}function H(){this.evTarget=oe,this.targetIds={},I.apply(this,arguments);}function q(t,e){var n=w(t.touches),i=this.targetIds;if(e&(kt|Rt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return y(t.target,u);}),e===kt)for(r=0;r<o.length;){i[o[r].identifier]=!0,r++;}for(r=0;r<a.length;){i[a[r].identifier]&&s.push(a[r]),e&(Dt|Ft)&&delete i[a[r].identifier],r++;}return s.length?[E(o.concat(s),"identifier",!0),s]:void 0;}function Y(){I.apply(this,arguments);var t=d(this.handler,this);this.touch=new H(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[];}function W(t,e){t&kt?(this.primaryTouch=e.changedPointers[0].identifier,Z.call(this,e)):t&(Dt|Ft)&&Z.call(this,e);}function Z(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function r(){var t=i.indexOf(n);t>-1&&i.splice(t,1);};setTimeout(r,ae);}}function J(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=se&&a<=se)return!0;}return!1;}function K(t,e){this.manager=t,this.set(e);}function Q(t){if(_(t,de))return de;var e=_(t,pe),n=_(t,ge);return e&&n?de:e||n?e?pe:ge:_(t,fe)?fe:he;}function $(){if(!le)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||r.CSS.supports("touch-action",n);}),t;}function tt(t){this.options=gt({},this.defaults,t||{}),this.id=M(),this.manager=null,this.options.enable=g(this.options.enable,!0),this.state=me,this.simultaneous={},this.requireFail=[];}function et(t){return t&we?"cancel":t&be?"end":t&_e?"move":t&ye?"start":"";}function nt(t){return t==Gt?"down":t==zt?"up":t==jt?"left":t==Ut?"right":"";}function it(t,e){var n=e.manager;return n?n.get(t):t;}function rt(){tt.apply(this,arguments);}function ot(){rt.apply(this,arguments),this.pX=null,this.pY=null;}function at(){rt.apply(this,arguments);}function st(){tt.apply(this,arguments),this._timer=null,this._input=null;}function ut(){rt.apply(this,arguments);}function lt(){rt.apply(this,arguments);}function ct(){tt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0;}function ht(t,e){return e=e||{},e.recognizers=g(e.recognizers,ht.defaults.preset),new ft(t,e);}function ft(t,e){this.options=gt({},ht.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=O(this),this.touchAction=new K(this,this.options.touchAction),dt(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3]);},this);}function dt(t,e){var n=t.element;if(n.style){var i;c(t.options.cssProps,function(r,o){i=S(n.style,o),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||"";}),e||(t.oldCssProps={});}}function pt(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n);}var gt,vt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),yt="function",_t=Math.round,bt=Math.abs,xt=Date.now;gt="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==s&&null!==i)for(var r in i){i.hasOwnProperty(r)&&(e[r]=i[r]);}}return e;}:Object.assign;var wt=h(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;){(!n||n&&t[i[r]]===s)&&(t[i[r]]=e[i[r]]),r++;}return t;},"extend","Use `assign`."),Et=h(function(t,e){return wt(t,e,!0);},"merge","Use `assign`."),St=1,Mt=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in r,It=S(r,"PointerEvent")!==s,Ot=Ct&&Mt.test(navigator.userAgent),Tt="touch",Pt="pen",At="mouse",Lt="kinect",Nt=25,kt=1,Rt=2,Dt=4,Ft=8,Bt=1,jt=2,Ut=4,zt=8,Gt=16,Vt=jt|Ut,Xt=zt|Gt,Ht=Vt|Xt,qt=["x","y"],Yt=["clientX","clientY"];I.prototype={handler:function handler(){},init:function init(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(C(this.element),this.evWin,this.domHandler);},destroy:function destroy(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(C(this.element),this.evWin,this.domHandler);}};var Wt={mousedown:kt,mousemove:Rt,mouseup:Dt},Zt="mousedown",Jt="mousemove mouseup";f(z,I,{handler:function handler(t){var e=Wt[t.type];e&kt&&0===t.button&&(this.pressed=!0),e&Rt&&1!==t.which&&(e=Dt),this.pressed&&(e&Dt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:At,srcEvent:t}));}});var Kt={pointerdown:kt,pointermove:Rt,pointerup:Dt,pointercancel:Ft,pointerout:Ft},Qt={2:Tt,3:Pt,4:At,5:Lt},$t="pointerdown",te="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&($t="MSPointerDown",te="MSPointerMove MSPointerUp MSPointerCancel"),f(G,I,{handler:function handler(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Kt[i],o=Qt[t.pointerType]||t.pointerType,a=o==Tt,s=x(e,t.pointerId,"pointerId");r&kt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):r&(Dt|Ft)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1));}});var ee={touchstart:kt,touchmove:Rt,touchend:Dt,touchcancel:Ft},ne="touchstart",ie="touchstart touchmove touchend touchcancel";f(V,I,{handler:function handler(t){var e=ee[t.type];if(e===kt&&(this.started=!0),this.started){var n=X.call(this,t,e);e&(Dt|Ft)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Tt,srcEvent:t});}}});var re={touchstart:kt,touchmove:Rt,touchend:Dt,touchcancel:Ft},oe="touchstart touchmove touchend touchcancel";f(H,I,{handler:function handler(t){var e=re[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Tt,srcEvent:t});}});var ae=2500,se=25;f(Y,I,{handler:function handler(t,e,n){var i=n.pointerType==Tt,r=n.pointerType==At;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)W.call(this,e,n);else if(r&&J.call(this,n))return;this.callback(t,e,n);}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy();}});var ue=S(mt.style,"touchAction"),le=ue!==s,ce="compute",he="auto",fe="manipulation",de="none",pe="pan-x",ge="pan-y",ve=$();K.prototype={set:function set(t){t==ce&&(t=this.compute()),le&&this.manager.element.style&&ve[t]&&(this.manager.element.style[ue]=t),this.actions=t.toLowerCase().trim();},update:function update(){this.set(this.manager.options.touchAction);},compute:function compute(){var t=[];return c(this.manager.recognizers,function(e){p(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()));}),Q(t.join(" "));},preventDefaults:function preventDefaults(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=_(i,de)&&!ve[de],o=_(i,ge)&&!ve[ge],a=_(i,pe)&&!ve[pe];if(r){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return;}return a&&o?void 0:r||o&&n&Vt||a&&n&Xt?this.preventSrc(e):void 0;},preventSrc:function preventSrc(t){this.manager.session.prevented=!0,t.preventDefault();}};var me=1,ye=2,_e=4,be=8,xe=be,we=16,Ee=32;tt.prototype={defaults:{},set:function set(t){return gt(this.options,t),this.manager&&this.manager.touchAction.update(),this;},recognizeWith:function recognizeWith(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this;},dropRecognizeWith:function dropRecognizeWith(t){return l(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this);},requireFailure:function requireFailure(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),x(e,t)===-1&&(e.push(t),t.requireFailure(this)),this;},dropRequireFailure:function dropRequireFailure(t){if(l(t,"dropRequireFailure",this))return this;t=it(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this;},hasRequireFailures:function hasRequireFailures(){return this.requireFail.length>0;},canRecognizeWith:function canRecognizeWith(t){return!!this.simultaneous[t.id];},emit:function emit(t){function e(e){n.manager.emit(e,t);}var n=this,i=this.state;i<be&&e(n.options.event+et(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=be&&e(n.options.event+et(i));},tryEmit:function tryEmit(t){return this.canEmit()?this.emit(t):void(this.state=Ee);},canEmit:function canEmit(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ee|me)))return!1;t++;}return!0;},recognize:function recognize(t){var e=gt({},t);return p(this.options.enable,[this,e])?(this.state&(xe|we|Ee)&&(this.state=me),this.state=this.process(e),void(this.state&(ye|_e|be|we)&&this.tryEmit(e))):(this.reset(),void(this.state=Ee));},process:function process(t){},getTouchAction:function getTouchAction(){},reset:function reset(){}},f(rt,tt,{defaults:{pointers:1},attrTest:function attrTest(t){var e=this.options.pointers;return 0===e||t.pointers.length===e;},process:function process(t){var e=this.state,n=t.eventType,i=e&(ye|_e),r=this.attrTest(t);return i&&(n&Ft||!r)?e|we:i||r?n&Dt?e|be:e&ye?e|_e:ye:Ee;}}),f(ot,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ht},getTouchAction:function getTouchAction(){var t=this.options.direction,e=[];return t&Vt&&e.push(ge),t&Xt&&e.push(pe),e;},directionTest:function directionTest(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&Vt?(r=0===o?Bt:o<0?jt:Ut,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?Bt:a<0?zt:Gt,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction;},attrTest:function attrTest(t){return rt.prototype.attrTest.call(this,t)&&(this.state&ye||!(this.state&ye)&&this.directionTest(t));},emit:function emit(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=nt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t);}}),f(at,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function getTouchAction(){return[de];},attrTest:function attrTest(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ye);},emit:function emit(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e;}this._super.emit.call(this,t);}}),f(st,tt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function getTouchAction(){return[he];},process:function process(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Dt|Ft)&&!r)this.reset();else if(t.eventType&kt)this.reset(),this._timer=u(function(){this.state=xe,this.tryEmit();},e.time,this);else if(t.eventType&Dt)return xe;return Ee;},reset:function reset(){clearTimeout(this._timer);},emit:function emit(t){this.state===xe&&(t&&t.eventType&Dt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=xt(),this.manager.emit(this.options.event,this._input)));}}),f(ut,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function getTouchAction(){return[de];},attrTest:function attrTest(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ye);}}),f(lt,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Vt|Xt,pointers:1},getTouchAction:function getTouchAction(){return ot.prototype.getTouchAction.call(this);},attrTest:function attrTest(t){var e,n=this.options.direction;return n&(Vt|Xt)?e=t.overallVelocity:n&Vt?e=t.overallVelocityX:n&Xt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&bt(e)>this.options.velocity&&t.eventType&Dt;},emit:function emit(t){var e=nt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t);}}),f(ct,tt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function getTouchAction(){return[fe];},process:function process(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&kt&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Dt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var s=this.count%e.taps;if(0===s)return this.hasRequireFailures()?(this._timer=u(function(){this.state=xe,this.tryEmit();},e.interval,this),ye):xe;}return Ee;},failTimeout:function failTimeout(){return this._timer=u(function(){this.state=Ee;},this.options.interval,this),Ee;},reset:function reset(){clearTimeout(this._timer);},emit:function emit(){this.state==xe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input));}}),ht.VERSION="2.0.7",ht.defaults={domEvents:!1,touchAction:ce,enable:!0,inputTarget:null,inputClass:null,preset:[[ut,{enable:!1}],[at,{enable:!1},["rotate"]],[lt,{direction:Vt}],[ot,{direction:Vt},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[st]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Se=1,Me=2;ft.prototype={set:function set(t){return gt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this;},stop:function stop(t){this.session.stopped=t?Me:Se;},recognize:function recognize(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&xe)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;){n=i[o],e.stopped===Me||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(ye|_e|be)&&(r=e.curRecognizer=n),o++;}}},get:function get(t){if(t instanceof tt)return t;for(var e=this.recognizers,n=0;n<e.length;n++){if(e[n].options.event==t)return e[n];}return null;},add:function add(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t;},remove:function remove(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);n!==-1&&(e.splice(n,1),this.touchAction.update());}return this;},on:function on(t,e){if(t!==s&&e!==s){var n=this.handlers;return c(b(t),function(t){n[t]=n[t]||[],n[t].push(e);}),this;}},off:function off(t,e){if(t!==s){var n=this.handlers;return c(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t];}),this;}},emit:function emit(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault();};for(var i=0;i<n.length;){n[i](e),i++;}}},destroy:function destroy(){this.element&&dt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null;}},gt(ht,{INPUT_START:kt,INPUT_MOVE:Rt,INPUT_END:Dt,INPUT_CANCEL:Ft,STATE_POSSIBLE:me,STATE_BEGAN:ye,STATE_CHANGED:_e,STATE_ENDED:be,STATE_RECOGNIZED:xe,STATE_CANCELLED:we,STATE_FAILED:Ee,DIRECTION_NONE:Bt,DIRECTION_LEFT:jt,DIRECTION_RIGHT:Ut,DIRECTION_UP:zt,DIRECTION_DOWN:Gt,DIRECTION_HORIZONTAL:Vt,DIRECTION_VERTICAL:Xt,DIRECTION_ALL:Ht,Manager:ft,Input:I,TouchAction:K,TouchInput:H,MouseInput:z,PointerEventInput:G,TouchMouseInput:Y,SingleTouchInput:V,Recognizer:tt,AttrRecognizer:rt,Tap:ct,Pan:ot,Swipe:lt,Pinch:at,Rotate:ut,Press:st,on:v,off:m,each:c,merge:Et,extend:wt,assign:gt,inherit:f,bindFn:d,prefixed:S});var Ce="undefined"!=typeof r?r:"undefined"!=typeof self?self:{};Ce.Hammer=ht,i=function(){return ht;}.call(e,n,e,t),!(i!==s&&(t.exports=i));}(window,document,"Hammer");},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(t,e){t.super_=e;var n=function n(){};n.prototype=e.prototype,t.prototype=new n(),t.prototype.constructor=t;};},function(t,e,n){var i=n(202),r=n(205),o=n(204),a=n(206),s=n(203),u=[0,0];t.exports.computeMiter=function(t,e,n,a,l){return i(t,n,a),o(t,t),r(e,-t[1],t[0]),r(u,-n[1],n[0]),l/s(e,u);},t.exports.normal=function(t,e){return r(t,-e[1],e[0]),t;},t.exports.direction=function(t,e,n){return a(t,e,n),o(t,t),t;};},function(t,e,n){function i(t,e,n){t.push([[e[0],e[1]],n]);}var r=n(209),o=[0,0],a=[0,0],s=[0,0],u=[0,0];t.exports=function(t,e){var n=null,l=[];e&&(t=t.slice(),t.push(t[0]));for(var c=t.length,h=1;h<c;h++){var f=t[h-1],d=t[h],p=h<t.length-1?t[h+1]:null;if(r.direction(o,d,f),n||(n=[0,0],r.normal(n,o)),1===h&&i(l,n,1),p){r.direction(a,p,d);var g=r.computeMiter(s,u,o,a,1);i(l,u,g);}else r.normal(n,o),i(l,n,1);}if(t.length>2&&e){var v=t[c-2],m=t[0],y=t[1];r.direction(o,m,v),r.direction(a,y,m),r.normal(n,o);var _=r.computeMiter(s,u,o,a,1);l[0][0]=u.slice(),l[c-1][0]=u.slice(),l[0][1]=_,l[c-1][1]=_,l.pop();}return l;};},function(t,e){"use strict";function n(t,e,o,a,s){for(o=o||0,a=a||t.length-1,s=s||r;a>o;){if(a-o>600){var u=a-o+1,l=e-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1),d=Math.max(o,Math.floor(e-l*h/u+f)),p=Math.min(a,Math.floor(e+(u-l)*h/u+f));n(t,e,d,p,s);}var g=t[e],v=o,m=a;for(i(t,o,e),s(t[a],g)>0&&i(t,o,a);v<m;){for(i(t,v,m),v++,m--;s(t[v],g)<0;){v++;}for(;s(t[m],g)>0;){m--;}}0===s(t[o],g)?i(t,o,m):(m++,i(t,m,a)),m<=e&&(o=m+1),e<=m&&(a=m-1);}}function i(t,e,n){var i=t[e];t[e]=t[n],t[n]=i;}function r(t,e){return t<e?-1:t>e?1:0;}t.exports=n;},function(t,e,n){"use strict";function i(t,e){return this instanceof i?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new i(t,e);}function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++){if(n(t,e[i]))return i;}return-1;}function o(t,e){a(t,0,t.children.length,e,t);}function a(t,e,n,i,r){r||(r=v(null)),r.minX=1/0,r.minY=1/0,r.maxX=-(1/0),r.maxY=-(1/0);for(var o,a=e;a<n;a++){o=t.children[a],s(r,t.leaf?i(o):o);}return r;}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t;}function u(t,e){return t.minX-e.minX;}function l(t,e){return t.minY-e.minY;}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY);}function h(t){return t.maxX-t.minX+(t.maxY-t.minY);}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY));}function d(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i);}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY;}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY;}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)};}function m(t,e,n,i,r){for(var o,a=[e,n];a.length;){n=a.pop(),e=a.pop(),n-e<=i||(o=e+Math.ceil((n-e)/i/2)*i,y(t,o,e,n,r),a.push(e,o,o,n));}}t.exports=i;var y=n(211);i.prototype={all:function all(){return this._all(this.data,[]);},search:function search(t){var e=this.data,n=[],i=this.toBBox;if(!g(t,e))return n;for(var r,o,a,s,u=[];e;){for(r=0,o=e.children.length;r<o;r++){a=e.children[r],s=e.leaf?i(a):a,g(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):u.push(a));}e=u.pop();}return n;},collides:function collides(t){var e=this.data,n=this.toBBox;if(!g(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++){if(o=e.children[i],a=e.leaf?n(o):o,g(t,a)){if(e.leaf||p(t,a))return!0;s.push(o);}}e=s.pop();}return!1;},load:function load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++){this.insert(t[e]);}return this;}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r;}this._insert(i,this.data.height-i.height-1,!0);}}else this.data=i;return this;},insert:function insert(t){return t&&this._insert(t,this.data.height-1),this;},clear:function clear(){return this.data=v([]),this;},remove:function remove(t,e){if(!t)return this;for(var n,i,o,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=c.pop(),a=!0),s.leaf&&(o=r(t,s.children,e),o!==-1))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!p(s,u)?i?(n++,s=i.children[n],a=!1):s=null:(l.push(s),c.push(n),n=0,i=s,s=s.children[0]);}return this;},toBBox:function toBBox(t){return t;},compareMinX:u,compareMinY:l,toJSON:function toJSON(){return this.data;},fromJSON:function fromJSON(t){return this.data=t,this;},_all:function _all(t,e){for(var n=[];t;){t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();}return e;},_build:function _build(t,e,n,i){var r,a=n-e+1,s=this._maxEntries;if(a<=s)return r=v(t.slice(e,n+1)),o(r,this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),r=v([]),r.leaf=!1,r.height=i;var u,l,c,h,f=Math.ceil(a/s),d=f*Math.ceil(Math.sqrt(s));for(m(t,e,n,d,this.compareMinX),u=e;u<=n;u+=d){for(c=Math.min(u+d-1,n),m(t,u,c,f,this.compareMinY),l=u;l<=c;l+=f){h=Math.min(l+f-1,c),r.children.push(this._build(t,l,h,i-1));}}return o(r,this.toBBox),r;},_chooseSubtree:function _chooseSubtree(t,e,n,i){for(var r,o,a,s,u,l,h,d;;){if(i.push(e),e.leaf||i.length-1===n)break;for(h=d=1/0,r=0,o=e.children.length;r<o;r++){a=e.children[r],u=c(a),l=f(t,a)-u,l<d?(d=l,h=u<h?u:h,s=a):l===d&&u<h&&(h=u,s=a);}e=s||e.children[0];}return e;},_insert:function _insert(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),s(a,r);e>=0&&o[e].children.length>this._maxEntries;){this._split(o,e),e--;}this._adjustParentBBoxes(r,o,e);},_split:function _split(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=v(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s);},_splitRoot:function _splitRoot(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox);},_chooseSplitIndex:function _chooseSplitIndex(t,e,n){var i,r,o,s,u,l,h,f;for(l=h=1/0,i=e;i<=n-e;i++){r=a(t,0,i,this.toBBox),o=a(t,i,n,this.toBBox),s=d(r,o),u=c(r)+c(o),s<l?(l=s,f=i,h=u<h?u:h):s===l&&u<h&&(h=u,f=i);}return f;},_chooseSplitAxis:function _chooseSplitAxis(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:l,o=this._allDistMargin(t,e,n,i),a=this._allDistMargin(t,e,n,r);o<a&&t.children.sort(i);},_allDistMargin:function _allDistMargin(t,e,n,i){t.children.sort(i);var r,o,u=this.toBBox,l=a(t,0,e,u),c=a(t,n-e,n,u),f=h(l)+h(c);for(r=e;r<n-e;r++){o=t.children[r],s(l,t.leaf?u(o):o),f+=h(l);}for(r=n-e-1;r>=e;r--){o=t.children[r],s(c,t.leaf?u(o):o),f+=h(c);}return f;},_adjustParentBBoxes:function _adjustParentBBoxes(t,e,n){for(var i=n;i>=0;i--){s(e[i],t);}},_condense:function _condense(t){for(var e,n=t.length-1;n>=0;n--){0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():o(t[n],this.toBBox);}},_initFormat:function _initFormat(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};");}};},function(t,e){"use strict";function n(t){for(var e=5381,n=t.length;n;){e=33*e^t.charCodeAt(--n);}return e>>>0;}t.exports=n;},function(t,e,n){var i=n(208),r=n(210),o=2;t.exports=function(t){function e(n,i){return this instanceof e?(t.BufferGeometry.call(this),Array.isArray(n)?i=i||{}:"object"==(typeof n==="undefined"?"undefined":_typeof(n))&&(i=n,n=[]),i=i||{},this.addAttribute("position",new t.BufferAttribute(void 0,3)),this.addAttribute("lineNormal",new t.BufferAttribute(void 0,2)),this.addAttribute("lineMiter",new t.BufferAttribute(void 0,1)),i.distances&&this.addAttribute("lineDistance",new t.BufferAttribute(void 0,1)),"function"==typeof this.setIndex?this.setIndex(new t.BufferAttribute(void 0,1)):this.addAttribute("index",new t.BufferAttribute(void 0,1)),void this.update(n,i.closed)):new e(n,i);}return i(e,t.BufferGeometry),e.prototype.update=function(t,e){t=t||[];var n=r(t,e);e&&(t=t.slice(),t.push(t[0]),n.push(n[0]));var i=this.getAttribute("position"),a=this.getAttribute("lineNormal"),s=this.getAttribute("lineMiter"),u=this.getAttribute("lineDistance"),l="function"==typeof this.getIndex?this.getIndex():this.getAttribute("index"),c=Math.max(0,6*(t.length-1));if(!i.array||t.length!==i.array.length/3/o){var h=t.length*o;i.array=new Float32Array(3*h),a.array=new Float32Array(2*h),s.array=new Float32Array(h),l.array=new Uint16Array(c),u&&(u.array=new Float32Array(h));}void 0!==i.count&&(i.count=h),i.needsUpdate=!0,void 0!==a.count&&(a.count=h),a.needsUpdate=!0,void 0!==s.count&&(s.count=h),s.needsUpdate=!0,void 0!==l.count&&(l.count=c),l.needsUpdate=!0,u&&(void 0!==u.count&&(u.count=h),u.needsUpdate=!0);var f=0,d=0,p=0,g=l.array;t.forEach(function(t,e,n){var r=f;if(g[d++]=r+0,g[d++]=r+1,g[d++]=r+2,g[d++]=r+2,g[d++]=r+1,g[d++]=r+3,i.setXYZ(f++,t[0],t[1],0),i.setXYZ(f++,t[0],t[1],0),u){var o=e/(n.length-1);u.setX(p++,o),u.setX(p++,o);}});var v=0,m=0;n.forEach(function(t){var e=t[0],n=t[1];a.setXY(v++,e[0],e[1]),a.setXY(v++,e[0],e[1]),s.setX(m++,-n),s.setX(m++,n);});},e;};},function(t,e,n){t.exports=function(){return new Worker(n.p+"699f020579f0c3512a2d.worker.js");};},function(t,e){}]));//# sourceMappingURL=ngr.min.js.map\n// aliNaviMng\nvar aliNaviMng=function(){function aliNaviMng(options){_classCallCheck(this,aliNaviMng);var dataSource=options.dataSource,mapView=options.mapView,styleGenerator=options.styleGenerator,naviLayerid=options.naviLayerid;if(!dataSource||!mapView||!styleGenerator||!naviLayerid){throw new Error("dataSource || mapview || naviLayer || styleGenerator can not is empty");return;}this.options={startfloor:"",endfloor:"",startcoord:{x:"",y:""},endcoord:{x:"",y:""}};this.dataSource=dataSource;this.mapView=mapView;this.styleGenerator=styleGenerator;this.navigate=new NGR.navi.NavigateManager(dataSource);this.naviLayer="";this.dynamicNaviManager="";this.naviLayerid=naviLayerid;this.dyNavInfo={},this.isHasNaviline=false,this.offset=this.mapView.coordinateSystem.getOffset();}_createClass(aliNaviMng,[{key:"setStartPosition",value:function setStartPosition(flooid,coord){this.options.startfloor=flooid;this.options.startcoord=coord;}},{key:"setEndPosition",value:function setEndPosition(floorid,coord){this.options.endfloor=floorid;this.options.endcoord=coord;}},{key:"initNavi",value:async function initNavi(currentfloor){var _this=this;if(mapView.getLayer("navi")){mapView.removeLayer(this.naviLayer);this.naviLayer="";}if(!this.styleGenerator){throw new Error("styleGenerator can not is empty ,from NGR.style.JSONStyleGenerator(style)");return;}var that=this;await this.navigate.navigate({\'from_x\':that.options.startcoord.x,\'from_y\':that.options.startcoord.y,\'from_planar_graph\':that.options.startfloor,\'to_x\':that.options.endcoord.x,\'to_y\':that.options.endcoord.y,\'to_planar_graph\':that.options.endfloor}).then(function(res){_this.naviLayer=new NGR.layer.FeatureLayer(_this.naviLayerid,_this.styleGenerator);_this.naviLayer.coordinateSystem=mapView.coordinateSystem;_this.mapView.addLayer(_this.naviLayer);_this.naviLayer.features=_this.navigate.getNavigateByPlanarGraph(currentfloor);var animation=new NGR.helper.tubeHelper.TubeOffsetAnimation(_this.mapView,_this.naviLayer,{duration:500});animation.start();_this.isHasNaviline=true;}).catch(function(e){console.error("导航线渲染失败",e);});}},{key:"endNavigate",value:function endNavigate(){if(this.mapView.getLayer(this.naviLayerid)){this.mapView.removeLayer(this.naviLayer);this.naviLayer="";this.isHasNaviline=false;}}},{key:"dynamicNavi",value:function dynamicNavi(options){if(!this.isHasNaviline){return;}var currentfloor=options.currentfloor,coord=options.coord,maxRoadAttachDistance=options.maxRoadAttachDistance,maxDistanceReInitNavi=options.maxDistanceReInitNavi,locMarker=options.locMarker,locMarkerId=options.locMarkerId,needAudio=options.needAudio,autoMove=options.autoMove;this.dynamicNaviManager=new NGR.navi.DynamicNavigation(this.mapView,this.navigate,{needAudio:needAudio,autoplay:needAudio,endThreshold:needAudio},{autoMove:autoMove});this.dynamicNaviManager.featureCollection=this.navigate.getRawFC();this.dyNavInfo.closestPoint=this.navigate.getClosestPoints(currentfloor,coord.x,coord.y)[0];this.dyNavInfo.distanceToEnd=this.dynamicNaviManager.distanceToEnd(this.dyNavInfo.closestPoint.x,this.dyNavInfo.closestPoint.y,currentfloor,true,false);this.dyNavInfo.timeToEnd=this.dyNavInfo.distanceToEnd;this.dyNavInfo.messageInList=this.dynamicNaviManager.getMessageInList();this.dyNavInfo.messageInNavi=this.dynamicNaviManager.getMessageInNavi(needAudio);var closestDistance=NGR.navi.NaviUtils.getDistance(coord,this.dyNavInfo.closestPoint);if(closestDistance<maxRoadAttachDistance){this.dyNavInfo.closestDistance="attach";this.mapView.sceneManager.setPosition(locMarker,"id",locMarkerId,this.dyNavInfo.closestPoint.x,this.dyNavInfo.closestPoint.y,0.2);if(autoMove){this.dynamicNaviManager.findNearestSegment(this.dyNavInfo.closestPoint.x,this.dyNavInfo.closestPoint.y,currentfloor,true,true);this.dynamicNaviManager.moveToSegment();// mapView.activeControl.moveToPoint(coord.x + this.offset[0],coord.y + this.offset[1])\n}}else if(closestDistance<maxDistanceReInitNavi){this.dyNavInfo.closestDistance="deviateing";this.mapView.sceneManager.setPosition(locMarker,"id",locMarkerId,coord.x,coord.y,0.2);}else{this.dyNavInfo.closestDistance="deviated";this.endNavigate();this.setStartPosition(this.mapView.currentfloor,coord);this.initNavi(this.mapView.currentfloor);}return this.dyNavInfo;}}]);return aliNaviMng;}();NGR.navi.aliNaviMng=aliNaviMng;var AudioProvider=function(){function AudioProvider(){var _this2=this;_classCallCheck(this,AudioProvider);var dom=document.getElementById(\'audioProvider\');dom&&dom.remove();this._status=\'open\';this._audioStack=[];this._audioDom=document.createElement(\'audio\');this._audioDom.setAttribute("id","audioProvider");this._audioDom.onplaying=function(){_this2._isPlaying=true;};this._audioDom.onended=function(){_this2._isPlaying=false;_this2.playMessage(_this2._audioStack.shift());};document.body.appendChild(this._audioDom);}_createClass(AudioProvider,[{key:"playMessage",value:function playMessage(msg,isForce){if(typeof msg!="string"||this._status===\'close\'){return;}if(this._isPlaying){isForce&&this._audioStack.push(msg);return;}this._audioDom.src="https://apiexternal.ipalmap.com:10010/speech?tex="+msg;this._audioDom.play();console.log("sfsf",this._audioDom);this._isPlaying=true;}},{key:"close",value:function close(){this._status=\'close\';this._audioDom.muted=true;}},{key:"open",value:function open(){this._status=\'open\';this._audioDom.muted=false;}}]);return AudioProvider;}();NGR.AudioProvider=AudioProvider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zdGF0aWMvanMvbmdyLm1pbi5qcz9hZTI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qISBDb3B5cmlnaHQgKGMpIFBhbG1hcCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuICovXG4hZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIHI9bltpXT17ZXhwb3J0czp7fSxpZDppLGxvYWRlZDohMX07cmV0dXJuIHRbaV0uY2FsbChyLmV4cG9ydHMscixyLmV4cG9ydHMsZSksci5sb2FkZWQ9ITAsci5leHBvcnRzfXZhciBuPXt9O3JldHVybiBlLm09dCxlLmM9bixlLnA9XCIuL1wiLGUoMCl9KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpKXN3aXRjaCh0eXBlb2YgdFtlXSl7Y2FzZVwiZnVuY3Rpb25cIjpicmVhaztjYXNlXCJvYmplY3RcIjp0W2VdPWZ1bmN0aW9uKGUpe3ZhciBuPWUuc2xpY2UoMSksaT10W2VbMF1dO3JldHVybiBmdW5jdGlvbih0LGUscil7aS5hcHBseSh0aGlzLFt0LGUscl0uY29uY2F0KG4pKX19KHRbZV0pO2JyZWFrO2RlZmF1bHQ6dFtlXT10W3RbZV1dfXJldHVybiB0fShbZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKDEyOCl9LGZ1bmN0aW9uKHQsZSl7Lypcblx0b2JqZWN0LWFzc2lnblxuXHQoYykgU2luZHJlIFNvcmh1c1xuXHRAbGljZW5zZSBNSVRcblx0Ki9cblwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7aWYobnVsbD09PXR8fHZvaWQgMD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkXCIpO3JldHVybiBPYmplY3QodCl9ZnVuY3Rpb24gaSgpe3RyeXtpZighT2JqZWN0LmFzc2lnbilyZXR1cm4hMTt2YXIgdD1uZXcgU3RyaW5nKFwiYWJjXCIpO2lmKHRbNV09XCJkZVwiLFwiNVwiPT09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModClbMF0pcmV0dXJuITE7Zm9yKHZhciBlPXt9LG49MDtuPDEwO24rKyllW1wiX1wiK1N0cmluZy5mcm9tQ2hhckNvZGUobildPW47dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSk7aWYoXCIwMTIzNDU2Nzg5XCIhPT1pLmpvaW4oXCJcIikpcmV0dXJuITE7dmFyIHI9e307cmV0dXJuXCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7clt0XT10fSksXCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiPT09T2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSxyKSkuam9pbihcIlwiKX1jYXRjaCh0KXtyZXR1cm4hMX19dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxvPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksYT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO3QuZXhwb3J0cz1pKCk/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSxzLHU9bih0KSxsPTE7bDxhcmd1bWVudHMubGVuZ3RoO2wrKyl7aT1PYmplY3QoYXJndW1lbnRzW2xdKTtmb3IodmFyIGMgaW4gaSlvLmNhbGwoaSxjKSYmKHVbY109aVtjXSk7aWYocil7cz1yKGkpO2Zvcih2YXIgaD0wO2g8cy5sZW5ndGg7aCsrKWEuY2FsbChpLHNbaF0pJiYodVtzW2hdXT1pW3NbaF1dKX19cmV0dXJuIHV9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscixvLGE9bigxKSxzPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9OyFmdW5jdGlvbihuLGEpe1wib2JqZWN0XCI9PT1zKGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdD9hKGUpOihyPVtlXSxpPWEsbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkoZSxyKTppLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSkpfSh2b2lkIDAsZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0LGUsbixpKXt0aGlzLl94PXR8fDAsdGhpcy5feT1lfHwwLHRoaXMuX3o9bnx8MCx0aGlzLl93PXZvaWQgMCE9PWk/aToxfWZ1bmN0aW9uIG4odCxlLG4pe3RoaXMueD10fHwwLHRoaXMueT1lfHwwLHRoaXMuej1ufHwwfWZ1bmN0aW9uIGkoKXt0aGlzLmVsZW1lbnRzPVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSxhcmd1bWVudHMubGVuZ3RoPjAmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg0OiB0aGUgY29uc3RydWN0b3Igbm8gbG9uZ2VyIHJlYWRzIGFyZ3VtZW50cy4gdXNlIC5zZXQoKSBpbnN0ZWFkLlwiKX1mdW5jdGlvbiByKCl7fWZ1bmN0aW9uIG8odCxlKXt0aGlzLng9dHx8MCx0aGlzLnk9ZXx8MH1mdW5jdGlvbiB1KHQsZSxuLGkscixhLHMsbCxjLGgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6WnIrK30pLHRoaXMudXVpZD1Xci5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLmltYWdlPXZvaWQgMCE9PXQ/dDp1LkRFRkFVTFRfSU1BR0UsdGhpcy5taXBtYXBzPVtdLHRoaXMubWFwcGluZz12b2lkIDAhPT1lP2U6dS5ERUZBVUxUX01BUFBJTkcsdGhpcy53cmFwUz12b2lkIDAhPT1uP246VmksdGhpcy53cmFwVD12b2lkIDAhPT1pP2k6VmksdGhpcy5tYWdGaWx0ZXI9dm9pZCAwIT09cj9yOldpLHRoaXMubWluRmlsdGVyPXZvaWQgMCE9PWE/YTpKaSx0aGlzLmFuaXNvdHJvcHk9dm9pZCAwIT09Yz9jOjEsdGhpcy5mb3JtYXQ9dm9pZCAwIT09cz9zOmhyLHRoaXMudHlwZT12b2lkIDAhPT1sP2w6S2ksdGhpcy5vZmZzZXQ9bmV3IG8oMCwwKSx0aGlzLnJlcGVhdD1uZXcgbygxLDEpLHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSEwLHRoaXMucHJlbXVsdGlwbHlBbHBoYT0hMSx0aGlzLmZsaXBZPSEwLHRoaXMudW5wYWNrQWxpZ25tZW50PTQsdGhpcy5lbmNvZGluZz12b2lkIDAhPT1oP2g6QnIsdGhpcy52ZXJzaW9uPTAsdGhpcy5vblVwZGF0ZT1udWxsfWZ1bmN0aW9uIGwodCxlLG4saSxyLG8sYSxzLGwsYyxoLGYpe3UuY2FsbCh0aGlzLG51bGwsbyxhLHMsbCxjLGkscixoLGYpLHRoaXMuaW1hZ2U9e2RhdGE6dCx3aWR0aDplLGhlaWdodDpufSx0aGlzLm1hZ0ZpbHRlcj12b2lkIDAhPT1sP2w6SGksdGhpcy5taW5GaWx0ZXI9dm9pZCAwIT09Yz9jOkhpLHRoaXMuZ2VuZXJhdGVNaXBtYXBzPSExLHRoaXMuZmxpcFk9ITEsdGhpcy51bnBhY2tBbGlnbm1lbnQ9MX1mdW5jdGlvbiBjKHQsZSxuLGkscixvLGEscyxsLGMpe3Q9dm9pZCAwIT09dD90OltdLGU9dm9pZCAwIT09ZT9lOlJpLHUuY2FsbCh0aGlzLHQsZSxuLGkscixvLGEscyxsLGMpLHRoaXMuZmxpcFk9ITF9ZnVuY3Rpb24gaCgpe3RoaXMuc2VxPVtdLHRoaXMubWFwPXt9fWZ1bmN0aW9uIGYodCxlLG4pe3ZhciBpPXRbMF07aWYoaTw9MHx8aT4wKXJldHVybiB0O3ZhciByPWUqbixvPVFyW3JdO2lmKHZvaWQgMD09PW8mJihvPW5ldyBGbG9hdDMyQXJyYXkociksUXJbcl09byksMCE9PWUpe2kudG9BcnJheShvLDApO2Zvcih2YXIgYT0xLHM9MDthIT09ZTsrK2Epcys9bix0W2FdLnRvQXJyYXkobyxzKX1yZXR1cm4gb31mdW5jdGlvbiBkKHQsZSl7dmFyIG49JHJbZV07dm9pZCAwPT09biYmKG49bmV3IEludDMyQXJyYXkoZSksJHJbZV09bik7Zm9yKHZhciBpPTA7aSE9PWU7KytpKW5baV09dC5hbGxvY1RleHR1cmVVbml0KCk7cmV0dXJuIG59ZnVuY3Rpb24gcCh0LGUpe3QudW5pZm9ybTFmKHRoaXMuYWRkcixlKX1mdW5jdGlvbiBnKHQsZSl7dC51bmlmb3JtMWkodGhpcy5hZGRyLGUpfWZ1bmN0aW9uIHYodCxlKXt2b2lkIDA9PT1lLng/dC51bmlmb3JtMmZ2KHRoaXMuYWRkcixlKTp0LnVuaWZvcm0yZih0aGlzLmFkZHIsZS54LGUueSl9ZnVuY3Rpb24gbSh0LGUpe3ZvaWQgMCE9PWUueD90LnVuaWZvcm0zZih0aGlzLmFkZHIsZS54LGUueSxlLnopOnZvaWQgMCE9PWUucj90LnVuaWZvcm0zZih0aGlzLmFkZHIsZS5yLGUuZyxlLmIpOnQudW5pZm9ybTNmdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24geSh0LGUpe3ZvaWQgMD09PWUueD90LnVuaWZvcm00ZnYodGhpcy5hZGRyLGUpOnQudW5pZm9ybTRmKHRoaXMuYWRkcixlLngsZS55LGUueixlLncpfWZ1bmN0aW9uIF8odCxlKXt0LnVuaWZvcm1NYXRyaXgyZnYodGhpcy5hZGRyLCExLGUuZWxlbWVudHN8fGUpfWZ1bmN0aW9uIGIodCxlKXt2b2lkIDA9PT1lLmVsZW1lbnRzP3QudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsZSk6KGVvLnNldChlLmVsZW1lbnRzKSx0LnVuaWZvcm1NYXRyaXgzZnYodGhpcy5hZGRyLCExLGVvKSl9ZnVuY3Rpb24geCh0LGUpe3ZvaWQgMD09PWUuZWxlbWVudHM/dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuYWRkciwhMSxlKToodG8uc2V0KGUuZWxlbWVudHMpLHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsdG8pKX1mdW5jdGlvbiB3KHQsZSxuKXt2YXIgaT1uLmFsbG9jVGV4dHVyZVVuaXQoKTt0LnVuaWZvcm0xaSh0aGlzLmFkZHIsaSksbi5zZXRUZXh0dXJlMkQoZXx8SnIsaSl9ZnVuY3Rpb24gRSh0LGUsbil7dmFyIGk9bi5hbGxvY1RleHR1cmVVbml0KCk7dC51bmlmb3JtMWkodGhpcy5hZGRyLGkpLG4uc2V0VGV4dHVyZUN1YmUoZXx8S3IsaSl9ZnVuY3Rpb24gUyh0LGUpe3QudW5pZm9ybTJpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gTSh0LGUpe3QudW5pZm9ybTNpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gQyh0LGUpe3QudW5pZm9ybTRpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gSSh0KXtzd2l0Y2godCl7Y2FzZSA1MTI2OnJldHVybiBwO2Nhc2UgMzU2NjQ6cmV0dXJuIHY7Y2FzZSAzNTY2NTpyZXR1cm4gbTtjYXNlIDM1NjY2OnJldHVybiB5O2Nhc2UgMzU2NzQ6cmV0dXJuIF87Y2FzZSAzNTY3NTpyZXR1cm4gYjtjYXNlIDM1Njc2OnJldHVybiB4O2Nhc2UgMzU2Nzg6cmV0dXJuIHc7Y2FzZSAzNTY4MDpyZXR1cm4gRTtjYXNlIDUxMjQ6Y2FzZSAzNTY3MDpyZXR1cm4gZztjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIFM7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBNO2Nhc2UgMzU2Njk6Y2FzZSAzNTY3MzpyZXR1cm4gQ319ZnVuY3Rpb24gTyh0LGUpe3QudW5pZm9ybTFmdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gVCh0LGUpe3QudW5pZm9ybTFpdih0aGlzLmFkZHIsZSl9ZnVuY3Rpb24gUCh0LGUpe3QudW5pZm9ybTJmdih0aGlzLmFkZHIsZihlLHRoaXMuc2l6ZSwyKSl9ZnVuY3Rpb24gQSh0LGUpe3QudW5pZm9ybTNmdih0aGlzLmFkZHIsZihlLHRoaXMuc2l6ZSwzKSl9ZnVuY3Rpb24gTCh0LGUpe3QudW5pZm9ybTRmdih0aGlzLmFkZHIsZihlLHRoaXMuc2l6ZSw0KSl9ZnVuY3Rpb24gTih0LGUpe3QudW5pZm9ybU1hdHJpeDJmdih0aGlzLmFkZHIsITEsZihlLHRoaXMuc2l6ZSw0KSl9ZnVuY3Rpb24gayh0LGUpe3QudW5pZm9ybU1hdHJpeDNmdih0aGlzLmFkZHIsITEsZihlLHRoaXMuc2l6ZSw5KSl9ZnVuY3Rpb24gUih0LGUpe3QudW5pZm9ybU1hdHJpeDRmdih0aGlzLmFkZHIsITEsZihlLHRoaXMuc2l6ZSwxNikpfWZ1bmN0aW9uIEQodCxlLG4pe3ZhciBpPWUubGVuZ3RoLHI9ZChuLGkpO3QudW5pZm9ybTFpdih0aGlzLmFkZHIscik7Zm9yKHZhciBvPTA7byE9PWk7KytvKW4uc2V0VGV4dHVyZTJEKGVbb118fEpyLHJbb10pfWZ1bmN0aW9uIEYodCxlLG4pe3ZhciBpPWUubGVuZ3RoLHI9ZChuLGkpO3QudW5pZm9ybTFpdih0aGlzLmFkZHIscik7Zm9yKHZhciBvPTA7byE9PWk7KytvKW4uc2V0VGV4dHVyZUN1YmUoZVtvXXx8S3IscltvXSl9ZnVuY3Rpb24gQih0KXtzd2l0Y2godCl7Y2FzZSA1MTI2OnJldHVybiBPO2Nhc2UgMzU2NjQ6cmV0dXJuIFA7Y2FzZSAzNTY2NTpyZXR1cm4gQTtjYXNlIDM1NjY2OnJldHVybiBMO2Nhc2UgMzU2NzQ6cmV0dXJuIE47Y2FzZSAzNTY3NTpyZXR1cm4gaztjYXNlIDM1Njc2OnJldHVybiBSO2Nhc2UgMzU2Nzg6cmV0dXJuIEQ7Y2FzZSAzNTY4MDpyZXR1cm4gRjtjYXNlIDUxMjQ6Y2FzZSAzNTY3MDpyZXR1cm4gVDtjYXNlIDM1NjY3OmNhc2UgMzU2NzE6cmV0dXJuIFM7Y2FzZSAzNTY2ODpjYXNlIDM1NjcyOnJldHVybiBNO2Nhc2UgMzU2Njk6Y2FzZSAzNTY3MzpyZXR1cm4gQ319ZnVuY3Rpb24gaih0LGUsbil7dGhpcy5pZD10LHRoaXMuYWRkcj1uLHRoaXMuc2V0VmFsdWU9SShlLnR5cGUpfWZ1bmN0aW9uIFUodCxlLG4pe3RoaXMuaWQ9dCx0aGlzLmFkZHI9bix0aGlzLnNpemU9ZS5zaXplLHRoaXMuc2V0VmFsdWU9QihlLnR5cGUpfWZ1bmN0aW9uIHoodCl7dGhpcy5pZD10LGguY2FsbCh0aGlzKX1mdW5jdGlvbiBHKHQsZSl7dC5zZXEucHVzaChlKSx0Lm1hcFtlLmlkXT1lfWZ1bmN0aW9uIFYodCxlLG4pe3ZhciBpPXQubmFtZSxyPWkubGVuZ3RoO2Zvcihuby5sYXN0SW5kZXg9MDs7KXt2YXIgbz1uby5leGVjKGkpLGE9bm8ubGFzdEluZGV4LHM9b1sxXSx1PVwiXVwiPT09b1syXSxsPW9bM107aWYodSYmKHN8PTApLHZvaWQgMD09PWx8fFwiW1wiPT09bCYmYSsyPT09cil7RyhuLHZvaWQgMD09PWw/bmV3IGoocyx0LGUpOm5ldyBVKHMsdCxlKSk7YnJlYWt9dmFyIGM9bi5tYXAsaD1jW3NdO3ZvaWQgMD09PWgmJihoPW5ldyB6KHMpLEcobixoKSksbj1ofX1mdW5jdGlvbiBYKHQsZSxuKXtoLmNhbGwodGhpcyksdGhpcy5yZW5kZXJlcj1uO2Zvcih2YXIgaT10LmdldFByb2dyYW1QYXJhbWV0ZXIoZSx0LkFDVElWRV9VTklGT1JNUykscj0wO3I8aTsrK3Ipe3ZhciBvPXQuZ2V0QWN0aXZlVW5pZm9ybShlLHIpLGE9by5uYW1lLHM9dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxhKTtWKG8scyx0aGlzKX19ZnVuY3Rpb24gSCh0LGUsbixpKXt0aGlzLng9dHx8MCx0aGlzLnk9ZXx8MCx0aGlzLno9bnx8MCx0aGlzLnc9dm9pZCAwIT09aT9pOjF9ZnVuY3Rpb24gcSh0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJnZvaWQgMD09PW4/dGhpcy5zZXQodCk6dGhpcy5zZXRSR0IodCxlLG4pfWZ1bmN0aW9uIFkodCxlLG4pe3RoaXMudXVpZD1Xci5nZW5lcmF0ZVVVSUQoKSx0aGlzLndpZHRoPXQsdGhpcy5oZWlnaHQ9ZSx0aGlzLnNjaXNzb3I9bmV3IEgoMCwwLHQsZSksdGhpcy5zY2lzc29yVGVzdD0hMSx0aGlzLnZpZXdwb3J0PW5ldyBIKDAsMCx0LGUpLG49bnx8e30sdm9pZCAwPT09bi5taW5GaWx0ZXImJihuLm1pbkZpbHRlcj1XaSksdGhpcy50ZXh0dXJlPW5ldyB1KHZvaWQgMCx2b2lkIDAsbi53cmFwUyxuLndyYXBULG4ubWFnRmlsdGVyLG4ubWluRmlsdGVyLG4uZm9ybWF0LG4udHlwZSxuLmFuaXNvdHJvcHksbi5lbmNvZGluZyksdGhpcy5kZXB0aEJ1ZmZlcj12b2lkIDA9PT1uLmRlcHRoQnVmZmVyfHxuLmRlcHRoQnVmZmVyLHRoaXMuc3RlbmNpbEJ1ZmZlcj12b2lkIDA9PT1uLnN0ZW5jaWxCdWZmZXJ8fG4uc3RlbmNpbEJ1ZmZlcix0aGlzLmRlcHRoVGV4dHVyZT12b2lkIDAhPT1uLmRlcHRoVGV4dHVyZT9uLmRlcHRoVGV4dHVyZTpudWxsfWZ1bmN0aW9uIFcoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOmhzKyt9KSx0aGlzLnV1aWQ9V3IuZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiTWF0ZXJpYWxcIix0aGlzLmZvZz0hMCx0aGlzLmxpZ2h0cz0hMCx0aGlzLmJsZW5kaW5nPUtuLHRoaXMuc2lkZT1Hbix0aGlzLnNoYWRpbmc9cW4sdGhpcy52ZXJ0ZXhDb2xvcnM9WW4sdGhpcy5vcGFjaXR5PTEsdGhpcy50cmFuc3BhcmVudD0hMSx0aGlzLmJsZW5kU3JjPWhpLHRoaXMuYmxlbmREc3Q9ZmksdGhpcy5ibGVuZEVxdWF0aW9uPW5pLHRoaXMuYmxlbmRTcmNBbHBoYT1udWxsLHRoaXMuYmxlbmREc3RBbHBoYT1udWxsLHRoaXMuYmxlbmRFcXVhdGlvbkFscGhhPW51bGwsdGhpcy5kZXB0aEZ1bmM9eGksdGhpcy5kZXB0aFRlc3Q9ITAsdGhpcy5kZXB0aFdyaXRlPSEwLHRoaXMuY2xpcHBpbmdQbGFuZXM9bnVsbCx0aGlzLmNsaXBJbnRlcnNlY3Rpb249ITEsdGhpcy5jbGlwU2hhZG93cz0hMSx0aGlzLmNvbG9yV3JpdGU9ITAsdGhpcy5wcmVjaXNpb249bnVsbCx0aGlzLnBvbHlnb25PZmZzZXQ9ITEsdGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPTAsdGhpcy5wb2x5Z29uT2Zmc2V0VW5pdHM9MCx0aGlzLmRpdGhlcmluZz0hMSx0aGlzLmFscGhhVGVzdD0wLHRoaXMucHJlbXVsdGlwbGllZEFscGhhPSExLHRoaXMub3ZlcmRyYXc9MCx0aGlzLnZpc2libGU9ITAsdGhpcy5uZWVkc1VwZGF0ZT0hMH1mdW5jdGlvbiBaKHQpe1cuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJTaGFkZXJNYXRlcmlhbFwiLHRoaXMuZGVmaW5lcz17fSx0aGlzLnVuaWZvcm1zPXt9LHRoaXMudmVydGV4U2hhZGVyPVwidm9pZCBtYWluKCkge1xcblxcdGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHBvc2l0aW9uLCAxLjAgKTtcXG59XCIsdGhpcy5mcmFnbWVudFNoYWRlcj1cInZvaWQgbWFpbigpIHtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCAxLjAsIDAuMCwgMC4wLCAxLjAgKTtcXG59XCIsdGhpcy5saW5ld2lkdGg9MSx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMuZm9nPSExLHRoaXMubGlnaHRzPSExLHRoaXMuY2xpcHBpbmc9ITEsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLmV4dGVuc2lvbnM9e2Rlcml2YXRpdmVzOiExLGZyYWdEZXB0aDohMSxkcmF3QnVmZmVyczohMSxzaGFkZXJUZXh0dXJlTE9EOiExfSx0aGlzLmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM9e2NvbG9yOlsxLDEsMV0sdXY6WzAsMF0sdXYyOlswLDBdfSx0aGlzLmluZGV4MEF0dHJpYnV0ZU5hbWU9dm9pZCAwLHZvaWQgMCE9PXQmJih2b2lkIDAhPT10LmF0dHJpYnV0ZXMmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5TaGFkZXJNYXRlcmlhbDogYXR0cmlidXRlcyBzaG91bGQgbm93IGJlIGRlZmluZWQgaW4gVEhSRUUuQnVmZmVyR2VvbWV0cnkgaW5zdGVhZC5cIiksdGhpcy5zZXRWYWx1ZXModCkpfWZ1bmN0aW9uIEoodCl7Vy5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIk1lc2hEZXB0aE1hdGVyaWFsXCIsdGhpcy5kZXB0aFBhY2tpbmc9cXIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudE1hcD1udWxsLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9MSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9MCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMuZm9nPSExLHRoaXMubGlnaHRzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIEsodCxlKXt0aGlzLm1pbj12b2lkIDAhPT10P3Q6bmV3IG4oKygxLzApLCsoMS8wKSwrKDEvMCkpLHRoaXMubWF4PXZvaWQgMCE9PWU/ZTpuZXcgbigtKDEvMCksLSgxLzApLC0oMS8wKSl9ZnVuY3Rpb24gUSh0LGUpe3RoaXMuY2VudGVyPXZvaWQgMCE9PXQ/dDpuZXcgbix0aGlzLnJhZGl1cz12b2lkIDAhPT1lP2U6MH1mdW5jdGlvbiAkKCl7dGhpcy5lbGVtZW50cz1bMSwwLDAsMCwxLDAsMCwwLDFdLGFyZ3VtZW50cy5sZW5ndGg+MCYmY29uc29sZS5lcnJvcihcIlRIUkVFLk1hdHJpeDM6IHRoZSBjb25zdHJ1Y3RvciBubyBsb25nZXIgcmVhZHMgYXJndW1lbnRzLiB1c2UgLnNldCgpIGluc3RlYWQuXCIpfWZ1bmN0aW9uIHR0KHQsZSl7dGhpcy5ub3JtYWw9dm9pZCAwIT09dD90Om5ldyBuKDEsMCwwKSx0aGlzLmNvbnN0YW50PXZvaWQgMCE9PWU/ZTowfWZ1bmN0aW9uIGV0KHQsZSxuLGkscixvKXt0aGlzLnBsYW5lcz1bdm9pZCAwIT09dD90Om5ldyB0dCx2b2lkIDAhPT1lP2U6bmV3IHR0LHZvaWQgMCE9PW4/bjpuZXcgdHQsdm9pZCAwIT09aT9pOm5ldyB0dCx2b2lkIDAhPT1yP3I6bmV3IHR0LHZvaWQgMCE9PW8/bzpuZXcgdHRdfWZ1bmN0aW9uIG50KHQsZSxyLGEpe2Z1bmN0aW9uIHMoZSxuLGkscil7dmFyIG89ZS5nZW9tZXRyeSxhPW51bGwscz14LHU9ZS5jdXN0b21EZXB0aE1hdGVyaWFsO2lmKGkmJihzPXcsdT1lLmN1c3RvbURpc3RhbmNlTWF0ZXJpYWwpLHUpYT11O2Vsc2V7dmFyIGw9ITE7bi5tb3JwaFRhcmdldHMmJihvJiZvLmlzQnVmZmVyR2VvbWV0cnk/bD1vLm1vcnBoQXR0cmlidXRlcyYmby5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24mJm8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aD4wOm8mJm8uaXNHZW9tZXRyeSYmKGw9by5tb3JwaFRhcmdldHMmJm8ubW9ycGhUYXJnZXRzLmxlbmd0aD4wKSksZS5pc1NraW5uZWRNZXNoJiZuLnNraW5uaW5nPT09ITEmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOiBUSFJFRS5Ta2lubmVkTWVzaCB3aXRoIG1hdGVyaWFsLnNraW5uaW5nIHNldCB0byBmYWxzZTpcIixlKTt2YXIgYz1lLmlzU2tpbm5lZE1lc2gmJm4uc2tpbm5pbmcsaD0wO2wmJihofD15KSxjJiYoaHw9XyksYT1zW2hdfWlmKHQubG9jYWxDbGlwcGluZ0VuYWJsZWQmJm4uY2xpcFNoYWRvd3M9PT0hMCYmMCE9PW4uY2xpcHBpbmdQbGFuZXMubGVuZ3RoKXt2YXIgZj1hLnV1aWQsZD1uLnV1aWQscD1FW2ZdO3ZvaWQgMD09PXAmJihwPXt9LEVbZl09cCk7dmFyIGc9cFtkXTt2b2lkIDA9PT1nJiYoZz1hLmNsb25lKCkscFtkXT1nKSxhPWd9YS52aXNpYmxlPW4udmlzaWJsZSxhLndpcmVmcmFtZT1uLndpcmVmcmFtZTt2YXIgdj1uLnNpZGU7cmV0dXJuIFIucmVuZGVyU2luZ2xlU2lkZWQmJnY9PVhuJiYodj1HbiksUi5yZW5kZXJSZXZlcnNlU2lkZWQmJih2PT09R24/dj1Wbjp2PT09Vm4mJih2PUduKSksYS5zaWRlPXYsYS5jbGlwU2hhZG93cz1uLmNsaXBTaGFkb3dzLGEuY2xpcHBpbmdQbGFuZXM9bi5jbGlwcGluZ1BsYW5lcyxhLndpcmVmcmFtZUxpbmV3aWR0aD1uLndpcmVmcmFtZUxpbmV3aWR0aCxhLmxpbmV3aWR0aD1uLmxpbmV3aWR0aCxpJiZ2b2lkIDAhPT1hLnVuaWZvcm1zLmxpZ2h0UG9zJiZhLnVuaWZvcm1zLmxpZ2h0UG9zLnZhbHVlLmNvcHkociksYX1mdW5jdGlvbiB1KGUsbixpLG8pe2lmKGUudmlzaWJsZSE9PSExKXt2YXIgYT1lLmxheWVycy50ZXN0KG4ubGF5ZXJzKTtpZihhJiYoZS5pc01lc2h8fGUuaXNMaW5lfHxlLmlzUG9pbnRzKSYmZS5jYXN0U2hhZG93JiYoIWUuZnJ1c3R1bUN1bGxlZHx8aC5pbnRlcnNlY3RzT2JqZWN0KGUpKSl7ZS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhpLm1hdHJpeFdvcmxkSW52ZXJzZSxlLm1hdHJpeFdvcmxkKTt2YXIgbD1yLnVwZGF0ZShlKSxjPWUubWF0ZXJpYWw7aWYoQXJyYXkuaXNBcnJheShjKSlmb3IodmFyIGY9bC5ncm91cHMsZD0wLHA9Zi5sZW5ndGg7ZDxwO2QrKyl7dmFyIGc9ZltkXSx2PWNbZy5tYXRlcmlhbEluZGV4XTtpZih2JiZ2LnZpc2libGUpe3ZhciB5PXMoZSx2LG8sbSk7dC5yZW5kZXJCdWZmZXJEaXJlY3QoaSxudWxsLGwseSxlLGcpfX1lbHNlIGlmKGMudmlzaWJsZSl7dmFyIHk9cyhlLGMsbyxtKTt0LnJlbmRlckJ1ZmZlckRpcmVjdChpLG51bGwsbCx5LGUsbnVsbCl9fWZvcih2YXIgXz1lLmNoaWxkcmVuLGI9MCx4PV8ubGVuZ3RoO2I8eDtiKyspdShfW2JdLG4saSxvKX19dmFyIGw9dC5jb250ZXh0LGM9dC5zdGF0ZSxoPW5ldyBldCxmPW5ldyBpLGQ9ZS5zaGFkb3dzLHA9bmV3IG8sZz1uZXcgbyhhLm1heFRleHR1cmVTaXplLGEubWF4VGV4dHVyZVNpemUpLHY9bmV3IG4sbT1uZXcgbix5PTEsXz0yLGI9KHl8XykrMSx4PW5ldyBBcnJheShiKSx3PW5ldyBBcnJheShiKSxFPXt9LFM9W25ldyBuKDEsMCwwKSxuZXcgbigtMSwwLDApLG5ldyBuKDAsMCwxKSxuZXcgbigwLDAsLTEpLG5ldyBuKDAsMSwwKSxuZXcgbigwLC0xLDApXSxNPVtuZXcgbigwLDEsMCksbmV3IG4oMCwxLDApLG5ldyBuKDAsMSwwKSxuZXcgbigwLDEsMCksbmV3IG4oMCwwLDEpLG5ldyBuKDAsMCwtMSldLEM9W25ldyBILG5ldyBILG5ldyBILG5ldyBILG5ldyBILG5ldyBIXSxJPW5ldyBKO0kuZGVwdGhQYWNraW5nPVlyLEkuY2xpcHBpbmc9ITA7Zm9yKHZhciBPPWNzLmRpc3RhbmNlUkdCQSxUPW9vLmNsb25lKE8udW5pZm9ybXMpLFA9MDtQIT09YjsrK1Ape3ZhciBBPTAhPT0oUCZ5KSxMPTAhPT0oUCZfKSxOPUkuY2xvbmUoKTtOLm1vcnBoVGFyZ2V0cz1BLE4uc2tpbm5pbmc9TCx4W1BdPU47dmFyIGs9bmV3IFooe2RlZmluZXM6e1VTRV9TSEFET1dNQVA6XCJcIn0sdW5pZm9ybXM6VCx2ZXJ0ZXhTaGFkZXI6Ty52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6Ty5mcmFnbWVudFNoYWRlcixtb3JwaFRhcmdldHM6QSxza2lubmluZzpMLGNsaXBwaW5nOiEwfSk7d1tQXT1rfXZhciBSPXRoaXM7dGhpcy5lbmFibGVkPSExLHRoaXMuYXV0b1VwZGF0ZT0hMCx0aGlzLm5lZWRzVXBkYXRlPSExLHRoaXMudHlwZT1Vbix0aGlzLnJlbmRlclJldmVyc2VTaWRlZD0hMCx0aGlzLnJlbmRlclNpbmdsZVNpZGVkPSEwLHRoaXMucmVuZGVyPWZ1bmN0aW9uKGUsbil7aWYoUi5lbmFibGVkIT09ITEmJihSLmF1dG9VcGRhdGUhPT0hMXx8Ui5uZWVkc1VwZGF0ZSE9PSExKSYmMCE9PWQubGVuZ3RoKXtjLmRpc2FibGUobC5CTEVORCksYy5idWZmZXJzLmNvbG9yLnNldENsZWFyKDEsMSwxLDEpLGMuYnVmZmVycy5kZXB0aC5zZXRUZXN0KCEwKSxjLnNldFNjaXNzb3JUZXN0KCExKTtmb3IodmFyIGkscixvPTAsYT1kLmxlbmd0aDtvPGE7bysrKXt2YXIgcz1kW29dLHk9cy5zaGFkb3c7aWYodm9pZCAwIT09eSl7dmFyIF89eS5jYW1lcmE7aWYocC5jb3B5KHkubWFwU2l6ZSkscC5taW4oZykscyYmcy5pc1BvaW50TGlnaHQpe2k9NixyPSEwO3ZhciBiPXAueCx4PXAueTtDWzBdLnNldCgyKmIseCxiLHgpLENbMV0uc2V0KDAseCxiLHgpLENbMl0uc2V0KDMqYix4LGIseCksQ1szXS5zZXQoYix4LGIseCksQ1s0XS5zZXQoMypiLDAsYix4KSxDWzVdLnNldChiLDAsYix4KSxwLngqPTQscC55Kj0yfWVsc2UgaT0xLHI9ITE7aWYobnVsbD09PXkubWFwKXt2YXIgdz17bWluRmlsdGVyOkhpLG1hZ0ZpbHRlcjpIaSxmb3JtYXQ6aHJ9O3kubWFwPW5ldyBZKHAueCxwLnksdykseS5tYXAudGV4dHVyZS5uYW1lPXMubmFtZStcIi5zaGFkb3dNYXBcIixfLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX15LmlzU3BvdExpZ2h0U2hhZG93JiZ5LnVwZGF0ZShzKTt2YXIgRT15Lm1hcCxJPXkubWF0cml4O20uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHMubWF0cml4V29ybGQpLF8ucG9zaXRpb24uY29weShtKSx0LnNldFJlbmRlclRhcmdldChFKSx0LmNsZWFyKCk7Zm9yKHZhciBPPTA7TzxpO08rKyl7aWYocil7di5jb3B5KF8ucG9zaXRpb24pLHYuYWRkKFNbT10pLF8udXAuY29weShNW09dKSxfLmxvb2tBdCh2KTt2YXIgVD1DW09dO2Mudmlld3BvcnQoVCl9ZWxzZSB2LnNldEZyb21NYXRyaXhQb3NpdGlvbihzLnRhcmdldC5tYXRyaXhXb3JsZCksXy5sb29rQXQodik7Xy51cGRhdGVNYXRyaXhXb3JsZCgpLF8ubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoXy5tYXRyaXhXb3JsZCksSS5zZXQoLjUsMCwwLC41LDAsLjUsMCwuNSwwLDAsLjUsLjUsMCwwLDAsMSksSS5tdWx0aXBseShfLnByb2plY3Rpb25NYXRyaXgpLEkubXVsdGlwbHkoXy5tYXRyaXhXb3JsZEludmVyc2UpLGYubXVsdGlwbHlNYXRyaWNlcyhfLnByb2plY3Rpb25NYXRyaXgsXy5tYXRyaXhXb3JsZEludmVyc2UpLGguc2V0RnJvbU1hdHJpeChmKSx1KGUsbixfLHIpfX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZG93TWFwOlwiLHMsXCJoYXMgbm8gc2hhZG93LlwiKX12YXIgUD10LmdldENsZWFyQ29sb3IoKSxBPXQuZ2V0Q2xlYXJBbHBoYSgpO3Quc2V0Q2xlYXJDb2xvcihQLEEpLFIubmVlZHNVcGRhdGU9ITF9fX1mdW5jdGlvbiBpdCh0LGUpe3RoaXMub3JpZ2luPXZvaWQgMCE9PXQ/dDpuZXcgbix0aGlzLmRpcmVjdGlvbj12b2lkIDAhPT1lP2U6bmV3IG59ZnVuY3Rpb24gcnQodCxlLG4saSl7dGhpcy5feD10fHwwLHRoaXMuX3k9ZXx8MCx0aGlzLl96PW58fDAsdGhpcy5fb3JkZXI9aXx8cnQuRGVmYXVsdE9yZGVyfWZ1bmN0aW9uIG90KCl7dGhpcy5tYXNrPTF9ZnVuY3Rpb24gYXQoKXtmdW5jdGlvbiB0KCl7cy5zZXRGcm9tRXVsZXIoYSwhMSl9ZnVuY3Rpb24gcigpe2Euc2V0RnJvbVF1YXRlcm5pb24ocyx2b2lkIDAsITEpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6ZnMrK30pLHRoaXMudXVpZD1Xci5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLnR5cGU9XCJPYmplY3QzRFwiLHRoaXMucGFyZW50PW51bGwsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLnVwPWF0LkRlZmF1bHRVcC5jbG9uZSgpO3ZhciBvPW5ldyBuLGE9bmV3IHJ0LHM9bmV3IGUsdT1uZXcgbigxLDEsMSk7YS5vbkNoYW5nZSh0KSxzLm9uQ2hhbmdlKHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3Bvc2l0aW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOm99LHJvdGF0aW9uOntlbnVtZXJhYmxlOiEwLHZhbHVlOmF9LHF1YXRlcm5pb246e2VudW1lcmFibGU6ITAsdmFsdWU6c30sc2NhbGU6e2VudW1lcmFibGU6ITAsdmFsdWU6dX0sbW9kZWxWaWV3TWF0cml4Ont2YWx1ZTpuZXcgaX0sbm9ybWFsTWF0cml4Ont2YWx1ZTpuZXcgJH19KSx0aGlzLm1hdHJpeD1uZXcgaSx0aGlzLm1hdHJpeFdvcmxkPW5ldyBpLHRoaXMubWF0cml4QXV0b1VwZGF0ZT1hdC5EZWZhdWx0TWF0cml4QXV0b1VwZGF0ZSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsdGhpcy5sYXllcnM9bmV3IG90LHRoaXMudmlzaWJsZT0hMCx0aGlzLmNhc3RTaGFkb3c9ITEsdGhpcy5yZWNlaXZlU2hhZG93PSExLHRoaXMuZnJ1c3R1bUN1bGxlZD0hMCx0aGlzLnJlbmRlck9yZGVyPTAsdGhpcy51c2VyRGF0YT17fSx0aGlzLm9uQmVmb3JlUmVuZGVyPWZ1bmN0aW9uKCl7fSx0aGlzLm9uQWZ0ZXJSZW5kZXI9ZnVuY3Rpb24oKXt9fWZ1bmN0aW9uIHN0KHQsZSl7dGhpcy5zdGFydD12b2lkIDAhPT10P3Q6bmV3IG4sdGhpcy5lbmQ9dm9pZCAwIT09ZT9lOm5ldyBufWZ1bmN0aW9uIHV0KHQsZSxpKXt0aGlzLmE9dm9pZCAwIT09dD90Om5ldyBuLHRoaXMuYj12b2lkIDAhPT1lP2U6bmV3IG4sdGhpcy5jPXZvaWQgMCE9PWk/aTpuZXcgbn1mdW5jdGlvbiBsdCh0LGUsaSxyLG8sYSl7dGhpcy5hPXQsdGhpcy5iPWUsdGhpcy5jPWksdGhpcy5ub3JtYWw9ciYmci5pc1ZlY3RvcjM/cjpuZXcgbix0aGlzLnZlcnRleE5vcm1hbHM9QXJyYXkuaXNBcnJheShyKT9yOltdLHRoaXMuY29sb3I9byYmby5pc0NvbG9yP286bmV3IHEsdGhpcy52ZXJ0ZXhDb2xvcnM9QXJyYXkuaXNBcnJheShvKT9vOltdLHRoaXMubWF0ZXJpYWxJbmRleD12b2lkIDAhPT1hP2E6MH1mdW5jdGlvbiBjdCh0KXtXLmNhbGwodGhpcyksdGhpcy50eXBlPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIix0aGlzLmNvbG9yPW5ldyBxKDE2Nzc3MjE1KSx0aGlzLm1hcD1udWxsLHRoaXMubGlnaHRNYXA9bnVsbCx0aGlzLmxpZ2h0TWFwSW50ZW5zaXR5PTEsdGhpcy5hb01hcD1udWxsLHRoaXMuYW9NYXBJbnRlbnNpdHk9MSx0aGlzLnNwZWN1bGFyTWFwPW51bGwsdGhpcy5hbHBoYU1hcD1udWxsLHRoaXMuZW52TWFwPW51bGwsdGhpcy5jb21iaW5lPUNpLHRoaXMucmVmbGVjdGl2aXR5PTEsdGhpcy5yZWZyYWN0aW9uUmF0aW89Ljk4LHRoaXMud2lyZWZyYW1lPSExLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPTEsdGhpcy53aXJlZnJhbWVMaW5lY2FwPVwicm91bmRcIix0aGlzLndpcmVmcmFtZUxpbmVqb2luPVwicm91bmRcIix0aGlzLnNraW5uaW5nPSExLHRoaXMubW9ycGhUYXJnZXRzPSExLHRoaXMubGlnaHRzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIGh0KHQsZSxuKXtpZihBcnJheS5pc0FycmF5KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGU6IGFycmF5IHNob3VsZCBiZSBhIFR5cGVkIEFycmF5LlwiKTt0aGlzLnV1aWQ9V3IuZ2VuZXJhdGVVVUlEKCksdGhpcy5hcnJheT10LHRoaXMuaXRlbVNpemU9ZSx0aGlzLmNvdW50PXZvaWQgMCE9PXQ/dC5sZW5ndGgvZTowLHRoaXMubm9ybWFsaXplZD1uPT09ITAsdGhpcy5keW5hbWljPSExLHRoaXMudXBkYXRlUmFuZ2U9e29mZnNldDowLGNvdW50Oi0xfSx0aGlzLm9uVXBsb2FkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt9LHRoaXMudmVyc2lvbj0wfWZ1bmN0aW9uIGZ0KHQsZSl7aHQuY2FsbCh0aGlzLG5ldyBJbnQ4QXJyYXkodCksZSl9ZnVuY3Rpb24gZHQodCxlKXtodC5jYWxsKHRoaXMsbmV3IFVpbnQ4QXJyYXkodCksZSl9ZnVuY3Rpb24gcHQodCxlKXtodC5jYWxsKHRoaXMsbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQpLGUpfWZ1bmN0aW9uIGd0KHQsZSl7aHQuY2FsbCh0aGlzLG5ldyBJbnQxNkFycmF5KHQpLGUpfWZ1bmN0aW9uIHZ0KHQsZSl7aHQuY2FsbCh0aGlzLG5ldyBVaW50MTZBcnJheSh0KSxlKX1mdW5jdGlvbiBtdCh0LGUpe2h0LmNhbGwodGhpcyxuZXcgSW50MzJBcnJheSh0KSxlKX1mdW5jdGlvbiB5dCh0LGUpe2h0LmNhbGwodGhpcyxuZXcgVWludDMyQXJyYXkodCksZSl9ZnVuY3Rpb24gX3QodCxlKXtodC5jYWxsKHRoaXMsbmV3IEZsb2F0MzJBcnJheSh0KSxlKX1mdW5jdGlvbiBidCh0LGUpe2h0LmNhbGwodGhpcyxuZXcgRmxvYXQ2NEFycmF5KHQpLGUpfWZ1bmN0aW9uIHh0KCl7dGhpcy5pbmRpY2VzPVtdLHRoaXMudmVydGljZXM9W10sdGhpcy5ub3JtYWxzPVtdLHRoaXMuY29sb3JzPVtdLHRoaXMudXZzPVtdLHRoaXMudXZzMj1bXSx0aGlzLmdyb3Vwcz1bXSx0aGlzLm1vcnBoVGFyZ2V0cz17fSx0aGlzLnNraW5XZWlnaHRzPVtdLHRoaXMuc2tpbkluZGljZXM9W10sdGhpcy5ib3VuZGluZ0JveD1udWxsLHRoaXMuYm91bmRpbmdTcGhlcmU9bnVsbCx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSExLHRoaXMuY29sb3JzTmVlZFVwZGF0ZT0hMSx0aGlzLnV2c05lZWRVcGRhdGU9ITEsdGhpcy5ncm91cHNOZWVkVXBkYXRlPSExfWZ1bmN0aW9uIHd0KHQpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4tKDEvMCk7Zm9yKHZhciBlPXRbMF0sbj0xLGk9dC5sZW5ndGg7bjxpOysrbil0W25dPmUmJihlPXRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIEV0KCl7cmV0dXJuIGRzKyt9ZnVuY3Rpb24gU3QoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImlkXCIse3ZhbHVlOkV0KCl9KSx0aGlzLnV1aWQ9V3IuZ2VuZXJhdGVVVUlEKCksdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiR2VvbWV0cnlcIix0aGlzLnZlcnRpY2VzPVtdLHRoaXMuY29sb3JzPVtdLHRoaXMuZmFjZXM9W10sdGhpcy5mYWNlVmVydGV4VXZzPVtbXV0sdGhpcy5tb3JwaFRhcmdldHM9W10sdGhpcy5tb3JwaE5vcm1hbHM9W10sdGhpcy5za2luV2VpZ2h0cz1bXSx0aGlzLnNraW5JbmRpY2VzPVtdLHRoaXMubGluZURpc3RhbmNlcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsLHRoaXMuZWxlbWVudHNOZWVkVXBkYXRlPSExLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPSExLHRoaXMudXZzTmVlZFVwZGF0ZT0hMSx0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSExLHRoaXMuY29sb3JzTmVlZFVwZGF0ZT0hMSx0aGlzLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlPSExLHRoaXMuZ3JvdXBzTmVlZFVwZGF0ZT0hMX1mdW5jdGlvbiBNdCgpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiaWRcIix7dmFsdWU6RXQoKX0pLHRoaXMudXVpZD1Xci5nZW5lcmF0ZVVVSUQoKSx0aGlzLm5hbWU9XCJcIix0aGlzLnR5cGU9XCJCdWZmZXJHZW9tZXRyeVwiLHRoaXMuaW5kZXg9bnVsbCx0aGlzLmF0dHJpYnV0ZXM9e30sdGhpcy5tb3JwaEF0dHJpYnV0ZXM9e30sdGhpcy5ncm91cHM9W10sdGhpcy5ib3VuZGluZ0JveD1udWxsLHRoaXMuYm91bmRpbmdTcGhlcmU9bnVsbCx0aGlzLmRyYXdSYW5nZT17c3RhcnQ6MCxjb3VudDoxLzB9fWZ1bmN0aW9uIEN0KHQsZSl7YXQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoXCIsdGhpcy5nZW9tZXRyeT12b2lkIDAhPT10P3Q6bmV3IE10LHRoaXMubWF0ZXJpYWw9dm9pZCAwIT09ZT9lOm5ldyBjdCh7Y29sb3I6MTY3NzcyMTUqTWF0aC5yYW5kb20oKX0pLHRoaXMuZHJhd01vZGU9UnIsdGhpcy51cGRhdGVNb3JwaFRhcmdldHMoKX1mdW5jdGlvbiBJdCh0LGUsaSxyLG8sYSl7ZnVuY3Rpb24gcyh0LGUsaSxyLG8sYSxzLGcsdixtLHkpe3ZhciBfLGIseD1hL3Ysdz1zL20sRT1hLzIsUz1zLzIsTT1nLzIsQz12KzEsST1tKzEsTz0wLFQ9MCxQPW5ldyBuO2ZvcihiPTA7YjxJO2IrKyl7dmFyIEE9Yip3LVM7Zm9yKF89MDtfPEM7XysrKXt2YXIgTD1fKngtRTtQW3RdPUwqcixQW2VdPUEqbyxQW2ldPU0sYy5wdXNoKFAueCxQLnksUC56KSxQW3RdPTAsUFtlXT0wLFBbaV09Zz4wPzE6LTEsaC5wdXNoKFAueCxQLnksUC56KSxmLnB1c2goXy92KSxmLnB1c2goMS1iL20pLE8rPTF9fWZvcihiPTA7YjxtO2IrKylmb3IoXz0wO188djtfKyspe3ZhciBOPWQrXytDKmIsaz1kK18rQyooYisxKSxSPWQrKF8rMSkrQyooYisxKSxEPWQrKF8rMSkrQypiO2wucHVzaChOLGssRCksbC5wdXNoKGssUixEKSxUKz02fXUuYWRkR3JvdXAocCxULHkpLHArPVQsZCs9T31NdC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkJveEJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXt3aWR0aDp0LGhlaWdodDplLGRlcHRoOmksd2lkdGhTZWdtZW50czpyLGhlaWdodFNlZ21lbnRzOm8sZGVwdGhTZWdtZW50czphfTt2YXIgdT10aGlzO3I9TWF0aC5mbG9vcihyKXx8MSxvPU1hdGguZmxvb3Iobyl8fDEsYT1NYXRoLmZsb29yKGEpfHwxO3ZhciBsPVtdLGM9W10saD1bXSxmPVtdLGQ9MCxwPTA7cyhcInpcIixcInlcIixcInhcIiwtMSwtMSxpLGUsdCxhLG8sMCkscyhcInpcIixcInlcIixcInhcIiwxLC0xLGksZSwtdCxhLG8sMSkscyhcInhcIixcInpcIixcInlcIiwxLDEsdCxpLGUscixhLDIpLHMoXCJ4XCIsXCJ6XCIsXCJ5XCIsMSwtMSx0LGksLWUscixhLDMpLHMoXCJ4XCIsXCJ5XCIsXCJ6XCIsMSwtMSx0LGUsaSxyLG8sNCkscyhcInhcIixcInlcIixcInpcIiwtMSwtMSx0LGUsLWkscixvLDUpLHRoaXMuc2V0SW5kZXgobCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBfdChjLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBfdChoLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IF90KGYsMikpfWZ1bmN0aW9uIE90KHQsZSxuLGkpe010LmNhbGwodGhpcyksdGhpcy50eXBlPVwiUGxhbmVCdWZmZXJHZW9tZXRyeVwiLHRoaXMucGFyYW1ldGVycz17d2lkdGg6dCxoZWlnaHQ6ZSx3aWR0aFNlZ21lbnRzOm4saGVpZ2h0U2VnbWVudHM6aX07dmFyIHIsbyxhPXQvMixzPWUvMix1PU1hdGguZmxvb3Iobil8fDEsbD1NYXRoLmZsb29yKGkpfHwxLGM9dSsxLGg9bCsxLGY9dC91LGQ9ZS9sLHA9W10sZz1bXSx2PVtdLG09W107Zm9yKG89MDtvPGg7bysrKXt2YXIgeT1vKmQtcztmb3Iocj0wO3I8YztyKyspe3ZhciBfPXIqZi1hO2cucHVzaChfLC15LDApLHYucHVzaCgwLDAsMSksbS5wdXNoKHIvdSksbS5wdXNoKDEtby9sKX19Zm9yKG89MDtvPGw7bysrKWZvcihyPTA7cjx1O3IrKyl7dmFyIGI9citjKm8seD1yK2MqKG8rMSksdz1yKzErYyoobysxKSxFPXIrMStjKm87cC5wdXNoKGIseCxFKSxwLnB1c2goeCx3LEUpfXRoaXMuc2V0SW5kZXgocCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBfdChnLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBfdCh2LDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IF90KG0sMikpfWZ1bmN0aW9uIFR0KCl7YXQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJDYW1lcmFcIix0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZT1uZXcgaSx0aGlzLnByb2plY3Rpb25NYXRyaXg9bmV3IGl9ZnVuY3Rpb24gUHQodCxlLG4saSl7VHQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQZXJzcGVjdGl2ZUNhbWVyYVwiLHRoaXMuZm92PXZvaWQgMCE9PXQ/dDo1MCx0aGlzLnpvb209MSx0aGlzLm5lYXI9dm9pZCAwIT09bj9uOi4xLHRoaXMuZmFyPXZvaWQgMCE9PWk/aToyZTMsdGhpcy5mb2N1cz0xMCx0aGlzLmFzcGVjdD12b2lkIDAhPT1lP2U6MSx0aGlzLnZpZXc9bnVsbCx0aGlzLmZpbG1HYXVnZT0zNSx0aGlzLmZpbG1PZmZzZXQ9MCx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1mdW5jdGlvbiBBdCh0LGUsbixpLHIsbyl7VHQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJPcnRob2dyYXBoaWNDYW1lcmFcIix0aGlzLnpvb209MSx0aGlzLnZpZXc9bnVsbCx0aGlzLmxlZnQ9dCx0aGlzLnJpZ2h0PWUsdGhpcy50b3A9bix0aGlzLmJvdHRvbT1pLHRoaXMubmVhcj12b2lkIDAhPT1yP3I6LjEsdGhpcy5mYXI9dm9pZCAwIT09bz9vOjJlMyx0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKX1mdW5jdGlvbiBMdCh0KXtmdW5jdGlvbiBlKGUsbil7dmFyIGk9ZS5hcnJheSxyPWUuZHluYW1pYz90LkRZTkFNSUNfRFJBVzp0LlNUQVRJQ19EUkFXLG89dC5jcmVhdGVCdWZmZXIoKTt0LmJpbmRCdWZmZXIobixvKSx0LmJ1ZmZlckRhdGEobixpLHIpLGUub25VcGxvYWRDYWxsYmFjaygpO3ZhciBhPXQuRkxPQVQ7cmV0dXJuIGkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXk/YT10LkZMT0FUOmkgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXk/Y29uc29sZS53YXJuKFwiVW5zdXBwb3J0ZWQgZGF0YSBidWZmZXIgZm9ybWF0OiBGbG9hdDY0QXJyYXlcIik6aSBpbnN0YW5jZW9mIFVpbnQxNkFycmF5P2E9dC5VTlNJR05FRF9TSE9SVDppIGluc3RhbmNlb2YgSW50MTZBcnJheT9hPXQuU0hPUlQ6aSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5P2E9dC5VTlNJR05FRF9JTlQ6aSBpbnN0YW5jZW9mIEludDMyQXJyYXk/YT10LklOVDppIGluc3RhbmNlb2YgSW50OEFycmF5P2E9dC5CWVRFOmkgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoYT10LlVOU0lHTkVEX0JZVEUpLHtidWZmZXI6byx0eXBlOmEsYnl0ZXNQZXJFbGVtZW50OmkuQllURVNfUEVSX0VMRU1FTlQsdmVyc2lvbjplLnZlcnNpb259fWZ1bmN0aW9uIG4oZSxuLGkpe3ZhciByPW4uYXJyYXksbz1uLnVwZGF0ZVJhbmdlO3QuYmluZEJ1ZmZlcihpLGUpLG4uZHluYW1pYz09PSExP3QuYnVmZmVyRGF0YShpLHIsdC5TVEFUSUNfRFJBVyk6by5jb3VudD09PS0xP3QuYnVmZmVyU3ViRGF0YShpLDAscik6MD09PW8uY291bnQ/Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMT2JqZWN0cy51cGRhdGVCdWZmZXI6IGR5bmFtaWMgVEhSRUUuQnVmZmVyQXR0cmlidXRlIG1hcmtlZCBhcyBuZWVkc1VwZGF0ZSBidXQgdXBkYXRlUmFuZ2UuY291bnQgaXMgMCwgZW5zdXJlIHlvdSBhcmUgdXNpbmcgc2V0IG1ldGhvZHMgb3IgdXBkYXRpbmcgbWFudWFsbHkuXCIpOih0LmJ1ZmZlclN1YkRhdGEoaSxvLm9mZnNldCpyLkJZVEVTX1BFUl9FTEVNRU5ULHIuc3ViYXJyYXkoby5vZmZzZXQsby5vZmZzZXQrby5jb3VudCkpLG8uY291bnQ9MCl9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdC5pc0ludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlJiYodD10LmRhdGEpLGFbdC51dWlkXX1mdW5jdGlvbiByKGUpe3ZhciBuPWFbZS51dWlkXTtuJiYodC5kZWxldGVCdWZmZXIobi5idWZmZXIpLGRlbGV0ZSBhW2UudXVpZF0pfWZ1bmN0aW9uIG8odCxpKXt0LmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUmJih0PXQuZGF0YSk7dmFyIHI9YVt0LnV1aWRdO3ZvaWQgMD09PXI/YVt0LnV1aWRdPWUodCxpKTpyLnZlcnNpb248dC52ZXJzaW9uJiYobihyLmJ1ZmZlcix0LGkpLHIudmVyc2lvbj10LnZlcnNpb24pfXZhciBhPXt9O3JldHVybntnZXQ6aSxyZW1vdmU6cix1cGRhdGU6b319ZnVuY3Rpb24gTnQodCxlKXtyZXR1cm4gdC5yZW5kZXJPcmRlciE9PWUucmVuZGVyT3JkZXI/dC5yZW5kZXJPcmRlci1lLnJlbmRlck9yZGVyOnQucHJvZ3JhbSYmZS5wcm9ncmFtJiZ0LnByb2dyYW0hPT1lLnByb2dyYW0/dC5wcm9ncmFtLmlkLWUucHJvZ3JhbS5pZDp0Lm1hdGVyaWFsLmlkIT09ZS5tYXRlcmlhbC5pZD90Lm1hdGVyaWFsLmlkLWUubWF0ZXJpYWwuaWQ6dC56IT09ZS56P3Quei1lLno6dC5pZC1lLmlkfWZ1bmN0aW9uIGt0KHQsZSl7cmV0dXJuIHQucmVuZGVyT3JkZXIhPT1lLnJlbmRlck9yZGVyP3QucmVuZGVyT3JkZXItZS5yZW5kZXJPcmRlcjp0LnohPT1lLno/ZS56LXQuejp0LmlkLWUuaWR9ZnVuY3Rpb24gUnQoKXtmdW5jdGlvbiB0KCl7bz0tMSxzPS0xfWZ1bmN0aW9uIGUodCxlLG4saSx1KXt2YXIgbCxjO24udHJhbnNwYXJlbnQ/KGw9YSxjPSsrcyk6KGw9cixjPSsrbyk7dmFyIGg9bFtjXTtoPyhoLmlkPXQuaWQsaC5vYmplY3Q9dCxoLmdlb21ldHJ5PWUsaC5tYXRlcmlhbD1uLGgucHJvZ3JhbT1uLnByb2dyYW0saC5yZW5kZXJPcmRlcj10LnJlbmRlck9yZGVyLGguej1pLGguZ3JvdXA9dSk6KGg9e2lkOnQuaWQsb2JqZWN0OnQsZ2VvbWV0cnk6ZSxtYXRlcmlhbDpuLHByb2dyYW06bi5wcm9ncmFtLHJlbmRlck9yZGVyOnQucmVuZGVyT3JkZXIsejppLGdyb3VwOnV9LGwucHVzaChoKSl9ZnVuY3Rpb24gbigpe3IubGVuZ3RoPW8rMSxhLmxlbmd0aD1zKzF9ZnVuY3Rpb24gaSgpe3Iuc29ydChOdCksYS5zb3J0KGt0KX12YXIgcj1bXSxvPS0xLGE9W10scz0tMTtyZXR1cm57b3BhcXVlOnIsdHJhbnNwYXJlbnQ6YSxpbml0OnQscHVzaDplLGZpbmlzaDpuLHNvcnQ6aX19ZnVuY3Rpb24gRHQoKXtmdW5jdGlvbiB0KHQsZSl7dmFyIGk9dC5pZCtcIixcIitlLmlkLHI9bltpXTtyZXR1cm4gdm9pZCAwPT09ciYmKGNvbnNvbGUubG9nKFwiVEhSRUUuV2ViR0xSZW5kZXJMaXN0czpcIixpKSxyPW5ldyBSdCxuW2ldPXIpLHJ9ZnVuY3Rpb24gZSgpe249e319dmFyIG49e307cmV0dXJue2dldDp0LGRpc3Bvc2U6ZX19ZnVuY3Rpb24gRnQodCxlLG4pe2Z1bmN0aW9uIGkodCl7cz10fWZ1bmN0aW9uIHIobil7bi5hcnJheSBpbnN0YW5jZW9mIFVpbnQzMkFycmF5JiZlLmdldChcIk9FU19lbGVtZW50X2luZGV4X3VpbnRcIik/KHU9dC5VTlNJR05FRF9JTlQsbD00KTpuLmFycmF5IGluc3RhbmNlb2YgVWludDE2QXJyYXk/KHU9dC5VTlNJR05FRF9TSE9SVCxsPTIpOih1PXQuVU5TSUdORURfQllURSxsPTEpfWZ1bmN0aW9uIG8oZSxpKXt0LmRyYXdFbGVtZW50cyhzLGksdSxlKmwpLG4uY2FsbHMrKyxuLnZlcnRpY2VzKz1pLHM9PT10LlRSSUFOR0xFUyYmKG4uZmFjZXMrPWkvMyl9ZnVuY3Rpb24gYShpLHIsbyl7dmFyIGE9ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO3JldHVybiBudWxsPT09YT92b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEluZGV4ZWRCdWZmZXJSZW5kZXJlcjogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpOihhLmRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFKHMsbyx1LHIqbCxpLm1heEluc3RhbmNlZENvdW50KSxuLmNhbGxzKyssbi52ZXJ0aWNlcys9byppLm1heEluc3RhbmNlZENvdW50LHZvaWQocz09PXQuVFJJQU5HTEVTJiYobi5mYWNlcys9aS5tYXhJbnN0YW5jZWRDb3VudCpvLzMpKSl9dmFyIHMsdSxsO3RoaXMuc2V0TW9kZT1pLHRoaXMuc2V0SW5kZXg9cix0aGlzLnJlbmRlcj1vLHRoaXMucmVuZGVySW5zdGFuY2VzPWF9ZnVuY3Rpb24gQnQodCxlLG4pe2Z1bmN0aW9uIGkodCl7YT10fWZ1bmN0aW9uIHIoZSxpKXt0LmRyYXdBcnJheXMoYSxlLGkpLG4uY2FsbHMrKyxuLnZlcnRpY2VzKz1pLGE9PT10LlRSSUFOR0xFUyYmKG4uZmFjZXMrPWkvMyl9ZnVuY3Rpb24gbyhpLHIsbyl7dmFyIHM9ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO2lmKG51bGw9PT1zKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTEJ1ZmZlclJlbmRlcmVyOiB1c2luZyBUSFJFRS5JbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSBidXQgaGFyZHdhcmUgZG9lcyBub3Qgc3VwcG9ydCBleHRlbnNpb24gQU5HTEVfaW5zdGFuY2VkX2FycmF5cy5cIik7dmFyIHU9aS5hdHRyaWJ1dGVzLnBvc2l0aW9uO3UuaXNJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT8obz11LmRhdGEuY291bnQscy5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUoYSwwLG8saS5tYXhJbnN0YW5jZWRDb3VudCkpOnMuZHJhd0FycmF5c0luc3RhbmNlZEFOR0xFKGEscixvLGkubWF4SW5zdGFuY2VkQ291bnQpLG4uY2FsbHMrKyxuLnZlcnRpY2VzKz1vKmkubWF4SW5zdGFuY2VkQ291bnQsYT09PXQuVFJJQU5HTEVTJiYobi5mYWNlcys9aS5tYXhJbnN0YW5jZWRDb3VudCpvLzMpfXZhciBhO3RoaXMuc2V0TW9kZT1pLHRoaXMucmVuZGVyPXIsdGhpcy5yZW5kZXJJbnN0YW5jZXM9b31mdW5jdGlvbiBqdCh0LGUsbil7ZnVuY3Rpb24gaSh0KXt2YXIgcj10LnRhcmdldCxvPXNbci5pZF07bnVsbCE9PW8uaW5kZXgmJmUucmVtb3ZlKG8uaW5kZXgpO2Zvcih2YXIgYSBpbiBvLmF0dHJpYnV0ZXMpZS5yZW1vdmUoby5hdHRyaWJ1dGVzW2FdKTtyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaXNwb3NlXCIsaSksZGVsZXRlIHNbci5pZF07dmFyIGw9dVtyLmlkXTtsJiYoZS5yZW1vdmUobCksZGVsZXRlIHVbci5pZF0pLGw9dVtvLmlkXSxsJiYoZS5yZW1vdmUobCksZGVsZXRlIHVbby5pZF0pLG4uZ2VvbWV0cmllcy0tfWZ1bmN0aW9uIHIodCxlKXt2YXIgcj1zW2UuaWRdO3JldHVybiByP3I6KGUuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixpKSxlLmlzQnVmZmVyR2VvbWV0cnk/cj1lOmUuaXNHZW9tZXRyeSYmKHZvaWQgMD09PWUuX2J1ZmZlckdlb21ldHJ5JiYoZS5fYnVmZmVyR2VvbWV0cnk9KG5ldyBNdCkuc2V0RnJvbU9iamVjdCh0KSkscj1lLl9idWZmZXJHZW9tZXRyeSksc1tlLmlkXT1yLG4uZ2VvbWV0cmllcysrLHIpfWZ1bmN0aW9uIG8obil7dmFyIGk9bi5pbmRleCxyPW4uYXR0cmlidXRlcztudWxsIT09aSYmZS51cGRhdGUoaSx0LkVMRU1FTlRfQVJSQVlfQlVGRkVSKTtmb3IodmFyIG8gaW4gcillLnVwZGF0ZShyW29dLHQuQVJSQVlfQlVGRkVSKTt2YXIgYT1uLm1vcnBoQXR0cmlidXRlcztmb3IodmFyIG8gaW4gYSlmb3IodmFyIHM9YVtvXSx1PTAsbD1zLmxlbmd0aDt1PGw7dSsrKWUudXBkYXRlKHNbdV0sdC5BUlJBWV9CVUZGRVIpfWZ1bmN0aW9uIGEobil7dmFyIGk9dVtuLmlkXTtpZihpKXJldHVybiBpO3ZhciByPVtdLG89bi5pbmRleCxhPW4uYXR0cmlidXRlcztpZihudWxsIT09bylmb3IodmFyIHM9by5hcnJheSxsPTAsYz1zLmxlbmd0aDtsPGM7bCs9Myl7dmFyIGg9c1tsKzBdLGY9c1tsKzFdLGQ9c1tsKzJdO3IucHVzaChoLGYsZixkLGQsaCl9ZWxzZSBmb3IodmFyIHM9YS5wb3NpdGlvbi5hcnJheSxsPTAsYz1zLmxlbmd0aC8zLTE7bDxjO2wrPTMpe3ZhciBoPWwrMCxmPWwrMSxkPWwrMjtyLnB1c2goaCxmLGYsZCxkLGgpfXJldHVybiBpPW5ldyh3dChyKT42NTUzNT95dDp2dCkociwxKSxlLnVwZGF0ZShpLHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIpLHVbbi5pZF09aSxpfXZhciBzPXt9LHU9e307cmV0dXJue2dldDpyLHVwZGF0ZTpvLGdldFdpcmVmcmFtZUF0dHJpYnV0ZTphfX1mdW5jdGlvbiBVdCgpe3ZhciB0PXt9O3JldHVybntnZXQ6ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09dFtlLmlkXSlyZXR1cm4gdFtlLmlkXTt2YXIgaTtzd2l0Y2goZS50eXBlKXtjYXNlXCJEaXJlY3Rpb25hbExpZ2h0XCI6aT17ZGlyZWN0aW9uOm5ldyBuLGNvbG9yOm5ldyBxLHNoYWRvdzohMSxzaGFkb3dCaWFzOjAsc2hhZG93UmFkaXVzOjEsc2hhZG93TWFwU2l6ZTpuZXcgb307YnJlYWs7Y2FzZVwiU3BvdExpZ2h0XCI6aT17cG9zaXRpb246bmV3IG4sZGlyZWN0aW9uOm5ldyBuLGNvbG9yOm5ldyBxLGRpc3RhbmNlOjAsY29uZUNvczowLHBlbnVtYnJhQ29zOjAsZGVjYXk6MCxzaGFkb3c6ITEsc2hhZG93QmlhczowLHNoYWRvd1JhZGl1czoxLHNoYWRvd01hcFNpemU6bmV3IG99O2JyZWFrO2Nhc2VcIlBvaW50TGlnaHRcIjppPXtwb3NpdGlvbjpuZXcgbixjb2xvcjpuZXcgcSxkaXN0YW5jZTowLGRlY2F5OjAsc2hhZG93OiExLHNoYWRvd0JpYXM6MCxzaGFkb3dSYWRpdXM6MSxzaGFkb3dNYXBTaXplOm5ldyBvfTticmVhaztjYXNlXCJIZW1pc3BoZXJlTGlnaHRcIjppPXtkaXJlY3Rpb246bmV3IG4sc2t5Q29sb3I6bmV3IHEsZ3JvdW5kQ29sb3I6bmV3IHF9O2JyZWFrO2Nhc2VcIlJlY3RBcmVhTGlnaHRcIjppPXtjb2xvcjpuZXcgcSxwb3NpdGlvbjpuZXcgbixoYWxmV2lkdGg6bmV3IG4saGFsZkhlaWdodDpuZXcgbn19cmV0dXJuIHRbZS5pZF09aSxpfX19ZnVuY3Rpb24genQodCxlLG4pe2Z1bmN0aW9uIGkodCl7dmFyIGk9bi5mcmFtZSxyPXQuZ2VvbWV0cnksYT1lLmdldCh0LHIpO3JldHVybiBvW2EuaWRdIT09aSYmKHIuaXNHZW9tZXRyeSYmYS51cGRhdGVGcm9tT2JqZWN0KHQpLGUudXBkYXRlKGEpLG9bYS5pZF09aSksYX1mdW5jdGlvbiByKCl7bz17fX12YXIgbz17fTtyZXR1cm57dXBkYXRlOmksY2xlYXI6cn19ZnVuY3Rpb24gR3QodCl7Zm9yKHZhciBlPXQuc3BsaXQoXCJcXG5cIiksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09bisxK1wiOiBcIitlW25dO3JldHVybiBlLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gVnQodCxlLG4pe3ZhciBpPXQuY3JlYXRlU2hhZGVyKGUpO3JldHVybiB0LnNoYWRlclNvdXJjZShpLG4pLHQuY29tcGlsZVNoYWRlcihpKSx0LmdldFNoYWRlclBhcmFtZXRlcihpLHQuQ09NUElMRV9TVEFUVVMpPT09ITEmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFNoYWRlcjogU2hhZGVyIGNvdWxkbid0IGNvbXBpbGUuXCIpLFwiXCIhPT10LmdldFNoYWRlckluZm9Mb2coaSkmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMU2hhZGVyOiBnbC5nZXRTaGFkZXJJbmZvTG9nKClcIixlPT09dC5WRVJURVhfU0hBREVSP1widmVydGV4XCI6XCJmcmFnbWVudFwiLHQuZ2V0U2hhZGVySW5mb0xvZyhpKSxHdChuKSksaX1mdW5jdGlvbiBYdCh0KXtzd2l0Y2godCl7Y2FzZSBCcjpyZXR1cm5bXCJMaW5lYXJcIixcIiggdmFsdWUgKVwiXTtjYXNlIGpyOnJldHVybltcInNSR0JcIixcIiggdmFsdWUgKVwiXTtjYXNlIHpyOnJldHVybltcIlJHQkVcIixcIiggdmFsdWUgKVwiXTtjYXNlIFZyOnJldHVybltcIlJHQk1cIixcIiggdmFsdWUsIDcuMCApXCJdO2Nhc2UgWHI6cmV0dXJuW1wiUkdCTVwiLFwiKCB2YWx1ZSwgMTYuMCApXCJdO2Nhc2UgSHI6cmV0dXJuW1wiUkdCRFwiLFwiKCB2YWx1ZSwgMjU2LjAgKVwiXTtjYXNlIFVyOnJldHVybltcIkdhbW1hXCIsXCIoIHZhbHVlLCBmbG9hdCggR0FNTUFfRkFDVE9SICkgKVwiXTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIit0KX19ZnVuY3Rpb24gSHQodCxlKXt2YXIgbj1YdChlKTtyZXR1cm5cInZlYzQgXCIrdCtcIiggdmVjNCB2YWx1ZSApIHsgcmV0dXJuIFwiK25bMF0rXCJUb0xpbmVhclwiK25bMV0rXCI7IH1cIn1mdW5jdGlvbiBxdCh0LGUpe3ZhciBuPVh0KGUpO3JldHVyblwidmVjNCBcIit0K1wiKCB2ZWM0IHZhbHVlICkgeyByZXR1cm4gTGluZWFyVG9cIituWzBdK25bMV0rXCI7IH1cIn1mdW5jdGlvbiBZdCh0LGUpe3ZhciBuO3N3aXRjaChlKXtjYXNlIFBpOm49XCJMaW5lYXJcIjticmVhaztjYXNlIEFpOm49XCJSZWluaGFyZFwiO2JyZWFrO2Nhc2UgTGk6bj1cIlVuY2hhcnRlZDJcIjticmVhaztjYXNlIE5pOm49XCJPcHRpbWl6ZWRDaW5lb25cIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHRvbmVNYXBwaW5nOiBcIitlKX1yZXR1cm5cInZlYzMgXCIrdCtcIiggdmVjMyBjb2xvciApIHsgcmV0dXJuIFwiK24rXCJUb25lTWFwcGluZyggY29sb3IgKTsgfVwifWZ1bmN0aW9uIFd0KHQsZSxuKXt0PXR8fHt9O3ZhciBpPVt0LmRlcml2YXRpdmVzfHxlLmVudk1hcEN1YmVVVnx8ZS5idW1wTWFwfHxlLm5vcm1hbE1hcHx8ZS5mbGF0U2hhZGluZz9cIiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlXCI6XCJcIiwodC5mcmFnRGVwdGh8fGUubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcikmJm4uZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIik/XCIjZXh0ZW5zaW9uIEdMX0VYVF9mcmFnX2RlcHRoIDogZW5hYmxlXCI6XCJcIix0LmRyYXdCdWZmZXJzJiZuLmdldChcIldFQkdMX2RyYXdfYnVmZmVyc1wiKT9cIiNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVycyA6IHJlcXVpcmVcIjpcIlwiLCh0LnNoYWRlclRleHR1cmVMT0R8fGUuZW52TWFwKSYmbi5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpP1wiI2V4dGVuc2lvbiBHTF9FWFRfc2hhZGVyX3RleHR1cmVfbG9kIDogZW5hYmxlXCI6XCJcIl07cmV0dXJuIGkuZmlsdGVyKEt0KS5qb2luKFwiXFxuXCIpfWZ1bmN0aW9uIFp0KHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KXt2YXIgaT10W25dO2khPT0hMSYmZS5wdXNoKFwiI2RlZmluZSBcIituK1wiIFwiK2kpfXJldHVybiBlLmpvaW4oXCJcXG5cIil9ZnVuY3Rpb24gSnQodCxlLG4pe2Zvcih2YXIgaT17fSxyPXQuZ2V0UHJvZ3JhbVBhcmFtZXRlcihlLHQuQUNUSVZFX0FUVFJJQlVURVMpLG89MDtvPHI7bysrKXt2YXIgYT10LmdldEFjdGl2ZUF0dHJpYihlLG8pLHM9YS5uYW1lO2lbc109dC5nZXRBdHRyaWJMb2NhdGlvbihlLHMpfXJldHVybiBpfWZ1bmN0aW9uIEt0KHQpe3JldHVyblwiXCIhPT10fWZ1bmN0aW9uIFF0KHQsZSl7cmV0dXJuIHQucmVwbGFjZSgvTlVNX0RJUl9MSUdIVFMvZyxlLm51bURpckxpZ2h0cykucmVwbGFjZSgvTlVNX1NQT1RfTElHSFRTL2csZS5udW1TcG90TGlnaHRzKS5yZXBsYWNlKC9OVU1fUkVDVF9BUkVBX0xJR0hUUy9nLGUubnVtUmVjdEFyZWFMaWdodHMpLnJlcGxhY2UoL05VTV9QT0lOVF9MSUdIVFMvZyxlLm51bVBvaW50TGlnaHRzKS5yZXBsYWNlKC9OVU1fSEVNSV9MSUdIVFMvZyxlLm51bUhlbWlMaWdodHMpfWZ1bmN0aW9uICR0KHQpe2Z1bmN0aW9uIGUodCxlKXt2YXIgbj1sc1tlXTtpZih2b2lkIDA9PT1uKXRocm93IG5ldyBFcnJvcihcIkNhbiBub3QgcmVzb2x2ZSAjaW5jbHVkZSA8XCIrZStcIj5cIik7cmV0dXJuICR0KG4pfXZhciBuPS9eXFxzKiNpbmNsdWRlICs8KFtcXHdcXGQuXSspPi9nbTtyZXR1cm4gdC5yZXBsYWNlKG4sZSl9ZnVuY3Rpb24gdGUodCl7ZnVuY3Rpb24gZSh0LGUsbixpKXtmb3IodmFyIHI9XCJcIixvPXBhcnNlSW50KGUpO288cGFyc2VJbnQobik7bysrKXIrPWkucmVwbGFjZSgvXFxbIGkgXFxdL2csXCJbIFwiK28rXCIgXVwiKTtyZXR1cm4gcn12YXIgbj0vZm9yIFxcKCBpbnQgaSBcXD0gKFxcZCspXFw7IGkgPCAoXFxkKylcXDsgaSBcXCtcXCsgXFwpIFxceyhbXFxzXFxTXSs/KSg/PVxcfSlcXH0vZztyZXR1cm4gdC5yZXBsYWNlKG4sZSl9ZnVuY3Rpb24gZWUodCxlLG4saSl7dmFyIHI9dC5jb250ZXh0LG89bi5leHRlbnNpb25zLGE9bi5kZWZpbmVzLHM9bi5fX3dlYmdsU2hhZGVyLnZlcnRleFNoYWRlcix1PW4uX193ZWJnbFNoYWRlci5mcmFnbWVudFNoYWRlcixsPVwiU0hBRE9XTUFQX1RZUEVfQkFTSUNcIjtpLnNoYWRvd01hcFR5cGU9PT1Vbj9sPVwiU0hBRE9XTUFQX1RZUEVfUENGXCI6aS5zaGFkb3dNYXBUeXBlPT09em4mJihsPVwiU0hBRE9XTUFQX1RZUEVfUENGX1NPRlRcIik7dmFyIGM9XCJFTlZNQVBfVFlQRV9DVUJFXCIsaD1cIkVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cIixmPVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7aWYoaS5lbnZNYXApe3N3aXRjaChuLmVudk1hcC5tYXBwaW5nKXtjYXNlIFJpOmNhc2UgRGk6Yz1cIkVOVk1BUF9UWVBFX0NVQkVcIjticmVhaztjYXNlIFVpOmNhc2Ugemk6Yz1cIkVOVk1BUF9UWVBFX0NVQkVfVVZcIjticmVhaztjYXNlIEZpOmNhc2UgQmk6Yz1cIkVOVk1BUF9UWVBFX0VRVUlSRUNcIjticmVhaztjYXNlIGppOmM9XCJFTlZNQVBfVFlQRV9TUEhFUkVcIn1zd2l0Y2gobi5lbnZNYXAubWFwcGluZyl7Y2FzZSBEaTpjYXNlIEJpOmg9XCJFTlZNQVBfTU9ERV9SRUZSQUNUSU9OXCJ9c3dpdGNoKG4uY29tYmluZSl7Y2FzZSBDaTpmPVwiRU5WTUFQX0JMRU5ESU5HX01VTFRJUExZXCI7YnJlYWs7Y2FzZSBJaTpmPVwiRU5WTUFQX0JMRU5ESU5HX01JWFwiO2JyZWFrO2Nhc2UgT2k6Zj1cIkVOVk1BUF9CTEVORElOR19BRERcIn19dmFyIGQscCxnPXQuZ2FtbWFGYWN0b3I+MD90LmdhbW1hRmFjdG9yOjEsdj1XdChvLGksdC5leHRlbnNpb25zKSxtPVp0KGEpLHk9ci5jcmVhdGVQcm9ncmFtKCk7bi5pc1Jhd1NoYWRlck1hdGVyaWFsPyhkPVttLFwiXFxuXCJdLmZpbHRlcihLdCkuam9pbihcIlxcblwiKSxwPVt2LG0sXCJcXG5cIl0uZmlsdGVyKEt0KS5qb2luKFwiXFxuXCIpKTooZD1bXCJwcmVjaXNpb24gXCIraS5wcmVjaXNpb24rXCIgZmxvYXQ7XCIsXCJwcmVjaXNpb24gXCIraS5wcmVjaXNpb24rXCIgaW50O1wiLFwiI2RlZmluZSBTSEFERVJfTkFNRSBcIituLl9fd2ViZ2xTaGFkZXIubmFtZSxtLGkuc3VwcG9ydHNWZXJ0ZXhUZXh0dXJlcz9cIiNkZWZpbmUgVkVSVEVYX1RFWFRVUkVTXCI6XCJcIixcIiNkZWZpbmUgR0FNTUFfRkFDVE9SIFwiK2csXCIjZGVmaW5lIE1BWF9CT05FUyBcIitpLm1heEJvbmVzLGkudXNlRm9nJiZpLmZvZz9cIiNkZWZpbmUgVVNFX0ZPR1wiOlwiXCIsaS51c2VGb2cmJmkuZm9nRXhwP1wiI2RlZmluZSBGT0dfRVhQMlwiOlwiXCIsaS5tYXA/XCIjZGVmaW5lIFVTRV9NQVBcIjpcIlwiLGkuZW52TWFwP1wiI2RlZmluZSBVU0VfRU5WTUFQXCI6XCJcIixpLmVudk1hcD9cIiNkZWZpbmUgXCIraDpcIlwiLGkubGlnaHRNYXA/XCIjZGVmaW5lIFVTRV9MSUdIVE1BUFwiOlwiXCIsaS5hb01hcD9cIiNkZWZpbmUgVVNFX0FPTUFQXCI6XCJcIixpLmVtaXNzaXZlTWFwP1wiI2RlZmluZSBVU0VfRU1JU1NJVkVNQVBcIjpcIlwiLGkuYnVtcE1hcD9cIiNkZWZpbmUgVVNFX0JVTVBNQVBcIjpcIlwiLGkubm9ybWFsTWFwP1wiI2RlZmluZSBVU0VfTk9STUFMTUFQXCI6XCJcIixpLmRpc3BsYWNlbWVudE1hcCYmaS5zdXBwb3J0c1ZlcnRleFRleHR1cmVzP1wiI2RlZmluZSBVU0VfRElTUExBQ0VNRU5UTUFQXCI6XCJcIixpLnNwZWN1bGFyTWFwP1wiI2RlZmluZSBVU0VfU1BFQ1VMQVJNQVBcIjpcIlwiLGkucm91Z2huZXNzTWFwP1wiI2RlZmluZSBVU0VfUk9VR0hORVNTTUFQXCI6XCJcIixpLm1ldGFsbmVzc01hcD9cIiNkZWZpbmUgVVNFX01FVEFMTkVTU01BUFwiOlwiXCIsaS5hbHBoYU1hcD9cIiNkZWZpbmUgVVNFX0FMUEhBTUFQXCI6XCJcIixpLnZlcnRleENvbG9ycz9cIiNkZWZpbmUgVVNFX0NPTE9SXCI6XCJcIixpLmZsYXRTaGFkaW5nP1wiI2RlZmluZSBGTEFUX1NIQURFRFwiOlwiXCIsaS5za2lubmluZz9cIiNkZWZpbmUgVVNFX1NLSU5OSU5HXCI6XCJcIixpLnVzZVZlcnRleFRleHR1cmU/XCIjZGVmaW5lIEJPTkVfVEVYVFVSRVwiOlwiXCIsaS5tb3JwaFRhcmdldHM/XCIjZGVmaW5lIFVTRV9NT1JQSFRBUkdFVFNcIjpcIlwiLGkubW9ycGhOb3JtYWxzJiZpLmZsYXRTaGFkaW5nPT09ITE/XCIjZGVmaW5lIFVTRV9NT1JQSE5PUk1BTFNcIjpcIlwiLGkuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsaS5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK2kubnVtQ2xpcHBpbmdQbGFuZXMsaS5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBVU0VfU0hBRE9XTUFQXCI6XCJcIixpLnNoYWRvd01hcEVuYWJsZWQ/XCIjZGVmaW5lIFwiK2w6XCJcIixpLnNpemVBdHRlbnVhdGlvbj9cIiNkZWZpbmUgVVNFX1NJWkVBVFRFTlVBVElPTlwiOlwiXCIsaS5sb2dhcml0aG1pY0RlcHRoQnVmZmVyP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZcIjpcIlwiLGkubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmdC5leHRlbnNpb25zLmdldChcIkVYVF9mcmFnX2RlcHRoXCIpP1wiI2RlZmluZSBVU0VfTE9HREVQVEhCVUZfRVhUXCI6XCJcIixcInVuaWZvcm0gbWF0NCBtb2RlbE1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcIixcInVuaWZvcm0gbWF0NCB2aWV3TWF0cml4O1wiLFwidW5pZm9ybSBtYXQzIG5vcm1hbE1hdHJpeDtcIixcInVuaWZvcm0gdmVjMyBjYW1lcmFQb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzMgbm9ybWFsO1wiLFwiYXR0cmlidXRlIHZlYzIgdXY7XCIsXCIjaWZkZWYgVVNFX0NPTE9SXCIsXCJcXHRhdHRyaWJ1dGUgdmVjMyBjb2xvcjtcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MDtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MTtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MjtcIixcIlxcdGF0dHJpYnV0ZSB2ZWMzIG1vcnBoVGFyZ2V0MztcIixcIlxcdCNpZmRlZiBVU0VfTU9SUEhOT1JNQUxTXCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDA7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDE7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDI7XCIsXCJcXHRcXHRhdHRyaWJ1dGUgdmVjMyBtb3JwaE5vcm1hbDM7XCIsXCJcXHQjZWxzZVwiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ0O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ1O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ2O1wiLFwiXFx0XFx0YXR0cmlidXRlIHZlYzMgbW9ycGhUYXJnZXQ3O1wiLFwiXFx0I2VuZGlmXCIsXCIjZW5kaWZcIixcIiNpZmRlZiBVU0VfU0tJTk5JTkdcIixcIlxcdGF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcIixcIlxcdGF0dHJpYnV0ZSB2ZWM0IHNraW5XZWlnaHQ7XCIsXCIjZW5kaWZcIixcIlxcblwiXS5maWx0ZXIoS3QpLmpvaW4oXCJcXG5cIikscD1bdixcInByZWNpc2lvbiBcIitpLnByZWNpc2lvbitcIiBmbG9hdDtcIixcInByZWNpc2lvbiBcIitpLnByZWNpc2lvbitcIiBpbnQ7XCIsXCIjZGVmaW5lIFNIQURFUl9OQU1FIFwiK24uX193ZWJnbFNoYWRlci5uYW1lLG0saS5hbHBoYVRlc3Q/XCIjZGVmaW5lIEFMUEhBVEVTVCBcIitpLmFscGhhVGVzdDpcIlwiLFwiI2RlZmluZSBHQU1NQV9GQUNUT1IgXCIrZyxpLnVzZUZvZyYmaS5mb2c/XCIjZGVmaW5lIFVTRV9GT0dcIjpcIlwiLGkudXNlRm9nJiZpLmZvZ0V4cD9cIiNkZWZpbmUgRk9HX0VYUDJcIjpcIlwiLGkubWFwP1wiI2RlZmluZSBVU0VfTUFQXCI6XCJcIixpLmVudk1hcD9cIiNkZWZpbmUgVVNFX0VOVk1BUFwiOlwiXCIsaS5lbnZNYXA/XCIjZGVmaW5lIFwiK2M6XCJcIixpLmVudk1hcD9cIiNkZWZpbmUgXCIraDpcIlwiLGkuZW52TWFwP1wiI2RlZmluZSBcIitmOlwiXCIsaS5saWdodE1hcD9cIiNkZWZpbmUgVVNFX0xJR0hUTUFQXCI6XCJcIixpLmFvTWFwP1wiI2RlZmluZSBVU0VfQU9NQVBcIjpcIlwiLGkuZW1pc3NpdmVNYXA/XCIjZGVmaW5lIFVTRV9FTUlTU0lWRU1BUFwiOlwiXCIsaS5idW1wTWFwP1wiI2RlZmluZSBVU0VfQlVNUE1BUFwiOlwiXCIsaS5ub3JtYWxNYXA/XCIjZGVmaW5lIFVTRV9OT1JNQUxNQVBcIjpcIlwiLGkuc3BlY3VsYXJNYXA/XCIjZGVmaW5lIFVTRV9TUEVDVUxBUk1BUFwiOlwiXCIsaS5yb3VnaG5lc3NNYXA/XCIjZGVmaW5lIFVTRV9ST1VHSE5FU1NNQVBcIjpcIlwiLGkubWV0YWxuZXNzTWFwP1wiI2RlZmluZSBVU0VfTUVUQUxORVNTTUFQXCI6XCJcIixpLmFscGhhTWFwP1wiI2RlZmluZSBVU0VfQUxQSEFNQVBcIjpcIlwiLGkudmVydGV4Q29sb3JzP1wiI2RlZmluZSBVU0VfQ09MT1JcIjpcIlwiLGkuZ3JhZGllbnRNYXA/XCIjZGVmaW5lIFVTRV9HUkFESUVOVE1BUFwiOlwiXCIsaS5mbGF0U2hhZGluZz9cIiNkZWZpbmUgRkxBVF9TSEFERURcIjpcIlwiLGkuZG91YmxlU2lkZWQ/XCIjZGVmaW5lIERPVUJMRV9TSURFRFwiOlwiXCIsaS5mbGlwU2lkZWQ/XCIjZGVmaW5lIEZMSVBfU0lERURcIjpcIlwiLFwiI2RlZmluZSBOVU1fQ0xJUFBJTkdfUExBTkVTIFwiK2kubnVtQ2xpcHBpbmdQbGFuZXMsXCIjZGVmaW5lIFVOSU9OX0NMSVBQSU5HX1BMQU5FUyBcIisoaS5udW1DbGlwcGluZ1BsYW5lcy1pLm51bUNsaXBJbnRlcnNlY3Rpb24pLGkuc2hhZG93TWFwRW5hYmxlZD9cIiNkZWZpbmUgVVNFX1NIQURPV01BUFwiOlwiXCIsaS5zaGFkb3dNYXBFbmFibGVkP1wiI2RlZmluZSBcIitsOlwiXCIsaS5wcmVtdWx0aXBsaWVkQWxwaGE/XCIjZGVmaW5lIFBSRU1VTFRJUExJRURfQUxQSEFcIjpcIlwiLGkucGh5c2ljYWxseUNvcnJlY3RMaWdodHM/XCIjZGVmaW5lIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcIjpcIlwiLGkubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGXCI6XCJcIixpLmxvZ2FyaXRobWljRGVwdGhCdWZmZXImJnQuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfZnJhZ19kZXB0aFwiKT9cIiNkZWZpbmUgVVNFX0xPR0RFUFRIQlVGX0VYVFwiOlwiXCIsaS5lbnZNYXAmJnQuZXh0ZW5zaW9ucy5nZXQoXCJFWFRfc2hhZGVyX3RleHR1cmVfbG9kXCIpP1wiI2RlZmluZSBURVhUVVJFX0xPRF9FWFRcIjpcIlwiLFwidW5pZm9ybSBtYXQ0IHZpZXdNYXRyaXg7XCIsXCJ1bmlmb3JtIHZlYzMgY2FtZXJhUG9zaXRpb247XCIsaS50b25lTWFwcGluZyE9PVRpP1wiI2RlZmluZSBUT05FX01BUFBJTkdcIjpcIlwiLGkudG9uZU1hcHBpbmchPT1UaT9scy50b25lbWFwcGluZ19wYXJzX2ZyYWdtZW50OlwiXCIsaS50b25lTWFwcGluZyE9PVRpP1l0KFwidG9uZU1hcHBpbmdcIixpLnRvbmVNYXBwaW5nKTpcIlwiLGkuZGl0aGVyaW5nP1wiI2RlZmluZSBESVRIRVJJTkdcIjpcIlwiLGkuZGl0aGVyaW5nP2xzLmRpdGhlcmluZ19wYXJzX2ZyYWdtZW50OlwiXCIsaS5vdXRwdXRFbmNvZGluZ3x8aS5tYXBFbmNvZGluZ3x8aS5lbnZNYXBFbmNvZGluZ3x8aS5lbWlzc2l2ZU1hcEVuY29kaW5nP2xzLmVuY29kaW5nc19wYXJzX2ZyYWdtZW50OlwiXCIsaS5tYXBFbmNvZGluZz9IdChcIm1hcFRleGVsVG9MaW5lYXJcIixpLm1hcEVuY29kaW5nKTpcIlwiLGkuZW52TWFwRW5jb2Rpbmc/SHQoXCJlbnZNYXBUZXhlbFRvTGluZWFyXCIsaS5lbnZNYXBFbmNvZGluZyk6XCJcIixpLmVtaXNzaXZlTWFwRW5jb2Rpbmc/SHQoXCJlbWlzc2l2ZU1hcFRleGVsVG9MaW5lYXJcIixpLmVtaXNzaXZlTWFwRW5jb2RpbmcpOlwiXCIsaS5vdXRwdXRFbmNvZGluZz9xdChcImxpbmVhclRvT3V0cHV0VGV4ZWxcIixpLm91dHB1dEVuY29kaW5nKTpcIlwiLGkuZGVwdGhQYWNraW5nP1wiI2RlZmluZSBERVBUSF9QQUNLSU5HIFwiK24uZGVwdGhQYWNraW5nOlwiXCIsXCJcXG5cIl0uZmlsdGVyKEt0KS5qb2luKFwiXFxuXCIpKSxcbnM9JHQocyxpKSxzPVF0KHMsaSksdT0kdCh1LGkpLHU9UXQodSxpKSxuLmlzU2hhZGVyTWF0ZXJpYWx8fChzPXRlKHMpLHU9dGUodSkpO3ZhciBfPWQrcyxiPXArdSx4PVZ0KHIsci5WRVJURVhfU0hBREVSLF8pLHc9VnQocixyLkZSQUdNRU5UX1NIQURFUixiKTtyLmF0dGFjaFNoYWRlcih5LHgpLHIuYXR0YWNoU2hhZGVyKHksdyksdm9pZCAwIT09bi5pbmRleDBBdHRyaWJ1dGVOYW1lP3IuYmluZEF0dHJpYkxvY2F0aW9uKHksMCxuLmluZGV4MEF0dHJpYnV0ZU5hbWUpOmkubW9ycGhUYXJnZXRzPT09ITAmJnIuYmluZEF0dHJpYkxvY2F0aW9uKHksMCxcInBvc2l0aW9uXCIpLHIubGlua1Byb2dyYW0oeSk7dmFyIEU9ci5nZXRQcm9ncmFtSW5mb0xvZyh5KSxTPXIuZ2V0U2hhZGVySW5mb0xvZyh4KSxNPXIuZ2V0U2hhZGVySW5mb0xvZyh3KSxDPSEwLEk9ITA7ci5nZXRQcm9ncmFtUGFyYW1ldGVyKHksci5MSU5LX1NUQVRVUyk9PT0hMT8oQz0hMSxjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiBzaGFkZXIgZXJyb3I6IFwiLHIuZ2V0RXJyb3IoKSxcImdsLlZBTElEQVRFX1NUQVRVU1wiLHIuZ2V0UHJvZ3JhbVBhcmFtZXRlcih5LHIuVkFMSURBVEVfU1RBVFVTKSxcImdsLmdldFByb2dyYW1JbmZvTG9nXCIsRSxTLE0pKTpcIlwiIT09RT9jb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFByb2dyYW06IGdsLmdldFByb2dyYW1JbmZvTG9nKClcIixFKTpcIlwiIT09UyYmXCJcIiE9PU18fChJPSExKSxJJiYodGhpcy5kaWFnbm9zdGljcz17cnVubmFibGU6QyxtYXRlcmlhbDpuLHByb2dyYW1Mb2c6RSx2ZXJ0ZXhTaGFkZXI6e2xvZzpTLHByZWZpeDpkfSxmcmFnbWVudFNoYWRlcjp7bG9nOk0scHJlZml4OnB9fSksci5kZWxldGVTaGFkZXIoeCksci5kZWxldGVTaGFkZXIodyk7dmFyIE87dGhpcy5nZXRVbmlmb3Jtcz1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1PJiYoTz1uZXcgWChyLHksdCkpLE99O3ZhciBUO3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwPT09VCYmKFQ9SnQocix5KSksVH0sdGhpcy5kZXN0cm95PWZ1bmN0aW9uKCl7ci5kZWxldGVQcm9ncmFtKHkpLHRoaXMucHJvZ3JhbT12b2lkIDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3VuaWZvcm1zOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAudW5pZm9ybXMgaXMgbm93IC5nZXRVbmlmb3JtcygpLlwiKSx0aGlzLmdldFVuaWZvcm1zKCl9fSxhdHRyaWJ1dGVzOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtOiAuYXR0cmlidXRlcyBpcyBub3cgLmdldEF0dHJpYnV0ZXMoKS5cIiksdGhpcy5nZXRBdHRyaWJ1dGVzKCl9fX0pLHRoaXMuaWQ9cHMrKyx0aGlzLmNvZGU9ZSx0aGlzLnVzZWRUaW1lcz0xLHRoaXMucHJvZ3JhbT15LHRoaXMudmVydGV4U2hhZGVyPXgsdGhpcy5mcmFnbWVudFNoYWRlcj13LHRoaXN9ZnVuY3Rpb24gbmUodCxlKXtmdW5jdGlvbiBuKHQpe3ZhciBuPXQuc2tlbGV0b24saT1uLmJvbmVzO2lmKGUuZmxvYXRWZXJ0ZXhUZXh0dXJlcylyZXR1cm4gMTAyNDt2YXIgcj1lLm1heFZlcnRleFVuaWZvcm1zLG89TWF0aC5mbG9vcigoci0yMCkvNCksYT1NYXRoLm1pbihvLGkubGVuZ3RoKTtyZXR1cm4gYTxpLmxlbmd0aD8oY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogU2tlbGV0b24gaGFzIFwiK2kubGVuZ3RoK1wiIGJvbmVzLiBUaGlzIEdQVSBzdXBwb3J0cyBcIithK1wiLlwiKSwwKTphfWZ1bmN0aW9uIGkodCxlKXt2YXIgbjtyZXR1cm4gdD90LmlzVGV4dHVyZT9uPXQuZW5jb2Rpbmc6dC5pc1dlYkdMUmVuZGVyVGFyZ2V0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtcy5nZXRUZXh0dXJlRW5jb2RpbmdGcm9tTWFwOiBkb24ndCB1c2UgcmVuZGVyIHRhcmdldHMgYXMgdGV4dHVyZXMuIFVzZSB0aGVpciAudGV4dHVyZSBwcm9wZXJ0eSBpbnN0ZWFkLlwiKSxuPXQudGV4dHVyZS5lbmNvZGluZyk6bj1CcixuPT09QnImJmUmJihuPVVyKSxufXZhciByPVtdLG89e01lc2hEZXB0aE1hdGVyaWFsOlwiZGVwdGhcIixNZXNoTm9ybWFsTWF0ZXJpYWw6XCJub3JtYWxcIixNZXNoQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTWVzaExhbWJlcnRNYXRlcmlhbDpcImxhbWJlcnRcIixNZXNoUGhvbmdNYXRlcmlhbDpcInBob25nXCIsTWVzaFRvb25NYXRlcmlhbDpcInBob25nXCIsTWVzaFN0YW5kYXJkTWF0ZXJpYWw6XCJwaHlzaWNhbFwiLE1lc2hQaHlzaWNhbE1hdGVyaWFsOlwicGh5c2ljYWxcIixMaW5lQmFzaWNNYXRlcmlhbDpcImJhc2ljXCIsTGluZURhc2hlZE1hdGVyaWFsOlwiZGFzaGVkXCIsUG9pbnRzTWF0ZXJpYWw6XCJwb2ludHNcIn0sYT1bXCJwcmVjaXNpb25cIixcInN1cHBvcnRzVmVydGV4VGV4dHVyZXNcIixcIm1hcFwiLFwibWFwRW5jb2RpbmdcIixcImVudk1hcFwiLFwiZW52TWFwTW9kZVwiLFwiZW52TWFwRW5jb2RpbmdcIixcImxpZ2h0TWFwXCIsXCJhb01hcFwiLFwiZW1pc3NpdmVNYXBcIixcImVtaXNzaXZlTWFwRW5jb2RpbmdcIixcImJ1bXBNYXBcIixcIm5vcm1hbE1hcFwiLFwiZGlzcGxhY2VtZW50TWFwXCIsXCJzcGVjdWxhck1hcFwiLFwicm91Z2huZXNzTWFwXCIsXCJtZXRhbG5lc3NNYXBcIixcImdyYWRpZW50TWFwXCIsXCJhbHBoYU1hcFwiLFwiY29tYmluZVwiLFwidmVydGV4Q29sb3JzXCIsXCJmb2dcIixcInVzZUZvZ1wiLFwiZm9nRXhwXCIsXCJmbGF0U2hhZGluZ1wiLFwic2l6ZUF0dGVudWF0aW9uXCIsXCJsb2dhcml0aG1pY0RlcHRoQnVmZmVyXCIsXCJza2lubmluZ1wiLFwibWF4Qm9uZXNcIixcInVzZVZlcnRleFRleHR1cmVcIixcIm1vcnBoVGFyZ2V0c1wiLFwibW9ycGhOb3JtYWxzXCIsXCJtYXhNb3JwaFRhcmdldHNcIixcIm1heE1vcnBoTm9ybWFsc1wiLFwicHJlbXVsdGlwbGllZEFscGhhXCIsXCJudW1EaXJMaWdodHNcIixcIm51bVBvaW50TGlnaHRzXCIsXCJudW1TcG90TGlnaHRzXCIsXCJudW1IZW1pTGlnaHRzXCIsXCJudW1SZWN0QXJlYUxpZ2h0c1wiLFwic2hhZG93TWFwRW5hYmxlZFwiLFwic2hhZG93TWFwVHlwZVwiLFwidG9uZU1hcHBpbmdcIixcInBoeXNpY2FsbHlDb3JyZWN0TGlnaHRzXCIsXCJhbHBoYVRlc3RcIixcImRvdWJsZVNpZGVkXCIsXCJmbGlwU2lkZWRcIixcIm51bUNsaXBwaW5nUGxhbmVzXCIsXCJudW1DbGlwSW50ZXJzZWN0aW9uXCIsXCJkZXB0aFBhY2tpbmdcIixcImRpdGhlcmluZ1wiXTt0aGlzLmdldFBhcmFtZXRlcnM9ZnVuY3Rpb24ocixhLHMsdSxsLGMpe3ZhciBoPW9bci50eXBlXSxmPWMuaXNTa2lubmVkTWVzaD9uKGMpOjAsZD10LmdldFByZWNpc2lvbigpO251bGwhPT1yLnByZWNpc2lvbiYmKGQ9ZS5nZXRNYXhQcmVjaXNpb24oci5wcmVjaXNpb24pLGQhPT1yLnByZWNpc2lvbiYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xQcm9ncmFtLmdldFBhcmFtZXRlcnM6XCIsci5wcmVjaXNpb24sXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLGQsXCJpbnN0ZWFkLlwiKSk7dmFyIHA9dC5nZXRSZW5kZXJUYXJnZXQoKSxnPXtzaGFkZXJJRDpoLHByZWNpc2lvbjpkLHN1cHBvcnRzVmVydGV4VGV4dHVyZXM6ZS52ZXJ0ZXhUZXh0dXJlcyxvdXRwdXRFbmNvZGluZzppKHA/cC50ZXh0dXJlOm51bGwsdC5nYW1tYU91dHB1dCksbWFwOiEhci5tYXAsbWFwRW5jb2Rpbmc6aShyLm1hcCx0LmdhbW1hSW5wdXQpLGVudk1hcDohIXIuZW52TWFwLGVudk1hcE1vZGU6ci5lbnZNYXAmJnIuZW52TWFwLm1hcHBpbmcsZW52TWFwRW5jb2Rpbmc6aShyLmVudk1hcCx0LmdhbW1hSW5wdXQpLGVudk1hcEN1YmVVVjohIXIuZW52TWFwJiYoci5lbnZNYXAubWFwcGluZz09PVVpfHxyLmVudk1hcC5tYXBwaW5nPT09emkpLGxpZ2h0TWFwOiEhci5saWdodE1hcCxhb01hcDohIXIuYW9NYXAsZW1pc3NpdmVNYXA6ISFyLmVtaXNzaXZlTWFwLGVtaXNzaXZlTWFwRW5jb2Rpbmc6aShyLmVtaXNzaXZlTWFwLHQuZ2FtbWFJbnB1dCksYnVtcE1hcDohIXIuYnVtcE1hcCxub3JtYWxNYXA6ISFyLm5vcm1hbE1hcCxkaXNwbGFjZW1lbnRNYXA6ISFyLmRpc3BsYWNlbWVudE1hcCxyb3VnaG5lc3NNYXA6ISFyLnJvdWdobmVzc01hcCxtZXRhbG5lc3NNYXA6ISFyLm1ldGFsbmVzc01hcCxzcGVjdWxhck1hcDohIXIuc3BlY3VsYXJNYXAsYWxwaGFNYXA6ISFyLmFscGhhTWFwLGdyYWRpZW50TWFwOiEhci5ncmFkaWVudE1hcCxjb21iaW5lOnIuY29tYmluZSx2ZXJ0ZXhDb2xvcnM6ci52ZXJ0ZXhDb2xvcnMsZm9nOiEhcyx1c2VGb2c6ci5mb2csZm9nRXhwOnMmJnMuaXNGb2dFeHAyLGZsYXRTaGFkaW5nOnIuc2hhZGluZz09PUhuLHNpemVBdHRlbnVhdGlvbjpyLnNpemVBdHRlbnVhdGlvbixsb2dhcml0aG1pY0RlcHRoQnVmZmVyOmUubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixza2lubmluZzpyLnNraW5uaW5nJiZmPjAsbWF4Qm9uZXM6Zix1c2VWZXJ0ZXhUZXh0dXJlOmUuZmxvYXRWZXJ0ZXhUZXh0dXJlcyxtb3JwaFRhcmdldHM6ci5tb3JwaFRhcmdldHMsbW9ycGhOb3JtYWxzOnIubW9ycGhOb3JtYWxzLG1heE1vcnBoVGFyZ2V0czp0Lm1heE1vcnBoVGFyZ2V0cyxtYXhNb3JwaE5vcm1hbHM6dC5tYXhNb3JwaE5vcm1hbHMsbnVtRGlyTGlnaHRzOmEuZGlyZWN0aW9uYWwubGVuZ3RoLG51bVBvaW50TGlnaHRzOmEucG9pbnQubGVuZ3RoLG51bVNwb3RMaWdodHM6YS5zcG90Lmxlbmd0aCxudW1SZWN0QXJlYUxpZ2h0czphLnJlY3RBcmVhLmxlbmd0aCxudW1IZW1pTGlnaHRzOmEuaGVtaS5sZW5ndGgsbnVtQ2xpcHBpbmdQbGFuZXM6dSxudW1DbGlwSW50ZXJzZWN0aW9uOmwsZGl0aGVyaW5nOnIuZGl0aGVyaW5nLHNoYWRvd01hcEVuYWJsZWQ6dC5zaGFkb3dNYXAuZW5hYmxlZCYmYy5yZWNlaXZlU2hhZG93JiZhLnNoYWRvd3MubGVuZ3RoPjAsc2hhZG93TWFwVHlwZTp0LnNoYWRvd01hcC50eXBlLHRvbmVNYXBwaW5nOnQudG9uZU1hcHBpbmcscGh5c2ljYWxseUNvcnJlY3RMaWdodHM6dC5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyxwcmVtdWx0aXBsaWVkQWxwaGE6ci5wcmVtdWx0aXBsaWVkQWxwaGEsYWxwaGFUZXN0OnIuYWxwaGFUZXN0LGRvdWJsZVNpZGVkOnIuc2lkZT09PVhuLGZsaXBTaWRlZDpyLnNpZGU9PT1WbixkZXB0aFBhY2tpbmc6dm9pZCAwIT09ci5kZXB0aFBhY2tpbmcmJnIuZGVwdGhQYWNraW5nfTtyZXR1cm4gZ30sdGhpcy5nZXRQcm9ncmFtQ29kZT1mdW5jdGlvbih0LGUpe3ZhciBuPVtdO2lmKGUuc2hhZGVySUQ/bi5wdXNoKGUuc2hhZGVySUQpOihuLnB1c2godC5mcmFnbWVudFNoYWRlciksbi5wdXNoKHQudmVydGV4U2hhZGVyKSksdm9pZCAwIT09dC5kZWZpbmVzKWZvcih2YXIgaSBpbiB0LmRlZmluZXMpbi5wdXNoKGkpLG4ucHVzaCh0LmRlZmluZXNbaV0pO2Zvcih2YXIgcj0wO3I8YS5sZW5ndGg7cisrKW4ucHVzaChlW2Fbcl1dKTtyZXR1cm4gbi5qb2luKCl9LHRoaXMuYWNxdWlyZVByb2dyYW09ZnVuY3Rpb24oZSxuLGkpe2Zvcih2YXIgbyxhPTAscz1yLmxlbmd0aDthPHM7YSsrKXt2YXIgdT1yW2FdO2lmKHUuY29kZT09PWkpe289dSwrK28udXNlZFRpbWVzO2JyZWFrfX1yZXR1cm4gdm9pZCAwPT09byYmKG89bmV3IGVlKHQsaSxlLG4pLHIucHVzaChvKSksb30sdGhpcy5yZWxlYXNlUHJvZ3JhbT1mdW5jdGlvbih0KXtpZigwPT09LS10LnVzZWRUaW1lcyl7dmFyIGU9ci5pbmRleE9mKHQpO3JbZV09cltyLmxlbmd0aC0xXSxyLnBvcCgpLHQuZGVzdHJveSgpfX0sdGhpcy5wcm9ncmFtcz1yfWZ1bmN0aW9uIGllKHQsZSxuLGkscixvLGEpe2Z1bmN0aW9uIHModCxlKXtpZih0LndpZHRoPmV8fHQuaGVpZ2h0PmUpe3ZhciBuPWUvTWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIik7aS53aWR0aD1NYXRoLmZsb29yKHQud2lkdGgqbiksaS5oZWlnaHQ9TWF0aC5mbG9vcih0LmhlaWdodCpuKTt2YXIgcj1pLmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gci5kcmF3SW1hZ2UodCwwLDAsdC53aWR0aCx0LmhlaWdodCwwLDAsaS53aWR0aCxpLmhlaWdodCksY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgdG9vIGJpZyAoXCIrdC53aWR0aCtcInhcIit0LmhlaWdodCtcIikuIFJlc2l6ZWQgdG8gXCIraS53aWR0aCtcInhcIitpLmhlaWdodCx0KSxpfXJldHVybiB0fWZ1bmN0aW9uIHUodCl7cmV0dXJuIFdyLmlzUG93ZXJPZlR3byh0LndpZHRoKSYmV3IuaXNQb3dlck9mVHdvKHQuaGVpZ2h0KX1mdW5jdGlvbiBsKHQpe2lmKHQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHx0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixcImNhbnZhc1wiKTtlLndpZHRoPVdyLm5lYXJlc3RQb3dlck9mVHdvKHQud2lkdGgpLGUuaGVpZ2h0PVdyLm5lYXJlc3RQb3dlck9mVHdvKHQuaGVpZ2h0KTt2YXIgbj1lLmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gbi5kcmF3SW1hZ2UodCwwLDAsZS53aWR0aCxlLmhlaWdodCksY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogaW1hZ2UgaXMgbm90IHBvd2VyIG9mIHR3byAoXCIrdC53aWR0aCtcInhcIit0LmhlaWdodCtcIikuIFJlc2l6ZWQgdG8gXCIrZS53aWR0aCtcInhcIitlLmhlaWdodCx0KSxlfXJldHVybiB0fWZ1bmN0aW9uIGModCl7cmV0dXJuIHQud3JhcFMhPT1WaXx8dC53cmFwVCE9PVZpfHx0Lm1pbkZpbHRlciE9PUhpJiZ0Lm1pbkZpbHRlciE9PVdpfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGU9PT1IaXx8ZT09PXFpfHxlPT09WWk/dC5ORUFSRVNUOnQuTElORUFSfWZ1bmN0aW9uIGYodCl7dmFyIGU9dC50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGYpLHAoZSksYS50ZXh0dXJlcy0tfWZ1bmN0aW9uIGQodCl7dmFyIGU9dC50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGQpLGcoZSksYS50ZXh0dXJlcy0tfWZ1bmN0aW9uIHAoZSl7dmFyIG49aS5nZXQoZSk7aWYoZS5pbWFnZSYmbi5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKXQuZGVsZXRlVGV4dHVyZShuLl9faW1hZ2VfX3dlYmdsVGV4dHVyZUN1YmUpO2Vsc2V7aWYodm9pZCAwPT09bi5fX3dlYmdsSW5pdClyZXR1cm47dC5kZWxldGVUZXh0dXJlKG4uX193ZWJnbFRleHR1cmUpfWkucmVtb3ZlKGUpfWZ1bmN0aW9uIGcoZSl7dmFyIG49aS5nZXQoZSkscj1pLmdldChlLnRleHR1cmUpO2lmKGUpe2lmKHZvaWQgMCE9PXIuX193ZWJnbFRleHR1cmUmJnQuZGVsZXRlVGV4dHVyZShyLl9fd2ViZ2xUZXh0dXJlKSxlLmRlcHRoVGV4dHVyZSYmZS5kZXB0aFRleHR1cmUuZGlzcG9zZSgpLGUuaXNXZWJHTFJlbmRlclRhcmdldEN1YmUpZm9yKHZhciBvPTA7bzw2O28rKyl0LmRlbGV0ZUZyYW1lYnVmZmVyKG4uX193ZWJnbEZyYW1lYnVmZmVyW29dKSxuLl9fd2ViZ2xEZXB0aGJ1ZmZlciYmdC5kZWxldGVSZW5kZXJidWZmZXIobi5fX3dlYmdsRGVwdGhidWZmZXJbb10pO2Vsc2UgdC5kZWxldGVGcmFtZWJ1ZmZlcihuLl9fd2ViZ2xGcmFtZWJ1ZmZlciksbi5fX3dlYmdsRGVwdGhidWZmZXImJnQuZGVsZXRlUmVuZGVyYnVmZmVyKG4uX193ZWJnbERlcHRoYnVmZmVyKTtpLnJlbW92ZShlLnRleHR1cmUpLGkucmVtb3ZlKGUpfX1mdW5jdGlvbiB2KGUscil7dmFyIG89aS5nZXQoZSk7aWYoZS52ZXJzaW9uPjAmJm8uX192ZXJzaW9uIT09ZS52ZXJzaW9uKXt2YXIgYT1lLmltYWdlO2lmKHZvaWQgMD09PWEpY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgdW5kZWZpbmVkXCIsZSk7ZWxzZXtpZihhLmNvbXBsZXRlIT09ITEpcmV0dXJuIHZvaWQgYihvLGUscik7Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBtYXJrZWQgZm9yIHVwZGF0ZSBidXQgaW1hZ2UgaXMgaW5jb21wbGV0ZVwiLGUpfX1uLmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCtyKSxuLmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxvLl9fd2ViZ2xUZXh0dXJlKX1mdW5jdGlvbiBtKGUsbCl7dmFyIGM9aS5nZXQoZSk7aWYoNj09PWUuaW1hZ2UubGVuZ3RoKWlmKGUudmVyc2lvbj4wJiZjLl9fdmVyc2lvbiE9PWUudmVyc2lvbil7Yy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlfHwoZS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGYpLGMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZT10LmNyZWF0ZVRleHR1cmUoKSxhLnRleHR1cmVzKyspLG4uYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUwK2wpLG4uYmluZFRleHR1cmUodC5URVhUVVJFX0NVQkVfTUFQLGMuX19pbWFnZV9fd2ViZ2xUZXh0dXJlQ3ViZSksdC5waXhlbFN0b3JlaSh0LlVOUEFDS19GTElQX1lfV0VCR0wsZS5mbGlwWSk7Zm9yKHZhciBoPWUmJmUuaXNDb21wcmVzc2VkVGV4dHVyZSxkPWUuaW1hZ2VbMF0mJmUuaW1hZ2VbMF0uaXNEYXRhVGV4dHVyZSxwPVtdLGc9MDtnPDY7ZysrKWh8fGQ/cFtnXT1kP2UuaW1hZ2VbZ10uaW1hZ2U6ZS5pbWFnZVtnXTpwW2ddPXMoZS5pbWFnZVtnXSxyLm1heEN1YmVtYXBTaXplKTt2YXIgdj1wWzBdLG09dSh2KSx5PW8oZS5mb3JtYXQpLGI9byhlLnR5cGUpO18odC5URVhUVVJFX0NVQkVfTUFQLGUsbSk7Zm9yKHZhciBnPTA7Zzw2O2crKylpZihoKWZvcih2YXIgeCx3PXBbZ10ubWlwbWFwcyxFPTAsUz13Lmxlbmd0aDtFPFM7RSsrKXg9d1tFXSxlLmZvcm1hdCE9PWhyJiZlLmZvcm1hdCE9PWNyP24uZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzKCkuaW5kZXhPZih5KT4tMT9uLmNvbXByZXNzZWRUZXhJbWFnZTJEKHQuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2csRSx5LHgud2lkdGgseC5oZWlnaHQsMCx4LmRhdGEpOmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IEF0dGVtcHQgdG8gbG9hZCB1bnN1cHBvcnRlZCBjb21wcmVzc2VkIHRleHR1cmUgZm9ybWF0IGluIC5zZXRUZXh0dXJlQ3ViZSgpXCIpOm4udGV4SW1hZ2UyRCh0LlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtnLEUseSx4LndpZHRoLHguaGVpZ2h0LDAseSxiLHguZGF0YSk7ZWxzZSBkP24udGV4SW1hZ2UyRCh0LlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCtnLDAseSxwW2ddLndpZHRoLHBbZ10uaGVpZ2h0LDAseSxiLHBbZ10uZGF0YSk6bi50ZXhJbWFnZTJEKHQuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YK2csMCx5LHksYixwW2ddKTtlLmdlbmVyYXRlTWlwbWFwcyYmbSYmdC5nZW5lcmF0ZU1pcG1hcCh0LlRFWFRVUkVfQ1VCRV9NQVApLGMuX192ZXJzaW9uPWUudmVyc2lvbixlLm9uVXBkYXRlJiZlLm9uVXBkYXRlKGUpfWVsc2Ugbi5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTArbCksbi5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfQ1VCRV9NQVAsYy5fX2ltYWdlX193ZWJnbFRleHR1cmVDdWJlKX1mdW5jdGlvbiB5KGUscil7bi5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTArciksbi5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfQ1VCRV9NQVAsaS5nZXQoZSkuX193ZWJnbFRleHR1cmUpfWZ1bmN0aW9uIF8obixhLHMpe3ZhciB1O2lmKHM/KHQudGV4UGFyYW1ldGVyaShuLHQuVEVYVFVSRV9XUkFQX1MsbyhhLndyYXBTKSksdC50ZXhQYXJhbWV0ZXJpKG4sdC5URVhUVVJFX1dSQVBfVCxvKGEud3JhcFQpKSx0LnRleFBhcmFtZXRlcmkobix0LlRFWFRVUkVfTUFHX0ZJTFRFUixvKGEubWFnRmlsdGVyKSksdC50ZXhQYXJhbWV0ZXJpKG4sdC5URVhUVVJFX01JTl9GSUxURVIsbyhhLm1pbkZpbHRlcikpKToodC50ZXhQYXJhbWV0ZXJpKG4sdC5URVhUVVJFX1dSQVBfUyx0LkNMQU1QX1RPX0VER0UpLHQudGV4UGFyYW1ldGVyaShuLHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSxhLndyYXBTPT09VmkmJmEud3JhcFQ9PT1WaXx8Y29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVGV4dHVyZSBpcyBub3QgcG93ZXIgb2YgdHdvLiBUZXh0dXJlLndyYXBTIGFuZCBUZXh0dXJlLndyYXBUIHNob3VsZCBiZSBzZXQgdG8gVEhSRUUuQ2xhbXBUb0VkZ2VXcmFwcGluZy5cIixhKSx0LnRleFBhcmFtZXRlcmkobix0LlRFWFRVUkVfTUFHX0ZJTFRFUixoKGEubWFnRmlsdGVyKSksdC50ZXhQYXJhbWV0ZXJpKG4sdC5URVhUVVJFX01JTl9GSUxURVIsaChhLm1pbkZpbHRlcikpLGEubWluRmlsdGVyIT09SGkmJmEubWluRmlsdGVyIT09V2kmJmNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFRleHR1cmUgaXMgbm90IHBvd2VyIG9mIHR3by4gVGV4dHVyZS5taW5GaWx0ZXIgc2hvdWxkIGJlIHNldCB0byBUSFJFRS5OZWFyZXN0RmlsdGVyIG9yIFRIUkVFLkxpbmVhckZpbHRlci5cIixhKSksdT1lLmdldChcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKSl7aWYoYS50eXBlPT09aXImJm51bGw9PT1lLmdldChcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiKSlyZXR1cm47aWYoYS50eXBlPT09cnImJm51bGw9PT1lLmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCIpKXJldHVybjsoYS5hbmlzb3Ryb3B5PjF8fGkuZ2V0KGEpLl9fY3VycmVudEFuaXNvdHJvcHkpJiYodC50ZXhQYXJhbWV0ZXJmKG4sdS5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCxNYXRoLm1pbihhLmFuaXNvdHJvcHksci5nZXRNYXhBbmlzb3Ryb3B5KCkpKSxpLmdldChhKS5fX2N1cnJlbnRBbmlzb3Ryb3B5PWEuYW5pc290cm9weSl9fWZ1bmN0aW9uIGIoZSxpLGgpe3ZvaWQgMD09PWUuX193ZWJnbEluaXQmJihlLl9fd2ViZ2xJbml0PSEwLGkuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixmKSxlLl9fd2ViZ2xUZXh0dXJlPXQuY3JlYXRlVGV4dHVyZSgpLGEudGV4dHVyZXMrKyksbi5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTAraCksbi5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsZS5fX3dlYmdsVGV4dHVyZSksdC5waXhlbFN0b3JlaSh0LlVOUEFDS19GTElQX1lfV0VCR0wsaS5mbGlwWSksdC5waXhlbFN0b3JlaSh0LlVOUEFDS19QUkVNVUxUSVBMWV9BTFBIQV9XRUJHTCxpLnByZW11bHRpcGx5QWxwaGEpLHQucGl4ZWxTdG9yZWkodC5VTlBBQ0tfQUxJR05NRU5ULGkudW5wYWNrQWxpZ25tZW50KTt2YXIgZD1zKGkuaW1hZ2Usci5tYXhUZXh0dXJlU2l6ZSk7YyhpKSYmdShkKT09PSExJiYoZD1sKGQpKTt2YXIgcD11KGQpLGc9byhpLmZvcm1hdCksdj1vKGkudHlwZSk7Xyh0LlRFWFRVUkVfMkQsaSxwKTt2YXIgbSx5PWkubWlwbWFwcztpZihpLmlzRGVwdGhUZXh0dXJlKXt2YXIgYj10LkRFUFRIX0NPTVBPTkVOVDtpZihpLnR5cGU9PT1pcil7aWYoIUkpdGhyb3cgbmV3IEVycm9yKFwiRmxvYXQgRGVwdGggVGV4dHVyZSBvbmx5IHN1cHBvcnRlZCBpbiBXZWJHTDIuMFwiKTtiPXQuREVQVEhfQ09NUE9ORU5UMzJGfWVsc2UgSSYmKGI9dC5ERVBUSF9DT01QT05FTlQxNik7aS5mb3JtYXQ9PT1nciYmYj09PXQuREVQVEhfQ09NUE9ORU5UJiZpLnR5cGUhPT10ciYmaS50eXBlIT09bnImJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBVc2UgVW5zaWduZWRTaG9ydFR5cGUgb3IgVW5zaWduZWRJbnRUeXBlIGZvciBEZXB0aEZvcm1hdCBEZXB0aFRleHR1cmUuXCIpLGkudHlwZT10cix2PW8oaS50eXBlKSksaS5mb3JtYXQ9PT12ciYmKGI9dC5ERVBUSF9TVEVOQ0lMLGkudHlwZSE9PXVyJiYoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogVXNlIFVuc2lnbmVkSW50MjQ4VHlwZSBmb3IgRGVwdGhTdGVuY2lsRm9ybWF0IERlcHRoVGV4dHVyZS5cIiksaS50eXBlPXVyLHY9byhpLnR5cGUpKSksbi50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLGIsZC53aWR0aCxkLmhlaWdodCwwLGcsdixudWxsKX1lbHNlIGlmKGkuaXNEYXRhVGV4dHVyZSlpZih5Lmxlbmd0aD4wJiZwKXtmb3IodmFyIHg9MCx3PXkubGVuZ3RoO3g8dzt4KyspbT15W3hdLG4udGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQseCxnLG0ud2lkdGgsbS5oZWlnaHQsMCxnLHYsbS5kYXRhKTtpLmdlbmVyYXRlTWlwbWFwcz0hMX1lbHNlIG4udGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCxnLGQud2lkdGgsZC5oZWlnaHQsMCxnLHYsZC5kYXRhKTtlbHNlIGlmKGkuaXNDb21wcmVzc2VkVGV4dHVyZSlmb3IodmFyIHg9MCx3PXkubGVuZ3RoO3g8dzt4KyspbT15W3hdLGkuZm9ybWF0IT09aHImJmkuZm9ybWF0IT09Y3I/bi5nZXRDb21wcmVzc2VkVGV4dHVyZUZvcm1hdHMoKS5pbmRleE9mKGcpPi0xP24uY29tcHJlc3NlZFRleEltYWdlMkQodC5URVhUVVJFXzJELHgsZyxtLndpZHRoLG0uaGVpZ2h0LDAsbS5kYXRhKTpjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOiBBdHRlbXB0IHRvIGxvYWQgdW5zdXBwb3J0ZWQgY29tcHJlc3NlZCB0ZXh0dXJlIGZvcm1hdCBpbiAudXBsb2FkVGV4dHVyZSgpXCIpOm4udGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQseCxnLG0ud2lkdGgsbS5oZWlnaHQsMCxnLHYsbS5kYXRhKTtlbHNlIGlmKHkubGVuZ3RoPjAmJnApe2Zvcih2YXIgeD0wLHc9eS5sZW5ndGg7eDx3O3grKyltPXlbeF0sbi50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCx4LGcsZyx2LG0pO2kuZ2VuZXJhdGVNaXBtYXBzPSExfWVsc2Ugbi50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLGcsZyx2LGQpO2kuZ2VuZXJhdGVNaXBtYXBzJiZwJiZ0LmdlbmVyYXRlTWlwbWFwKHQuVEVYVFVSRV8yRCksZS5fX3ZlcnNpb249aS52ZXJzaW9uLGkub25VcGRhdGUmJmkub25VcGRhdGUoaSl9ZnVuY3Rpb24geChlLHIsYSxzKXt2YXIgdT1vKHIudGV4dHVyZS5mb3JtYXQpLGw9byhyLnRleHR1cmUudHlwZSk7bi50ZXhJbWFnZTJEKHMsMCx1LHIud2lkdGgsci5oZWlnaHQsMCx1LGwsbnVsbCksdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixlKSx0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHQuRlJBTUVCVUZGRVIsYSxzLGkuZ2V0KHIudGV4dHVyZSkuX193ZWJnbFRleHR1cmUsMCksdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixudWxsKX1mdW5jdGlvbiB3KGUsbil7dC5iaW5kUmVuZGVyYnVmZmVyKHQuUkVOREVSQlVGRkVSLGUpLG4uZGVwdGhCdWZmZXImJiFuLnN0ZW5jaWxCdWZmZXI/KHQucmVuZGVyYnVmZmVyU3RvcmFnZSh0LlJFTkRFUkJVRkZFUix0LkRFUFRIX0NPTVBPTkVOVDE2LG4ud2lkdGgsbi5oZWlnaHQpLHQuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIodC5GUkFNRUJVRkZFUix0LkRFUFRIX0FUVEFDSE1FTlQsdC5SRU5ERVJCVUZGRVIsZSkpOm4uZGVwdGhCdWZmZXImJm4uc3RlbmNpbEJ1ZmZlcj8odC5yZW5kZXJidWZmZXJTdG9yYWdlKHQuUkVOREVSQlVGRkVSLHQuREVQVEhfU1RFTkNJTCxuLndpZHRoLG4uaGVpZ2h0KSx0LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKHQuRlJBTUVCVUZGRVIsdC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsdC5SRU5ERVJCVUZGRVIsZSkpOnQucmVuZGVyYnVmZmVyU3RvcmFnZSh0LlJFTkRFUkJVRkZFUix0LlJHQkE0LG4ud2lkdGgsbi5oZWlnaHQpLHQuYmluZFJlbmRlcmJ1ZmZlcih0LlJFTkRFUkJVRkZFUixudWxsKX1mdW5jdGlvbiBFKGUsbil7dmFyIHI9biYmbi5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZihyKXRocm93IG5ldyBFcnJvcihcIkRlcHRoIFRleHR1cmUgd2l0aCBjdWJlIHJlbmRlciB0YXJnZXRzIGlzIG5vdCBzdXBwb3J0ZWQhXCIpO2lmKHQuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsZSksIW4uZGVwdGhUZXh0dXJlfHwhbi5kZXB0aFRleHR1cmUuaXNEZXB0aFRleHR1cmUpdGhyb3cgbmV3IEVycm9yKFwicmVuZGVyVGFyZ2V0LmRlcHRoVGV4dHVyZSBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIFRIUkVFLkRlcHRoVGV4dHVyZVwiKTtpLmdldChuLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmUmJm4uZGVwdGhUZXh0dXJlLmltYWdlLndpZHRoPT09bi53aWR0aCYmbi5kZXB0aFRleHR1cmUuaW1hZ2UuaGVpZ2h0PT09bi5oZWlnaHR8fChuLmRlcHRoVGV4dHVyZS5pbWFnZS53aWR0aD1uLndpZHRoLG4uZGVwdGhUZXh0dXJlLmltYWdlLmhlaWdodD1uLmhlaWdodCxuLmRlcHRoVGV4dHVyZS5uZWVkc1VwZGF0ZT0hMCksdihuLmRlcHRoVGV4dHVyZSwwKTt2YXIgbz1pLmdldChuLmRlcHRoVGV4dHVyZSkuX193ZWJnbFRleHR1cmU7aWYobi5kZXB0aFRleHR1cmUuZm9ybWF0PT09Z3IpdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh0LkZSQU1FQlVGRkVSLHQuREVQVEhfQVRUQUNITUVOVCx0LlRFWFRVUkVfMkQsbywwKTtlbHNle2lmKG4uZGVwdGhUZXh0dXJlLmZvcm1hdCE9PXZyKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gZGVwdGhUZXh0dXJlIGZvcm1hdFwiKTt0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHQuRlJBTUVCVUZGRVIsdC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsdC5URVhUVVJFXzJELG8sMCl9fWZ1bmN0aW9uIFMoZSl7dmFyIG49aS5nZXQoZSkscj1lLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlPT09ITA7aWYoZS5kZXB0aFRleHR1cmUpe2lmKHIpdGhyb3cgbmV3IEVycm9yKFwidGFyZ2V0LmRlcHRoVGV4dHVyZSBub3Qgc3VwcG9ydGVkIGluIEN1YmUgcmVuZGVyIHRhcmdldHNcIik7RShuLl9fd2ViZ2xGcmFtZWJ1ZmZlcixlKX1lbHNlIGlmKHIpe24uX193ZWJnbERlcHRoYnVmZmVyPVtdO2Zvcih2YXIgbz0wO288NjtvKyspdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixuLl9fd2ViZ2xGcmFtZWJ1ZmZlcltvXSksbi5fX3dlYmdsRGVwdGhidWZmZXJbb109dC5jcmVhdGVSZW5kZXJidWZmZXIoKSx3KG4uX193ZWJnbERlcHRoYnVmZmVyW29dLGUpfWVsc2UgdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixuLl9fd2ViZ2xGcmFtZWJ1ZmZlciksbi5fX3dlYmdsRGVwdGhidWZmZXI9dC5jcmVhdGVSZW5kZXJidWZmZXIoKSx3KG4uX193ZWJnbERlcHRoYnVmZmVyLGUpO3QuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsbnVsbCl9ZnVuY3Rpb24gTShlKXt2YXIgcj1pLmdldChlKSxvPWkuZ2V0KGUudGV4dHVyZSk7ZS5hZGRFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLGQpLG8uX193ZWJnbFRleHR1cmU9dC5jcmVhdGVUZXh0dXJlKCksYS50ZXh0dXJlcysrO3ZhciBzPWUuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU9PT0hMCxsPXUoZSk7aWYocyl7ci5fX3dlYmdsRnJhbWVidWZmZXI9W107Zm9yKHZhciBjPTA7Yzw2O2MrKylyLl9fd2ViZ2xGcmFtZWJ1ZmZlcltjXT10LmNyZWF0ZUZyYW1lYnVmZmVyKCl9ZWxzZSByLl9fd2ViZ2xGcmFtZWJ1ZmZlcj10LmNyZWF0ZUZyYW1lYnVmZmVyKCk7aWYocyl7bi5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfQ1VCRV9NQVAsby5fX3dlYmdsVGV4dHVyZSksXyh0LlRFWFRVUkVfQ1VCRV9NQVAsZS50ZXh0dXJlLGwpO2Zvcih2YXIgYz0wO2M8NjtjKyspeChyLl9fd2ViZ2xGcmFtZWJ1ZmZlcltjXSxlLHQuQ09MT1JfQVRUQUNITUVOVDAsdC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grYyk7ZS50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyYmbCYmdC5nZW5lcmF0ZU1pcG1hcCh0LlRFWFRVUkVfQ1VCRV9NQVApLG4uYmluZFRleHR1cmUodC5URVhUVVJFX0NVQkVfTUFQLG51bGwpfWVsc2Ugbi5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsby5fX3dlYmdsVGV4dHVyZSksXyh0LlRFWFRVUkVfMkQsZS50ZXh0dXJlLGwpLHgoci5fX3dlYmdsRnJhbWVidWZmZXIsZSx0LkNPTE9SX0FUVEFDSE1FTlQwLHQuVEVYVFVSRV8yRCksZS50ZXh0dXJlLmdlbmVyYXRlTWlwbWFwcyYmbCYmdC5nZW5lcmF0ZU1pcG1hcCh0LlRFWFRVUkVfMkQpLG4uYmluZFRleHR1cmUodC5URVhUVVJFXzJELG51bGwpO2UuZGVwdGhCdWZmZXImJlMoZSl9ZnVuY3Rpb24gQyhlKXt2YXIgcj1lLnRleHR1cmU7aWYoci5nZW5lcmF0ZU1pcG1hcHMmJnUoZSkmJnIubWluRmlsdGVyIT09SGkmJnIubWluRmlsdGVyIT09V2kpe3ZhciBvPWUmJmUuaXNXZWJHTFJlbmRlclRhcmdldEN1YmU/dC5URVhUVVJFX0NVQkVfTUFQOnQuVEVYVFVSRV8yRCxhPWkuZ2V0KHIpLl9fd2ViZ2xUZXh0dXJlO24uYmluZFRleHR1cmUobyxhKSx0LmdlbmVyYXRlTWlwbWFwKG8pLG4uYmluZFRleHR1cmUobyxudWxsKX19dmFyIEk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQmJnQgaW5zdGFuY2VvZiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O3RoaXMuc2V0VGV4dHVyZTJEPXYsdGhpcy5zZXRUZXh0dXJlQ3ViZT1tLHRoaXMuc2V0VGV4dHVyZUN1YmVEeW5hbWljPXksdGhpcy5zZXR1cFJlbmRlclRhcmdldD1NLHRoaXMudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwPUN9ZnVuY3Rpb24gcmUoKXtmdW5jdGlvbiB0KHQpe3ZhciBlPXQudXVpZCxuPWlbZV07cmV0dXJuIHZvaWQgMD09PW4mJihuPXt9LGlbZV09biksbn1mdW5jdGlvbiBlKHQpe2RlbGV0ZSBpW3QudXVpZF19ZnVuY3Rpb24gbigpe2k9e319dmFyIGk9e307cmV0dXJue2dldDp0LHJlbW92ZTplLGNsZWFyOm59fWZ1bmN0aW9uIG9lKHQsZSxuKXtmdW5jdGlvbiBpKCl7dmFyIGU9ITEsbj1uZXcgSCxpPW51bGwscj1uZXcgSDtyZXR1cm57c2V0TWFzazpmdW5jdGlvbihuKXtpPT09bnx8ZXx8KHQuY29sb3JNYXNrKG4sbixuLG4pLGk9bil9LHNldExvY2tlZDpmdW5jdGlvbih0KXtlPXR9LHNldENsZWFyOmZ1bmN0aW9uKGUsaSxvLGEscyl7cz09PSEwJiYoZSo9YSxpKj1hLG8qPWEpLG4uc2V0KGUsaSxvLGEpLHIuZXF1YWxzKG4pPT09ITEmJih0LmNsZWFyQ29sb3IoZSxpLG8sYSksci5jb3B5KG4pKX0scmVzZXQ6ZnVuY3Rpb24oKXtlPSExLGk9bnVsbCxyLnNldCgwLDAsMCwxKX19fWZ1bmN0aW9uIHIoKXt2YXIgZT0hMSxuPW51bGwsaT1udWxsLHI9bnVsbDtyZXR1cm57c2V0VGVzdDpmdW5jdGlvbihlKXtlP2YodC5ERVBUSF9URVNUKTpkKHQuREVQVEhfVEVTVCl9LHNldE1hc2s6ZnVuY3Rpb24oaSl7bj09PWl8fGV8fCh0LmRlcHRoTWFzayhpKSxuPWkpfSxzZXRGdW5jOmZ1bmN0aW9uKGUpe2lmKGkhPT1lKXtpZihlKXN3aXRjaChlKXtjYXNlIHlpOnQuZGVwdGhGdW5jKHQuTkVWRVIpO2JyZWFrO2Nhc2UgX2k6dC5kZXB0aEZ1bmModC5BTFdBWVMpO2JyZWFrO2Nhc2UgYmk6dC5kZXB0aEZ1bmModC5MRVNTKTticmVhaztjYXNlIHhpOnQuZGVwdGhGdW5jKHQuTEVRVUFMKTticmVhaztjYXNlIHdpOnQuZGVwdGhGdW5jKHQuRVFVQUwpO2JyZWFrO2Nhc2UgRWk6dC5kZXB0aEZ1bmModC5HRVFVQUwpO2JyZWFrO2Nhc2UgU2k6dC5kZXB0aEZ1bmModC5HUkVBVEVSKTticmVhaztjYXNlIE1pOnQuZGVwdGhGdW5jKHQuTk9URVFVQUwpO2JyZWFrO2RlZmF1bHQ6dC5kZXB0aEZ1bmModC5MRVFVQUwpfWVsc2UgdC5kZXB0aEZ1bmModC5MRVFVQUwpO2k9ZX19LHNldExvY2tlZDpmdW5jdGlvbih0KXtlPXR9LHNldENsZWFyOmZ1bmN0aW9uKGUpe3IhPT1lJiYodC5jbGVhckRlcHRoKGUpLHI9ZSl9LHJlc2V0OmZ1bmN0aW9uKCl7ZT0hMSxuPW51bGwsaT1udWxsLHI9bnVsbH19fWZ1bmN0aW9uIG8oKXt2YXIgZT0hMSxuPW51bGwsaT1udWxsLHI9bnVsbCxvPW51bGwsYT1udWxsLHM9bnVsbCx1PW51bGwsbD1udWxsO3JldHVybntzZXRUZXN0OmZ1bmN0aW9uKGUpe2U/Zih0LlNURU5DSUxfVEVTVCk6ZCh0LlNURU5DSUxfVEVTVCl9LHNldE1hc2s6ZnVuY3Rpb24oaSl7bj09PWl8fGV8fCh0LnN0ZW5jaWxNYXNrKGkpLG49aSl9LHNldEZ1bmM6ZnVuY3Rpb24oZSxuLGEpe2k9PT1lJiZyPT09biYmbz09PWF8fCh0LnN0ZW5jaWxGdW5jKGUsbixhKSxpPWUscj1uLG89YSl9LHNldE9wOmZ1bmN0aW9uKGUsbixpKXthPT09ZSYmcz09PW4mJnU9PT1pfHwodC5zdGVuY2lsT3AoZSxuLGkpLGE9ZSxzPW4sdT1pKX0sc2V0TG9ja2VkOmZ1bmN0aW9uKHQpe2U9dH0sc2V0Q2xlYXI6ZnVuY3Rpb24oZSl7bCE9PWUmJih0LmNsZWFyU3RlbmNpbChlKSxsPWUpfSxyZXNldDpmdW5jdGlvbigpe2U9ITEsbj1udWxsLGk9bnVsbCxyPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGwsdT1udWxsLGw9bnVsbH19fWZ1bmN0aW9uIGEoZSxuLGkpe3ZhciByPW5ldyBVaW50OEFycmF5KDQpLG89dC5jcmVhdGVUZXh0dXJlKCk7dC5iaW5kVGV4dHVyZShlLG8pLHQudGV4UGFyYW1ldGVyaShlLHQuVEVYVFVSRV9NSU5fRklMVEVSLHQuTkVBUkVTVCksdC50ZXhQYXJhbWV0ZXJpKGUsdC5URVhUVVJFX01BR19GSUxURVIsdC5ORUFSRVNUKTtmb3IodmFyIGE9MDthPGk7YSsrKXQudGV4SW1hZ2UyRChuK2EsMCx0LlJHQkEsMSwxLDAsdC5SR0JBLHQuVU5TSUdORURfQllURSxyKTtyZXR1cm4gb31mdW5jdGlvbiBzKCl7UC5zZXRDbGVhcigwLDAsMCwxKSxBLnNldENsZWFyKDEpLEwuc2V0Q2xlYXIoMCksZih0LkRFUFRIX1RFU1QpLEEuc2V0RnVuYyh4aSksbSghMSkseShrbiksZih0LkNVTExfRkFDRSksZih0LkJMRU5EKSxnKEtuKX1mdW5jdGlvbiB1KCl7Zm9yKHZhciB0PTAsZT1rLmxlbmd0aDt0PGU7dCsrKWtbdF09MH1mdW5jdGlvbiBsKG4pe2lmKGtbbl09MSwwPT09UltuXSYmKHQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobiksUltuXT0xKSwwIT09RFtuXSl7dmFyIGk9ZS5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO2kudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKG4sMCksRFtuXT0wfX1mdW5jdGlvbiBjKG4saSl7aWYoa1tuXT0xLDA9PT1SW25dJiYodC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShuKSxSW25dPTEpLERbbl0hPT1pKXt2YXIgcj1lLmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7ci52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUobixpKSxEW25dPWl9fWZ1bmN0aW9uIGgoKXtmb3IodmFyIGU9MCxuPVIubGVuZ3RoO2UhPT1uOysrZSlSW2VdIT09a1tlXSYmKHQuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLFJbZV09MCl9ZnVuY3Rpb24gZihlKXtGW2VdIT09ITAmJih0LmVuYWJsZShlKSxGW2VdPSEwKX1mdW5jdGlvbiBkKGUpe0ZbZV0hPT0hMSYmKHQuZGlzYWJsZShlKSxGW2VdPSExKX1mdW5jdGlvbiBwKCl7aWYobnVsbD09PUImJihCPVtdLGUuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfHxlLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHxlLmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpKSlmb3IodmFyIG49dC5nZXRQYXJhbWV0ZXIodC5DT01QUkVTU0VEX1RFWFRVUkVfRk9STUFUUyksaT0wO2k8bi5sZW5ndGg7aSsrKUIucHVzaChuW2ldKTtyZXR1cm4gQn1mdW5jdGlvbiBnKGUsaSxyLG8sYSxzLHUsbCl7ZSE9PUpuP2YodC5CTEVORCk6ZCh0LkJMRU5EKSxlPT09aiYmbD09PVl8fChlPT09UW4/bD8odC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUodC5GVU5DX0FERCx0LkZVTkNfQUREKSx0LmJsZW5kRnVuY1NlcGFyYXRlKHQuT05FLHQuT05FLHQuT05FLHQuT05FKSk6KHQuYmxlbmRFcXVhdGlvbih0LkZVTkNfQUREKSx0LmJsZW5kRnVuYyh0LlNSQ19BTFBIQSx0Lk9ORSkpOmU9PT0kbj9sPyh0LmJsZW5kRXF1YXRpb25TZXBhcmF0ZSh0LkZVTkNfQURELHQuRlVOQ19BREQpLHQuYmxlbmRGdW5jU2VwYXJhdGUodC5aRVJPLHQuWkVSTyx0Lk9ORV9NSU5VU19TUkNfQ09MT1IsdC5PTkVfTUlOVVNfU1JDX0FMUEhBKSk6KHQuYmxlbmRFcXVhdGlvbih0LkZVTkNfQUREKSx0LmJsZW5kRnVuYyh0LlpFUk8sdC5PTkVfTUlOVVNfU1JDX0NPTE9SKSk6ZT09PXRpP2w/KHQuYmxlbmRFcXVhdGlvblNlcGFyYXRlKHQuRlVOQ19BREQsdC5GVU5DX0FERCksdC5ibGVuZEZ1bmNTZXBhcmF0ZSh0LlpFUk8sdC5TUkNfQ09MT1IsdC5aRVJPLHQuU1JDX0FMUEhBKSk6KHQuYmxlbmRFcXVhdGlvbih0LkZVTkNfQUREKSx0LmJsZW5kRnVuYyh0LlpFUk8sdC5TUkNfQ09MT1IpKTpsPyh0LmJsZW5kRXF1YXRpb25TZXBhcmF0ZSh0LkZVTkNfQURELHQuRlVOQ19BREQpLHQuYmxlbmRGdW5jU2VwYXJhdGUodC5PTkUsdC5PTkVfTUlOVVNfU1JDX0FMUEhBLHQuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQSkpOih0LmJsZW5kRXF1YXRpb25TZXBhcmF0ZSh0LkZVTkNfQURELHQuRlVOQ19BREQpLHQuYmxlbmRGdW5jU2VwYXJhdGUodC5TUkNfQUxQSEEsdC5PTkVfTUlOVVNfU1JDX0FMUEhBLHQuT05FLHQuT05FX01JTlVTX1NSQ19BTFBIQSkpLGo9ZSxZPWwpLGU9PT1laT8oYT1hfHxpLHM9c3x8cix1PXV8fG8saT09PVUmJmE9PT1WfHwodC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUobihpKSxuKGEpKSxVPWksVj1hKSxyPT09eiYmbz09PUcmJnM9PT1YJiZ1PT09cXx8KHQuYmxlbmRGdW5jU2VwYXJhdGUobihyKSxuKG8pLG4ocyksbih1KSksej1yLEc9byxYPXMscT11KSk6KFU9bnVsbCx6PW51bGwsRz1udWxsLFY9bnVsbCxYPW51bGwscT1udWxsKX1mdW5jdGlvbiB2KGUpe2Uuc2lkZT09PVhuP2QodC5DVUxMX0ZBQ0UpOmYodC5DVUxMX0ZBQ0UpLG0oZS5zaWRlPT09Vm4pLGUudHJhbnNwYXJlbnQ9PT0hMD9nKGUuYmxlbmRpbmcsZS5ibGVuZEVxdWF0aW9uLGUuYmxlbmRTcmMsZS5ibGVuZERzdCxlLmJsZW5kRXF1YXRpb25BbHBoYSxlLmJsZW5kU3JjQWxwaGEsZS5ibGVuZERzdEFscGhhLGUucHJlbXVsdGlwbGllZEFscGhhKTpnKEpuKSxBLnNldEZ1bmMoZS5kZXB0aEZ1bmMpLEEuc2V0VGVzdChlLmRlcHRoVGVzdCksQS5zZXRNYXNrKGUuZGVwdGhXcml0ZSksUC5zZXRNYXNrKGUuY29sb3JXcml0ZSksYihlLnBvbHlnb25PZmZzZXQsZS5wb2x5Z29uT2Zmc2V0RmFjdG9yLGUucG9seWdvbk9mZnNldFVuaXRzKX1mdW5jdGlvbiBtKGUpe1chPT1lJiYoZT90LmZyb250RmFjZSh0LkNXKTp0LmZyb250RmFjZSh0LkNDVyksVz1lKX1mdW5jdGlvbiB5KGUpe2UhPT1Obj8oZih0LkNVTExfRkFDRSksZSE9PVomJihlPT09a24/dC5jdWxsRmFjZSh0LkJBQ0spOmU9PT1Sbj90LmN1bGxGYWNlKHQuRlJPTlQpOnQuY3VsbEZhY2UodC5GUk9OVF9BTkRfQkFDSykpKTpkKHQuQ1VMTF9GQUNFKSxaPWV9ZnVuY3Rpb24gXyhlKXtlIT09SiYmKG50JiZ0LmxpbmVXaWR0aChlKSxKPWUpfWZ1bmN0aW9uIGIoZSxuLGkpe2U/KGYodC5QT0xZR09OX09GRlNFVF9GSUxMKSxLPT09biYmUT09PWl8fCh0LnBvbHlnb25PZmZzZXQobixpKSxLPW4sUT1pKSk6ZCh0LlBPTFlHT05fT0ZGU0VUX0ZJTEwpfWZ1bmN0aW9uIHgoKXtyZXR1cm4gJH1mdW5jdGlvbiB3KGUpeyQ9ZSxlP2YodC5TQ0lTU09SX1RFU1QpOmQodC5TQ0lTU09SX1RFU1QpfWZ1bmN0aW9uIEUoZSl7dm9pZCAwPT09ZSYmKGU9dC5URVhUVVJFMCt0dC0xKSxpdCE9PWUmJih0LmFjdGl2ZVRleHR1cmUoZSksaXQ9ZSl9ZnVuY3Rpb24gUyhlLG4pe251bGw9PT1pdCYmRSgpO3ZhciBpPXJ0W2l0XTt2b2lkIDA9PT1pJiYoaT17dHlwZTp2b2lkIDAsdGV4dHVyZTp2b2lkIDB9LHJ0W2l0XT1pKSxpLnR5cGU9PT1lJiZpLnRleHR1cmU9PT1ufHwodC5iaW5kVGV4dHVyZShlLG58fHN0W2VdKSxpLnR5cGU9ZSxpLnRleHR1cmU9bil9ZnVuY3Rpb24gTSgpe3RyeXt0LmNvbXByZXNzZWRUZXhJbWFnZTJELmFwcGx5KHQsYXJndW1lbnRzKX1jYXRjaCh0KXtjb25zb2xlLmVycm9yKHQpfX1mdW5jdGlvbiBDKCl7dHJ5e3QudGV4SW1hZ2UyRC5hcHBseSh0LGFyZ3VtZW50cyl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcih0KX19ZnVuY3Rpb24gSShlKXtvdC5lcXVhbHMoZSk9PT0hMSYmKHQuc2Npc3NvcihlLngsZS55LGUueixlLncpLG90LmNvcHkoZSkpfWZ1bmN0aW9uIE8oZSl7YXQuZXF1YWxzKGUpPT09ITEmJih0LnZpZXdwb3J0KGUueCxlLnksZS56LGUudyksYXQuY29weShlKSl9ZnVuY3Rpb24gVCgpe2Zvcih2YXIgZT0wO2U8Ui5sZW5ndGg7ZSsrKTE9PT1SW2VdJiYodC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZSksUltlXT0wKTtGPXt9LEI9bnVsbCxpdD1udWxsLHJ0PXt9LGo9bnVsbCxXPW51bGwsWj1udWxsLFAucmVzZXQoKSxBLnJlc2V0KCksTC5yZXNldCgpfXZhciBQPW5ldyBpLEE9bmV3IHIsTD1uZXcgbyxOPXQuZ2V0UGFyYW1ldGVyKHQuTUFYX1ZFUlRFWF9BVFRSSUJTKSxrPW5ldyBVaW50OEFycmF5KE4pLFI9bmV3IFVpbnQ4QXJyYXkoTiksRD1uZXcgVWludDhBcnJheShOKSxGPXt9LEI9bnVsbCxqPW51bGwsVT1udWxsLHo9bnVsbCxHPW51bGwsVj1udWxsLFg9bnVsbCxxPW51bGwsWT0hMSxXPW51bGwsWj1udWxsLEo9bnVsbCxLPW51bGwsUT1udWxsLCQ9bnVsbCx0dD10LmdldFBhcmFtZXRlcih0Lk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxldD1wYXJzZUZsb2F0KC9eV2ViR0xcXCAoWzAtOV0pLy5leGVjKHQuZ2V0UGFyYW1ldGVyKHQuVkVSU0lPTikpWzFdKSxudD1wYXJzZUZsb2F0KGV0KT49MSxpdD1udWxsLHJ0PXt9LG90PW5ldyBILGF0PW5ldyBILHN0PXt9O3JldHVybiBzdFt0LlRFWFRVUkVfMkRdPWEodC5URVhUVVJFXzJELHQuVEVYVFVSRV8yRCwxKSxzdFt0LlRFWFRVUkVfQ1VCRV9NQVBdPWEodC5URVhUVVJFX0NVQkVfTUFQLHQuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YLDYpLHtidWZmZXJzOntjb2xvcjpQLGRlcHRoOkEsc3RlbmNpbDpMfSxpbml0OnMsaW5pdEF0dHJpYnV0ZXM6dSxlbmFibGVBdHRyaWJ1dGU6bCxlbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yOmMsZGlzYWJsZVVudXNlZEF0dHJpYnV0ZXM6aCxlbmFibGU6ZixkaXNhYmxlOmQsZ2V0Q29tcHJlc3NlZFRleHR1cmVGb3JtYXRzOnAsc2V0QmxlbmRpbmc6ZyxzZXRNYXRlcmlhbDp2LHNldEZsaXBTaWRlZDptLHNldEN1bGxGYWNlOnksc2V0TGluZVdpZHRoOl8sc2V0UG9seWdvbk9mZnNldDpiLGdldFNjaXNzb3JUZXN0Ongsc2V0U2Npc3NvclRlc3Q6dyxhY3RpdmVUZXh0dXJlOkUsYmluZFRleHR1cmU6Uyxjb21wcmVzc2VkVGV4SW1hZ2UyRDpNLHRleEltYWdlMkQ6QyxzY2lzc29yOkksdmlld3BvcnQ6TyxyZXNldDpUfX1mdW5jdGlvbiBhZSh0LGUsbil7ZnVuY3Rpb24gaSgpe2lmKHZvaWQgMCE9PW8pcmV0dXJuIG87dmFyIG49ZS5nZXQoXCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7cmV0dXJuIG89bnVsbCE9PW4/dC5nZXRQYXJhbWV0ZXIobi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpOjB9ZnVuY3Rpb24gcihlKXtpZihcImhpZ2hwXCI9PT1lKXtpZih0LmdldFNoYWRlclByZWNpc2lvbkZvcm1hdCh0LlZFUlRFWF9TSEFERVIsdC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24+MCYmdC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQodC5GUkFHTUVOVF9TSEFERVIsdC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24+MClyZXR1cm5cImhpZ2hwXCI7ZT1cIm1lZGl1bXBcIn1yZXR1cm5cIm1lZGl1bXBcIj09PWUmJnQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KHQuVkVSVEVYX1NIQURFUix0Lk1FRElVTV9GTE9BVCkucHJlY2lzaW9uPjAmJnQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KHQuRlJBR01FTlRfU0hBREVSLHQuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24+MD9cIm1lZGl1bXBcIjpcImxvd3BcIn12YXIgbyxhPXZvaWQgMCE9PW4ucHJlY2lzaW9uP24ucHJlY2lzaW9uOlwiaGlnaHBcIixzPXIoYSk7cyE9PWEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5XZWJHTFJlbmRlcmVyOlwiLGEsXCJub3Qgc3VwcG9ydGVkLCB1c2luZ1wiLHMsXCJpbnN0ZWFkLlwiKSxhPXMpO3ZhciB1PW4ubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcj09PSEwJiYhIWUuZ2V0KFwiRVhUX2ZyYWdfZGVwdGhcIiksbD10LmdldFBhcmFtZXRlcih0Lk1BWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxjPXQuZ2V0UGFyYW1ldGVyKHQuTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKSxoPXQuZ2V0UGFyYW1ldGVyKHQuTUFYX1RFWFRVUkVfU0laRSksZj10LmdldFBhcmFtZXRlcih0Lk1BWF9DVUJFX01BUF9URVhUVVJFX1NJWkUpLGQ9dC5nZXRQYXJhbWV0ZXIodC5NQVhfVkVSVEVYX0FUVFJJQlMpLHA9dC5nZXRQYXJhbWV0ZXIodC5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyksZz10LmdldFBhcmFtZXRlcih0Lk1BWF9WQVJZSU5HX1ZFQ1RPUlMpLHY9dC5nZXRQYXJhbWV0ZXIodC5NQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTKSxtPWM+MCx5PSEhZS5nZXQoXCJPRVNfdGV4dHVyZV9mbG9hdFwiKSxfPW0mJnk7cmV0dXJue2dldE1heEFuaXNvdHJvcHk6aSxnZXRNYXhQcmVjaXNpb246cixwcmVjaXNpb246YSxsb2dhcml0aG1pY0RlcHRoQnVmZmVyOnUsbWF4VGV4dHVyZXM6bCxtYXhWZXJ0ZXhUZXh0dXJlczpjLG1heFRleHR1cmVTaXplOmgsbWF4Q3ViZW1hcFNpemU6ZixtYXhBdHRyaWJ1dGVzOmQsbWF4VmVydGV4VW5pZm9ybXM6cCxtYXhWYXJ5aW5nczpnLG1heEZyYWdtZW50VW5pZm9ybXM6dix2ZXJ0ZXhUZXh0dXJlczptLGZsb2F0RnJhZ21lbnRUZXh0dXJlczp5LGZsb2F0VmVydGV4VGV4dHVyZXM6X319ZnVuY3Rpb24gc2UodCl7dmFyIGU9e307cmV0dXJue2dldDpmdW5jdGlvbihuKXtpZih2b2lkIDAhPT1lW25dKXJldHVybiBlW25dO3ZhciBpO3N3aXRjaChuKXtjYXNlXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCI6aT10LmdldEV4dGVuc2lvbihcIldFQkdMX2RlcHRoX3RleHR1cmVcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2RlcHRoX3RleHR1cmVcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2RlcHRoX3RleHR1cmVcIik7YnJlYWs7Y2FzZVwiRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCI6aT10LmdldEV4dGVuc2lvbihcIkVYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpY1wiKXx8dC5nZXRFeHRlbnNpb24oXCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXCIpfHx0LmdldEV4dGVuc2lvbihcIldFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcIik7YnJlYWs7Y2FzZVwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIjppPXQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIil8fHQuZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpfHx0LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKTticmVhaztjYXNlXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIjppPXQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpfHx0LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGNcIik7YnJlYWs7Y2FzZVwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIjppPXQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzFcIik7YnJlYWs7ZGVmYXVsdDppPXQuZ2V0RXh0ZW5zaW9uKG4pfXJldHVybiBudWxsPT09aSYmY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlcjogXCIrbitcIiBleHRlbnNpb24gbm90IHN1cHBvcnRlZC5cIiksZVtuXT1pLGl9fX1mdW5jdGlvbiB1ZSgpe2Z1bmN0aW9uIHQoKXtsLnZhbHVlIT09aSYmKGwudmFsdWU9aSxsLm5lZWRzVXBkYXRlPXI+MCksbi5udW1QbGFuZXM9cixuLm51bUludGVyc2VjdGlvbj0wfWZ1bmN0aW9uIGUodCxlLGkscil7dmFyIG89bnVsbCE9PXQ/dC5sZW5ndGg6MCxhPW51bGw7aWYoMCE9PW8pe2lmKGE9bC52YWx1ZSxyIT09ITB8fG51bGw9PT1hKXt2YXIgYz1pKzQqbyxoPWUubWF0cml4V29ybGRJbnZlcnNlO3UuZ2V0Tm9ybWFsTWF0cml4KGgpLChudWxsPT09YXx8YS5sZW5ndGg8YykmJihhPW5ldyBGbG9hdDMyQXJyYXkoYykpO2Zvcih2YXIgZj0wLGQ9aTtmIT09bzsrK2YsZCs9NClzLmNvcHkodFtmXSkuYXBwbHlNYXRyaXg0KGgsdSkscy5ub3JtYWwudG9BcnJheShhLGQpLGFbZCszXT1zLmNvbnN0YW50fWwudmFsdWU9YSxsLm5lZWRzVXBkYXRlPSEwfXJldHVybiBuLm51bVBsYW5lcz1vLGF9dmFyIG49dGhpcyxpPW51bGwscj0wLG89ITEsYT0hMSxzPW5ldyB0dCx1PW5ldyAkLGw9e3ZhbHVlOm51bGwsbmVlZHNVcGRhdGU6ITF9O3RoaXMudW5pZm9ybT1sLHRoaXMubnVtUGxhbmVzPTAsdGhpcy5udW1JbnRlcnNlY3Rpb249MCx0aGlzLmluaXQ9ZnVuY3Rpb24odCxuLGEpe3ZhciBzPTAhPT10Lmxlbmd0aHx8bnx8MCE9PXJ8fG87cmV0dXJuIG89bixpPWUodCxhLDApLHI9dC5sZW5ndGgsc30sdGhpcy5iZWdpblNoYWRvd3M9ZnVuY3Rpb24oKXthPSEwLGUobnVsbCl9LHRoaXMuZW5kU2hhZG93cz1mdW5jdGlvbigpe2E9ITEsdCgpfSx0aGlzLnNldFN0YXRlPWZ1bmN0aW9uKG4scyx1LGMsaCxmKXtpZighb3x8bnVsbD09PW58fDA9PT1uLmxlbmd0aHx8YSYmIXUpYT9lKG51bGwpOnQoKTtlbHNle3ZhciBkPWE/MDpyLHA9NCpkLGc9aC5jbGlwcGluZ1N0YXRlfHxudWxsO2wudmFsdWU9ZyxnPWUobixjLHAsZik7Zm9yKHZhciB2PTA7diE9PXA7Kyt2KWdbdl09aVt2XTtoLmNsaXBwaW5nU3RhdGU9Zyx0aGlzLm51bUludGVyc2VjdGlvbj1zP3RoaXMubnVtUGxhbmVzOjAsdGhpcy5udW1QbGFuZXMrPWR9fX1mdW5jdGlvbiBsZSh0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGw9PT10dD92dDoxfWZ1bmN0aW9uIHIoKXtXdC5pbml0KCksV3Quc2Npc3NvcihzdC5jb3B5KG10KS5tdWx0aXBseVNjYWxhcih2dCkpLFd0LnZpZXdwb3J0KGx0LmNvcHkoX3QpLm11bHRpcGx5U2NhbGFyKHZ0KSksV3QuYnVmZmVycy5jb2xvci5zZXRDbGVhcihmdC5yLGZ0LmcsZnQuYixkdCx6KX1mdW5jdGlvbiBvKCl7JD1udWxsLGF0PW51bGwsb3Q9XCJcIixydD0tMSxXdC5yZXNldCgpfWZ1bmN0aW9uIGEodCl7dC5wcmV2ZW50RGVmYXVsdCgpLG8oKSxyKCksWnQuY2xlYXIoKSwkdC5jbGVhcigpfWZ1bmN0aW9uIHModCl7dmFyIGU9dC50YXJnZXQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlzcG9zZVwiLHMpLHUoZSl9ZnVuY3Rpb24gdSh0KXtjKHQpLFp0LnJlbW92ZSh0KX1mdW5jdGlvbiBjKHQpe3ZhciBlPVp0LmdldCh0KS5wcm9ncmFtO3QucHJvZ3JhbT12b2lkIDAsdm9pZCAwIT09ZSYmdGUucmVsZWFzZVByb2dyYW0oZSl9ZnVuY3Rpb24gaCh0LGUsbil7dC5yZW5kZXIoZnVuY3Rpb24odCl7US5yZW5kZXJCdWZmZXJJbW1lZGlhdGUodCxlLG4pfSl9ZnVuY3Rpb24gZih0LGUsbixpKXtpZihuJiZuLmlzSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkmJm51bGw9PT1xdC5nZXQoXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnNldHVwVmVydGV4QXR0cmlidXRlczogdXNpbmcgVEhSRUUuSW5zdGFuY2VkQnVmZmVyR2VvbWV0cnkgYnV0IGhhcmR3YXJlIGRvZXMgbm90IHN1cHBvcnQgZXh0ZW5zaW9uIEFOR0xFX2luc3RhbmNlZF9hcnJheXMuXCIpO3ZvaWQgMD09PWkmJihpPTApLFd0LmluaXRBdHRyaWJ1dGVzKCk7dmFyIHI9bi5hdHRyaWJ1dGVzLG89ZS5nZXRBdHRyaWJ1dGVzKCksYT10LmRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXM7Zm9yKHZhciBzIGluIG8pe3ZhciB1PW9bc107aWYodT49MCl7dmFyIGw9cltzXTtpZih2b2lkIDAhPT1sKXt2YXIgYz1sLm5vcm1hbGl6ZWQsaD1sLml0ZW1TaXplLGY9S3QuZ2V0KGwpLGQ9Zi5idWZmZXIscD1mLnR5cGUsZz1mLmJ5dGVzUGVyRWxlbWVudDtpZihsLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpe3ZhciB2PWwuZGF0YSxtPXYuc3RyaWRlLHk9bC5vZmZzZXQ7diYmdi5pc0luc3RhbmNlZEludGVybGVhdmVkQnVmZmVyPyhXdC5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHUsdi5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1uLm1heEluc3RhbmNlZENvdW50JiYobi5tYXhJbnN0YW5jZWRDb3VudD12Lm1lc2hQZXJBdHRyaWJ1dGUqdi5jb3VudCkpOld0LmVuYWJsZUF0dHJpYnV0ZSh1KSxYdC5iaW5kQnVmZmVyKFh0LkFSUkFZX0JVRkZFUixkKSxYdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHUsaCxwLGMsbSpnLChpKm0reSkqZyl9ZWxzZSBsLmlzSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlPyhXdC5lbmFibGVBdHRyaWJ1dGVBbmREaXZpc29yKHUsbC5tZXNoUGVyQXR0cmlidXRlKSx2b2lkIDA9PT1uLm1heEluc3RhbmNlZENvdW50JiYobi5tYXhJbnN0YW5jZWRDb3VudD1sLm1lc2hQZXJBdHRyaWJ1dGUqbC5jb3VudCkpOld0LmVuYWJsZUF0dHJpYnV0ZSh1KSxYdC5iaW5kQnVmZmVyKFh0LkFSUkFZX0JVRkZFUixkKSxYdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHUsaCxwLGMsMCxpKmgqZyl9ZWxzZSBpZih2b2lkIDAhPT1hKXt2YXIgXz1hW3NdO2lmKHZvaWQgMCE9PV8pc3dpdGNoKF8ubGVuZ3RoKXtjYXNlIDI6WHQudmVydGV4QXR0cmliMmZ2KHUsXyk7YnJlYWs7Y2FzZSAzOlh0LnZlcnRleEF0dHJpYjNmdih1LF8pO2JyZWFrO2Nhc2UgNDpYdC52ZXJ0ZXhBdHRyaWI0ZnYodSxfKTticmVhaztkZWZhdWx0Olh0LnZlcnRleEF0dHJpYjFmdih1LF8pfX19fVd0LmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCl9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiBNYXRoLmFicyhlWzBdKS1NYXRoLmFicyh0WzBdKX1mdW5jdGlvbiBwKHQsZSxuKXtpZih0LnZpc2libGUpe2lmKHQuaXNMaWdodClWLnB1c2godCk7ZWxzZSBpZih0LmlzU3ByaXRlKXQuZnJ1c3R1bUN1bGxlZCYmIWJ0LmludGVyc2VjdHNTcHJpdGUodCl8fEoucHVzaCh0KTtlbHNlIGlmKHQuaXNMZW5zRmxhcmUpSy5wdXNoKHQpO2Vsc2UgaWYodC5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCluJiZUdC5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KFN0KSxZLnB1c2godCxudWxsLHQubWF0ZXJpYWwsVHQueixudWxsKTtlbHNlIGlmKCh0LmlzTWVzaHx8dC5pc0xpbmV8fHQuaXNQb2ludHMpJiYodC5pc1NraW5uZWRNZXNoJiZ0LnNrZWxldG9uLnVwZGF0ZSgpLCF0LmZydXN0dW1DdWxsZWR8fGJ0LmludGVyc2VjdHNPYmplY3QodCkpKXtuJiZUdC5zZXRGcm9tTWF0cml4UG9zaXRpb24odC5tYXRyaXhXb3JsZCkuYXBwbHlNYXRyaXg0KFN0KTt2YXIgaT0kdC51cGRhdGUodCkscj10Lm1hdGVyaWFsO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBvPWkuZ3JvdXBzLGE9MCxzPW8ubGVuZ3RoO2E8czthKyspe3ZhciB1PW9bYV0sbD1yW3UubWF0ZXJpYWxJbmRleF07bCYmbC52aXNpYmxlJiZZLnB1c2godCxpLGwsVHQueix1KX1lbHNlIHIudmlzaWJsZSYmWS5wdXNoKHQsaSxyLFR0LnosbnVsbCl9Zm9yKHZhciBjPXQuY2hpbGRyZW4sYT0wLHM9Yy5sZW5ndGg7YTxzO2ErKylwKGNbYV0sZSxuKX19ZnVuY3Rpb24gZyh0LGUsbixpKXtmb3IodmFyIHI9MCxvPXQubGVuZ3RoO3I8bztyKyspe3ZhciBhPXRbcl0scz1hLm9iamVjdCx1PWEuZ2VvbWV0cnksbD12b2lkIDA9PT1pP2EubWF0ZXJpYWw6aSxjPWEuZ3JvdXA7aWYocy5vbkJlZm9yZVJlbmRlcihRLGUsbix1LGwsYyksbi5pc0FycmF5Q2FtZXJhJiZuLmVuYWJsZWQpZm9yKHZhciBoPW4uY2FtZXJhcyxmPTAsZD1oLmxlbmd0aDtmPGQ7ZisrKXt2YXIgcD1oW2ZdLGc9cC5ib3VuZHM7US5zZXRWaWV3cG9ydChnLngqcHQqdnQsZy55Kmd0KnZ0LGcueipwdCp2dCxnLncqZ3QqdnQpLFEuc2V0U2Npc3NvcihnLngqcHQqdnQsZy55Kmd0KnZ0LGcueipwdCp2dCxnLncqZ3QqdnQpLFEuc2V0U2Npc3NvclRlc3QoITApLHYocyxlLHAsdSxsLGMpfWVsc2UgdihzLGUsbix1LGwsYyk7cy5vbkFmdGVyUmVuZGVyKFEsZSxuLHUsbCxjKX19ZnVuY3Rpb24gdih0LGUsbixpLHIsbyl7aWYodC5sYXllcnMudGVzdChuLmxheWVycykhPT0hMSlpZih0Lm1vZGVsVmlld01hdHJpeC5tdWx0aXBseU1hdHJpY2VzKG4ubWF0cml4V29ybGRJbnZlcnNlLHQubWF0cml4V29ybGQpLHQubm9ybWFsTWF0cml4LmdldE5vcm1hbE1hdHJpeCh0Lm1vZGVsVmlld01hdHJpeCksdC5pc0ltbWVkaWF0ZVJlbmRlck9iamVjdCl7V3Quc2V0TWF0ZXJpYWwocik7dmFyIGE9eShuLGUuZm9nLHIsdCk7b3Q9XCJcIixoKHQsYSxyKX1lbHNlIFEucmVuZGVyQnVmZmVyRGlyZWN0KG4sZS5mb2csaSxyLHQsbyl9ZnVuY3Rpb24gbSh0LGUsbil7dmFyIGk9WnQuZ2V0KHQpLHI9dGUuZ2V0UGFyYW1ldGVycyh0LFJ0LGUseHQubnVtUGxhbmVzLHh0Lm51bUludGVyc2VjdGlvbixuKSxvPXRlLmdldFByb2dyYW1Db2RlKHQsciksYT1pLnByb2dyYW0sdT0hMDtpZih2b2lkIDA9PT1hKXQuYWRkRXZlbnRMaXN0ZW5lcihcImRpc3Bvc2VcIixzKTtlbHNlIGlmKGEuY29kZSE9PW8pYyh0KTtlbHNle2lmKHZvaWQgMCE9PXIuc2hhZGVySUQpcmV0dXJuO3U9ITF9aWYodSl7aWYoci5zaGFkZXJJRCl7dmFyIGw9Y3Nbci5zaGFkZXJJRF07aS5fX3dlYmdsU2hhZGVyPXtuYW1lOnQudHlwZSx1bmlmb3Jtczpvby5jbG9uZShsLnVuaWZvcm1zKSx2ZXJ0ZXhTaGFkZXI6bC52ZXJ0ZXhTaGFkZXIsZnJhZ21lbnRTaGFkZXI6bC5mcmFnbWVudFNoYWRlcn19ZWxzZSBpLl9fd2ViZ2xTaGFkZXI9e25hbWU6dC50eXBlLHVuaWZvcm1zOnQudW5pZm9ybXMsdmVydGV4U2hhZGVyOnQudmVydGV4U2hhZGVyLGZyYWdtZW50U2hhZGVyOnQuZnJhZ21lbnRTaGFkZXJ9O3QuX193ZWJnbFNoYWRlcj1pLl9fd2ViZ2xTaGFkZXIsYT10ZS5hY3F1aXJlUHJvZ3JhbSh0LHIsbyksaS5wcm9ncmFtPWEsdC5wcm9ncmFtPWF9dmFyIGg9YS5nZXRBdHRyaWJ1dGVzKCk7aWYodC5tb3JwaFRhcmdldHMpe3QubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzPTA7Zm9yKHZhciBmPTA7ZjxRLm1heE1vcnBoVGFyZ2V0cztmKyspaFtcIm1vcnBoVGFyZ2V0XCIrZl0+PTAmJnQubnVtU3VwcG9ydGVkTW9ycGhUYXJnZXRzKyt9aWYodC5tb3JwaE5vcm1hbHMpe3QubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzPTA7Zm9yKHZhciBmPTA7ZjxRLm1heE1vcnBoTm9ybWFscztmKyspaFtcIm1vcnBoTm9ybWFsXCIrZl0+PTAmJnQubnVtU3VwcG9ydGVkTW9ycGhOb3JtYWxzKyt9dmFyIGQ9aS5fX3dlYmdsU2hhZGVyLnVuaWZvcm1zOyh0LmlzU2hhZGVyTWF0ZXJpYWx8fHQuaXNSYXdTaGFkZXJNYXRlcmlhbCkmJnQuY2xpcHBpbmchPT0hMHx8KGkubnVtQ2xpcHBpbmdQbGFuZXM9eHQubnVtUGxhbmVzLGkubnVtSW50ZXJzZWN0aW9uPXh0Lm51bUludGVyc2VjdGlvbixkLmNsaXBwaW5nUGxhbmVzPXh0LnVuaWZvcm0pLGkuZm9nPWUsaS5saWdodHNIYXNoPVJ0Lmhhc2gsdC5saWdodHMmJihkLmFtYmllbnRMaWdodENvbG9yLnZhbHVlPVJ0LmFtYmllbnQsZC5kaXJlY3Rpb25hbExpZ2h0cy52YWx1ZT1SdC5kaXJlY3Rpb25hbCxkLnNwb3RMaWdodHMudmFsdWU9UnQuc3BvdCxkLnJlY3RBcmVhTGlnaHRzLnZhbHVlPVJ0LnJlY3RBcmVhLGQucG9pbnRMaWdodHMudmFsdWU9UnQucG9pbnQsZC5oZW1pc3BoZXJlTGlnaHRzLnZhbHVlPVJ0LmhlbWksZC5kaXJlY3Rpb25hbFNoYWRvd01hcC52YWx1ZT1SdC5kaXJlY3Rpb25hbFNoYWRvd01hcCxkLmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LnZhbHVlPVJ0LmRpcmVjdGlvbmFsU2hhZG93TWF0cml4LGQuc3BvdFNoYWRvd01hcC52YWx1ZT1SdC5zcG90U2hhZG93TWFwLGQuc3BvdFNoYWRvd01hdHJpeC52YWx1ZT1SdC5zcG90U2hhZG93TWF0cml4LGQucG9pbnRTaGFkb3dNYXAudmFsdWU9UnQucG9pbnRTaGFkb3dNYXAsZC5wb2ludFNoYWRvd01hdHJpeC52YWx1ZT1SdC5wb2ludFNoYWRvd01hdHJpeCk7dmFyIHA9aS5wcm9ncmFtLmdldFVuaWZvcm1zKCksZz1YLnNlcVdpdGhWYWx1ZShwLnNlcSxkKTtpLnVuaWZvcm1zTGlzdD1nfWZ1bmN0aW9uIHkodCxlLG4saSl7aHQ9MDt2YXIgcj1adC5nZXQobik7aWYod3QmJihFdHx8dCE9PWF0KSl7dmFyIG89dD09PWF0JiZuLmlkPT09cnQ7eHQuc2V0U3RhdGUobi5jbGlwcGluZ1BsYW5lcyxuLmNsaXBJbnRlcnNlY3Rpb24sbi5jbGlwU2hhZG93cyx0LHIsbyl9bi5uZWVkc1VwZGF0ZT09PSExJiYodm9pZCAwPT09ci5wcm9ncmFtP24ubmVlZHNVcGRhdGU9ITA6bi5mb2cmJnIuZm9nIT09ZT9uLm5lZWRzVXBkYXRlPSEwOm4ubGlnaHRzJiZyLmxpZ2h0c0hhc2ghPT1SdC5oYXNoP24ubmVlZHNVcGRhdGU9ITA6dm9pZCAwPT09ci5udW1DbGlwcGluZ1BsYW5lc3x8ci5udW1DbGlwcGluZ1BsYW5lcz09PXh0Lm51bVBsYW5lcyYmci5udW1JbnRlcnNlY3Rpb249PT14dC5udW1JbnRlcnNlY3Rpb258fChuLm5lZWRzVXBkYXRlPSEwKSksbi5uZWVkc1VwZGF0ZSYmKG0obixlLGkpLG4ubmVlZHNVcGRhdGU9ITEpO3ZhciBhPSExLHM9ITEsdT0hMSxjPXIucHJvZ3JhbSxoPWMuZ2V0VW5pZm9ybXMoKSxmPXIuX193ZWJnbFNoYWRlci51bmlmb3JtcztpZihjLmlkIT09JCYmKFh0LnVzZVByb2dyYW0oYy5wcm9ncmFtKSwkPWMuaWQsYT0hMCxzPSEwLHU9ITApLG4uaWQhPT1ydCYmKHJ0PW4uaWQscz0hMCksYXx8dCE9PWF0KXtpZihoLnNldFZhbHVlKFh0LFwicHJvamVjdGlvbk1hdHJpeFwiLHQucHJvamVjdGlvbk1hdHJpeCksWXQubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciYmaC5zZXRWYWx1ZShYdCxcImxvZ0RlcHRoQnVmRkNcIiwyLyhNYXRoLmxvZyh0LmZhcisxKS9NYXRoLkxOMikpLFxudCE9PWF0JiYoYXQ9dCxzPSEwLHU9ITApLG4uaXNTaGFkZXJNYXRlcmlhbHx8bi5pc01lc2hQaG9uZ01hdGVyaWFsfHxuLmlzTWVzaFN0YW5kYXJkTWF0ZXJpYWx8fG4uZW52TWFwKXt2YXIgZD1oLm1hcC5jYW1lcmFQb3NpdGlvbjt2b2lkIDAhPT1kJiZkLnNldFZhbHVlKFh0LFR0LnNldEZyb21NYXRyaXhQb3NpdGlvbih0Lm1hdHJpeFdvcmxkKSl9KG4uaXNNZXNoUGhvbmdNYXRlcmlhbHx8bi5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fG4uaXNNZXNoQmFzaWNNYXRlcmlhbHx8bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxuLmlzU2hhZGVyTWF0ZXJpYWx8fG4uc2tpbm5pbmcpJiZoLnNldFZhbHVlKFh0LFwidmlld01hdHJpeFwiLHQubWF0cml4V29ybGRJbnZlcnNlKSxoLnNldFZhbHVlKFh0LFwidG9uZU1hcHBpbmdFeHBvc3VyZVwiLFEudG9uZU1hcHBpbmdFeHBvc3VyZSksaC5zZXRWYWx1ZShYdCxcInRvbmVNYXBwaW5nV2hpdGVQb2ludFwiLFEudG9uZU1hcHBpbmdXaGl0ZVBvaW50KX1pZihuLnNraW5uaW5nKXtoLnNldE9wdGlvbmFsKFh0LGksXCJiaW5kTWF0cml4XCIpLGguc2V0T3B0aW9uYWwoWHQsaSxcImJpbmRNYXRyaXhJbnZlcnNlXCIpO3ZhciBwPWkuc2tlbGV0b247aWYocCl7dmFyIGc9cC5ib25lcztpZihZdC5mbG9hdFZlcnRleFRleHR1cmVzKXtpZih2b2lkIDA9PT1wLmJvbmVUZXh0dXJlKXt2YXIgdj1NYXRoLnNxcnQoNCpnLmxlbmd0aCk7dj1Xci5uZXh0UG93ZXJPZlR3byhNYXRoLmNlaWwodikpLHY9TWF0aC5tYXgodiw0KTt2YXIgeT1uZXcgRmxvYXQzMkFycmF5KHYqdio0KTt5LnNldChwLmJvbmVNYXRyaWNlcyk7dmFyIEE9bmV3IGwoeSx2LHYsaHIsaXIpO3AuYm9uZU1hdHJpY2VzPXkscC5ib25lVGV4dHVyZT1BLHAuYm9uZVRleHR1cmVTaXplPXZ9aC5zZXRWYWx1ZShYdCxcImJvbmVUZXh0dXJlXCIscC5ib25lVGV4dHVyZSksaC5zZXRWYWx1ZShYdCxcImJvbmVUZXh0dXJlU2l6ZVwiLHAuYm9uZVRleHR1cmVTaXplKX1lbHNlIGguc2V0T3B0aW9uYWwoWHQscCxcImJvbmVNYXRyaWNlc1wiKX19cmV0dXJuIHMmJihuLmxpZ2h0cyYmUChmLHUpLGUmJm4uZm9nJiZFKGYsZSksKG4uaXNNZXNoQmFzaWNNYXRlcmlhbHx8bi5pc01lc2hMYW1iZXJ0TWF0ZXJpYWx8fG4uaXNNZXNoUGhvbmdNYXRlcmlhbHx8bi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsfHxuLmlzTWVzaE5vcm1hbE1hdGVyaWFsfHxuLmlzTWVzaERlcHRoTWF0ZXJpYWwpJiZfKGYsbiksbi5pc0xpbmVCYXNpY01hdGVyaWFsP2IoZixuKTpuLmlzTGluZURhc2hlZE1hdGVyaWFsPyhiKGYsbikseChmLG4pKTpuLmlzUG9pbnRzTWF0ZXJpYWw/dyhmLG4pOm4uaXNNZXNoTGFtYmVydE1hdGVyaWFsP1MoZixuKTpuLmlzTWVzaFRvb25NYXRlcmlhbD9DKGYsbik6bi5pc01lc2hQaG9uZ01hdGVyaWFsP00oZixuKTpuLmlzTWVzaFBoeXNpY2FsTWF0ZXJpYWw/TyhmLG4pOm4uaXNNZXNoU3RhbmRhcmRNYXRlcmlhbD9JKGYsbik6bi5pc01lc2hEZXB0aE1hdGVyaWFsP24uZGlzcGxhY2VtZW50TWFwJiYoZi5kaXNwbGFjZW1lbnRNYXAudmFsdWU9bi5kaXNwbGFjZW1lbnRNYXAsZi5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1uLmRpc3BsYWNlbWVudFNjYWxlLGYuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1uLmRpc3BsYWNlbWVudEJpYXMpOm4uaXNNZXNoTm9ybWFsTWF0ZXJpYWwmJlQoZixuKSx2b2lkIDAhPT1mLmx0Y01hdCYmKGYubHRjTWF0LnZhbHVlPXJvLkxUQ19NQVRfVEVYVFVSRSksdm9pZCAwIT09Zi5sdGNNYWcmJihmLmx0Y01hZy52YWx1ZT1yby5MVENfTUFHX1RFWFRVUkUpLFgudXBsb2FkKFh0LHIudW5pZm9ybXNMaXN0LGYsUSkpLGguc2V0VmFsdWUoWHQsXCJtb2RlbFZpZXdNYXRyaXhcIixpLm1vZGVsVmlld01hdHJpeCksaC5zZXRWYWx1ZShYdCxcIm5vcm1hbE1hdHJpeFwiLGkubm9ybWFsTWF0cml4KSxoLnNldFZhbHVlKFh0LFwibW9kZWxNYXRyaXhcIixpLm1hdHJpeFdvcmxkKSxjfWZ1bmN0aW9uIF8odCxlKXt0Lm9wYWNpdHkudmFsdWU9ZS5vcGFjaXR5LHQuZGlmZnVzZS52YWx1ZT1lLmNvbG9yLGUuZW1pc3NpdmUmJnQuZW1pc3NpdmUudmFsdWUuY29weShlLmVtaXNzaXZlKS5tdWx0aXBseVNjYWxhcihlLmVtaXNzaXZlSW50ZW5zaXR5KSx0Lm1hcC52YWx1ZT1lLm1hcCx0LnNwZWN1bGFyTWFwLnZhbHVlPWUuc3BlY3VsYXJNYXAsdC5hbHBoYU1hcC52YWx1ZT1lLmFscGhhTWFwLGUubGlnaHRNYXAmJih0LmxpZ2h0TWFwLnZhbHVlPWUubGlnaHRNYXAsdC5saWdodE1hcEludGVuc2l0eS52YWx1ZT1lLmxpZ2h0TWFwSW50ZW5zaXR5KSxlLmFvTWFwJiYodC5hb01hcC52YWx1ZT1lLmFvTWFwLHQuYW9NYXBJbnRlbnNpdHkudmFsdWU9ZS5hb01hcEludGVuc2l0eSk7dmFyIG47aWYoZS5tYXA/bj1lLm1hcDplLnNwZWN1bGFyTWFwP249ZS5zcGVjdWxhck1hcDplLmRpc3BsYWNlbWVudE1hcD9uPWUuZGlzcGxhY2VtZW50TWFwOmUubm9ybWFsTWFwP249ZS5ub3JtYWxNYXA6ZS5idW1wTWFwP249ZS5idW1wTWFwOmUucm91Z2huZXNzTWFwP249ZS5yb3VnaG5lc3NNYXA6ZS5tZXRhbG5lc3NNYXA/bj1lLm1ldGFsbmVzc01hcDplLmFscGhhTWFwP249ZS5hbHBoYU1hcDplLmVtaXNzaXZlTWFwJiYobj1lLmVtaXNzaXZlTWFwKSx2b2lkIDAhPT1uKXtuLmlzV2ViR0xSZW5kZXJUYXJnZXQmJihuPW4udGV4dHVyZSk7dmFyIGk9bi5vZmZzZXQscj1uLnJlcGVhdDt0Lm9mZnNldFJlcGVhdC52YWx1ZS5zZXQoaS54LGkueSxyLngsci55KX10LmVudk1hcC52YWx1ZT1lLmVudk1hcCx0LmZsaXBFbnZNYXAudmFsdWU9ZS5lbnZNYXAmJmUuZW52TWFwLmlzQ3ViZVRleHR1cmU/LTE6MSx0LnJlZmxlY3Rpdml0eS52YWx1ZT1lLnJlZmxlY3Rpdml0eSx0LnJlZnJhY3Rpb25SYXRpby52YWx1ZT1lLnJlZnJhY3Rpb25SYXRpb31mdW5jdGlvbiBiKHQsZSl7dC5kaWZmdXNlLnZhbHVlPWUuY29sb3IsdC5vcGFjaXR5LnZhbHVlPWUub3BhY2l0eX1mdW5jdGlvbiB4KHQsZSl7dC5kYXNoU2l6ZS52YWx1ZT1lLmRhc2hTaXplLHQudG90YWxTaXplLnZhbHVlPWUuZGFzaFNpemUrZS5nYXBTaXplLHQuc2NhbGUudmFsdWU9ZS5zY2FsZX1mdW5jdGlvbiB3KHQsZSl7aWYodC5kaWZmdXNlLnZhbHVlPWUuY29sb3IsdC5vcGFjaXR5LnZhbHVlPWUub3BhY2l0eSx0LnNpemUudmFsdWU9ZS5zaXplKnZ0LHQuc2NhbGUudmFsdWU9LjUqZ3QsdC5tYXAudmFsdWU9ZS5tYXAsbnVsbCE9PWUubWFwKXt2YXIgbj1lLm1hcC5vZmZzZXQsaT1lLm1hcC5yZXBlYXQ7dC5vZmZzZXRSZXBlYXQudmFsdWUuc2V0KG4ueCxuLnksaS54LGkueSl9fWZ1bmN0aW9uIEUodCxlKXt0LmZvZ0NvbG9yLnZhbHVlPWUuY29sb3IsZS5pc0ZvZz8odC5mb2dOZWFyLnZhbHVlPWUubmVhcix0LmZvZ0Zhci52YWx1ZT1lLmZhcik6ZS5pc0ZvZ0V4cDImJih0LmZvZ0RlbnNpdHkudmFsdWU9ZS5kZW5zaXR5KX1mdW5jdGlvbiBTKHQsZSl7ZS5lbWlzc2l2ZU1hcCYmKHQuZW1pc3NpdmVNYXAudmFsdWU9ZS5lbWlzc2l2ZU1hcCl9ZnVuY3Rpb24gTSh0LGUpe3Quc3BlY3VsYXIudmFsdWU9ZS5zcGVjdWxhcix0LnNoaW5pbmVzcy52YWx1ZT1NYXRoLm1heChlLnNoaW5pbmVzcywxZS00KSxlLmVtaXNzaXZlTWFwJiYodC5lbWlzc2l2ZU1hcC52YWx1ZT1lLmVtaXNzaXZlTWFwKSxlLmJ1bXBNYXAmJih0LmJ1bXBNYXAudmFsdWU9ZS5idW1wTWFwLHQuYnVtcFNjYWxlLnZhbHVlPWUuYnVtcFNjYWxlKSxlLm5vcm1hbE1hcCYmKHQubm9ybWFsTWFwLnZhbHVlPWUubm9ybWFsTWFwLHQubm9ybWFsU2NhbGUudmFsdWUuY29weShlLm5vcm1hbFNjYWxlKSksZS5kaXNwbGFjZW1lbnRNYXAmJih0LmRpc3BsYWNlbWVudE1hcC52YWx1ZT1lLmRpc3BsYWNlbWVudE1hcCx0LmRpc3BsYWNlbWVudFNjYWxlLnZhbHVlPWUuZGlzcGxhY2VtZW50U2NhbGUsdC5kaXNwbGFjZW1lbnRCaWFzLnZhbHVlPWUuZGlzcGxhY2VtZW50Qmlhcyl9ZnVuY3Rpb24gQyh0LGUpe00odCxlKSxlLmdyYWRpZW50TWFwJiYodC5ncmFkaWVudE1hcC52YWx1ZT1lLmdyYWRpZW50TWFwKX1mdW5jdGlvbiBJKHQsZSl7dC5yb3VnaG5lc3MudmFsdWU9ZS5yb3VnaG5lc3MsdC5tZXRhbG5lc3MudmFsdWU9ZS5tZXRhbG5lc3MsZS5yb3VnaG5lc3NNYXAmJih0LnJvdWdobmVzc01hcC52YWx1ZT1lLnJvdWdobmVzc01hcCksZS5tZXRhbG5lc3NNYXAmJih0Lm1ldGFsbmVzc01hcC52YWx1ZT1lLm1ldGFsbmVzc01hcCksZS5lbWlzc2l2ZU1hcCYmKHQuZW1pc3NpdmVNYXAudmFsdWU9ZS5lbWlzc2l2ZU1hcCksZS5idW1wTWFwJiYodC5idW1wTWFwLnZhbHVlPWUuYnVtcE1hcCx0LmJ1bXBTY2FsZS52YWx1ZT1lLmJ1bXBTY2FsZSksZS5ub3JtYWxNYXAmJih0Lm5vcm1hbE1hcC52YWx1ZT1lLm5vcm1hbE1hcCx0Lm5vcm1hbFNjYWxlLnZhbHVlLmNvcHkoZS5ub3JtYWxTY2FsZSkpLGUuZGlzcGxhY2VtZW50TWFwJiYodC5kaXNwbGFjZW1lbnRNYXAudmFsdWU9ZS5kaXNwbGFjZW1lbnRNYXAsdC5kaXNwbGFjZW1lbnRTY2FsZS52YWx1ZT1lLmRpc3BsYWNlbWVudFNjYWxlLHQuZGlzcGxhY2VtZW50Qmlhcy52YWx1ZT1lLmRpc3BsYWNlbWVudEJpYXMpLGUuZW52TWFwJiYodC5lbnZNYXBJbnRlbnNpdHkudmFsdWU9ZS5lbnZNYXBJbnRlbnNpdHkpfWZ1bmN0aW9uIE8odCxlKXt0LmNsZWFyQ29hdC52YWx1ZT1lLmNsZWFyQ29hdCx0LmNsZWFyQ29hdFJvdWdobmVzcy52YWx1ZT1lLmNsZWFyQ29hdFJvdWdobmVzcyxJKHQsZSl9ZnVuY3Rpb24gVCh0LGUpe2UuYnVtcE1hcCYmKHQuYnVtcE1hcC52YWx1ZT1lLmJ1bXBNYXAsdC5idW1wU2NhbGUudmFsdWU9ZS5idW1wU2NhbGUpLGUubm9ybWFsTWFwJiYodC5ub3JtYWxNYXAudmFsdWU9ZS5ub3JtYWxNYXAsdC5ub3JtYWxTY2FsZS52YWx1ZS5jb3B5KGUubm9ybWFsU2NhbGUpKSxlLmRpc3BsYWNlbWVudE1hcCYmKHQuZGlzcGxhY2VtZW50TWFwLnZhbHVlPWUuZGlzcGxhY2VtZW50TWFwLHQuZGlzcGxhY2VtZW50U2NhbGUudmFsdWU9ZS5kaXNwbGFjZW1lbnRTY2FsZSx0LmRpc3BsYWNlbWVudEJpYXMudmFsdWU9ZS5kaXNwbGFjZW1lbnRCaWFzKX1mdW5jdGlvbiBQKHQsZSl7dC5hbWJpZW50TGlnaHRDb2xvci5uZWVkc1VwZGF0ZT1lLHQuZGlyZWN0aW9uYWxMaWdodHMubmVlZHNVcGRhdGU9ZSx0LnBvaW50TGlnaHRzLm5lZWRzVXBkYXRlPWUsdC5zcG90TGlnaHRzLm5lZWRzVXBkYXRlPWUsdC5yZWN0QXJlYUxpZ2h0cy5uZWVkc1VwZGF0ZT1lLHQuaGVtaXNwaGVyZUxpZ2h0cy5uZWVkc1VwZGF0ZT1lfWZ1bmN0aW9uIEEodCl7Zm9yKHZhciBlPTAsbj0wLGk9dC5sZW5ndGg7bjxpO24rKyl7dmFyIHI9dFtuXTtyLmNhc3RTaGFkb3cmJihSdC5zaGFkb3dzW2VdPXIsZSsrKX1SdC5zaGFkb3dzLmxlbmd0aD1lfWZ1bmN0aW9uIEwodCxlKXt2YXIgbixyLG8sYSxzLHUsbCxjLGg9MCxmPTAsZD0wLHA9ZS5tYXRyaXhXb3JsZEludmVyc2UsZz0wLHY9MCxtPTAseT0wLF89MDtmb3Iobj0wLHI9dC5sZW5ndGg7bjxyO24rKylpZihvPXRbbl0scz1vLmNvbG9yLHU9by5pbnRlbnNpdHksbD1vLmRpc3RhbmNlLGM9by5zaGFkb3cmJm8uc2hhZG93Lm1hcD9vLnNoYWRvdy5tYXAudGV4dHVyZTpudWxsLG8uaXNBbWJpZW50TGlnaHQpaCs9cy5yKnUsZis9cy5nKnUsZCs9cy5iKnU7ZWxzZSBpZihvLmlzRGlyZWN0aW9uYWxMaWdodCl7dmFyIGI9ZWUuZ2V0KG8pO2IuY29sb3IuY29weShvLmNvbG9yKS5tdWx0aXBseVNjYWxhcihvLmludGVuc2l0eSksYi5kaXJlY3Rpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKG8ubWF0cml4V29ybGQpLFR0LnNldEZyb21NYXRyaXhQb3NpdGlvbihvLnRhcmdldC5tYXRyaXhXb3JsZCksYi5kaXJlY3Rpb24uc3ViKFR0KSxiLmRpcmVjdGlvbi50cmFuc2Zvcm1EaXJlY3Rpb24ocCksYi5zaGFkb3c9by5jYXN0U2hhZG93LG8uY2FzdFNoYWRvdyYmKGE9by5zaGFkb3csYi5zaGFkb3dCaWFzPWEuYmlhcyxiLnNoYWRvd1JhZGl1cz1hLnJhZGl1cyxiLnNoYWRvd01hcFNpemU9YS5tYXBTaXplKSxSdC5kaXJlY3Rpb25hbFNoYWRvd01hcFtnXT1jLFJ0LmRpcmVjdGlvbmFsU2hhZG93TWF0cml4W2ddPW8uc2hhZG93Lm1hdHJpeCxSdC5kaXJlY3Rpb25hbFtnXT1iLGcrK31lbHNlIGlmKG8uaXNTcG90TGlnaHQpe3ZhciBiPWVlLmdldChvKTtiLnBvc2l0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihvLm1hdHJpeFdvcmxkKSxiLnBvc2l0aW9uLmFwcGx5TWF0cml4NChwKSxiLmNvbG9yLmNvcHkocykubXVsdGlwbHlTY2FsYXIodSksYi5kaXN0YW5jZT1sLGIuZGlyZWN0aW9uLnNldEZyb21NYXRyaXhQb3NpdGlvbihvLm1hdHJpeFdvcmxkKSxUdC5zZXRGcm9tTWF0cml4UG9zaXRpb24oby50YXJnZXQubWF0cml4V29ybGQpLGIuZGlyZWN0aW9uLnN1YihUdCksYi5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHApLGIuY29uZUNvcz1NYXRoLmNvcyhvLmFuZ2xlKSxiLnBlbnVtYnJhQ29zPU1hdGguY29zKG8uYW5nbGUqKDEtby5wZW51bWJyYSkpLGIuZGVjYXk9MD09PW8uZGlzdGFuY2U/MDpvLmRlY2F5LGIuc2hhZG93PW8uY2FzdFNoYWRvdyxvLmNhc3RTaGFkb3cmJihhPW8uc2hhZG93LGIuc2hhZG93Qmlhcz1hLmJpYXMsYi5zaGFkb3dSYWRpdXM9YS5yYWRpdXMsYi5zaGFkb3dNYXBTaXplPWEubWFwU2l6ZSksUnQuc3BvdFNoYWRvd01hcFttXT1jLFJ0LnNwb3RTaGFkb3dNYXRyaXhbbV09by5zaGFkb3cubWF0cml4LFJ0LnNwb3RbbV09YixtKyt9ZWxzZSBpZihvLmlzUmVjdEFyZWFMaWdodCl7dmFyIGI9ZWUuZ2V0KG8pO2IuY29sb3IuY29weShzKS5tdWx0aXBseVNjYWxhcih1LyhvLndpZHRoKm8uaGVpZ2h0KSksYi5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oby5tYXRyaXhXb3JsZCksYi5wb3NpdGlvbi5hcHBseU1hdHJpeDQocCksa3QuaWRlbnRpdHkoKSxOdC5jb3B5KG8ubWF0cml4V29ybGQpLE50LnByZW11bHRpcGx5KHApLGt0LmV4dHJhY3RSb3RhdGlvbihOdCksYi5oYWxmV2lkdGguc2V0KC41Km8ud2lkdGgsMCwwKSxiLmhhbGZIZWlnaHQuc2V0KDAsLjUqby5oZWlnaHQsMCksYi5oYWxmV2lkdGguYXBwbHlNYXRyaXg0KGt0KSxiLmhhbGZIZWlnaHQuYXBwbHlNYXRyaXg0KGt0KSxSdC5yZWN0QXJlYVt5XT1iLHkrK31lbHNlIGlmKG8uaXNQb2ludExpZ2h0KXt2YXIgYj1lZS5nZXQobyk7Yi5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oby5tYXRyaXhXb3JsZCksYi5wb3NpdGlvbi5hcHBseU1hdHJpeDQocCksYi5jb2xvci5jb3B5KG8uY29sb3IpLm11bHRpcGx5U2NhbGFyKG8uaW50ZW5zaXR5KSxiLmRpc3RhbmNlPW8uZGlzdGFuY2UsYi5kZWNheT0wPT09by5kaXN0YW5jZT8wOm8uZGVjYXksYi5zaGFkb3c9by5jYXN0U2hhZG93LG8uY2FzdFNoYWRvdyYmKGE9by5zaGFkb3csYi5zaGFkb3dCaWFzPWEuYmlhcyxiLnNoYWRvd1JhZGl1cz1hLnJhZGl1cyxiLnNoYWRvd01hcFNpemU9YS5tYXBTaXplKSxSdC5wb2ludFNoYWRvd01hcFt2XT1jLHZvaWQgMD09PVJ0LnBvaW50U2hhZG93TWF0cml4W3ZdJiYoUnQucG9pbnRTaGFkb3dNYXRyaXhbdl09bmV3IGkpLFR0LnNldEZyb21NYXRyaXhQb3NpdGlvbihvLm1hdHJpeFdvcmxkKS5uZWdhdGUoKSxSdC5wb2ludFNoYWRvd01hdHJpeFt2XS5pZGVudGl0eSgpLnNldFBvc2l0aW9uKFR0KSxSdC5wb2ludFt2XT1iLHYrK31lbHNlIGlmKG8uaXNIZW1pc3BoZXJlTGlnaHQpe3ZhciBiPWVlLmdldChvKTtiLmRpcmVjdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oby5tYXRyaXhXb3JsZCksYi5kaXJlY3Rpb24udHJhbnNmb3JtRGlyZWN0aW9uKHApLGIuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpLGIuc2t5Q29sb3IuY29weShvLmNvbG9yKS5tdWx0aXBseVNjYWxhcih1KSxiLmdyb3VuZENvbG9yLmNvcHkoby5ncm91bmRDb2xvcikubXVsdGlwbHlTY2FsYXIodSksUnQuaGVtaVtfXT1iLF8rK31SdC5hbWJpZW50WzBdPWgsUnQuYW1iaWVudFsxXT1mLFJ0LmFtYmllbnRbMl09ZCxSdC5kaXJlY3Rpb25hbC5sZW5ndGg9ZyxSdC5zcG90Lmxlbmd0aD1tLFJ0LnJlY3RBcmVhLmxlbmd0aD15LFJ0LnBvaW50Lmxlbmd0aD12LFJ0LmhlbWkubGVuZ3RoPV8sUnQuaGFzaD1nK1wiLFwiK3YrXCIsXCIrbStcIixcIit5K1wiLFwiK18rXCIsXCIrUnQuc2hhZG93cy5sZW5ndGh9ZnVuY3Rpb24gTigpe3ZhciB0PWh0O3JldHVybiB0Pj1ZdC5tYXhUZXh0dXJlcyYmY29uc29sZS53YXJuKFwiV2ViR0xSZW5kZXJlcjogdHJ5aW5nIHRvIHVzZSBcIit0K1wiIHRleHR1cmUgdW5pdHMgd2hpbGUgdGhpcyBHUFUgc3VwcG9ydHMgb25seSBcIitZdC5tYXhUZXh0dXJlcyksaHQrPTEsdH1mdW5jdGlvbiBrKHQpe3ZhciBlO2lmKHQ9PT1HaSlyZXR1cm4gWHQuUkVQRUFUO2lmKHQ9PT1WaSlyZXR1cm4gWHQuQ0xBTVBfVE9fRURHRTtpZih0PT09WGkpcmV0dXJuIFh0Lk1JUlJPUkVEX1JFUEVBVDtpZih0PT09SGkpcmV0dXJuIFh0Lk5FQVJFU1Q7aWYodD09PXFpKXJldHVybiBYdC5ORUFSRVNUX01JUE1BUF9ORUFSRVNUO2lmKHQ9PT1ZaSlyZXR1cm4gWHQuTkVBUkVTVF9NSVBNQVBfTElORUFSO2lmKHQ9PT1XaSlyZXR1cm4gWHQuTElORUFSO2lmKHQ9PT1aaSlyZXR1cm4gWHQuTElORUFSX01JUE1BUF9ORUFSRVNUO2lmKHQ9PT1KaSlyZXR1cm4gWHQuTElORUFSX01JUE1BUF9MSU5FQVI7aWYodD09PUtpKXJldHVybiBYdC5VTlNJR05FRF9CWVRFO2lmKHQ9PT1vcilyZXR1cm4gWHQuVU5TSUdORURfU0hPUlRfNF80XzRfNDtpZih0PT09YXIpcmV0dXJuIFh0LlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7aWYodD09PXNyKXJldHVybiBYdC5VTlNJR05FRF9TSE9SVF81XzZfNTtpZih0PT09UWkpcmV0dXJuIFh0LkJZVEU7aWYodD09PSRpKXJldHVybiBYdC5TSE9SVDtpZih0PT09dHIpcmV0dXJuIFh0LlVOU0lHTkVEX1NIT1JUO2lmKHQ9PT1lcilyZXR1cm4gWHQuSU5UO2lmKHQ9PT1ucilyZXR1cm4gWHQuVU5TSUdORURfSU5UO2lmKHQ9PT1pcilyZXR1cm4gWHQuRkxPQVQ7aWYodD09PXJyJiYoZT1xdC5nZXQoXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIpLG51bGwhPT1lKSlyZXR1cm4gZS5IQUxGX0ZMT0FUX09FUztpZih0PT09bHIpcmV0dXJuIFh0LkFMUEhBO2lmKHQ9PT1jcilyZXR1cm4gWHQuUkdCO2lmKHQ9PT1ocilyZXR1cm4gWHQuUkdCQTtpZih0PT09ZnIpcmV0dXJuIFh0LkxVTUlOQU5DRTtpZih0PT09ZHIpcmV0dXJuIFh0LkxVTUlOQU5DRV9BTFBIQTtpZih0PT09Z3IpcmV0dXJuIFh0LkRFUFRIX0NPTVBPTkVOVDtpZih0PT09dnIpcmV0dXJuIFh0LkRFUFRIX1NURU5DSUw7aWYodD09PW5pKXJldHVybiBYdC5GVU5DX0FERDtpZih0PT09aWkpcmV0dXJuIFh0LkZVTkNfU1VCVFJBQ1Q7aWYodD09PXJpKXJldHVybiBYdC5GVU5DX1JFVkVSU0VfU1VCVFJBQ1Q7aWYodD09PXNpKXJldHVybiBYdC5aRVJPO2lmKHQ9PT11aSlyZXR1cm4gWHQuT05FO2lmKHQ9PT1saSlyZXR1cm4gWHQuU1JDX0NPTE9SO2lmKHQ9PT1jaSlyZXR1cm4gWHQuT05FX01JTlVTX1NSQ19DT0xPUjtpZih0PT09aGkpcmV0dXJuIFh0LlNSQ19BTFBIQTtpZih0PT09ZmkpcmV0dXJuIFh0Lk9ORV9NSU5VU19TUkNfQUxQSEE7aWYodD09PWRpKXJldHVybiBYdC5EU1RfQUxQSEE7aWYodD09PXBpKXJldHVybiBYdC5PTkVfTUlOVVNfRFNUX0FMUEhBO2lmKHQ9PT1naSlyZXR1cm4gWHQuRFNUX0NPTE9SO2lmKHQ9PT12aSlyZXR1cm4gWHQuT05FX01JTlVTX0RTVF9DT0xPUjtpZih0PT09bWkpcmV0dXJuIFh0LlNSQ19BTFBIQV9TQVRVUkFURTtpZigodD09PW1yfHx0PT09eXJ8fHQ9PT1fcnx8dD09PWJyKSYmKGU9cXQuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIiksbnVsbCE9PWUpKXtpZih0PT09bXIpcmV0dXJuIGUuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVDtpZih0PT09eXIpcmV0dXJuIGUuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQ7aWYodD09PV9yKXJldHVybiBlLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO2lmKHQ9PT1icilyZXR1cm4gZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVH1pZigodD09PXhyfHx0PT09d3J8fHQ9PT1Fcnx8dD09PVNyKSYmKGU9cXQuZ2V0KFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjXCIpLG51bGwhPT1lKSl7aWYodD09PXhyKXJldHVybiBlLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7aWYodD09PXdyKXJldHVybiBlLkNPTVBSRVNTRURfUkdCX1BWUlRDXzJCUFBWMV9JTUc7aWYodD09PUVyKXJldHVybiBlLkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HO2lmKHQ9PT1TcilyZXR1cm4gZS5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNR31pZih0PT09TXImJihlPXF0LmdldChcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxXCIpLG51bGwhPT1lKSlyZXR1cm4gZS5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMO2lmKCh0PT09b2l8fHQ9PT1haSkmJihlPXF0LmdldChcIkVYVF9ibGVuZF9taW5tYXhcIiksbnVsbCE9PWUpKXtpZih0PT09b2kpcmV0dXJuIGUuTUlOX0VYVDtpZih0PT09YWkpcmV0dXJuIGUuTUFYX0VYVH1yZXR1cm4gdD09PXVyJiYoZT1xdC5nZXQoXCJXRUJHTF9kZXB0aF90ZXh0dXJlXCIpLG51bGwhPT1lKT9lLlVOU0lHTkVEX0lOVF8yNF84X1dFQkdMOjB9Y29uc29sZS5sb2coXCJUSFJFRS5XZWJHTFJlbmRlcmVyXCIsQW4pLHQ9dHx8e307dmFyIFI9dm9pZCAwIT09dC5jYW52YXM/dC5jYW52YXM6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpLEQ9dm9pZCAwIT09dC5jb250ZXh0P3QuY29udGV4dDpudWxsLEY9dm9pZCAwIT09dC5hbHBoYSYmdC5hbHBoYSxCPXZvaWQgMD09PXQuZGVwdGh8fHQuZGVwdGgsaj12b2lkIDA9PT10LnN0ZW5jaWx8fHQuc3RlbmNpbCxVPXZvaWQgMCE9PXQuYW50aWFsaWFzJiZ0LmFudGlhbGlhcyx6PXZvaWQgMD09PXQucHJlbXVsdGlwbGllZEFscGhhfHx0LnByZW11bHRpcGxpZWRBbHBoYSxHPXZvaWQgMCE9PXQucHJlc2VydmVEcmF3aW5nQnVmZmVyJiZ0LnByZXNlcnZlRHJhd2luZ0J1ZmZlcixWPVtdLFk9bnVsbCxXPW5ldyBGbG9hdDMyQXJyYXkoOCksSj1bXSxLPVtdO3RoaXMuZG9tRWxlbWVudD1SLHRoaXMuY29udGV4dD1udWxsLHRoaXMuYXV0b0NsZWFyPSEwLHRoaXMuYXV0b0NsZWFyQ29sb3I9ITAsdGhpcy5hdXRvQ2xlYXJEZXB0aD0hMCx0aGlzLmF1dG9DbGVhclN0ZW5jaWw9ITAsdGhpcy5zb3J0T2JqZWN0cz0hMCx0aGlzLmNsaXBwaW5nUGxhbmVzPVtdLHRoaXMubG9jYWxDbGlwcGluZ0VuYWJsZWQ9ITEsdGhpcy5nYW1tYUZhY3Rvcj0yLHRoaXMuZ2FtbWFJbnB1dD0hMSx0aGlzLmdhbW1hT3V0cHV0PSExLHRoaXMucGh5c2ljYWxseUNvcnJlY3RMaWdodHM9ITEsdGhpcy50b25lTWFwcGluZz1QaSx0aGlzLnRvbmVNYXBwaW5nRXhwb3N1cmU9MSx0aGlzLnRvbmVNYXBwaW5nV2hpdGVQb2ludD0xLHRoaXMubWF4TW9ycGhUYXJnZXRzPTgsdGhpcy5tYXhNb3JwaE5vcm1hbHM9NDt2YXIgUT10aGlzLCQ9bnVsbCx0dD1udWxsLGl0PW51bGwscnQ9LTEsb3Q9XCJcIixhdD1udWxsLHN0PW5ldyBILHV0PW51bGwsbHQ9bmV3IEgsaHQ9MCxmdD1uZXcgcSgwKSxkdD0wLHB0PVIud2lkdGgsZ3Q9Ui5oZWlnaHQsdnQ9MSxtdD1uZXcgSCgwLDAscHQsZ3QpLHl0PSExLF90PW5ldyBIKDAsMCxwdCxndCksYnQ9bmV3IGV0LHh0PW5ldyB1ZSx3dD0hMSxFdD0hMSxTdD1uZXcgaSxUdD1uZXcgbixOdD1uZXcgaSxrdD1uZXcgaSxSdD17aGFzaDpcIlwiLGFtYmllbnQ6WzAsMCwwXSxkaXJlY3Rpb25hbDpbXSxkaXJlY3Rpb25hbFNoYWRvd01hcDpbXSxkaXJlY3Rpb25hbFNoYWRvd01hdHJpeDpbXSxzcG90OltdLHNwb3RTaGFkb3dNYXA6W10sc3BvdFNoYWRvd01hdHJpeDpbXSxyZWN0QXJlYTpbXSxwb2ludDpbXSxwb2ludFNoYWRvd01hcDpbXSxwb2ludFNoYWRvd01hdHJpeDpbXSxoZW1pOltdLHNoYWRvd3M6W119LEd0PXtnZW9tZXRyaWVzOjAsdGV4dHVyZXM6MH0sVnQ9e2ZyYW1lOjAsY2FsbHM6MCx2ZXJ0aWNlczowLGZhY2VzOjAscG9pbnRzOjB9O3RoaXMuaW5mbz17cmVuZGVyOlZ0LG1lbW9yeTpHdCxwcm9ncmFtczpudWxsfTt2YXIgWHQ7dHJ5e3ZhciBIdD17YWxwaGE6RixkZXB0aDpCLHN0ZW5jaWw6aixhbnRpYWxpYXM6VSxwcmVtdWx0aXBsaWVkQWxwaGE6eixwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6R307aWYoWHQ9RHx8Ui5nZXRDb250ZXh0KFwid2ViZ2xcIixIdCl8fFIuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLEh0KSxudWxsPT09WHQpdGhyb3cgbnVsbCE9PVIuZ2V0Q29udGV4dChcIndlYmdsXCIpP1wiRXJyb3IgY3JlYXRpbmcgV2ViR0wgY29udGV4dCB3aXRoIHlvdXIgc2VsZWN0ZWQgYXR0cmlidXRlcy5cIjpcIkVycm9yIGNyZWF0aW5nIFdlYkdMIGNvbnRleHQuXCI7dm9pZCAwPT09WHQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0JiYoWHQuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0PWZ1bmN0aW9uKCl7cmV0dXJue3JhbmdlTWluOjEscmFuZ2VNYXg6MSxwcmVjaXNpb246MX19KSxSLmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJnbGNvbnRleHRsb3N0XCIsYSwhMSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IFwiK3QpfXZhciBxdD1uZXcgc2UoWHQpO3F0LmdldChcIldFQkdMX2RlcHRoX3RleHR1cmVcIikscXQuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIikscXQuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpLHF0LmdldChcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIikscXQuZ2V0KFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIikscXQuZ2V0KFwiT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzXCIpLHF0LmdldChcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIikscXQuZ2V0KFwiT0VTX2VsZW1lbnRfaW5kZXhfdWludFwiKSYmKE10Lk1heEluZGV4PTQyOTQ5NjcyOTYpO3ZhciBZdD1uZXcgYWUoWHQscXQsdCksV3Q9bmV3IG9lKFh0LHF0LGspLFp0PW5ldyByZSxKdD1uZXcgaWUoWHQscXQsV3QsWnQsWXQsayxHdCksS3Q9bmV3IEx0KFh0KSxRdD1uZXcganQoWHQsS3QsR3QpLCR0PW5ldyB6dChYdCxRdCxWdCksdGU9bmV3IG5lKHRoaXMsWXQpLGVlPW5ldyBVdCxsZT1uZXcgRHQ7dGhpcy5pbmZvLnByb2dyYW1zPXRlLnByb2dyYW1zO3ZhciBjZSxoZSxmZSxkZSxwZT1uZXcgQnQoWHQscXQsVnQpLGdlPW5ldyBGdChYdCxxdCxWdCk7cigpLHRoaXMuY29udGV4dD1YdCx0aGlzLmNhcGFiaWxpdGllcz1ZdCx0aGlzLmV4dGVuc2lvbnM9cXQsdGhpcy5wcm9wZXJ0aWVzPVp0LHRoaXMuc3RhdGU9V3Q7dmFyIHZlPW5ldyBudCh0aGlzLFJ0LCR0LFl0KTt0aGlzLnNoYWRvd01hcD12ZTt2YXIgbWU9bmV3IHQuU3ByaXRlUGx1Z2luKHRoaXMsSik7dGhpcy5nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIFh0fSx0aGlzLmdldENvbnRleHRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIFh0LmdldENvbnRleHRBdHRyaWJ1dGVzKCl9LHRoaXMuZm9yY2VDb250ZXh0TG9zcz1mdW5jdGlvbigpe3ZhciB0PXF0LmdldChcIldFQkdMX2xvc2VfY29udGV4dFwiKTt0JiZ0Lmxvc2VDb250ZXh0KCl9LHRoaXMuZ2V0TWF4QW5pc290cm9weT1mdW5jdGlvbigpe3JldHVybiBZdC5nZXRNYXhBbmlzb3Ryb3B5KCl9LHRoaXMuZ2V0UHJlY2lzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIFl0LnByZWNpc2lvbn0sdGhpcy5nZXRQaXhlbFJhdGlvPWZ1bmN0aW9uKCl7cmV0dXJuIHZ0fSx0aGlzLnNldFBpeGVsUmF0aW89ZnVuY3Rpb24odCl7dm9pZCAwIT09dCYmKHZ0PXQsdGhpcy5zZXRTaXplKF90LnosX3QudywhMSkpfSx0aGlzLmdldFNpemU9ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6cHQsaGVpZ2h0Omd0fX0sdGhpcy5zZXRTaXplPWZ1bmN0aW9uKHQsZSxuKXtwdD10LGd0PWUsUi53aWR0aD10KnZ0LFIuaGVpZ2h0PWUqdnQsbiE9PSExJiYoUi5zdHlsZS53aWR0aD10K1wicHhcIixSLnN0eWxlLmhlaWdodD1lK1wicHhcIiksdGhpcy5zZXRWaWV3cG9ydCgwLDAsdCxlKX0sdGhpcy5zZXRWaWV3cG9ydD1mdW5jdGlvbih0LGUsbixpKXtXdC52aWV3cG9ydChfdC5zZXQodCxlLG4saSkpfSx0aGlzLnNldFNjaXNzb3I9ZnVuY3Rpb24odCxlLG4saSl7V3Quc2Npc3NvcihtdC5zZXQodCxlLG4saSkpfSx0aGlzLnNldFNjaXNzb3JUZXN0PWZ1bmN0aW9uKHQpe1d0LnNldFNjaXNzb3JUZXN0KHl0PXQpfSx0aGlzLmdldENsZWFyQ29sb3I9ZnVuY3Rpb24oKXtyZXR1cm4gZnR9LHRoaXMuc2V0Q2xlYXJDb2xvcj1mdW5jdGlvbih0LGUpe2Z0LnNldCh0KSxkdD12b2lkIDAhPT1lP2U6MSxXdC5idWZmZXJzLmNvbG9yLnNldENsZWFyKGZ0LnIsZnQuZyxmdC5iLGR0LHopfSx0aGlzLmdldENsZWFyQWxwaGE9ZnVuY3Rpb24oKXtyZXR1cm4gZHR9LHRoaXMuc2V0Q2xlYXJBbHBoYT1mdW5jdGlvbih0KXtkdD10LFd0LmJ1ZmZlcnMuY29sb3Iuc2V0Q2xlYXIoZnQucixmdC5nLGZ0LmIsZHQseil9LHRoaXMuY2xlYXI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPTA7KHZvaWQgMD09PXR8fHQpJiYoaXw9WHQuQ09MT1JfQlVGRkVSX0JJVCksKHZvaWQgMD09PWV8fGUpJiYoaXw9WHQuREVQVEhfQlVGRkVSX0JJVCksKHZvaWQgMD09PW58fG4pJiYoaXw9WHQuU1RFTkNJTF9CVUZGRVJfQklUKSxYdC5jbGVhcihpKX0sdGhpcy5jbGVhckNvbG9yPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcighMCwhMSwhMSl9LHRoaXMuY2xlYXJEZXB0aD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITEsITAsITEpfSx0aGlzLmNsZWFyU3RlbmNpbD1mdW5jdGlvbigpe3RoaXMuY2xlYXIoITEsITEsITApfSx0aGlzLmNsZWFyVGFyZ2V0PWZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMuc2V0UmVuZGVyVGFyZ2V0KHQpLHRoaXMuY2xlYXIoZSxuLGkpfSx0aGlzLnJlc2V0R0xTdGF0ZT1vLHRoaXMuZGlzcG9zZT1mdW5jdGlvbigpe1IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmdsY29udGV4dGxvc3RcIixhLCExKSxsZS5kaXNwb3NlKCl9LHRoaXMucmVuZGVyQnVmZmVySW1tZWRpYXRlPWZ1bmN0aW9uKHQsZSxuKXtXdC5pbml0QXR0cmlidXRlcygpO3ZhciBpPVp0LmdldCh0KTt0Lmhhc1Bvc2l0aW9ucyYmIWkucG9zaXRpb24mJihpLnBvc2l0aW9uPVh0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc05vcm1hbHMmJiFpLm5vcm1hbCYmKGkubm9ybWFsPVh0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc1V2cyYmIWkudXYmJihpLnV2PVh0LmNyZWF0ZUJ1ZmZlcigpKSx0Lmhhc0NvbG9ycyYmIWkuY29sb3ImJihpLmNvbG9yPVh0LmNyZWF0ZUJ1ZmZlcigpKTt2YXIgcj1lLmdldEF0dHJpYnV0ZXMoKTtpZih0Lmhhc1Bvc2l0aW9ucyYmKFh0LmJpbmRCdWZmZXIoWHQuQVJSQVlfQlVGRkVSLGkucG9zaXRpb24pLFh0LmJ1ZmZlckRhdGEoWHQuQVJSQVlfQlVGRkVSLHQucG9zaXRpb25BcnJheSxYdC5EWU5BTUlDX0RSQVcpLFd0LmVuYWJsZUF0dHJpYnV0ZShyLnBvc2l0aW9uKSxYdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIucG9zaXRpb24sMyxYdC5GTE9BVCwhMSwwLDApKSx0Lmhhc05vcm1hbHMpe2lmKFh0LmJpbmRCdWZmZXIoWHQuQVJSQVlfQlVGRkVSLGkubm9ybWFsKSwhbi5pc01lc2hQaG9uZ01hdGVyaWFsJiYhbi5pc01lc2hTdGFuZGFyZE1hdGVyaWFsJiYhbi5pc01lc2hOb3JtYWxNYXRlcmlhbCYmbi5zaGFkaW5nPT09SG4pZm9yKHZhciBvPTAsYT0zKnQuY291bnQ7bzxhO28rPTkpe3ZhciBzPXQubm9ybWFsQXJyYXksdT0oc1tvKzBdK3NbbyszXStzW28rNl0pLzMsbD0oc1tvKzFdK3Nbbys0XStzW28rN10pLzMsYz0oc1tvKzJdK3Nbbys1XStzW28rOF0pLzM7c1tvKzBdPXUsc1tvKzFdPWwsc1tvKzJdPWMsc1tvKzNdPXUsc1tvKzRdPWwsc1tvKzVdPWMsc1tvKzZdPXUsc1tvKzddPWwsc1tvKzhdPWN9WHQuYnVmZmVyRGF0YShYdC5BUlJBWV9CVUZGRVIsdC5ub3JtYWxBcnJheSxYdC5EWU5BTUlDX0RSQVcpLFd0LmVuYWJsZUF0dHJpYnV0ZShyLm5vcm1hbCksWHQudmVydGV4QXR0cmliUG9pbnRlcihyLm5vcm1hbCwzLFh0LkZMT0FULCExLDAsMCl9dC5oYXNVdnMmJm4ubWFwJiYoWHQuYmluZEJ1ZmZlcihYdC5BUlJBWV9CVUZGRVIsaS51diksWHQuYnVmZmVyRGF0YShYdC5BUlJBWV9CVUZGRVIsdC51dkFycmF5LFh0LkRZTkFNSUNfRFJBVyksV3QuZW5hYmxlQXR0cmlidXRlKHIudXYpLFh0LnZlcnRleEF0dHJpYlBvaW50ZXIoS3QudXYsMixYdC5GTE9BVCwhMSwwLDApKSx0Lmhhc0NvbG9ycyYmbi52ZXJ0ZXhDb2xvcnMhPT1ZbiYmKFh0LmJpbmRCdWZmZXIoWHQuQVJSQVlfQlVGRkVSLGkuY29sb3IpLFh0LmJ1ZmZlckRhdGEoWHQuQVJSQVlfQlVGRkVSLHQuY29sb3JBcnJheSxYdC5EWU5BTUlDX0RSQVcpLFd0LmVuYWJsZUF0dHJpYnV0ZShyLmNvbG9yKSxYdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHIuY29sb3IsMyxYdC5GTE9BVCwhMSwwLDApKSxXdC5kaXNhYmxlVW51c2VkQXR0cmlidXRlcygpLFh0LmRyYXdBcnJheXMoWHQuVFJJQU5HTEVTLDAsdC5jb3VudCksdC5jb3VudD0wfSx0aGlzLnJlbmRlckJ1ZmZlckRpcmVjdD1mdW5jdGlvbih0LG4saSxyLG8sYSl7V3Quc2V0TWF0ZXJpYWwocik7dmFyIHM9eSh0LG4scixvKSx1PWkuaWQrXCJfXCIrcy5pZCtcIl9cIisoci53aXJlZnJhbWU9PT0hMCksbD0hMTt1IT09b3QmJihvdD11LGw9ITApO3ZhciBjPW8ubW9ycGhUYXJnZXRJbmZsdWVuY2VzO2lmKHZvaWQgMCE9PWMpe2Zvcih2YXIgaD1bXSxwPTAsZz1jLmxlbmd0aDtwPGc7cCsrKXt2YXIgdj1jW3BdO2gucHVzaChbdixwXSl9aC5zb3J0KGQpLGgubGVuZ3RoPjgmJihoLmxlbmd0aD04KTtmb3IodmFyIG09aS5tb3JwaEF0dHJpYnV0ZXMscD0wLGc9aC5sZW5ndGg7cDxnO3ArKyl7dmFyIHY9aFtwXTtpZihXW3BdPXZbMF0sMCE9PXZbMF0pe3ZhciBfPXZbMV07ci5tb3JwaFRhcmdldHM9PT0hMCYmbS5wb3NpdGlvbiYmaS5hZGRBdHRyaWJ1dGUoXCJtb3JwaFRhcmdldFwiK3AsbS5wb3NpdGlvbltfXSksci5tb3JwaE5vcm1hbHM9PT0hMCYmbS5ub3JtYWwmJmkuYWRkQXR0cmlidXRlKFwibW9ycGhOb3JtYWxcIitwLG0ubm9ybWFsW19dKX1lbHNlIHIubW9ycGhUYXJnZXRzPT09ITAmJmkucmVtb3ZlQXR0cmlidXRlKFwibW9ycGhUYXJnZXRcIitwKSxyLm1vcnBoTm9ybWFscz09PSEwJiZpLnJlbW92ZUF0dHJpYnV0ZShcIm1vcnBoTm9ybWFsXCIrcCl9Zm9yKHZhciBwPWgubGVuZ3RoLGI9Vy5sZW5ndGg7cDxiO3ArKylXW3BdPTA7cy5nZXRVbmlmb3JtcygpLnNldFZhbHVlKFh0LFwibW9ycGhUYXJnZXRJbmZsdWVuY2VzXCIsVyksbD0hMH12YXIgXz1pLmluZGV4LHg9aS5hdHRyaWJ1dGVzLnBvc2l0aW9uLHc9MTtyLndpcmVmcmFtZT09PSEwJiYoXz1RdC5nZXRXaXJlZnJhbWVBdHRyaWJ1dGUoaSksdz0yKTt2YXIgRT1wZTtudWxsIT09XyYmKEU9Z2UsRS5zZXRJbmRleChfKSksbCYmKGYocixzLGkpLG51bGwhPT1fJiZYdC5iaW5kQnVmZmVyKFh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLEt0LmdldChfKS5idWZmZXIpKTt2YXIgUz0wO251bGwhPT1fP1M9Xy5jb3VudDp2b2lkIDAhPT14JiYoUz14LmNvdW50KTt2YXIgTT1pLmRyYXdSYW5nZS5zdGFydCp3LEM9aS5kcmF3UmFuZ2UuY291bnQqdyxJPW51bGwhPT1hP2Euc3RhcnQqdzowLE89bnVsbCE9PWE/YS5jb3VudCp3OjEvMCxUPU1hdGgubWF4KE0sSSksUD1NYXRoLm1pbihTLE0rQyxJK08pLTEsQT1NYXRoLm1heCgwLFAtVCsxKTtpZigwIT09QSl7aWYoby5pc01lc2gpaWYoci53aXJlZnJhbWU9PT0hMClXdC5zZXRMaW5lV2lkdGgoci53aXJlZnJhbWVMaW5ld2lkdGgqZSgpKSxFLnNldE1vZGUoWHQuTElORVMpO2Vsc2Ugc3dpdGNoKG8uZHJhd01vZGUpe2Nhc2UgUnI6RS5zZXRNb2RlKFh0LlRSSUFOR0xFUyk7YnJlYWs7Y2FzZSBEcjpFLnNldE1vZGUoWHQuVFJJQU5HTEVfU1RSSVApO2JyZWFrO2Nhc2UgRnI6RS5zZXRNb2RlKFh0LlRSSUFOR0xFX0ZBTil9ZWxzZSBpZihvLmlzTGluZSl7dmFyIEw9ci5saW5ld2lkdGg7dm9pZCAwPT09TCYmKEw9MSksV3Quc2V0TGluZVdpZHRoKEwqZSgpKSxvLmlzTGluZVNlZ21lbnRzP0Uuc2V0TW9kZShYdC5MSU5FUyk6by5pc0xpbmVMb29wP0Uuc2V0TW9kZShYdC5MSU5FX0xPT1ApOkUuc2V0TW9kZShYdC5MSU5FX1NUUklQKX1lbHNlIG8uaXNQb2ludHMmJkUuc2V0TW9kZShYdC5QT0lOVFMpO2kmJmkuaXNJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeT9pLm1heEluc3RhbmNlZENvdW50PjAmJkUucmVuZGVySW5zdGFuY2VzKGksVCxBKTpFLnJlbmRlcihULEEpfX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24odCxlLG4saSl7aWYodm9pZCAwIT09ZSYmZS5pc0NhbWVyYSE9PSEwKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlbmRlcjogY2FtZXJhIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5DYW1lcmEuXCIpO290PVwiXCIscnQ9LTEsYXQ9bnVsbCx0LmF1dG9VcGRhdGU9PT0hMCYmdC51cGRhdGVNYXRyaXhXb3JsZCgpLGUub25CZWZvcmVSZW5kZXIoUSksbnVsbD09PWUucGFyZW50JiZlLnVwZGF0ZU1hdHJpeFdvcmxkKCksZS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShlLm1hdHJpeFdvcmxkKSxTdC5tdWx0aXBseU1hdHJpY2VzKGUucHJvamVjdGlvbk1hdHJpeCxlLm1hdHJpeFdvcmxkSW52ZXJzZSksYnQuc2V0RnJvbU1hdHJpeChTdCksVi5sZW5ndGg9MCxKLmxlbmd0aD0wLEsubGVuZ3RoPTAsRXQ9dGhpcy5sb2NhbENsaXBwaW5nRW5hYmxlZCx3dD14dC5pbml0KHRoaXMuY2xpcHBpbmdQbGFuZXMsRXQsZSksWT1sZS5nZXQodCxlKSxZLmluaXQoKSxwKHQsZSxRLnNvcnRPYmplY3RzKSxZLmZpbmlzaCgpLFEuc29ydE9iamVjdHM9PT0hMCYmWS5zb3J0KCksd3QmJnh0LmJlZ2luU2hhZG93cygpLEEoViksdmUucmVuZGVyKHQsZSksTChWLGUpLHd0JiZ4dC5lbmRTaGFkb3dzKCksVnQuZnJhbWUrKyxWdC5jYWxscz0wLFZ0LnZlcnRpY2VzPTAsVnQuZmFjZXM9MCxWdC5wb2ludHM9MCx2b2lkIDA9PT1uJiYobj1udWxsKSx0aGlzLnNldFJlbmRlclRhcmdldChuKTt2YXIgcj10LmJhY2tncm91bmQ7bnVsbD09PXI/V3QuYnVmZmVycy5jb2xvci5zZXRDbGVhcihmdC5yLGZ0LmcsZnQuYixkdCx6KTpyJiZyLmlzQ29sb3ImJihXdC5idWZmZXJzLmNvbG9yLnNldENsZWFyKHIucixyLmcsci5iLDEseiksaT0hMCksKHRoaXMuYXV0b0NsZWFyfHxpKSYmdGhpcy5jbGVhcih0aGlzLmF1dG9DbGVhckNvbG9yLHRoaXMuYXV0b0NsZWFyRGVwdGgsdGhpcy5hdXRvQ2xlYXJTdGVuY2lsKSxyJiZyLmlzQ3ViZVRleHR1cmU/KHZvaWQgMD09PWZlJiYoZmU9bmV3IFB0LGRlPW5ldyBDdChuZXcgSXQoNSw1LDUpLG5ldyBaKHt1bmlmb3Jtczpjcy5jdWJlLnVuaWZvcm1zLHZlcnRleFNoYWRlcjpjcy5jdWJlLnZlcnRleFNoYWRlcixmcmFnbWVudFNoYWRlcjpjcy5jdWJlLmZyYWdtZW50U2hhZGVyLHNpZGU6Vm4sZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpKSxmZS5wcm9qZWN0aW9uTWF0cml4LmNvcHkoZS5wcm9qZWN0aW9uTWF0cml4KSxmZS5tYXRyaXhXb3JsZC5leHRyYWN0Um90YXRpb24oZS5tYXRyaXhXb3JsZCksZmUubWF0cml4V29ybGRJbnZlcnNlLmdldEludmVyc2UoZmUubWF0cml4V29ybGQpLGRlLm1hdGVyaWFsLnVuaWZvcm1zLnRDdWJlLnZhbHVlPXIsZGUubW9kZWxWaWV3TWF0cml4Lm11bHRpcGx5TWF0cmljZXMoZmUubWF0cml4V29ybGRJbnZlcnNlLGRlLm1hdHJpeFdvcmxkKSwkdC51cGRhdGUoZGUpLFEucmVuZGVyQnVmZmVyRGlyZWN0KGZlLG51bGwsZGUuZ2VvbWV0cnksZGUubWF0ZXJpYWwsZGUsbnVsbCkpOnImJnIuaXNUZXh0dXJlJiYodm9pZCAwPT09Y2UmJihjZT1uZXcgQXQoLTEsMSwxLC0xLDAsMSksaGU9bmV3IEN0KG5ldyBPdCgyLDIpLG5ldyBjdCh7ZGVwdGhUZXN0OiExLGRlcHRoV3JpdGU6ITEsZm9nOiExfSkpKSxoZS5tYXRlcmlhbC5tYXA9ciwkdC51cGRhdGUoaGUpLFEucmVuZGVyQnVmZmVyRGlyZWN0KGNlLG51bGwsaGUuZ2VvbWV0cnksaGUubWF0ZXJpYWwsaGUsbnVsbCkpO3ZhciBvPVkub3BhcXVlLGE9WS50cmFuc3BhcmVudDtpZih0Lm92ZXJyaWRlTWF0ZXJpYWwpe3ZhciBzPXQub3ZlcnJpZGVNYXRlcmlhbDtvLmxlbmd0aCYmZyhvLHQsZSxzKSxhLmxlbmd0aCYmZyhhLHQsZSxzKX1lbHNlIG8ubGVuZ3RoJiZnKG8sdCxlKSxhLmxlbmd0aCYmZyhhLHQsZSk7bWUucmVuZGVyKHQsZSksbiYmSnQudXBkYXRlUmVuZGVyVGFyZ2V0TWlwbWFwKG4pLFd0LmJ1ZmZlcnMuZGVwdGguc2V0VGVzdCghMCksV3QuYnVmZmVycy5kZXB0aC5zZXRNYXNrKCEwKSxXdC5idWZmZXJzLmNvbG9yLnNldE1hc2soITApLGUuaXNBcnJheUNhbWVyYSYmZS5lbmFibGVkJiZRLnNldFNjaXNzb3JUZXN0KCExKSxlLm9uQWZ0ZXJSZW5kZXIoUSl9LHRoaXMuc2V0RmFjZUN1bGxpbmc9ZnVuY3Rpb24odCxlKXtXdC5zZXRDdWxsRmFjZSh0KSxXdC5zZXRGbGlwU2lkZWQoZT09PUZuKX0sdGhpcy5hbGxvY1RleHR1cmVVbml0PU4sdGhpcy5zZXRUZXh0dXJlMkQ9ZnVuY3Rpb24oKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtlJiZlLmlzV2ViR0xSZW5kZXJUYXJnZXQmJih0fHwoY29uc29sZS53YXJuKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5zZXRUZXh0dXJlMkQ6IGRvbid0IHVzZSByZW5kZXIgdGFyZ2V0cyBhcyB0ZXh0dXJlcy4gVXNlIHRoZWlyIC50ZXh0dXJlIHByb3BlcnR5IGluc3RlYWQuXCIpLHQ9ITApLGU9ZS50ZXh0dXJlKSxKdC5zZXRUZXh0dXJlMkQoZSxuKX19KCksdGhpcy5zZXRUZXh0dXJlPWZ1bmN0aW9uKCl7dmFyIHQ9ITE7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dHx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXI6IC5zZXRUZXh0dXJlIGlzIGRlcHJlY2F0ZWQsIHVzZSBzZXRUZXh0dXJlMkQgaW5zdGVhZC5cIiksdD0hMCksSnQuc2V0VGV4dHVyZTJEKGUsbil9fSgpLHRoaXMuc2V0VGV4dHVyZUN1YmU9ZnVuY3Rpb24oKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oZSxuKXtlJiZlLmlzV2ViR0xSZW5kZXJUYXJnZXRDdWJlJiYodHx8KGNvbnNvbGUud2FybihcIlRIUkVFLldlYkdMUmVuZGVyZXIuc2V0VGV4dHVyZUN1YmU6IGRvbid0IHVzZSBjdWJlIHJlbmRlciB0YXJnZXRzIGFzIHRleHR1cmVzLiBVc2UgdGhlaXIgLnRleHR1cmUgcHJvcGVydHkgaW5zdGVhZC5cIiksdD0hMCksZT1lLnRleHR1cmUpLGUmJmUuaXNDdWJlVGV4dHVyZXx8QXJyYXkuaXNBcnJheShlLmltYWdlKSYmNj09PWUuaW1hZ2UubGVuZ3RoP0p0LnNldFRleHR1cmVDdWJlKGUsbik6SnQuc2V0VGV4dHVyZUN1YmVEeW5hbWljKGUsbil9fSgpLHRoaXMuZ2V0UmVuZGVyVGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHR0fSx0aGlzLnNldFJlbmRlclRhcmdldD1mdW5jdGlvbih0KXt0dD10LHQmJnZvaWQgMD09PVp0LmdldCh0KS5fX3dlYmdsRnJhbWVidWZmZXImJkp0LnNldHVwUmVuZGVyVGFyZ2V0KHQpO3ZhciBlLG49dCYmdC5pc1dlYkdMUmVuZGVyVGFyZ2V0Q3ViZTtpZih0KXt2YXIgaT1adC5nZXQodCk7ZT1uP2kuX193ZWJnbEZyYW1lYnVmZmVyW3QuYWN0aXZlQ3ViZUZhY2VdOmkuX193ZWJnbEZyYW1lYnVmZmVyLHN0LmNvcHkodC5zY2lzc29yKSx1dD10LnNjaXNzb3JUZXN0LGx0LmNvcHkodC52aWV3cG9ydCl9ZWxzZSBlPW51bGwsc3QuY29weShtdCkubXVsdGlwbHlTY2FsYXIodnQpLHV0PXl0LGx0LmNvcHkoX3QpLm11bHRpcGx5U2NhbGFyKHZ0KTtpZihpdCE9PWUmJihYdC5iaW5kRnJhbWVidWZmZXIoWHQuRlJBTUVCVUZGRVIsZSksaXQ9ZSksV3Quc2Npc3NvcihzdCksV3Quc2V0U2Npc3NvclRlc3QodXQpLFd0LnZpZXdwb3J0KGx0KSxuKXt2YXIgcj1adC5nZXQodC50ZXh0dXJlKTtYdC5mcmFtZWJ1ZmZlclRleHR1cmUyRChYdC5GUkFNRUJVRkZFUixYdC5DT0xPUl9BVFRBQ0hNRU5UMCxYdC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1grdC5hY3RpdmVDdWJlRmFjZSxyLl9fd2ViZ2xUZXh0dXJlLHQuYWN0aXZlTWlwTWFwTGV2ZWwpfX0sdGhpcy5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzPWZ1bmN0aW9uKHQsZSxuLGkscixvKXtpZigodCYmdC5pc1dlYkdMUmVuZGVyVGFyZ2V0KT09PSExKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgVEhSRUUuV2ViR0xSZW5kZXJUYXJnZXQuXCIpO3ZhciBhPVp0LmdldCh0KS5fX3dlYmdsRnJhbWVidWZmZXI7aWYoYSl7dmFyIHM9ITE7YSE9PWl0JiYoWHQuYmluZEZyYW1lYnVmZmVyKFh0LkZSQU1FQlVGRkVSLGEpLHM9ITApO3RyeXt2YXIgdT10LnRleHR1cmUsbD11LmZvcm1hdCxjPXUudHlwZTtpZihsIT09aHImJmsobCkhPT1YdC5nZXRQYXJhbWV0ZXIoWHQuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9GT1JNQVQpKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5XZWJHTFJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHM6IHJlbmRlclRhcmdldCBpcyBub3QgaW4gUkdCQSBvciBpbXBsZW1lbnRhdGlvbiBkZWZpbmVkIGZvcm1hdC5cIik7aWYoIShjPT09S2l8fGsoYyk9PT1YdC5nZXRQYXJhbWV0ZXIoWHQuSU1QTEVNRU5UQVRJT05fQ09MT1JfUkVBRF9UWVBFKXx8Yz09PWlyJiYocXQuZ2V0KFwiT0VTX3RleHR1cmVfZmxvYXRcIil8fHF0LmdldChcIldFQkdMX2NvbG9yX2J1ZmZlcl9mbG9hdFwiKSl8fGM9PT1yciYmcXQuZ2V0KFwiRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0XCIpKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZW5kZXJUYXJnZXQgaXMgbm90IGluIFVuc2lnbmVkQnl0ZVR5cGUgb3IgaW1wbGVtZW50YXRpb24gZGVmaW5lZCB0eXBlLlwiKTtYdC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKFh0LkZSQU1FQlVGRkVSKT09PVh0LkZSQU1FQlVGRkVSX0NPTVBMRVRFP2U+PTAmJmU8PXQud2lkdGgtaSYmbj49MCYmbjw9dC5oZWlnaHQtciYmWHQucmVhZFBpeGVscyhlLG4saSxyLGsobCksayhjKSxvKTpjb25zb2xlLmVycm9yKFwiVEhSRUUuV2ViR0xSZW5kZXJlci5yZWFkUmVuZGVyVGFyZ2V0UGl4ZWxzOiByZWFkUGl4ZWxzIGZyb20gcmVuZGVyVGFyZ2V0IGZhaWxlZC4gRnJhbWVidWZmZXIgbm90IGNvbXBsZXRlLlwiKX1maW5hbGx5e3MmJlh0LmJpbmRGcmFtZWJ1ZmZlcihYdC5GUkFNRUJVRkZFUixpdCl9fX19ZnVuY3Rpb24gY2UoKXthdC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNjZW5lXCIsdGhpcy5iYWNrZ3JvdW5kPW51bGwsdGhpcy5mb2c9bnVsbCx0aGlzLm92ZXJyaWRlTWF0ZXJpYWw9bnVsbCx0aGlzLmF1dG9VcGRhdGU9ITB9ZnVuY3Rpb24gaGUodCl7Vy5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNwcml0ZU1hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgcSgxNjc3NzIxNSksdGhpcy5tYXA9bnVsbCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5mb2c9ITEsdGhpcy5saWdodHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gZmUodCl7YXQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJTcHJpdGVcIix0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PXQ/dDpuZXcgaGV9ZnVuY3Rpb24gZGUodCl7Vy5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIkxpbmVCYXNpY01hdGVyaWFsXCIsdGhpcy5jb2xvcj1uZXcgcSgxNjc3NzIxNSksdGhpcy5saW5ld2lkdGg9MSx0aGlzLmxpbmVjYXA9XCJyb3VuZFwiLHRoaXMubGluZWpvaW49XCJyb3VuZFwiLHRoaXMubGlnaHRzPSExLHRoaXMuc2V0VmFsdWVzKHQpfWZ1bmN0aW9uIHBlKHQsZSxuKXtyZXR1cm4gMT09PW4/KGNvbnNvbGUud2FybihcIlRIUkVFLkxpbmU6IHBhcmFtZXRlciBUSFJFRS5MaW5lUGllY2VzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIENyZWF0ZWQgVEhSRUUuTGluZVNlZ21lbnRzIGluc3RlYWQuXCIpLG5ldyBnZSh0LGUpKTooYXQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJMaW5lXCIsdGhpcy5nZW9tZXRyeT12b2lkIDAhPT10P3Q6bmV3IE10LHZvaWQodGhpcy5tYXRlcmlhbD12b2lkIDAhPT1lP2U6bmV3IGRlKHtjb2xvcjoxNjc3NzIxNSpNYXRoLnJhbmRvbSgpfSkpKX1mdW5jdGlvbiBnZSh0LGUpe3BlLmNhbGwodGhpcyx0LGUpLHRoaXMudHlwZT1cIkxpbmVTZWdtZW50c1wifWZ1bmN0aW9uIHZlKHQpe1cuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJQb2ludHNNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHEoMTY3NzcyMTUpLHRoaXMubWFwPW51bGwsdGhpcy5zaXplPTEsdGhpcy5zaXplQXR0ZW51YXRpb249ITAsdGhpcy5saWdodHM9ITEsdGhpcy5zZXRWYWx1ZXModCl9ZnVuY3Rpb24gbWUodCxlKXthdC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlBvaW50c1wiLHRoaXMuZ2VvbWV0cnk9dm9pZCAwIT09dD90Om5ldyBNdCx0aGlzLm1hdGVyaWFsPXZvaWQgMCE9PWU/ZTpuZXcgdmUoe2NvbG9yOjE2Nzc3MjE1Kk1hdGgucmFuZG9tKCl9KX1mdW5jdGlvbiB5ZSgpe2F0LmNhbGwodGhpcyksdGhpcy50eXBlPVwiR3JvdXBcIn1mdW5jdGlvbiBfZSh0LGUsbixpLHIsbyl7U3QuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJUdWJlR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3BhdGg6dCx0dWJ1bGFyU2VnbWVudHM6ZSxyYWRpdXM6bixyYWRpYWxTZWdtZW50czppLGNsb3NlZDpyfSx2b2lkIDAhPT1vJiZjb25zb2xlLndhcm4oXCJUSFJFRS5UdWJlR2VvbWV0cnk6IHRhcGVyIGhhcyBiZWVuIHJlbW92ZWQuXCIpO3ZhciBhPW5ldyBiZSh0LGUsbixpLHIpO3RoaXMudGFuZ2VudHM9YS50YW5nZW50cyx0aGlzLm5vcm1hbHM9YS5ub3JtYWxzLHRoaXMuYmlub3JtYWxzPWEuYmlub3JtYWxzLHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KGEpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIGJlKHQsZSxpLHIsYSl7ZnVuY3Rpb24gcygpe2ZvcihmPTA7ZjxlO2YrKyl1KGYpO3UoYT09PSExP2U6MCksYygpLGwoKX1mdW5jdGlvbiB1KG4pe3ZhciBvPXQuZ2V0UG9pbnRBdChuL2UpLGE9aC5ub3JtYWxzW25dLHM9aC5iaW5vcm1hbHNbbl07Zm9yKGQ9MDtkPD1yO2QrKyl7dmFyIHU9ZC9yKk1hdGguUEkqMixsPU1hdGguc2luKHUpLGM9LU1hdGguY29zKHUpO2cueD1jKmEueCtsKnMueCxnLnk9YyphLnkrbCpzLnksZy56PWMqYS56K2wqcy56LGcubm9ybWFsaXplKCkseS5wdXNoKGcueCxnLnksZy56KSxwLng9by54K2kqZy54LHAueT1vLnkraSpnLnkscC56PW8ueitpKmcueixtLnB1c2gocC54LHAueSxwLnopfX1mdW5jdGlvbiBsKCl7Zm9yKGQ9MTtkPD1lO2QrKylmb3IoZj0xO2Y8PXI7ZisrKXt2YXIgdD0ocisxKSooZC0xKSsoZi0xKSxuPShyKzEpKmQrKGYtMSksaT0ocisxKSpkK2Ysbz0ocisxKSooZC0xKStmO2IucHVzaCh0LG4sbyksYi5wdXNoKG4saSxvKX19ZnVuY3Rpb24gYygpe2ZvcihmPTA7Zjw9ZTtmKyspZm9yKGQ9MDtkPD1yO2QrKyl2Lng9Zi9lLHYueT1kL3IsXy5wdXNoKHYueCx2LnkpfU10LmNhbGwodGhpcyksdGhpcy50eXBlPVwiVHViZUJ1ZmZlckdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtwYXRoOnQsdHVidWxhclNlZ21lbnRzOmUscmFkaXVzOmkscmFkaWFsU2VnbWVudHM6cixjbG9zZWQ6YX0sZT1lfHw2NCxpPWl8fDEscj1yfHw4LGE9YXx8ITE7dmFyIGg9dC5jb21wdXRlRnJlbmV0RnJhbWVzKGUsYSk7dGhpcy50YW5nZW50cz1oLnRhbmdlbnRzLHRoaXMubm9ybWFscz1oLm5vcm1hbHMsdGhpcy5iaW5vcm1hbHM9aC5iaW5vcm1hbHM7dmFyIGYsZCxwPW5ldyBuLGc9bmV3IG4sdj1uZXcgbyxtPVtdLHk9W10sXz1bXSxiPVtdO3MoKSx0aGlzLnNldEluZGV4KGIpLHRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgX3QobSwzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgX3QoeSwzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBfdChfLDIpKX1mdW5jdGlvbiB4ZSh0LGUsbixpLHIsbyxhKXtTdC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNwaGVyZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtyYWRpdXM6dCx3aWR0aFNlZ21lbnRzOmUsaGVpZ2h0U2VnbWVudHM6bixwaGlTdGFydDppLHBoaUxlbmd0aDpyLHRoZXRhU3RhcnQ6byx0aGV0YUxlbmd0aDphfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgd2UodCxlLG4saSxyLG8sYSkpLHRoaXMubWVyZ2VWZXJ0aWNlcygpfWZ1bmN0aW9uIHdlKHQsZSxpLHIsbyxhLHMpe010LmNhbGwodGhpcyksdGhpcy50eXBlPVwiU3BoZXJlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3JhZGl1czp0LHdpZHRoU2VnbWVudHM6ZSxoZWlnaHRTZWdtZW50czppLHBoaVN0YXJ0OnIscGhpTGVuZ3RoOm8sdGhldGFTdGFydDphLHRoZXRhTGVuZ3RoOnN9LHQ9dHx8NTAsZT1NYXRoLm1heCgzLE1hdGguZmxvb3IoZSl8fDgpLGk9TWF0aC5tYXgoMixNYXRoLmZsb29yKGkpfHw2KSxyPXZvaWQgMCE9PXI/cjowLG89dm9pZCAwIT09bz9vOjIqTWF0aC5QSSxhPXZvaWQgMCE9PWE/YTowLHM9dm9pZCAwIT09cz9zOk1hdGguUEk7dmFyIHUsbCxjPWErcyxoPTAsZj1bXSxkPW5ldyBuLHA9bmV3IG4sZz1bXSx2PVtdLG09W10seT1bXTtmb3IobD0wO2w8PWk7bCsrKXt2YXIgXz1bXSxiPWwvaTtmb3IodT0wO3U8PWU7dSsrKXt2YXIgeD11L2U7ZC54PS10Kk1hdGguY29zKHIreCpvKSpNYXRoLnNpbihhK2IqcyksZC55PXQqTWF0aC5jb3MoYStiKnMpLGQuej10Kk1hdGguc2luKHIreCpvKSpNYXRoLnNpbihhK2Iqcyksdi5wdXNoKGQueCxkLnksZC56KSxwLnNldChkLngsZC55LGQueikubm9ybWFsaXplKCksbS5wdXNoKHAueCxwLnkscC56KSx5LnB1c2goeCwxLWIpLF8ucHVzaChoKyspfWYucHVzaChfKX1mb3IobD0wO2w8aTtsKyspZm9yKHU9MDt1PGU7dSsrKXt2YXIgdz1mW2xdW3UrMV0sRT1mW2xdW3VdLFM9ZltsKzFdW3VdLE09ZltsKzFdW3UrMV07KDAhPT1sfHxhPjApJiZnLnB1c2godyxFLE0pLChsIT09aS0xfHxjPE1hdGguUEkpJiZnLnB1c2goRSxTLE0pfXRoaXMuc2V0SW5kZXgoZyksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBfdCh2LDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBfdChtLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IF90KHksMikpfWZ1bmN0aW9uIEVlKHQsZSl7U3QuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJTaGFwZUdlb21ldHJ5XCIsXCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZT9cInVuZGVmaW5lZFwiOnMoZSkpJiYoY29uc29sZS53YXJuKFwiVEhSRUUuU2hhcGVHZW9tZXRyeTogT3B0aW9ucyBwYXJhbWV0ZXIgaGFzIGJlZW4gcmVtb3ZlZC5cIiksZT1lLmN1cnZlU2VnbWVudHMpLHRoaXMucGFyYW1ldGVycz17c2hhcGVzOnQsY3VydmVTZWdtZW50czplfSx0aGlzLmZyb21CdWZmZXJHZW9tZXRyeShuZXcgU2UodCxlKSksdGhpcy5tZXJnZVZlcnRpY2VzKCl9ZnVuY3Rpb24gU2UodCxlKXtmdW5jdGlvbiBuKHQpe3ZhciBuLHMsbCxjPXIubGVuZ3RoLzMsaD10LmV4dHJhY3RQb2ludHMoZSksZj1oLnNoYXBlLGQ9aC5ob2xlcztpZihncy5pc0Nsb2NrV2lzZShmKT09PSExKWZvcihmPWYucmV2ZXJzZSgpLG49MCxzPWQubGVuZ3RoO248cztuKyspbD1kW25dLGdzLmlzQ2xvY2tXaXNlKGwpPT09ITAmJihkW25dPWwucmV2ZXJzZSgpKTt2YXIgcD1ncy50cmlhbmd1bGF0ZVNoYXBlKGYsZCk7Zm9yKG49MCxzPWQubGVuZ3RoO248cztuKyspbD1kW25dLGY9Zi5jb25jYXQobCk7Zm9yKG49MCxzPWYubGVuZ3RoO248cztuKyspe3ZhciBnPWZbbl07ci5wdXNoKGcueCxnLnksMCksby5wdXNoKDAsMCwxKSxhLnB1c2goZy54LGcueSl9Zm9yKG49MCxzPXAubGVuZ3RoO248cztuKyspe3ZhciB2PXBbbl0sbT12WzBdK2MseT12WzFdK2MsXz12WzJdK2M7aS5wdXNoKG0seSxfKSx1Kz0zfX1NdC5jYWxsKHRoaXMpLHRoaXMudHlwZT1cIlNoYXBlQnVmZmVyR2VvbWV0cnlcIix0aGlzLnBhcmFtZXRlcnM9e3NoYXBlczp0LGN1cnZlU2VnbWVudHM6ZX0sZT1lfHwxMjt2YXIgaT1bXSxyPVtdLG89W10sYT1bXSxzPTAsdT0wO2lmKEFycmF5LmlzQXJyYXkodCk9PT0hMSluKHQpO2Vsc2UgZm9yKHZhciBsPTA7bDx0Lmxlbmd0aDtsKyspbih0W2xdKSx0aGlzLmFkZEdyb3VwKHMsdSxsKSxzKz11LHU9MDt0aGlzLnNldEluZGV4KGkpLHRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgX3QociwzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJub3JtYWxcIixuZXcgX3QobywzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBfdChhLDIpKX1mdW5jdGlvbiBNZSh0LGUpe1N0LmNhbGwodGhpcyksdGhpcy50eXBlPVwiRXh0cnVkZUdlb21ldHJ5XCIsdGhpcy5wYXJhbWV0ZXJzPXtzaGFwZXM6dCxvcHRpb25zOmV9LHRoaXMuZnJvbUJ1ZmZlckdlb21ldHJ5KG5ldyBDZSh0LGUpKSx0aGlzLm1lcmdlVmVydGljZXMoKX1mdW5jdGlvbiBDZSh0LGUpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P3ZvaWQodD1bXSk6KE10LmNhbGwodGhpcyksdGhpcy50eXBlPVwiRXh0cnVkZUJ1ZmZlckdlb21ldHJ5XCIsdD1BcnJheS5pc0FycmF5KHQpP3Q6W3RdLHRoaXMuYWRkU2hhcGVMaXN0KHQsZSksdm9pZCB0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCkpfWZ1bmN0aW9uIEllKHQpe1cuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJNZXNoUGhvbmdNYXRlcmlhbFwiLHRoaXMuY29sb3I9bmV3IHEoMTY3NzcyMTUpLHRoaXMuc3BlY3VsYXI9bmV3IHEoMTExODQ4MSksdGhpcy5zaGluaW5lc3M9MzAsdGhpcy5tYXA9bnVsbCx0aGlzLmxpZ2h0TWFwPW51bGwsdGhpcy5saWdodE1hcEludGVuc2l0eT0xLHRoaXMuYW9NYXA9bnVsbCx0aGlzLmFvTWFwSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZT1uZXcgcSgwKSx0aGlzLmVtaXNzaXZlSW50ZW5zaXR5PTEsdGhpcy5lbWlzc2l2ZU1hcD1udWxsLHRoaXMuYnVtcE1hcD1udWxsLHRoaXMuYnVtcFNjYWxlPTEsdGhpcy5ub3JtYWxNYXA9bnVsbCx0aGlzLm5vcm1hbFNjYWxlPW5ldyBvKDEsMSksdGhpcy5kaXNwbGFjZW1lbnRNYXA9bnVsbCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPTEsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPTAsdGhpcy5zcGVjdWxhck1hcD1udWxsLHRoaXMuYWxwaGFNYXA9bnVsbCx0aGlzLmVudk1hcD1udWxsLHRoaXMuY29tYmluZT1DaSx0aGlzLnJlZmxlY3Rpdml0eT0xLHRoaXMucmVmcmFjdGlvblJhdGlvPS45OCx0aGlzLndpcmVmcmFtZT0hMSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD0xLHRoaXMud2lyZWZyYW1lTGluZWNhcD1cInJvdW5kXCIsdGhpcy53aXJlZnJhbWVMaW5lam9pbj1cInJvdW5kXCIsdGhpcy5za2lubmluZz0hMSx0aGlzLm1vcnBoVGFyZ2V0cz0hMSx0aGlzLm1vcnBoTm9ybWFscz0hMSx0aGlzLnNldFZhbHVlcyh0KX1mdW5jdGlvbiBPZSh0LGUsbil7dmFyIGk9dGhpcyxyPSExLG89MCxhPTA7dGhpcy5vblN0YXJ0PXZvaWQgMCx0aGlzLm9uTG9hZD10LHRoaXMub25Qcm9ncmVzcz1lLHRoaXMub25FcnJvcj1uLHRoaXMuaXRlbVN0YXJ0PWZ1bmN0aW9uKHQpe2ErKyxyPT09ITEmJnZvaWQgMCE9PWkub25TdGFydCYmaS5vblN0YXJ0KHQsbyxhKSxyPSEwfSx0aGlzLml0ZW1FbmQ9ZnVuY3Rpb24odCl7bysrLHZvaWQgMCE9PWkub25Qcm9ncmVzcyYmaS5vblByb2dyZXNzKHQsbyxhKSxvPT09YSYmKHI9ITEsdm9pZCAwIT09aS5vbkxvYWQmJmkub25Mb2FkKCkpfSx0aGlzLml0ZW1FcnJvcj1mdW5jdGlvbih0KXt2b2lkIDAhPT1pLm9uRXJyb3ImJmkub25FcnJvcih0KX19ZnVuY3Rpb24gVGUodCl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PXQ/dDp5c31mdW5jdGlvbiBQZSh0KXt0aGlzLm1hbmFnZXI9dm9pZCAwIT09dD90OnlzfWZ1bmN0aW9uIEFlKHQpe3RoaXMubWFuYWdlcj12b2lkIDAhPT10P3Q6eXN9ZnVuY3Rpb24gTGUodCl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PXQ/dDp5cyx0aGlzLnRleHR1cmVzPXt9fWZ1bmN0aW9uIE5lKCl7dGhpcy5vbkxvYWRTdGFydD1mdW5jdGlvbigpe30sdGhpcy5vbkxvYWRQcm9ncmVzcz1mdW5jdGlvbigpe30sdGhpcy5vbkxvYWRDb21wbGV0ZT1mdW5jdGlvbigpe319ZnVuY3Rpb24ga2UodCxlLG4saSl7dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnM9dCx0aGlzLl9jYWNoZWRJbmRleD0wLHRoaXMucmVzdWx0QnVmZmVyPXZvaWQgMCE9PWk/aTpuZXcgZS5jb25zdHJ1Y3RvcihuKSx0aGlzLnNhbXBsZVZhbHVlcz1lLHRoaXMudmFsdWVTaXplPW59ZnVuY3Rpb24gUmUodCxlLG4saSl7a2UuY2FsbCh0aGlzLHQsZSxuLGkpLHRoaXMuX3dlaWdodFByZXY9LTAsdGhpcy5fb2Zmc2V0UHJldj0tMCx0aGlzLl93ZWlnaHROZXh0PS0wLHRoaXMuX29mZnNldE5leHQ9LTB9ZnVuY3Rpb24gRGUodCxlLG4saSl7a2UuY2FsbCh0aGlzLHQsZSxuLGkpfWZ1bmN0aW9uIEZlKHQsZSxuLGkpe2tlLmNhbGwodGhpcyx0LGUsbixpKX1mdW5jdGlvbiBCZSh0LGUsbixpKXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcihcInRyYWNrIG5hbWUgaXMgdW5kZWZpbmVkXCIpO2lmKHZvaWQgMD09PWV8fDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJubyBrZXlmcmFtZXMgaW4gdHJhY2sgbmFtZWQgXCIrdCk7dGhpcy5uYW1lPXQsdGhpcy50aW1lcz1fcy5jb252ZXJ0QXJyYXkoZSx0aGlzLlRpbWVCdWZmZXJUeXBlKSx0aGlzLnZhbHVlcz1fcy5jb252ZXJ0QXJyYXkobix0aGlzLlZhbHVlQnVmZmVyVHlwZSksdGhpcy5zZXRJbnRlcnBvbGF0aW9uKGl8fHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pLHRoaXMudmFsaWRhdGUoKSx0aGlzLm9wdGltaXplKCl9ZnVuY3Rpb24gamUodCxlLG4saSl7QmUuY2FsbCh0aGlzLHQsZSxuLGkpfWZ1bmN0aW9uIFVlKHQsZSxuLGkpe2tlLmNhbGwodGhpcyx0LGUsbixpKX1mdW5jdGlvbiB6ZSh0LGUsbixpKXtCZS5jYWxsKHRoaXMsdCxlLG4saSl9ZnVuY3Rpb24gR2UodCxlLG4saSl7QmUuY2FsbCh0aGlzLHQsZSxuLGkpfWZ1bmN0aW9uIFZlKHQsZSxuLGkpe0JlLmNhbGwodGhpcyx0LGUsbixpKX1mdW5jdGlvbiBYZSh0LGUsbil7QmUuY2FsbCh0aGlzLHQsZSxuKX1mdW5jdGlvbiBIZSh0LGUsbixpKXtCZS5jYWxsKHRoaXMsdCxlLG4saSl9ZnVuY3Rpb24gcWUodCxlLG4saSl7QmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFllKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnRyYWNrcz1uLHRoaXMuZHVyYXRpb249dm9pZCAwIT09ZT9lOi0xLHRoaXMudXVpZD1Xci5nZW5lcmF0ZVVVSUQoKSx0aGlzLmR1cmF0aW9uPDAmJnRoaXMucmVzZXREdXJhdGlvbigpLHRoaXMub3B0aW1pemUoKX1mdW5jdGlvbiBXZSh0KXtcImJvb2xlYW5cIj09dHlwZW9mIHQmJihjb25zb2xlLndhcm4oXCJUSFJFRS5KU09OTG9hZGVyOiBzaG93U3RhdHVzIHBhcmFtZXRlciBoYXMgYmVlbiByZW1vdmVkIGZyb20gY29uc3RydWN0b3IuXCIpLHQ9dm9pZCAwKSx0aGlzLm1hbmFnZXI9dm9pZCAwIT09dD90OnlzLHRoaXMud2l0aENyZWRlbnRpYWxzPSExfWZ1bmN0aW9uIFplKHQsZSl7YXQuY2FsbCh0aGlzKSx0aGlzLnR5cGU9XCJMaWdodFwiLHRoaXMuY29sb3I9bmV3IHEodCksdGhpcy5pbnRlbnNpdHk9dm9pZCAwIT09ZT9lOjEsdGhpcy5yZWNlaXZlU2hhZG93PXZvaWQgMH1mdW5jdGlvbiBKZSh0LGUsbil7WmUuY2FsbCh0aGlzLHQsbiksdGhpcy50eXBlPVwiSGVtaXNwaGVyZUxpZ2h0XCIsdGhpcy5jYXN0U2hhZG93PXZvaWQgMCx0aGlzLnBvc2l0aW9uLmNvcHkoYXQuRGVmYXVsdFVwKSx0aGlzLnVwZGF0ZU1hdHJpeCgpLHRoaXMuZ3JvdW5kQ29sb3I9bmV3IHEoZSl9ZnVuY3Rpb24gS2UodCl7dGhpcy5jYW1lcmE9dCx0aGlzLmJpYXM9MCx0aGlzLnJhZGl1cz0xLHRoaXMubWFwU2l6ZT1uZXcgbyg1MTIsNTEyKSx0aGlzLm1hcD1udWxsLHRoaXMubWF0cml4PW5ldyBpfWZ1bmN0aW9uIFFlKCl7S2UuY2FsbCh0aGlzLG5ldyBBdCgtNSw1LDUsLTUsLjUsNTAwKSl9ZnVuY3Rpb24gJGUodCxlKXtaZS5jYWxsKHRoaXMsdCxlKSx0aGlzLnR5cGU9XCJEaXJlY3Rpb25hbExpZ2h0XCIsdGhpcy5wb3NpdGlvbi5jb3B5KGF0LkRlZmF1bHRVcCksdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzLnRhcmdldD1uZXcgYXQsdGhpcy5zaGFkb3c9bmV3IFFlfWZ1bmN0aW9uIHRuKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0JiYoY29uc29sZS53YXJuKFwiVEhSRUUuVW5pZm9ybTogVHlwZSBwYXJhbWV0ZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cIiksdD1hcmd1bWVudHNbMV0pLHRoaXMudmFsdWU9dH1mdW5jdGlvbiBlbih0LGUsbixpKXtcbnRoaXMucmF5PW5ldyBpdCh0LGUpLHRoaXMubmVhcj1ufHwwLHRoaXMuZmFyPWl8fDEvMCx0aGlzLnBhcmFtcz17TWVzaDp7fSxMaW5lOnt9LExPRDp7fSxQb2ludHM6e3RocmVzaG9sZDoxfSxTcHJpdGU6e319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGFyYW1zLHtQb2ludENsb3VkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuUmF5Y2FzdGVyOiBwYXJhbXMuUG9pbnRDbG91ZCBoYXMgYmVlbiByZW5hbWVkIHRvIHBhcmFtcy5Qb2ludHMuXCIpLHRoaXMuUG9pbnRzfX19KX1mdW5jdGlvbiBubih0LGUpe3JldHVybiB0LmRpc3RhbmNlLWUuZGlzdGFuY2V9ZnVuY3Rpb24gcm4odCxlLG4saSl7aWYodC52aXNpYmxlIT09ITEmJih0LnJheWNhc3QoZSxuKSxpPT09ITApKWZvcih2YXIgcj10LmNoaWxkcmVuLG89MCxhPXIubGVuZ3RoO288YTtvKyspcm4ocltvXSxlLG4sITApfWZ1bmN0aW9uIG9uKHQpe3RoaXMuYXV0b1N0YXJ0PXZvaWQgMD09PXR8fHQsdGhpcy5zdGFydFRpbWU9MCx0aGlzLm9sZFRpbWU9MCx0aGlzLmVsYXBzZWRUaW1lPTAsdGhpcy5ydW5uaW5nPSExfWZ1bmN0aW9uIGFuKHQsZSxuKXtyZXR1cm4gdGhpcy5yYWRpdXM9dm9pZCAwIT09dD90OjEsdGhpcy5waGk9dm9pZCAwIT09ZT9lOjAsdGhpcy50aGV0YT12b2lkIDAhPT1uP246MCx0aGlzfWZ1bmN0aW9uIHNuKHQsZSl7dGhpcy5taW49dm9pZCAwIT09dD90Om5ldyBvKCsoMS8wKSwrKDEvMCkpLHRoaXMubWF4PXZvaWQgMCE9PWU/ZTpuZXcgbygtKDEvMCksLSgxLzApKX1mdW5jdGlvbiB1bigpe3RoaXMuYXJjTGVuZ3RoRGl2aXNpb25zPTIwMH1mdW5jdGlvbiBsbigpe2Z1bmN0aW9uIHQodCxvLGEscyl7ZT10LG49YSxpPS0zKnQrMypvLTIqYS1zLHI9Mip0LTIqbythK3N9dmFyIGU9MCxuPTAsaT0wLHI9MDtyZXR1cm57aW5pdENhdG11bGxSb206ZnVuY3Rpb24oZSxuLGkscixvKXt0KG4saSxvKihpLWUpLG8qKHItbikpfSxpbml0Tm9udW5pZm9ybUNhdG11bGxSb206ZnVuY3Rpb24oZSxuLGkscixvLGEscyl7dmFyIHU9KG4tZSkvby0oaS1lKS8obythKSsoaS1uKS9hLGw9KGktbikvYS0oci1uKS8oYStzKSsoci1pKS9zO3UqPWEsbCo9YSx0KG4saSx1LGwpfSxjYWxjOmZ1bmN0aW9uKHQpe3ZhciBvPXQqdCxhPW8qdDtyZXR1cm4gZStuKnQraSpvK3IqYX19fWZ1bmN0aW9uIGNuKHQpe3VuLmNhbGwodGhpcyksdGhpcy5wb2ludHM9dHx8W10sdGhpcy5jbG9zZWQ9ITF9ZnVuY3Rpb24gaG4odCxlKXt1bi5jYWxsKHRoaXMpLHRoaXMudjE9dCx0aGlzLnYyPWV9ZnVuY3Rpb24gZm4odCxlKXt1bi5jYWxsKHRoaXMpLHRoaXMudjE9dCx0aGlzLnYyPWV9ZnVuY3Rpb24gZG4oKXt1bi5jYWxsKHRoaXMpLHRoaXMuY3VydmVzPVtdLHRoaXMuYXV0b0Nsb3NlPSExfWZ1bmN0aW9uIHBuKHQsZSxuLGkscixvLGEscyl7dW4uY2FsbCh0aGlzKSx0aGlzLmFYPXQsdGhpcy5hWT1lLHRoaXMueFJhZGl1cz1uLHRoaXMueVJhZGl1cz1pLHRoaXMuYVN0YXJ0QW5nbGU9cix0aGlzLmFFbmRBbmdsZT1vLHRoaXMuYUNsb2Nrd2lzZT1hLHRoaXMuYVJvdGF0aW9uPXN8fDB9ZnVuY3Rpb24gZ24odCxlLG4saSxyKXt2YXIgbz0uNSooaS1lKSxhPS41KihyLW4pLHM9dCp0LHU9dCpzO3JldHVybigyKm4tMippK28rYSkqdSsoLTMqbiszKmktMipvLWEpKnMrbyp0K259ZnVuY3Rpb24gdm4odCxlKXt2YXIgbj0xLXQ7cmV0dXJuIG4qbiplfWZ1bmN0aW9uIG1uKHQsZSl7cmV0dXJuIDIqKDEtdCkqdCplfWZ1bmN0aW9uIHluKHQsZSl7cmV0dXJuIHQqdCplfWZ1bmN0aW9uIF9uKHQsZSxuLGkpe3JldHVybiB2bih0LGUpK21uKHQsbikreW4odCxpKX1mdW5jdGlvbiBibih0LGUpe3ZhciBuPTEtdDtyZXR1cm4gbipuKm4qZX1mdW5jdGlvbiB4bih0LGUpe3ZhciBuPTEtdDtyZXR1cm4gMypuKm4qdCplfWZ1bmN0aW9uIHduKHQsZSl7cmV0dXJuIDMqKDEtdCkqdCp0KmV9ZnVuY3Rpb24gRW4odCxlKXtyZXR1cm4gdCp0KnQqZX1mdW5jdGlvbiBTbih0LGUsbixpLHIpe3JldHVybiBibih0LGUpK3huKHQsbikrd24odCxpKStFbih0LHIpfWZ1bmN0aW9uIE1uKHQpe3VuLmNhbGwodGhpcyksdGhpcy5wb2ludHM9dm9pZCAwPT09dD9bXTp0fWZ1bmN0aW9uIENuKHQsZSxuLGkpe3VuLmNhbGwodGhpcyksdGhpcy52MD10LHRoaXMudjE9ZSx0aGlzLnYyPW4sdGhpcy52Mz1pfWZ1bmN0aW9uIEluKHQsZSxuKXt1bi5jYWxsKHRoaXMpLHRoaXMudjA9dCx0aGlzLnYxPWUsdGhpcy52Mj1ufWZ1bmN0aW9uIE9uKHQpe2RuLmNhbGwodGhpcyksdGhpcy5jdXJyZW50UG9pbnQ9bmV3IG8sdCYmdGhpcy5mcm9tUG9pbnRzKHQpfWZ1bmN0aW9uIFRuKCl7T24uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuaG9sZXM9W119ZnVuY3Rpb24gUG4oKXt0aGlzLnN1YlBhdGhzPVtdLHRoaXMuY3VycmVudFBhdGg9bnVsbH12b2lkIDA9PT1OdW1iZXIuRVBTSUxPTiYmKE51bWJlci5FUFNJTE9OPU1hdGgucG93KDIsLTUyKSksdm9pZCAwPT09TnVtYmVyLmlzSW50ZWdlciYmKE51bWJlci5pc0ludGVnZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmlzRmluaXRlKHQpJiZNYXRoLmZsb29yKHQpPT09dH0pLHZvaWQgMD09PU1hdGguc2lnbiYmKE1hdGguc2lnbj1mdW5jdGlvbih0KXtyZXR1cm4gdDwwPy0xOnQ+MD8xOit0fSksdm9pZCAwPT09RnVuY3Rpb24ucHJvdG90eXBlLm5hbWUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCJuYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkubWF0Y2goL15cXHMqZnVuY3Rpb25cXHMqKFteXFwoXFxzXSopLylbMV19fSksdm9pZCAwPT09YSYmIWZ1bmN0aW9uKCl7YT1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgZT1PYmplY3QodCksbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspe3ZhciBpPWFyZ3VtZW50c1tuXTtpZih2b2lkIDAhPT1pJiZudWxsIT09aSlmb3IodmFyIHIgaW4gaSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxyKSYmKGVbcl09aVtyXSl9cmV0dXJuIGV9fSgpO3ZhciBBbj1cIjg1ZGV2XCIsTG49e0xFRlQ6MCxNSURETEU6MSxSSUdIVDoyfSxObj0wLGtuPTEsUm49MixEbj0zLEZuPTAsQm49MSxqbj0wLFVuPTEsem49MixHbj0wLFZuPTEsWG49MixIbj0xLHFuPTIsWW49MCxXbj0xLFpuPTIsSm49MCxLbj0xLFFuPTIsJG49Myx0aT00LGVpPTUsbmk9MTAwLGlpPTEwMSxyaT0xMDIsb2k9MTAzLGFpPTEwNCxzaT0yMDAsdWk9MjAxLGxpPTIwMixjaT0yMDMsaGk9MjA0LGZpPTIwNSxkaT0yMDYscGk9MjA3LGdpPTIwOCx2aT0yMDksbWk9MjEwLHlpPTAsX2k9MSxiaT0yLHhpPTMsd2k9NCxFaT01LFNpPTYsTWk9NyxDaT0wLElpPTEsT2k9MixUaT0wLFBpPTEsQWk9MixMaT0zLE5pPTQsa2k9MzAwLFJpPTMwMSxEaT0zMDIsRmk9MzAzLEJpPTMwNCxqaT0zMDUsVWk9MzA2LHppPTMwNyxHaT0xZTMsVmk9MTAwMSxYaT0xMDAyLEhpPTEwMDMscWk9MTAwNCxZaT0xMDA1LFdpPTEwMDYsWmk9MTAwNyxKaT0xMDA4LEtpPTEwMDksUWk9MTAxMCwkaT0xMDExLHRyPTEwMTIsZXI9MTAxMyxucj0xMDE0LGlyPTEwMTUscnI9MTAxNixvcj0xMDE3LGFyPTEwMTgsc3I9MTAxOSx1cj0xMDIwLGxyPTEwMjEsY3I9MTAyMixocj0xMDIzLGZyPTEwMjQsZHI9MTAyNSxwcj1ocixncj0xMDI2LHZyPTEwMjcsbXI9MjAwMSx5cj0yMDAyLF9yPTIwMDMsYnI9MjAwNCx4cj0yMTAwLHdyPTIxMDEsRXI9MjEwMixTcj0yMTAzLE1yPTIxNTEsQ3I9MjIwMCxJcj0yMjAxLE9yPTIyMDIsVHI9MjMwMCxQcj0yMzAxLEFyPTIzMDIsTHI9MjQwMCxOcj0yNDAxLGtyPTI0MDIsUnI9MCxEcj0xLEZyPTIsQnI9M2UzLGpyPTMwMDEsVXI9MzAwNyx6cj0zMDAyLEdyPTMwMDMsVnI9MzAwNCxYcj0zMDA1LEhyPTMwMDYscXI9MzIwMCxZcj0zMjAxLFdyPXtERUcyUkFEOk1hdGguUEkvMTgwLFJBRDJERUc6MTgwL01hdGguUEksZ2VuZXJhdGVVVUlEOmZ1bmN0aW9uKCl7dmFyIHQsZT1cIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIuc3BsaXQoXCJcIiksbj1uZXcgQXJyYXkoMzYpLGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9MDtyPDM2O3IrKyk4PT09cnx8MTM9PT1yfHwxOD09PXJ8fDIzPT09cj9uW3JdPVwiLVwiOjE0PT09cj9uW3JdPVwiNFwiOihpPD0yJiYoaT0zMzU1NDQzMisxNjc3NzIxNipNYXRoLnJhbmRvbSgpfDApLHQ9MTUmaSxpPj49NCxuW3JdPWVbMTk9PT1yPzMmdHw4OnRdKTtyZXR1cm4gbi5qb2luKFwiXCIpfX0oKSxjbGFtcDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIE1hdGgubWF4KGUsTWF0aC5taW4obix0KSl9LGV1Y2xpZGVhbk1vZHVsbzpmdW5jdGlvbih0LGUpe3JldHVybih0JWUrZSklZX0sbWFwTGluZWFyOmZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuIGkrKHQtZSkqKHItaSkvKG4tZSl9LGxlcnA6ZnVuY3Rpb24odCxlLG4pe3JldHVybigxLW4pKnQrbiplfSxzbW9vdGhzdGVwOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdDw9ZT8wOnQ+PW4/MToodD0odC1lKS8obi1lKSx0KnQqKDMtMip0KSl9LHNtb290aGVyc3RlcDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQ8PWU/MDp0Pj1uPzE6KHQ9KHQtZSkvKG4tZSksdCp0KnQqKHQqKDYqdC0xNSkrMTApKX0scmFuZEludDpmdW5jdGlvbih0LGUpe3JldHVybiB0K01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooZS10KzEpKX0scmFuZEZsb2F0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrTWF0aC5yYW5kb20oKSooZS10KX0scmFuZEZsb2F0U3ByZWFkOmZ1bmN0aW9uKHQpe3JldHVybiB0KiguNS1NYXRoLnJhbmRvbSgpKX0sZGVnVG9SYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqV3IuREVHMlJBRH0scmFkVG9EZWc6ZnVuY3Rpb24odCl7cmV0dXJuIHQqV3IuUkFEMkRFR30saXNQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09KHQmdC0xKSYmMCE9PXR9LG5lYXJlc3RQb3dlck9mVHdvOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnBvdygyLE1hdGgucm91bmQoTWF0aC5sb2codCkvTWF0aC5MTjIpKX0sbmV4dFBvd2VyT2ZUd286ZnVuY3Rpb24odCl7cmV0dXJuIHQtLSx0fD10Pj4xLHR8PXQ+PjIsdHw9dD4+NCx0fD10Pj44LHR8PXQ+PjE2LHQrKyx0fX07YShlLHtzbGVycDpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gbi5jb3B5KHQpLnNsZXJwKGUsaSl9LHNsZXJwRmxhdDpmdW5jdGlvbih0LGUsbixpLHIsbyxhKXt2YXIgcz1uW2krMF0sdT1uW2krMV0sbD1uW2krMl0sYz1uW2krM10saD1yW28rMF0sZj1yW28rMV0sZD1yW28rMl0scD1yW28rM107aWYoYyE9PXB8fHMhPT1ofHx1IT09Znx8bCE9PWQpe3ZhciBnPTEtYSx2PXMqaCt1KmYrbCpkK2MqcCxtPXY+PTA/MTotMSx5PTEtdip2O2lmKHk+TnVtYmVyLkVQU0lMT04pe3ZhciBfPU1hdGguc3FydCh5KSxiPU1hdGguYXRhbjIoXyx2Km0pO2c9TWF0aC5zaW4oZypiKS9fLGE9TWF0aC5zaW4oYSpiKS9ffXZhciB4PWEqbTtpZihzPXMqZytoKngsdT11KmcrZip4LGw9bCpnK2QqeCxjPWMqZytwKngsZz09PTEtYSl7dmFyIHc9MS9NYXRoLnNxcnQocypzK3UqdStsKmwrYypjKTtzKj13LHUqPXcsbCo9dyxjKj13fX10W2VdPXMsdFtlKzFdPXUsdFtlKzJdPWwsdFtlKzNdPWN9fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUse3g6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feD10LHRoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0seTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3l9LHNldDpmdW5jdGlvbih0KXt0aGlzLl95PXQsdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSx6OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fen0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3o9dCx0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHc6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdz10LHRoaXMub25DaGFuZ2VDYWxsYmFjaygpfX19KSxhKGUucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHRoaXMuX3g9dCx0aGlzLl95PWUsdGhpcy5fej1uLHRoaXMuX3c9aSx0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl93KX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5feD10LngsdGhpcy5feT10LnksdGhpcy5fej10LnosdGhpcy5fdz10LncsdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sc2V0RnJvbUV1bGVyOmZ1bmN0aW9uKHQsZSl7aWYoKHQmJnQuaXNFdWxlcik9PT0hMSl0aHJvdyBuZXcgRXJyb3IoXCJUSFJFRS5RdWF0ZXJuaW9uOiAuc2V0RnJvbUV1bGVyKCkgbm93IGV4cGVjdHMgYW4gRXVsZXIgcm90YXRpb24gcmF0aGVyIHRoYW4gYSBWZWN0b3IzIGFuZCBvcmRlci5cIik7dmFyIG49dC5feCxpPXQuX3kscj10Ll96LG89dC5vcmRlcixhPU1hdGguY29zLHM9TWF0aC5zaW4sdT1hKG4vMiksbD1hKGkvMiksYz1hKHIvMiksaD1zKG4vMiksZj1zKGkvMiksZD1zKHIvMik7cmV0dXJuXCJYWVpcIj09PW8/KHRoaXMuX3g9aCpsKmMrdSpmKmQsdGhpcy5feT11KmYqYy1oKmwqZCx0aGlzLl96PXUqbCpkK2gqZipjLHRoaXMuX3c9dSpsKmMtaCpmKmQpOlwiWVhaXCI9PT1vPyh0aGlzLl94PWgqbCpjK3UqZipkLHRoaXMuX3k9dSpmKmMtaCpsKmQsdGhpcy5fej11KmwqZC1oKmYqYyx0aGlzLl93PXUqbCpjK2gqZipkKTpcIlpYWVwiPT09bz8odGhpcy5feD1oKmwqYy11KmYqZCx0aGlzLl95PXUqZipjK2gqbCpkLHRoaXMuX3o9dSpsKmQraCpmKmMsdGhpcy5fdz11KmwqYy1oKmYqZCk6XCJaWVhcIj09PW8/KHRoaXMuX3g9aCpsKmMtdSpmKmQsdGhpcy5feT11KmYqYytoKmwqZCx0aGlzLl96PXUqbCpkLWgqZipjLHRoaXMuX3c9dSpsKmMraCpmKmQpOlwiWVpYXCI9PT1vPyh0aGlzLl94PWgqbCpjK3UqZipkLHRoaXMuX3k9dSpmKmMraCpsKmQsdGhpcy5fej11KmwqZC1oKmYqYyx0aGlzLl93PXUqbCpjLWgqZipkKTpcIlhaWVwiPT09byYmKHRoaXMuX3g9aCpsKmMtdSpmKmQsdGhpcy5feT11KmYqYy1oKmwqZCx0aGlzLl96PXUqbCpkK2gqZipjLHRoaXMuX3c9dSpsKmMraCpmKmQpLGUhPT0hMSYmdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sc2V0RnJvbUF4aXNBbmdsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUvMixpPU1hdGguc2luKG4pO3JldHVybiB0aGlzLl94PXQueCppLHRoaXMuX3k9dC55KmksdGhpcy5fej10LnoqaSx0aGlzLl93PU1hdGguY29zKG4pLHRoaXMub25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbih0KXt2YXIgZSxuPXQuZWxlbWVudHMsaT1uWzBdLHI9bls0XSxvPW5bOF0sYT1uWzFdLHM9bls1XSx1PW5bOV0sbD1uWzJdLGM9bls2XSxoPW5bMTBdLGY9aStzK2g7cmV0dXJuIGY+MD8oZT0uNS9NYXRoLnNxcnQoZisxKSx0aGlzLl93PS4yNS9lLHRoaXMuX3g9KGMtdSkqZSx0aGlzLl95PShvLWwpKmUsdGhpcy5fej0oYS1yKSplKTppPnMmJmk+aD8oZT0yKk1hdGguc3FydCgxK2ktcy1oKSx0aGlzLl93PShjLXUpL2UsdGhpcy5feD0uMjUqZSx0aGlzLl95PShyK2EpL2UsdGhpcy5fej0obytsKS9lKTpzPmg/KGU9MipNYXRoLnNxcnQoMStzLWktaCksdGhpcy5fdz0oby1sKS9lLHRoaXMuX3g9KHIrYSkvZSx0aGlzLl95PS4yNSplLHRoaXMuX3o9KHUrYykvZSk6KGU9MipNYXRoLnNxcnQoMStoLWktcyksdGhpcy5fdz0oYS1yKS9lLHRoaXMuX3g9KG8rbCkvZSx0aGlzLl95PSh1K2MpL2UsdGhpcy5fej0uMjUqZSksdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sc2V0RnJvbVVuaXRWZWN0b3JzOmZ1bmN0aW9uKCl7dmFyIHQsZT1uZXcgbixpPTFlLTY7cmV0dXJuIGZ1bmN0aW9uKHIsbyl7cmV0dXJuIHZvaWQgMD09PWUmJihlPW5ldyBuKSx0PXIuZG90KG8pKzEsdDxpPyh0PTAsTWF0aC5hYnMoci54KT5NYXRoLmFicyhyLnopP2Uuc2V0KC1yLnksci54LDApOmUuc2V0KDAsLXIueixyLnkpKTplLmNyb3NzVmVjdG9ycyhyLG8pLHRoaXMuX3g9ZS54LHRoaXMuX3k9ZS55LHRoaXMuX3o9ZS56LHRoaXMuX3c9dCx0aGlzLm5vcm1hbGl6ZSgpfX0oKSxpbnZlcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uanVnYXRlKCkubm9ybWFsaXplKCl9LGNvbmp1Z2F0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94Kj0tMSx0aGlzLl95Kj0tMSx0aGlzLl96Kj0tMSx0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfSxkb3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3gqdC5feCt0aGlzLl95KnQuX3krdGhpcy5feip0Ll96K3RoaXMuX3cqdC5fd30sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feCp0aGlzLl94K3RoaXMuX3kqdGhpcy5feSt0aGlzLl96KnRoaXMuX3ordGhpcy5fdyp0aGlzLl93fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuX3gqdGhpcy5feCt0aGlzLl95KnRoaXMuX3krdGhpcy5feip0aGlzLl96K3RoaXMuX3cqdGhpcy5fdyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMubGVuZ3RoKCk7cmV0dXJuIDA9PT10Pyh0aGlzLl94PTAsdGhpcy5feT0wLHRoaXMuX3o9MCx0aGlzLl93PTEpOih0PTEvdCx0aGlzLl94PXRoaXMuX3gqdCx0aGlzLl95PXRoaXMuX3kqdCx0aGlzLl96PXRoaXMuX3oqdCx0aGlzLl93PXRoaXMuX3cqdCksdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuUXVhdGVybmlvbjogLm11bHRpcGx5KCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAubXVsdGlwbHlRdWF0ZXJuaW9ucyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0LGUpKTp0aGlzLm11bHRpcGx5UXVhdGVybmlvbnModGhpcyx0KX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdGlwbHlRdWF0ZXJuaW9ucyh0LHRoaXMpfSxtdWx0aXBseVF1YXRlcm5pb25zOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5feCxpPXQuX3kscj10Ll96LG89dC5fdyxhPWUuX3gscz1lLl95LHU9ZS5feixsPWUuX3c7cmV0dXJuIHRoaXMuX3g9bipsK28qYStpKnUtcipzLHRoaXMuX3k9aSpsK28qcytyKmEtbip1LHRoaXMuX3o9cipsK28qdStuKnMtaSphLHRoaXMuX3c9bypsLW4qYS1pKnMtcip1LHRoaXMub25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9LHNsZXJwOmZ1bmN0aW9uKHQsZSl7aWYoMD09PWUpcmV0dXJuIHRoaXM7aWYoMT09PWUpcmV0dXJuIHRoaXMuY29weSh0KTt2YXIgbj10aGlzLl94LGk9dGhpcy5feSxyPXRoaXMuX3osbz10aGlzLl93LGE9byp0Ll93K24qdC5feCtpKnQuX3krcip0Ll96O2lmKGE8MD8odGhpcy5fdz0tdC5fdyx0aGlzLl94PS10Ll94LHRoaXMuX3k9LXQuX3ksdGhpcy5fej0tdC5feixhPS1hKTp0aGlzLmNvcHkodCksYT49MSlyZXR1cm4gdGhpcy5fdz1vLHRoaXMuX3g9bix0aGlzLl95PWksdGhpcy5fej1yLHRoaXM7dmFyIHM9TWF0aC5zcXJ0KDEtYSphKTtpZihNYXRoLmFicyhzKTwuMDAxKXJldHVybiB0aGlzLl93PS41KihvK3RoaXMuX3cpLHRoaXMuX3g9LjUqKG4rdGhpcy5feCksdGhpcy5feT0uNSooaSt0aGlzLl95KSx0aGlzLl96PS41KihyK3RoaXMuX3opLHRoaXM7dmFyIHU9TWF0aC5hdGFuMihzLGEpLGw9TWF0aC5zaW4oKDEtZSkqdSkvcyxjPU1hdGguc2luKGUqdSkvcztyZXR1cm4gdGhpcy5fdz1vKmwrdGhpcy5fdypjLHRoaXMuX3g9bipsK3RoaXMuX3gqYyx0aGlzLl95PWkqbCt0aGlzLl95KmMsdGhpcy5fej1yKmwrdGhpcy5feipjLHRoaXMub25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdC5feD09PXRoaXMuX3gmJnQuX3k9PT10aGlzLl95JiZ0Ll96PT09dGhpcy5feiYmdC5fdz09PXRoaXMuX3d9LGZyb21BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLl94PXRbZV0sdGhpcy5feT10W2UrMV0sdGhpcy5fej10W2UrMl0sdGhpcy5fdz10W2UrM10sdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sdG9BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09ZSYmKGU9MCksdFtlXT10aGlzLl94LHRbZSsxXT10aGlzLl95LHRbZSsyXT10aGlzLl96LHRbZSszXT10aGlzLl93LHR9LG9uQ2hhbmdlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2s9dCx0aGlzfSxvbkNoYW5nZUNhbGxiYWNrOmZ1bmN0aW9uKCl7fX0pLGEobi5wcm90b3R5cGUse2lzVmVjdG9yMzohMCxzZXQ6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLng9dCx0aGlzLnk9ZSx0aGlzLno9bix0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD10LHRoaXMueT10LHRoaXMuej10LHRoaXN9LHNldFg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD10LHRoaXN9LHNldFk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueT10LHRoaXN9LHNldFo6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuej10LHRoaXN9LHNldENvbXBvbmVudDpmdW5jdGlvbih0LGUpe3N3aXRjaCh0KXtjYXNlIDA6dGhpcy54PWU7YnJlYWs7Y2FzZSAxOnRoaXMueT1lO2JyZWFrO2Nhc2UgMjp0aGlzLno9ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnopfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy56PXQueix0aGlzfSxhZGQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnModCxlKSk6KHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXMueis9dC56LHRoaXMpfSxhZGRTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dCx0aGlzLnkrPXQsdGhpcy56Kz10LHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PXQueCtlLngsdGhpcy55PXQueStlLnksdGhpcy56PXQueitlLnosdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueCs9dC54KmUsdGhpcy55Kz10LnkqZSx0aGlzLnorPXQueiplLHRoaXN9LHN1YjpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyh0LGUpKToodGhpcy54LT10LngsdGhpcy55LT10LnksdGhpcy56LT10LnosdGhpcyl9LHN1YlNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LHRoaXMueS09dCx0aGlzLnotPXQsdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzLno9dC56LWUueix0aGlzfSxtdWx0aXBseTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IzOiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseVZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLm11bHRpcGx5VmVjdG9ycyh0LGUpKToodGhpcy54Kj10LngsdGhpcy55Kj10LnksdGhpcy56Kj10LnosdGhpcyl9LG11bHRpcGx5U2NhbGFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXMueio9dCx0aGlzfSxtdWx0aXBseVZlY3RvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PXQueCplLngsdGhpcy55PXQueSplLnksdGhpcy56PXQueiplLnosdGhpc30sYXBwbHlFdWxlcjpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4oZSYmZS5pc0V1bGVyKT09PSExJiZjb25zb2xlLmVycm9yKFwiVEhSRUUuVmVjdG9yMzogLmFwcGx5RXVsZXIoKSBub3cgZXhwZWN0cyBhbiBFdWxlciByb3RhdGlvbiByYXRoZXIgdGhhbiBhIFZlY3RvcjMgYW5kIG9yZGVyLlwiKSx0aGlzLmFwcGx5UXVhdGVybmlvbih0LnNldEZyb21FdWxlcihlKSl9fSgpLGFwcGx5QXhpc0FuZ2xlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIHRoaXMuYXBwbHlRdWF0ZXJuaW9uKHQuc2V0RnJvbUF4aXNBbmdsZShlLG4pKX19KCksYXBwbHlNYXRyaXgzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueCxuPXRoaXMueSxpPXRoaXMueixyPXQuZWxlbWVudHM7cmV0dXJuIHRoaXMueD1yWzBdKmUrclszXSpuK3JbNl0qaSx0aGlzLnk9clsxXSplK3JbNF0qbityWzddKmksdGhpcy56PXJbMl0qZStyWzVdKm4rcls4XSppLHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLngsbj10aGlzLnksaT10aGlzLnoscj10LmVsZW1lbnRzO3RoaXMueD1yWzBdKmUrcls0XSpuK3JbOF0qaStyWzEyXSx0aGlzLnk9clsxXSplK3JbNV0qbityWzldKmkrclsxM10sdGhpcy56PXJbMl0qZStyWzZdKm4rclsxMF0qaStyWzE0XTt2YXIgbz1yWzNdKmUrcls3XSpuK3JbMTFdKmkrclsxNV07cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKG8pfSxhcHBseVF1YXRlcm5pb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LG49dGhpcy55LGk9dGhpcy56LHI9dC54LG89dC55LGE9dC56LHM9dC53LHU9cyplK28qaS1hKm4sbD1zKm4rYSplLXIqaSxjPXMqaStyKm4tbyplLGg9LXIqZS1vKm4tYSppO3JldHVybiB0aGlzLng9dSpzK2gqLXIrbCotYS1jKi1vLHRoaXMueT1sKnMraCotbytjKi1yLXUqLWEsdGhpcy56PWMqcytoKi1hK3UqLW8tbCotcix0aGlzfSxwcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0Lm11bHRpcGx5TWF0cmljZXMoZS5wcm9qZWN0aW9uTWF0cml4LHQuZ2V0SW52ZXJzZShlLm1hdHJpeFdvcmxkKSksdGhpcy5hcHBseU1hdHJpeDQodCl9fSgpLHVucHJvamVjdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5tdWx0aXBseU1hdHJpY2VzKGUubWF0cml4V29ybGQsdC5nZXRJbnZlcnNlKGUucHJvamVjdGlvbk1hdHJpeCkpLHRoaXMuYXBwbHlNYXRyaXg0KHQpfX0oKSx0cmFuc2Zvcm1EaXJlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LG49dGhpcy55LGk9dGhpcy56LHI9dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PXJbMF0qZStyWzRdKm4rcls4XSppLHRoaXMueT1yWzFdKmUrcls1XSpuK3JbOV0qaSx0aGlzLno9clsyXSplK3JbNl0qbityWzEwXSppLHRoaXMubm9ybWFsaXplKCl9LGRpdmlkZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Lz10LngsdGhpcy55Lz10LnksdGhpcy56Lz10LnosdGhpc30sZGl2aWRlU2NhbGFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKDEvdCl9LG1pbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWluKHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC55KSx0aGlzLno9TWF0aC5taW4odGhpcy56LHQueiksdGhpc30sbWF4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodGhpcy54LHQueCksdGhpcy55PU1hdGgubWF4KHRoaXMueSx0LnkpLHRoaXMuej1NYXRoLm1heCh0aGlzLnosdC56KSx0aGlzfSxjbGFtcDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodC54LE1hdGgubWluKGUueCx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodC55LE1hdGgubWluKGUueSx0aGlzLnkpKSx0aGlzLno9TWF0aC5tYXgodC56LE1hdGgubWluKGUueix0aGlzLnopKSx0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIHQuc2V0KG4sbixuKSxlLnNldChpLGksaSksdGhpcy5jbGFtcCh0LGUpfX0oKSxjbGFtcExlbmd0aDpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubGVuZ3RoKCk7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoTWF0aC5tYXgodCxNYXRoLm1pbihlLG4pKS9uKX0sZmxvb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGguZmxvb3IodGhpcy54KSx0aGlzLnk9TWF0aC5mbG9vcih0aGlzLnkpLHRoaXMuej1NYXRoLmZsb29yKHRoaXMueiksdGhpc30sY2VpbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5jZWlsKHRoaXMueCksdGhpcy55PU1hdGguY2VpbCh0aGlzLnkpLHRoaXMuej1NYXRoLmNlaWwodGhpcy56KSx0aGlzfSxyb3VuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpLHRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSksdGhpcy56PU1hdGgucm91bmQodGhpcy56KSx0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSksdGhpcy56PXRoaXMuejwwP01hdGguY2VpbCh0aGlzLnopOk1hdGguZmxvb3IodGhpcy56KSx0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PS10aGlzLngsdGhpcy55PS10aGlzLnksdGhpcy56PS10aGlzLnosdGhpc30sZG90OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQuen0sbGVuZ3RoU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnp9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55K3RoaXMueip0aGlzLnopfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueil9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpdmlkZVNjYWxhcih0aGlzLmxlbmd0aCgpKX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKHQvdGhpcy5sZW5ndGgoKSl9LGxlcnA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXMueis9KHQuei10aGlzLnopKmUsdGhpc30sbGVycFZlY3RvcnM6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnN1YlZlY3RvcnMoZSx0KS5tdWx0aXBseVNjYWxhcihuKS5hZGQodCl9LGNyb3NzOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwIT09ZSlyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMzogLmNyb3NzKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuY3Jvc3NWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5jcm9zc1ZlY3RvcnModCxlKTt2YXIgbj10aGlzLngsaT10aGlzLnkscj10aGlzLno7cmV0dXJuIHRoaXMueD1pKnQuei1yKnQueSx0aGlzLnk9cip0Lngtbip0LnosdGhpcy56PW4qdC55LWkqdC54LHRoaXN9LGNyb3NzVmVjdG9yczpmdW5jdGlvbih0LGUpe3ZhciBuPXQueCxpPXQueSxyPXQueixvPWUueCxhPWUueSxzPWUuejtyZXR1cm4gdGhpcy54PWkqcy1yKmEsdGhpcy55PXIqby1uKnMsdGhpcy56PW4qYS1pKm8sdGhpc30scHJvamVjdE9uVmVjdG9yOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZG90KHRoaXMpL3QubGVuZ3RoU3EoKTtyZXR1cm4gdGhpcy5jb3B5KHQpLm11bHRpcGx5U2NhbGFyKGUpfSxwcm9qZWN0T25QbGFuZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5jb3B5KHRoaXMpLnByb2plY3RPblZlY3RvcihlKSx0aGlzLnN1Yih0KX19KCkscmVmbGVjdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zdWIodC5jb3B5KGUpLm11bHRpcGx5U2NhbGFyKDIqdGhpcy5kb3QoZSkpKX19KCksYW5nbGVUbzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmRvdCh0KS9NYXRoLnNxcnQodGhpcy5sZW5ndGhTcSgpKnQubGVuZ3RoU3EoKSk7cmV0dXJuIE1hdGguYWNvcyhXci5jbGFtcChlLC0xLDEpKX0sZGlzdGFuY2VUbzpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdGFuY2VUb1NxdWFyZWQodCkpfSxkaXN0YW5jZVRvU3F1YXJlZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLngtdC54LG49dGhpcy55LXQueSxpPXRoaXMuei10Lno7cmV0dXJuIGUqZStuKm4raSppfSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdC54KStNYXRoLmFicyh0aGlzLnktdC55KStNYXRoLmFicyh0aGlzLnotdC56KX0sc2V0RnJvbVNwaGVyaWNhbDpmdW5jdGlvbih0KXt2YXIgZT1NYXRoLnNpbih0LnBoaSkqdC5yYWRpdXM7cmV0dXJuIHRoaXMueD1lKk1hdGguc2luKHQudGhldGEpLHRoaXMueT1NYXRoLmNvcyh0LnBoaSkqdC5yYWRpdXMsdGhpcy56PWUqTWF0aC5jb3ModC50aGV0YSksdGhpc30sc2V0RnJvbUN5bGluZHJpY2FsOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9dC5yYWRpdXMqTWF0aC5zaW4odC50aGV0YSksdGhpcy55PXQueSx0aGlzLno9dC5yYWRpdXMqTWF0aC5jb3ModC50aGV0YSksdGhpc30sc2V0RnJvbU1hdHJpeFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldEZyb21NYXRyaXhDb2x1bW4odCwzKX0sc2V0RnJvbU1hdHJpeFNjYWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc2V0RnJvbU1hdHJpeENvbHVtbih0LDApLmxlbmd0aCgpLG49dGhpcy5zZXRGcm9tTWF0cml4Q29sdW1uKHQsMSkubGVuZ3RoKCksaT10aGlzLnNldEZyb21NYXRyaXhDb2x1bW4odCwyKS5sZW5ndGgoKTtyZXR1cm4gdGhpcy54PWUsdGhpcy55PW4sdGhpcy56PWksdGhpc30sc2V0RnJvbU1hdHJpeENvbHVtbjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmZyb21BcnJheSh0LmVsZW1lbnRzLDQqZSl9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdC54PT09dGhpcy54JiZ0Lnk9PT10aGlzLnkmJnQuej09PXRoaXMuen0sZnJvbUFycmF5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHRoaXMueD10W2VdLHRoaXMueT10W2UrMV0sdGhpcy56PXRbZSsyXSx0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT0wKSx0W2VdPXRoaXMueCx0W2UrMV09dGhpcy55LHRbZSsyXT10aGlzLnosdH0sZnJvbUJ1ZmZlckF0dHJpYnV0ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMCE9PW4mJmNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjM6IG9mZnNldCBoYXMgYmVlbiByZW1vdmVkIGZyb20gLmZyb21CdWZmZXJBdHRyaWJ1dGUoKS5cIiksdGhpcy54PXQuZ2V0WChlKSx0aGlzLnk9dC5nZXRZKGUpLHRoaXMuej10LmdldFooZSksdGhpc319KSxhKGkucHJvdG90eXBlLHtpc01hdHJpeDQ6ITAsc2V0OmZ1bmN0aW9uKHQsZSxuLGkscixvLGEscyx1LGwsYyxoLGYsZCxwLGcpe3ZhciB2PXRoaXMuZWxlbWVudHM7cmV0dXJuIHZbMF09dCx2WzRdPWUsdls4XT1uLHZbMTJdPWksdlsxXT1yLHZbNV09byx2WzldPWEsdlsxM109cyx2WzJdPXUsdls2XT1sLHZbMTBdPWMsdlsxNF09aCx2WzNdPWYsdls3XT1kLHZbMTFdPXAsdlsxNV09Zyx0aGlzfSxpZGVudGl0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldCgxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgaSkuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfSxjb3B5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO3JldHVybiBlWzBdPW5bMF0sZVsxXT1uWzFdLGVbMl09blsyXSxlWzNdPW5bM10sZVs0XT1uWzRdLGVbNV09bls1XSxlWzZdPW5bNl0sZVs3XT1uWzddLGVbOF09bls4XSxlWzldPW5bOV0sZVsxMF09blsxMF0sZVsxMV09blsxMV0sZVsxMl09blsxMl0sZVsxM109blsxM10sZVsxNF09blsxNF0sZVsxNV09blsxNV0sdGhpc30sY29weVBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO3JldHVybiBlWzEyXT1uWzEyXSxlWzEzXT1uWzEzXSxlWzE0XT1uWzE0XSx0aGlzfSxleHRyYWN0QmFzaXM6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0LnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywwKSxlLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywxKSxuLnNldEZyb21NYXRyaXhDb2x1bW4odGhpcywyKSx0aGlzfSxtYWtlQmFzaXM6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNldCh0LngsZS54LG4ueCwwLHQueSxlLnksbi55LDAsdC56LGUueixuLnosMCwwLDAsMCwxKSx0aGlzfSxleHRyYWN0Um90YXRpb246ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5lbGVtZW50cyxpPWUuZWxlbWVudHMscj0xL3Quc2V0RnJvbU1hdHJpeENvbHVtbihlLDApLmxlbmd0aCgpLG89MS90LnNldEZyb21NYXRyaXhDb2x1bW4oZSwxKS5sZW5ndGgoKSxhPTEvdC5zZXRGcm9tTWF0cml4Q29sdW1uKGUsMikubGVuZ3RoKCk7cmV0dXJuIG5bMF09aVswXSpyLG5bMV09aVsxXSpyLG5bMl09aVsyXSpyLG5bNF09aVs0XSpvLG5bNV09aVs1XSpvLG5bNl09aVs2XSpvLG5bOF09aVs4XSphLG5bOV09aVs5XSphLG5bMTBdPWlbMTBdKmEsdGhpc319KCksbWFrZVJvdGF0aW9uRnJvbUV1bGVyOmZ1bmN0aW9uKHQpeyh0JiZ0LmlzRXVsZXIpPT09ITEmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXg6IC5tYWtlUm90YXRpb25Gcm9tRXVsZXIoKSBub3cgZXhwZWN0cyBhIEV1bGVyIHJvdGF0aW9uIHJhdGhlciB0aGFuIGEgVmVjdG9yMyBhbmQgb3JkZXIuXCIpO3ZhciBlPXRoaXMuZWxlbWVudHMsbj10LngsaT10Lnkscj10Lnosbz1NYXRoLmNvcyhuKSxhPU1hdGguc2luKG4pLHM9TWF0aC5jb3MoaSksdT1NYXRoLnNpbihpKSxsPU1hdGguY29zKHIpLGM9TWF0aC5zaW4ocik7aWYoXCJYWVpcIj09PXQub3JkZXIpe3ZhciBoPW8qbCxmPW8qYyxkPWEqbCxwPWEqYztlWzBdPXMqbCxlWzRdPS1zKmMsZVs4XT11LGVbMV09ZitkKnUsZVs1XT1oLXAqdSxlWzldPS1hKnMsZVsyXT1wLWgqdSxlWzZdPWQrZip1LGVbMTBdPW8qc31lbHNlIGlmKFwiWVhaXCI9PT10Lm9yZGVyKXt2YXIgZz1zKmwsdj1zKmMsbT11KmwseT11KmM7ZVswXT1nK3kqYSxlWzRdPW0qYS12LGVbOF09byp1LGVbMV09bypjLGVbNV09bypsLGVbOV09LWEsZVsyXT12KmEtbSxlWzZdPXkrZyphLGVbMTBdPW8qc31lbHNlIGlmKFwiWlhZXCI9PT10Lm9yZGVyKXt2YXIgZz1zKmwsdj1zKmMsbT11KmwseT11KmM7ZVswXT1nLXkqYSxlWzRdPS1vKmMsZVs4XT1tK3YqYSxlWzFdPXYrbSphLGVbNV09bypsLGVbOV09eS1nKmEsZVsyXT0tbyp1LGVbNl09YSxlWzEwXT1vKnN9ZWxzZSBpZihcIlpZWFwiPT09dC5vcmRlcil7dmFyIGg9bypsLGY9bypjLGQ9YSpsLHA9YSpjO2VbMF09cypsLGVbNF09ZCp1LWYsZVs4XT1oKnUrcCxlWzFdPXMqYyxlWzVdPXAqdStoLGVbOV09Zip1LWQsZVsyXT0tdSxlWzZdPWEqcyxlWzEwXT1vKnN9ZWxzZSBpZihcIllaWFwiPT09dC5vcmRlcil7dmFyIF89bypzLGI9byp1LHg9YSpzLHc9YSp1O2VbMF09cypsLGVbNF09dy1fKmMsZVs4XT14KmMrYixlWzFdPWMsZVs1XT1vKmwsZVs5XT0tYSpsLGVbMl09LXUqbCxlWzZdPWIqYyt4LGVbMTBdPV8tdypjfWVsc2UgaWYoXCJYWllcIj09PXQub3JkZXIpe3ZhciBfPW8qcyxiPW8qdSx4PWEqcyx3PWEqdTtlWzBdPXMqbCxlWzRdPS1jLGVbOF09dSpsLGVbMV09XypjK3csZVs1XT1vKmwsZVs5XT1iKmMteCxlWzJdPXgqYy1iLGVbNl09YSpsLGVbMTBdPXcqYytffXJldHVybiBlWzNdPTAsZVs3XT0wLGVbMTFdPTAsZVsxMl09MCxlWzEzXT0wLGVbMTRdPTAsZVsxNV09MSx0aGlzfSxtYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmVsZW1lbnRzLG49dC5feCxpPXQuX3kscj10Ll96LG89dC5fdyxhPW4rbixzPWkraSx1PXIrcixsPW4qYSxjPW4qcyxoPW4qdSxmPWkqcyxkPWkqdSxwPXIqdSxnPW8qYSx2PW8qcyxtPW8qdTtyZXR1cm4gZVswXT0xLShmK3ApLGVbNF09Yy1tLGVbOF09aCt2LGVbMV09YyttLGVbNV09MS0obCtwKSxlWzldPWQtZyxlWzJdPWgtdixlWzZdPWQrZyxlWzEwXT0xLShsK2YpLGVbM109MCxlWzddPTAsZVsxMV09MCxlWzEyXT0wLGVbMTNdPTAsZVsxNF09MCxlWzE1XT0xLHRoaXN9LGxvb2tBdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG4saT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24obixyLG8pe3ZhciBhPXRoaXMuZWxlbWVudHM7cmV0dXJuIGkuc3ViVmVjdG9ycyhuLHIpLDA9PT1pLmxlbmd0aFNxKCkmJihpLno9MSksaS5ub3JtYWxpemUoKSx0LmNyb3NzVmVjdG9ycyhvLGkpLDA9PT10Lmxlbmd0aFNxKCkmJihpLnorPTFlLTQsdC5jcm9zc1ZlY3RvcnMobyxpKSksdC5ub3JtYWxpemUoKSxlLmNyb3NzVmVjdG9ycyhpLHQpLGFbMF09dC54LGFbNF09ZS54LGFbOF09aS54LGFbMV09dC55LGFbNV09ZS55LGFbOV09aS55LGFbMl09dC56LGFbNl09ZS56LGFbMTBdPWkueix0aGlzfX0oKSxtdWx0aXBseTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5NYXRyaXg0OiAubXVsdGlwbHkoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5tdWx0aXBseU1hdHJpY2VzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5tdWx0aXBseU1hdHJpY2VzKHQsZSkpOnRoaXMubXVsdGlwbHlNYXRyaWNlcyh0aGlzLHQpfSxwcmVtdWx0aXBseTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tdWx0aXBseU1hdHJpY2VzKHQsdGhpcyl9LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmVsZW1lbnRzLGk9ZS5lbGVtZW50cyxyPXRoaXMuZWxlbWVudHMsbz1uWzBdLGE9bls0XSxzPW5bOF0sdT1uWzEyXSxsPW5bMV0sYz1uWzVdLGg9bls5XSxmPW5bMTNdLGQ9blsyXSxwPW5bNl0sZz1uWzEwXSx2PW5bMTRdLG09blszXSx5PW5bN10sXz1uWzExXSxiPW5bMTVdLHg9aVswXSx3PWlbNF0sRT1pWzhdLFM9aVsxMl0sTT1pWzFdLEM9aVs1XSxJPWlbOV0sTz1pWzEzXSxUPWlbMl0sUD1pWzZdLEE9aVsxMF0sTD1pWzE0XSxOPWlbM10saz1pWzddLFI9aVsxMV0sRD1pWzE1XTtyZXR1cm4gclswXT1vKngrYSpNK3MqVCt1Kk4scls0XT1vKncrYSpDK3MqUCt1Kmsscls4XT1vKkUrYSpJK3MqQSt1KlIsclsxMl09bypTK2EqTytzKkwrdSpELHJbMV09bCp4K2MqTStoKlQrZipOLHJbNV09bCp3K2MqQytoKlArZiprLHJbOV09bCpFK2MqSStoKkErZipSLHJbMTNdPWwqUytjKk8raCpMK2YqRCxyWzJdPWQqeCtwKk0rZypUK3YqTixyWzZdPWQqdytwKkMrZypQK3YqayxyWzEwXT1kKkUrcCpJK2cqQSt2KlIsclsxNF09ZCpTK3AqTytnKkwrdipELHJbM109bSp4K3kqTStfKlQrYipOLHJbN109bSp3K3kqQytfKlArYiprLHJbMTFdPW0qRSt5KkkrXypBK2IqUixyWzE1XT1tKlMreSpPK18qTCtiKkQsdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbGVtZW50cztyZXR1cm4gZVswXSo9dCxlWzRdKj10LGVbOF0qPXQsZVsxMl0qPXQsZVsxXSo9dCxlWzVdKj10LGVbOV0qPXQsZVsxM10qPXQsZVsyXSo9dCxlWzZdKj10LGVbMTBdKj10LGVbMTRdKj10LGVbM10qPXQsZVs3XSo9dCxlWzExXSo9dCxlWzE1XSo9dCx0aGlzfSxhcHBseVRvQnVmZmVyQXR0cmlidXRlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj0wLGk9ZS5jb3VudDtuPGk7bisrKXQueD1lLmdldFgobiksdC55PWUuZ2V0WShuKSx0Lno9ZS5nZXRaKG4pLHQuYXBwbHlNYXRyaXg0KHRoaXMpLGUuc2V0WFlaKG4sdC54LHQueSx0LnopO3JldHVybiBlfX0oKSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudHMsZT10WzBdLG49dFs0XSxpPXRbOF0scj10WzEyXSxvPXRbMV0sYT10WzVdLHM9dFs5XSx1PXRbMTNdLGw9dFsyXSxjPXRbNl0saD10WzEwXSxmPXRbMTRdLGQ9dFszXSxwPXRbN10sZz10WzExXSx2PXRbMTVdO3JldHVybiBkKigrcipzKmMtaSp1KmMtciphKmgrbip1KmgraSphKmYtbipzKmYpK3AqKCtlKnMqZi1lKnUqaCtyKm8qaC1pKm8qZitpKnUqbC1yKnMqbCkrZyooK2UqdSpjLWUqYSpmLXIqbypjK24qbypmK3IqYSpsLW4qdSpsKSt2KigtaSphKmwtZSpzKmMrZSphKmgraSpvKmMtbipvKmgrbipzKmwpfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuZWxlbWVudHM7cmV0dXJuIHQ9ZVsxXSxlWzFdPWVbNF0sZVs0XT10LHQ9ZVsyXSxlWzJdPWVbOF0sZVs4XT10LHQ9ZVs2XSxlWzZdPWVbOV0sZVs5XT10LHQ9ZVszXSxlWzNdPWVbMTJdLGVbMTJdPXQsdD1lWzddLGVbN109ZVsxM10sZVsxM109dCx0PWVbMTFdLGVbMTFdPWVbMTRdLGVbMTRdPXQsdGhpc30sc2V0UG9zaXRpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbGVtZW50cztyZXR1cm4gZVsxMl09dC54LGVbMTNdPXQueSxlWzE0XT10LnosdGhpc30sZ2V0SW52ZXJzZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZWxlbWVudHMsaT10LmVsZW1lbnRzLHI9aVswXSxvPWlbMV0sYT1pWzJdLHM9aVszXSx1PWlbNF0sbD1pWzVdLGM9aVs2XSxoPWlbN10sZj1pWzhdLGQ9aVs5XSxwPWlbMTBdLGc9aVsxMV0sdj1pWzEyXSxtPWlbMTNdLHk9aVsxNF0sXz1pWzE1XSxiPWQqeSpoLW0qcCpoK20qYypnLWwqeSpnLWQqYypfK2wqcCpfLHg9dipwKmgtZip5KmgtdipjKmcrdSp5KmcrZipjKl8tdSpwKl8sdz1mKm0qaC12KmQqaCt2KmwqZy11Km0qZy1mKmwqXyt1KmQqXyxFPXYqZCpjLWYqbSpjLXYqbCpwK3UqbSpwK2YqbCp5LXUqZCp5LFM9cipiK28qeCthKncrcypFO2lmKDA9PT1TKXt2YXIgTT1cIlRIUkVFLk1hdHJpeDQuZ2V0SW52ZXJzZSgpOiBjYW4ndCBpbnZlcnQgbWF0cml4LCBkZXRlcm1pbmFudCBpcyAwXCI7aWYoZT09PSEwKXRocm93IG5ldyBFcnJvcihNKTtyZXR1cm4gY29uc29sZS53YXJuKE0pLHRoaXMuaWRlbnRpdHkoKX12YXIgQz0xL1M7cmV0dXJuIG5bMF09YipDLG5bMV09KG0qcCpzLWQqeSpzLW0qYSpnK28qeSpnK2QqYSpfLW8qcCpfKSpDLG5bMl09KGwqeSpzLW0qYypzK20qYSpoLW8qeSpoLWwqYSpfK28qYypfKSpDLG5bM109KGQqYypzLWwqcCpzLWQqYSpoK28qcCpoK2wqYSpnLW8qYypnKSpDLG5bNF09eCpDLG5bNV09KGYqeSpzLXYqcCpzK3YqYSpnLXIqeSpnLWYqYSpfK3IqcCpfKSpDLG5bNl09KHYqYypzLXUqeSpzLXYqYSpoK3IqeSpoK3UqYSpfLXIqYypfKSpDLG5bN109KHUqcCpzLWYqYypzK2YqYSpoLXIqcCpoLXUqYSpnK3IqYypnKSpDLG5bOF09dypDLG5bOV09KHYqZCpzLWYqbSpzLXYqbypnK3IqbSpnK2YqbypfLXIqZCpfKSpDLG5bMTBdPSh1Km0qcy12Kmwqcyt2Km8qaC1yKm0qaC11Km8qXytyKmwqXykqQyxuWzExXT0oZipsKnMtdSpkKnMtZipvKmgrcipkKmgrdSpvKmctcipsKmcpKkMsblsxMl09RSpDLG5bMTNdPShmKm0qYS12KmQqYSt2Km8qcC1yKm0qcC1mKm8qeStyKmQqeSkqQyxuWzE0XT0odipsKmEtdSptKmEtdipvKmMrciptKmMrdSpvKnktcipsKnkpKkMsblsxNV09KHUqZCphLWYqbCphK2YqbypjLXIqZCpjLXUqbypwK3IqbCpwKSpDLHRoaXN9LHNjYWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudHMsbj10LngsaT10Lnkscj10Lno7cmV0dXJuIGVbMF0qPW4sZVs0XSo9aSxlWzhdKj1yLGVbMV0qPW4sZVs1XSo9aSxlWzldKj1yLGVbMl0qPW4sZVs2XSo9aSxlWzEwXSo9cixlWzNdKj1uLGVbN10qPWksZVsxMV0qPXIsdGhpc30sZ2V0TWF4U2NhbGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnRzLGU9dFswXSp0WzBdK3RbMV0qdFsxXSt0WzJdKnRbMl0sbj10WzRdKnRbNF0rdFs1XSp0WzVdK3RbNl0qdFs2XSxpPXRbOF0qdFs4XSt0WzldKnRbOV0rdFsxMF0qdFsxMF07cmV0dXJuIE1hdGguc3FydChNYXRoLm1heChlLG4saSkpfSxtYWtlVHJhbnNsYXRpb246ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNldCgxLDAsMCx0LDAsMSwwLGUsMCwwLDEsbiwwLDAsMCwxKSx0aGlzfSxtYWtlUm90YXRpb25YOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguY29zKHQpLG49TWF0aC5zaW4odCk7cmV0dXJuIHRoaXMuc2V0KDEsMCwwLDAsMCxlLC1uLDAsMCxuLGUsMCwwLDAsMCwxKSx0aGlzfSxtYWtlUm90YXRpb25ZOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguY29zKHQpLG49TWF0aC5zaW4odCk7cmV0dXJuIHRoaXMuc2V0KGUsMCxuLDAsMCwxLDAsMCwtbiwwLGUsMCwwLDAsMCwxKSx0aGlzfSxtYWtlUm90YXRpb25aOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguY29zKHQpLG49TWF0aC5zaW4odCk7cmV0dXJuIHRoaXMuc2V0KGUsLW4sMCwwLG4sZSwwLDAsMCwwLDEsMCwwLDAsMCwxKSx0aGlzfSxtYWtlUm90YXRpb25BeGlzOmZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5jb3MoZSksaT1NYXRoLnNpbihlKSxyPTEtbixvPXQueCxhPXQueSxzPXQueix1PXIqbyxsPXIqYTtyZXR1cm4gdGhpcy5zZXQodSpvK24sdSphLWkqcyx1KnMraSphLDAsdSphK2kqcyxsKmErbixsKnMtaSpvLDAsdSpzLWkqYSxsKnMraSpvLHIqcypzK24sMCwwLDAsMCwxKSx0aGlzfSxtYWtlU2NhbGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNldCh0LDAsMCwwLDAsZSwwLDAsMCwwLG4sMCwwLDAsMCwxKSx0aGlzfSxtYWtlU2hlYXI6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnNldCgxLGUsbiwwLHQsMSxuLDAsdCxlLDEsMCwwLDAsMCwxKSx0aGlzfSxjb21wb3NlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihlKSx0aGlzLnNjYWxlKG4pLHRoaXMuc2V0UG9zaXRpb24odCksdGhpc30sZGVjb21wb3NlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4sZT1uZXcgaTtyZXR1cm4gZnVuY3Rpb24obixpLHIpe3ZhciBvPXRoaXMuZWxlbWVudHMsYT10LnNldChvWzBdLG9bMV0sb1syXSkubGVuZ3RoKCkscz10LnNldChvWzRdLG9bNV0sb1s2XSkubGVuZ3RoKCksdT10LnNldChvWzhdLG9bOV0sb1sxMF0pLmxlbmd0aCgpLGw9dGhpcy5kZXRlcm1pbmFudCgpO2w8MCYmKGE9LWEpLG4ueD1vWzEyXSxuLnk9b1sxM10sbi56PW9bMTRdLGUuY29weSh0aGlzKTt2YXIgYz0xL2EsaD0xL3MsZj0xL3U7cmV0dXJuIGUuZWxlbWVudHNbMF0qPWMsZS5lbGVtZW50c1sxXSo9YyxlLmVsZW1lbnRzWzJdKj1jLGUuZWxlbWVudHNbNF0qPWgsZS5lbGVtZW50c1s1XSo9aCxlLmVsZW1lbnRzWzZdKj1oLGUuZWxlbWVudHNbOF0qPWYsZS5lbGVtZW50c1s5XSo9ZixlLmVsZW1lbnRzWzEwXSo9ZixpLnNldEZyb21Sb3RhdGlvbk1hdHJpeChlKSxyLng9YSxyLnk9cyxyLno9dSx0aGlzfX0oKSxtYWtlUGVyc3BlY3RpdmU6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZvaWQgMD09PW8mJmNvbnNvbGUud2FybihcIlRIUkVFLk1hdHJpeDQ6IC5tYWtlUGVyc3BlY3RpdmUoKSBoYXMgYmVlbiByZWRlZmluZWQgYW5kIGhhcyBhIG5ldyBzaWduYXR1cmUuIFBsZWFzZSBjaGVjayB0aGUgZG9jcy5cIik7dmFyIGE9dGhpcy5lbGVtZW50cyxzPTIqci8oZS10KSx1PTIqci8obi1pKSxsPShlK3QpLyhlLXQpLGM9KG4raSkvKG4taSksaD0tKG8rcikvKG8tciksZj0tMipvKnIvKG8tcik7cmV0dXJuIGFbMF09cyxhWzRdPTAsYVs4XT1sLGFbMTJdPTAsYVsxXT0wLGFbNV09dSxhWzldPWMsYVsxM109MCxhWzJdPTAsYVs2XT0wLGFbMTBdPWgsYVsxNF09ZixhWzNdPTAsYVs3XT0wLGFbMTFdPS0xLGFbMTVdPTAsdGhpc30sbWFrZU9ydGhvZ3JhcGhpYzpmdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIGE9dGhpcy5lbGVtZW50cyxzPTEvKGUtdCksdT0xLyhuLWkpLGw9MS8oby1yKSxjPShlK3QpKnMsaD0obitpKSp1LGY9KG8rcikqbDtyZXR1cm4gYVswXT0yKnMsYVs0XT0wLGFbOF09MCxhWzEyXT0tYyxhWzFdPTAsYVs1XT0yKnUsYVs5XT0wLGFbMTNdPS1oLGFbMl09MCxhWzZdPTAsYVsxMF09LTIqbCxhWzE0XT0tZixhWzNdPTAsYVs3XT0wLGFbMTFdPTAsYVsxNV09MSx0aGlzfSxlcXVhbHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzLGk9MDtpPDE2O2krKylpZihlW2ldIT09bltpXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7Zm9yKHZhciBuPTA7bjwxNjtuKyspdGhpcy5lbGVtZW50c1tuXT10W24rZV07cmV0dXJuIHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09ZSYmKGU9MCk7dmFyIG49dGhpcy5lbGVtZW50cztyZXR1cm4gdFtlXT1uWzBdLHRbZSsxXT1uWzFdLHRbZSsyXT1uWzJdLHRbZSszXT1uWzNdLHRbZSs0XT1uWzRdLHRbZSs1XT1uWzVdLHRbZSs2XT1uWzZdLHRbZSs3XT1uWzddLHRbZSs4XT1uWzhdLHRbZSs5XT1uWzldLHRbZSsxMF09blsxMF0sdFtlKzExXT1uWzExXSx0W2UrMTJdPW5bMTJdLHRbZSsxM109blsxM10sdFtlKzE0XT1uWzE0XSx0W2UrMTVdPW5bMTVdLHR9fSksYShyLnByb3RvdHlwZSx7YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbih0LGUpe3ZvaWQgMD09PXRoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycz17fSk7dmFyIG49dGhpcy5fbGlzdGVuZXJzO3ZvaWQgMD09PW5bdF0mJihuW3RdPVtdKSxuW3RdLmluZGV4T2YoZSk9PT0tMSYmblt0XS5wdXNoKGUpfSxoYXNFdmVudExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dGhpcy5fbGlzdGVuZXJzKXJldHVybiExO3ZhciBuPXRoaXMuX2xpc3RlbmVycztyZXR1cm4gdm9pZCAwIT09blt0XSYmblt0XS5pbmRleE9mKGUpIT09LTF9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24odCxlKXtpZih2b2lkIDAhPT10aGlzLl9saXN0ZW5lcnMpe3ZhciBuPXRoaXMuX2xpc3RlbmVycyxpPW5bdF07aWYodm9pZCAwIT09aSl7dmFyIHI9aS5pbmRleE9mKGUpO3IhPT0tMSYmaS5zcGxpY2UociwxKX19fSxkaXNwYXRjaEV2ZW50OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXRoaXMuX2xpc3RlbmVycyl7dmFyIGU9dGhpcy5fbGlzdGVuZXJzLG49ZVt0LnR5cGVdO2lmKHZvaWQgMCE9PW4pe3QudGFyZ2V0PXRoaXM7dmFyIGk9W10scj0wLG89bi5sZW5ndGg7Zm9yKHI9MDtyPG87cisrKWlbcl09bltyXTtmb3Iocj0wO3I8bztyKyspaVtyXS5jYWxsKHRoaXMsdCl9fX19KSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvLnByb3RvdHlwZSx7d2lkdGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnh9LHNldDpmdW5jdGlvbih0KXt0aGlzLng9dH19LGhlaWdodDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMueT10fX19KSxhKG8ucHJvdG90eXBlLHtpc1ZlY3RvcjI6ITAsc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD10LHRoaXMueT1lLHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PXQsdGhpc30sc2V0WDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQsdGhpc30sc2V0WTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy55PXQsdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQpe2Nhc2UgMDp0aGlzLng9ZTticmVhaztjYXNlIDE6dGhpcy55PWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfXJldHVybiB0aGlzfSxnZXRDb21wb25lbnQ6ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgMDpyZXR1cm4gdGhpcy54O2Nhc2UgMTpyZXR1cm4gdGhpcy55O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiaW5kZXggaXMgb3V0IG9mIHJhbmdlOiBcIit0KX19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMueCx0aGlzLnkpfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9dC54LHRoaXMueT10LnksdGhpc30sYWRkOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMCE9PWU/KGNvbnNvbGUud2FybihcIlRIUkVFLlZlY3RvcjI6IC5hZGQoKSBub3cgb25seSBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVXNlIC5hZGRWZWN0b3JzKCBhLCBiICkgaW5zdGVhZC5cIiksdGhpcy5hZGRWZWN0b3JzKHQsZSkpOih0aGlzLngrPXQueCx0aGlzLnkrPXQueSx0aGlzKX0sYWRkU2NhbGFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngrPXQsdGhpcy55Kz10LHRoaXN9LGFkZFZlY3RvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PXQueCtlLngsdGhpcy55PXQueStlLnksdGhpc30sYWRkU2NhbGVkVmVjdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueCs9dC54KmUsdGhpcy55Kz10LnkqZSx0aGlzfSxzdWI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yMjogLnN1YigpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLnN1YlZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLnN1YlZlY3RvcnModCxlKSk6KHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXMpfSxzdWJTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC09dCx0aGlzLnktPXQsdGhpc30sc3ViVmVjdG9yczpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9dC54LWUueCx0aGlzLnk9dC55LWUueSx0aGlzfSxtdWx0aXBseTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kj10LngsdGhpcy55Kj10LnksdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpc30sZGl2aWRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngvPXQueCx0aGlzLnkvPXQueSx0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS90KX0sbWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9TWF0aC5taW4odGhpcy54LHQueCksdGhpcy55PU1hdGgubWluKHRoaXMueSx0LnkpLHRoaXN9LG1heDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1heCh0aGlzLnksdC55KSx0aGlzfSxjbGFtcDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLng9TWF0aC5tYXgodC54LE1hdGgubWluKGUueCx0aGlzLngpKSx0aGlzLnk9TWF0aC5tYXgodC55LE1hdGgubWluKGUueSx0aGlzLnkpKSx0aGlzfSxjbGFtcFNjYWxhcjpmdW5jdGlvbigpe3ZhciB0PW5ldyBvLGU9bmV3IG87cmV0dXJuIGZ1bmN0aW9uKG4saSl7cmV0dXJuIHQuc2V0KG4sbiksZS5zZXQoaSxpKSx0aGlzLmNsYW1wKHQsZSl9fSgpLGNsYW1wTGVuZ3RoOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5sZW5ndGgoKTtyZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihNYXRoLm1heCh0LE1hdGgubWluKGUsbikpL24pfSxmbG9vcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpc30sY2VpbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5jZWlsKHRoaXMueCksdGhpcy55PU1hdGguY2VpbCh0aGlzLnkpLHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzfSxyb3VuZFRvWmVybzpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9dGhpcy54PDA/TWF0aC5jZWlsKHRoaXMueCk6TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT10aGlzLnk8MD9NYXRoLmNlaWwodGhpcy55KTpNYXRoLmZsb29yKHRoaXMueSksdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD0tdGhpcy54LHRoaXMueT0tdGhpcy55LHRoaXN9LGRvdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54KnQueCt0aGlzLnkqdC55fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnl9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX0sbGVuZ3RoTWFuaGF0dGFuOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYWJzKHRoaXMueCkrTWF0aC5hYnModGhpcy55KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxhbmdsZTpmdW5jdGlvbiB0KCl7dmFyIHQ9TWF0aC5hdGFuMih0aGlzLnksdGhpcy54KTtyZXR1cm4gdDwwJiYodCs9MipNYXRoLlBJKSx0fSxkaXN0YW5jZVRvOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVRvU3F1YXJlZCh0KSl9LGRpc3RhbmNlVG9TcXVhcmVkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueC10Lngsbj10aGlzLnktdC55O3JldHVybiBlKmUrbipufSxkaXN0YW5jZVRvTWFuaGF0dGFuOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0aGlzLngtdC54KStNYXRoLmFicyh0aGlzLnktdC55KX0sc2V0TGVuZ3RoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKHQvdGhpcy5sZW5ndGgoKSl9LGxlcnA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54Kz0odC54LXRoaXMueCkqZSx0aGlzLnkrPSh0LnktdGhpcy55KSplLHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGUsdCkubXVsdGlwbHlTY2FsYXIobikuYWRkKHQpfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQueD09PXRoaXMueCYmdC55PT09dGhpcy55fSxmcm9tQXJyYXk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksdGhpcy54PXRbZV0sdGhpcy55PXRbZSsxXSx0aGlzfSx0b0FycmF5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT0wKSx0W2VdPXRoaXMueCx0W2UrMV09dGhpcy55LHR9LGZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDAhPT1uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3IyOiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMueD10LmdldFgoZSksdGhpcy55PXQuZ2V0WShlKSx0aGlzfSxyb3RhdGVBcm91bmQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNvcyhlKSxpPU1hdGguc2luKGUpLHI9dGhpcy54LXQueCxvPXRoaXMueS10Lnk7cmV0dXJuIHRoaXMueD1yKm4tbyppK3QueCx0aGlzLnk9cippK28qbit0LnksdGhpc319KTt2YXIgWnI9MDt1LkRFRkFVTFRfSU1BR0U9dm9pZCAwLHUuREVGQVVMVF9NQVBQSU5HPWtpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LnByb3RvdHlwZSxcIm5lZWRzVXBkYXRlXCIse3NldDpmdW5jdGlvbih0KXt0PT09ITAmJnRoaXMudmVyc2lvbisrfX0pLGEodS5wcm90b3R5cGUsci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnUsaXNUZXh0dXJlOiEwLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5hbWU9dC5uYW1lLFxudGhpcy5pbWFnZT10LmltYWdlLHRoaXMubWlwbWFwcz10Lm1pcG1hcHMuc2xpY2UoMCksdGhpcy5tYXBwaW5nPXQubWFwcGluZyx0aGlzLndyYXBTPXQud3JhcFMsdGhpcy53cmFwVD10LndyYXBULHRoaXMubWFnRmlsdGVyPXQubWFnRmlsdGVyLHRoaXMubWluRmlsdGVyPXQubWluRmlsdGVyLHRoaXMuYW5pc290cm9weT10LmFuaXNvdHJvcHksdGhpcy5mb3JtYXQ9dC5mb3JtYXQsdGhpcy50eXBlPXQudHlwZSx0aGlzLm9mZnNldC5jb3B5KHQub2Zmc2V0KSx0aGlzLnJlcGVhdC5jb3B5KHQucmVwZWF0KSx0aGlzLmdlbmVyYXRlTWlwbWFwcz10LmdlbmVyYXRlTWlwbWFwcyx0aGlzLnByZW11bHRpcGx5QWxwaGE9dC5wcmVtdWx0aXBseUFscGhhLHRoaXMuZmxpcFk9dC5mbGlwWSx0aGlzLnVucGFja0FsaWdubWVudD10LnVucGFja0FsaWdubWVudCx0aGlzLmVuY29kaW5nPXQuZW5jb2RpbmcsdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIGU7cmV0dXJuIHZvaWQgMCE9PXQudG9EYXRhVVJMP2U9dDooZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsXCJjYW52YXNcIiksZS53aWR0aD10LndpZHRoLGUuaGVpZ2h0PXQuaGVpZ2h0LGUuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0LDAsMCx0LndpZHRoLHQuaGVpZ2h0KSksZS53aWR0aD4yMDQ4fHxlLmhlaWdodD4yMDQ4P2UudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiLC42KTplLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKX1pZih2b2lkIDAhPT10LnRleHR1cmVzW3RoaXMudXVpZF0pcmV0dXJuIHQudGV4dHVyZXNbdGhpcy51dWlkXTt2YXIgbj17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJUZXh0dXJlXCIsZ2VuZXJhdG9yOlwiVGV4dHVyZS50b0pTT05cIn0sdXVpZDp0aGlzLnV1aWQsbmFtZTp0aGlzLm5hbWUsbWFwcGluZzp0aGlzLm1hcHBpbmcscmVwZWF0Olt0aGlzLnJlcGVhdC54LHRoaXMucmVwZWF0LnldLG9mZnNldDpbdGhpcy5vZmZzZXQueCx0aGlzLm9mZnNldC55XSx3cmFwOlt0aGlzLndyYXBTLHRoaXMud3JhcFRdLG1pbkZpbHRlcjp0aGlzLm1pbkZpbHRlcixtYWdGaWx0ZXI6dGhpcy5tYWdGaWx0ZXIsYW5pc290cm9weTp0aGlzLmFuaXNvdHJvcHksZmxpcFk6dGhpcy5mbGlwWX07aWYodm9pZCAwIT09dGhpcy5pbWFnZSl7dmFyIGk9dGhpcy5pbWFnZTt2b2lkIDA9PT1pLnV1aWQmJihpLnV1aWQ9V3IuZ2VuZXJhdGVVVUlEKCkpLHZvaWQgMD09PXQuaW1hZ2VzW2kudXVpZF0mJih0LmltYWdlc1tpLnV1aWRdPXt1dWlkOmkudXVpZCx1cmw6ZShpKX0pLG4uaW1hZ2U9aS51dWlkfXJldHVybiB0LnRleHR1cmVzW3RoaXMudXVpZF09bixufSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9LHRyYW5zZm9ybVV2OmZ1bmN0aW9uKHQpe2lmKHRoaXMubWFwcGluZz09PWtpKXtpZih0Lm11bHRpcGx5KHRoaXMucmVwZWF0KSx0LmFkZCh0aGlzLm9mZnNldCksdC54PDB8fHQueD4xKXN3aXRjaCh0aGlzLndyYXBTKXtjYXNlIEdpOnQueD10LngtTWF0aC5mbG9vcih0LngpO2JyZWFrO2Nhc2UgVmk6dC54PXQueDwwPzA6MTticmVhaztjYXNlIFhpOjE9PT1NYXRoLmFicyhNYXRoLmZsb29yKHQueCklMik/dC54PU1hdGguY2VpbCh0LngpLXQueDp0Lng9dC54LU1hdGguZmxvb3IodC54KX1pZih0Lnk8MHx8dC55PjEpc3dpdGNoKHRoaXMud3JhcFQpe2Nhc2UgR2k6dC55PXQueS1NYXRoLmZsb29yKHQueSk7YnJlYWs7Y2FzZSBWaTp0Lnk9dC55PDA/MDoxO2JyZWFrO2Nhc2UgWGk6MT09PU1hdGguYWJzKE1hdGguZmxvb3IodC55KSUyKT90Lnk9TWF0aC5jZWlsKHQueSktdC55OnQueT10LnktTWF0aC5mbG9vcih0LnkpfXRoaXMuZmxpcFkmJih0Lnk9MS10LnkpfX19KSxsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1sLGwucHJvdG90eXBlLmlzRGF0YVRleHR1cmU9ITAsYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksYy5wcm90b3R5cGUuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZS5pc0N1YmVUZXh0dXJlPSEwLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLnByb3RvdHlwZSxcImltYWdlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuaW1hZ2U9dH19KTt2YXIgSnI9bmV3IHUsS3I9bmV3IGMsUXI9W10sJHI9W10sdG89bmV3IEZsb2F0MzJBcnJheSgxNiksZW89bmV3IEZsb2F0MzJBcnJheSg5KTt6LnByb3RvdHlwZS5zZXRWYWx1ZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLnNlcSxpPTAscj1uLmxlbmd0aDtpIT09cjsrK2kpe3ZhciBvPW5baV07by5zZXRWYWx1ZSh0LGVbby5pZF0pfX07dmFyIG5vPS8oW1xcd1xcZF9dKykoXFxdKT8oXFxbfFxcLik/L2c7WC5wcm90b3R5cGUuc2V0VmFsdWU9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMubWFwW2VdO3ZvaWQgMCE9PWkmJmkuc2V0VmFsdWUodCxuLHRoaXMucmVuZGVyZXIpfSxYLnByb3RvdHlwZS5zZXRPcHRpb25hbD1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZVtuXTt2b2lkIDAhPT1pJiZ0aGlzLnNldFZhbHVlKHQsbixpKX0sWC51cGxvYWQ9ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPTAsbz1lLmxlbmd0aDtyIT09bzsrK3Ipe3ZhciBhPWVbcl0scz1uW2EuaWRdO3MubmVlZHNVcGRhdGUhPT0hMSYmYS5zZXRWYWx1ZSh0LHMudmFsdWUsaSl9fSxYLnNlcVdpdGhWYWx1ZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxpPTAscj10Lmxlbmd0aDtpIT09cjsrK2kpe3ZhciBvPXRbaV07by5pZCBpbiBlJiZuLnB1c2gobyl9cmV0dXJuIG59LGEoSC5wcm90b3R5cGUse2lzVmVjdG9yNDohMCxzZXQ6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHRoaXMueD10LHRoaXMueT1lLHRoaXMuej1uLHRoaXMudz1pLHRoaXN9LHNldFNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQsdGhpcy55PXQsdGhpcy56PXQsdGhpcy53PXQsdGhpc30sc2V0WDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQsdGhpc30sc2V0WTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy55PXQsdGhpc30sc2V0WjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy56PXQsdGhpc30sc2V0VzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy53PXQsdGhpc30sc2V0Q29tcG9uZW50OmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQpe2Nhc2UgMDp0aGlzLng9ZTticmVhaztjYXNlIDE6dGhpcy55PWU7YnJlYWs7Y2FzZSAyOnRoaXMuej1lO2JyZWFrO2Nhc2UgMzp0aGlzLnc9ZTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcImluZGV4IGlzIG91dCBvZiByYW5nZTogXCIrdCl9cmV0dXJuIHRoaXN9LGdldENvbXBvbmVudDpmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSAwOnJldHVybiB0aGlzLng7Y2FzZSAxOnJldHVybiB0aGlzLnk7Y2FzZSAyOnJldHVybiB0aGlzLno7Y2FzZSAzOnJldHVybiB0aGlzLnc7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBpcyBvdXQgb2YgcmFuZ2U6IFwiK3QpfX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LHRoaXMueSx0aGlzLnosdGhpcy53KX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMuej10LnosdGhpcy53PXZvaWQgMCE9PXQudz90Lnc6MSx0aGlzfSxhZGQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwIT09ZT8oY29uc29sZS53YXJuKFwiVEhSRUUuVmVjdG9yNDogLmFkZCgpIG5vdyBvbmx5IGFjY2VwdHMgb25lIGFyZ3VtZW50LiBVc2UgLmFkZFZlY3RvcnMoIGEsIGIgKSBpbnN0ZWFkLlwiKSx0aGlzLmFkZFZlY3RvcnModCxlKSk6KHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXMueis9dC56LHRoaXMudys9dC53LHRoaXMpfSxhZGRTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dCx0aGlzLnkrPXQsdGhpcy56Kz10LHRoaXMudys9dCx0aGlzfSxhZGRWZWN0b3JzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD10LngrZS54LHRoaXMueT10LnkrZS55LHRoaXMuej10LnorZS56LHRoaXMudz10LncrZS53LHRoaXN9LGFkZFNjYWxlZFZlY3RvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLngrPXQueCplLHRoaXMueSs9dC55KmUsdGhpcy56Kz10LnoqZSx0aGlzLncrPXQudyplLHRoaXN9LHN1YjpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDAhPT1lPyhjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiAuc3ViKCkgbm93IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIFVzZSAuc3ViVmVjdG9ycyggYSwgYiApIGluc3RlYWQuXCIpLHRoaXMuc3ViVmVjdG9ycyh0LGUpKToodGhpcy54LT10LngsdGhpcy55LT10LnksdGhpcy56LT10LnosdGhpcy53LT10LncsdGhpcyl9LHN1YlNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LHRoaXMueS09dCx0aGlzLnotPXQsdGhpcy53LT10LHRoaXN9LHN1YlZlY3RvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy54PXQueC1lLngsdGhpcy55PXQueS1lLnksdGhpcy56PXQuei1lLnosdGhpcy53PXQudy1lLncsdGhpc30sbXVsdGlwbHlTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCo9dCx0aGlzLnkqPXQsdGhpcy56Kj10LHRoaXMudyo9dCx0aGlzfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LG49dGhpcy55LGk9dGhpcy56LHI9dGhpcy53LG89dC5lbGVtZW50cztyZXR1cm4gdGhpcy54PW9bMF0qZStvWzRdKm4rb1s4XSppK29bMTJdKnIsdGhpcy55PW9bMV0qZStvWzVdKm4rb1s5XSppK29bMTNdKnIsdGhpcy56PW9bMl0qZStvWzZdKm4rb1sxMF0qaStvWzE0XSpyLHRoaXMudz1vWzNdKmUrb1s3XSpuK29bMTFdKmkrb1sxNV0qcix0aGlzfSxkaXZpZGVTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoMS90KX0sc2V0QXhpc0FuZ2xlRnJvbVF1YXRlcm5pb246ZnVuY3Rpb24odCl7dGhpcy53PTIqTWF0aC5hY29zKHQudyk7dmFyIGU9TWF0aC5zcXJ0KDEtdC53KnQudyk7cmV0dXJuIGU8MWUtND8odGhpcy54PTEsdGhpcy55PTAsdGhpcy56PTApOih0aGlzLng9dC54L2UsdGhpcy55PXQueS9lLHRoaXMuej10LnovZSksdGhpc30sc2V0QXhpc0FuZ2xlRnJvbVJvdGF0aW9uTWF0cml4OmZ1bmN0aW9uKHQpe3ZhciBlLG4saSxyLG89LjAxLGE9LjEscz10LmVsZW1lbnRzLHU9c1swXSxsPXNbNF0sYz1zWzhdLGg9c1sxXSxmPXNbNV0sZD1zWzldLHA9c1syXSxnPXNbNl0sdj1zWzEwXTtpZihNYXRoLmFicyhsLWgpPG8mJk1hdGguYWJzKGMtcCk8byYmTWF0aC5hYnMoZC1nKTxvKXtpZihNYXRoLmFicyhsK2gpPGEmJk1hdGguYWJzKGMrcCk8YSYmTWF0aC5hYnMoZCtnKTxhJiZNYXRoLmFicyh1K2Yrdi0zKTxhKXJldHVybiB0aGlzLnNldCgxLDAsMCwwKSx0aGlzO2U9TWF0aC5QSTt2YXIgbT0odSsxKS8yLHk9KGYrMSkvMixfPSh2KzEpLzIsYj0obCtoKS80LHg9KGMrcCkvNCx3PShkK2cpLzQ7cmV0dXJuIG0+eSYmbT5fP208bz8obj0wLGk9LjcwNzEwNjc4MSxyPS43MDcxMDY3ODEpOihuPU1hdGguc3FydChtKSxpPWIvbixyPXgvbik6eT5fP3k8bz8obj0uNzA3MTA2NzgxLGk9MCxyPS43MDcxMDY3ODEpOihpPU1hdGguc3FydCh5KSxuPWIvaSxyPXcvaSk6XzxvPyhuPS43MDcxMDY3ODEsaT0uNzA3MTA2NzgxLHI9MCk6KHI9TWF0aC5zcXJ0KF8pLG49eC9yLGk9dy9yKSx0aGlzLnNldChuLGkscixlKSx0aGlzfXZhciBFPU1hdGguc3FydCgoZy1kKSooZy1kKSsoYy1wKSooYy1wKSsoaC1sKSooaC1sKSk7cmV0dXJuIE1hdGguYWJzKEUpPC4wMDEmJihFPTEpLHRoaXMueD0oZy1kKS9FLHRoaXMueT0oYy1wKS9FLHRoaXMuej0oaC1sKS9FLHRoaXMudz1NYXRoLmFjb3MoKHUrZit2LTEpLzIpLHRoaXN9LG1pbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWluKHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC55KSx0aGlzLno9TWF0aC5taW4odGhpcy56LHQueiksdGhpcy53PU1hdGgubWluKHRoaXMudyx0LncpLHRoaXN9LG1heDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PU1hdGgubWF4KHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1heCh0aGlzLnksdC55KSx0aGlzLno9TWF0aC5tYXgodGhpcy56LHQueiksdGhpcy53PU1hdGgubWF4KHRoaXMudyx0LncpLHRoaXN9LGNsYW1wOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD1NYXRoLm1heCh0LngsTWF0aC5taW4oZS54LHRoaXMueCkpLHRoaXMueT1NYXRoLm1heCh0LnksTWF0aC5taW4oZS55LHRoaXMueSkpLHRoaXMuej1NYXRoLm1heCh0LnosTWF0aC5taW4oZS56LHRoaXMueikpLHRoaXMudz1NYXRoLm1heCh0LncsTWF0aC5taW4oZS53LHRoaXMudykpLHRoaXN9LGNsYW1wU2NhbGFyOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEgsZT1uZXcgSDtyZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gdC5zZXQobixuLG4sbiksZS5zZXQoaSxpLGksaSksdGhpcy5jbGFtcCh0LGUpfX0oKSxmbG9vcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpcy56PU1hdGguZmxvb3IodGhpcy56KSx0aGlzLnc9TWF0aC5mbG9vcih0aGlzLncpLHRoaXN9LGNlaWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGguY2VpbCh0aGlzLngpLHRoaXMueT1NYXRoLmNlaWwodGhpcy55KSx0aGlzLno9TWF0aC5jZWlsKHRoaXMueiksdGhpcy53PU1hdGguY2VpbCh0aGlzLncpLHRoaXN9LHJvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzLno9TWF0aC5yb3VuZCh0aGlzLnopLHRoaXMudz1NYXRoLnJvdW5kKHRoaXMudyksdGhpc30scm91bmRUb1plcm86ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PXRoaXMueDwwP01hdGguY2VpbCh0aGlzLngpOk1hdGguZmxvb3IodGhpcy54KSx0aGlzLnk9dGhpcy55PDA/TWF0aC5jZWlsKHRoaXMueSk6TWF0aC5mbG9vcih0aGlzLnkpLHRoaXMuej10aGlzLno8MD9NYXRoLmNlaWwodGhpcy56KTpNYXRoLmZsb29yKHRoaXMueiksdGhpcy53PXRoaXMudzwwP01hdGguY2VpbCh0aGlzLncpOk1hdGguZmxvb3IodGhpcy53KSx0aGlzfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PS10aGlzLngsdGhpcy55PS10aGlzLnksdGhpcy56PS10aGlzLnosdGhpcy53PS10aGlzLncsdGhpc30sZG90OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqdC54K3RoaXMueSp0LnkrdGhpcy56KnQueit0aGlzLncqdC53fSxsZW5ndGhTcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLngqdGhpcy54K3RoaXMueSp0aGlzLnkrdGhpcy56KnRoaXMueit0aGlzLncqdGhpcy53fSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56K3RoaXMudyp0aGlzLncpfSxsZW5ndGhNYW5oYXR0YW46ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hYnModGhpcy54KStNYXRoLmFicyh0aGlzLnkpK01hdGguYWJzKHRoaXMueikrTWF0aC5hYnModGhpcy53KX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKCkpfSxzZXRMZW5ndGg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIodC90aGlzLmxlbmd0aCgpKX0sbGVycDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLngrPSh0LngtdGhpcy54KSplLHRoaXMueSs9KHQueS10aGlzLnkpKmUsdGhpcy56Kz0odC56LXRoaXMueikqZSx0aGlzLncrPSh0LnctdGhpcy53KSplLHRoaXN9LGxlcnBWZWN0b3JzOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5zdWJWZWN0b3JzKGUsdCkubXVsdGlwbHlTY2FsYXIobikuYWRkKHQpfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQueD09PXRoaXMueCYmdC55PT09dGhpcy55JiZ0Lno9PT10aGlzLnomJnQudz09PXRoaXMud30sZnJvbUFycmF5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHRoaXMueD10W2VdLHRoaXMueT10W2UrMV0sdGhpcy56PXRbZSsyXSx0aGlzLnc9dFtlKzNdLHRoaXN9LHRvQXJyYXk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9W10pLHZvaWQgMD09PWUmJihlPTApLHRbZV09dGhpcy54LHRbZSsxXT10aGlzLnksdFtlKzJdPXRoaXMueix0W2UrM109dGhpcy53LHR9LGZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDAhPT1uJiZjb25zb2xlLndhcm4oXCJUSFJFRS5WZWN0b3I0OiBvZmZzZXQgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIC5mcm9tQnVmZmVyQXR0cmlidXRlKCkuXCIpLHRoaXMueD10LmdldFgoZSksdGhpcy55PXQuZ2V0WShlKSx0aGlzLno9dC5nZXRaKGUpLHRoaXMudz10LmdldFcoZSksdGhpc319KTt2YXIgaW89e2FsaWNlYmx1ZToxNTc5MjM4MyxhbnRpcXVld2hpdGU6MTY0NDQzNzUsYXF1YTo2NTUzNSxhcXVhbWFyaW5lOjgzODg1NjQsYXp1cmU6MTU3OTQxNzUsYmVpZ2U6MTYxMTkyNjAsYmlzcXVlOjE2NzcwMjQ0LGJsYWNrOjAsYmxhbmNoZWRhbG1vbmQ6MTY3NzIwNDUsYmx1ZToyNTUsYmx1ZXZpb2xldDo5MDU1MjAyLGJyb3duOjEwODI0MjM0LGJ1cmx5d29vZDoxNDU5NjIzMSxjYWRldGJsdWU6NjI2NjUyOCxjaGFydHJldXNlOjgzODgzNTIsY2hvY29sYXRlOjEzNzg5NDcwLGNvcmFsOjE2NzQ0MjcyLGNvcm5mbG93ZXJibHVlOjY1OTE5ODEsY29ybnNpbGs6MTY3NzUzODgsY3JpbXNvbjoxNDQyMzEwMCxjeWFuOjY1NTM1LGRhcmtibHVlOjEzOSxkYXJrY3lhbjozNTcyMyxkYXJrZ29sZGVucm9kOjEyMDkyOTM5LGRhcmtncmF5OjExMTE5MDE3LGRhcmtncmVlbjoyNTYwMCxkYXJrZ3JleToxMTExOTAxNyxkYXJra2hha2k6MTI0MzMyNTksZGFya21hZ2VudGE6OTEwOTY0MyxkYXJrb2xpdmVncmVlbjo1NTk3OTk5LGRhcmtvcmFuZ2U6MTY3NDc1MjAsZGFya29yY2hpZDoxMDA0MDAxMixkYXJrcmVkOjkxMDk1MDQsZGFya3NhbG1vbjoxNTMwODQxMCxkYXJrc2VhZ3JlZW46OTQxOTkxOSxkYXJrc2xhdGVibHVlOjQ3MzQzNDcsZGFya3NsYXRlZ3JheTozMTAwNDk1LGRhcmtzbGF0ZWdyZXk6MzEwMDQ5NSxkYXJrdHVycXVvaXNlOjUyOTQ1LGRhcmt2aW9sZXQ6OTY5OTUzOSxkZWVwcGluazoxNjcxNjk0NyxkZWVwc2t5Ymx1ZTo0OTE1MSxkaW1ncmF5OjY5MDgyNjUsZGltZ3JleTo2OTA4MjY1LGRvZGdlcmJsdWU6MjAwMzE5OSxmaXJlYnJpY2s6MTE2NzQxNDYsZmxvcmFsd2hpdGU6MTY3NzU5MjAsZm9yZXN0Z3JlZW46MjI2Mzg0MixmdWNoc2lhOjE2NzExOTM1LGdhaW5zYm9ybzoxNDQ3NDQ2MCxnaG9zdHdoaXRlOjE2MzE2NjcxLGdvbGQ6MTY3NjY3MjAsZ29sZGVucm9kOjE0MzI5MTIwLGdyYXk6ODQyMTUwNCxncmVlbjozMjc2OCxncmVlbnllbGxvdzoxMTQwMzA1NSxncmV5Ojg0MjE1MDQsaG9uZXlkZXc6MTU3OTQxNjAsaG90cGluazoxNjczODc0MCxpbmRpYW5yZWQ6MTM0NTg1MjQsaW5kaWdvOjQ5MTUzMzAsaXZvcnk6MTY3NzcyMDAsa2hha2k6MTU3ODc2NjAsbGF2ZW5kZXI6MTUxMzI0MTAsbGF2ZW5kZXJibHVzaDoxNjc3MzM2NSxsYXduZ3JlZW46ODE5MDk3NixsZW1vbmNoaWZmb246MTY3NzU4ODUsbGlnaHRibHVlOjExMzkzMjU0LGxpZ2h0Y29yYWw6MTU3NjE1MzYsbGlnaHRjeWFuOjE0NzQ1NTk5LGxpZ2h0Z29sZGVucm9keWVsbG93OjE2NDQ4MjEwLGxpZ2h0Z3JheToxMzg4MjMyMyxsaWdodGdyZWVuOjk0OTgyNTYsbGlnaHRncmV5OjEzODgyMzIzLGxpZ2h0cGluazoxNjc1ODQ2NSxsaWdodHNhbG1vbjoxNjc1Mjc2MixsaWdodHNlYWdyZWVuOjIxNDI4OTAsbGlnaHRza3libHVlOjg5MDAzNDYsbGlnaHRzbGF0ZWdyYXk6NzgzMzc1MyxsaWdodHNsYXRlZ3JleTo3ODMzNzUzLGxpZ2h0c3RlZWxibHVlOjExNTg0NzM0LGxpZ2h0eWVsbG93OjE2Nzc3MTg0LGxpbWU6NjUyODAsbGltZWdyZWVuOjMzMjkzMzAsbGluZW46MTY0NDU2NzAsbWFnZW50YToxNjcxMTkzNSxtYXJvb246ODM4ODYwOCxtZWRpdW1hcXVhbWFyaW5lOjY3MzczMjIsbWVkaXVtYmx1ZToyMDUsbWVkaXVtb3JjaGlkOjEyMjExNjY3LG1lZGl1bXB1cnBsZTo5NjYyNjgzLG1lZGl1bXNlYWdyZWVuOjM5NzgwOTcsbWVkaXVtc2xhdGVibHVlOjgwODc3OTAsbWVkaXVtc3ByaW5nZ3JlZW46NjQxNTQsbWVkaXVtdHVycXVvaXNlOjQ3NzIzMDAsbWVkaXVtdmlvbGV0cmVkOjEzMDQ3MTczLG1pZG5pZ2h0Ymx1ZToxNjQ0OTEyLG1pbnRjcmVhbToxNjEyMTg1MCxtaXN0eXJvc2U6MTY3NzAyNzMsbW9jY2FzaW46MTY3NzAyMjksbmF2YWpvd2hpdGU6MTY3Njg2ODUsbmF2eToxMjgsb2xkbGFjZToxNjY0MzU1OCxvbGl2ZTo4NDIxMzc2LG9saXZlZHJhYjo3MDQ4NzM5LG9yYW5nZToxNjc1MzkyMCxvcmFuZ2VyZWQ6MTY3MjkzNDQsb3JjaGlkOjE0MzE1NzM0LHBhbGVnb2xkZW5yb2Q6MTU2NTcxMzAscGFsZWdyZWVuOjEwMDI1ODgwLHBhbGV0dXJxdW9pc2U6MTE1Mjk5NjYscGFsZXZpb2xldHJlZDoxNDM4MTIwMyxwYXBheWF3aGlwOjE2NzczMDc3LHBlYWNocHVmZjoxNjc2NzY3MyxwZXJ1OjEzNDY4OTkxLHBpbms6MTY3NjEwMzUscGx1bToxNDUyNDYzNyxwb3dkZXJibHVlOjExNTkxOTEwLHB1cnBsZTo4Mzg4NzM2LHJlZDoxNjcxMTY4MCxyb3N5YnJvd246MTIzNTc1MTkscm95YWxibHVlOjQyODY5NDUsc2FkZGxlYnJvd246OTEyNzE4NyxzYWxtb246MTY0MTY4ODIsc2FuZHlicm93bjoxNjAzMjg2NCxzZWFncmVlbjozMDUwMzI3LHNlYXNoZWxsOjE2Nzc0NjM4LHNpZW5uYToxMDUwNjc5NyxzaWx2ZXI6MTI2MzIyNTYsc2t5Ymx1ZTo4OTAwMzMxLHNsYXRlYmx1ZTo2OTcwMDYxLHNsYXRlZ3JheTo3MzcyOTQ0LHNsYXRlZ3JleTo3MzcyOTQ0LHNub3c6MTY3NzU5MzAsc3ByaW5nZ3JlZW46NjU0MDcsc3RlZWxibHVlOjQ2MjA5ODAsdGFuOjEzODA4NzgwLHRlYWw6MzI4OTYsdGhpc3RsZToxNDIwNDg4OCx0b21hdG86MTY3MzcwOTUsdHVycXVvaXNlOjQyNTE4NTYsdmlvbGV0OjE1NjMxMDg2LHdoZWF0OjE2MTEzMzMxLHdoaXRlOjE2Nzc3MjE1LHdoaXRlc21va2U6MTYxMTkyODUseWVsbG93OjE2Nzc2OTYwLHllbGxvd2dyZWVuOjEwMTQ1MDc0fTthKHEucHJvdG90eXBlLHtpc0NvbG9yOiEwLHI6MSxnOjEsYjoxLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5pc0NvbG9yP3RoaXMuY29weSh0KTpcIm51bWJlclwiPT10eXBlb2YgdD90aGlzLnNldEhleCh0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmdGhpcy5zZXRTdHlsZSh0KSx0aGlzfSxzZXRTY2FsYXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucj10LHRoaXMuZz10LHRoaXMuYj10LHRoaXN9LHNldEhleDpmdW5jdGlvbih0KXtyZXR1cm4gdD1NYXRoLmZsb29yKHQpLHRoaXMucj0odD4+MTYmMjU1KS8yNTUsdGhpcy5nPSh0Pj44JjI1NSkvMjU1LHRoaXMuYj0oMjU1JnQpLzI1NSx0aGlzfSxzZXRSR0I6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnI9dCx0aGlzLmc9ZSx0aGlzLmI9bix0aGlzfSxzZXRIU0w6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuKXtyZXR1cm4gbjwwJiYobis9MSksbj4xJiYobi09MSksbjwxLzY/dCs2KihlLXQpKm46bjwuNT9lOm48Mi8zP3QrNiooZS10KSooMi8zLW4pOnR9cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtpZihlPVdyLmV1Y2xpZGVhbk1vZHVsbyhlLDEpLG49V3IuY2xhbXAobiwwLDEpLGk9V3IuY2xhbXAoaSwwLDEpLDA9PT1uKXRoaXMucj10aGlzLmc9dGhpcy5iPWk7ZWxzZXt2YXIgcj1pPD0uNT9pKigxK24pOmkrbi1pKm4sbz0yKmktcjt0aGlzLnI9dChvLHIsZSsxLzMpLHRoaXMuZz10KG8scixlKSx0aGlzLmI9dChvLHIsZS0xLzMpfXJldHVybiB0aGlzfX0oKSxzZXRTdHlsZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZvaWQgMCE9PWUmJnBhcnNlRmxvYXQoZSk8MSYmY29uc29sZS53YXJuKFwiVEhSRUUuQ29sb3I6IEFscGhhIGNvbXBvbmVudCBvZiBcIit0K1wiIHdpbGwgYmUgaWdub3JlZC5cIil9dmFyIG47aWYobj0vXigoPzpyZ2J8aHNsKWE/KVxcKFxccyooW15cXCldKilcXCkvLmV4ZWModCkpe3ZhciBpLHI9blsxXSxvPW5bMl07c3dpdGNoKHIpe2Nhc2VcInJnYlwiOmNhc2VcInJnYmFcIjppZihpPS9eKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMobykpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigyNTUscGFyc2VJbnQoaVsxXSwxMCkpLzI1NSx0aGlzLmc9TWF0aC5taW4oMjU1LHBhcnNlSW50KGlbMl0sMTApKS8yNTUsdGhpcy5iPU1hdGgubWluKDI1NSxwYXJzZUludChpWzNdLDEwKSkvMjU1LGUoaVs1XSksdGhpcztpZihpPS9eKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKixcXHMqKFxcZCspXFwlXFxzKigsXFxzKihbMC05XSpcXC4/WzAtOV0rKVxccyopPyQvLmV4ZWMobykpcmV0dXJuIHRoaXMucj1NYXRoLm1pbigxMDAscGFyc2VJbnQoaVsxXSwxMCkpLzEwMCx0aGlzLmc9TWF0aC5taW4oMTAwLHBhcnNlSW50KGlbMl0sMTApKS8xMDAsdGhpcy5iPU1hdGgubWluKDEwMCxwYXJzZUludChpWzNdLDEwKSkvMTAwLGUoaVs1XSksdGhpczticmVhaztjYXNlXCJoc2xcIjpjYXNlXCJoc2xhXCI6aWYoaT0vXihbMC05XSpcXC4/WzAtOV0rKVxccyosXFxzKihcXGQrKVxcJVxccyosXFxzKihcXGQrKVxcJVxccyooLFxccyooWzAtOV0qXFwuP1swLTldKylcXHMqKT8kLy5leGVjKG8pKXt2YXIgYT1wYXJzZUZsb2F0KGlbMV0pLzM2MCxzPXBhcnNlSW50KGlbMl0sMTApLzEwMCx1PXBhcnNlSW50KGlbM10sMTApLzEwMDtyZXR1cm4gZShpWzVdKSx0aGlzLnNldEhTTChhLHMsdSl9fX1lbHNlIGlmKG49L15cXCMoW0EtRmEtZjAtOV0rKSQvLmV4ZWModCkpe3ZhciBsPW5bMV0sYz1sLmxlbmd0aDtpZigzPT09YylyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGwuY2hhckF0KDApK2wuY2hhckF0KDApLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGwuY2hhckF0KDEpK2wuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGwuY2hhckF0KDIpK2wuY2hhckF0KDIpLDE2KS8yNTUsdGhpcztpZig2PT09YylyZXR1cm4gdGhpcy5yPXBhcnNlSW50KGwuY2hhckF0KDApK2wuY2hhckF0KDEpLDE2KS8yNTUsdGhpcy5nPXBhcnNlSW50KGwuY2hhckF0KDIpK2wuY2hhckF0KDMpLDE2KS8yNTUsdGhpcy5iPXBhcnNlSW50KGwuY2hhckF0KDQpK2wuY2hhckF0KDUpLDE2KS8yNTUsdGhpc31pZih0JiZ0Lmxlbmd0aD4wKXt2YXIgbD1pb1t0XTt2b2lkIDAhPT1sP3RoaXMuc2V0SGV4KGwpOmNvbnNvbGUud2FybihcIlRIUkVFLkNvbG9yOiBVbmtub3duIGNvbG9yIFwiK3QpfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnIsdGhpcy5nLHRoaXMuYil9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucj10LnIsdGhpcy5nPXQuZyx0aGlzLmI9dC5iLHRoaXN9LGNvcHlHYW1tYVRvTGluZWFyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTIpLHRoaXMucj1NYXRoLnBvdyh0LnIsZSksdGhpcy5nPU1hdGgucG93KHQuZyxlKSx0aGlzLmI9TWF0aC5wb3codC5iLGUpLHRoaXN9LGNvcHlMaW5lYXJUb0dhbW1hOmZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9Mik7dmFyIG49ZT4wPzEvZToxO3JldHVybiB0aGlzLnI9TWF0aC5wb3codC5yLG4pLHRoaXMuZz1NYXRoLnBvdyh0LmcsbiksdGhpcy5iPU1hdGgucG93KHQuYixuKSx0aGlzfSxjb252ZXJ0R2FtbWFUb0xpbmVhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMucixlPXRoaXMuZyxuPXRoaXMuYjtyZXR1cm4gdGhpcy5yPXQqdCx0aGlzLmc9ZSplLHRoaXMuYj1uKm4sdGhpc30sY29udmVydExpbmVhclRvR2FtbWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yPU1hdGguc3FydCh0aGlzLnIpLHRoaXMuZz1NYXRoLnNxcnQodGhpcy5nKSx0aGlzLmI9TWF0aC5zcXJ0KHRoaXMuYiksdGhpc30sZ2V0SGV4OmZ1bmN0aW9uKCl7cmV0dXJuIDI1NSp0aGlzLnI8PDE2XjI1NSp0aGlzLmc8PDheMjU1KnRoaXMuYjw8MH0sZ2V0SGV4U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKFwiMDAwMDAwXCIrdGhpcy5nZXRIZXgoKS50b1N0cmluZygxNikpLnNsaWNlKC02KX0sZ2V0SFNMOmZ1bmN0aW9uKHQpe3ZhciBlLG4saT10fHx7aDowLHM6MCxsOjB9LHI9dGhpcy5yLG89dGhpcy5nLGE9dGhpcy5iLHM9TWF0aC5tYXgocixvLGEpLHU9TWF0aC5taW4ocixvLGEpLGw9KHUrcykvMjtpZih1PT09cyllPTAsbj0wO2Vsc2V7dmFyIGM9cy11O3N3aXRjaChuPWw8PS41P2MvKHMrdSk6Yy8oMi1zLXUpLHMpe2Nhc2UgcjplPShvLWEpL2MrKG88YT82OjApO2JyZWFrO2Nhc2UgbzplPShhLXIpL2MrMjticmVhaztjYXNlIGE6ZT0oci1vKS9jKzR9ZS89Nn1yZXR1cm4gaS5oPWUsaS5zPW4saS5sPWwsaX0sZ2V0U3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm5cInJnYihcIisoMjU1KnRoaXMucnwwKStcIixcIisoMjU1KnRoaXMuZ3wwKStcIixcIisoMjU1KnRoaXMuYnwwKStcIilcIn0sb2Zmc2V0SFNMOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLmdldEhTTCgpO3JldHVybiBpLmgrPXQsaS5zKz1lLGkubCs9bix0aGlzLnNldEhTTChpLmgsaS5zLGkubCksdGhpc30sYWRkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnIrPXQucix0aGlzLmcrPXQuZyx0aGlzLmIrPXQuYix0aGlzfSxhZGRDb2xvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yPXQucitlLnIsdGhpcy5nPXQuZytlLmcsdGhpcy5iPXQuYitlLmIsdGhpc30sYWRkU2NhbGFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnIrPXQsdGhpcy5nKz10LHRoaXMuYis9dCx0aGlzfSxzdWI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucj1NYXRoLm1heCgwLHRoaXMuci10LnIpLHRoaXMuZz1NYXRoLm1heCgwLHRoaXMuZy10LmcpLHRoaXMuYj1NYXRoLm1heCgwLHRoaXMuYi10LmIpLHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnIqPXQucix0aGlzLmcqPXQuZyx0aGlzLmIqPXQuYix0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yKj10LHRoaXMuZyo9dCx0aGlzLmIqPXQsdGhpc30sbGVycDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnIrPSh0LnItdGhpcy5yKSplLHRoaXMuZys9KHQuZy10aGlzLmcpKmUsdGhpcy5iKz0odC5iLXRoaXMuYikqZSx0aGlzfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQucj09PXRoaXMuciYmdC5nPT09dGhpcy5nJiZ0LmI9PT10aGlzLmJ9LGZyb21BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLnI9dFtlXSx0aGlzLmc9dFtlKzFdLHRoaXMuYj10W2UrMl0sdGhpc30sdG9BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09ZSYmKGU9MCksdFtlXT10aGlzLnIsdFtlKzFdPXRoaXMuZyx0W2UrMl09dGhpcy5iLHR9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEhleCgpfX0pO3ZhciBybz17Y29tbW9uOntkaWZmdXNlOnt2YWx1ZTpuZXcgcSgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LG1hcDp7dmFsdWU6bnVsbH0sb2Zmc2V0UmVwZWF0Ont2YWx1ZTpuZXcgSCgwLDAsMSwxKX0sc3BlY3VsYXJNYXA6e3ZhbHVlOm51bGx9LGFscGhhTWFwOnt2YWx1ZTpudWxsfSxlbnZNYXA6e3ZhbHVlOm51bGx9LGZsaXBFbnZNYXA6e3ZhbHVlOi0xfSxyZWZsZWN0aXZpdHk6e3ZhbHVlOjF9LHJlZnJhY3Rpb25SYXRpbzp7dmFsdWU6Ljk4fX0sYW9tYXA6e2FvTWFwOnt2YWx1ZTpudWxsfSxhb01hcEludGVuc2l0eTp7dmFsdWU6MX19LGxpZ2h0bWFwOntsaWdodE1hcDp7dmFsdWU6bnVsbH0sbGlnaHRNYXBJbnRlbnNpdHk6e3ZhbHVlOjF9fSxlbWlzc2l2ZW1hcDp7ZW1pc3NpdmVNYXA6e3ZhbHVlOm51bGx9fSxidW1wbWFwOntidW1wTWFwOnt2YWx1ZTpudWxsfSxidW1wU2NhbGU6e3ZhbHVlOjF9fSxub3JtYWxtYXA6e25vcm1hbE1hcDp7dmFsdWU6bnVsbH0sbm9ybWFsU2NhbGU6e3ZhbHVlOm5ldyBvKDEsMSl9fSxkaXNwbGFjZW1lbnRtYXA6e2Rpc3BsYWNlbWVudE1hcDp7dmFsdWU6bnVsbH0sZGlzcGxhY2VtZW50U2NhbGU6e3ZhbHVlOjF9LGRpc3BsYWNlbWVudEJpYXM6e3ZhbHVlOjB9fSxyb3VnaG5lc3NtYXA6e3JvdWdobmVzc01hcDp7dmFsdWU6bnVsbH19LG1ldGFsbmVzc21hcDp7bWV0YWxuZXNzTWFwOnt2YWx1ZTpudWxsfX0sZ3JhZGllbnRtYXA6e2dyYWRpZW50TWFwOnt2YWx1ZTpudWxsfX0sZm9nOntmb2dEZW5zaXR5Ont2YWx1ZToyNWUtNX0sZm9nTmVhcjp7dmFsdWU6MX0sZm9nRmFyOnt2YWx1ZToyZTN9LGZvZ0NvbG9yOnt2YWx1ZTpuZXcgcSgxNjc3NzIxNSl9fSxsaWdodHM6e2FtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxjb2xvcjp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90TGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSxkaXJlY3Rpb246e30sZGlzdGFuY2U6e30sY29uZUNvczp7fSxwZW51bWJyYUNvczp7fSxkZWNheTp7fSxzaGFkb3c6e30sc2hhZG93Qmlhczp7fSxzaGFkb3dSYWRpdXM6e30sc2hhZG93TWFwU2l6ZTp7fX19LHNwb3RTaGFkb3dNYXA6e3ZhbHVlOltdfSxzcG90U2hhZG93TWF0cml4Ont2YWx1ZTpbXX0scG9pbnRMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2NvbG9yOnt9LHBvc2l0aW9uOnt9LGRlY2F5Ont9LGRpc3RhbmNlOnt9LHNoYWRvdzp7fSxzaGFkb3dCaWFzOnt9LHNoYWRvd1JhZGl1czp7fSxzaGFkb3dNYXBTaXplOnt9fX0scG9pbnRTaGFkb3dNYXA6e3ZhbHVlOltdfSxwb2ludFNoYWRvd01hdHJpeDp7dmFsdWU6W119LGhlbWlzcGhlcmVMaWdodHM6e3ZhbHVlOltdLHByb3BlcnRpZXM6e2RpcmVjdGlvbjp7fSxza3lDb2xvcjp7fSxncm91bmRDb2xvcjp7fX19LHJlY3RBcmVhTGlnaHRzOnt2YWx1ZTpbXSxwcm9wZXJ0aWVzOntjb2xvcjp7fSxwb3NpdGlvbjp7fSx3aWR0aDp7fSxoZWlnaHQ6e319fX0scG9pbnRzOntkaWZmdXNlOnt2YWx1ZTpuZXcgcSgxNTY1ODczNCl9LG9wYWNpdHk6e3ZhbHVlOjF9LHNpemU6e3ZhbHVlOjF9LHNjYWxlOnt2YWx1ZToxfSxtYXA6e3ZhbHVlOm51bGx9LG9mZnNldFJlcGVhdDp7dmFsdWU6bmV3IEgoMCwwLDEsMSl9fX0sb289e21lcmdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17fSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRoaXMuY2xvbmUodFtuXSk7Zm9yKHZhciByIGluIGkpZVtyXT1pW3JdfXJldHVybiBlfSxjbG9uZTpmdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7ZVtuXT17fTtmb3IodmFyIGkgaW4gdFtuXSl7dmFyIHI9dFtuXVtpXTtyJiYoci5pc0NvbG9yfHxyLmlzTWF0cml4M3x8ci5pc01hdHJpeDR8fHIuaXNWZWN0b3IyfHxyLmlzVmVjdG9yM3x8ci5pc1ZlY3RvcjR8fHIuaXNUZXh0dXJlKT9lW25dW2ldPXIuY2xvbmUoKTpBcnJheS5pc0FycmF5KHIpP2Vbbl1baV09ci5zbGljZSgpOmVbbl1baV09cn19cmV0dXJuIGV9fSxhbz1cIiNpZmRlZiBVU0VfQUxQSEFNQVBcXG5cXHRkaWZmdXNlQ29sb3IuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VXYgKS5nO1xcbiNlbmRpZlxcblwiLHNvPVwiI2lmZGVmIFVTRV9BTFBIQU1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbiNlbmRpZlxcblwiLHVvPVwiI2lmZGVmIEFMUEhBVEVTVFxcblxcdGlmICggZGlmZnVzZUNvbG9yLmEgPCBBTFBIQVRFU1QgKSBkaXNjYXJkO1xcbiNlbmRpZlxcblwiLGxvPVwiI2lmZGVmIFVTRV9BT01BUFxcblxcdGZsb2F0IGFtYmllbnRPY2NsdXNpb24gPSAoIHRleHR1cmUyRCggYW9NYXAsIHZVdjIgKS5yIC0gMS4wICkgKiBhb01hcEludGVuc2l0eSArIDEuMDtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKj0gYW1iaWVudE9jY2x1c2lvbjtcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHRcXHRmbG9hdCBkb3ROViA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZ2VvbWV0cnkudmlld0RpciApICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciAqPSBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGRvdE5WLCBhbWJpZW50T2NjbHVzaW9uLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLGNvPVwiI2lmZGVmIFVTRV9BT01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgYW9NYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsaG89XCJcXG52ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyggcG9zaXRpb24gKTtcXG5cIixmbz1cIlxcbnZlYzMgb2JqZWN0Tm9ybWFsID0gdmVjMyggbm9ybWFsICk7XFxuXCIscG89XCJmbG9hdCBwdW5jdHVhbExpZ2h0SW50ZW5zaXR5VG9JcnJhZGlhbmNlRmFjdG9yKCBjb25zdCBpbiBmbG9hdCBsaWdodERpc3RhbmNlLCBjb25zdCBpbiBmbG9hdCBjdXRvZmZEaXN0YW5jZSwgY29uc3QgaW4gZmxvYXQgZGVjYXlFeHBvbmVudCApIHtcXG5cXHRcXHRpZiggZGVjYXlFeHBvbmVudCA+IDAuMCApIHtcXG4jaWYgZGVmaW5lZCAoIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFMgKVxcblxcdFxcdFxcdGZsb2F0IGRpc3RhbmNlRmFsbG9mZiA9IDEuMCAvIG1heCggcG93KCBsaWdodERpc3RhbmNlLCBkZWNheUV4cG9uZW50ICksIDAuMDEgKTtcXG5cXHRcXHRcXHRmbG9hdCBtYXhEaXN0YW5jZUN1dG9mZkZhY3RvciA9IHBvdzIoIHNhdHVyYXRlKCAxLjAgLSBwb3c0KCBsaWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKSApICk7XFxuXFx0XFx0XFx0cmV0dXJuIGRpc3RhbmNlRmFsbG9mZiAqIG1heERpc3RhbmNlQ3V0b2ZmRmFjdG9yO1xcbiNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHBvdyggc2F0dXJhdGUoIC1saWdodERpc3RhbmNlIC8gY3V0b2ZmRGlzdGFuY2UgKyAxLjAgKSwgZGVjYXlFeHBvbmVudCApO1xcbiNlbmRpZlxcblxcdFxcdH1cXG5cXHRcXHRyZXR1cm4gMS4wO1xcbn1cXG52ZWMzIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBjb25zdCBpbiB2ZWMzIGRpZmZ1c2VDb2xvciApIHtcXG5cXHRyZXR1cm4gUkVDSVBST0NBTF9QSSAqIGRpZmZ1c2VDb2xvcjtcXG59XFxudmVjMyBGX1NjaGxpY2soIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgZG90TEggKSB7XFxuXFx0ZmxvYXQgZnJlc25lbCA9IGV4cDIoICggLTUuNTU0NzMgKiBkb3RMSCAtIDYuOTgzMTYgKSAqIGRvdExIICk7XFxuXFx0cmV0dXJuICggMS4wIC0gc3BlY3VsYXJDb2xvciApICogZnJlc25lbCArIHNwZWN1bGFyQ29sb3I7XFxufVxcbmZsb2F0IEdfR0dYX1NtaXRoKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBnbCA9IGRvdE5MICsgc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROTCApICk7XFxuXFx0ZmxvYXQgZ3YgPSBkb3ROViArIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TlYgKSApO1xcblxcdHJldHVybiAxLjAgLyAoIGdsICogZ3YgKTtcXG59XFxuZmxvYXQgR19HR1hfU21pdGhDb3JyZWxhdGVkKCBjb25zdCBpbiBmbG9hdCBhbHBoYSwgY29uc3QgaW4gZmxvYXQgZG90TkwsIGNvbnN0IGluIGZsb2F0IGRvdE5WICkge1xcblxcdGZsb2F0IGEyID0gcG93MiggYWxwaGEgKTtcXG5cXHRmbG9hdCBndiA9IGRvdE5MICogc3FydCggYTIgKyAoIDEuMCAtIGEyICkgKiBwb3cyKCBkb3ROViApICk7XFxuXFx0ZmxvYXQgZ2wgPSBkb3ROViAqIHNxcnQoIGEyICsgKCAxLjAgLSBhMiApICogcG93MiggZG90TkwgKSApO1xcblxcdHJldHVybiAwLjUgLyBtYXgoIGd2ICsgZ2wsIEVQU0lMT04gKTtcXG59XFxuZmxvYXQgRF9HR1goIGNvbnN0IGluIGZsb2F0IGFscGhhLCBjb25zdCBpbiBmbG9hdCBkb3ROSCApIHtcXG5cXHRmbG9hdCBhMiA9IHBvdzIoIGFscGhhICk7XFxuXFx0ZmxvYXQgZGVub20gPSBwb3cyKCBkb3ROSCApICogKCBhMiAtIDEuMCApICsgMS4wO1xcblxcdHJldHVybiBSRUNJUFJPQ0FMX1BJICogYTIgLyBwb3cyKCBkZW5vbSApO1xcbn1cXG52ZWMzIEJSREZfU3BlY3VsYXJfR0dYKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzICkge1xcblxcdGZsb2F0IGFscGhhID0gcG93Miggcm91Z2huZXNzICk7XFxuXFx0dmVjMyBoYWxmRGlyID0gbm9ybWFsaXplKCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiArIGdlb21ldHJ5LnZpZXdEaXIgKTtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKSApO1xcblxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRmbG9hdCBkb3ROSCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgaGFsZkRpciApICk7XFxuXFx0ZmxvYXQgZG90TEggPSBzYXR1cmF0ZSggZG90KCBpbmNpZGVudExpZ2h0LmRpcmVjdGlvbiwgaGFsZkRpciApICk7XFxuXFx0dmVjMyBGID0gRl9TY2hsaWNrKCBzcGVjdWxhckNvbG9yLCBkb3RMSCApO1xcblxcdGZsb2F0IEcgPSBHX0dHWF9TbWl0aENvcnJlbGF0ZWQoIGFscGhhLCBkb3ROTCwgZG90TlYgKTtcXG5cXHRmbG9hdCBEID0gRF9HR1goIGFscGhhLCBkb3ROSCApO1xcblxcdHJldHVybiBGICogKCBHICogRCApO1xcbn1cXG52ZWMyIGx0Y1RleHR1cmVDb29yZHMoIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRjb25zdCBmbG9hdCBMVVRfU0laRSAgPSA2NC4wO1xcblxcdGNvbnN0IGZsb2F0IExVVF9TQ0FMRSA9IChMVVRfU0laRSAtIDEuMCkvTFVUX1NJWkU7XFxuXFx0Y29uc3QgZmxvYXQgTFVUX0JJQVMgID0gMC41L0xVVF9TSVpFO1xcblxcdHZlYzMgTiA9IGdlb21ldHJ5Lm5vcm1hbDtcXG5cXHR2ZWMzIFYgPSBnZW9tZXRyeS52aWV3RGlyO1xcblxcdHZlYzMgUCA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcblxcdGZsb2F0IHRoZXRhID0gYWNvcyggZG90KCBOLCBWICkgKTtcXG5cXHR2ZWMyIHV2ID0gdmVjMihcXG5cXHRcXHRzcXJ0KCBzYXR1cmF0ZSggcm91Z2huZXNzICkgKSxcXG5cXHRcXHRzYXR1cmF0ZSggdGhldGEgLyAoIDAuNSAqIFBJICkgKSApO1xcblxcdHV2ID0gdXYgKiBMVVRfU0NBTEUgKyBMVVRfQklBUztcXG5cXHRyZXR1cm4gdXY7XFxufVxcbnZvaWQgY2xpcFF1YWRUb0hvcml6b24oIGlub3V0IHZlYzMgTFs1XSwgb3V0IGludCBuICkge1xcblxcdGludCBjb25maWcgPSAwO1xcblxcdGlmICggTFswXS56ID4gMC4wICkgY29uZmlnICs9IDE7XFxuXFx0aWYgKCBMWzFdLnogPiAwLjAgKSBjb25maWcgKz0gMjtcXG5cXHRpZiAoIExbMl0ueiA+IDAuMCApIGNvbmZpZyArPSA0O1xcblxcdGlmICggTFszXS56ID4gMC4wICkgY29uZmlnICs9IDg7XFxuXFx0biA9IDA7XFxuXFx0aWYgKCBjb25maWcgPT0gMCApIHtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gMSApIHtcXG5cXHRcXHRuID0gMztcXG5cXHRcXHRMWzFdID0gLUxbMV0ueiAqIExbMF0gKyBMWzBdLnogKiBMWzFdO1xcblxcdFxcdExbMl0gPSAtTFszXS56ICogTFswXSArIExbMF0ueiAqIExbM107XFxuXFx0fSBlbHNlIGlmICggY29uZmlnID09IDIgKSB7XFxuXFx0XFx0biA9IDM7XFxuXFx0XFx0TFswXSA9IC1MWzBdLnogKiBMWzFdICsgTFsxXS56ICogTFswXTtcXG5cXHRcXHRMWzJdID0gLUxbMl0ueiAqIExbMV0gKyBMWzFdLnogKiBMWzJdO1xcblxcdH0gZWxzZSBpZiAoIGNvbmZpZyA9PSAzICkge1xcblxcdFxcdG4gPSA0O1xcblxcdFxcdExbMl0gPSAtTFsyXS56ICogTFsxXSArIExbMV0ueiAqIExbMl07XFxuXFx0XFx0TFszXSA9IC1MWzNdLnogKiBMWzBdICsgTFswXS56ICogTFszXTtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gNCApIHtcXG5cXHRcXHRuID0gMztcXG5cXHRcXHRMWzBdID0gLUxbM10ueiAqIExbMl0gKyBMWzJdLnogKiBMWzNdO1xcblxcdFxcdExbMV0gPSAtTFsxXS56ICogTFsyXSArIExbMl0ueiAqIExbMV07XFxuXFx0fSBlbHNlIGlmICggY29uZmlnID09IDUgKSB7XFxuXFx0XFx0biA9IDA7XFxuXFx0fSBlbHNlIGlmICggY29uZmlnID09IDYgKSB7XFxuXFx0XFx0biA9IDQ7XFxuXFx0XFx0TFswXSA9IC1MWzBdLnogKiBMWzFdICsgTFsxXS56ICogTFswXTtcXG5cXHRcXHRMWzNdID0gLUxbM10ueiAqIExbMl0gKyBMWzJdLnogKiBMWzNdO1xcblxcdH0gZWxzZSBpZiAoIGNvbmZpZyA9PSA3ICkge1xcblxcdFxcdG4gPSA1O1xcblxcdFxcdExbNF0gPSAtTFszXS56ICogTFswXSArIExbMF0ueiAqIExbM107XFxuXFx0XFx0TFszXSA9IC1MWzNdLnogKiBMWzJdICsgTFsyXS56ICogTFszXTtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gOCApIHtcXG5cXHRcXHRuID0gMztcXG5cXHRcXHRMWzBdID0gLUxbMF0ueiAqIExbM10gKyBMWzNdLnogKiBMWzBdO1xcblxcdFxcdExbMV0gPSAtTFsyXS56ICogTFszXSArIExbM10ueiAqIExbMl07XFxuXFx0XFx0TFsyXSA9ICBMWzNdO1xcblxcdH0gZWxzZSBpZiAoIGNvbmZpZyA9PSA5ICkge1xcblxcdFxcdG4gPSA0O1xcblxcdFxcdExbMV0gPSAtTFsxXS56ICogTFswXSArIExbMF0ueiAqIExbMV07XFxuXFx0XFx0TFsyXSA9IC1MWzJdLnogKiBMWzNdICsgTFszXS56ICogTFsyXTtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gMTAgKSB7XFxuXFx0XFx0biA9IDA7XFxuXFx0fSBlbHNlIGlmICggY29uZmlnID09IDExICkge1xcblxcdFxcdG4gPSA1O1xcblxcdFxcdExbNF0gPSBMWzNdO1xcblxcdFxcdExbM10gPSAtTFsyXS56ICogTFszXSArIExbM10ueiAqIExbMl07XFxuXFx0XFx0TFsyXSA9IC1MWzJdLnogKiBMWzFdICsgTFsxXS56ICogTFsyXTtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gMTIgKSB7XFxuXFx0XFx0biA9IDQ7XFxuXFx0XFx0TFsxXSA9IC1MWzFdLnogKiBMWzJdICsgTFsyXS56ICogTFsxXTtcXG5cXHRcXHRMWzBdID0gLUxbMF0ueiAqIExbM10gKyBMWzNdLnogKiBMWzBdO1xcblxcdH0gZWxzZSBpZiAoIGNvbmZpZyA9PSAxMyApIHtcXG5cXHRcXHRuID0gNTtcXG5cXHRcXHRMWzRdID0gTFszXTtcXG5cXHRcXHRMWzNdID0gTFsyXTtcXG5cXHRcXHRMWzJdID0gLUxbMV0ueiAqIExbMl0gKyBMWzJdLnogKiBMWzFdO1xcblxcdFxcdExbMV0gPSAtTFsxXS56ICogTFswXSArIExbMF0ueiAqIExbMV07XFxuXFx0fSBlbHNlIGlmICggY29uZmlnID09IDE0ICkge1xcblxcdFxcdG4gPSA1O1xcblxcdFxcdExbNF0gPSAtTFswXS56ICogTFszXSArIExbM10ueiAqIExbMF07XFxuXFx0XFx0TFswXSA9IC1MWzBdLnogKiBMWzFdICsgTFsxXS56ICogTFswXTtcXG5cXHR9IGVsc2UgaWYgKCBjb25maWcgPT0gMTUgKSB7XFxuXFx0XFx0biA9IDQ7XFxuXFx0fVxcblxcdGlmICggbiA9PSAzIClcXG5cXHRcXHRMWzNdID0gTFswXTtcXG5cXHRpZiAoIG4gPT0gNCApXFxuXFx0XFx0TFs0XSA9IExbMF07XFxufVxcbmZsb2F0IGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdEVkZ2UoIHZlYzMgdjEsIHZlYzMgdjIgKSB7XFxuXFx0ZmxvYXQgY29zVGhldGEgPSBkb3QoIHYxLCB2MiApO1xcblxcdGZsb2F0IHRoZXRhID0gYWNvcyggY29zVGhldGEgKTtcXG5cXHRmbG9hdCByZXMgPSBjcm9zcyggdjEsIHYyICkueiAqICggKCB0aGV0YSA+IDAuMDAxICkgPyB0aGV0YSAvIHNpbiggdGhldGEgKSA6IDEuMCApO1xcblxcdHJldHVybiByZXM7XFxufVxcbnZvaWQgaW5pdFJlY3RQb2ludHMoIGNvbnN0IGluIHZlYzMgcG9zLCBjb25zdCBpbiB2ZWMzIGhhbGZXaWR0aCwgY29uc3QgaW4gdmVjMyBoYWxmSGVpZ2h0LCBvdXQgdmVjMyByZWN0UG9pbnRzWzRdICkge1xcblxcdHJlY3RQb2ludHNbMF0gPSBwb3MgLSBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcblxcdHJlY3RQb2ludHNbMV0gPSBwb3MgKyBoYWxmV2lkdGggLSBoYWxmSGVpZ2h0O1xcblxcdHJlY3RQb2ludHNbMl0gPSBwb3MgKyBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xcblxcdHJlY3RQb2ludHNbM10gPSBwb3MgLSBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0O1xcbn1cXG52ZWMzIGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gbWF0MyBicmRmTWF0LCBjb25zdCBpbiB2ZWMzIHJlY3RQb2ludHNbNF0gKSB7XFxuXFx0dmVjMyBOID0gZ2VvbWV0cnkubm9ybWFsO1xcblxcdHZlYzMgViA9IGdlb21ldHJ5LnZpZXdEaXI7XFxuXFx0dmVjMyBQID0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0dmVjMyBUMSwgVDI7XFxuXFx0VDEgPSBub3JtYWxpemUoViAtIE4gKiBkb3QoIFYsIE4gKSk7XFxuXFx0VDIgPSAtIGNyb3NzKCBOLCBUMSApO1xcblxcdG1hdDMgYnJkZldydFN1cmZhY2UgPSBicmRmTWF0ICogdHJhbnNwb3NlKCBtYXQzKCBUMSwgVDIsIE4gKSApO1xcblxcdHZlYzMgY2xpcHBlZFJlY3RbNV07XFxuXFx0Y2xpcHBlZFJlY3RbMF0gPSBicmRmV3J0U3VyZmFjZSAqICggcmVjdFBvaW50c1swXSAtIFAgKTtcXG5cXHRjbGlwcGVkUmVjdFsxXSA9IGJyZGZXcnRTdXJmYWNlICogKCByZWN0UG9pbnRzWzFdIC0gUCApO1xcblxcdGNsaXBwZWRSZWN0WzJdID0gYnJkZldydFN1cmZhY2UgKiAoIHJlY3RQb2ludHNbMl0gLSBQICk7XFxuXFx0Y2xpcHBlZFJlY3RbM10gPSBicmRmV3J0U3VyZmFjZSAqICggcmVjdFBvaW50c1szXSAtIFAgKTtcXG5cXHRpbnQgbjtcXG5cXHRjbGlwUXVhZFRvSG9yaXpvbihjbGlwcGVkUmVjdCwgbik7XFxuXFx0aWYgKCBuID09IDAgKVxcblxcdFxcdHJldHVybiB2ZWMzKCAwLCAwLCAwICk7XFxuXFx0Y2xpcHBlZFJlY3RbMF0gPSBub3JtYWxpemUoIGNsaXBwZWRSZWN0WzBdICk7XFxuXFx0Y2xpcHBlZFJlY3RbMV0gPSBub3JtYWxpemUoIGNsaXBwZWRSZWN0WzFdICk7XFxuXFx0Y2xpcHBlZFJlY3RbMl0gPSBub3JtYWxpemUoIGNsaXBwZWRSZWN0WzJdICk7XFxuXFx0Y2xpcHBlZFJlY3RbM10gPSBub3JtYWxpemUoIGNsaXBwZWRSZWN0WzNdICk7XFxuXFx0Y2xpcHBlZFJlY3RbNF0gPSBub3JtYWxpemUoIGNsaXBwZWRSZWN0WzRdICk7XFxuXFx0ZmxvYXQgc3VtID0gMC4wO1xcblxcdHN1bSArPSBpbnRlZ3JhdGVMdGNCcmRmT3ZlclJlY3RFZGdlKCBjbGlwcGVkUmVjdFswXSwgY2xpcHBlZFJlY3RbMV0gKTtcXG5cXHRzdW0gKz0gaW50ZWdyYXRlTHRjQnJkZk92ZXJSZWN0RWRnZSggY2xpcHBlZFJlY3RbMV0sIGNsaXBwZWRSZWN0WzJdICk7XFxuXFx0c3VtICs9IGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdEVkZ2UoIGNsaXBwZWRSZWN0WzJdLCBjbGlwcGVkUmVjdFszXSApO1xcblxcdGlmIChuID49IDQpXFxuXFx0XFx0c3VtICs9IGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdEVkZ2UoIGNsaXBwZWRSZWN0WzNdLCBjbGlwcGVkUmVjdFs0XSApO1xcblxcdGlmIChuID09IDUpXFxuXFx0XFx0c3VtICs9IGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdEVkZ2UoIGNsaXBwZWRSZWN0WzRdLCBjbGlwcGVkUmVjdFswXSApO1xcblxcdHN1bSA9IG1heCggMC4wLCBzdW0gKTtcXG5cXHR2ZWMzIExvX2kgPSB2ZWMzKCBzdW0sIHN1bSwgc3VtICk7XFxuXFx0cmV0dXJuIExvX2k7XFxufVxcbnZlYzMgUmVjdF9BcmVhX0xpZ2h0X1NwZWN1bGFyX1JlZmxlY3RhbmNlKFxcblxcdFxcdGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksXFxuXFx0XFx0Y29uc3QgaW4gdmVjMyBsaWdodFBvcywgY29uc3QgaW4gdmVjMyBsaWdodEhhbGZXaWR0aCwgY29uc3QgaW4gdmVjMyBsaWdodEhhbGZIZWlnaHQsXFxuXFx0XFx0Y29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLFxcblxcdFxcdGNvbnN0IGluIHNhbXBsZXIyRCBsdGNNYXQsIGNvbnN0IGluIHNhbXBsZXIyRCBsdGNNYWcgKSB7XFxuXFx0dmVjMyByZWN0UG9pbnRzWzRdO1xcblxcdGluaXRSZWN0UG9pbnRzKCBsaWdodFBvcywgbGlnaHRIYWxmV2lkdGgsIGxpZ2h0SGFsZkhlaWdodCwgcmVjdFBvaW50cyApO1xcblxcdHZlYzIgdXYgPSBsdGNUZXh0dXJlQ29vcmRzKCBnZW9tZXRyeSwgcm91Z2huZXNzICk7XFxuXFx0dmVjNCBicmRmTHRjQXBwcm94UGFyYW1zLCB0O1xcblxcdGJyZGZMdGNBcHByb3hQYXJhbXMgPSB0ZXh0dXJlMkQoIGx0Y01hdCwgdXYgKTtcXG5cXHR0ID0gdGV4dHVyZTJEKCBsdGNNYXQsIHV2ICk7XFxuXFx0ZmxvYXQgYnJkZkx0Y1NjYWxhciA9IHRleHR1cmUyRCggbHRjTWFnLCB1diApLmE7XFxuXFx0bWF0MyBicmRmTHRjQXBwcm94TWF0ID0gbWF0MyhcXG5cXHRcXHR2ZWMzKCAgIDEsICAgMCwgdC55ICksXFxuXFx0XFx0dmVjMyggICAwLCB0LnosICAgMCApLFxcblxcdFxcdHZlYzMoIHQudywgICAwLCB0LnggKVxcblxcdCk7XFxuXFx0dmVjMyBzcGVjdWxhclJlZmxlY3RhbmNlID0gaW50ZWdyYXRlTHRjQnJkZk92ZXJSZWN0KCBnZW9tZXRyeSwgYnJkZkx0Y0FwcHJveE1hdCwgcmVjdFBvaW50cyApO1xcblxcdHNwZWN1bGFyUmVmbGVjdGFuY2UgKj0gYnJkZkx0Y1NjYWxhcjtcXG5cXHRyZXR1cm4gc3BlY3VsYXJSZWZsZWN0YW5jZTtcXG59XFxudmVjMyBSZWN0X0FyZWFfTGlnaHRfRGlmZnVzZV9SZWZsZWN0YW5jZShcXG5cXHRcXHRjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LFxcblxcdFxcdGNvbnN0IGluIHZlYzMgbGlnaHRQb3MsIGNvbnN0IGluIHZlYzMgbGlnaHRIYWxmV2lkdGgsIGNvbnN0IGluIHZlYzMgbGlnaHRIYWxmSGVpZ2h0ICkge1xcblxcdHZlYzMgcmVjdFBvaW50c1s0XTtcXG5cXHRpbml0UmVjdFBvaW50cyggbGlnaHRQb3MsIGxpZ2h0SGFsZldpZHRoLCBsaWdodEhhbGZIZWlnaHQsIHJlY3RQb2ludHMgKTtcXG5cXHRtYXQzIGRpZmZ1c2VCcmRmTWF0ID0gbWF0MygxKTtcXG5cXHR2ZWMzIGRpZmZ1c2VSZWZsZWN0YW5jZSA9IGludGVncmF0ZUx0Y0JyZGZPdmVyUmVjdCggZ2VvbWV0cnksIGRpZmZ1c2VCcmRmTWF0LCByZWN0UG9pbnRzICk7XFxuXFx0cmV0dXJuIGRpZmZ1c2VSZWZsZWN0YW5jZTtcXG59XFxudmVjMyBCUkRGX1NwZWN1bGFyX0dHWF9FbnZpcm9ubWVudCggY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gdmVjMyBzcGVjdWxhckNvbG9yLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgZG90TlYgPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGdlb21ldHJ5LnZpZXdEaXIgKSApO1xcblxcdGNvbnN0IHZlYzQgYzAgPSB2ZWM0KCAtIDEsIC0gMC4wMjc1LCAtIDAuNTcyLCAwLjAyMiApO1xcblxcdGNvbnN0IHZlYzQgYzEgPSB2ZWM0KCAxLCAwLjA0MjUsIDEuMDQsIC0gMC4wNCApO1xcblxcdHZlYzQgciA9IHJvdWdobmVzcyAqIGMwICsgYzE7XFxuXFx0ZmxvYXQgYTAwNCA9IG1pbiggci54ICogci54LCBleHAyKCAtIDkuMjggKiBkb3ROViApICkgKiByLnggKyByLnk7XFxuXFx0dmVjMiBBQiA9IHZlYzIoIC0xLjA0LCAxLjA0ICkgKiBhMDA0ICsgci56dztcXG5cXHRyZXR1cm4gc3BlY3VsYXJDb2xvciAqIEFCLnggKyBBQi55O1xcbn1cXG5mbG9hdCBHX0JsaW5uUGhvbmdfSW1wbGljaXQoICkge1xcblxcdHJldHVybiAwLjI1O1xcbn1cXG5mbG9hdCBEX0JsaW5uUGhvbmcoIGNvbnN0IGluIGZsb2F0IHNoaW5pbmVzcywgY29uc3QgaW4gZmxvYXQgZG90TkggKSB7XFxuXFx0cmV0dXJuIFJFQ0lQUk9DQUxfUEkgKiAoIHNoaW5pbmVzcyAqIDAuNSArIDEuMCApICogcG93KCBkb3ROSCwgc2hpbmluZXNzICk7XFxufVxcbnZlYzMgQlJERl9TcGVjdWxhcl9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGluY2lkZW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIHZlYzMgc3BlY3VsYXJDb2xvciwgY29uc3QgaW4gZmxvYXQgc2hpbmluZXNzICkge1xcblxcdHZlYzMgaGFsZkRpciA9IG5vcm1hbGl6ZSggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24gKyBnZW9tZXRyeS52aWV3RGlyICk7XFxuXFx0ZmxvYXQgZG90TkggPSBzYXR1cmF0ZSggZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhhbGZEaXIgKSApO1xcblxcdGZsb2F0IGRvdExIID0gc2F0dXJhdGUoIGRvdCggaW5jaWRlbnRMaWdodC5kaXJlY3Rpb24sIGhhbGZEaXIgKSApO1xcblxcdHZlYzMgRiA9IEZfU2NobGljayggc3BlY3VsYXJDb2xvciwgZG90TEggKTtcXG5cXHRmbG9hdCBHID0gR19CbGlublBob25nX0ltcGxpY2l0KCApO1xcblxcdGZsb2F0IEQgPSBEX0JsaW5uUGhvbmcoIHNoaW5pbmVzcywgZG90TkggKTtcXG5cXHRyZXR1cm4gRiAqICggRyAqIEQgKTtcXG59XFxuZmxvYXQgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBjb25zdCBpbiBmbG9hdCBnZ3hSb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuICggMi4wIC8gcG93MiggZ2d4Um91Z2huZXNzICsgMC4wMDAxICkgLSAyLjAgKTtcXG59XFxuZmxvYXQgQmxpbm5FeHBvbmVudFRvR0dYUm91Z2huZXNzKCBjb25zdCBpbiBmbG9hdCBibGlubkV4cG9uZW50ICkge1xcblxcdHJldHVybiBzcXJ0KCAyLjAgLyAoIGJsaW5uRXhwb25lbnQgKyAyLjAgKSApO1xcbn1cXG5cIixnbz1cIiNpZmRlZiBVU0VfQlVNUE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGJ1bXBNYXA7XFxuXFx0dW5pZm9ybSBmbG9hdCBidW1wU2NhbGU7XFxuXFx0dmVjMiBkSGR4eV9md2QoKSB7XFxuXFx0XFx0dmVjMiBkU1RkeCA9IGRGZHgoIHZVdiApO1xcblxcdFxcdHZlYzIgZFNUZHkgPSBkRmR5KCB2VXYgKTtcXG5cXHRcXHRmbG9hdCBIbGwgPSBidW1wU2NhbGUgKiB0ZXh0dXJlMkQoIGJ1bXBNYXAsIHZVdiApLng7XFxuXFx0XFx0ZmxvYXQgZEJ4ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeCApLnggLSBIbGw7XFxuXFx0XFx0ZmxvYXQgZEJ5ID0gYnVtcFNjYWxlICogdGV4dHVyZTJEKCBidW1wTWFwLCB2VXYgKyBkU1RkeSApLnggLSBIbGw7XFxuXFx0XFx0cmV0dXJuIHZlYzIoIGRCeCwgZEJ5ICk7XFxuXFx0fVxcblxcdHZlYzMgcGVydHVyYk5vcm1hbEFyYiggdmVjMyBzdXJmX3BvcywgdmVjMyBzdXJmX25vcm0sIHZlYzIgZEhkeHkgKSB7XFxuXFx0XFx0dmVjMyB2U2lnbWFYID0gZEZkeCggc3VyZl9wb3MgKTtcXG5cXHRcXHR2ZWMzIHZTaWdtYVkgPSBkRmR5KCBzdXJmX3BvcyApO1xcblxcdFxcdHZlYzMgdk4gPSBzdXJmX25vcm07XFxuXFx0XFx0dmVjMyBSMSA9IGNyb3NzKCB2U2lnbWFZLCB2TiApO1xcblxcdFxcdHZlYzMgUjIgPSBjcm9zcyggdk4sIHZTaWdtYVggKTtcXG5cXHRcXHRmbG9hdCBmRGV0ID0gZG90KCB2U2lnbWFYLCBSMSApO1xcblxcdFxcdHZlYzMgdkdyYWQgPSBzaWduKCBmRGV0ICkgKiAoIGRIZHh5LnggKiBSMSArIGRIZHh5LnkgKiBSMiApO1xcblxcdFxcdHJldHVybiBub3JtYWxpemUoIGFicyggZkRldCApICogc3VyZl9ub3JtIC0gdkdyYWQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIsdm89XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBVTklPTl9DTElQUElOR19QTEFORVM7ICsrIGkgKSB7XFxuXFx0XFx0dmVjNCBwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0aWYgKCBkb3QoIHZWaWV3UG9zaXRpb24sIHBsYW5lLnh5eiApID4gcGxhbmUudyApIGRpc2NhcmQ7XFxuXFx0fVxcblxcdFxcdFxcblxcdCNpZiBVTklPTl9DTElQUElOR19QTEFORVMgPCBOVU1fQ0xJUFBJTkdfUExBTkVTXFxuXFx0XFx0Ym9vbCBjbGlwcGVkID0gdHJ1ZTtcXG5cXHRcXHRmb3IgKCBpbnQgaSA9IFVOSU9OX0NMSVBQSU5HX1BMQU5FUzsgaSA8IE5VTV9DTElQUElOR19QTEFORVM7ICsrIGkgKSB7XFxuXFx0XFx0XFx0dmVjNCBwbGFuZSA9IGNsaXBwaW5nUGxhbmVzWyBpIF07XFxuXFx0XFx0XFx0Y2xpcHBlZCA9ICggZG90KCB2Vmlld1Bvc2l0aW9uLCBwbGFuZS54eXogKSA+IHBsYW5lLncgKSAmJiBjbGlwcGVkO1xcblxcdFxcdH1cXG5cXHRcXHRpZiAoIGNsaXBwZWQgKSBkaXNjYXJkO1xcblxcdFxcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLG1vPVwiI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0I2lmICEgZGVmaW5lZCggUEhZU0lDQUwgKSAmJiAhIGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIHZlYzQgY2xpcHBpbmdQbGFuZXNbIE5VTV9DTElQUElOR19QTEFORVMgXTtcXG4jZW5kaWZcXG5cIix5bz1cIiNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMCAmJiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgISBkZWZpbmVkKCBQSE9ORyApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuXCIsX289XCIjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDAgJiYgISBkZWZpbmVkKCBQSFlTSUNBTCApICYmICEgZGVmaW5lZCggUEhPTkcgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcblwiLGJvPVwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdGRpZmZ1c2VDb2xvci5yZ2IgKj0gdkNvbG9yO1xcbiNlbmRpZlwiLHhvPVwiI2lmZGVmIFVTRV9DT0xPUlxcblxcdHZhcnlpbmcgdmVjMyB2Q29sb3I7XFxuI2VuZGlmXFxuXCIsd289XCIjaWZkZWYgVVNFX0NPTE9SXFxuXFx0dmFyeWluZyB2ZWMzIHZDb2xvcjtcXG4jZW5kaWZcIixFbz1cIiNpZmRlZiBVU0VfQ09MT1JcXG5cXHR2Q29sb3IueHl6ID0gY29sb3IueHl6O1xcbiNlbmRpZlwiLFNvPVwiI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU5XFxuI2RlZmluZSBQSTIgNi4yODMxODUzMDcxOFxcbiNkZWZpbmUgUElfSEFMRiAxLjU3MDc5NjMyNjc5NDlcXG4jZGVmaW5lIFJFQ0lQUk9DQUxfUEkgMC4zMTgzMDk4ODYxOFxcbiNkZWZpbmUgUkVDSVBST0NBTF9QSTIgMC4xNTkxNTQ5NFxcbiNkZWZpbmUgTE9HMiAxLjQ0MjY5NVxcbiNkZWZpbmUgRVBTSUxPTiAxZS02XFxuI2RlZmluZSBzYXR1cmF0ZShhKSBjbGFtcCggYSwgMC4wLCAxLjAgKVxcbiNkZWZpbmUgd2hpdGVDb21wbGltZW50KGEpICggMS4wIC0gc2F0dXJhdGUoIGEgKSApXFxuZmxvYXQgcG93MiggY29uc3QgaW4gZmxvYXQgeCApIHsgcmV0dXJuIHgqeDsgfVxcbmZsb2F0IHBvdzMoIGNvbnN0IGluIGZsb2F0IHggKSB7IHJldHVybiB4KngqeDsgfVxcbmZsb2F0IHBvdzQoIGNvbnN0IGluIGZsb2F0IHggKSB7IGZsb2F0IHgyID0geCp4OyByZXR1cm4geDIqeDI7IH1cXG5mbG9hdCBhdmVyYWdlKCBjb25zdCBpbiB2ZWMzIGNvbG9yICkgeyByZXR1cm4gZG90KCBjb2xvciwgdmVjMyggMC4zMzMzICkgKTsgfVxcbmhpZ2hwIGZsb2F0IHJhbmQoIGNvbnN0IGluIHZlYzIgdXYgKSB7XFxuXFx0Y29uc3QgaGlnaHAgZmxvYXQgYSA9IDEyLjk4OTgsIGIgPSA3OC4yMzMsIGMgPSA0Mzc1OC41NDUzO1xcblxcdGhpZ2hwIGZsb2F0IGR0ID0gZG90KCB1di54eSwgdmVjMiggYSxiICkgKSwgc24gPSBtb2QoIGR0LCBQSSApO1xcblxcdHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbnN0cnVjdCBJbmNpZGVudExpZ2h0IHtcXG5cXHR2ZWMzIGNvbG9yO1xcblxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdGJvb2wgdmlzaWJsZTtcXG59O1xcbnN0cnVjdCBSZWZsZWN0ZWRMaWdodCB7XFxuXFx0dmVjMyBkaXJlY3REaWZmdXNlO1xcblxcdHZlYzMgZGlyZWN0U3BlY3VsYXI7XFxuXFx0dmVjMyBpbmRpcmVjdERpZmZ1c2U7XFxuXFx0dmVjMyBpbmRpcmVjdFNwZWN1bGFyO1xcbn07XFxuc3RydWN0IEdlb21ldHJpY0NvbnRleHQge1xcblxcdHZlYzMgcG9zaXRpb247XFxuXFx0dmVjMyBub3JtYWw7XFxuXFx0dmVjMyB2aWV3RGlyO1xcbn07XFxudmVjMyB0cmFuc2Zvcm1EaXJlY3Rpb24oIGluIHZlYzMgZGlyLCBpbiBtYXQ0IG1hdHJpeCApIHtcXG5cXHRyZXR1cm4gbm9ybWFsaXplKCAoIG1hdHJpeCAqIHZlYzQoIGRpciwgMC4wICkgKS54eXogKTtcXG59XFxudmVjMyBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCBpbiB2ZWMzIGRpciwgaW4gbWF0NCBtYXRyaXggKSB7XFxuXFx0cmV0dXJuIG5vcm1hbGl6ZSggKCB2ZWM0KCBkaXIsIDAuMCApICogbWF0cml4ICkueHl6ICk7XFxufVxcbnZlYzMgcHJvamVjdE9uUGxhbmUoaW4gdmVjMyBwb2ludCwgaW4gdmVjMyBwb2ludE9uUGxhbmUsIGluIHZlYzMgcGxhbmVOb3JtYWwgKSB7XFxuXFx0ZmxvYXQgZGlzdGFuY2UgPSBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludCAtIHBvaW50T25QbGFuZSApO1xcblxcdHJldHVybiAtIGRpc3RhbmNlICogcGxhbmVOb3JtYWwgKyBwb2ludDtcXG59XFxuZmxvYXQgc2lkZU9mUGxhbmUoIGluIHZlYzMgcG9pbnQsIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBzaWduKCBkb3QoIHBvaW50IC0gcG9pbnRPblBsYW5lLCBwbGFuZU5vcm1hbCApICk7XFxufVxcbnZlYzMgbGluZVBsYW5lSW50ZXJzZWN0KCBpbiB2ZWMzIHBvaW50T25MaW5lLCBpbiB2ZWMzIGxpbmVEaXJlY3Rpb24sIGluIHZlYzMgcG9pbnRPblBsYW5lLCBpbiB2ZWMzIHBsYW5lTm9ybWFsICkge1xcblxcdHJldHVybiBsaW5lRGlyZWN0aW9uICogKCBkb3QoIHBsYW5lTm9ybWFsLCBwb2ludE9uUGxhbmUgLSBwb2ludE9uTGluZSApIC8gZG90KCBwbGFuZU5vcm1hbCwgbGluZURpcmVjdGlvbiApICkgKyBwb2ludE9uTGluZTtcXG59XFxubWF0MyB0cmFuc3Bvc2UoIGNvbnN0IGluIG1hdDMgdiApIHtcXG5cXHRtYXQzIHRtcDtcXG5cXHR0bXBbMF0gPSB2ZWMzKHZbMF0ueCwgdlsxXS54LCB2WzJdLngpO1xcblxcdHRtcFsxXSA9IHZlYzModlswXS55LCB2WzFdLnksIHZbMl0ueSk7XFxuXFx0dG1wWzJdID0gdmVjMyh2WzBdLnosIHZbMV0ueiwgdlsyXS56KTtcXG5cXHRyZXR1cm4gdG1wO1xcbn1cXG5cIixNbz1cIiNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFX1VWXFxuI2RlZmluZSBjdWJlVVZfdGV4dHVyZVNpemUgKDEwMjQuMClcXG5pbnQgZ2V0RmFjZUZyb21EaXJlY3Rpb24odmVjMyBkaXJlY3Rpb24pIHtcXG5cXHR2ZWMzIGFic0RpcmVjdGlvbiA9IGFicyhkaXJlY3Rpb24pO1xcblxcdGludCBmYWNlID0gLTE7XFxuXFx0aWYoIGFic0RpcmVjdGlvbi54ID4gYWJzRGlyZWN0aW9uLnogKSB7XFxuXFx0XFx0aWYoYWJzRGlyZWN0aW9uLnggPiBhYnNEaXJlY3Rpb24ueSApXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi54ID4gMC4wID8gMCA6IDM7XFxuXFx0XFx0ZWxzZVxcblxcdFxcdFxcdGZhY2UgPSBkaXJlY3Rpb24ueSA+IDAuMCA/IDEgOiA0O1xcblxcdH1cXG5cXHRlbHNlIHtcXG5cXHRcXHRpZihhYnNEaXJlY3Rpb24ueiA+IGFic0RpcmVjdGlvbi55IClcXG5cXHRcXHRcXHRmYWNlID0gZGlyZWN0aW9uLnogPiAwLjAgPyAyIDogNTtcXG5cXHRcXHRlbHNlXFxuXFx0XFx0XFx0ZmFjZSA9IGRpcmVjdGlvbi55ID4gMC4wID8gMSA6IDQ7XFxuXFx0fVxcblxcdHJldHVybiBmYWNlO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMSAgKGxvZzIoY3ViZVVWX3RleHR1cmVTaXplKjAuMjUpIC0gMS4wKVxcbiNkZWZpbmUgY3ViZVVWX3JhbmdlQ2xhbXAgKGV4cDIoKDYuMCAtIDEuMCkgKiAyLjApKVxcbnZlYzIgTWlwTGV2ZWxJbmZvKCB2ZWMzIHZlYywgZmxvYXQgcm91Z2huZXNzTGV2ZWwsIGZsb2F0IHJvdWdobmVzcyApIHtcXG5cXHRmbG9hdCBzY2FsZSA9IGV4cDIoY3ViZVVWX21heExvZHMxIC0gcm91Z2huZXNzTGV2ZWwpO1xcblxcdGZsb2F0IGR4Um91Z2huZXNzID0gZEZkeChyb3VnaG5lc3MpO1xcblxcdGZsb2F0IGR5Um91Z2huZXNzID0gZEZkeShyb3VnaG5lc3MpO1xcblxcdHZlYzMgZHggPSBkRmR4KCB2ZWMgKiBzY2FsZSAqIGR4Um91Z2huZXNzICk7XFxuXFx0dmVjMyBkeSA9IGRGZHkoIHZlYyAqIHNjYWxlICogZHlSb3VnaG5lc3MgKTtcXG5cXHRmbG9hdCBkID0gbWF4KCBkb3QoIGR4LCBkeCApLCBkb3QoIGR5LCBkeSApICk7XFxuXFx0ZCA9IGNsYW1wKGQsIDEuMCwgY3ViZVVWX3JhbmdlQ2xhbXApO1xcblxcdGZsb2F0IG1pcExldmVsID0gMC41ICogbG9nMihkKTtcXG5cXHRyZXR1cm4gdmVjMihmbG9vcihtaXBMZXZlbCksIGZyYWN0KG1pcExldmVsKSk7XFxufVxcbiNkZWZpbmUgY3ViZVVWX21heExvZHMyIChsb2cyKGN1YmVVVl90ZXh0dXJlU2l6ZSowLjI1KSAtIDIuMClcXG4jZGVmaW5lIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZSAoMS4wIC8gY3ViZVVWX3RleHR1cmVTaXplKVxcbnZlYzIgZ2V0Q3ViZVVWKHZlYzMgZGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3NMZXZlbCwgZmxvYXQgbWlwTGV2ZWwpIHtcXG5cXHRtaXBMZXZlbCA9IHJvdWdobmVzc0xldmVsID4gY3ViZVVWX21heExvZHMyIC0gMy4wID8gMC4wIDogbWlwTGV2ZWw7XFxuXFx0ZmxvYXQgYSA9IDE2LjAgKiBjdWJlVVZfcmNwVGV4dHVyZVNpemU7XFxuXFx0dmVjMiBleHAyX3BhY2tlZCA9IGV4cDIoIHZlYzIoIHJvdWdobmVzc0xldmVsLCBtaXBMZXZlbCApICk7XFxuXFx0dmVjMiByY3BfZXhwMl9wYWNrZWQgPSB2ZWMyKCAxLjAgKSAvIGV4cDJfcGFja2VkO1xcblxcdGZsb2F0IHBvd1NjYWxlID0gZXhwMl9wYWNrZWQueCAqIGV4cDJfcGFja2VkLnk7XFxuXFx0ZmxvYXQgc2NhbGUgPSByY3BfZXhwMl9wYWNrZWQueCAqIHJjcF9leHAyX3BhY2tlZC55ICogMC4yNTtcXG5cXHRmbG9hdCBtaXBPZmZzZXQgPSAwLjc1KigxLjAgLSByY3BfZXhwMl9wYWNrZWQueSkgKiByY3BfZXhwMl9wYWNrZWQueDtcXG5cXHRib29sIGJSZXMgPSBtaXBMZXZlbCA9PSAwLjA7XFxuXFx0c2NhbGUgPSAgYlJlcyAmJiAoc2NhbGUgPCBhKSA/IGEgOiBzY2FsZTtcXG5cXHR2ZWMzIHI7XFxuXFx0dmVjMiBvZmZzZXQ7XFxuXFx0aW50IGZhY2UgPSBnZXRGYWNlRnJvbURpcmVjdGlvbihkaXJlY3Rpb24pO1xcblxcdGZsb2F0IHJjcFBvd1NjYWxlID0gMS4wIC8gcG93U2NhbGU7XFxuXFx0aWYoIGZhY2UgPT0gMCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi54LCAtZGlyZWN0aW9uLnosIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDAuMCttaXBPZmZzZXQsMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDEpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC43NSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gYSA6IG9mZnNldC55O1xcblxcdH1cXG5cXHRlbHNlIGlmKCBmYWNlID09IDIpIHtcXG5cXHRcXHRyID0gdmVjMyhkaXJlY3Rpb24ueiwgZGlyZWN0aW9uLngsIGRpcmVjdGlvbi55KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKDIuMCpzY2FsZSttaXBPZmZzZXQsIDAuNzUgKiByY3BQb3dTY2FsZSk7XFxuXFx0XFx0b2Zmc2V0LnkgPSBiUmVzICYmIChvZmZzZXQueSA8IDIuMCphKSA/IGEgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSBpZiggZmFjZSA9PSAzKSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLngsIGRpcmVjdGlvbi56LCBkaXJlY3Rpb24ueSk7XFxuXFx0XFx0b2Zmc2V0ID0gdmVjMigwLjArbWlwT2Zmc2V0LDAuNSAqIHJjcFBvd1NjYWxlKTtcXG5cXHRcXHRvZmZzZXQueSA9IGJSZXMgJiYgKG9mZnNldC55IDwgMi4wKmEpID8gMC4wIDogb2Zmc2V0Lnk7XFxuXFx0fVxcblxcdGVsc2UgaWYoIGZhY2UgPT0gNCkge1xcblxcdFxcdHIgPSB2ZWMzKGRpcmVjdGlvbi55LCBkaXJlY3Rpb24ueCwgLWRpcmVjdGlvbi56KTtcXG5cXHRcXHRvZmZzZXQgPSB2ZWMyKHNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ZWxzZSB7XFxuXFx0XFx0ciA9IHZlYzMoZGlyZWN0aW9uLnosIC1kaXJlY3Rpb24ueCwgZGlyZWN0aW9uLnkpO1xcblxcdFxcdG9mZnNldCA9IHZlYzIoMi4wKnNjYWxlK21pcE9mZnNldCwgMC41ICogcmNwUG93U2NhbGUpO1xcblxcdFxcdG9mZnNldC55ID0gYlJlcyAmJiAob2Zmc2V0LnkgPCAyLjAqYSkgPyAwLjAgOiBvZmZzZXQueTtcXG5cXHR9XFxuXFx0ciA9IG5vcm1hbGl6ZShyKTtcXG5cXHRmbG9hdCB0ZXhlbE9mZnNldCA9IDAuNSAqIGN1YmVVVl9yY3BUZXh0dXJlU2l6ZTtcXG5cXHR2ZWMyIHMgPSAoIHIueXogLyBhYnMoIHIueCApICsgdmVjMiggMS4wICkgKSAqIDAuNTtcXG5cXHR2ZWMyIGJhc2UgPSBvZmZzZXQgKyB2ZWMyKCB0ZXhlbE9mZnNldCApO1xcblxcdHJldHVybiBiYXNlICsgcyAqICggc2NhbGUgLSAyLjAgKiB0ZXhlbE9mZnNldCApO1xcbn1cXG4jZGVmaW5lIGN1YmVVVl9tYXhMb2RzMyAobG9nMihjdWJlVVZfdGV4dHVyZVNpemUqMC4yNSkgLSAzLjApXFxudmVjNCB0ZXh0dXJlQ3ViZVVWKHZlYzMgcmVmbGVjdGVkRGlyZWN0aW9uLCBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0ZmxvYXQgcm91Z2huZXNzVmFsID0gcm91Z2huZXNzKiBjdWJlVVZfbWF4TG9kczM7XFxuXFx0ZmxvYXQgcjEgPSBmbG9vcihyb3VnaG5lc3NWYWwpO1xcblxcdGZsb2F0IHIyID0gcjEgKyAxLjA7XFxuXFx0ZmxvYXQgdCA9IGZyYWN0KHJvdWdobmVzc1ZhbCk7XFxuXFx0dmVjMiBtaXBJbmZvID0gTWlwTGV2ZWxJbmZvKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIHJvdWdobmVzcyk7XFxuXFx0ZmxvYXQgcyA9IG1pcEluZm8ueTtcXG5cXHRmbG9hdCBsZXZlbDAgPSBtaXBJbmZvLng7XFxuXFx0ZmxvYXQgbGV2ZWwxID0gbGV2ZWwwICsgMS4wO1xcblxcdGxldmVsMSA9IGxldmVsMSA+IDUuMCA/IDUuMCA6IGxldmVsMTtcXG5cXHRsZXZlbDAgKz0gbWluKCBmbG9vciggcyArIDAuNSApLCA1LjAgKTtcXG5cXHR2ZWMyIHV2XzEwID0gZ2V0Q3ViZVVWKHJlZmxlY3RlZERpcmVjdGlvbiwgcjEsIGxldmVsMCk7XFxuXFx0dmVjNCBjb2xvcjEwID0gZW52TWFwVGV4ZWxUb0xpbmVhcih0ZXh0dXJlMkQoZW52TWFwLCB1dl8xMCkpO1xcblxcdHZlYzIgdXZfMjAgPSBnZXRDdWJlVVYocmVmbGVjdGVkRGlyZWN0aW9uLCByMiwgbGV2ZWwwKTtcXG5cXHR2ZWM0IGNvbG9yMjAgPSBlbnZNYXBUZXhlbFRvTGluZWFyKHRleHR1cmUyRChlbnZNYXAsIHV2XzIwKSk7XFxuXFx0dmVjNCByZXN1bHQgPSBtaXgoY29sb3IxMCwgY29sb3IyMCwgdCk7XFxuXFx0cmV0dXJuIHZlYzQocmVzdWx0LnJnYiwgMS4wKTtcXG59XFxuI2VuZGlmXFxuXCIsQ289XCIjaWZkZWYgRkxJUF9TSURFRFxcblxcdG9iamVjdE5vcm1hbCA9IC1vYmplY3ROb3JtYWw7XFxuI2VuZGlmXFxudmVjMyB0cmFuc2Zvcm1lZE5vcm1hbCA9IG5vcm1hbE1hdHJpeCAqIG9iamVjdE5vcm1hbDtcXG5cIixJbz1cIiNpZmRlZiBVU0VfRElTUExBQ0VNRU5UTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZGlzcGxhY2VtZW50TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgZGlzcGxhY2VtZW50U2NhbGU7XFxuXFx0dW5pZm9ybSBmbG9hdCBkaXNwbGFjZW1lbnRCaWFzO1xcbiNlbmRpZlxcblwiLE9vPVwiI2lmZGVmIFVTRV9ESVNQTEFDRU1FTlRNQVBcXG5cXHR0cmFuc2Zvcm1lZCArPSBub3JtYWwgKiAoIHRleHR1cmUyRCggZGlzcGxhY2VtZW50TWFwLCB1diApLnggKiBkaXNwbGFjZW1lbnRTY2FsZSArIGRpc3BsYWNlbWVudEJpYXMgKTtcXG4jZW5kaWZcXG5cIixUbz1cIiNpZmRlZiBVU0VfRU1JU1NJVkVNQVBcXG5cXHR2ZWM0IGVtaXNzaXZlQ29sb3IgPSB0ZXh0dXJlMkQoIGVtaXNzaXZlTWFwLCB2VXYgKTtcXG5cXHRlbWlzc2l2ZUNvbG9yLnJnYiA9IGVtaXNzaXZlTWFwVGV4ZWxUb0xpbmVhciggZW1pc3NpdmVDb2xvciApLnJnYjtcXG5cXHR0b3RhbEVtaXNzaXZlUmFkaWFuY2UgKj0gZW1pc3NpdmVDb2xvci5yZ2I7XFxuI2VuZGlmXFxuXCIsUG89XCIjaWZkZWYgVVNFX0VNSVNTSVZFTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZW1pc3NpdmVNYXA7XFxuI2VuZGlmXFxuXCIsQW89XCIgIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvT3V0cHV0VGV4ZWwoIGdsX0ZyYWdDb2xvciApO1xcblwiLExvPVwiXFxudmVjNCBMaW5lYXJUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmFsdWU7XFxufVxcbnZlYzQgR2FtbWFUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgZ2FtbWFGYWN0b3IgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHBvdyggdmFsdWUueHl6LCB2ZWMzKCBnYW1tYUZhY3RvciApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBMaW5lYXJUb0dhbW1hKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBnYW1tYUZhY3RvciApIHtcXG5cXHRyZXR1cm4gdmVjNCggcG93KCB2YWx1ZS54eXosIHZlYzMoIDEuMCAvIGdhbW1hRmFjdG9yICkgKSwgdmFsdWUudyApO1xcbn1cXG52ZWM0IHNSR0JUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggbWl4KCBwb3coIHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoIDAuMDUyMTMyNzAxNCApLCB2ZWMzKCAyLjQgKSApLCB2YWx1ZS5yZ2IgKiAwLjA3NzM5OTM4MDgsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wNDA0NSApICkgKSApLCB2YWx1ZS53ICk7XFxufVxcbnZlYzQgTGluZWFyVG9zUkdCKCBpbiB2ZWM0IHZhbHVlICkge1xcblxcdHJldHVybiB2ZWM0KCBtaXgoIHBvdyggdmFsdWUucmdiLCB2ZWMzKCAwLjQxNjY2ICkgKSAqIDEuMDU1IC0gdmVjMyggMC4wNTUgKSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMoIGxlc3NUaGFuRXF1YWwoIHZhbHVlLnJnYiwgdmVjMyggMC4wMDMxMzA4ICkgKSApICksIHZhbHVlLncgKTtcXG59XFxudmVjNCBSR0JFVG9MaW5lYXIoIGluIHZlYzQgdmFsdWUgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqIGV4cDIoIHZhbHVlLmEgKiAyNTUuMCAtIDEyOC4wICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRSggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBtYXhDb21wb25lbnQgPSBtYXgoIG1heCggdmFsdWUuciwgdmFsdWUuZyApLCB2YWx1ZS5iICk7XFxuXFx0ZmxvYXQgZkV4cCA9IGNsYW1wKCBjZWlsKCBsb2cyKCBtYXhDb21wb25lbnQgKSApLCAtMTI4LjAsIDEyNy4wICk7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAvIGV4cDIoIGZFeHAgKSwgKCBmRXhwICsgMTI4LjAgKSAvIDI1NS4wICk7XFxufVxcbnZlYzQgUkdCTVRvTGluZWFyKCBpbiB2ZWM0IHZhbHVlLCBpbiBmbG9hdCBtYXhSYW5nZSApIHtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUueHl6ICogdmFsdWUudyAqIG1heFJhbmdlLCAxLjAgKTtcXG59XFxudmVjNCBMaW5lYXJUb1JHQk0oIGluIHZlYzQgdmFsdWUsIGluIGZsb2F0IG1heFJhbmdlICkge1xcblxcdGZsb2F0IG1heFJHQiA9IG1heCggdmFsdWUueCwgbWF4KCB2YWx1ZS5nLCB2YWx1ZS5iICkgKTtcXG5cXHRmbG9hdCBNICAgICAgPSBjbGFtcCggbWF4UkdCIC8gbWF4UmFuZ2UsIDAuMCwgMS4wICk7XFxuXFx0TSAgICAgICAgICAgID0gY2VpbCggTSAqIDI1NS4wICkgLyAyNTUuMDtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiIC8gKCBNICogbWF4UmFuZ2UgKSwgTSApO1xcbn1cXG52ZWM0IFJHQkRUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0cmV0dXJuIHZlYzQoIHZhbHVlLnJnYiAqICggKCBtYXhSYW5nZSAvIDI1NS4wICkgLyB2YWx1ZS5hICksIDEuMCApO1xcbn1cXG52ZWM0IExpbmVhclRvUkdCRCggaW4gdmVjNCB2YWx1ZSwgaW4gZmxvYXQgbWF4UmFuZ2UgKSB7XFxuXFx0ZmxvYXQgbWF4UkdCID0gbWF4KCB2YWx1ZS54LCBtYXgoIHZhbHVlLmcsIHZhbHVlLmIgKSApO1xcblxcdGZsb2F0IEQgICAgICA9IG1heCggbWF4UmFuZ2UgLyBtYXhSR0IsIDEuMCApO1xcblxcdEQgICAgICAgICAgICA9IG1pbiggZmxvb3IoIEQgKSAvIDI1NS4wLCAxLjAgKTtcXG5cXHRyZXR1cm4gdmVjNCggdmFsdWUucmdiICogKCBEICogKCAyNTUuMCAvIG1heFJhbmdlICkgKSwgRCApO1xcbn1cXG5jb25zdCBtYXQzIGNMb2dMdXZNID0gbWF0MyggMC4yMjA5LCAwLjMzOTAsIDAuNDE4NCwgMC4xMTM4LCAwLjY3ODAsIDAuNzMxOSwgMC4wMTAyLCAwLjExMzAsIDAuMjk2OSApO1xcbnZlYzQgTGluZWFyVG9Mb2dMdXYoIGluIHZlYzQgdmFsdWUgKSAge1xcblxcdHZlYzMgWHBfWV9YWVpwID0gdmFsdWUucmdiICogY0xvZ0x1dk07XFxuXFx0WHBfWV9YWVpwID0gbWF4KFhwX1lfWFlacCwgdmVjMygxZS02LCAxZS02LCAxZS02KSk7XFxuXFx0dmVjNCB2UmVzdWx0O1xcblxcdHZSZXN1bHQueHkgPSBYcF9ZX1hZWnAueHkgLyBYcF9ZX1hZWnAuejtcXG5cXHRmbG9hdCBMZSA9IDIuMCAqIGxvZzIoWHBfWV9YWVpwLnkpICsgMTI3LjA7XFxuXFx0dlJlc3VsdC53ID0gZnJhY3QoTGUpO1xcblxcdHZSZXN1bHQueiA9IChMZSAtIChmbG9vcih2UmVzdWx0LncqMjU1LjApKS8yNTUuMCkvMjU1LjA7XFxuXFx0cmV0dXJuIHZSZXN1bHQ7XFxufVxcbmNvbnN0IG1hdDMgY0xvZ0x1dkludmVyc2VNID0gbWF0MyggNi4wMDE0LCAtMi43MDA4LCAtMS43OTk2LCAtMS4zMzIwLCAzLjEwMjksIC01Ljc3MjEsIDAuMzAwOCwgLTEuMDg4MiwgNS42MjY4ICk7XFxudmVjNCBMb2dMdXZUb0xpbmVhciggaW4gdmVjNCB2YWx1ZSApIHtcXG5cXHRmbG9hdCBMZSA9IHZhbHVlLnogKiAyNTUuMCArIHZhbHVlLnc7XFxuXFx0dmVjMyBYcF9ZX1hZWnA7XFxuXFx0WHBfWV9YWVpwLnkgPSBleHAyKChMZSAtIDEyNy4wKSAvIDIuMCk7XFxuXFx0WHBfWV9YWVpwLnogPSBYcF9ZX1hZWnAueSAvIHZhbHVlLnk7XFxuXFx0WHBfWV9YWVpwLnggPSB2YWx1ZS54ICogWHBfWV9YWVpwLno7XFxuXFx0dmVjMyB2UkdCID0gWHBfWV9YWVpwLnJnYiAqIGNMb2dMdXZJbnZlcnNlTTtcXG5cXHRyZXR1cm4gdmVjNCggbWF4KHZSR0IsIDAuMCksIDEuMCApO1xcbn1cXG5cIixObz1cIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2ZWMzIGNhbWVyYVRvVmVydGV4ID0gbm9ybWFsaXplKCB2V29ybGRQb3NpdGlvbiAtIGNhbWVyYVBvc2l0aW9uICk7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIG5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dmVjMyByZWZsZWN0VmVjID0gcmVmbGVjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwsIHJlZnJhY3Rpb25SYXRpbyApO1xcblxcdFxcdCNlbmRpZlxcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyByZWZsZWN0VmVjID0gdlJlZmxlY3Q7XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR2ZWM0IGVudkNvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgZmxpcE5vcm1hbCAqIHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKSApO1xcblxcdCNlbGlmIGRlZmluZWQoIEVOVk1BUF9UWVBFX0VRVUlSRUMgKVxcblxcdFxcdHZlYzIgc2FtcGxlVVY7XFxuXFx0XFx0c2FtcGxlVVYueSA9IHNhdHVyYXRlKCBmbGlwTm9ybWFsICogcmVmbGVjdFZlYy55ICogMC41ICsgMC41ICk7XFxuXFx0XFx0c2FtcGxlVVYueCA9IGF0YW4oIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnosIGZsaXBOb3JtYWwgKiByZWZsZWN0VmVjLnggKSAqIFJFQ0lQUk9DQUxfUEkyICsgMC41O1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdHZlYzMgcmVmbGVjdFZpZXcgPSBmbGlwTm9ybWFsICogbm9ybWFsaXplKCAoIHZpZXdNYXRyaXggKiB2ZWM0KCByZWZsZWN0VmVjLCAwLjAgKSApLnh5eiArIHZlYzMoIDAuMCwgMC4wLCAxLjAgKSApO1xcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgcmVmbGVjdFZpZXcueHkgKiAwLjUgKyAwLjUgKTtcXG5cXHQjZWxzZVxcblxcdFxcdHZlYzQgZW52Q29sb3IgPSB2ZWM0KCAwLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHRlbnZDb2xvciA9IGVudk1hcFRleGVsVG9MaW5lYXIoIGVudkNvbG9yICk7XFxuXFx0I2lmZGVmIEVOVk1BUF9CTEVORElOR19NVUxUSVBMWVxcblxcdFxcdG91dGdvaW5nTGlnaHQgPSBtaXgoIG91dGdvaW5nTGlnaHQsIG91dGdvaW5nTGlnaHQgKiBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfTUlYIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ID0gbWl4KCBvdXRnb2luZ0xpZ2h0LCBlbnZDb2xvci54eXosIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHkgKTtcXG5cXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfQkxFTkRJTkdfQUREIClcXG5cXHRcXHRvdXRnb2luZ0xpZ2h0ICs9IGVudkNvbG9yLnh5eiAqIHNwZWN1bGFyU3RyZW5ndGggKiByZWZsZWN0aXZpdHk7XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsa289XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIWVNJQ0FMIClcXG5cXHR1bmlmb3JtIGZsb2F0IHJlZmxlY3Rpdml0eTtcXG5cXHR1bmlmb3JtIGZsb2F0IGVudk1hcEludGVuc2l0eTtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX0VOVk1BUFxcblxcdCNpZiAhIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgKCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBQSE9ORyApIClcXG5cXHRcXHR2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuXFx0I2VuZGlmXFxuXFx0I2lmZGVmIEVOVk1BUF9UWVBFX0NVQkVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXJDdWJlIGVudk1hcDtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGVudk1hcDtcXG5cXHQjZW5kaWZcXG5cXHR1bmlmb3JtIGZsb2F0IGZsaXBFbnZNYXA7XFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgcmVmcmFjdGlvblJhdGlvO1xcblxcdCNlbHNlXFxuXFx0XFx0dmFyeWluZyB2ZWMzIHZSZWZsZWN0O1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLFJvPVwiI2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQICkgfHwgZGVmaW5lZCggUEhPTkcgKVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG5cXHQjZWxzZVxcblxcdFxcdHZhcnlpbmcgdmVjMyB2UmVmbGVjdDtcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IHJlZnJhY3Rpb25SYXRpbztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixEbz1cIiNpZmRlZiBVU0VfRU5WTUFQXFxuXFx0I2lmIGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFBIT05HIClcXG5cXHRcXHR2V29ybGRQb3NpdGlvbiA9IHdvcmxkUG9zaXRpb24ueHl6O1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjYW1lcmFUb1ZlcnRleCA9IG5vcm1hbGl6ZSggd29ybGRQb3NpdGlvbi54eXogLSBjYW1lcmFQb3NpdGlvbiApO1xcblxcdFxcdHZlYzMgd29ybGROb3JtYWwgPSBpbnZlcnNlVHJhbnNmb3JtRGlyZWN0aW9uKCB0cmFuc2Zvcm1lZE5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfTU9ERV9SRUZMRUNUSU9OXFxuXFx0XFx0XFx0dlJlZmxlY3QgPSByZWZsZWN0KCBjYW1lcmFUb1ZlcnRleCwgd29ybGROb3JtYWwgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHZSZWZsZWN0ID0gcmVmcmFjdCggY2FtZXJhVG9WZXJ0ZXgsIHdvcmxkTm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixGbz1cIlxcbiNpZmRlZiBVU0VfRk9HXFxuZm9nRGVwdGggPSAtbXZQb3NpdGlvbi56O1xcbiNlbmRpZlwiLEJvPVwiI2lmZGVmIFVTRV9GT0dcXG4gIHZhcnlpbmcgZmxvYXQgZm9nRGVwdGg7XFxuI2VuZGlmXFxuXCIsam89XCIjaWZkZWYgVVNFX0ZPR1xcblxcdCNpZmRlZiBGT0dfRVhQMlxcblxcdFxcdGZsb2F0IGZvZ0ZhY3RvciA9IHdoaXRlQ29tcGxpbWVudCggZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGZvZ0RlcHRoICogZm9nRGVwdGggKiBMT0cyICkgKTtcXG5cXHQjZWxzZVxcblxcdFxcdGZsb2F0IGZvZ0ZhY3RvciA9IHNtb290aHN0ZXAoIGZvZ05lYXIsIGZvZ0ZhciwgZm9nRGVwdGggKTtcXG5cXHQjZW5kaWZcXG5cXHRnbF9GcmFnQ29sb3IucmdiID0gbWl4KCBnbF9GcmFnQ29sb3IucmdiLCBmb2dDb2xvciwgZm9nRmFjdG9yICk7XFxuI2VuZGlmXFxuXCIsVW89XCIjaWZkZWYgVVNFX0ZPR1xcblxcdHVuaWZvcm0gdmVjMyBmb2dDb2xvcjtcXG5cXHR2YXJ5aW5nIGZsb2F0IGZvZ0RlcHRoO1xcblxcdCNpZmRlZiBGT0dfRVhQMlxcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nRGVuc2l0eTtcXG5cXHQjZWxzZVxcblxcdFxcdHVuaWZvcm0gZmxvYXQgZm9nTmVhcjtcXG5cXHRcXHR1bmlmb3JtIGZsb2F0IGZvZ0ZhcjtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIix6bz1cIiNpZmRlZiBUT09OXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgZ3JhZGllbnRNYXA7XFxuXFx0dmVjMyBnZXRHcmFkaWVudElycmFkaWFuY2UoIHZlYzMgbm9ybWFsLCB2ZWMzIGxpZ2h0RGlyZWN0aW9uICkge1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90KCBub3JtYWwsIGxpZ2h0RGlyZWN0aW9uICk7XFxuXFx0XFx0dmVjMiBjb29yZCA9IHZlYzIoIGRvdE5MICogMC41ICsgMC41LCAwLjAgKTtcXG5cXHRcXHQjaWZkZWYgVVNFX0dSQURJRU5UTUFQXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRCggZ3JhZGllbnRNYXAsIGNvb3JkICkucmdiO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuICggY29vcmQueCA8IDAuNyApID8gdmVjMyggMC43ICkgOiB2ZWMzKCAxLjAgKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuXCIsR289XCIjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IFBJICogdGV4dHVyZTJEKCBsaWdodE1hcCwgdlV2MiApLnh5eiAqIGxpZ2h0TWFwSW50ZW5zaXR5O1xcbiNlbmRpZlxcblwiLFZvPVwiI2lmZGVmIFVTRV9MSUdIVE1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0TWFwO1xcblxcdHVuaWZvcm0gZmxvYXQgbGlnaHRNYXBJbnRlbnNpdHk7XFxuI2VuZGlmXCIsWG89XCJ2ZWMzIGRpZmZ1c2UgPSB2ZWMzKCAxLjAgKTtcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gbXZQb3NpdGlvbi54eXo7XFxuZ2VvbWV0cnkubm9ybWFsID0gbm9ybWFsaXplKCB0cmFuc2Zvcm1lZE5vcm1hbCApO1xcbmdlb21ldHJ5LnZpZXdEaXIgPSBub3JtYWxpemUoIC1tdlBvc2l0aW9uLnh5eiApO1xcbkdlb21ldHJpY0NvbnRleHQgYmFja0dlb21ldHJ5O1xcbmJhY2tHZW9tZXRyeS5wb3NpdGlvbiA9IGdlb21ldHJ5LnBvc2l0aW9uO1xcbmJhY2tHZW9tZXRyeS5ub3JtYWwgPSAtZ2VvbWV0cnkubm9ybWFsO1xcbmJhY2tHZW9tZXRyeS52aWV3RGlyID0gZ2VvbWV0cnkudmlld0RpcjtcXG52TGlnaHRGcm9udCA9IHZlYzMoIDAuMCApO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2TGlnaHRCYWNrID0gdmVjMyggMC4wICk7XFxuI2VuZGlmXFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG5mbG9hdCBkb3ROTDtcXG52ZWMzIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG4jaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fUE9JTlRfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBwb2ludExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9TUE9UX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0Z2V0U3BvdERpcmVjdExpZ2h0SXJyYWRpYW5jZSggc3BvdExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9ESVJfTElHSFRTOyBpICsrICkge1xcblxcdFxcdGdldERpcmVjdGlvbmFsRGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBkaXJlY3Rpb25hbExpZ2h0c1sgaSBdLCBnZW9tZXRyeSwgZGlyZWN0TGlnaHQgKTtcXG5cXHRcXHRkb3ROTCA9IGRvdCggZ2VvbWV0cnkubm9ybWFsLCBkaXJlY3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRkaXJlY3RMaWdodENvbG9yX0RpZmZ1c2UgPSBQSSAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdFxcdHZMaWdodEZyb250ICs9IHNhdHVyYXRlKCBkb3ROTCApICogZGlyZWN0TGlnaHRDb2xvcl9EaWZmdXNlO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IHNhdHVyYXRlKCAtZG90TkwgKSAqIGRpcmVjdExpZ2h0Q29sb3JfRGlmZnVzZTtcXG5cXHRcXHQjZW5kaWZcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIE5VTV9IRU1JX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fSEVNSV9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dkxpZ2h0RnJvbnQgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdCNpZmRlZiBET1VCTEVfU0lERURcXG5cXHRcXHRcXHR2TGlnaHRCYWNrICs9IGdldEhlbWlzcGhlcmVMaWdodElycmFkaWFuY2UoIGhlbWlzcGhlcmVMaWdodHNbIGkgXSwgYmFja0dlb21ldHJ5ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiLEhvPVwidW5pZm9ybSB2ZWMzIGFtYmllbnRMaWdodENvbG9yO1xcbnZlYzMgZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gdmVjMyBhbWJpZW50TGlnaHRDb2xvciApIHtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBhbWJpZW50TGlnaHRDb2xvcjtcXG5cXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRpcnJhZGlhbmNlICo9IFBJO1xcblxcdCNlbmRpZlxcblxcdHJldHVybiBpcnJhZGlhbmNlO1xcbn1cXG4jaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IERpcmVjdGlvbmFsTGlnaHQge1xcblxcdFxcdHZlYzMgZGlyZWN0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodHNbIE5VTV9ESVJfTElHSFRTIF07XFxuXFx0dm9pZCBnZXREaXJlY3Rpb25hbERpcmVjdExpZ2h0SXJyYWRpYW5jZSggY29uc3QgaW4gRGlyZWN0aW9uYWxMaWdodCBkaXJlY3Rpb25hbExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCApIHtcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IGRpcmVjdGlvbmFsTGlnaHQuY29sb3I7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gZGlyZWN0aW9uYWxMaWdodC5kaXJlY3Rpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdHN0cnVjdCBQb2ludExpZ2h0IHtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgY29sb3I7XFxuXFx0XFx0ZmxvYXQgZGlzdGFuY2U7XFxuXFx0XFx0ZmxvYXQgZGVjYXk7XFxuXFx0XFx0aW50IHNoYWRvdztcXG5cXHRcXHRmbG9hdCBzaGFkb3dCaWFzO1xcblxcdFxcdGZsb2F0IHNoYWRvd1JhZGl1cztcXG5cXHRcXHR2ZWMyIHNoYWRvd01hcFNpemU7XFxuXFx0fTtcXG5cXHR1bmlmb3JtIFBvaW50TGlnaHQgcG9pbnRMaWdodHNbIE5VTV9QT0lOVF9MSUdIVFMgXTtcXG5cXHR2b2lkIGdldFBvaW50RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBQb2ludExpZ2h0IHBvaW50TGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIG91dCBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0ICkge1xcblxcdFxcdHZlYzMgbFZlY3RvciA9IHBvaW50TGlnaHQucG9zaXRpb24gLSBnZW9tZXRyeS5wb3NpdGlvbjtcXG5cXHRcXHRkaXJlY3RMaWdodC5kaXJlY3Rpb24gPSBub3JtYWxpemUoIGxWZWN0b3IgKTtcXG5cXHRcXHRmbG9hdCBsaWdodERpc3RhbmNlID0gbGVuZ3RoKCBsVmVjdG9yICk7XFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBwb2ludExpZ2h0LmNvbG9yO1xcblxcdFxcdGRpcmVjdExpZ2h0LmNvbG9yICo9IHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHBvaW50TGlnaHQuZGlzdGFuY2UsIHBvaW50TGlnaHQuZGVjYXkgKTtcXG5cXHRcXHRkaXJlY3RMaWdodC52aXNpYmxlID0gKCBkaXJlY3RMaWdodC5jb2xvciAhPSB2ZWMzKCAwLjAgKSApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdHN0cnVjdCBTcG90TGlnaHQge1xcblxcdFxcdHZlYzMgcG9zaXRpb247XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHRmbG9hdCBkaXN0YW5jZTtcXG5cXHRcXHRmbG9hdCBkZWNheTtcXG5cXHRcXHRmbG9hdCBjb25lQ29zO1xcblxcdFxcdGZsb2F0IHBlbnVtYnJhQ29zO1xcblxcdFxcdGludCBzaGFkb3c7XFxuXFx0XFx0ZmxvYXQgc2hhZG93QmlhcztcXG5cXHRcXHRmbG9hdCBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0dmVjMiBzaGFkb3dNYXBTaXplO1xcblxcdH07XFxuXFx0dW5pZm9ybSBTcG90TGlnaHQgc3BvdExpZ2h0c1sgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0dm9pZCBnZXRTcG90RGlyZWN0TGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBTcG90TGlnaHQgc3BvdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBvdXQgSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodCAgKSB7XFxuXFx0XFx0dmVjMyBsVmVjdG9yID0gc3BvdExpZ2h0LnBvc2l0aW9uIC0gZ2VvbWV0cnkucG9zaXRpb247XFxuXFx0XFx0ZGlyZWN0TGlnaHQuZGlyZWN0aW9uID0gbm9ybWFsaXplKCBsVmVjdG9yICk7XFxuXFx0XFx0ZmxvYXQgbGlnaHREaXN0YW5jZSA9IGxlbmd0aCggbFZlY3RvciApO1xcblxcdFxcdGZsb2F0IGFuZ2xlQ29zID0gZG90KCBkaXJlY3RMaWdodC5kaXJlY3Rpb24sIHNwb3RMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRpZiAoIGFuZ2xlQ29zID4gc3BvdExpZ2h0LmNvbmVDb3MgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc3BvdEVmZmVjdCA9IHNtb290aHN0ZXAoIHNwb3RMaWdodC5jb25lQ29zLCBzcG90TGlnaHQucGVudW1icmFDb3MsIGFuZ2xlQ29zICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgPSBzcG90TGlnaHQuY29sb3I7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gc3BvdEVmZmVjdCAqIHB1bmN0dWFsTGlnaHRJbnRlbnNpdHlUb0lycmFkaWFuY2VGYWN0b3IoIGxpZ2h0RGlzdGFuY2UsIHNwb3RMaWdodC5kaXN0YW5jZSwgc3BvdExpZ2h0LmRlY2F5ICk7XFxuXFx0XFx0XFx0ZGlyZWN0TGlnaHQudmlzaWJsZSA9IHRydWU7XFxuXFx0XFx0fSBlbHNlIHtcXG5cXHRcXHRcXHRkaXJlY3RMaWdodC5jb2xvciA9IHZlYzMoIDAuMCApO1xcblxcdFxcdFxcdGRpcmVjdExpZ2h0LnZpc2libGUgPSBmYWxzZTtcXG5cXHRcXHR9XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHRzdHJ1Y3QgUmVjdEFyZWFMaWdodCB7XFxuXFx0XFx0dmVjMyBjb2xvcjtcXG5cXHRcXHR2ZWMzIHBvc2l0aW9uO1xcblxcdFxcdHZlYzMgaGFsZldpZHRoO1xcblxcdFxcdHZlYzMgaGFsZkhlaWdodDtcXG5cXHR9O1xcblxcdHVuaWZvcm0gc2FtcGxlcjJEIGx0Y01hdDtcXHR1bmlmb3JtIHNhbXBsZXIyRCBsdGNNYWc7XFxuXFx0dW5pZm9ybSBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHRzWyBOVU1fUkVDVF9BUkVBX0xJR0hUUyBdO1xcbiNlbmRpZlxcbiNpZiBOVU1fSEVNSV9MSUdIVFMgPiAwXFxuXFx0c3RydWN0IEhlbWlzcGhlcmVMaWdodCB7XFxuXFx0XFx0dmVjMyBkaXJlY3Rpb247XFxuXFx0XFx0dmVjMyBza3lDb2xvcjtcXG5cXHRcXHR2ZWMzIGdyb3VuZENvbG9yO1xcblxcdH07XFxuXFx0dW5pZm9ybSBIZW1pc3BoZXJlTGlnaHQgaGVtaXNwaGVyZUxpZ2h0c1sgTlVNX0hFTUlfTElHSFRTIF07XFxuXFx0dmVjMyBnZXRIZW1pc3BoZXJlTGlnaHRJcnJhZGlhbmNlKCBjb25zdCBpbiBIZW1pc3BoZXJlTGlnaHQgaGVtaUxpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5ICkge1xcblxcdFxcdGZsb2F0IGRvdE5MID0gZG90KCBnZW9tZXRyeS5ub3JtYWwsIGhlbWlMaWdodC5kaXJlY3Rpb24gKTtcXG5cXHRcXHRmbG9hdCBoZW1pRGlmZnVzZVdlaWdodCA9IDAuNSAqIGRvdE5MICsgMC41O1xcblxcdFxcdHZlYzMgaXJyYWRpYW5jZSA9IG1peCggaGVtaUxpZ2h0Lmdyb3VuZENvbG9yLCBoZW1pTGlnaHQuc2t5Q29sb3IsIGhlbWlEaWZmdXNlV2VpZ2h0ICk7XFxuXFx0XFx0I2lmbmRlZiBQSFlTSUNBTExZX0NPUlJFQ1RfTElHSFRTXFxuXFx0XFx0XFx0aXJyYWRpYW5jZSAqPSBQSTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZXR1cm4gaXJyYWRpYW5jZTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoIFVTRV9FTlZNQVAgKSAmJiBkZWZpbmVkKCBQSFlTSUNBTCApXFxuXFx0dmVjMyBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0dmVjMyB3b3JsZE5vcm1hbCA9IGludmVyc2VUcmFuc2Zvcm1EaXJlY3Rpb24oIGdlb21ldHJ5Lm5vcm1hbCwgdmlld01hdHJpeCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVMb2RFWFQoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmUoIGVudk1hcCwgcXVlcnlWZWMsIGZsb2F0KCBtYXhNSVBMZXZlbCApICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiB3b3JsZE5vcm1hbC54LCB3b3JsZE5vcm1hbC55eiApO1xcblxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZVVWKCBxdWVyeVZlYywgMS4wICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdmVjNCggMC4wICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIFBJICogZW52TWFwQ29sb3IucmdiICogZW52TWFwSW50ZW5zaXR5O1xcblxcdH1cXG5cXHRmbG9hdCBnZXRTcGVjdWxhck1JUExldmVsKCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0ZmxvYXQgbWF4TUlQTGV2ZWxTY2FsYXIgPSBmbG9hdCggbWF4TUlQTGV2ZWwgKTtcXG5cXHRcXHRmbG9hdCBkZXNpcmVkTUlQTGV2ZWwgPSBtYXhNSVBMZXZlbFNjYWxhciAtIDAuNzkyNDggLSAwLjUgKiBsb2cyKCBwb3cyKCBibGlublNoaW5pbmVzc0V4cG9uZW50ICkgKyAxLjAgKTtcXG5cXHRcXHRyZXR1cm4gY2xhbXAoIGRlc2lyZWRNSVBMZXZlbCwgMC4wLCBtYXhNSVBMZXZlbFNjYWxhciApO1xcblxcdH1cXG5cXHR2ZWMzIGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBmbG9hdCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBjb25zdCBpbiBpbnQgbWF4TUlQTGV2ZWwgKSB7XFxuXFx0XFx0I2lmZGVmIEVOVk1BUF9NT0RFX1JFRkxFQ1RJT05cXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZsZWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsICk7XFxuXFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHR2ZWMzIHJlZmxlY3RWZWMgPSByZWZyYWN0KCAtZ2VvbWV0cnkudmlld0RpciwgZ2VvbWV0cnkubm9ybWFsLCByZWZyYWN0aW9uUmF0aW8gKTtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRyZWZsZWN0VmVjID0gaW52ZXJzZVRyYW5zZm9ybURpcmVjdGlvbiggcmVmbGVjdFZlYywgdmlld01hdHJpeCApO1xcblxcdFxcdGZsb2F0IHNwZWN1bGFyTUlQTGV2ZWwgPSBnZXRTcGVjdWxhck1JUExldmVsKCBibGlublNoaW5pbmVzc0V4cG9uZW50LCBtYXhNSVBMZXZlbCApO1xcblxcdFxcdCNpZmRlZiBFTlZNQVBfVFlQRV9DVUJFXFxuXFx0XFx0XFx0dmVjMyBxdWVyeVJlZmxlY3RWZWMgPSB2ZWMzKCBmbGlwRW52TWFwICogcmVmbGVjdFZlYy54LCByZWZsZWN0VmVjLnl6ICk7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZUxvZEVYVCggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlQ3ViZSggZW52TWFwLCBxdWVyeVJlZmxlY3RWZWMsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9DVUJFX1VWIClcXG5cXHRcXHRcXHR2ZWMzIHF1ZXJ5UmVmbGVjdFZlYyA9IHZlYzMoIGZsaXBFbnZNYXAgKiByZWZsZWN0VmVjLngsIHJlZmxlY3RWZWMueXogKTtcXG5cXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZUN1YmVVVihxdWVyeVJlZmxlY3RWZWMsIEJsaW5uRXhwb25lbnRUb0dHWFJvdWdobmVzcyhibGlublNoaW5pbmVzc0V4cG9uZW50KSk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggRU5WTUFQX1RZUEVfRVFVSVJFQyApXFxuXFx0XFx0XFx0dmVjMiBzYW1wbGVVVjtcXG5cXHRcXHRcXHRzYW1wbGVVVi55ID0gc2F0dXJhdGUoIHJlZmxlY3RWZWMueSAqIDAuNSArIDAuNSApO1xcblxcdFxcdFxcdHNhbXBsZVVWLnggPSBhdGFuKCByZWZsZWN0VmVjLnosIHJlZmxlY3RWZWMueCApICogUkVDSVBST0NBTF9QSTIgKyAwLjU7XFxuXFx0XFx0XFx0I2lmZGVmIFRFWFRVUkVfTE9EX0VYVFxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkRMb2RFWFQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZWxzZVxcblxcdFxcdFxcdFxcdHZlYzQgZW52TWFwQ29sb3IgPSB0ZXh0dXJlMkQoIGVudk1hcCwgc2FtcGxlVVYsIHNwZWN1bGFyTUlQTGV2ZWwgKTtcXG5cXHRcXHRcXHQjZW5kaWZcXG5cXHRcXHRcXHRlbnZNYXBDb2xvci5yZ2IgPSBlbnZNYXBUZXhlbFRvTGluZWFyKCBlbnZNYXBDb2xvciApLnJnYjtcXG5cXHRcXHQjZWxpZiBkZWZpbmVkKCBFTlZNQVBfVFlQRV9TUEhFUkUgKVxcblxcdFxcdFxcdHZlYzMgcmVmbGVjdFZpZXcgPSBub3JtYWxpemUoICggdmlld01hdHJpeCAqIHZlYzQoIHJlZmxlY3RWZWMsIDAuMCApICkueHl6ICsgdmVjMyggMC4wLDAuMCwxLjAgKSApO1xcblxcdFxcdFxcdCNpZmRlZiBURVhUVVJFX0xPRF9FWFRcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJETG9kRVhUKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2Vsc2VcXG5cXHRcXHRcXHRcXHR2ZWM0IGVudk1hcENvbG9yID0gdGV4dHVyZTJEKCBlbnZNYXAsIHJlZmxlY3RWaWV3Lnh5ICogMC41ICsgMC41LCBzcGVjdWxhck1JUExldmVsICk7XFxuXFx0XFx0XFx0I2VuZGlmXFxuXFx0XFx0XFx0ZW52TWFwQ29sb3IucmdiID0gZW52TWFwVGV4ZWxUb0xpbmVhciggZW52TWFwQ29sb3IgKS5yZ2I7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0cmV0dXJuIGVudk1hcENvbG9yLnJnYiAqIGVudk1hcEludGVuc2l0eTtcXG5cXHR9XFxuI2VuZGlmXFxuXCIscW89XCJCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWw7XFxubWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5tYXRlcmlhbC5zcGVjdWxhckNvbG9yID0gc3BlY3VsYXI7XFxubWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgPSBzaGluaW5lc3M7XFxubWF0ZXJpYWwuc3BlY3VsYXJTdHJlbmd0aCA9IHNwZWN1bGFyU3RyZW5ndGg7XFxuXCIsWW89XCJ2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuc3RydWN0IEJsaW5uUGhvbmdNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHR2ZWMzXFx0c3BlY3VsYXJDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyU2hpbmluZXNzO1xcblxcdGZsb2F0XFx0c3BlY3VsYXJTdHJlbmd0aDtcXG59O1xcbiNpZiBOVU1fUkVDVF9BUkVBX0xJR0hUUyA+IDBcXG5cXHR2b2lkIFJFX0RpcmVjdF9SZWN0QXJlYV9CbGlublBob25nKCBjb25zdCBpbiBSZWN0QXJlYUxpZ2h0IHJlY3RBcmVhTGlnaHQsIGNvbnN0IGluIEdlb21ldHJpY0NvbnRleHQgZ2VvbWV0cnksIGNvbnN0IGluIEJsaW5uUGhvbmdNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBtYXREaWZmQ29sb3IgPSBtYXRlcmlhbC5kaWZmdXNlQ29sb3I7XFxuXFx0XFx0dmVjMyBtYXRTcGVjQ29sb3IgPSBtYXRlcmlhbC5zcGVjdWxhckNvbG9yO1xcblxcdFxcdHZlYzMgbGlnaHRDb2xvciAgID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcXG5cXHRcXHRmbG9hdCByb3VnaG5lc3MgPSBCbGlubkV4cG9uZW50VG9HR1hSb3VnaG5lc3MoIG1hdGVyaWFsLnNwZWN1bGFyU2hpbmluZXNzICk7XFxuXFx0XFx0dmVjMyBzcGVjID0gUmVjdF9BcmVhX0xpZ2h0X1NwZWN1bGFyX1JlZmxlY3RhbmNlKFxcblxcdFxcdFxcdFxcdGdlb21ldHJ5LFxcblxcdFxcdFxcdFxcdHJlY3RBcmVhTGlnaHQucG9zaXRpb24sIHJlY3RBcmVhTGlnaHQuaGFsZldpZHRoLCByZWN0QXJlYUxpZ2h0LmhhbGZIZWlnaHQsXFxuXFx0XFx0XFx0XFx0cm91Z2huZXNzLFxcblxcdFxcdFxcdFxcdGx0Y01hdCwgbHRjTWFnICk7XFxuXFx0XFx0dmVjMyBkaWZmID0gUmVjdF9BcmVhX0xpZ2h0X0RpZmZ1c2VfUmVmbGVjdGFuY2UoXFxuXFx0XFx0XFx0XFx0Z2VvbWV0cnksXFxuXFx0XFx0XFx0XFx0cmVjdEFyZWFMaWdodC5wb3NpdGlvbiwgcmVjdEFyZWFMaWdodC5oYWxmV2lkdGgsIHJlY3RBcmVhTGlnaHQuaGFsZkhlaWdodCApO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGxpZ2h0Q29sb3IgKiBtYXRTcGVjQ29sb3IgKiBzcGVjIC8gUEkyO1xcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgICs9IGxpZ2h0Q29sb3IgKiBtYXREaWZmQ29sb3IgKiBkaWZmIC8gUEkyO1xcblxcdH1cXG4jZW5kaWZcXG52b2lkIFJFX0RpcmVjdF9CbGlublBob25nKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBCbGlublBob25nTWF0ZXJpYWwgbWF0ZXJpYWwsIGlub3V0IFJlZmxlY3RlZExpZ2h0IHJlZmxlY3RlZExpZ2h0ICkge1xcblxcdCNpZmRlZiBUT09OXFxuXFx0XFx0dmVjMyBpcnJhZGlhbmNlID0gZ2V0R3JhZGllbnRJcnJhZGlhbmNlKCBnZW9tZXRyeS5ub3JtYWwsIGRpcmVjdExpZ2h0LmRpcmVjdGlvbiApICogZGlyZWN0TGlnaHQuY29sb3I7XFxuXFx0I2Vsc2VcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHRcXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNlbmRpZlxcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArPSBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9IGlycmFkaWFuY2UgKiBCUkRGX1NwZWN1bGFyX0JsaW5uUGhvbmcoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJTaGluaW5lc3MgKSAqIG1hdGVyaWFsLnNwZWN1bGFyU3RyZW5ndGg7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3REaWZmdXNlX0JsaW5uUGhvbmcoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gQmxpbm5QaG9uZ01hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKz0gaXJyYWRpYW5jZSAqIEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBtYXRlcmlhbC5kaWZmdXNlQ29sb3IgKTtcXG59XFxuI2RlZmluZSBSRV9EaXJlY3RcXHRcXHRcXHRcXHRSRV9EaXJlY3RfQmxpbm5QaG9uZ1xcbiNkZWZpbmUgUkVfRGlyZWN0X1JlY3RBcmVhXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhX0JsaW5uUGhvbmdcXG4jZGVmaW5lIFJFX0luZGlyZWN0RGlmZnVzZVxcdFxcdFJFX0luZGlyZWN0RGlmZnVzZV9CbGlublBob25nXFxuI2RlZmluZSBNYXRlcmlhbF9MaWdodFByb2JlTE9EKCBtYXRlcmlhbCApXFx0KDApXFxuXCIsV289XCJQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsO1xcbm1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuMCAtIG1ldGFsbmVzc0ZhY3RvciApO1xcbm1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gY2xhbXAoIHJvdWdobmVzc0ZhY3RvciwgMC4wNCwgMS4wICk7XFxuI2lmZGVmIFNUQU5EQVJEXFxuXFx0bWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG1peCggdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG4jZWxzZVxcblxcdG1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBtaXgoIHZlYzMoIE1BWElNVU1fU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgKiBwb3cyKCByZWZsZWN0aXZpdHkgKSApLCBkaWZmdXNlQ29sb3IucmdiLCBtZXRhbG5lc3NGYWN0b3IgKTtcXG5cXHRtYXRlcmlhbC5jbGVhckNvYXQgPSBzYXR1cmF0ZSggY2xlYXJDb2F0ICk7XFx0bWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzID0gY2xhbXAoIGNsZWFyQ29hdFJvdWdobmVzcywgMC4wNCwgMS4wICk7XFxuI2VuZGlmXFxuXCIsWm89XCJzdHJ1Y3QgUGh5c2ljYWxNYXRlcmlhbCB7XFxuXFx0dmVjM1xcdGRpZmZ1c2VDb2xvcjtcXG5cXHRmbG9hdFxcdHNwZWN1bGFyUm91Z2huZXNzO1xcblxcdHZlYzNcXHRzcGVjdWxhckNvbG9yO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRmbG9hdCBjbGVhckNvYXQ7XFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0Um91Z2huZXNzO1xcblxcdCNlbmRpZlxcbn07XFxuI2RlZmluZSBNQVhJTVVNX1NQRUNVTEFSX0NPRUZGSUNJRU5UIDAuMTZcXG4jZGVmaW5lIERFRkFVTFRfU1BFQ1VMQVJfQ09FRkZJQ0lFTlQgMC4wNFxcbmZsb2F0IGNsZWFyQ29hdERIUkFwcHJveCggY29uc3QgaW4gZmxvYXQgcm91Z2huZXNzLCBjb25zdCBpbiBmbG9hdCBkb3ROTCApIHtcXG5cXHRyZXR1cm4gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCArICggMS4wIC0gREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApICogKCBwb3coIDEuMCAtIGRvdE5MLCA1LjAgKSAqIHBvdyggMS4wIC0gcm91Z2huZXNzLCAyLjAgKSApO1xcbn1cXG4jaWYgTlVNX1JFQ1RfQVJFQV9MSUdIVFMgPiAwXFxuXFx0dm9pZCBSRV9EaXJlY3RfUmVjdEFyZWFfUGh5c2ljYWwoIGNvbnN0IGluIFJlY3RBcmVhTGlnaHQgcmVjdEFyZWFMaWdodCwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0XFx0dmVjMyBtYXREaWZmQ29sb3IgPSBtYXRlcmlhbC5kaWZmdXNlQ29sb3I7XFxuXFx0XFx0dmVjMyBtYXRTcGVjQ29sb3IgPSBtYXRlcmlhbC5zcGVjdWxhckNvbG9yO1xcblxcdFxcdHZlYzMgbGlnaHRDb2xvciAgID0gcmVjdEFyZWFMaWdodC5jb2xvcjtcXG5cXHRcXHRmbG9hdCByb3VnaG5lc3MgPSBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcztcXG5cXHRcXHR2ZWMzIHNwZWMgPSBSZWN0X0FyZWFfTGlnaHRfU3BlY3VsYXJfUmVmbGVjdGFuY2UoXFxuXFx0XFx0XFx0XFx0Z2VvbWV0cnksXFxuXFx0XFx0XFx0XFx0cmVjdEFyZWFMaWdodC5wb3NpdGlvbiwgcmVjdEFyZWFMaWdodC5oYWxmV2lkdGgsIHJlY3RBcmVhTGlnaHQuaGFsZkhlaWdodCxcXG5cXHRcXHRcXHRcXHRyb3VnaG5lc3MsXFxuXFx0XFx0XFx0XFx0bHRjTWF0LCBsdGNNYWcgKTtcXG5cXHRcXHR2ZWMzIGRpZmYgPSBSZWN0X0FyZWFfTGlnaHRfRGlmZnVzZV9SZWZsZWN0YW5jZShcXG5cXHRcXHRcXHRcXHRnZW9tZXRyeSxcXG5cXHRcXHRcXHRcXHRyZWN0QXJlYUxpZ2h0LnBvc2l0aW9uLCByZWN0QXJlYUxpZ2h0LmhhbGZXaWR0aCwgcmVjdEFyZWFMaWdodC5oYWxmSGVpZ2h0ICk7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0U3BlY3VsYXIgKz0gbGlnaHRDb2xvciAqIG1hdFNwZWNDb2xvciAqIHNwZWM7XFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSAgKz0gbGlnaHRDb2xvciAqIG1hdERpZmZDb2xvciAqIGRpZmY7XFxuXFx0fVxcbiNlbmRpZlxcbnZvaWQgUkVfRGlyZWN0X1BoeXNpY2FsKCBjb25zdCBpbiBJbmNpZGVudExpZ2h0IGRpcmVjdExpZ2h0LCBjb25zdCBpbiBHZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5LCBjb25zdCBpbiBQaHlzaWNhbE1hdGVyaWFsIG1hdGVyaWFsLCBpbm91dCBSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCApIHtcXG5cXHRmbG9hdCBkb3ROTCA9IHNhdHVyYXRlKCBkb3QoIGdlb21ldHJ5Lm5vcm1hbCwgZGlyZWN0TGlnaHQuZGlyZWN0aW9uICkgKTtcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBkb3ROTCAqIGRpcmVjdExpZ2h0LmNvbG9yO1xcblxcdCNpZm5kZWYgUEhZU0lDQUxMWV9DT1JSRUNUX0xJR0hUU1xcblxcdFxcdGlycmFkaWFuY2UgKj0gUEk7XFxuXFx0I2VuZGlmXFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IG1hdGVyaWFsLmNsZWFyQ29hdCAqIGNsZWFyQ29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzLCBkb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciwgbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKTtcXG5cXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICs9ICggMS4wIC0gY2xlYXJDb2F0REhSICkgKiBpcnJhZGlhbmNlICogQlJERl9EaWZmdXNlX0xhbWJlcnQoIG1hdGVyaWFsLmRpZmZ1c2VDb2xvciApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArPSBpcnJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJDb2F0ICogQlJERl9TcGVjdWxhcl9HR1goIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgdmVjMyggREVGQVVMVF9TUEVDVUxBUl9DT0VGRklDSUVOVCApLCBtYXRlcmlhbC5jbGVhckNvYXRSb3VnaG5lc3MgKTtcXG5cXHQjZW5kaWZcXG59XFxudm9pZCBSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWwoIGNvbnN0IGluIHZlYzMgaXJyYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IGlycmFkaWFuY2UgKiBCUkRGX0RpZmZ1c2VfTGFtYmVydCggbWF0ZXJpYWwuZGlmZnVzZUNvbG9yICk7XFxufVxcbnZvaWQgUkVfSW5kaXJlY3RTcGVjdWxhcl9QaHlzaWNhbCggY29uc3QgaW4gdmVjMyByYWRpYW5jZSwgY29uc3QgaW4gdmVjMyBjbGVhckNvYXRSYWRpYW5jZSwgY29uc3QgaW4gR2VvbWV0cmljQ29udGV4dCBnZW9tZXRyeSwgY29uc3QgaW4gUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbCwgaW5vdXQgUmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgKSB7XFxuXFx0I2lmbmRlZiBTVEFOREFSRFxcblxcdFxcdGZsb2F0IGRvdE5WID0gc2F0dXJhdGUoIGRvdCggZ2VvbWV0cnkubm9ybWFsLCBnZW9tZXRyeS52aWV3RGlyICkgKTtcXG5cXHRcXHRmbG9hdCBkb3ROTCA9IGRvdE5WO1xcblxcdFxcdGZsb2F0IGNsZWFyQ29hdERIUiA9IG1hdGVyaWFsLmNsZWFyQ29hdCAqIGNsZWFyQ29hdERIUkFwcHJveCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzLCBkb3ROTCApO1xcblxcdCNlbHNlXFxuXFx0XFx0ZmxvYXQgY2xlYXJDb2F0REhSID0gMC4wO1xcblxcdCNlbmRpZlxcblxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKz0gKCAxLjAgLSBjbGVhckNvYXRESFIgKSAqIHJhZGlhbmNlICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCBtYXRlcmlhbC5zcGVjdWxhckNvbG9yLCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5pbmRpcmVjdFNwZWN1bGFyICs9IGNsZWFyQ29hdFJhZGlhbmNlICogbWF0ZXJpYWwuY2xlYXJDb2F0ICogQlJERl9TcGVjdWxhcl9HR1hfRW52aXJvbm1lbnQoIGdlb21ldHJ5LCB2ZWMzKCBERUZBVUxUX1NQRUNVTEFSX0NPRUZGSUNJRU5UICksIG1hdGVyaWFsLmNsZWFyQ29hdFJvdWdobmVzcyApO1xcblxcdCNlbmRpZlxcbn1cXG4jZGVmaW5lIFJFX0RpcmVjdFxcdFxcdFxcdFxcdFJFX0RpcmVjdF9QaHlzaWNhbFxcbiNkZWZpbmUgUkVfRGlyZWN0X1JlY3RBcmVhXFx0XFx0UkVfRGlyZWN0X1JlY3RBcmVhX1BoeXNpY2FsXFxuI2RlZmluZSBSRV9JbmRpcmVjdERpZmZ1c2VcXHRcXHRSRV9JbmRpcmVjdERpZmZ1c2VfUGh5c2ljYWxcXG4jZGVmaW5lIFJFX0luZGlyZWN0U3BlY3VsYXJcXHRcXHRSRV9JbmRpcmVjdFNwZWN1bGFyX1BoeXNpY2FsXFxuI2RlZmluZSBNYXRlcmlhbF9CbGlublNoaW5pbmVzc0V4cG9uZW50KCBtYXRlcmlhbCApICAgR0dYUm91Z2huZXNzVG9CbGlubkV4cG9uZW50KCBtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyApXFxuI2RlZmluZSBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSAgIEdHWFJvdWdobmVzc1RvQmxpbm5FeHBvbmVudCggbWF0ZXJpYWwuY2xlYXJDb2F0Um91Z2huZXNzIClcXG5mbG9hdCBjb21wdXRlU3BlY3VsYXJPY2NsdXNpb24oIGNvbnN0IGluIGZsb2F0IGRvdE5WLCBjb25zdCBpbiBmbG9hdCBhbWJpZW50T2NjbHVzaW9uLCBjb25zdCBpbiBmbG9hdCByb3VnaG5lc3MgKSB7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBwb3coIGRvdE5WICsgYW1iaWVudE9jY2x1c2lvbiwgZXhwMiggLSAxNi4wICogcm91Z2huZXNzIC0gMS4wICkgKSAtIDEuMCArIGFtYmllbnRPY2NsdXNpb24gKTtcXG59XFxuXCIsSm89XCJcXG5HZW9tZXRyaWNDb250ZXh0IGdlb21ldHJ5O1xcbmdlb21ldHJ5LnBvc2l0aW9uID0gLSB2Vmlld1Bvc2l0aW9uO1xcbmdlb21ldHJ5Lm5vcm1hbCA9IG5vcm1hbDtcXG5nZW9tZXRyeS52aWV3RGlyID0gbm9ybWFsaXplKCB2Vmlld1Bvc2l0aW9uICk7XFxuSW5jaWRlbnRMaWdodCBkaXJlY3RMaWdodDtcXG4jaWYgKCBOVU1fUE9JTlRfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0UG9pbnREaXJlY3RMaWdodElycmFkaWFuY2UoIHBvaW50TGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggcG9pbnRMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0UG9pbnRTaGFkb3coIHBvaW50U2hhZG93TWFwWyBpIF0sIHBvaW50TGlnaHQuc2hhZG93TWFwU2l6ZSwgcG9pbnRMaWdodC5zaGFkb3dCaWFzLCBwb2ludExpZ2h0LnNoYWRvd1JhZGl1cywgdlBvaW50U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX1NQT1RfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdCApXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xcblxcdFxcdGdldFNwb3REaXJlY3RMaWdodElycmFkaWFuY2UoIHNwb3RMaWdodCwgZ2VvbWV0cnksIGRpcmVjdExpZ2h0ICk7XFxuXFx0XFx0I2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHRcXHRkaXJlY3RMaWdodC5jb2xvciAqPSBhbGwoIGJ2ZWMyKCBzcG90TGlnaHQuc2hhZG93LCBkaXJlY3RMaWdodC52aXNpYmxlICkgKSA/IGdldFNoYWRvdyggc3BvdFNoYWRvd01hcFsgaSBdLCBzcG90TGlnaHQuc2hhZG93TWFwU2l6ZSwgc3BvdExpZ2h0LnNoYWRvd0JpYXMsIHNwb3RMaWdodC5zaGFkb3dSYWRpdXMsIHZTcG90U2hhZG93Q29vcmRbIGkgXSApIDogMS4wO1xcblxcdFxcdCNlbmRpZlxcblxcdFxcdFJFX0RpcmVjdCggZGlyZWN0TGlnaHQsIGdlb21ldHJ5LCBtYXRlcmlhbCwgcmVmbGVjdGVkTGlnaHQgKTtcXG5cXHR9XFxuI2VuZGlmXFxuI2lmICggTlVNX0RJUl9MSUdIVFMgPiAwICkgJiYgZGVmaW5lZCggUkVfRGlyZWN0IClcXG5cXHREaXJlY3Rpb25hbExpZ2h0IGRpcmVjdGlvbmFsTGlnaHQ7XFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0RJUl9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0ZGlyZWN0aW9uYWxMaWdodCA9IGRpcmVjdGlvbmFsTGlnaHRzWyBpIF07XFxuXFx0XFx0Z2V0RGlyZWN0aW9uYWxEaXJlY3RMaWdodElycmFkaWFuY2UoIGRpcmVjdGlvbmFsTGlnaHQsIGdlb21ldHJ5LCBkaXJlY3RMaWdodCApO1xcblxcdFxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0XFx0ZGlyZWN0TGlnaHQuY29sb3IgKj0gYWxsKCBidmVjMiggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3csIGRpcmVjdExpZ2h0LnZpc2libGUgKSApID8gZ2V0U2hhZG93KCBkaXJlY3Rpb25hbFNoYWRvd01hcFsgaSBdLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd01hcFNpemUsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93QmlhcywgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dSYWRpdXMsIHZEaXJlY3Rpb25hbFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHRcXHQjZW5kaWZcXG5cXHRcXHRSRV9EaXJlY3QoIGRpcmVjdExpZ2h0LCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHJlZmxlY3RlZExpZ2h0ICk7XFxuXFx0fVxcbiNlbmRpZlxcbiNpZiAoIE5VTV9SRUNUX0FSRUFfTElHSFRTID4gMCApICYmIGRlZmluZWQoIFJFX0RpcmVjdF9SZWN0QXJlYSApXFxuXFx0UmVjdEFyZWFMaWdodCByZWN0QXJlYUxpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9SRUNUX0FSRUFfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHJlY3RBcmVhTGlnaHQgPSByZWN0QXJlYUxpZ2h0c1sgaSBdO1xcblxcdFxcdFJFX0RpcmVjdF9SZWN0QXJlYSggcmVjdEFyZWFMaWdodCwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcblxcdH1cXG4jZW5kaWZcXG4jaWYgZGVmaW5lZCggUkVfSW5kaXJlY3REaWZmdXNlIClcXG5cXHR2ZWMzIGlycmFkaWFuY2UgPSBnZXRBbWJpZW50TGlnaHRJcnJhZGlhbmNlKCBhbWJpZW50TGlnaHRDb2xvciApO1xcblxcdCNpZmRlZiBVU0VfTElHSFRNQVBcXG5cXHRcXHR2ZWMzIGxpZ2h0TWFwSXJyYWRpYW5jZSA9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHRcXHQjaWZuZGVmIFBIWVNJQ0FMTFlfQ09SUkVDVF9MSUdIVFNcXG5cXHRcXHRcXHRsaWdodE1hcElycmFkaWFuY2UgKj0gUEk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBsaWdodE1hcElycmFkaWFuY2U7XFxuXFx0I2VuZGlmXFxuXFx0I2lmICggTlVNX0hFTUlfTElHSFRTID4gMCApXFxuXFx0XFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX0hFTUlfTElHSFRTOyBpICsrICkge1xcblxcdFxcdFxcdGlycmFkaWFuY2UgKz0gZ2V0SGVtaXNwaGVyZUxpZ2h0SXJyYWRpYW5jZSggaGVtaXNwaGVyZUxpZ2h0c1sgaSBdLCBnZW9tZXRyeSApO1xcblxcdFxcdH1cXG5cXHQjZW5kaWZcXG5cXHQjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApICYmIGRlZmluZWQoIFBIWVNJQ0FMICkgJiYgZGVmaW5lZCggRU5WTUFQX1RZUEVfQ1VCRV9VViApXFxuXFx0XFx0aXJyYWRpYW5jZSArPSBnZXRMaWdodFByb2JlSW5kaXJlY3RJcnJhZGlhbmNlKCBnZW9tZXRyeSwgOCApO1xcblxcdCNlbmRpZlxcblxcdFJFX0luZGlyZWN0RGlmZnVzZSggaXJyYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKCBVU0VfRU5WTUFQICkgJiYgZGVmaW5lZCggUkVfSW5kaXJlY3RTcGVjdWxhciApXFxuXFx0dmVjMyByYWRpYW5jZSA9IGdldExpZ2h0UHJvYmVJbmRpcmVjdFJhZGlhbmNlKCBnZW9tZXRyeSwgTWF0ZXJpYWxfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNpZm5kZWYgU1RBTkRBUkRcXG5cXHRcXHR2ZWMzIGNsZWFyQ29hdFJhZGlhbmNlID0gZ2V0TGlnaHRQcm9iZUluZGlyZWN0UmFkaWFuY2UoIGdlb21ldHJ5LCBNYXRlcmlhbF9DbGVhckNvYXRfQmxpbm5TaGluaW5lc3NFeHBvbmVudCggbWF0ZXJpYWwgKSwgOCApO1xcblxcdCNlbHNlXFxuXFx0XFx0dmVjMyBjbGVhckNvYXRSYWRpYW5jZSA9IHZlYzMoIDAuMCApO1xcblxcdCNlbmRpZlxcblxcdFJFX0luZGlyZWN0U3BlY3VsYXIoIHJhZGlhbmNlLCBjbGVhckNvYXRSYWRpYW5jZSwgZ2VvbWV0cnksIG1hdGVyaWFsLCByZWZsZWN0ZWRMaWdodCApO1xcbiNlbmRpZlxcblwiLEtvPVwiI2lmIGRlZmluZWQoVVNFX0xPR0RFUFRIQlVGKSAmJiBkZWZpbmVkKFVTRV9MT0dERVBUSEJVRl9FWFQpXFxuXFx0Z2xfRnJhZ0RlcHRoRVhUID0gbG9nMih2RnJhZ0RlcHRoKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXCIsUW89XCIjaWZkZWYgVVNFX0xPR0RFUFRIQlVGXFxuXFx0dW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDO1xcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblxcdCNlbmRpZlxcbiNlbmRpZlxcblwiLCRvPVwiI2lmZGVmIFVTRV9MT0dERVBUSEJVRlxcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dmFyeWluZyBmbG9hdCB2RnJhZ0RlcHRoO1xcblxcdCNlbmRpZlxcblxcdHVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQztcXG4jZW5kaWZcIix0YT1cIiNpZmRlZiBVU0VfTE9HREVQVEhCVUZcXG5cXHRnbF9Qb3NpdGlvbi56ID0gbG9nMihtYXgoIEVQU0lMT04sIGdsX1Bvc2l0aW9uLncgKyAxLjAgKSkgKiBsb2dEZXB0aEJ1ZkZDO1xcblxcdCNpZmRlZiBVU0VfTE9HREVQVEhCVUZfRVhUXFxuXFx0XFx0dkZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XFxuXFx0I2Vsc2VcXG5cXHRcXHRnbF9Qb3NpdGlvbi56ID0gKGdsX1Bvc2l0aW9uLnogLSAxLjApICogZ2xfUG9zaXRpb24udztcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixlYT1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCB0ZXhlbENvbG9yID0gdGV4dHVyZTJEKCBtYXAsIHZVdiApO1xcblxcdHRleGVsQ29sb3IgPSBtYXBUZXhlbFRvTGluZWFyKCB0ZXhlbENvbG9yICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IHRleGVsQ29sb3I7XFxuI2VuZGlmXFxuXCIsbmE9XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4jZW5kaWZcXG5cIixpYT1cIiNpZmRlZiBVU0VfTUFQXFxuXFx0dmVjNCBtYXBUZXhlbCA9IHRleHR1cmUyRCggbWFwLCB2ZWMyKCBnbF9Qb2ludENvb3JkLngsIDEuMCAtIGdsX1BvaW50Q29vcmQueSApICogb2Zmc2V0UmVwZWF0Lnp3ICsgb2Zmc2V0UmVwZWF0Lnh5ICk7XFxuXFx0ZGlmZnVzZUNvbG9yICo9IG1hcFRleGVsVG9MaW5lYXIoIG1hcFRleGVsICk7XFxuI2VuZGlmXFxuXCIscmE9XCIjaWZkZWYgVVNFX01BUFxcblxcdHVuaWZvcm0gdmVjNCBvZmZzZXRSZXBlYXQ7XFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiNlbmRpZlxcblwiLG9hPVwiZmxvYXQgbWV0YWxuZXNzRmFjdG9yID0gbWV0YWxuZXNzO1xcbiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dmVjNCB0ZXhlbE1ldGFsbmVzcyA9IHRleHR1cmUyRCggbWV0YWxuZXNzTWFwLCB2VXYgKTtcXG5cXHRtZXRhbG5lc3NGYWN0b3IgKj0gdGV4ZWxNZXRhbG5lc3MuYjtcXG4jZW5kaWZcXG5cIixhYT1cIiNpZmRlZiBVU0VfTUVUQUxORVNTTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbWV0YWxuZXNzTWFwO1xcbiNlbmRpZlwiLHNhPVwiI2lmZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDAgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMCBdO1xcblxcdG9iamVjdE5vcm1hbCArPSAoIG1vcnBoTm9ybWFsMSAtIG5vcm1hbCApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0b2JqZWN0Tm9ybWFsICs9ICggbW9ycGhOb3JtYWwyIC0gbm9ybWFsICkgKiBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDIgXTtcXG5cXHRvYmplY3ROb3JtYWwgKz0gKCBtb3JwaE5vcm1hbDMgLSBub3JtYWwgKSAqIG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgMyBdO1xcbiNlbmRpZlxcblwiLHVhPVwiI2lmZGVmIFVTRV9NT1JQSFRBUkdFVFNcXG5cXHQjaWZuZGVmIFVTRV9NT1JQSE5PUk1BTFNcXG5cXHR1bmlmb3JtIGZsb2F0IG1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgOCBdO1xcblxcdCNlbHNlXFxuXFx0dW5pZm9ybSBmbG9hdCBtb3JwaFRhcmdldEluZmx1ZW5jZXNbIDQgXTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcIixsYT1cIiNpZmRlZiBVU0VfTU9SUEhUQVJHRVRTXFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDAgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAwIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDEgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAxIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDIgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAyIF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDMgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyAzIF07XFxuXFx0I2lmbmRlZiBVU0VfTU9SUEhOT1JNQUxTXFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDQgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA0IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDUgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA1IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDYgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA2IF07XFxuXFx0dHJhbnNmb3JtZWQgKz0gKCBtb3JwaFRhcmdldDcgLSBwb3NpdGlvbiApICogbW9ycGhUYXJnZXRJbmZsdWVuY2VzWyA3IF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsY2E9XCIjaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0ZmxvYXQgZmxpcE5vcm1hbCA9ICggZmxvYXQoIGdsX0Zyb250RmFjaW5nICkgKiAyLjAgLSAxLjAgKTtcXG4jZWxzZVxcblxcdGZsb2F0IGZsaXBOb3JtYWwgPSAxLjA7XFxuI2VuZGlmXFxuXCIsaGE9XCIjaWZkZWYgRkxBVF9TSEFERURcXG5cXHR2ZWMzIGZkeCA9IHZlYzMoIGRGZHgoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR4KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeCggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIGZkeSA9IHZlYzMoIGRGZHkoIHZWaWV3UG9zaXRpb24ueCApLCBkRmR5KCB2Vmlld1Bvc2l0aW9uLnkgKSwgZEZkeSggdlZpZXdQb3NpdGlvbi56ICkgKTtcXG5cXHR2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSggY3Jvc3MoIGZkeCwgZmR5ICkgKTtcXG4jZWxzZVxcblxcdHZlYzMgbm9ybWFsID0gbm9ybWFsaXplKCB2Tm9ybWFsICkgKiBmbGlwTm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbDJBcmIoIC12Vmlld1Bvc2l0aW9uLCBub3JtYWwgKTtcXG4jZWxpZiBkZWZpbmVkKCBVU0VfQlVNUE1BUCApXFxuXFx0bm9ybWFsID0gcGVydHVyYk5vcm1hbEFyYiggLXZWaWV3UG9zaXRpb24sIG5vcm1hbCwgZEhkeHlfZndkKCkgKTtcXG4jZW5kaWZcXG5cIixmYT1cIiNpZmRlZiBVU0VfTk9STUFMTUFQXFxuXFx0dW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcblxcdHVuaWZvcm0gdmVjMiBub3JtYWxTY2FsZTtcXG5cXHR2ZWMzIHBlcnR1cmJOb3JtYWwyQXJiKCB2ZWMzIGV5ZV9wb3MsIHZlYzMgc3VyZl9ub3JtICkge1xcblxcdFxcdHZlYzMgcTAgPSBkRmR4KCBleWVfcG9zLnh5eiApO1xcblxcdFxcdHZlYzMgcTEgPSBkRmR5KCBleWVfcG9zLnh5eiApO1xcblxcdFxcdHZlYzIgc3QwID0gZEZkeCggdlV2LnN0ICk7XFxuXFx0XFx0dmVjMiBzdDEgPSBkRmR5KCB2VXYuc3QgKTtcXG5cXHRcXHR2ZWMzIFMgPSBub3JtYWxpemUoIHEwICogc3QxLnQgLSBxMSAqIHN0MC50ICk7XFxuXFx0XFx0dmVjMyBUID0gbm9ybWFsaXplKCAtcTAgKiBzdDEucyArIHExICogc3QwLnMgKTtcXG5cXHRcXHR2ZWMzIE4gPSBub3JtYWxpemUoIHN1cmZfbm9ybSApO1xcblxcdFxcdHZlYzMgbWFwTiA9IHRleHR1cmUyRCggbm9ybWFsTWFwLCB2VXYgKS54eXogKiAyLjAgLSAxLjA7XFxuXFx0XFx0bWFwTi54eSA9IG5vcm1hbFNjYWxlICogbWFwTi54eTtcXG5cXHRcXHRtYXQzIHRzbiA9IG1hdDMoIFMsIFQsIE4gKTtcXG5cXHRcXHRyZXR1cm4gbm9ybWFsaXplKCB0c24gKiBtYXBOICk7XFxuXFx0fVxcbiNlbmRpZlxcblwiLGRhPVwidmVjMyBwYWNrTm9ybWFsVG9SR0IoIGNvbnN0IGluIHZlYzMgbm9ybWFsICkge1xcblxcdHJldHVybiBub3JtYWxpemUoIG5vcm1hbCApICogMC41ICsgMC41O1xcbn1cXG52ZWMzIHVucGFja1JHQlRvTm9ybWFsKCBjb25zdCBpbiB2ZWMzIHJnYiApIHtcXG5cXHRyZXR1cm4gMS4wIC0gMi4wICogcmdiLnh5ejtcXG59XFxuY29uc3QgZmxvYXQgUGFja1Vwc2NhbGUgPSAyNTYuIC8gMjU1Ljtjb25zdCBmbG9hdCBVbnBhY2tEb3duc2NhbGUgPSAyNTUuIC8gMjU2LjtcXG5jb25zdCB2ZWMzIFBhY2tGYWN0b3JzID0gdmVjMyggMjU2LiAqIDI1Ni4gKiAyNTYuLCAyNTYuICogMjU2LiwgIDI1Ni4gKTtcXG5jb25zdCB2ZWM0IFVucGFja0ZhY3RvcnMgPSBVbnBhY2tEb3duc2NhbGUgLyB2ZWM0KCBQYWNrRmFjdG9ycywgMS4gKTtcXG5jb25zdCBmbG9hdCBTaGlmdFJpZ2h0OCA9IDEuIC8gMjU2LjtcXG52ZWM0IHBhY2tEZXB0aFRvUkdCQSggY29uc3QgaW4gZmxvYXQgdiApIHtcXG5cXHR2ZWM0IHIgPSB2ZWM0KCBmcmFjdCggdiAqIFBhY2tGYWN0b3JzICksIHYgKTtcXG5cXHRyLnl6dyAtPSByLnh5eiAqIFNoaWZ0UmlnaHQ4O1xcdHJldHVybiByICogUGFja1Vwc2NhbGU7XFxufVxcbmZsb2F0IHVucGFja1JHQkFUb0RlcHRoKCBjb25zdCBpbiB2ZWM0IHYgKSB7XFxuXFx0cmV0dXJuIGRvdCggdiwgVW5wYWNrRmFjdG9ycyApO1xcbn1cXG5mbG9hdCB2aWV3WlRvT3J0aG9ncmFwaGljRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICggdmlld1ogKyBuZWFyICkgLyAoIG5lYXIgLSBmYXIgKTtcXG59XFxuZmxvYXQgb3J0aG9ncmFwaGljRGVwdGhUb1ZpZXdaKCBjb25zdCBpbiBmbG9hdCBsaW5lYXJDbGlwWiwgY29uc3QgaW4gZmxvYXQgbmVhciwgY29uc3QgaW4gZmxvYXQgZmFyICkge1xcblxcdHJldHVybiBsaW5lYXJDbGlwWiAqICggbmVhciAtIGZhciApIC0gbmVhcjtcXG59XFxuZmxvYXQgdmlld1pUb1BlcnNwZWN0aXZlRGVwdGgoIGNvbnN0IGluIGZsb2F0IHZpZXdaLCBjb25zdCBpbiBmbG9hdCBuZWFyLCBjb25zdCBpbiBmbG9hdCBmYXIgKSB7XFxuXFx0cmV0dXJuICgoIG5lYXIgKyB2aWV3WiApICogZmFyICkgLyAoKCBmYXIgLSBuZWFyICkgKiB2aWV3WiApO1xcbn1cXG5mbG9hdCBwZXJzcGVjdGl2ZURlcHRoVG9WaWV3WiggY29uc3QgaW4gZmxvYXQgaW52Q2xpcFosIGNvbnN0IGluIGZsb2F0IG5lYXIsIGNvbnN0IGluIGZsb2F0IGZhciApIHtcXG5cXHRyZXR1cm4gKCBuZWFyICogZmFyICkgLyAoICggZmFyIC0gbmVhciApICogaW52Q2xpcFogLSBmYXIgKTtcXG59XFxuXCIscGE9XCIjaWZkZWYgUFJFTVVMVElQTElFRF9BTFBIQVxcblxcdGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXFxuXCIsZ2E9XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dmVjNCBtdlBvc2l0aW9uID0gbW9kZWxWaWV3TWF0cml4ICogc2tpbm5lZDtcXG4jZWxzZVxcblxcdHZlYzQgbXZQb3NpdGlvbiA9IG1vZGVsVmlld01hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG4jZW5kaWZcXG5nbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1xcblwiLHZhPVwiI2lmIGRlZmluZWQoIERJVEhFUklORyApXFxuICBnbF9GcmFnQ29sb3IucmdiID0gZGl0aGVyaW5nKCBnbF9GcmFnQ29sb3IucmdiICk7XFxuI2VuZGlmXFxuXCIsbWE9XCJ2ZWMzIGRpdGhlcmluZyggdmVjMyBjb2xvciApIHtcXG5cXHRmbG9hdCBncmlkX3Bvc2l0aW9uID0gZnJhY3QoIGRvdCggZ2xfRnJhZ0Nvb3JkLnh5IC0gdmVjMiggMC41LCAwLjUgKSAsIHZlYzIoIDEuMCAvIDE2LjAsIDEwLjAgLyAzNi4wICkgKyAwLjI1ICkgKTtcXG5cXHR2ZWMzIGRpdGhlcl9zaGlmdF9SR0IgPSB2ZWMzKCAwLjI1IC8gMjU1LjAsIC0wLjI1IC8gMjU1LjAsIDAuMjUgLyAyNTUuMCApO1xcblxcdGRpdGhlcl9zaGlmdF9SR0IgPSBtaXgoIDIuMCAqIGRpdGhlcl9zaGlmdF9SR0IsIC0yLjAgKiBkaXRoZXJfc2hpZnRfUkdCLCBncmlkX3Bvc2l0aW9uICk7XFxuXFx0cmV0dXJuIGNvbG9yICsgMC41IC8gMjU1LjAgKyBkaXRoZXJfc2hpZnRfUkdCO1xcbn1cIix5YT1cImZsb2F0IHJvdWdobmVzc0ZhY3RvciA9IHJvdWdobmVzcztcXG4jaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHZlYzQgdGV4ZWxSb3VnaG5lc3MgPSB0ZXh0dXJlMkQoIHJvdWdobmVzc01hcCwgdlV2ICk7XFxuXFx0cm91Z2huZXNzRmFjdG9yICo9IHRleGVsUm91Z2huZXNzLmc7XFxuI2VuZGlmXFxuXCIsX2E9XCIjaWZkZWYgVVNFX1JPVUdITkVTU01BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG4jZW5kaWZcIixiYT1cIiNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsU2hhZG93TWFwWyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwb3RTaGFkb3dNYXBbIE5VTV9TUE9UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2U3BvdFNoYWRvd0Nvb3JkWyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1BPSU5UX0xJR0hUUyA+IDBcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCBwb2ludFNoYWRvd01hcFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2UG9pbnRTaGFkb3dDb29yZFsgTlVNX1BPSU5UX0xJR0hUUyBdO1xcblxcdCNlbmRpZlxcblxcdGZsb2F0IHRleHR1cmUyRENvbXBhcmUoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgdXYsIGZsb2F0IGNvbXBhcmUgKSB7XFxuXFx0XFx0cmV0dXJuIHN0ZXAoIGNvbXBhcmUsIHVucGFja1JHQkFUb0RlcHRoKCB0ZXh0dXJlMkQoIGRlcHRocywgdXYgKSApICk7XFxuXFx0fVxcblxcdGZsb2F0IHRleHR1cmUyRFNoYWRvd0xlcnAoIHNhbXBsZXIyRCBkZXB0aHMsIHZlYzIgc2l6ZSwgdmVjMiB1diwgZmxvYXQgY29tcGFyZSApIHtcXG5cXHRcXHRjb25zdCB2ZWMyIG9mZnNldCA9IHZlYzIoIDAuMCwgMS4wICk7XFxuXFx0XFx0dmVjMiB0ZXhlbFNpemUgPSB2ZWMyKCAxLjAgKSAvIHNpemU7XFxuXFx0XFx0dmVjMiBjZW50cm9pZFVWID0gZmxvb3IoIHV2ICogc2l6ZSArIDAuNSApIC8gc2l6ZTtcXG5cXHRcXHRmbG9hdCBsYiA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC54eCwgY29tcGFyZSApO1xcblxcdFxcdGZsb2F0IGx0ID0gdGV4dHVyZTJEQ29tcGFyZSggZGVwdGhzLCBjZW50cm9pZFVWICsgdGV4ZWxTaXplICogb2Zmc2V0Lnh5LCBjb21wYXJlICk7XFxuXFx0XFx0ZmxvYXQgcmIgPSB0ZXh0dXJlMkRDb21wYXJlKCBkZXB0aHMsIGNlbnRyb2lkVVYgKyB0ZXhlbFNpemUgKiBvZmZzZXQueXgsIGNvbXBhcmUgKTtcXG5cXHRcXHRmbG9hdCBydCA9IHRleHR1cmUyRENvbXBhcmUoIGRlcHRocywgY2VudHJvaWRVViArIHRleGVsU2l6ZSAqIG9mZnNldC55eSwgY29tcGFyZSApO1xcblxcdFxcdHZlYzIgZiA9IGZyYWN0KCB1diAqIHNpemUgKyAwLjUgKTtcXG5cXHRcXHRmbG9hdCBhID0gbWl4KCBsYiwgbHQsIGYueSApO1xcblxcdFxcdGZsb2F0IGIgPSBtaXgoIHJiLCBydCwgZi55ICk7XFxuXFx0XFx0ZmxvYXQgYyA9IG1peCggYSwgYiwgZi54ICk7XFxuXFx0XFx0cmV0dXJuIGM7XFxuXFx0fVxcblxcdGZsb2F0IGdldFNoYWRvdyggc2FtcGxlcjJEIHNoYWRvd01hcCwgdmVjMiBzaGFkb3dNYXBTaXplLCBmbG9hdCBzaGFkb3dCaWFzLCBmbG9hdCBzaGFkb3dSYWRpdXMsIHZlYzQgc2hhZG93Q29vcmQgKSB7XFxuXFx0XFx0c2hhZG93Q29vcmQueHl6IC89IHNoYWRvd0Nvb3JkLnc7XFxuXFx0XFx0c2hhZG93Q29vcmQueiArPSBzaGFkb3dCaWFzO1xcblxcdFxcdGJ2ZWM0IGluRnJ1c3R1bVZlYyA9IGJ2ZWM0ICggc2hhZG93Q29vcmQueCA+PSAwLjAsIHNoYWRvd0Nvb3JkLnggPD0gMS4wLCBzaGFkb3dDb29yZC55ID49IDAuMCwgc2hhZG93Q29vcmQueSA8PSAxLjAgKTtcXG5cXHRcXHRib29sIGluRnJ1c3R1bSA9IGFsbCggaW5GcnVzdHVtVmVjICk7XFxuXFx0XFx0YnZlYzIgZnJ1c3R1bVRlc3RWZWMgPSBidmVjMiggaW5GcnVzdHVtLCBzaGFkb3dDb29yZC56IDw9IDEuMCApO1xcblxcdFxcdGJvb2wgZnJ1c3R1bVRlc3QgPSBhbGwoIGZydXN0dW1UZXN0VmVjICk7XFxuXFx0XFx0aWYgKCBmcnVzdHVtVGVzdCApIHtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGIClcXG5cXHRcXHRcXHR2ZWMyIHRleGVsU2l6ZSA9IHZlYzIoIDEuMCApIC8gc2hhZG93TWFwU2l6ZTtcXG5cXHRcXHRcXHRmbG9hdCBkeDAgPSAtIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MCA9IC0gdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHgxID0gKyB0ZXhlbFNpemUueCAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeTEgPSArIHRleGVsU2l6ZS55ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdHJldHVybiAoXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIDAuMCwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MSwgZHkwICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSArIHZlYzIoIGR4MCwgMC4wICksIHNoYWRvd0Nvb3JkLnogKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBzaGFkb3dDb29yZC54eSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTEgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTEgKSwgc2hhZG93Q29vcmQueiApXFxuXFx0XFx0XFx0KSAqICggMS4wIC8gOS4wICk7XFxuXFx0XFx0I2VsaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyBzaGFkb3dNYXBTaXplO1xcblxcdFxcdFxcdGZsb2F0IGR4MCA9IC0gdGV4ZWxTaXplLnggKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0ZmxvYXQgZHkwID0gLSB0ZXhlbFNpemUueSAqIHNoYWRvd1JhZGl1cztcXG5cXHRcXHRcXHRmbG9hdCBkeDEgPSArIHRleGVsU2l6ZS54ICogc2hhZG93UmFkaXVzO1xcblxcdFxcdFxcdGZsb2F0IGR5MSA9ICsgdGV4ZWxTaXplLnkgKiBzaGFkb3dSYWRpdXM7XFxuXFx0XFx0XFx0cmV0dXJuIChcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggMC4wLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgxLCBkeTAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5ICsgdmVjMiggZHgwLCAwLjAgKSwgc2hhZG93Q29vcmQueiApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRTaGFkb3dMZXJwKCBzaGFkb3dNYXAsIHNoYWRvd01hcFNpemUsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIDAuMCApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCAwLjAsIGR5MSApLCBzaGFkb3dDb29yZC56ICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRFNoYWRvd0xlcnAoIHNoYWRvd01hcCwgc2hhZG93TWFwU2l6ZSwgc2hhZG93Q29vcmQueHkgKyB2ZWMyKCBkeDEsIGR5MSApLCBzaGFkb3dDb29yZC56IClcXG5cXHRcXHRcXHQpICogKCAxLjAgLyA5LjAgKTtcXG5cXHRcXHQjZWxzZVxcblxcdFxcdFxcdHJldHVybiB0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIHNoYWRvd0Nvb3JkLnh5LCBzaGFkb3dDb29yZC56ICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiAxLjA7XFxuXFx0fVxcblxcdHZlYzIgY3ViZVRvVVYoIHZlYzMgdiwgZmxvYXQgdGV4ZWxTaXplWSApIHtcXG5cXHRcXHR2ZWMzIGFic1YgPSBhYnMoIHYgKTtcXG5cXHRcXHRmbG9hdCBzY2FsZVRvQ3ViZSA9IDEuMCAvIG1heCggYWJzVi54LCBtYXgoIGFic1YueSwgYWJzVi56ICkgKTtcXG5cXHRcXHRhYnNWICo9IHNjYWxlVG9DdWJlO1xcblxcdFxcdHYgKj0gc2NhbGVUb0N1YmUgKiAoIDEuMCAtIDIuMCAqIHRleGVsU2l6ZVkgKTtcXG5cXHRcXHR2ZWMyIHBsYW5hciA9IHYueHk7XFxuXFx0XFx0ZmxvYXQgYWxtb3N0QVRleGVsID0gMS41ICogdGV4ZWxTaXplWTtcXG5cXHRcXHRmbG9hdCBhbG1vc3RPbmUgPSAxLjAgLSBhbG1vc3RBVGV4ZWw7XFxuXFx0XFx0aWYgKCBhYnNWLnogPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGlmICggdi56ID4gMC4wIClcXG5cXHRcXHRcXHRcXHRwbGFuYXIueCA9IDQuMCAtIHYueDtcXG5cXHRcXHR9IGVsc2UgaWYgKCBhYnNWLnggPj0gYWxtb3N0T25lICkge1xcblxcdFxcdFxcdGZsb2F0IHNpZ25YID0gc2lnbiggdi54ICk7XFxuXFx0XFx0XFx0cGxhbmFyLnggPSB2LnogKiBzaWduWCArIDIuMCAqIHNpZ25YO1xcblxcdFxcdH0gZWxzZSBpZiAoIGFic1YueSA+PSBhbG1vc3RPbmUgKSB7XFxuXFx0XFx0XFx0ZmxvYXQgc2lnblkgPSBzaWduKCB2LnkgKTtcXG5cXHRcXHRcXHRwbGFuYXIueCA9IHYueCArIDIuMCAqIHNpZ25ZICsgMi4wO1xcblxcdFxcdFxcdHBsYW5hci55ID0gdi56ICogc2lnblkgLSAyLjA7XFxuXFx0XFx0fVxcblxcdFxcdHJldHVybiB2ZWMyKCAwLjEyNSwgMC4yNSApICogcGxhbmFyICsgdmVjMiggMC4zNzUsIDAuNzUgKTtcXG5cXHR9XFxuXFx0ZmxvYXQgZ2V0UG9pbnRTaGFkb3coIHNhbXBsZXIyRCBzaGFkb3dNYXAsIHZlYzIgc2hhZG93TWFwU2l6ZSwgZmxvYXQgc2hhZG93QmlhcywgZmxvYXQgc2hhZG93UmFkaXVzLCB2ZWM0IHNoYWRvd0Nvb3JkICkge1xcblxcdFxcdHZlYzIgdGV4ZWxTaXplID0gdmVjMiggMS4wICkgLyAoIHNoYWRvd01hcFNpemUgKiB2ZWMyKCA0LjAsIDIuMCApICk7XFxuXFx0XFx0dmVjMyBsaWdodFRvUG9zaXRpb24gPSBzaGFkb3dDb29yZC54eXo7XFxuXFx0XFx0dmVjMyBiZDNEID0gbm9ybWFsaXplKCBsaWdodFRvUG9zaXRpb24gKTtcXG5cXHRcXHRmbG9hdCBkcCA9ICggbGVuZ3RoKCBsaWdodFRvUG9zaXRpb24gKSAtIHNoYWRvd0JpYXMgKSAvIDEwMDAuMDtcXG5cXHRcXHQjaWYgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGICkgfHwgZGVmaW5lZCggU0hBRE9XTUFQX1RZUEVfUENGX1NPRlQgKVxcblxcdFxcdFxcdHZlYzIgb2Zmc2V0ID0gdmVjMiggLSAxLCAxICkgKiBzaGFkb3dSYWRpdXMgKiB0ZXhlbFNpemUueTtcXG5cXHRcXHRcXHRyZXR1cm4gKFxcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHl5LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl5eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC54eXgsIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueXl4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNELCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnh4eSwgdGV4ZWxTaXplLnkgKSwgZHAgKSArXFxuXFx0XFx0XFx0XFx0dGV4dHVyZTJEQ29tcGFyZSggc2hhZG93TWFwLCBjdWJlVG9VViggYmQzRCArIG9mZnNldC55eHksIHRleGVsU2l6ZS55ICksIGRwICkgK1xcblxcdFxcdFxcdFxcdHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QgKyBvZmZzZXQueHh4LCB0ZXhlbFNpemUueSApLCBkcCApICtcXG5cXHRcXHRcXHRcXHR0ZXh0dXJlMkRDb21wYXJlKCBzaGFkb3dNYXAsIGN1YmVUb1VWKCBiZDNEICsgb2Zmc2V0Lnl4eCwgdGV4ZWxTaXplLnkgKSwgZHAgKVxcblxcdFxcdFxcdCkgKiAoIDEuMCAvIDkuMCApO1xcblxcdFxcdCNlbHNlXFxuXFx0XFx0XFx0cmV0dXJuIHRleHR1cmUyRENvbXBhcmUoIHNoYWRvd01hcCwgY3ViZVRvVVYoIGJkM0QsIHRleGVsU2l6ZS55ICksIGRwICk7XFxuXFx0XFx0I2VuZGlmXFxuXFx0fVxcbiNlbmRpZlxcblwiLHhhPVwiI2lmZGVmIFVTRV9TSEFET1dNQVBcXG5cXHQjaWYgTlVNX0RJUl9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsU2hhZG93TWF0cml4WyBOVU1fRElSX0xJR0hUUyBdO1xcblxcdFxcdHZhcnlpbmcgdmVjNCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgTlVNX0RJUl9MSUdIVFMgXTtcXG5cXHQjZW5kaWZcXG5cXHQjaWYgTlVNX1NQT1RfTElHSFRTID4gMFxcblxcdFxcdHVuaWZvcm0gbWF0NCBzcG90U2hhZG93TWF0cml4WyBOVU1fU1BPVF9MSUdIVFMgXTtcXG5cXHRcXHR2YXJ5aW5nIHZlYzQgdlNwb3RTaGFkb3dDb29yZFsgTlVNX1NQT1RfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0XFx0dW5pZm9ybSBtYXQ0IHBvaW50U2hhZG93TWF0cml4WyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0XFx0dmFyeWluZyB2ZWM0IHZQb2ludFNoYWRvd0Nvb3JkWyBOVU1fUE9JTlRfTElHSFRTIF07XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsd2E9XCIjaWZkZWYgVVNFX1NIQURPV01BUFxcblxcdCNpZiBOVU1fRElSX0xJR0hUUyA+IDBcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHR2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdID0gZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0Zm9yICggaW50IGkgPSAwOyBpIDwgTlVNX1NQT1RfTElHSFRTOyBpICsrICkge1xcblxcdFxcdHZTcG90U2hhZG93Q29vcmRbIGkgXSA9IHNwb3RTaGFkb3dNYXRyaXhbIGkgXSAqIHdvcmxkUG9zaXRpb247XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fUE9JTlRfTElHSFRTID4gMFxcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0dlBvaW50U2hhZG93Q29vcmRbIGkgXSA9IHBvaW50U2hhZG93TWF0cml4WyBpIF0gKiB3b3JsZFBvc2l0aW9uO1xcblxcdH1cXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixFYT1cImZsb2F0IGdldFNoYWRvd01hc2soKSB7XFxuXFx0ZmxvYXQgc2hhZG93ID0gMS4wO1xcblxcdCNpZmRlZiBVU0VfU0hBRE9XTUFQXFxuXFx0I2lmIE5VTV9ESVJfTElHSFRTID4gMFxcblxcdERpcmVjdGlvbmFsTGlnaHQgZGlyZWN0aW9uYWxMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fRElSX0xJR0hUUzsgaSArKyApIHtcXG5cXHRcXHRkaXJlY3Rpb25hbExpZ2h0ID0gZGlyZWN0aW9uYWxMaWdodHNbIGkgXTtcXG5cXHRcXHRzaGFkb3cgKj0gYm9vbCggZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cgKSA/IGdldFNoYWRvdyggZGlyZWN0aW9uYWxTaGFkb3dNYXBbIGkgXSwgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3dNYXBTaXplLCBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvd0JpYXMsIGRpcmVjdGlvbmFsTGlnaHQuc2hhZG93UmFkaXVzLCB2RGlyZWN0aW9uYWxTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNpZiBOVU1fU1BPVF9MSUdIVFMgPiAwXFxuXFx0U3BvdExpZ2h0IHNwb3RMaWdodDtcXG5cXHRmb3IgKCBpbnQgaSA9IDA7IGkgPCBOVU1fU1BPVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0c3BvdExpZ2h0ID0gc3BvdExpZ2h0c1sgaSBdO1xcblxcdFxcdHNoYWRvdyAqPSBib29sKCBzcG90TGlnaHQuc2hhZG93ICkgPyBnZXRTaGFkb3coIHNwb3RTaGFkb3dNYXBbIGkgXSwgc3BvdExpZ2h0LnNoYWRvd01hcFNpemUsIHNwb3RMaWdodC5zaGFkb3dCaWFzLCBzcG90TGlnaHQuc2hhZG93UmFkaXVzLCB2U3BvdFNoYWRvd0Nvb3JkWyBpIF0gKSA6IDEuMDtcXG5cXHR9XFxuXFx0I2VuZGlmXFxuXFx0I2lmIE5VTV9QT0lOVF9MSUdIVFMgPiAwXFxuXFx0UG9pbnRMaWdodCBwb2ludExpZ2h0O1xcblxcdGZvciAoIGludCBpID0gMDsgaSA8IE5VTV9QT0lOVF9MSUdIVFM7IGkgKysgKSB7XFxuXFx0XFx0cG9pbnRMaWdodCA9IHBvaW50TGlnaHRzWyBpIF07XFxuXFx0XFx0c2hhZG93ICo9IGJvb2woIHBvaW50TGlnaHQuc2hhZG93ICkgPyBnZXRQb2ludFNoYWRvdyggcG9pbnRTaGFkb3dNYXBbIGkgXSwgcG9pbnRMaWdodC5zaGFkb3dNYXBTaXplLCBwb2ludExpZ2h0LnNoYWRvd0JpYXMsIHBvaW50TGlnaHQuc2hhZG93UmFkaXVzLCB2UG9pbnRTaGFkb3dDb29yZFsgaSBdICkgOiAxLjA7XFxuXFx0fVxcblxcdCNlbmRpZlxcblxcdCNlbmRpZlxcblxcdHJldHVybiBzaGFkb3c7XFxufVxcblwiLFNhPVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdG1hdDQgYm9uZU1hdFggPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueCApO1xcblxcdG1hdDQgYm9uZU1hdFkgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueSApO1xcblxcdG1hdDQgYm9uZU1hdFogPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgueiApO1xcblxcdG1hdDQgYm9uZU1hdFcgPSBnZXRCb25lTWF0cml4KCBza2luSW5kZXgudyApO1xcbiNlbmRpZlwiLE1hPVwiI2lmZGVmIFVTRV9TS0lOTklOR1xcblxcdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4O1xcblxcdHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4SW52ZXJzZTtcXG5cXHQjaWZkZWYgQk9ORV9URVhUVVJFXFxuXFx0XFx0dW5pZm9ybSBzYW1wbGVyMkQgYm9uZVRleHR1cmU7XFxuXFx0XFx0dW5pZm9ybSBpbnQgYm9uZVRleHR1cmVTaXplO1xcblxcdFxcdG1hdDQgZ2V0Qm9uZU1hdHJpeCggY29uc3QgaW4gZmxvYXQgaSApIHtcXG5cXHRcXHRcXHRmbG9hdCBqID0gaSAqIDQuMDtcXG5cXHRcXHRcXHRmbG9hdCB4ID0gbW9kKCBqLCBmbG9hdCggYm9uZVRleHR1cmVTaXplICkgKTtcXG5cXHRcXHRcXHRmbG9hdCB5ID0gZmxvb3IoIGogLyBmbG9hdCggYm9uZVRleHR1cmVTaXplICkgKTtcXG5cXHRcXHRcXHRmbG9hdCBkeCA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKTtcXG5cXHRcXHRcXHRmbG9hdCBkeSA9IDEuMCAvIGZsb2F0KCBib25lVGV4dHVyZVNpemUgKTtcXG5cXHRcXHRcXHR5ID0gZHkgKiAoIHkgKyAwLjUgKTtcXG5cXHRcXHRcXHR2ZWM0IHYxID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAwLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0dmVjNCB2MiA9IHRleHR1cmUyRCggYm9uZVRleHR1cmUsIHZlYzIoIGR4ICogKCB4ICsgMS41ICksIHkgKSApO1xcblxcdFxcdFxcdHZlYzQgdjMgPSB0ZXh0dXJlMkQoIGJvbmVUZXh0dXJlLCB2ZWMyKCBkeCAqICggeCArIDIuNSApLCB5ICkgKTtcXG5cXHRcXHRcXHR2ZWM0IHY0ID0gdGV4dHVyZTJEKCBib25lVGV4dHVyZSwgdmVjMiggZHggKiAoIHggKyAzLjUgKSwgeSApICk7XFxuXFx0XFx0XFx0bWF0NCBib25lID0gbWF0NCggdjEsIHYyLCB2MywgdjQgKTtcXG5cXHRcXHRcXHRyZXR1cm4gYm9uZTtcXG5cXHRcXHR9XFxuXFx0I2Vsc2VcXG5cXHRcXHR1bmlmb3JtIG1hdDQgYm9uZU1hdHJpY2VzWyBNQVhfQk9ORVMgXTtcXG5cXHRcXHRtYXQ0IGdldEJvbmVNYXRyaXgoIGNvbnN0IGluIGZsb2F0IGkgKSB7XFxuXFx0XFx0XFx0bWF0NCBib25lID0gYm9uZU1hdHJpY2VzWyBpbnQoaSkgXTtcXG5cXHRcXHRcXHRyZXR1cm4gYm9uZTtcXG5cXHRcXHR9XFxuXFx0I2VuZGlmXFxuI2VuZGlmXFxuXCIsQ2E9XCIjaWZkZWYgVVNFX1NLSU5OSU5HXFxuXFx0dmVjNCBza2luVmVydGV4ID0gYmluZE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHR2ZWM0IHNraW5uZWQgPSB2ZWM0KCAwLjAgKTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRYICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueDtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRaICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQuejtcXG5cXHRza2lubmVkICs9IGJvbmVNYXRXICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQudztcXG5cXHRza2lubmVkICA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZDtcXG4jZW5kaWZcXG5cIixJYT1cIiNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRtYXQ0IHNraW5NYXRyaXggPSBtYXQ0KCAwLjAgKTtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xcblxcdHNraW5NYXRyaXggKz0gc2tpbldlaWdodC55ICogYm9uZU1hdFk7XFxuXFx0c2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnogKiBib25lTWF0WjtcXG5cXHRza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xcblxcdHNraW5NYXRyaXggID0gYmluZE1hdHJpeEludmVyc2UgKiBza2luTWF0cml4ICogYmluZE1hdHJpeDtcXG5cXHRvYmplY3ROb3JtYWwgPSB2ZWM0KCBza2luTWF0cml4ICogdmVjNCggb2JqZWN0Tm9ybWFsLCAwLjAgKSApLnh5ejtcXG4jZW5kaWZcXG5cIixPYT1cImZsb2F0IHNwZWN1bGFyU3RyZW5ndGg7XFxuI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApO1xcblxcdHNwZWN1bGFyU3RyZW5ndGggPSB0ZXhlbFNwZWN1bGFyLnI7XFxuI2Vsc2VcXG5cXHRzcGVjdWxhclN0cmVuZ3RoID0gMS4wO1xcbiNlbmRpZlwiLFRhPVwiI2lmZGVmIFVTRV9TUEVDVUxBUk1BUFxcblxcdHVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1xcbiNlbmRpZlwiLFBhPVwiI2lmIGRlZmluZWQoIFRPTkVfTUFQUElORyApXFxuICBnbF9GcmFnQ29sb3IucmdiID0gdG9uZU1hcHBpbmcoIGdsX0ZyYWdDb2xvci5yZ2IgKTtcXG4jZW5kaWZcXG5cIixBYT1cIiNkZWZpbmUgc2F0dXJhdGUoYSkgY2xhbXAoIGEsIDAuMCwgMS4wIClcXG51bmlmb3JtIGZsb2F0IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxudW5pZm9ybSBmbG9hdCB0b25lTWFwcGluZ1doaXRlUG9pbnQ7XFxudmVjMyBMaW5lYXJUb25lTWFwcGluZyggdmVjMyBjb2xvciApIHtcXG5cXHRyZXR1cm4gdG9uZU1hcHBpbmdFeHBvc3VyZSAqIGNvbG9yO1xcbn1cXG52ZWMzIFJlaW5oYXJkVG9uZU1hcHBpbmcoIHZlYzMgY29sb3IgKSB7XFxuXFx0Y29sb3IgKj0gdG9uZU1hcHBpbmdFeHBvc3VyZTtcXG5cXHRyZXR1cm4gc2F0dXJhdGUoIGNvbG9yIC8gKCB2ZWMzKCAxLjAgKSArIGNvbG9yICkgKTtcXG59XFxuI2RlZmluZSBVbmNoYXJ0ZWQySGVscGVyKCB4ICkgbWF4KCAoICggeCAqICggMC4xNSAqIHggKyAwLjEwICogMC41MCApICsgMC4yMCAqIDAuMDIgKSAvICggeCAqICggMC4xNSAqIHggKyAwLjUwICkgKyAwLjIwICogMC4zMCApICkgLSAwLjAyIC8gMC4zMCwgdmVjMyggMC4wICkgKVxcbnZlYzMgVW5jaGFydGVkMlRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0cmV0dXJuIHNhdHVyYXRlKCBVbmNoYXJ0ZWQySGVscGVyKCBjb2xvciApIC8gVW5jaGFydGVkMkhlbHBlciggdmVjMyggdG9uZU1hcHBpbmdXaGl0ZVBvaW50ICkgKSApO1xcbn1cXG52ZWMzIE9wdGltaXplZENpbmVvblRvbmVNYXBwaW5nKCB2ZWMzIGNvbG9yICkge1xcblxcdGNvbG9yICo9IHRvbmVNYXBwaW5nRXhwb3N1cmU7XFxuXFx0Y29sb3IgPSBtYXgoIHZlYzMoIDAuMCApLCBjb2xvciAtIDAuMDA0ICk7XFxuXFx0cmV0dXJuIHBvdyggKCBjb2xvciAqICggNi4yICogY29sb3IgKyAwLjUgKSApIC8gKCBjb2xvciAqICggNi4yICogY29sb3IgKyAxLjcgKSArIDAuMDYgKSwgdmVjMyggMi4yICkgKTtcXG59XFxuXCIsTGE9XCIjaWYgZGVmaW5lZCggVVNFX01BUCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApIHx8IGRlZmluZWQoIFVTRV9TUEVDVUxBUk1BUCApIHx8IGRlZmluZWQoIFVTRV9BTFBIQU1BUCApIHx8IGRlZmluZWQoIFVTRV9FTUlTU0lWRU1BUCApIHx8IGRlZmluZWQoIFVTRV9ST1VHSE5FU1NNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTUVUQUxORVNTTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2O1xcbiNlbmRpZlwiLE5hPVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dmFyeWluZyB2ZWMyIHZVdjtcXG5cXHR1bmlmb3JtIHZlYzQgb2Zmc2V0UmVwZWF0O1xcbiNlbmRpZlxcblwiLGthPVwiI2lmIGRlZmluZWQoIFVTRV9NQVAgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKSB8fCBkZWZpbmVkKCBVU0VfU1BFQ1VMQVJNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQUxQSEFNQVAgKSB8fCBkZWZpbmVkKCBVU0VfRU1JU1NJVkVNQVAgKSB8fCBkZWZpbmVkKCBVU0VfUk9VR0hORVNTTUFQICkgfHwgZGVmaW5lZCggVVNFX01FVEFMTkVTU01BUCApXFxuXFx0dlV2ID0gdXYgKiBvZmZzZXRSZXBlYXQuencgKyBvZmZzZXRSZXBlYXQueHk7XFxuI2VuZGlmXCIsUmE9XCIjaWYgZGVmaW5lZCggVVNFX0xJR0hUTUFQICkgfHwgZGVmaW5lZCggVVNFX0FPTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIixEYT1cIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdGF0dHJpYnV0ZSB2ZWMyIHV2MjtcXG5cXHR2YXJ5aW5nIHZlYzIgdlV2MjtcXG4jZW5kaWZcIixGYT1cIiNpZiBkZWZpbmVkKCBVU0VfTElHSFRNQVAgKSB8fCBkZWZpbmVkKCBVU0VfQU9NQVAgKVxcblxcdHZVdjIgPSB1djI7XFxuI2VuZGlmXCIsQmE9XCIjaWYgZGVmaW5lZCggVVNFX0VOVk1BUCApIHx8IGRlZmluZWQoIFBIT05HICkgfHwgZGVmaW5lZCggUEhZU0lDQUwgKSB8fCBkZWZpbmVkKCBMQU1CRVJUICkgfHwgZGVmaW5lZCAoIFVTRV9TSEFET1dNQVAgKVxcblxcdCNpZmRlZiBVU0VfU0tJTk5JTkdcXG5cXHRcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHNraW5uZWQ7XFxuXFx0I2Vsc2VcXG5cXHRcXHR2ZWM0IHdvcmxkUG9zaXRpb24gPSBtb2RlbE1hdHJpeCAqIHZlYzQoIHRyYW5zZm9ybWVkLCAxLjAgKTtcXG5cXHQjZW5kaWZcXG4jZW5kaWZcXG5cIixqYT1cInVuaWZvcm0gc2FtcGxlckN1YmUgdEN1YmU7XFxudW5pZm9ybSBmbG9hdCB0RmxpcDtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxudm9pZCBtYWluKCkge1xcblxcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmVDdWJlKCB0Q3ViZSwgdmVjMyggdEZsaXAgKiB2V29ybGRQb3NpdGlvbi54LCB2V29ybGRQb3NpdGlvbi55eiApICk7XFxuXFx0Z2xfRnJhZ0NvbG9yLmEgKj0gb3BhY2l0eTtcXG59XFxuXCIsVWE9XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkUG9zaXRpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cXG5cIix6YT1cIiNpZiBERVBUSF9QQUNLSU5HID09IDMyMDBcXG5cXHR1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggMS4wICk7XFxuXFx0I2lmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMFxcblxcdFxcdGRpZmZ1c2VDb2xvci5hID0gb3BhY2l0eTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaWYgREVQVEhfUEFDS0lORyA9PSAzMjAwXFxuXFx0XFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggZ2xfRnJhZ0Nvb3JkLnogKSwgb3BhY2l0eSApO1xcblxcdCNlbGlmIERFUFRIX1BBQ0tJTkcgPT0gMzIwMVxcblxcdFxcdGdsX0ZyYWdDb2xvciA9IHBhY2tEZXB0aFRvUkdCQSggZ2xfRnJhZ0Nvb3JkLnogKTtcXG5cXHQjZW5kaWZcXG59XFxuXCIsR2E9XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxtb3JwaHRhcmdldF9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG59XFxuXCIsVmE9XCJ1bmlmb3JtIHZlYzMgbGlnaHRQb3M7XFxudmFyeWluZyB2ZWM0IHZXb3JsZFBvc2l0aW9uO1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbiAoKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHRnbF9GcmFnQ29sb3IgPSBwYWNrRGVwdGhUb1JHQkEoIGxlbmd0aCggdldvcmxkUG9zaXRpb24ueHl6IC0gbGlnaHRQb3MueHl6ICkgLyAxMDAwLjAgKTtcXG59XFxuXCIsWGE9XCJ2YXJ5aW5nIHZlYzQgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8bW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2luX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGh0YXJnZXRfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFx0dldvcmxkUG9zaXRpb24gPSB3b3JsZFBvc2l0aW9uO1xcbn1cXG5cIixIYT1cInVuaWZvcm0gc2FtcGxlcjJEIHRFcXVpcmVjdDtcXG51bmlmb3JtIGZsb2F0IHRGbGlwO1xcbnZhcnlpbmcgdmVjMyB2V29ybGRQb3NpdGlvbjtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbnZvaWQgbWFpbigpIHtcXG5cXHR2ZWMzIGRpcmVjdGlvbiA9IG5vcm1hbGl6ZSggdldvcmxkUG9zaXRpb24gKTtcXG5cXHR2ZWMyIHNhbXBsZVVWO1xcblxcdHNhbXBsZVVWLnkgPSBzYXR1cmF0ZSggdEZsaXAgKiBkaXJlY3Rpb24ueSAqIC0wLjUgKyAwLjUgKTtcXG5cXHRzYW1wbGVVVi54ID0gYXRhbiggZGlyZWN0aW9uLnosIGRpcmVjdGlvbi54ICkgKiBSRUNJUFJPQ0FMX1BJMiArIDAuNTtcXG5cXHRnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoIHRFcXVpcmVjdCwgc2FtcGxlVVYgKTtcXG59XFxuXCIscWE9XCJ2YXJ5aW5nIHZlYzMgdldvcmxkUG9zaXRpb247XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG52b2lkIG1haW4oKSB7XFxuXFx0dldvcmxkUG9zaXRpb24gPSB0cmFuc2Zvcm1EaXJlY3Rpb24oIHBvc2l0aW9uLCBtb2RlbE1hdHJpeCApO1xcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4Plxcbn1cXG5cIixZYT1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG51bmlmb3JtIGZsb2F0IGRhc2hTaXplO1xcbnVuaWZvcm0gZmxvYXQgdG90YWxTaXplO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxmb2dfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0aWYgKCBtb2QoIHZMaW5lRGlzdGFuY2UsIHRvdGFsU2l6ZSApID4gZGFzaFNpemUgKSB7XFxuXFx0XFx0ZGlzY2FyZDtcXG5cXHR9XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gdmVjMyggMC4wICk7XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLFdhPVwidW5pZm9ybSBmbG9hdCBzY2FsZTtcXG5hdHRyaWJ1dGUgZmxvYXQgbGluZURpc3RhbmNlO1xcbnZhcnlpbmcgZmxvYXQgdkxpbmVEaXN0YW5jZTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdHZMaW5lRGlzdGFuY2UgPSBzY2FsZSAqIGxpbmVEaXN0YW5jZTtcXG5cXHR2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7XFxuXFx0Z2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbXZQb3NpdGlvbjtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixaYT1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNwZWN1bGFybWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX2ZyYWdtZW50PlxcblxcdHZlYzQgZGlmZnVzZUNvbG9yID0gdmVjNCggZGlmZnVzZSwgb3BhY2l0eSApO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHQjaWZkZWYgVVNFX0xJR0hUTUFQXFxuXFx0XFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICs9IHRleHR1cmUyRCggbGlnaHRNYXAsIHZVdjIgKS54eXogKiBsaWdodE1hcEludGVuc2l0eTtcXG5cXHQjZWxzZVxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArPSB2ZWMzKCAxLjAgKTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IGRpZmZ1c2VDb2xvci5yZ2I7XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlO1xcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHRvbmVtYXBwaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbmNvZGluZ3NfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGZvZ19mcmFnbWVudD5cXG59XFxuXCIsSmE9XCIjaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPHV2X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8dXYyX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2lmZGVmIFVTRV9FTlZNQVBcXG5cXHQjaW5jbHVkZSA8YmVnaW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaG5vcm1hbF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixLYT1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxudmFyeWluZyB2ZWMzIHZMaWdodEZyb250O1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG5cXHR2YXJ5aW5nIHZlYzMgdkxpZ2h0QmFjaztcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDx1djJfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFscGhhbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGFvbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGVudm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFza19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHRSZWZsZWN0ZWRMaWdodCByZWZsZWN0ZWRMaWdodCA9IFJlZmxlY3RlZExpZ2h0KCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSApO1xcblxcdHZlYzMgdG90YWxFbWlzc2l2ZVJhZGlhbmNlID0gZW1pc3NpdmU7XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGNvbG9yX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxhbHBoYW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGF0ZXN0X2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxzcGVjdWxhcm1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW1pc3NpdmVtYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlID0gZ2V0QW1iaWVudExpZ2h0SXJyYWRpYW5jZSggYW1iaWVudExpZ2h0Q29sb3IgKTtcXG5cXHQjaW5jbHVkZSA8bGlnaHRtYXBfZnJhZ21lbnQ+XFxuXFx0cmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICo9IEJSREZfRGlmZnVzZV9MYW1iZXJ0KCBkaWZmdXNlQ29sb3IucmdiICk7XFxuXFx0I2lmZGVmIERPVUJMRV9TSURFRFxcblxcdFxcdHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgPSAoIGdsX0Zyb250RmFjaW5nICkgPyB2TGlnaHRGcm9udCA6IHZMaWdodEJhY2s7XFxuXFx0I2Vsc2VcXG5cXHRcXHRyZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlID0gdkxpZ2h0RnJvbnQ7XFxuXFx0I2VuZGlmXFxuXFx0cmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSAqPSBCUkRGX0RpZmZ1c2VfTGFtYmVydCggZGlmZnVzZUNvbG9yLnJnYiApICogZ2V0U2hhZG93TWFzaygpO1xcblxcdCNpbmNsdWRlIDxhb21hcF9mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSByZWZsZWN0ZWRMaWdodC5kaXJlY3REaWZmdXNlICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3REaWZmdXNlICsgdG90YWxFbWlzc2l2ZVJhZGlhbmNlO1xcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIixRYT1cIiNkZWZpbmUgTEFNQkVSVFxcbnZhcnlpbmcgdmVjMyB2TGlnaHRGcm9udDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZMaWdodEJhY2s7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfbGFtYmVydF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLCRhPVwiI2RlZmluZSBQSE9OR1xcbnVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2l2ZTtcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXI7XFxudW5pZm9ybSBmbG9hdCBzaGluaW5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2X3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YWxwaGFtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YW9tYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bGlnaHRtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW1pc3NpdmVtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8ZW52bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGdyYWRpZW50bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxic2Rmcz5cXG4jaW5jbHVkZSA8bGlnaHRzX3BhcnM+XFxuI2luY2x1ZGUgPGxpZ2h0c19waG9uZ19wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxzaGFkb3dtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8YnVtcG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxub3JtYWxtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c3BlY3VsYXJtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mbGlwPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVtaXNzaXZlbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfcGhvbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGxpZ2h0c190ZW1wbGF0ZT5cXG5cXHQjaW5jbHVkZSA8YW9tYXBfZnJhZ21lbnQ+XFxuXFx0dmVjMyBvdXRnb2luZ0xpZ2h0ID0gcmVmbGVjdGVkTGlnaHQuZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0RGlmZnVzZSArIHJlZmxlY3RlZExpZ2h0LmRpcmVjdFNwZWN1bGFyICsgcmVmbGVjdGVkTGlnaHQuaW5kaXJlY3RTcGVjdWxhciArIHRvdGFsRW1pc3NpdmVSYWRpYW5jZTtcXG5cXHQjaW5jbHVkZSA8ZW52bWFwX2ZyYWdtZW50PlxcblxcdGdsX0ZyYWdDb2xvciA9IHZlYzQoIG91dGdvaW5nTGlnaHQsIGRpZmZ1c2VDb2xvci5hICk7XFxuXFx0I2luY2x1ZGUgPGRpdGhlcmluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8cHJlbXVsdGlwbGllZF9hbHBoYV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8dG9uZW1hcHBpbmdfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGVuY29kaW5nc19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Zm9nX2ZyYWdtZW50Plxcbn1cXG5cIix0cz1cIiNkZWZpbmUgUEhPTkdcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8dXZfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPHV2Ml9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8ZGlzcGxhY2VtZW50bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxlbnZtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixlcz1cIiNkZWZpbmUgUEhZU0lDQUxcXG51bmlmb3JtIHZlYzMgZGlmZnVzZTtcXG51bmlmb3JtIHZlYzMgZW1pc3NpdmU7XFxudW5pZm9ybSBmbG9hdCByb3VnaG5lc3M7XFxudW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7XFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZm5kZWYgU1RBTkRBUkRcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyQ29hdDtcXG5cXHR1bmlmb3JtIGZsb2F0IGNsZWFyQ29hdFJvdWdobmVzcztcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8cGFja2luZz5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxhb21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsaWdodG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxlbnZtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxjdWJlX3V2X3JlZmxlY3Rpb25fZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGxpZ2h0c19wYXJzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPGJ1bXBtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bm9ybWFsbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQ+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFx0dmVjNCBkaWZmdXNlQ29sb3IgPSB2ZWM0KCBkaWZmdXNlLCBvcGFjaXR5ICk7XFxuXFx0UmVmbGVjdGVkTGlnaHQgcmVmbGVjdGVkTGlnaHQgPSBSZWZsZWN0ZWRMaWdodCggdmVjMyggMC4wICksIHZlYzMoIDAuMCApLCB2ZWMzKCAwLjAgKSwgdmVjMyggMC4wICkgKTtcXG5cXHR2ZWMzIHRvdGFsRW1pc3NpdmVSYWRpYW5jZSA9IGVtaXNzaXZlO1xcblxcdCNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxjb2xvcl9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8YWxwaGFtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8c3BlY3VsYXJtYXBfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPHJvdWdobmVzc21hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZmxpcD5cXG5cXHQjaW5jbHVkZSA8bm9ybWFsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxlbWlzc2l2ZW1hcF9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxsaWdodHNfdGVtcGxhdGU+XFxuXFx0I2luY2x1ZGUgPGFvbWFwX2ZyYWdtZW50PlxcblxcdHZlYzMgb3V0Z29pbmdMaWdodCA9IHJlZmxlY3RlZExpZ2h0LmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5pbmRpcmVjdERpZmZ1c2UgKyByZWZsZWN0ZWRMaWdodC5kaXJlY3RTcGVjdWxhciArIHJlZmxlY3RlZExpZ2h0LmluZGlyZWN0U3BlY3VsYXIgKyB0b3RhbEVtaXNzaXZlUmFkaWFuY2U7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodCwgZGlmZnVzZUNvbG9yLmEgKTtcXG5cXHQjaW5jbHVkZSA8ZGl0aGVyaW5nX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLG5zPVwiI2RlZmluZSBQSFlTSUNBTFxcbnZhcnlpbmcgdmVjMyB2Vmlld1Bvc2l0aW9uO1xcbiNpZm5kZWYgRkxBVF9TSEFERURcXG5cXHR2YXJ5aW5nIHZlYzMgdk5vcm1hbDtcXG4jZW5kaWZcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDx1dl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8dXYyX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGNvbG9yX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxmb2dfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8dXZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx1djJfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjb2xvcl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3ZlcnRleD5cXG5cXHR2Vmlld1Bvc2l0aW9uID0gLSBtdlBvc2l0aW9uLnh5ejtcXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxmb2dfdmVydGV4Plxcbn1cXG5cIixpcz1cIiNkZWZpbmUgTk9STUFMXFxudW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpZiBkZWZpbmVkKCBGTEFUX1NIQURFRCApIHx8IGRlZmluZWQoIFVTRV9CVU1QTUFQICkgfHwgZGVmaW5lZCggVVNFX05PUk1BTE1BUCApXFxuXFx0dmFyeWluZyB2ZWMzIHZWaWV3UG9zaXRpb247XFxuI2VuZGlmXFxuI2lmbmRlZiBGTEFUX1NIQURFRFxcblxcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xcbiNlbmRpZlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDx1dl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxidW1wbWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPG5vcm1hbG1hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG5vcm1hbF9mbGlwPlxcblxcdCNpbmNsdWRlIDxub3JtYWxfZnJhZ21lbnQ+XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggcGFja05vcm1hbFRvUkdCKCBub3JtYWwgKSwgb3BhY2l0eSApO1xcbn1cXG5cIixycz1cIiNkZWZpbmUgTk9STUFMXFxuI2lmIGRlZmluZWQoIEZMQVRfU0hBREVEICkgfHwgZGVmaW5lZCggVVNFX0JVTVBNQVAgKSB8fCBkZWZpbmVkKCBVU0VfTk9STUFMTUFQIClcXG5cXHR2YXJ5aW5nIHZlYzMgdlZpZXdQb3NpdGlvbjtcXG4jZW5kaWZcXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dmFyeWluZyB2ZWMzIHZOb3JtYWw7XFxuI2VuZGlmXFxuI2luY2x1ZGUgPHV2X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPG1vcnBodGFyZ2V0X3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8bG9nZGVwdGhidWZfcGFyc192ZXJ0ZXg+XFxudm9pZCBtYWluKCkge1xcblxcdCNpbmNsdWRlIDx1dl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGJlZ2lubm9ybWFsX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8bW9ycGhub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5ub3JtYWxfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkZWZhdWx0bm9ybWFsX3ZlcnRleD5cXG4jaWZuZGVmIEZMQVRfU0hBREVEXFxuXFx0dk5vcm1hbCA9IG5vcm1hbGl6ZSggdHJhbnNmb3JtZWROb3JtYWwgKTtcXG4jZW5kaWZcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxkaXNwbGFjZW1lbnRtYXBfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxtb3JwaHRhcmdldF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGxvZ2RlcHRoYnVmX3ZlcnRleD5cXG4jaWYgZGVmaW5lZCggRkxBVF9TSEFERUQgKSB8fCBkZWZpbmVkKCBVU0VfQlVNUE1BUCApIHx8IGRlZmluZWQoIFVTRV9OT1JNQUxNQVAgKVxcblxcdHZWaWV3UG9zaXRpb24gPSAtIG12UG9zaXRpb24ueHl6O1xcbiNlbmRpZlxcbn1cXG5cIixvcz1cInVuaWZvcm0gdmVjMyBkaWZmdXNlO1xcbnVuaWZvcm0gZmxvYXQgb3BhY2l0eTtcXG4jaW5jbHVkZSA8Y29tbW9uPlxcbiNpbmNsdWRlIDxwYWNraW5nPlxcbiNpbmNsdWRlIDxjb2xvcl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxtYXBfcGFydGljbGVfcGFyc19mcmFnbWVudD5cXG4jaW5jbHVkZSA8Zm9nX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hcF9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50PlxcbiNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0I2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXHR2ZWMzIG91dGdvaW5nTGlnaHQgPSB2ZWMzKCAwLjAgKTtcXG5cXHR2ZWM0IGRpZmZ1c2VDb2xvciA9IHZlYzQoIGRpZmZ1c2UsIG9wYWNpdHkgKTtcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPG1hcF9wYXJ0aWNsZV9mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8Y29sb3JfZnJhZ21lbnQ+XFxuXFx0I2luY2x1ZGUgPGFscGhhdGVzdF9mcmFnbWVudD5cXG5cXHRvdXRnb2luZ0xpZ2h0ID0gZGlmZnVzZUNvbG9yLnJnYjtcXG5cXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KCBvdXRnb2luZ0xpZ2h0LCBkaWZmdXNlQ29sb3IuYSApO1xcblxcdCNpbmNsdWRlIDxwcmVtdWx0aXBsaWVkX2FscGhhX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDx0b25lbWFwcGluZ19mcmFnbWVudD5cXG5cXHQjaW5jbHVkZSA8ZW5jb2RpbmdzX2ZyYWdtZW50PlxcblxcdCNpbmNsdWRlIDxmb2dfZnJhZ21lbnQ+XFxufVxcblwiLGFzPVwidW5pZm9ybSBmbG9hdCBzaXplO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGU7XFxuI2luY2x1ZGUgPGNvbW1vbj5cXG4jaW5jbHVkZSA8Y29sb3JfcGFyc192ZXJ0ZXg+XFxuI2luY2x1ZGUgPGZvZ19wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbiNpbmNsdWRlIDxsb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleD5cXG4jaW5jbHVkZSA8Y2xpcHBpbmdfcGxhbmVzX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8Y29sb3JfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHByb2plY3RfdmVydGV4PlxcblxcdCNpZmRlZiBVU0VfU0laRUFUVEVOVUFUSU9OXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZSAqICggc2NhbGUgLyAtIG12UG9zaXRpb24ueiApO1xcblxcdCNlbHNlXFxuXFx0XFx0Z2xfUG9pbnRTaXplID0gc2l6ZTtcXG5cXHQjZW5kaWZcXG5cXHQjaW5jbHVkZSA8bG9nZGVwdGhidWZfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcdCNpbmNsdWRlIDx3b3JsZHBvc192ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPHNoYWRvd21hcF92ZXJ0ZXg+XFxuXFx0I2luY2x1ZGUgPGZvZ192ZXJ0ZXg+XFxufVxcblwiLHNzPVwidW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiNpbmNsdWRlIDxjb21tb24+XFxuI2luY2x1ZGUgPHBhY2tpbmc+XFxuI2luY2x1ZGUgPGJzZGZzPlxcbiNpbmNsdWRlIDxsaWdodHNfcGFycz5cXG4jaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfZnJhZ21lbnQ+XFxuI2luY2x1ZGUgPHNoYWRvd21hc2tfcGFyc19mcmFnbWVudD5cXG52b2lkIG1haW4oKSB7XFxuXFx0Z2xfRnJhZ0NvbG9yID0gdmVjNCggMC4wLCAwLjAsIDAuMCwgb3BhY2l0eSAqICggMS4wIC0gZ2V0U2hhZG93TWFzaygpICkgKTtcXG59XFxuXCIsdXM9XCIjaW5jbHVkZSA8c2hhZG93bWFwX3BhcnNfdmVydGV4PlxcbnZvaWQgbWFpbigpIHtcXG5cXHQjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcdCNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG5cXHQjaW5jbHVkZSA8d29ybGRwb3NfdmVydGV4PlxcblxcdCNpbmNsdWRlIDxzaGFkb3dtYXBfdmVydGV4Plxcbn1cXG5cIixscz17XG5hbHBoYW1hcF9mcmFnbWVudDphbyxhbHBoYW1hcF9wYXJzX2ZyYWdtZW50OnNvLGFscGhhdGVzdF9mcmFnbWVudDp1byxhb21hcF9mcmFnbWVudDpsbyxhb21hcF9wYXJzX2ZyYWdtZW50OmNvLGJlZ2luX3ZlcnRleDpobyxiZWdpbm5vcm1hbF92ZXJ0ZXg6Zm8sYnNkZnM6cG8sYnVtcG1hcF9wYXJzX2ZyYWdtZW50OmdvLGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudDp2byxjbGlwcGluZ19wbGFuZXNfcGFyc19mcmFnbWVudDptbyxjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXg6eW8sY2xpcHBpbmdfcGxhbmVzX3ZlcnRleDpfbyxjb2xvcl9mcmFnbWVudDpibyxjb2xvcl9wYXJzX2ZyYWdtZW50OnhvLGNvbG9yX3BhcnNfdmVydGV4OndvLGNvbG9yX3ZlcnRleDpFbyxjb21tb246U28sY3ViZV91dl9yZWZsZWN0aW9uX2ZyYWdtZW50Ok1vLGRlZmF1bHRub3JtYWxfdmVydGV4OkNvLGRpc3BsYWNlbWVudG1hcF9wYXJzX3ZlcnRleDpJbyxkaXNwbGFjZW1lbnRtYXBfdmVydGV4Ok9vLGVtaXNzaXZlbWFwX2ZyYWdtZW50OlRvLGVtaXNzaXZlbWFwX3BhcnNfZnJhZ21lbnQ6UG8sZW5jb2RpbmdzX2ZyYWdtZW50OkFvLGVuY29kaW5nc19wYXJzX2ZyYWdtZW50OkxvLGVudm1hcF9mcmFnbWVudDpObyxlbnZtYXBfcGFyc19mcmFnbWVudDprbyxlbnZtYXBfcGFyc192ZXJ0ZXg6Um8sZW52bWFwX3ZlcnRleDpEbyxmb2dfdmVydGV4OkZvLGZvZ19wYXJzX3ZlcnRleDpCbyxmb2dfZnJhZ21lbnQ6am8sZm9nX3BhcnNfZnJhZ21lbnQ6VW8sZ3JhZGllbnRtYXBfcGFyc19mcmFnbWVudDp6byxsaWdodG1hcF9mcmFnbWVudDpHbyxsaWdodG1hcF9wYXJzX2ZyYWdtZW50OlZvLGxpZ2h0c19sYW1iZXJ0X3ZlcnRleDpYbyxsaWdodHNfcGFyczpIbyxsaWdodHNfcGhvbmdfZnJhZ21lbnQ6cW8sbGlnaHRzX3Bob25nX3BhcnNfZnJhZ21lbnQ6WW8sbGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50OldvLGxpZ2h0c19waHlzaWNhbF9wYXJzX2ZyYWdtZW50OlpvLGxpZ2h0c190ZW1wbGF0ZTpKbyxsb2dkZXB0aGJ1Zl9mcmFnbWVudDpLbyxsb2dkZXB0aGJ1Zl9wYXJzX2ZyYWdtZW50OlFvLGxvZ2RlcHRoYnVmX3BhcnNfdmVydGV4OiRvLGxvZ2RlcHRoYnVmX3ZlcnRleDp0YSxtYXBfZnJhZ21lbnQ6ZWEsbWFwX3BhcnNfZnJhZ21lbnQ6bmEsbWFwX3BhcnRpY2xlX2ZyYWdtZW50OmlhLG1hcF9wYXJ0aWNsZV9wYXJzX2ZyYWdtZW50OnJhLG1ldGFsbmVzc21hcF9mcmFnbWVudDpvYSxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudDphYSxtb3JwaG5vcm1hbF92ZXJ0ZXg6c2EsbW9ycGh0YXJnZXRfcGFyc192ZXJ0ZXg6dWEsbW9ycGh0YXJnZXRfdmVydGV4OmxhLG5vcm1hbF9mbGlwOmNhLG5vcm1hbF9mcmFnbWVudDpoYSxub3JtYWxtYXBfcGFyc19mcmFnbWVudDpmYSxwYWNraW5nOmRhLHByZW11bHRpcGxpZWRfYWxwaGFfZnJhZ21lbnQ6cGEscHJvamVjdF92ZXJ0ZXg6Z2EsZGl0aGVyaW5nX2ZyYWdtZW50OnZhLGRpdGhlcmluZ19wYXJzX2ZyYWdtZW50Om1hLHJvdWdobmVzc21hcF9mcmFnbWVudDp5YSxyb3VnaG5lc3NtYXBfcGFyc19mcmFnbWVudDpfYSxzaGFkb3dtYXBfcGFyc19mcmFnbWVudDpiYSxzaGFkb3dtYXBfcGFyc192ZXJ0ZXg6eGEsc2hhZG93bWFwX3ZlcnRleDp3YSxzaGFkb3dtYXNrX3BhcnNfZnJhZ21lbnQ6RWEsc2tpbmJhc2VfdmVydGV4OlNhLHNraW5uaW5nX3BhcnNfdmVydGV4Ok1hLHNraW5uaW5nX3ZlcnRleDpDYSxza2lubm9ybWFsX3ZlcnRleDpJYSxzcGVjdWxhcm1hcF9mcmFnbWVudDpPYSxzcGVjdWxhcm1hcF9wYXJzX2ZyYWdtZW50OlRhLHRvbmVtYXBwaW5nX2ZyYWdtZW50OlBhLHRvbmVtYXBwaW5nX3BhcnNfZnJhZ21lbnQ6QWEsdXZfcGFyc19mcmFnbWVudDpMYSx1dl9wYXJzX3ZlcnRleDpOYSx1dl92ZXJ0ZXg6a2EsdXYyX3BhcnNfZnJhZ21lbnQ6UmEsdXYyX3BhcnNfdmVydGV4OkRhLHV2Ml92ZXJ0ZXg6RmEsd29ybGRwb3NfdmVydGV4OkJhLGN1YmVfZnJhZzpqYSxjdWJlX3ZlcnQ6VWEsZGVwdGhfZnJhZzp6YSxkZXB0aF92ZXJ0OkdhLGRpc3RhbmNlUkdCQV9mcmFnOlZhLGRpc3RhbmNlUkdCQV92ZXJ0OlhhLGVxdWlyZWN0X2ZyYWc6SGEsZXF1aXJlY3RfdmVydDpxYSxsaW5lZGFzaGVkX2ZyYWc6WWEsbGluZWRhc2hlZF92ZXJ0OldhLG1lc2hiYXNpY19mcmFnOlphLG1lc2hiYXNpY192ZXJ0OkphLG1lc2hsYW1iZXJ0X2ZyYWc6S2EsbWVzaGxhbWJlcnRfdmVydDpRYSxtZXNocGhvbmdfZnJhZzokYSxtZXNocGhvbmdfdmVydDp0cyxtZXNocGh5c2ljYWxfZnJhZzplcyxtZXNocGh5c2ljYWxfdmVydDpucyxub3JtYWxfZnJhZzppcyxub3JtYWxfdmVydDpycyxwb2ludHNfZnJhZzpvcyxwb2ludHNfdmVydDphcyxzaGFkb3dfZnJhZzpzcyxzaGFkb3dfdmVydDp1c30sY3M9e2Jhc2ljOnt1bmlmb3Jtczpvby5tZXJnZShbcm8uY29tbW9uLHJvLmFvbWFwLHJvLmxpZ2h0bWFwLHJvLmZvZ10pLHZlcnRleFNoYWRlcjpscy5tZXNoYmFzaWNfdmVydCxmcmFnbWVudFNoYWRlcjpscy5tZXNoYmFzaWNfZnJhZ30sbGFtYmVydDp7dW5pZm9ybXM6b28ubWVyZ2UoW3JvLmNvbW1vbixyby5hb21hcCxyby5saWdodG1hcCxyby5lbWlzc2l2ZW1hcCxyby5mb2cscm8ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHEoMCl9fV0pLHZlcnRleFNoYWRlcjpscy5tZXNobGFtYmVydF92ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLm1lc2hsYW1iZXJ0X2ZyYWd9LHBob25nOnt1bmlmb3Jtczpvby5tZXJnZShbcm8uY29tbW9uLHJvLmFvbWFwLHJvLmxpZ2h0bWFwLHJvLmVtaXNzaXZlbWFwLHJvLmJ1bXBtYXAscm8ubm9ybWFsbWFwLHJvLmRpc3BsYWNlbWVudG1hcCxyby5ncmFkaWVudG1hcCxyby5mb2cscm8ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHEoMCl9LHNwZWN1bGFyOnt2YWx1ZTpuZXcgcSgxMTE4NDgxKX0sc2hpbmluZXNzOnt2YWx1ZTozMH19XSksdmVydGV4U2hhZGVyOmxzLm1lc2hwaG9uZ192ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLm1lc2hwaG9uZ19mcmFnfSxzdGFuZGFyZDp7dW5pZm9ybXM6b28ubWVyZ2UoW3JvLmNvbW1vbixyby5hb21hcCxyby5saWdodG1hcCxyby5lbWlzc2l2ZW1hcCxyby5idW1wbWFwLHJvLm5vcm1hbG1hcCxyby5kaXNwbGFjZW1lbnRtYXAscm8ucm91Z2huZXNzbWFwLHJvLm1ldGFsbmVzc21hcCxyby5mb2cscm8ubGlnaHRzLHtlbWlzc2l2ZTp7dmFsdWU6bmV3IHEoMCl9LHJvdWdobmVzczp7dmFsdWU6LjV9LG1ldGFsbmVzczp7dmFsdWU6LjV9LGVudk1hcEludGVuc2l0eTp7dmFsdWU6MX19XSksdmVydGV4U2hhZGVyOmxzLm1lc2hwaHlzaWNhbF92ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLm1lc2hwaHlzaWNhbF9mcmFnfSxwb2ludHM6e3VuaWZvcm1zOm9vLm1lcmdlKFtyby5wb2ludHMscm8uZm9nXSksdmVydGV4U2hhZGVyOmxzLnBvaW50c192ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLnBvaW50c19mcmFnfSxkYXNoZWQ6e3VuaWZvcm1zOm9vLm1lcmdlKFtyby5jb21tb24scm8uZm9nLHtzY2FsZTp7dmFsdWU6MX0sZGFzaFNpemU6e3ZhbHVlOjF9LHRvdGFsU2l6ZTp7dmFsdWU6Mn19XSksdmVydGV4U2hhZGVyOmxzLmxpbmVkYXNoZWRfdmVydCxmcmFnbWVudFNoYWRlcjpscy5saW5lZGFzaGVkX2ZyYWd9LGRlcHRoOnt1bmlmb3Jtczpvby5tZXJnZShbcm8uY29tbW9uLHJvLmRpc3BsYWNlbWVudG1hcF0pLHZlcnRleFNoYWRlcjpscy5kZXB0aF92ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLmRlcHRoX2ZyYWd9LG5vcm1hbDp7dW5pZm9ybXM6b28ubWVyZ2UoW3JvLmNvbW1vbixyby5idW1wbWFwLHJvLm5vcm1hbG1hcCxyby5kaXNwbGFjZW1lbnRtYXAse29wYWNpdHk6e3ZhbHVlOjF9fV0pLHZlcnRleFNoYWRlcjpscy5ub3JtYWxfdmVydCxmcmFnbWVudFNoYWRlcjpscy5ub3JtYWxfZnJhZ30sY3ViZTp7dW5pZm9ybXM6e3RDdWJlOnt2YWx1ZTpudWxsfSx0RmxpcDp7dmFsdWU6LTF9LG9wYWNpdHk6e3ZhbHVlOjF9fSx2ZXJ0ZXhTaGFkZXI6bHMuY3ViZV92ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLmN1YmVfZnJhZ30sZXF1aXJlY3Q6e3VuaWZvcm1zOnt0RXF1aXJlY3Q6e3ZhbHVlOm51bGx9LHRGbGlwOnt2YWx1ZTotMX19LHZlcnRleFNoYWRlcjpscy5lcXVpcmVjdF92ZXJ0LGZyYWdtZW50U2hhZGVyOmxzLmVxdWlyZWN0X2ZyYWd9LGRpc3RhbmNlUkdCQTp7dW5pZm9ybXM6e2xpZ2h0UG9zOnt2YWx1ZTpuZXcgbn19LHZlcnRleFNoYWRlcjpscy5kaXN0YW5jZVJHQkFfdmVydCxmcmFnbWVudFNoYWRlcjpscy5kaXN0YW5jZVJHQkFfZnJhZ319O2NzLnBoeXNpY2FsPXt1bmlmb3Jtczpvby5tZXJnZShbY3Muc3RhbmRhcmQudW5pZm9ybXMse2NsZWFyQ29hdDp7dmFsdWU6MH0sY2xlYXJDb2F0Um91Z2huZXNzOnt2YWx1ZTowfX1dKSx2ZXJ0ZXhTaGFkZXI6bHMubWVzaHBoeXNpY2FsX3ZlcnQsZnJhZ21lbnRTaGFkZXI6bHMubWVzaHBoeXNpY2FsX2ZyYWd9LGEoWS5wcm90b3R5cGUsci5wcm90b3R5cGUse2lzV2ViR0xSZW5kZXJUYXJnZXQ6ITAsc2V0U2l6ZTpmdW5jdGlvbih0LGUpe3RoaXMud2lkdGg9PT10JiZ0aGlzLmhlaWdodD09PWV8fCh0aGlzLndpZHRoPXQsdGhpcy5oZWlnaHQ9ZSx0aGlzLmRpc3Bvc2UoKSksdGhpcy52aWV3cG9ydC5zZXQoMCwwLHQsZSksdGhpcy5zY2lzc29yLnNldCgwLDAsdCxlKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10LmhlaWdodCx0aGlzLnZpZXdwb3J0LmNvcHkodC52aWV3cG9ydCksdGhpcy50ZXh0dXJlPXQudGV4dHVyZS5jbG9uZSgpLHRoaXMuZGVwdGhCdWZmZXI9dC5kZXB0aEJ1ZmZlcix0aGlzLnN0ZW5jaWxCdWZmZXI9dC5zdGVuY2lsQnVmZmVyLHRoaXMuZGVwdGhUZXh0dXJlPXQuZGVwdGhUZXh0dXJlLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KTt2YXIgaHM9MDthKFcucHJvdG90eXBlLHIucHJvdG90eXBlLHtpc01hdGVyaWFsOiEwLHNldFZhbHVlczpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10KWZvcih2YXIgZSBpbiB0KXt2YXIgbj10W2VdO2lmKHZvaWQgMCE9PW4pe3ZhciBpPXRoaXNbZV07dm9pZCAwIT09aT9pJiZpLmlzQ29sb3I/aS5zZXQobik6aSYmaS5pc1ZlY3RvcjMmJm4mJm4uaXNWZWN0b3IzP2kuY29weShuKTpcIm92ZXJkcmF3XCI9PT1lP3RoaXNbZV09TnVtYmVyKG4pOnRoaXNbZV09bjpjb25zb2xlLndhcm4oXCJUSFJFRS5cIit0aGlzLnR5cGUrXCI6ICdcIitlK1wiJyBpcyBub3QgYSBwcm9wZXJ0eSBvZiB0aGlzIG1hdGVyaWFsLlwiKX1lbHNlIGNvbnNvbGUud2FybihcIlRIUkVFLk1hdGVyaWFsOiAnXCIrZStcIicgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZC5cIil9fSx0b0pTT046ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdCl7dmFyIGk9dFtuXTtkZWxldGUgaS5tZXRhZGF0YSxlLnB1c2goaSl9cmV0dXJuIGV9dmFyIG49dm9pZCAwPT09dDtuJiYodD17dGV4dHVyZXM6e30saW1hZ2VzOnt9fSk7dmFyIGk9e21ldGFkYXRhOnt2ZXJzaW9uOjQuNSx0eXBlOlwiTWF0ZXJpYWxcIixnZW5lcmF0b3I6XCJNYXRlcmlhbC50b0pTT05cIn19O2lmKGkudXVpZD10aGlzLnV1aWQsaS50eXBlPXRoaXMudHlwZSxcIlwiIT09dGhpcy5uYW1lJiYoaS5uYW1lPXRoaXMubmFtZSksdGhpcy5jb2xvciYmdGhpcy5jb2xvci5pc0NvbG9yJiYoaS5jb2xvcj10aGlzLmNvbG9yLmdldEhleCgpKSx2b2lkIDAhPT10aGlzLnJvdWdobmVzcyYmKGkucm91Z2huZXNzPXRoaXMucm91Z2huZXNzKSx2b2lkIDAhPT10aGlzLm1ldGFsbmVzcyYmKGkubWV0YWxuZXNzPXRoaXMubWV0YWxuZXNzKSx0aGlzLmVtaXNzaXZlJiZ0aGlzLmVtaXNzaXZlLmlzQ29sb3ImJihpLmVtaXNzaXZlPXRoaXMuZW1pc3NpdmUuZ2V0SGV4KCkpLHRoaXMuc3BlY3VsYXImJnRoaXMuc3BlY3VsYXIuaXNDb2xvciYmKGkuc3BlY3VsYXI9dGhpcy5zcGVjdWxhci5nZXRIZXgoKSksdm9pZCAwIT09dGhpcy5zaGluaW5lc3MmJihpLnNoaW5pbmVzcz10aGlzLnNoaW5pbmVzcyksdm9pZCAwIT09dGhpcy5jbGVhckNvYXQmJihpLmNsZWFyQ29hdD10aGlzLmNsZWFyQ29hdCksdm9pZCAwIT09dGhpcy5jbGVhckNvYXRSb3VnaG5lc3MmJihpLmNsZWFyQ29hdFJvdWdobmVzcz10aGlzLmNsZWFyQ29hdFJvdWdobmVzcyksdGhpcy5tYXAmJnRoaXMubWFwLmlzVGV4dHVyZSYmKGkubWFwPXRoaXMubWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLmFscGhhTWFwJiZ0aGlzLmFscGhhTWFwLmlzVGV4dHVyZSYmKGkuYWxwaGFNYXA9dGhpcy5hbHBoYU1hcC50b0pTT04odCkudXVpZCksdGhpcy5saWdodE1hcCYmdGhpcy5saWdodE1hcC5pc1RleHR1cmUmJihpLmxpZ2h0TWFwPXRoaXMubGlnaHRNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuYnVtcE1hcCYmdGhpcy5idW1wTWFwLmlzVGV4dHVyZSYmKGkuYnVtcE1hcD10aGlzLmJ1bXBNYXAudG9KU09OKHQpLnV1aWQsaS5idW1wU2NhbGU9dGhpcy5idW1wU2NhbGUpLHRoaXMubm9ybWFsTWFwJiZ0aGlzLm5vcm1hbE1hcC5pc1RleHR1cmUmJihpLm5vcm1hbE1hcD10aGlzLm5vcm1hbE1hcC50b0pTT04odCkudXVpZCxpLm5vcm1hbFNjYWxlPXRoaXMubm9ybWFsU2NhbGUudG9BcnJheSgpKSx0aGlzLmRpc3BsYWNlbWVudE1hcCYmdGhpcy5kaXNwbGFjZW1lbnRNYXAuaXNUZXh0dXJlJiYoaS5kaXNwbGFjZW1lbnRNYXA9dGhpcy5kaXNwbGFjZW1lbnRNYXAudG9KU09OKHQpLnV1aWQsaS5kaXNwbGFjZW1lbnRTY2FsZT10aGlzLmRpc3BsYWNlbWVudFNjYWxlLGkuZGlzcGxhY2VtZW50Qmlhcz10aGlzLmRpc3BsYWNlbWVudEJpYXMpLHRoaXMucm91Z2huZXNzTWFwJiZ0aGlzLnJvdWdobmVzc01hcC5pc1RleHR1cmUmJihpLnJvdWdobmVzc01hcD10aGlzLnJvdWdobmVzc01hcC50b0pTT04odCkudXVpZCksdGhpcy5tZXRhbG5lc3NNYXAmJnRoaXMubWV0YWxuZXNzTWFwLmlzVGV4dHVyZSYmKGkubWV0YWxuZXNzTWFwPXRoaXMubWV0YWxuZXNzTWFwLnRvSlNPTih0KS51dWlkKSx0aGlzLmVtaXNzaXZlTWFwJiZ0aGlzLmVtaXNzaXZlTWFwLmlzVGV4dHVyZSYmKGkuZW1pc3NpdmVNYXA9dGhpcy5lbWlzc2l2ZU1hcC50b0pTT04odCkudXVpZCksdGhpcy5zcGVjdWxhck1hcCYmdGhpcy5zcGVjdWxhck1hcC5pc1RleHR1cmUmJihpLnNwZWN1bGFyTWFwPXRoaXMuc3BlY3VsYXJNYXAudG9KU09OKHQpLnV1aWQpLHRoaXMuZW52TWFwJiZ0aGlzLmVudk1hcC5pc1RleHR1cmUmJihpLmVudk1hcD10aGlzLmVudk1hcC50b0pTT04odCkudXVpZCxpLnJlZmxlY3Rpdml0eT10aGlzLnJlZmxlY3Rpdml0eSksdGhpcy5ncmFkaWVudE1hcCYmdGhpcy5ncmFkaWVudE1hcC5pc1RleHR1cmUmJihpLmdyYWRpZW50TWFwPXRoaXMuZ3JhZGllbnRNYXAudG9KU09OKHQpLnV1aWQpLHZvaWQgMCE9PXRoaXMuc2l6ZSYmKGkuc2l6ZT10aGlzLnNpemUpLHZvaWQgMCE9PXRoaXMuc2l6ZUF0dGVudWF0aW9uJiYoaS5zaXplQXR0ZW51YXRpb249dGhpcy5zaXplQXR0ZW51YXRpb24pLHRoaXMuYmxlbmRpbmchPT1LbiYmKGkuYmxlbmRpbmc9dGhpcy5ibGVuZGluZyksdGhpcy5zaGFkaW5nIT09cW4mJihpLnNoYWRpbmc9dGhpcy5zaGFkaW5nKSx0aGlzLnNpZGUhPT1HbiYmKGkuc2lkZT10aGlzLnNpZGUpLHRoaXMudmVydGV4Q29sb3JzIT09WW4mJihpLnZlcnRleENvbG9ycz10aGlzLnZlcnRleENvbG9ycyksdGhpcy5vcGFjaXR5PDEmJihpLm9wYWNpdHk9dGhpcy5vcGFjaXR5KSx0aGlzLnRyYW5zcGFyZW50PT09ITAmJihpLnRyYW5zcGFyZW50PXRoaXMudHJhbnNwYXJlbnQpLGkuZGVwdGhGdW5jPXRoaXMuZGVwdGhGdW5jLGkuZGVwdGhUZXN0PXRoaXMuZGVwdGhUZXN0LGkuZGVwdGhXcml0ZT10aGlzLmRlcHRoV3JpdGUsdGhpcy5hbHBoYVRlc3Q+MCYmKGkuYWxwaGFUZXN0PXRoaXMuYWxwaGFUZXN0KSx0aGlzLnByZW11bHRpcGxpZWRBbHBoYT09PSEwJiYoaS5wcmVtdWx0aXBsaWVkQWxwaGE9dGhpcy5wcmVtdWx0aXBsaWVkQWxwaGEpLHRoaXMud2lyZWZyYW1lPT09ITAmJihpLndpcmVmcmFtZT10aGlzLndpcmVmcmFtZSksdGhpcy53aXJlZnJhbWVMaW5ld2lkdGg+MSYmKGkud2lyZWZyYW1lTGluZXdpZHRoPXRoaXMud2lyZWZyYW1lTGluZXdpZHRoKSxcInJvdW5kXCIhPT10aGlzLndpcmVmcmFtZUxpbmVjYXAmJihpLndpcmVmcmFtZUxpbmVjYXA9dGhpcy53aXJlZnJhbWVMaW5lY2FwKSxcInJvdW5kXCIhPT10aGlzLndpcmVmcmFtZUxpbmVqb2luJiYoaS53aXJlZnJhbWVMaW5lam9pbj10aGlzLndpcmVmcmFtZUxpbmVqb2luKSxpLnNraW5uaW5nPXRoaXMuc2tpbm5pbmcsaS5tb3JwaFRhcmdldHM9dGhpcy5tb3JwaFRhcmdldHMsaS5kaXRoZXJpbmc9dGhpcy5kaXRoZXJpbmcsbil7dmFyIHI9ZSh0LnRleHR1cmVzKSxvPWUodC5pbWFnZXMpO3IubGVuZ3RoPjAmJihpLnRleHR1cmVzPXIpLG8ubGVuZ3RoPjAmJihpLmltYWdlcz1vKX1yZXR1cm4gaX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7dGhpcy5uYW1lPXQubmFtZSx0aGlzLmZvZz10LmZvZyx0aGlzLmxpZ2h0cz10LmxpZ2h0cyx0aGlzLmJsZW5kaW5nPXQuYmxlbmRpbmcsdGhpcy5zaWRlPXQuc2lkZSx0aGlzLnNoYWRpbmc9dC5zaGFkaW5nLHRoaXMudmVydGV4Q29sb3JzPXQudmVydGV4Q29sb3JzLHRoaXMub3BhY2l0eT10Lm9wYWNpdHksdGhpcy50cmFuc3BhcmVudD10LnRyYW5zcGFyZW50LHRoaXMuYmxlbmRTcmM9dC5ibGVuZFNyYyx0aGlzLmJsZW5kRHN0PXQuYmxlbmREc3QsdGhpcy5ibGVuZEVxdWF0aW9uPXQuYmxlbmRFcXVhdGlvbix0aGlzLmJsZW5kU3JjQWxwaGE9dC5ibGVuZFNyY0FscGhhLHRoaXMuYmxlbmREc3RBbHBoYT10LmJsZW5kRHN0QWxwaGEsdGhpcy5ibGVuZEVxdWF0aW9uQWxwaGE9dC5ibGVuZEVxdWF0aW9uQWxwaGEsdGhpcy5kZXB0aEZ1bmM9dC5kZXB0aEZ1bmMsdGhpcy5kZXB0aFRlc3Q9dC5kZXB0aFRlc3QsdGhpcy5kZXB0aFdyaXRlPXQuZGVwdGhXcml0ZSx0aGlzLmNvbG9yV3JpdGU9dC5jb2xvcldyaXRlLHRoaXMucHJlY2lzaW9uPXQucHJlY2lzaW9uLHRoaXMucG9seWdvbk9mZnNldD10LnBvbHlnb25PZmZzZXQsdGhpcy5wb2x5Z29uT2Zmc2V0RmFjdG9yPXQucG9seWdvbk9mZnNldEZhY3Rvcix0aGlzLnBvbHlnb25PZmZzZXRVbml0cz10LnBvbHlnb25PZmZzZXRVbml0cyx0aGlzLmRpdGhlcmluZz10LmRpdGhlcmluZyx0aGlzLmFscGhhVGVzdD10LmFscGhhVGVzdCx0aGlzLnByZW11bHRpcGxpZWRBbHBoYT10LnByZW11bHRpcGxpZWRBbHBoYSx0aGlzLm92ZXJkcmF3PXQub3ZlcmRyYXcsdGhpcy52aXNpYmxlPXQudmlzaWJsZSx0aGlzLmNsaXBTaGFkb3dzPXQuY2xpcFNoYWRvd3MsdGhpcy5jbGlwSW50ZXJzZWN0aW9uPXQuY2xpcEludGVyc2VjdGlvbjt2YXIgZT10LmNsaXBwaW5nUGxhbmVzLG49bnVsbDtpZihudWxsIT09ZSl7dmFyIGk9ZS5sZW5ndGg7bj1uZXcgQXJyYXkoaSk7Zm9yKHZhciByPTA7ciE9PWk7KytyKW5bcl09ZVtyXS5jbG9uZSgpfXJldHVybiB0aGlzLmNsaXBwaW5nUGxhbmVzPW4sdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImRpc3Bvc2VcIn0pfX0pLFoucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVy5wcm90b3R5cGUpLFoucHJvdG90eXBlLmNvbnN0cnVjdG9yPVosWi5wcm90b3R5cGUuaXNTaGFkZXJNYXRlcmlhbD0hMCxaLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBXLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmZyYWdtZW50U2hhZGVyPXQuZnJhZ21lbnRTaGFkZXIsdGhpcy52ZXJ0ZXhTaGFkZXI9dC52ZXJ0ZXhTaGFkZXIsdGhpcy51bmlmb3Jtcz1vby5jbG9uZSh0LnVuaWZvcm1zKSx0aGlzLmRlZmluZXM9dC5kZWZpbmVzLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMubGlnaHRzPXQubGlnaHRzLHRoaXMuY2xpcHBpbmc9dC5jbGlwcGluZyx0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpcy5leHRlbnNpb25zPXQuZXh0ZW5zaW9ucyx0aGlzfSxaLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7dmFyIGU9Vy5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyx0KTtyZXR1cm4gZS51bmlmb3Jtcz10aGlzLnVuaWZvcm1zLGUudmVydGV4U2hhZGVyPXRoaXMudmVydGV4U2hhZGVyLGUuZnJhZ21lbnRTaGFkZXI9dGhpcy5mcmFnbWVudFNoYWRlcixlfSxKLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFcucHJvdG90eXBlKSxKLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1KLEoucHJvdG90eXBlLmlzTWVzaERlcHRoTWF0ZXJpYWw9ITAsSi5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gVy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5kZXB0aFBhY2tpbmc9dC5kZXB0aFBhY2tpbmcsdGhpcy5za2lubmluZz10LnNraW5uaW5nLHRoaXMubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzLHRoaXMubWFwPXQubWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmRpc3BsYWNlbWVudE1hcD10LmRpc3BsYWNlbWVudE1hcCx0aGlzLmRpc3BsYWNlbWVudFNjYWxlPXQuZGlzcGxhY2VtZW50U2NhbGUsdGhpcy5kaXNwbGFjZW1lbnRCaWFzPXQuZGlzcGxhY2VtZW50Qmlhcyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzfSxhKEsucHJvdG90eXBlLHtpc0JveDM6ITAsc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWluLmNvcHkodCksdGhpcy5tYXguY29weShlKSx0aGlzfSxzZXRGcm9tQXJyYXk6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSsoMS8wKSxuPSsoMS8wKSxpPSsoMS8wKSxyPS0oMS8wKSxvPS0oMS8wKSxhPS0oMS8wKSxzPTAsdT10Lmxlbmd0aDtzPHU7cys9Myl7dmFyIGw9dFtzXSxjPXRbcysxXSxoPXRbcysyXTtsPGUmJihlPWwpLGM8biYmKG49YyksaDxpJiYoaT1oKSxsPnImJihyPWwpLGM+byYmKG89YyksaD5hJiYoYT1oKX1yZXR1cm4gdGhpcy5taW4uc2V0KGUsbixpKSx0aGlzLm1heC5zZXQocixvLGEpLHRoaXN9LHNldEZyb21CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPSsoMS8wKSxuPSsoMS8wKSxpPSsoMS8wKSxyPS0oMS8wKSxvPS0oMS8wKSxhPS0oMS8wKSxzPTAsdT10LmNvdW50O3M8dTtzKyspe3ZhciBsPXQuZ2V0WChzKSxjPXQuZ2V0WShzKSxoPXQuZ2V0WihzKTtsPGUmJihlPWwpLGM8biYmKG49YyksaDxpJiYoaT1oKSxsPnImJihyPWwpLGM+byYmKG89YyksaD5hJiYoYT1oKX1yZXR1cm4gdGhpcy5taW4uc2V0KGUsbixpKSx0aGlzLm1heC5zZXQocixvLGEpLHRoaXN9LHNldEZyb21Qb2ludHM6ZnVuY3Rpb24odCl7dGhpcy5tYWtlRW1wdHkoKTtmb3IodmFyIGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdGhpcy5leHBhbmRCeVBvaW50KHRbZV0pO3JldHVybiB0aGlzfSxzZXRGcm9tQ2VudGVyQW5kU2l6ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXQuY29weShuKS5tdWx0aXBseVNjYWxhciguNSk7cmV0dXJuIHRoaXMubWluLmNvcHkoZSkuc3ViKGkpLHRoaXMubWF4LmNvcHkoZSkuYWRkKGkpLHRoaXN9fSgpLHNldEZyb21PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFrZUVtcHR5KCksdGhpcy5leHBhbmRCeU9iamVjdCh0KX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWluLmNvcHkodC5taW4pLHRoaXMubWF4LmNvcHkodC5tYXgpLHRoaXN9LG1ha2VFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbi54PXRoaXMubWluLnk9dGhpcy5taW4uej0rKDEvMCksdGhpcy5tYXgueD10aGlzLm1heC55PXRoaXMubWF4Lno9LSgxLzApLHRoaXN9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgueDx0aGlzLm1pbi54fHx0aGlzLm1heC55PHRoaXMubWluLnl8fHRoaXMubWF4Lno8dGhpcy5taW4uen0sZ2V0Q2VudGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXR8fG5ldyBuO3JldHVybiB0aGlzLmlzRW1wdHkoKT9lLnNldCgwLDAsMCk6ZS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IG47cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Uuc2V0KDAsMCwwKTplLnN1YlZlY3RvcnModGhpcy5tYXgsdGhpcy5taW4pfSxleHBhbmRCeVBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi5taW4odCksdGhpcy5tYXgubWF4KHQpLHRoaXN9LGV4cGFuZEJ5VmVjdG9yOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi5zdWIodCksdGhpcy5tYXguYWRkKHQpLHRoaXN9LGV4cGFuZEJ5U2NhbGFyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi5hZGRTY2FsYXIoLXQpLHRoaXMubWF4LmFkZFNjYWxhcih0KSx0aGlzfSxleHBhbmRCeU9iamVjdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10aGlzO3JldHVybiBlLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKSxlLnRyYXZlcnNlKGZ1bmN0aW9uKGUpe3ZhciBpLHIsbz1lLmdlb21ldHJ5O2lmKHZvaWQgMCE9PW8paWYoby5pc0dlb21ldHJ5KXt2YXIgYT1vLnZlcnRpY2VzO2ZvcihpPTAscj1hLmxlbmd0aDtpPHI7aSsrKXQuY29weShhW2ldKSx0LmFwcGx5TWF0cml4NChlLm1hdHJpeFdvcmxkKSxuLmV4cGFuZEJ5UG9pbnQodCl9ZWxzZSBpZihvLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciBzPW8uYXR0cmlidXRlcy5wb3NpdGlvbjtpZih2b2lkIDAhPT1zKWZvcihpPTAscj1zLmNvdW50O2k8cjtpKyspdC5mcm9tQnVmZmVyQXR0cmlidXRlKHMsaSkuYXBwbHlNYXRyaXg0KGUubWF0cml4V29ybGQpLG4uZXhwYW5kQnlQb2ludCh0KX19KSx0aGlzfX0oKSxjb250YWluc1BvaW50OmZ1bmN0aW9uKHQpe3JldHVybiEodC54PHRoaXMubWluLnh8fHQueD50aGlzLm1heC54fHx0Lnk8dGhpcy5taW4ueXx8dC55PnRoaXMubWF4Lnl8fHQuejx0aGlzLm1pbi56fHx0Lno+dGhpcy5tYXgueil9LGNvbnRhaW5zQm94OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi54PD10Lm1pbi54JiZ0Lm1heC54PD10aGlzLm1heC54JiZ0aGlzLm1pbi55PD10Lm1pbi55JiZ0Lm1heC55PD10aGlzLm1heC55JiZ0aGlzLm1pbi56PD10Lm1pbi56JiZ0Lm1heC56PD10aGlzLm1heC56fSxnZXRQYXJhbWV0ZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT1lfHxuZXcgbjtyZXR1cm4gaS5zZXQoKHQueC10aGlzLm1pbi54KS8odGhpcy5tYXgueC10aGlzLm1pbi54KSwodC55LXRoaXMubWluLnkpLyh0aGlzLm1heC55LXRoaXMubWluLnkpLCh0LnotdGhpcy5taW4ueikvKHRoaXMubWF4LnotdGhpcy5taW4ueikpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKHQpe3JldHVybiEodC5tYXgueDx0aGlzLm1pbi54fHx0Lm1pbi54PnRoaXMubWF4Lnh8fHQubWF4Lnk8dGhpcy5taW4ueXx8dC5taW4ueT50aGlzLm1heC55fHx0Lm1heC56PHRoaXMubWluLnp8fHQubWluLno+dGhpcy5tYXgueil9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2xhbXBQb2ludChlLmNlbnRlcix0KSx0LmRpc3RhbmNlVG9TcXVhcmVkKGUuY2VudGVyKTw9ZS5yYWRpdXMqZS5yYWRpdXN9fSgpLGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiB0Lm5vcm1hbC54PjA/KGU9dC5ub3JtYWwueCp0aGlzLm1pbi54LG49dC5ub3JtYWwueCp0aGlzLm1heC54KTooZT10Lm5vcm1hbC54KnRoaXMubWF4Lngsbj10Lm5vcm1hbC54KnRoaXMubWluLngpLHQubm9ybWFsLnk+MD8oZSs9dC5ub3JtYWwueSp0aGlzLm1pbi55LG4rPXQubm9ybWFsLnkqdGhpcy5tYXgueSk6KGUrPXQubm9ybWFsLnkqdGhpcy5tYXgueSxuKz10Lm5vcm1hbC55KnRoaXMubWluLnkpLHQubm9ybWFsLno+MD8oZSs9dC5ub3JtYWwueip0aGlzLm1pbi56LG4rPXQubm9ybWFsLnoqdGhpcy5tYXgueik6KGUrPXQubm9ybWFsLnoqdGhpcy5tYXgueixuKz10Lm5vcm1hbC56KnRoaXMubWluLnopLGU8PXQuY29uc3RhbnQmJm4+PXQuY29uc3RhbnR9LGNsYW1wUG9pbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT1lfHxuZXcgbjtyZXR1cm4gaS5jb3B5KHQpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXQuY29weShlKS5jbGFtcCh0aGlzLm1pbix0aGlzLm1heCk7cmV0dXJuIG4uc3ViKGUpLmxlbmd0aCgpfX0oKSxnZXRCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lfHxuZXcgUTtyZXR1cm4gdGhpcy5nZXRDZW50ZXIobi5jZW50ZXIpLG4ucmFkaXVzPS41KnRoaXMuZ2V0U2l6ZSh0KS5sZW5ndGgoKSxufX0oKSxpbnRlcnNlY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWluLm1heCh0Lm1pbiksdGhpcy5tYXgubWluKHQubWF4KSx0aGlzLmlzRW1wdHkoKSYmdGhpcy5tYWtlRW1wdHkoKSx0aGlzfSx1bmlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4ubWluKHQubWluKSx0aGlzLm1heC5tYXgodC5tYXgpLHRoaXN9LGFwcGx5TWF0cml4NDpmdW5jdGlvbigpe3ZhciB0PVtuZXcgbixuZXcgbixuZXcgbixuZXcgbixuZXcgbixuZXcgbixuZXcgbixuZXcgbl07cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlzRW1wdHkoKT90aGlzOih0WzBdLnNldCh0aGlzLm1pbi54LHRoaXMubWluLnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGUpLHRbMV0uc2V0KHRoaXMubWluLngsdGhpcy5taW4ueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSksdFsyXS5zZXQodGhpcy5taW4ueCx0aGlzLm1heC55LHRoaXMubWluLnopLmFwcGx5TWF0cml4NChlKSx0WzNdLnNldCh0aGlzLm1pbi54LHRoaXMubWF4LnksdGhpcy5tYXgueikuYXBwbHlNYXRyaXg0KGUpLHRbNF0uc2V0KHRoaXMubWF4LngsdGhpcy5taW4ueSx0aGlzLm1pbi56KS5hcHBseU1hdHJpeDQoZSksdFs1XS5zZXQodGhpcy5tYXgueCx0aGlzLm1pbi55LHRoaXMubWF4LnopLmFwcGx5TWF0cml4NChlKSx0WzZdLnNldCh0aGlzLm1heC54LHRoaXMubWF4LnksdGhpcy5taW4ueikuYXBwbHlNYXRyaXg0KGUpLHRbN10uc2V0KHRoaXMubWF4LngsdGhpcy5tYXgueSx0aGlzLm1heC56KS5hcHBseU1hdHJpeDQoZSksdGhpcy5zZXRGcm9tUG9pbnRzKHQpLHRoaXMpfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWluLmFkZCh0KSx0aGlzLm1heC5hZGQodCksdGhpc30sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm1pbi5lcXVhbHModGhpcy5taW4pJiZ0Lm1heC5lcXVhbHModGhpcy5tYXgpfX0pLGEoUS5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNlbnRlci5jb3B5KHQpLHRoaXMucmFkaXVzPWUsdGhpc30sc2V0RnJvbVBvaW50czpmdW5jdGlvbigpe3ZhciB0PW5ldyBLO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMuY2VudGVyO3ZvaWQgMCE9PW4/aS5jb3B5KG4pOnQuc2V0RnJvbVBvaW50cyhlKS5nZXRDZW50ZXIoaSk7Zm9yKHZhciByPTAsbz0wLGE9ZS5sZW5ndGg7bzxhO28rKylyPU1hdGgubWF4KHIsaS5kaXN0YW5jZVRvU3F1YXJlZChlW29dKSk7cmV0dXJuIHRoaXMucmFkaXVzPU1hdGguc3FydChyKSx0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jZW50ZXIuY29weSh0LmNlbnRlciksdGhpcy5yYWRpdXM9dC5yYWRpdXMsdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYWRpdXM8PTB9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZGlzdGFuY2VUb1NxdWFyZWQodGhpcy5jZW50ZXIpPD10aGlzLnJhZGl1cyp0aGlzLnJhZGl1c30sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRpc3RhbmNlVG8odGhpcy5jZW50ZXIpLXRoaXMucmFkaXVzfSxpbnRlcnNlY3RzU3BoZXJlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmFkaXVzK3QucmFkaXVzO3JldHVybiB0LmNlbnRlci5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmNlbnRlcik8PWUqZX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpfSxpbnRlcnNlY3RzUGxhbmU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYWJzKHRoaXMuY2VudGVyLmRvdCh0Lm5vcm1hbCktdC5jb25zdGFudCk8PXRoaXMucmFkaXVzfSxjbGFtcFBvaW50OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5jZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodCkscj1lfHxuZXcgbjtyZXR1cm4gci5jb3B5KHQpLGk+dGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMmJihyLnN1Yih0aGlzLmNlbnRlcikubm9ybWFsaXplKCksci5tdWx0aXBseVNjYWxhcih0aGlzLnJhZGl1cykuYWRkKHRoaXMuY2VudGVyKSkscn0sZ2V0Qm91bmRpbmdCb3g6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IEs7cmV0dXJuIGUuc2V0KHRoaXMuY2VudGVyLHRoaXMuY2VudGVyKSxlLmV4cGFuZEJ5U2NhbGFyKHRoaXMucmFkaXVzKSxlfSxhcHBseU1hdHJpeDQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2VudGVyLmFwcGx5TWF0cml4NCh0KSx0aGlzLnJhZGl1cz10aGlzLnJhZGl1cyp0LmdldE1heFNjYWxlT25BeGlzKCksdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNlbnRlci5hZGQodCksdGhpc30sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNlbnRlci5lcXVhbHModGhpcy5jZW50ZXIpJiZ0LnJhZGl1cz09PXRoaXMucmFkaXVzfX0pLGEoJC5wcm90b3R5cGUse2lzTWF0cml4MzohMCxzZXQ6ZnVuY3Rpb24odCxlLG4saSxyLG8sYSxzLHUpe3ZhciBsPXRoaXMuZWxlbWVudHM7cmV0dXJuIGxbMF09dCxsWzFdPWksbFsyXT1hLGxbM109ZSxsWzRdPXIsbFs1XT1zLGxbNl09bixsWzddPW8sbFs4XT11LHRoaXN9LGlkZW50aXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuZnJvbUFycmF5KHRoaXMuZWxlbWVudHMpfSxjb3B5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWxlbWVudHMsbj10LmVsZW1lbnRzO3JldHVybiBlWzBdPW5bMF0sZVsxXT1uWzFdLGVbMl09blsyXSxlWzNdPW5bM10sZVs0XT1uWzRdLGVbNV09bls1XSxlWzZdPW5bNl0sZVs3XT1uWzddLGVbOF09bls4XSx0aGlzfSxzZXRGcm9tTWF0cml4NDpmdW5jdGlvbih0KXt2YXIgZT10LmVsZW1lbnRzO3JldHVybiB0aGlzLnNldChlWzBdLGVbNF0sZVs4XSxlWzFdLGVbNV0sZVs5XSxlWzJdLGVbNl0sZVsxMF0pLHRoaXN9LGFwcGx5VG9CdWZmZXJBdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTAsaT1lLmNvdW50O248aTtuKyspdC54PWUuZ2V0WChuKSx0Lnk9ZS5nZXRZKG4pLHQuej1lLmdldFoobiksdC5hcHBseU1hdHJpeDModGhpcyksZS5zZXRYWVoobix0LngsdC55LHQueik7cmV0dXJuIGV9fSgpLG11bHRpcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm11bHRpcGx5TWF0cmljZXModGhpcyx0KX0scHJlbXVsdGlwbHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXVsdGlwbHlNYXRyaWNlcyh0LHRoaXMpfSxtdWx0aXBseU1hdHJpY2VzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5lbGVtZW50cyxpPWUuZWxlbWVudHMscj10aGlzLmVsZW1lbnRzLG89blswXSxhPW5bM10scz1uWzZdLHU9blsxXSxsPW5bNF0sYz1uWzddLGg9blsyXSxmPW5bNV0sZD1uWzhdLHA9aVswXSxnPWlbM10sdj1pWzZdLG09aVsxXSx5PWlbNF0sXz1pWzddLGI9aVsyXSx4PWlbNV0sdz1pWzhdO3JldHVybiByWzBdPW8qcCthKm0rcypiLHJbM109bypnK2EqeStzKngscls2XT1vKnYrYSpfK3MqdyxyWzFdPXUqcCtsKm0rYypiLHJbNF09dSpnK2wqeStjKngscls3XT11KnYrbCpfK2MqdyxyWzJdPWgqcCtmKm0rZCpiLHJbNV09aCpnK2YqeStkKngscls4XT1oKnYrZipfK2Qqdyx0aGlzfSxtdWx0aXBseVNjYWxhcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmVsZW1lbnRzO3JldHVybiBlWzBdKj10LGVbM10qPXQsZVs2XSo9dCxlWzFdKj10LGVbNF0qPXQsZVs3XSo9dCxlWzJdKj10LGVbNV0qPXQsZVs4XSo9dCx0aGlzfSxkZXRlcm1pbmFudDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWxlbWVudHMsZT10WzBdLG49dFsxXSxpPXRbMl0scj10WzNdLG89dFs0XSxhPXRbNV0scz10WzZdLHU9dFs3XSxsPXRbOF07cmV0dXJuIGUqbypsLWUqYSp1LW4qcipsK24qYSpzK2kqcip1LWkqbypzfSxnZXRJbnZlcnNlOmZ1bmN0aW9uKHQsZSl7dCYmdC5pc01hdHJpeDQmJmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5NYXRyaXgzLmdldEludmVyc2Ugbm8gbG9uZ2VyIHRha2VzIGEgTWF0cml4NCBhcmd1bWVudC5cIik7dmFyIG49dC5lbGVtZW50cyxpPXRoaXMuZWxlbWVudHMscj1uWzBdLG89blsxXSxhPW5bMl0scz1uWzNdLHU9bls0XSxsPW5bNV0sYz1uWzZdLGg9bls3XSxmPW5bOF0sZD1mKnUtbCpoLHA9bCpjLWYqcyxnPWgqcy11KmMsdj1yKmQrbypwK2EqZztpZigwPT09dil7dmFyIG09XCJUSFJFRS5NYXRyaXgzLmdldEludmVyc2UoKTogY2FuJ3QgaW52ZXJ0IG1hdHJpeCwgZGV0ZXJtaW5hbnQgaXMgMFwiO2lmKGU9PT0hMCl0aHJvdyBuZXcgRXJyb3IobSk7cmV0dXJuIGNvbnNvbGUud2FybihtKSx0aGlzLmlkZW50aXR5KCl9dmFyIHk9MS92O3JldHVybiBpWzBdPWQqeSxpWzFdPShhKmgtZipvKSp5LGlbMl09KGwqby1hKnUpKnksaVszXT1wKnksaVs0XT0oZipyLWEqYykqeSxpWzVdPShhKnMtbCpyKSp5LGlbNl09Zyp5LGlbN109KG8qYy1oKnIpKnksaVs4XT0odSpyLW8qcykqeSx0aGlzfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuZWxlbWVudHM7cmV0dXJuIHQ9ZVsxXSxlWzFdPWVbM10sZVszXT10LHQ9ZVsyXSxlWzJdPWVbNl0sZVs2XT10LHQ9ZVs1XSxlWzVdPWVbN10sZVs3XT10LHRoaXN9LGdldE5vcm1hbE1hdHJpeDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRGcm9tTWF0cml4NCh0KS5nZXRJbnZlcnNlKHRoaXMpLnRyYW5zcG9zZSgpfSx0cmFuc3Bvc2VJbnRvQXJyYXk6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lbGVtZW50cztyZXR1cm4gdFswXT1lWzBdLHRbMV09ZVszXSx0WzJdPWVbNl0sdFszXT1lWzFdLHRbNF09ZVs0XSx0WzVdPWVbN10sdFs2XT1lWzJdLHRbN109ZVs1XSx0WzhdPWVbOF0sdGhpc30sZXF1YWxzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmVsZW1lbnRzLG49dC5lbGVtZW50cyxpPTA7aTw5O2krKylpZihlW2ldIT09bltpXSlyZXR1cm4hMTtyZXR1cm4hMH0sZnJvbUFycmF5OmZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7Zm9yKHZhciBuPTA7bjw5O24rKyl0aGlzLmVsZW1lbnRzW25dPXRbbitlXTtyZXR1cm4gdGhpc30sdG9BcnJheTpmdW5jdGlvbih0LGUpe3ZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1lJiYoZT0wKTt2YXIgbj10aGlzLmVsZW1lbnRzO3JldHVybiB0W2VdPW5bMF0sdFtlKzFdPW5bMV0sdFtlKzJdPW5bMl0sdFtlKzNdPW5bM10sdFtlKzRdPW5bNF0sdFtlKzVdPW5bNV0sdFtlKzZdPW5bNl0sdFtlKzddPW5bN10sdFtlKzhdPW5bOF0sdH19KSxhKHR0LnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubm9ybWFsLmNvcHkodCksdGhpcy5jb25zdGFudD1lLHRoaXN9LHNldENvbXBvbmVudHM6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHRoaXMubm9ybWFsLnNldCh0LGUsbiksdGhpcy5jb25zdGFudD1pLHRoaXN9LHNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubm9ybWFsLmNvcHkodCksdGhpcy5jb25zdGFudD0tZS5kb3QodGhpcy5ub3JtYWwpLHRoaXN9LHNldEZyb21Db3BsYW5hclBvaW50czpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKG4saSxyKXt2YXIgbz10LnN1YlZlY3RvcnMocixpKS5jcm9zcyhlLnN1YlZlY3RvcnMobixpKSkubm9ybWFsaXplKCk7cmV0dXJuIHRoaXMuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQobyxuKSx0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub3JtYWwuY29weSh0Lm5vcm1hbCksdGhpcy5jb25zdGFudD10LmNvbnN0YW50LHRoaXN9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PTEvdGhpcy5ub3JtYWwubGVuZ3RoKCk7cmV0dXJuIHRoaXMubm9ybWFsLm11bHRpcGx5U2NhbGFyKHQpLHRoaXMuY29uc3RhbnQqPXQsdGhpc30sbmVnYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RhbnQqPS0xLHRoaXMubm9ybWFsLm5lZ2F0ZSgpLHRoaXN9LGRpc3RhbmNlVG9Qb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub3JtYWwuZG90KHQpK3RoaXMuY29uc3RhbnR9LGRpc3RhbmNlVG9TcGhlcmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlzdGFuY2VUb1BvaW50KHQuY2VudGVyKS10LnJhZGl1c30scHJvamVjdFBvaW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMub3J0aG9Qb2ludCh0LGUpLnN1Yih0KS5uZWdhdGUoKX0sb3J0aG9Qb2ludDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZGlzdGFuY2VUb1BvaW50KHQpLHI9ZXx8bmV3IG47cmV0dXJuIHIuY29weSh0aGlzLm5vcm1hbCkubXVsdGlwbHlTY2FsYXIoaSl9LGludGVyc2VjdExpbmU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSxpKXt2YXIgcj1pfHxuZXcgbixvPWUuZGVsdGEodCksYT10aGlzLm5vcm1hbC5kb3Qobyk7aWYoMCE9PWEpe3ZhciBzPS0oZS5zdGFydC5kb3QodGhpcy5ub3JtYWwpK3RoaXMuY29uc3RhbnQpL2E7aWYoIShzPDB8fHM+MSkpcmV0dXJuIHIuY29weShvKS5tdWx0aXBseVNjYWxhcihzKS5hZGQoZS5zdGFydCl9ZWxzZSBpZigwPT09dGhpcy5kaXN0YW5jZVRvUG9pbnQoZS5zdGFydCkpcmV0dXJuIHIuY29weShlLnN0YXJ0KX19KCksaW50ZXJzZWN0c0xpbmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kaXN0YW5jZVRvUG9pbnQodC5zdGFydCksbj10aGlzLmRpc3RhbmNlVG9Qb2ludCh0LmVuZCk7cmV0dXJuIGU8MCYmbj4wfHxuPDAmJmU+MH0saW50ZXJzZWN0c0JveDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnRlcnNlY3RzUGxhbmUodGhpcyl9LGludGVyc2VjdHNTcGhlcmU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW50ZXJzZWN0c1BsYW5lKHRoaXMpfSxjb3BsYW5hclBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXR8fG5ldyBuO3JldHVybiBlLmNvcHkodGhpcy5ub3JtYWwpLm11bHRpcGx5U2NhbGFyKC10aGlzLmNvbnN0YW50KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4sZT1uZXcgJDtyZXR1cm4gZnVuY3Rpb24obixpKXt2YXIgcj10aGlzLmNvcGxhbmFyUG9pbnQodCkuYXBwbHlNYXRyaXg0KG4pLG89aXx8ZS5nZXROb3JtYWxNYXRyaXgobiksYT10aGlzLm5vcm1hbC5hcHBseU1hdHJpeDMobykubm9ybWFsaXplKCk7cmV0dXJuIHRoaXMuY29uc3RhbnQ9LXIuZG90KGEpLHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb25zdGFudD10aGlzLmNvbnN0YW50LXQuZG90KHRoaXMubm9ybWFsKSx0aGlzfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQubm9ybWFsLmVxdWFscyh0aGlzLm5vcm1hbCkmJnQuY29uc3RhbnQ9PT10aGlzLmNvbnN0YW50fX0pLGEoZXQucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZhciBhPXRoaXMucGxhbmVzO3JldHVybiBhWzBdLmNvcHkodCksYVsxXS5jb3B5KGUpLGFbMl0uY29weShuKSxhWzNdLmNvcHkoaSksYVs0XS5jb3B5KHIpLGFbNV0uY29weShvKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5wbGFuZXMsbj0wO248NjtuKyspZVtuXS5jb3B5KHQucGxhbmVzW25dKTtyZXR1cm4gdGhpc30sc2V0RnJvbU1hdHJpeDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBsYW5lcyxuPXQuZWxlbWVudHMsaT1uWzBdLHI9blsxXSxvPW5bMl0sYT1uWzNdLHM9bls0XSx1PW5bNV0sbD1uWzZdLGM9bls3XSxoPW5bOF0sZj1uWzldLGQ9blsxMF0scD1uWzExXSxnPW5bMTJdLHY9blsxM10sbT1uWzE0XSx5PW5bMTVdO3JldHVybiBlWzBdLnNldENvbXBvbmVudHMoYS1pLGMtcyxwLWgseS1nKS5ub3JtYWxpemUoKSxlWzFdLnNldENvbXBvbmVudHMoYStpLGMrcyxwK2gseStnKS5ub3JtYWxpemUoKSxlWzJdLnNldENvbXBvbmVudHMoYStyLGMrdSxwK2YseSt2KS5ub3JtYWxpemUoKSxlWzNdLnNldENvbXBvbmVudHMoYS1yLGMtdSxwLWYseS12KS5ub3JtYWxpemUoKSxlWzRdLnNldENvbXBvbmVudHMoYS1vLGMtbCxwLWQseS1tKS5ub3JtYWxpemUoKSxlWzVdLnNldENvbXBvbmVudHMoYStvLGMrbCxwK2QseSttKS5ub3JtYWxpemUoKSx0aGlzfSxpbnRlcnNlY3RzT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFE7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuZ2VvbWV0cnk7cmV0dXJuIG51bGw9PT1uLmJvdW5kaW5nU3BoZXJlJiZuLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHQuY29weShuLmJvdW5kaW5nU3BoZXJlKS5hcHBseU1hdHJpeDQoZS5tYXRyaXhXb3JsZCksdGhpcy5pbnRlcnNlY3RzU3BoZXJlKHQpfX0oKSxpbnRlcnNlY3RzU3ByaXRlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFE7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LmNlbnRlci5zZXQoMCwwLDApLHQucmFkaXVzPS43MDcxMDY3ODExODY1NDc2LHQuYXBwbHlNYXRyaXg0KGUubWF0cml4V29ybGQpLHRoaXMuaW50ZXJzZWN0c1NwaGVyZSh0KX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5wbGFuZXMsbj10LmNlbnRlcixpPS10LnJhZGl1cyxyPTA7cjw2O3IrKyl7dmFyIG89ZVtyXS5kaXN0YW5jZVRvUG9pbnQobik7aWYobzxpKXJldHVybiExfXJldHVybiEwfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4sZT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKHZhciBpPXRoaXMucGxhbmVzLHI9MDtyPDY7cisrKXt2YXIgbz1pW3JdO3QueD1vLm5vcm1hbC54PjA/bi5taW4ueDpuLm1heC54LGUueD1vLm5vcm1hbC54PjA/bi5tYXgueDpuLm1pbi54LHQueT1vLm5vcm1hbC55PjA/bi5taW4ueTpuLm1heC55LGUueT1vLm5vcm1hbC55PjA/bi5tYXgueTpuLm1pbi55LHQuej1vLm5vcm1hbC56PjA/bi5taW4uejpuLm1heC56LGUuej1vLm5vcm1hbC56PjA/bi5tYXguejpuLm1pbi56O3ZhciBhPW8uZGlzdGFuY2VUb1BvaW50KHQpLHM9by5kaXN0YW5jZVRvUG9pbnQoZSk7aWYoYTwwJiZzPDApcmV0dXJuITF9cmV0dXJuITB9fSgpLGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMucGxhbmVzLG49MDtuPDY7bisrKWlmKGVbbl0uZGlzdGFuY2VUb1BvaW50KHQpPDApcmV0dXJuITE7cmV0dXJuITB9fSksYShpdC5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm9yaWdpbi5jb3B5KHQpLHRoaXMuZGlyZWN0aW9uLmNvcHkoZSksdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3JpZ2luLmNvcHkodC5vcmlnaW4pLHRoaXMuZGlyZWN0aW9uLmNvcHkodC5kaXJlY3Rpb24pLHRoaXN9LGF0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZXx8bmV3IG47cmV0dXJuIGkuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMub3JpZ2luKX0sbG9va0F0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcmVjdGlvbi5jb3B5KHQpLnN1Yih0aGlzLm9yaWdpbikubm9ybWFsaXplKCksdGhpc30scmVjYXN0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9yaWdpbi5jb3B5KHRoaXMuYXQoZSx0KSksdGhpc319KCksY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbih0LGUpe3ZhciBpPWV8fG5ldyBuO2kuc3ViVmVjdG9ycyh0LHRoaXMub3JpZ2luKTt2YXIgcj1pLmRvdCh0aGlzLmRpcmVjdGlvbik7cmV0dXJuIHI8MD9pLmNvcHkodGhpcy5vcmlnaW4pOmkuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIocikuYWRkKHRoaXMub3JpZ2luKX0sZGlzdGFuY2VUb1BvaW50OmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0YW5jZVNxVG9Qb2ludCh0KSl9LGRpc3RhbmNlU3FUb1BvaW50OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPXQuc3ViVmVjdG9ycyhlLHRoaXMub3JpZ2luKS5kb3QodGhpcy5kaXJlY3Rpb24pO3JldHVybiBuPDA/dGhpcy5vcmlnaW4uZGlzdGFuY2VUb1NxdWFyZWQoZSk6KHQuY29weSh0aGlzLmRpcmVjdGlvbikubXVsdGlwbHlTY2FsYXIobikuYWRkKHRoaXMub3JpZ2luKSx0LmRpc3RhbmNlVG9TcXVhcmVkKGUpKX19KCksZGlzdGFuY2VTcVRvU2VnbWVudDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG4saT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24obixyLG8sYSl7dC5jb3B5KG4pLmFkZChyKS5tdWx0aXBseVNjYWxhciguNSksZS5jb3B5KHIpLnN1YihuKS5ub3JtYWxpemUoKSxpLmNvcHkodGhpcy5vcmlnaW4pLnN1Yih0KTt2YXIgcyx1LGwsYyxoPS41Km4uZGlzdGFuY2VUbyhyKSxmPS10aGlzLmRpcmVjdGlvbi5kb3QoZSksZD1pLmRvdCh0aGlzLmRpcmVjdGlvbikscD0taS5kb3QoZSksZz1pLmxlbmd0aFNxKCksdj1NYXRoLmFicygxLWYqZik7aWYodj4wKWlmKHM9ZipwLWQsdT1mKmQtcCxjPWgqdixzPj0wKWlmKHU+PS1jKWlmKHU8PWMpe3ZhciBtPTEvdjtzKj1tLHUqPW0sbD1zKihzK2YqdSsyKmQpK3UqKGYqcyt1KzIqcCkrZ31lbHNlIHU9aCxzPU1hdGgubWF4KDAsLShmKnUrZCkpLGw9LXMqcyt1Kih1KzIqcCkrZztlbHNlIHU9LWgscz1NYXRoLm1heCgwLC0oZip1K2QpKSxsPS1zKnMrdSoodSsyKnApK2c7ZWxzZSB1PD0tYz8ocz1NYXRoLm1heCgwLC0oLWYqaCtkKSksdT1zPjA/LWg6TWF0aC5taW4oTWF0aC5tYXgoLWgsLXApLGgpLGw9LXMqcyt1Kih1KzIqcCkrZyk6dTw9Yz8ocz0wLHU9TWF0aC5taW4oTWF0aC5tYXgoLWgsLXApLGgpLGw9dSoodSsyKnApK2cpOihzPU1hdGgubWF4KDAsLShmKmgrZCkpLHU9cz4wP2g6TWF0aC5taW4oTWF0aC5tYXgoLWgsLXApLGgpLGw9LXMqcyt1Kih1KzIqcCkrZyk7ZWxzZSB1PWY+MD8taDpoLHM9TWF0aC5tYXgoMCwtKGYqdStkKSksbD0tcypzK3UqKHUrMipwKStnO3JldHVybiBvJiZvLmNvcHkodGhpcy5kaXJlY3Rpb24pLm11bHRpcGx5U2NhbGFyKHMpLmFkZCh0aGlzLm9yaWdpbiksYSYmYS5jb3B5KGUpLm11bHRpcGx5U2NhbGFyKHUpLmFkZCh0KSxsfX0oKSxpbnRlcnNlY3RTcGhlcmU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSxuKXt0LnN1YlZlY3RvcnMoZS5jZW50ZXIsdGhpcy5vcmlnaW4pO3ZhciBpPXQuZG90KHRoaXMuZGlyZWN0aW9uKSxyPXQuZG90KHQpLWkqaSxvPWUucmFkaXVzKmUucmFkaXVzO2lmKHI+bylyZXR1cm4gbnVsbDt2YXIgYT1NYXRoLnNxcnQoby1yKSxzPWktYSx1PWkrYTtyZXR1cm4gczwwJiZ1PDA/bnVsbDpzPDA/dGhpcy5hdCh1LG4pOnRoaXMuYXQocyxuKX19KCksaW50ZXJzZWN0c1NwaGVyZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXN0YW5jZVRvUG9pbnQodC5jZW50ZXIpPD10LnJhZGl1c30sZGlzdGFuY2VUb1BsYW5lOmZ1bmN0aW9uKHQpe3ZhciBlPXQubm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbik7aWYoMD09PWUpcmV0dXJuIDA9PT10LmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik/MDpudWxsO3ZhciBuPS0odGhpcy5vcmlnaW4uZG90KHQubm9ybWFsKSt0LmNvbnN0YW50KS9lO3JldHVybiBuPj0wP246bnVsbH0saW50ZXJzZWN0UGxhbmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmRpc3RhbmNlVG9QbGFuZSh0KTtyZXR1cm4gbnVsbD09PW4/bnVsbDp0aGlzLmF0KG4sZSl9LGludGVyc2VjdHNQbGFuZTpmdW5jdGlvbih0KXt2YXIgZT10LmRpc3RhbmNlVG9Qb2ludCh0aGlzLm9yaWdpbik7aWYoMD09PWUpcmV0dXJuITA7dmFyIG49dC5ub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKTtyZXR1cm4gbiplPDB9LGludGVyc2VjdEJveDpmdW5jdGlvbih0LGUpe3ZhciBuLGkscixvLGEscyx1PTEvdGhpcy5kaXJlY3Rpb24ueCxsPTEvdGhpcy5kaXJlY3Rpb24ueSxjPTEvdGhpcy5kaXJlY3Rpb24ueixoPXRoaXMub3JpZ2luO3JldHVybiB1Pj0wPyhuPSh0Lm1pbi54LWgueCkqdSxpPSh0Lm1heC54LWgueCkqdSk6KG49KHQubWF4LngtaC54KSp1LGk9KHQubWluLngtaC54KSp1KSxsPj0wPyhyPSh0Lm1pbi55LWgueSkqbCxvPSh0Lm1heC55LWgueSkqbCk6KHI9KHQubWF4LnktaC55KSpsLG89KHQubWluLnktaC55KSpsKSxuPm98fHI+aT9udWxsOigocj5ufHxuIT09bikmJihuPXIpLChvPGl8fGkhPT1pKSYmKGk9byksYz49MD8oYT0odC5taW4uei1oLnopKmMscz0odC5tYXguei1oLnopKmMpOihhPSh0Lm1heC56LWgueikqYyxzPSh0Lm1pbi56LWgueikqYyksbj5zfHxhPmk/bnVsbDooKGE+bnx8biE9PW4pJiYobj1hKSwoczxpfHxpIT09aSkmJihpPXMpLGk8MD9udWxsOnRoaXMuYXQobj49MD9uOmksZSkpKX0saW50ZXJzZWN0c0JveDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PXRoaXMuaW50ZXJzZWN0Qm94KGUsdCl9fSgpLGludGVyc2VjdFRyaWFuZ2xlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4sZT1uZXcgbixpPW5ldyBuLHI9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKG4sbyxhLHMsdSl7ZS5zdWJWZWN0b3JzKG8sbiksaS5zdWJWZWN0b3JzKGEsbiksci5jcm9zc1ZlY3RvcnMoZSxpKTt2YXIgbCxjPXRoaXMuZGlyZWN0aW9uLmRvdChyKTtpZihjPjApe2lmKHMpcmV0dXJuIG51bGw7bD0xfWVsc2V7aWYoIShjPDApKXJldHVybiBudWxsO2w9LTEsYz0tY310LnN1YlZlY3RvcnModGhpcy5vcmlnaW4sbik7dmFyIGg9bCp0aGlzLmRpcmVjdGlvbi5kb3QoaS5jcm9zc1ZlY3RvcnModCxpKSk7aWYoaDwwKXJldHVybiBudWxsO3ZhciBmPWwqdGhpcy5kaXJlY3Rpb24uZG90KGUuY3Jvc3ModCkpO2lmKGY8MClyZXR1cm4gbnVsbDtpZihoK2Y+YylyZXR1cm4gbnVsbDt2YXIgZD0tbCp0LmRvdChyKTtyZXR1cm4gZDwwP251bGw6dGhpcy5hdChkL2MsdSl9fSgpLGFwcGx5TWF0cml4NDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXJlY3Rpb24uYWRkKHRoaXMub3JpZ2luKS5hcHBseU1hdHJpeDQodCksdGhpcy5vcmlnaW4uYXBwbHlNYXRyaXg0KHQpLHRoaXMuZGlyZWN0aW9uLnN1Yih0aGlzLm9yaWdpbiksdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCksdGhpc30sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9yaWdpbi5lcXVhbHModGhpcy5vcmlnaW4pJiZ0LmRpcmVjdGlvbi5lcXVhbHModGhpcy5kaXJlY3Rpb24pfX0pLHJ0LlJvdGF0aW9uT3JkZXJzPVtcIlhZWlwiLFwiWVpYXCIsXCJaWFlcIixcIlhaWVwiLFwiWVhaXCIsXCJaWVhcIl0scnQuRGVmYXVsdE9yZGVyPVwiWFlaXCIsT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocnQucHJvdG90eXBlLHt4OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3g9dCx0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19LHk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feT10LHRoaXMub25DaGFuZ2VDYWxsYmFjaygpfX0sejp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3p9LHNldDpmdW5jdGlvbih0KXt0aGlzLl96PXQsdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCl9fSxvcmRlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JkZXI9dCx0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKX19fSksYShydC5wcm90b3R5cGUse2lzRXVsZXI6ITAsc2V0OmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiB0aGlzLl94PXQsdGhpcy5feT1lLHRoaXMuX3o9bix0aGlzLl9vcmRlcj1pfHx0aGlzLl9vcmRlcix0aGlzLm9uQ2hhbmdlQ2FsbGJhY2soKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLl94LHRoaXMuX3ksdGhpcy5feix0aGlzLl9vcmRlcil9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3g9dC5feCx0aGlzLl95PXQuX3ksdGhpcy5fej10Ll96LHRoaXMuX29yZGVyPXQuX29yZGVyLHRoaXMub25DaGFuZ2VDYWxsYmFjaygpLHRoaXN9LHNldEZyb21Sb3RhdGlvbk1hdHJpeDpmdW5jdGlvbih0LGUsbil7dmFyIGk9V3IuY2xhbXAscj10LmVsZW1lbnRzLG89clswXSxhPXJbNF0scz1yWzhdLHU9clsxXSxsPXJbNV0sYz1yWzldLGg9clsyXSxmPXJbNl0sZD1yWzEwXTtyZXR1cm4gZT1lfHx0aGlzLl9vcmRlcixcIlhZWlwiPT09ZT8odGhpcy5feT1NYXRoLmFzaW4oaShzLC0xLDEpKSxNYXRoLmFicyhzKTwuOTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMigtYyxkKSx0aGlzLl96PU1hdGguYXRhbjIoLWEsbykpOih0aGlzLl94PU1hdGguYXRhbjIoZixsKSx0aGlzLl96PTApKTpcIllYWlwiPT09ZT8odGhpcy5feD1NYXRoLmFzaW4oLWkoYywtMSwxKSksTWF0aC5hYnMoYyk8Ljk5OTk5Pyh0aGlzLl95PU1hdGguYXRhbjIocyxkKSx0aGlzLl96PU1hdGguYXRhbjIodSxsKSk6KHRoaXMuX3k9TWF0aC5hdGFuMigtaCxvKSx0aGlzLl96PTApKTpcIlpYWVwiPT09ZT8odGhpcy5feD1NYXRoLmFzaW4oaShmLC0xLDEpKSxNYXRoLmFicyhmKTwuOTk5OTk/KHRoaXMuX3k9TWF0aC5hdGFuMigtaCxkKSx0aGlzLl96PU1hdGguYXRhbjIoLWEsbCkpOih0aGlzLl95PTAsdGhpcy5fej1NYXRoLmF0YW4yKHUsbykpKTpcIlpZWFwiPT09ZT8odGhpcy5feT1NYXRoLmFzaW4oLWkoaCwtMSwxKSksTWF0aC5hYnMoaCk8Ljk5OTk5Pyh0aGlzLl94PU1hdGguYXRhbjIoZixkKSx0aGlzLl96PU1hdGguYXRhbjIodSxvKSk6KHRoaXMuX3g9MCx0aGlzLl96PU1hdGguYXRhbjIoLWEsbCkpKTpcIllaWFwiPT09ZT8odGhpcy5fej1NYXRoLmFzaW4oaSh1LC0xLDEpKSxNYXRoLmFicyh1KTwuOTk5OTk/KHRoaXMuX3g9TWF0aC5hdGFuMigtYyxsKSx0aGlzLl95PU1hdGguYXRhbjIoLWgsbykpOih0aGlzLl94PTAsdGhpcy5feT1NYXRoLmF0YW4yKHMsZCkpKTpcIlhaWVwiPT09ZT8odGhpcy5fej1NYXRoLmFzaW4oLWkoYSwtMSwxKSksTWF0aC5hYnMoYSk8Ljk5OTk5Pyh0aGlzLl94PU1hdGguYXRhbjIoZixsKSx0aGlzLl95PU1hdGguYXRhbjIocyxvKSk6KHRoaXMuX3g9TWF0aC5hdGFuMigtYyxkKSx0aGlzLl95PTApKTpjb25zb2xlLndhcm4oXCJUSFJFRS5FdWxlcjogLnNldEZyb21Sb3RhdGlvbk1hdHJpeCgpIGdpdmVuIHVuc3VwcG9ydGVkIG9yZGVyOiBcIitlKSx0aGlzLl9vcmRlcj1lLG4hPT0hMSYmdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sc2V0RnJvbVF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGUpLHRoaXMuc2V0RnJvbVJvdGF0aW9uTWF0cml4KHQsbixpKX19KCksc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZXQodC54LHQueSx0LnosZXx8dGhpcy5fb3JkZXIpfSxyZW9yZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LnNldEZyb21FdWxlcih0aGlzKSx0aGlzLnNldEZyb21RdWF0ZXJuaW9uKHQsZSl9fSgpLGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdC5feD09PXRoaXMuX3gmJnQuX3k9PT10aGlzLl95JiZ0Ll96PT09dGhpcy5feiYmdC5fb3JkZXI9PT10aGlzLl9vcmRlcn0sZnJvbUFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl94PXRbMF0sdGhpcy5feT10WzFdLHRoaXMuX3o9dFsyXSx2b2lkIDAhPT10WzNdJiYodGhpcy5fb3JkZXI9dFszXSksdGhpcy5vbkNoYW5nZUNhbGxiYWNrKCksdGhpc30sdG9BcnJheTpmdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09ZSYmKGU9MCksdFtlXT10aGlzLl94LHRbZSsxXT10aGlzLl95LHRbZSsyXT10aGlzLl96LHRbZSszXT10aGlzLl9vcmRlcix0fSx0b1ZlY3RvcjM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dC5zZXQodGhpcy5feCx0aGlzLl95LHRoaXMuX3opOm5ldyBuKHRoaXMuX3gsdGhpcy5feSx0aGlzLl96KX0sb25DaGFuZ2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub25DaGFuZ2VDYWxsYmFjaz10LHRoaXN9LG9uQ2hhbmdlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt9fSksYShvdC5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0KXt0aGlzLm1hc2s9MTw8dHwwfSxlbmFibGU6ZnVuY3Rpb24odCl7dGhpcy5tYXNrfD0xPDx0fDB9LHRvZ2dsZTpmdW5jdGlvbih0KXt0aGlzLm1hc2tePTE8PHR8MH0sZGlzYWJsZTpmdW5jdGlvbih0KXt0aGlzLm1hc2smPX4oMTw8dHwwKX0sdGVzdDpmdW5jdGlvbih0KXtyZXR1cm4gMCE9PSh0aGlzLm1hc2smdC5tYXNrKX19KTt2YXIgZnM9MDthdC5EZWZhdWx0VXA9bmV3IG4oMCwxLDApLGF0LkRlZmF1bHRNYXRyaXhBdXRvVXBkYXRlPSEwLGEoYXQucHJvdG90eXBlLHIucHJvdG90eXBlLHtpc09iamVjdDNEOiEwLGFwcGx5TWF0cml4OmZ1bmN0aW9uKHQpe3RoaXMubWF0cml4Lm11bHRpcGx5TWF0cmljZXModCx0aGlzLm1hdHJpeCksdGhpcy5tYXRyaXguZGVjb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpfSxzZXRSb3RhdGlvbkZyb21BeGlzQW5nbGU6ZnVuY3Rpb24odCxlKXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSh0LGUpfSxzZXRSb3RhdGlvbkZyb21FdWxlcjpmdW5jdGlvbih0KXt0aGlzLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHQsITApfSxzZXRSb3RhdGlvbkZyb21NYXRyaXg6ZnVuY3Rpb24odCl7dGhpcy5xdWF0ZXJuaW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0KX0sc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbjpmdW5jdGlvbih0KXt0aGlzLnF1YXRlcm5pb24uY29weSh0KX0scm90YXRlT25BeGlzOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuc2V0RnJvbUF4aXNBbmdsZShlLG4pLHRoaXMucXVhdGVybmlvbi5tdWx0aXBseSh0KSx0aGlzfX0oKSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4oMSwwLDApO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yb3RhdGVPbkF4aXModCxlKX19KCkscm90YXRlWTpmdW5jdGlvbigpe3ZhciB0PW5ldyBuKDAsMSwwKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucm90YXRlT25BeGlzKHQsZSl9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbigwLDAsMSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJvdGF0ZU9uQXhpcyh0LGUpfX0oKSx0cmFuc2xhdGVPbkF4aXM6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSxuKXtcbnJldHVybiB0LmNvcHkoZSkuYXBwbHlRdWF0ZXJuaW9uKHRoaXMucXVhdGVybmlvbiksdGhpcy5wb3NpdGlvbi5hZGQodC5tdWx0aXBseVNjYWxhcihuKSksdGhpc319KCksdHJhbnNsYXRlWDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuKDEsMCwwKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudHJhbnNsYXRlT25BeGlzKHQsZSl9fSgpLHRyYW5zbGF0ZVk6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbigwLDEsMCk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRyYW5zbGF0ZU9uQXhpcyh0LGUpfX0oKSx0cmFuc2xhdGVaOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4oMCwwLDEpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVPbkF4aXModCxlKX19KCksbG9jYWxUb1dvcmxkOmZ1bmN0aW9uKHQpe3JldHVybiB0LmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKX0sd29ybGRUb0xvY2FsOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGx5TWF0cml4NCh0LmdldEludmVyc2UodGhpcy5tYXRyaXhXb3JsZCkpfX0oKSxsb29rQXQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSl7dGhpcy5pc0NhbWVyYT90Lmxvb2tBdCh0aGlzLnBvc2l0aW9uLGUsdGhpcy51cCk6dC5sb29rQXQoZSx0aGlzLnBvc2l0aW9uLHRoaXMudXApLHRoaXMucXVhdGVybmlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgodCl9fSgpLGFkZDpmdW5jdGlvbih0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe2Zvcih2YXIgZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdGhpcy5hZGQoYXJndW1lbnRzW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gdD09PXRoaXM/KGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBjYW4ndCBiZSBhZGRlZCBhcyBhIGNoaWxkIG9mIGl0c2VsZi5cIix0KSx0aGlzKToodCYmdC5pc09iamVjdDNEPyhudWxsIT09dC5wYXJlbnQmJnQucGFyZW50LnJlbW92ZSh0KSx0LnBhcmVudD10aGlzLHQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFkZGVkXCJ9KSx0aGlzLmNoaWxkcmVuLnB1c2godCkpOmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5PYmplY3QzRC5hZGQ6IG9iamVjdCBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuT2JqZWN0M0QuXCIsdCksdGhpcyl9LHJlbW92ZTpmdW5jdGlvbih0KXtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0aGlzLnJlbW92ZShhcmd1bWVudHNbZV0pO3ZhciBuPXRoaXMuY2hpbGRyZW4uaW5kZXhPZih0KTtuIT09LTEmJih0LnBhcmVudD1udWxsLHQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlbW92ZWRcIn0pLHRoaXMuY2hpbGRyZW4uc3BsaWNlKG4sMSkpfSxnZXRPYmplY3RCeUlkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldE9iamVjdEJ5UHJvcGVydHkoXCJpZFwiLHQpfSxnZXRPYmplY3RCeU5hbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0T2JqZWN0QnlQcm9wZXJ0eShcIm5hbWVcIix0KX0sZ2V0T2JqZWN0QnlQcm9wZXJ0eTpmdW5jdGlvbih0LGUpe2lmKHRoaXNbdF09PT1lKXJldHVybiB0aGlzO2Zvcih2YXIgbj0wLGk9dGhpcy5jaGlsZHJlbi5sZW5ndGg7bjxpO24rKyl7dmFyIHI9dGhpcy5jaGlsZHJlbltuXSxvPXIuZ2V0T2JqZWN0QnlQcm9wZXJ0eSh0LGUpO2lmKHZvaWQgMCE9PW8pcmV0dXJuIG99fSxnZXRXb3JsZFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXR8fG5ldyBuO3JldHVybiB0aGlzLnVwZGF0ZU1hdHJpeFdvcmxkKCEwKSxlLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLm1hdHJpeFdvcmxkKX0sZ2V0V29ybGRRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4saT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bnx8bmV3IGU7cmV0dXJuIHRoaXMudXBkYXRlTWF0cml4V29ybGQoITApLHRoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKHQscixpKSxyfX0oKSxnZXRXb3JsZFJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWV8fG5ldyBydDtyZXR1cm4gdGhpcy5nZXRXb3JsZFF1YXRlcm5pb24odCksbi5zZXRGcm9tUXVhdGVybmlvbih0LHRoaXMucm90YXRpb24ub3JkZXIsITEpfX0oKSxnZXRXb3JsZFNjYWxlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4saT1uZXcgZTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9ZXx8bmV3IG47cmV0dXJuIHRoaXMudXBkYXRlTWF0cml4V29ybGQoITApLHRoaXMubWF0cml4V29ybGQuZGVjb21wb3NlKHQsaSxyKSxyfX0oKSxnZXRXb3JsZERpcmVjdGlvbjpmdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgaT1lfHxuZXcgbjtyZXR1cm4gdGhpcy5nZXRXb3JsZFF1YXRlcm5pb24odCksaS5zZXQoMCwwLDEpLmFwcGx5UXVhdGVybmlvbih0KX19KCkscmF5Y2FzdDpmdW5jdGlvbigpe30sdHJhdmVyc2U6ZnVuY3Rpb24odCl7dCh0aGlzKTtmb3IodmFyIGU9dGhpcy5jaGlsZHJlbixuPTAsaT1lLmxlbmd0aDtuPGk7bisrKWVbbl0udHJhdmVyc2UodCl9LHRyYXZlcnNlVmlzaWJsZTpmdW5jdGlvbih0KXtpZih0aGlzLnZpc2libGUhPT0hMSl7dCh0aGlzKTtmb3IodmFyIGU9dGhpcy5jaGlsZHJlbixuPTAsaT1lLmxlbmd0aDtuPGk7bisrKWVbbl0udHJhdmVyc2VWaXNpYmxlKHQpfX0sdHJhdmVyc2VBbmNlc3RvcnM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQ7bnVsbCE9PWUmJih0KGUpLGUudHJhdmVyc2VBbmNlc3RvcnModCkpfSx1cGRhdGVNYXRyaXg6ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5jb21wb3NlKHRoaXMucG9zaXRpb24sdGhpcy5xdWF0ZXJuaW9uLHRoaXMuc2NhbGUpLHRoaXMubWF0cml4V29ybGROZWVkc1VwZGF0ZT0hMH0sdXBkYXRlTWF0cml4V29ybGQ6ZnVuY3Rpb24odCl7dGhpcy5tYXRyaXhBdXRvVXBkYXRlJiZ0aGlzLnVwZGF0ZU1hdHJpeCgpLCh0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGV8fHQpJiYobnVsbD09PXRoaXMucGFyZW50P3RoaXMubWF0cml4V29ybGQuY29weSh0aGlzLm1hdHJpeCk6dGhpcy5tYXRyaXhXb3JsZC5tdWx0aXBseU1hdHJpY2VzKHRoaXMucGFyZW50Lm1hdHJpeFdvcmxkLHRoaXMubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9ITEsdD0hMCk7Zm9yKHZhciBlPXRoaXMuY2hpbGRyZW4sbj0wLGk9ZS5sZW5ndGg7bjxpO24rKyllW25dLnVwZGF0ZU1hdHJpeFdvcmxkKHQpfSx0b0pTT046ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3JldHVybiB2b2lkIDA9PT1lW24udXVpZF0mJihlW24udXVpZF09bi50b0pTT04odCkpLG4udXVpZH1mdW5jdGlvbiBuKHQpe3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KXt2YXIgaT10W25dO2RlbGV0ZSBpLm1ldGFkYXRhLGUucHVzaChpKX1yZXR1cm4gZX12YXIgaT12b2lkIDA9PT10fHxcIlwiPT09dCxyPXt9O2kmJih0PXtnZW9tZXRyaWVzOnt9LG1hdGVyaWFsczp7fSx0ZXh0dXJlczp7fSxpbWFnZXM6e319LHIubWV0YWRhdGE9e3ZlcnNpb246NC41LHR5cGU6XCJPYmplY3RcIixnZW5lcmF0b3I6XCJPYmplY3QzRC50b0pTT05cIn0pO3ZhciBvPXt9O2lmKG8udXVpZD10aGlzLnV1aWQsby50eXBlPXRoaXMudHlwZSxcIlwiIT09dGhpcy5uYW1lJiYoby5uYW1lPXRoaXMubmFtZSksXCJ7fVwiIT09SlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkmJihvLnVzZXJEYXRhPXRoaXMudXNlckRhdGEpLHRoaXMuY2FzdFNoYWRvdz09PSEwJiYoby5jYXN0U2hhZG93PSEwKSx0aGlzLnJlY2VpdmVTaGFkb3c9PT0hMCYmKG8ucmVjZWl2ZVNoYWRvdz0hMCksdGhpcy52aXNpYmxlPT09ITEmJihvLnZpc2libGU9ITEpLG8ubWF0cml4PXRoaXMubWF0cml4LnRvQXJyYXkoKSx2b2lkIDAhPT10aGlzLmdlb21ldHJ5JiYoby5nZW9tZXRyeT1lKHQuZ2VvbWV0cmllcyx0aGlzLmdlb21ldHJ5KSksdm9pZCAwIT09dGhpcy5tYXRlcmlhbClpZihBcnJheS5pc0FycmF5KHRoaXMubWF0ZXJpYWwpKXtmb3IodmFyIGE9W10scz0wLHU9dGhpcy5tYXRlcmlhbC5sZW5ndGg7czx1O3MrKylhLnB1c2goZSh0Lm1hdGVyaWFscyx0aGlzLm1hdGVyaWFsW3NdKSk7by5tYXRlcmlhbD1hfWVsc2Ugby5tYXRlcmlhbD1lKHQubWF0ZXJpYWxzLHRoaXMubWF0ZXJpYWwpO2lmKHRoaXMuY2hpbGRyZW4ubGVuZ3RoPjApe28uY2hpbGRyZW49W107Zm9yKHZhciBzPTA7czx0aGlzLmNoaWxkcmVuLmxlbmd0aDtzKyspby5jaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5bc10udG9KU09OKHQpLm9iamVjdCl9aWYoaSl7dmFyIGw9bih0Lmdlb21ldHJpZXMpLGM9bih0Lm1hdGVyaWFscyksaD1uKHQudGV4dHVyZXMpLGY9bih0LmltYWdlcyk7bC5sZW5ndGg+MCYmKHIuZ2VvbWV0cmllcz1sKSxjLmxlbmd0aD4wJiYoci5tYXRlcmlhbHM9YyksaC5sZW5ndGg+MCYmKHIudGV4dHVyZXM9aCksZi5sZW5ndGg+MCYmKHIuaW1hZ2VzPWYpfXJldHVybiByLm9iamVjdD1vLHJ9LGNsb25lOmZ1bmN0aW9uKHQpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzLHQpfSxjb3B5OmZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9ITApLHRoaXMubmFtZT10Lm5hbWUsdGhpcy51cC5jb3B5KHQudXApLHRoaXMucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKSx0aGlzLnF1YXRlcm5pb24uY29weSh0LnF1YXRlcm5pb24pLHRoaXMuc2NhbGUuY29weSh0LnNjYWxlKSx0aGlzLm1hdHJpeC5jb3B5KHQubWF0cml4KSx0aGlzLm1hdHJpeFdvcmxkLmNvcHkodC5tYXRyaXhXb3JsZCksdGhpcy5tYXRyaXhBdXRvVXBkYXRlPXQubWF0cml4QXV0b1VwZGF0ZSx0aGlzLm1hdHJpeFdvcmxkTmVlZHNVcGRhdGU9dC5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlLHRoaXMubGF5ZXJzLm1hc2s9dC5sYXllcnMubWFzayx0aGlzLnZpc2libGU9dC52aXNpYmxlLHRoaXMuY2FzdFNoYWRvdz10LmNhc3RTaGFkb3csdGhpcy5yZWNlaXZlU2hhZG93PXQucmVjZWl2ZVNoYWRvdyx0aGlzLmZydXN0dW1DdWxsZWQ9dC5mcnVzdHVtQ3VsbGVkLHRoaXMucmVuZGVyT3JkZXI9dC5yZW5kZXJPcmRlcix0aGlzLnVzZXJEYXRhPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodC51c2VyRGF0YSkpLGU9PT0hMClmb3IodmFyIG49MDtuPHQuY2hpbGRyZW4ubGVuZ3RoO24rKyl7dmFyIGk9dC5jaGlsZHJlbltuXTt0aGlzLmFkZChpLmNsb25lKCkpfXJldHVybiB0aGlzfX0pLGEoc3QucHJvdG90eXBlLHtzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zdGFydC5jb3B5KHQpLHRoaXMuZW5kLmNvcHkoZSksdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RhcnQuY29weSh0LnN0YXJ0KSx0aGlzLmVuZC5jb3B5KHQuZW5kKSx0aGlzfSxnZXRDZW50ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IG47cmV0dXJuIGUuYWRkVmVjdG9ycyh0aGlzLnN0YXJ0LHRoaXMuZW5kKS5tdWx0aXBseVNjYWxhciguNSl9LGRlbHRhOmZ1bmN0aW9uKHQpe3ZhciBlPXR8fG5ldyBuO3JldHVybiBlLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCl9LGRpc3RhbmNlU3E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydC5kaXN0YW5jZVRvU3F1YXJlZCh0aGlzLmVuZCl9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnQuZGlzdGFuY2VUbyh0aGlzLmVuZCl9LGF0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZXx8bmV3IG47cmV0dXJuIHRoaXMuZGVsdGEoaSkubXVsdGlwbHlTY2FsYXIodCkuYWRkKHRoaXMuc3RhcnQpfSxjbG9zZXN0UG9pbnRUb1BvaW50UGFyYW1ldGVyOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG4sZT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24obixpKXt0LnN1YlZlY3RvcnMobix0aGlzLnN0YXJ0KSxlLnN1YlZlY3RvcnModGhpcy5lbmQsdGhpcy5zdGFydCk7dmFyIHI9ZS5kb3QoZSksbz1lLmRvdCh0KSxhPW8vcjtyZXR1cm4gaSYmKGE9V3IuY2xhbXAoYSwwLDEpKSxhfX0oKSxjbG9zZXN0UG9pbnRUb1BvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLmNsb3Nlc3RQb2ludFRvUG9pbnRQYXJhbWV0ZXIodCxlKSxvPWl8fG5ldyBuO3JldHVybiB0aGlzLmRlbHRhKG8pLm11bHRpcGx5U2NhbGFyKHIpLmFkZCh0aGlzLnN0YXJ0KX0sYXBwbHlNYXRyaXg0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXJ0LmFwcGx5TWF0cml4NCh0KSx0aGlzLmVuZC5hcHBseU1hdHJpeDQodCksdGhpc30sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0YXJ0LmVxdWFscyh0aGlzLnN0YXJ0KSYmdC5lbmQuZXF1YWxzKHRoaXMuZW5kKX19KSxhKHV0LHtub3JtYWw6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbjtyZXR1cm4gZnVuY3Rpb24oZSxpLHIsbyl7dmFyIGE9b3x8bmV3IG47YS5zdWJWZWN0b3JzKHIsaSksdC5zdWJWZWN0b3JzKGUsaSksYS5jcm9zcyh0KTt2YXIgcz1hLmxlbmd0aFNxKCk7cmV0dXJuIHM+MD9hLm11bHRpcGx5U2NhbGFyKDEvTWF0aC5zcXJ0KHMpKTphLnNldCgwLDAsMCl9fSgpLGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG4saT1uZXcgbjtyZXR1cm4gZnVuY3Rpb24ocixvLGEscyx1KXt0LnN1YlZlY3RvcnMocyxvKSxlLnN1YlZlY3RvcnMoYSxvKSxpLnN1YlZlY3RvcnMocixvKTt2YXIgbD10LmRvdCh0KSxjPXQuZG90KGUpLGg9dC5kb3QoaSksZj1lLmRvdChlKSxkPWUuZG90KGkpLHA9bCpmLWMqYyxnPXV8fG5ldyBuO2lmKDA9PT1wKXJldHVybiBnLnNldCgtMiwtMSwtMSk7dmFyIHY9MS9wLG09KGYqaC1jKmQpKnYseT0obCpkLWMqaCkqdjtyZXR1cm4gZy5zZXQoMS1tLXkseSxtKX19KCksY29udGFpbnNQb2ludDpmdW5jdGlvbigpe3ZhciB0PW5ldyBuO3JldHVybiBmdW5jdGlvbihlLG4saSxyKXt2YXIgbz11dC5iYXJ5Y29vcmRGcm9tUG9pbnQoZSxuLGkscix0KTtyZXR1cm4gby54Pj0wJiZvLnk+PTAmJm8ueCtvLnk8PTF9fSgpfSksYSh1dC5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMuYS5jb3B5KHQpLHRoaXMuYi5jb3B5KGUpLHRoaXMuYy5jb3B5KG4pLHRoaXN9LHNldEZyb21Qb2ludHNBbmRJbmRpY2VzOmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiB0aGlzLmEuY29weSh0W2VdKSx0aGlzLmIuY29weSh0W25dKSx0aGlzLmMuY29weSh0W2ldKSx0aGlzfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hLmNvcHkodC5hKSx0aGlzLmIuY29weSh0LmIpLHRoaXMuYy5jb3B5KHQuYyksdGhpc30sYXJlYTpmdW5jdGlvbigpe3ZhciB0PW5ldyBuLGU9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3ViVmVjdG9ycyh0aGlzLmMsdGhpcy5iKSxlLnN1YlZlY3RvcnModGhpcy5hLHRoaXMuYiksLjUqdC5jcm9zcyhlKS5sZW5ndGgoKX19KCksbWlkcG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IG47cmV0dXJuIGUuYWRkVmVjdG9ycyh0aGlzLmEsdGhpcy5iKS5hZGQodGhpcy5jKS5tdWx0aXBseVNjYWxhcigxLzMpfSxub3JtYWw6ZnVuY3Rpb24odCl7cmV0dXJuIHV0Lm5vcm1hbCh0aGlzLmEsdGhpcy5iLHRoaXMuYyx0KX0scGxhbmU6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IHR0O3JldHVybiBlLnNldEZyb21Db3BsYW5hclBvaW50cyh0aGlzLmEsdGhpcy5iLHRoaXMuYyl9LGJhcnljb29yZEZyb21Qb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB1dC5iYXJ5Y29vcmRGcm9tUG9pbnQodCx0aGlzLmEsdGhpcy5iLHRoaXMuYyxlKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdXQuY29udGFpbnNQb2ludCh0LHRoaXMuYSx0aGlzLmIsdGhpcy5jKX0sY2xvc2VzdFBvaW50VG9Qb2ludDpmdW5jdGlvbigpe3ZhciB0PW5ldyB0dCxlPVtuZXcgc3QsbmV3IHN0LG5ldyBzdF0saT1uZXcgbixyPW5ldyBuO3JldHVybiBmdW5jdGlvbihvLGEpe3ZhciBzPWF8fG5ldyBuLHU9MS8wO2lmKHQuc2V0RnJvbUNvcGxhbmFyUG9pbnRzKHRoaXMuYSx0aGlzLmIsdGhpcy5jKSx0LnByb2plY3RQb2ludChvLGkpLHRoaXMuY29udGFpbnNQb2ludChpKT09PSEwKXMuY29weShpKTtlbHNle2VbMF0uc2V0KHRoaXMuYSx0aGlzLmIpLGVbMV0uc2V0KHRoaXMuYix0aGlzLmMpLGVbMl0uc2V0KHRoaXMuYyx0aGlzLmEpO2Zvcih2YXIgbD0wO2w8ZS5sZW5ndGg7bCsrKXtlW2xdLmNsb3Nlc3RQb2ludFRvUG9pbnQoaSwhMCxyKTt2YXIgYz1pLmRpc3RhbmNlVG9TcXVhcmVkKHIpO2M8dSYmKHU9YyxzLmNvcHkocikpfX1yZXR1cm4gc319KCksZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0LmEuZXF1YWxzKHRoaXMuYSkmJnQuYi5lcXVhbHModGhpcy5iKSYmdC5jLmVxdWFscyh0aGlzLmMpfX0pLGEobHQucHJvdG90eXBlLHtjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXt0aGlzLmE9dC5hLHRoaXMuYj10LmIsdGhpcy5jPXQuYyx0aGlzLm5vcm1hbC5jb3B5KHQubm9ybWFsKSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5tYXRlcmlhbEluZGV4PXQubWF0ZXJpYWxJbmRleDtmb3IodmFyIGU9MCxuPXQudmVydGV4Tm9ybWFscy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnZlcnRleE5vcm1hbHNbZV09dC52ZXJ0ZXhOb3JtYWxzW2VdLmNsb25lKCk7Zm9yKHZhciBlPTAsbj10LnZlcnRleENvbG9ycy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnZlcnRleENvbG9yc1tlXT10LnZlcnRleENvbG9yc1tlXS5jbG9uZSgpO3JldHVybiB0aGlzfX0pLGN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFcucHJvdG90eXBlKSxjdC5wcm90b3R5cGUuY29uc3RydWN0b3I9Y3QsY3QucHJvdG90eXBlLmlzTWVzaEJhc2ljTWF0ZXJpYWw9ITAsY3QucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIFcucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLm1hcD10Lm1hcCx0aGlzLmxpZ2h0TWFwPXQubGlnaHRNYXAsdGhpcy5saWdodE1hcEludGVuc2l0eT10LmxpZ2h0TWFwSW50ZW5zaXR5LHRoaXMuYW9NYXA9dC5hb01hcCx0aGlzLmFvTWFwSW50ZW5zaXR5PXQuYW9NYXBJbnRlbnNpdHksdGhpcy5zcGVjdWxhck1hcD10LnNwZWN1bGFyTWFwLHRoaXMuYWxwaGFNYXA9dC5hbHBoYU1hcCx0aGlzLmVudk1hcD10LmVudk1hcCx0aGlzLmNvbWJpbmU9dC5jb21iaW5lLHRoaXMucmVmbGVjdGl2aXR5PXQucmVmbGVjdGl2aXR5LHRoaXMucmVmcmFjdGlvblJhdGlvPXQucmVmcmFjdGlvblJhdGlvLHRoaXMud2lyZWZyYW1lPXQud2lyZWZyYW1lLHRoaXMud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoLHRoaXMud2lyZWZyYW1lTGluZWNhcD10LndpcmVmcmFtZUxpbmVjYXAsdGhpcy53aXJlZnJhbWVMaW5lam9pbj10LndpcmVmcmFtZUxpbmVqb2luLHRoaXMuc2tpbm5pbmc9dC5za2lubmluZyx0aGlzLm1vcnBoVGFyZ2V0cz10Lm1vcnBoVGFyZ2V0cyx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaHQucHJvdG90eXBlLFwibmVlZHNVcGRhdGVcIix7c2V0OmZ1bmN0aW9uKHQpe3Q9PT0hMCYmdGhpcy52ZXJzaW9uKyt9fSksYShodC5wcm90b3R5cGUse2lzQnVmZmVyQXR0cmlidXRlOiEwLHNldEFycmF5OmZ1bmN0aW9uKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRIUkVFLkJ1ZmZlckF0dHJpYnV0ZTogYXJyYXkgc2hvdWxkIGJlIGEgVHlwZWQgQXJyYXkuXCIpO3RoaXMuY291bnQ9dm9pZCAwIT09dD90Lmxlbmd0aC90aGlzLml0ZW1TaXplOjAsdGhpcy5hcnJheT10fSxzZXREeW5hbWljOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmR5bmFtaWM9dCx0aGlzfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5PW5ldyB0LmFycmF5LmNvbnN0cnVjdG9yKHQuYXJyYXkpLHRoaXMuaXRlbVNpemU9dC5pdGVtU2l6ZSx0aGlzLmNvdW50PXQuY291bnQsdGhpcy5ub3JtYWxpemVkPXQubm9ybWFsaXplZCx0aGlzLmR5bmFtaWM9dC5keW5hbWljLHRoaXN9LGNvcHlBdDpmdW5jdGlvbih0LGUsbil7dCo9dGhpcy5pdGVtU2l6ZSxuKj1lLml0ZW1TaXplO2Zvcih2YXIgaT0wLHI9dGhpcy5pdGVtU2l6ZTtpPHI7aSsrKXRoaXMuYXJyYXlbdCtpXT1lLmFycmF5W24raV07cmV0dXJuIHRoaXN9LGNvcHlBcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheS5zZXQodCksdGhpc30sY29weUNvbG9yc0FycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFycmF5LG49MCxpPTAscj10Lmxlbmd0aDtpPHI7aSsrKXt2YXIgbz10W2ldO3ZvaWQgMD09PW8mJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weUNvbG9yc0FycmF5KCk6IGNvbG9yIGlzIHVuZGVmaW5lZFwiLGkpLG89bmV3IHEpLGVbbisrXT1vLnIsZVtuKytdPW8uZyxlW24rK109by5ifXJldHVybiB0aGlzfSxjb3B5SW5kaWNlc0FycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFycmF5LG49MCxpPTAscj10Lmxlbmd0aDtpPHI7aSsrKXt2YXIgbz10W2ldO2VbbisrXT1vLmEsZVtuKytdPW8uYixlW24rK109by5jfXJldHVybiB0aGlzfSxjb3B5VmVjdG9yMnNBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5hcnJheSxuPTAsaT0wLHI9dC5sZW5ndGg7aTxyO2krKyl7dmFyIGE9dFtpXTt2b2lkIDA9PT1hJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3Iyc0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixpKSxhPW5ldyBvKSxlW24rK109YS54LGVbbisrXT1hLnl9cmV0dXJuIHRoaXN9LGNvcHlWZWN0b3Izc0FycmF5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFycmF5LGk9MCxyPTAsbz10Lmxlbmd0aDtyPG87cisrKXt2YXIgYT10W3JdO3ZvaWQgMD09PWEmJihjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJBdHRyaWJ1dGUuY29weVZlY3RvcjNzQXJyYXkoKTogdmVjdG9yIGlzIHVuZGVmaW5lZFwiLHIpLGE9bmV3IG4pLGVbaSsrXT1hLngsZVtpKytdPWEueSxlW2krK109YS56fXJldHVybiB0aGlzfSxjb3B5VmVjdG9yNHNBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5hcnJheSxuPTAsaT0wLHI9dC5sZW5ndGg7aTxyO2krKyl7dmFyIG89dFtpXTt2b2lkIDA9PT1vJiYoY29uc29sZS53YXJuKFwiVEhSRUUuQnVmZmVyQXR0cmlidXRlLmNvcHlWZWN0b3I0c0FycmF5KCk6IHZlY3RvciBpcyB1bmRlZmluZWRcIixpKSxvPW5ldyBIKSxlW24rK109by54LGVbbisrXT1vLnksZVtuKytdPW8ueixlW24rK109by53fXJldHVybiB0aGlzfSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksdGhpcy5hcnJheS5zZXQodCxlKSx0aGlzfSxnZXRYOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZV19LHNldFg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemVdPWUsdGhpc30sZ2V0WTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMV19LHNldFk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hcnJheVt0KnRoaXMuaXRlbVNpemUrMV09ZSx0aGlzfSxnZXRaOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSsyXX0sc2V0WjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFycmF5W3QqdGhpcy5pdGVtU2l6ZSsyXT1lLHRoaXN9LGdldFc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzNdfSxzZXRXOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXJyYXlbdCp0aGlzLml0ZW1TaXplKzNdPWUsdGhpc30sc2V0WFk6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0Kj10aGlzLml0ZW1TaXplLHRoaXMuYXJyYXlbdCswXT1lLHRoaXMuYXJyYXlbdCsxXT1uLHRoaXN9LHNldFhZWjpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gdCo9dGhpcy5pdGVtU2l6ZSx0aGlzLmFycmF5W3QrMF09ZSx0aGlzLmFycmF5W3QrMV09bix0aGlzLmFycmF5W3QrMl09aSx0aGlzfSxzZXRYWVpXOmZ1bmN0aW9uKHQsZSxuLGkscil7cmV0dXJuIHQqPXRoaXMuaXRlbVNpemUsdGhpcy5hcnJheVt0KzBdPWUsdGhpcy5hcnJheVt0KzFdPW4sdGhpcy5hcnJheVt0KzJdPWksdGhpcy5hcnJheVt0KzNdPXIsdGhpc30sb25VcGxvYWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub25VcGxvYWRDYWxsYmFjaz10LHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuYXJyYXksdGhpcy5pdGVtU2l6ZSkuY29weSh0aGlzKX19KSxmdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLGZ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mdCxkdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLGR0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1kdCxwdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLHB0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wdCxndC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLGd0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1ndCx2dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLHZ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12dCxtdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLG10LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1tdCx5dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLHl0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj15dCxfdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLF90LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1fdCxidC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShodC5wcm90b3R5cGUpLGJ0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1idCxhKHh0LnByb3RvdHlwZSx7Y29tcHV0ZUdyb3VwczpmdW5jdGlvbih0KXtmb3IodmFyIGUsbj1bXSxpPXZvaWQgMCxyPXQuZmFjZXMsbz0wO288ci5sZW5ndGg7bysrKXt2YXIgYT1yW29dO2EubWF0ZXJpYWxJbmRleCE9PWkmJihpPWEubWF0ZXJpYWxJbmRleCx2b2lkIDAhPT1lJiYoZS5jb3VudD0zKm8tZS5zdGFydCxuLnB1c2goZSkpLGU9e3N0YXJ0OjMqbyxtYXRlcmlhbEluZGV4Oml9KX12b2lkIDAhPT1lJiYoZS5jb3VudD0zKm8tZS5zdGFydCxuLnB1c2goZSkpLHRoaXMuZ3JvdXBzPW59LGZyb21HZW9tZXRyeTpmdW5jdGlvbih0KXt2YXIgZSxuPXQuZmFjZXMsaT10LnZlcnRpY2VzLHI9dC5mYWNlVmVydGV4VXZzLGE9clswXSYmclswXS5sZW5ndGg+MCxzPXJbMV0mJnJbMV0ubGVuZ3RoPjAsdT10Lm1vcnBoVGFyZ2V0cyxsPXUubGVuZ3RoO2lmKGw+MCl7ZT1bXTtmb3IodmFyIGM9MDtjPGw7YysrKWVbY109W107dGhpcy5tb3JwaFRhcmdldHMucG9zaXRpb249ZX12YXIgaCxmPXQubW9ycGhOb3JtYWxzLGQ9Zi5sZW5ndGg7aWYoZD4wKXtoPVtdO2Zvcih2YXIgYz0wO2M8ZDtjKyspaFtjXT1bXTt0aGlzLm1vcnBoVGFyZ2V0cy5ub3JtYWw9aH1mb3IodmFyIHA9dC5za2luSW5kaWNlcyxnPXQuc2tpbldlaWdodHMsdj1wLmxlbmd0aD09PWkubGVuZ3RoLG09Zy5sZW5ndGg9PT1pLmxlbmd0aCxjPTA7YzxuLmxlbmd0aDtjKyspe3ZhciB5PW5bY107dGhpcy52ZXJ0aWNlcy5wdXNoKGlbeS5hXSxpW3kuYl0saVt5LmNdKTt2YXIgXz15LnZlcnRleE5vcm1hbHM7aWYoMz09PV8ubGVuZ3RoKXRoaXMubm9ybWFscy5wdXNoKF9bMF0sX1sxXSxfWzJdKTtlbHNle3ZhciBiPXkubm9ybWFsO3RoaXMubm9ybWFscy5wdXNoKGIsYixiKX12YXIgeD15LnZlcnRleENvbG9ycztpZigzPT09eC5sZW5ndGgpdGhpcy5jb2xvcnMucHVzaCh4WzBdLHhbMV0seFsyXSk7ZWxzZXt2YXIgdz15LmNvbG9yO3RoaXMuY29sb3JzLnB1c2godyx3LHcpfWlmKGE9PT0hMCl7dmFyIEU9clswXVtjXTt2b2lkIDAhPT1FP3RoaXMudXZzLnB1c2goRVswXSxFWzFdLEVbMl0pOihjb25zb2xlLndhcm4oXCJUSFJFRS5EaXJlY3RHZW9tZXRyeS5mcm9tR2VvbWV0cnkoKTogVW5kZWZpbmVkIHZlcnRleFV2IFwiLGMpLHRoaXMudXZzLnB1c2gobmV3IG8sbmV3IG8sbmV3IG8pKX1pZihzPT09ITApe3ZhciBFPXJbMV1bY107dm9pZCAwIT09RT90aGlzLnV2czIucHVzaChFWzBdLEVbMV0sRVsyXSk6KGNvbnNvbGUud2FybihcIlRIUkVFLkRpcmVjdEdlb21ldHJ5LmZyb21HZW9tZXRyeSgpOiBVbmRlZmluZWQgdmVydGV4VXYyIFwiLGMpLHRoaXMudXZzMi5wdXNoKG5ldyBvLG5ldyBvLG5ldyBvKSl9Zm9yKHZhciBTPTA7UzxsO1MrKyl7dmFyIE09dVtTXS52ZXJ0aWNlcztlW1NdLnB1c2goTVt5LmFdLE1beS5iXSxNW3kuY10pfWZvcih2YXIgUz0wO1M8ZDtTKyspe3ZhciBDPWZbU10udmVydGV4Tm9ybWFsc1tjXTtoW1NdLnB1c2goQy5hLEMuYixDLmMpfXYmJnRoaXMuc2tpbkluZGljZXMucHVzaChwW3kuYV0scFt5LmJdLHBbeS5jXSksbSYmdGhpcy5za2luV2VpZ2h0cy5wdXNoKGdbeS5hXSxnW3kuYl0sZ1t5LmNdKX1yZXR1cm4gdGhpcy5jb21wdXRlR3JvdXBzKHQpLHRoaXMudmVydGljZXNOZWVkVXBkYXRlPXQudmVydGljZXNOZWVkVXBkYXRlLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9dC5ub3JtYWxzTmVlZFVwZGF0ZSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9dC5jb2xvcnNOZWVkVXBkYXRlLHRoaXMudXZzTmVlZFVwZGF0ZT10LnV2c05lZWRVcGRhdGUsdGhpcy5ncm91cHNOZWVkVXBkYXRlPXQuZ3JvdXBzTmVlZFVwZGF0ZSx0aGlzfX0pO3ZhciBkcz0wO2EoU3QucHJvdG90eXBlLHIucHJvdG90eXBlLHtpc0dlb21ldHJ5OiEwLGFwcGx5TWF0cml4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0obmV3ICQpLmdldE5vcm1hbE1hdHJpeCh0KSxuPTAsaT10aGlzLnZlcnRpY2VzLmxlbmd0aDtuPGk7bisrKXt2YXIgcj10aGlzLnZlcnRpY2VzW25dO3IuYXBwbHlNYXRyaXg0KHQpfWZvcih2YXIgbj0wLGk9dGhpcy5mYWNlcy5sZW5ndGg7bjxpO24rKyl7dmFyIG89dGhpcy5mYWNlc1tuXTtvLm5vcm1hbC5hcHBseU1hdHJpeDMoZSkubm9ybWFsaXplKCk7Zm9yKHZhciBhPTAscz1vLnZlcnRleE5vcm1hbHMubGVuZ3RoO2E8czthKyspby52ZXJ0ZXhOb3JtYWxzW2FdLmFwcGx5TWF0cml4MyhlKS5ub3JtYWxpemUoKX1yZXR1cm4gbnVsbCE9PXRoaXMuYm91bmRpbmdCb3gmJnRoaXMuY29tcHV0ZUJvdW5kaW5nQm94KCksbnVsbCE9PXRoaXMuYm91bmRpbmdTcGhlcmUmJnRoaXMuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksdGhpcy52ZXJ0aWNlc05lZWRVcGRhdGU9ITAsdGhpcy5ub3JtYWxzTmVlZFVwZGF0ZT0hMCx0aGlzfSxyb3RhdGVYOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0Lm1ha2VSb3RhdGlvblgoZSksdGhpcy5hcHBseU1hdHJpeCh0KSx0aGlzfX0oKSxyb3RhdGVZOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0Lm1ha2VSb3RhdGlvblkoZSksdGhpcy5hcHBseU1hdHJpeCh0KSx0aGlzfX0oKSxyb3RhdGVaOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0Lm1ha2VSb3RhdGlvblooZSksdGhpcy5hcHBseU1hdHJpeCh0KSx0aGlzfX0oKSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiB0Lm1ha2VUcmFuc2xhdGlvbihlLG4saSksdGhpcy5hcHBseU1hdHJpeCh0KSx0aGlzfX0oKSxzY2FsZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBpO3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQubWFrZVNjYWxlKGUsbixpKSx0aGlzLmFwcGx5TWF0cml4KHQpLHRoaXN9fSgpLGxvb2tBdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBhdDtyZXR1cm4gZnVuY3Rpb24oZSl7dC5sb29rQXQoZSksdC51cGRhdGVNYXRyaXgoKSx0aGlzLmFwcGx5TWF0cml4KHQubWF0cml4KX19KCksZnJvbUJ1ZmZlckdlb21ldHJ5OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxlLG4scil7dmFyIG89dm9pZCAwIT09dT9bZlt0XS5jbG9uZSgpLGZbZV0uY2xvbmUoKSxmW25dLmNsb25lKCldOltdLGE9dm9pZCAwIT09bD9baS5jb2xvcnNbdF0uY2xvbmUoKSxpLmNvbG9yc1tlXS5jbG9uZSgpLGkuY29sb3JzW25dLmNsb25lKCldOltdLHM9bmV3IGx0KHQsZSxuLG8sYSxyKTtpLmZhY2VzLnB1c2gocyksdm9pZCAwIT09YyYmaS5mYWNlVmVydGV4VXZzWzBdLnB1c2goW2RbdF0uY2xvbmUoKSxkW2VdLmNsb25lKCksZFtuXS5jbG9uZSgpXSksdm9pZCAwIT09aCYmaS5mYWNlVmVydGV4VXZzWzFdLnB1c2goW3BbdF0uY2xvbmUoKSxwW2VdLmNsb25lKCkscFtuXS5jbG9uZSgpXSl9dmFyIGk9dGhpcyxyPW51bGwhPT10LmluZGV4P3QuaW5kZXguYXJyYXk6dm9pZCAwLGE9dC5hdHRyaWJ1dGVzLHM9YS5wb3NpdGlvbi5hcnJheSx1PXZvaWQgMCE9PWEubm9ybWFsP2Eubm9ybWFsLmFycmF5OnZvaWQgMCxsPXZvaWQgMCE9PWEuY29sb3I/YS5jb2xvci5hcnJheTp2b2lkIDAsYz12b2lkIDAhPT1hLnV2P2EudXYuYXJyYXk6dm9pZCAwLGg9dm9pZCAwIT09YS51djI/YS51djIuYXJyYXk6dm9pZCAwO3ZvaWQgMCE9PWgmJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09W10pO2Zvcih2YXIgZj1bXSxkPVtdLHA9W10sZz0wLHY9MDtnPHMubGVuZ3RoO2crPTMsdis9MilpLnZlcnRpY2VzLnB1c2gobmV3IG4oc1tnXSxzW2crMV0sc1tnKzJdKSksdm9pZCAwIT09dSYmZi5wdXNoKG5ldyBuKHVbZ10sdVtnKzFdLHVbZysyXSkpLHZvaWQgMCE9PWwmJmkuY29sb3JzLnB1c2gobmV3IHEobFtnXSxsW2crMV0sbFtnKzJdKSksdm9pZCAwIT09YyYmZC5wdXNoKG5ldyBvKGNbdl0sY1t2KzFdKSksdm9pZCAwIT09aCYmcC5wdXNoKG5ldyBvKGhbdl0saFt2KzFdKSk7dmFyIG09dC5ncm91cHM7aWYobS5sZW5ndGg+MClmb3IodmFyIGc9MDtnPG0ubGVuZ3RoO2crKylmb3IodmFyIHk9bVtnXSxfPXkuc3RhcnQsYj15LmNvdW50LHY9Xyx4PV8rYjt2PHg7dis9Myl2b2lkIDAhPT1yP2Uoclt2XSxyW3YrMV0sclt2KzJdLHkubWF0ZXJpYWxJbmRleCk6ZSh2LHYrMSx2KzIseS5tYXRlcmlhbEluZGV4KTtlbHNlIGlmKHZvaWQgMCE9PXIpZm9yKHZhciBnPTA7ZzxyLmxlbmd0aDtnKz0zKWUocltnXSxyW2crMV0scltnKzJdKTtlbHNlIGZvcih2YXIgZz0wO2c8cy5sZW5ndGgvMztnKz0zKWUoZyxnKzEsZysyKTtyZXR1cm4gdGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSxudWxsIT09dC5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9dC5ib3VuZGluZ0JveC5jbG9uZSgpKSxudWxsIT09dC5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9dC5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSx0aGlzfSxjZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciB0PXRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKCkubmVnYXRlKCk7cmV0dXJuIHRoaXMudHJhbnNsYXRlKHQueCx0LnksdC56KSx0fSxub3JtYWxpemU6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpO3ZhciB0PXRoaXMuYm91bmRpbmdTcGhlcmUuY2VudGVyLGU9dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMsbj0wPT09ZT8xOjEvZSxyPW5ldyBpO3JldHVybiByLnNldChuLDAsMCwtbip0LngsMCxuLDAsLW4qdC55LDAsMCxuLC1uKnQueiwwLDAsMCwxKSx0aGlzLmFwcGx5TWF0cml4KHIpLHRoaXN9LGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgbixlPW5ldyBuLGk9MCxyPXRoaXMuZmFjZXMubGVuZ3RoO2k8cjtpKyspe3ZhciBvPXRoaXMuZmFjZXNbaV0sYT10aGlzLnZlcnRpY2VzW28uYV0scz10aGlzLnZlcnRpY2VzW28uYl0sdT10aGlzLnZlcnRpY2VzW28uY107dC5zdWJWZWN0b3JzKHUscyksZS5zdWJWZWN0b3JzKGEscyksdC5jcm9zcyhlKSx0Lm5vcm1hbGl6ZSgpLG8ubm9ybWFsLmNvcHkodCl9fSxjb21wdXRlVmVydGV4Tm9ybWFsczpmdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMCk7dmFyIGUsaSxyLG8sYSxzO2ZvcihzPW5ldyBBcnJheSh0aGlzLnZlcnRpY2VzLmxlbmd0aCksZT0wLGk9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZTxpO2UrKylzW2VdPW5ldyBuO2lmKHQpe3ZhciB1LGwsYyxoPW5ldyBuLGY9bmV3IG47Zm9yKHI9MCxvPXRoaXMuZmFjZXMubGVuZ3RoO3I8bztyKyspYT10aGlzLmZhY2VzW3JdLHU9dGhpcy52ZXJ0aWNlc1thLmFdLGw9dGhpcy52ZXJ0aWNlc1thLmJdLGM9dGhpcy52ZXJ0aWNlc1thLmNdLGguc3ViVmVjdG9ycyhjLGwpLGYuc3ViVmVjdG9ycyh1LGwpLGguY3Jvc3MoZiksc1thLmFdLmFkZChoKSxzW2EuYl0uYWRkKGgpLHNbYS5jXS5hZGQoaCl9ZWxzZSBmb3IodGhpcy5jb21wdXRlRmFjZU5vcm1hbHMoKSxyPTAsbz10aGlzLmZhY2VzLmxlbmd0aDtyPG87cisrKWE9dGhpcy5mYWNlc1tyXSxzW2EuYV0uYWRkKGEubm9ybWFsKSxzW2EuYl0uYWRkKGEubm9ybWFsKSxzW2EuY10uYWRkKGEubm9ybWFsKTtmb3IoZT0wLGk9dGhpcy52ZXJ0aWNlcy5sZW5ndGg7ZTxpO2UrKylzW2VdLm5vcm1hbGl6ZSgpO2ZvcihyPTAsbz10aGlzLmZhY2VzLmxlbmd0aDtyPG87cisrKXthPXRoaXMuZmFjZXNbcl07dmFyIGQ9YS52ZXJ0ZXhOb3JtYWxzOzM9PT1kLmxlbmd0aD8oZFswXS5jb3B5KHNbYS5hXSksZFsxXS5jb3B5KHNbYS5iXSksZFsyXS5jb3B5KHNbYS5jXSkpOihkWzBdPXNbYS5hXS5jbG9uZSgpLGRbMV09c1thLmJdLmNsb25lKCksZFsyXT1zW2EuY10uY2xvbmUoKSl9dGhpcy5mYWNlcy5sZW5ndGg+MCYmKHRoaXMubm9ybWFsc05lZWRVcGRhdGU9ITApfSxjb21wdXRlRmxhdFZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgdCxlLG47Zm9yKHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCksdD0wLGU9dGhpcy5mYWNlcy5sZW5ndGg7dDxlO3QrKyl7bj10aGlzLmZhY2VzW3RdO3ZhciBpPW4udmVydGV4Tm9ybWFsczszPT09aS5sZW5ndGg/KGlbMF0uY29weShuLm5vcm1hbCksaVsxXS5jb3B5KG4ubm9ybWFsKSxpWzJdLmNvcHkobi5ub3JtYWwpKTooaVswXT1uLm5vcm1hbC5jbG9uZSgpLGlbMV09bi5ub3JtYWwuY2xvbmUoKSxpWzJdPW4ubm9ybWFsLmNsb25lKCkpfXRoaXMuZmFjZXMubGVuZ3RoPjAmJih0aGlzLm5vcm1hbHNOZWVkVXBkYXRlPSEwKX0sY29tcHV0ZU1vcnBoTm9ybWFsczpmdW5jdGlvbigpe3ZhciB0LGUsaSxyLG87Zm9yKGk9MCxyPXRoaXMuZmFjZXMubGVuZ3RoO2k8cjtpKyspZm9yKG89dGhpcy5mYWNlc1tpXSxvLl9fb3JpZ2luYWxGYWNlTm9ybWFsP28uX19vcmlnaW5hbEZhY2VOb3JtYWwuY29weShvLm5vcm1hbCk6by5fX29yaWdpbmFsRmFjZU5vcm1hbD1vLm5vcm1hbC5jbG9uZSgpLG8uX19vcmlnaW5hbFZlcnRleE5vcm1hbHN8fChvLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzPVtdKSx0PTAsZT1vLnZlcnRleE5vcm1hbHMubGVuZ3RoO3Q8ZTt0Kyspby5fX29yaWdpbmFsVmVydGV4Tm9ybWFsc1t0XT9vLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW3RdLmNvcHkoby52ZXJ0ZXhOb3JtYWxzW3RdKTpvLl9fb3JpZ2luYWxWZXJ0ZXhOb3JtYWxzW3RdPW8udmVydGV4Tm9ybWFsc1t0XS5jbG9uZSgpO3ZhciBhPW5ldyBTdDtmb3IoYS5mYWNlcz10aGlzLmZhY2VzLHQ9MCxlPXRoaXMubW9ycGhUYXJnZXRzLmxlbmd0aDt0PGU7dCsrKXtpZighdGhpcy5tb3JwaE5vcm1hbHNbdF0pe3RoaXMubW9ycGhOb3JtYWxzW3RdPXt9LHRoaXMubW9ycGhOb3JtYWxzW3RdLmZhY2VOb3JtYWxzPVtdLHRoaXMubW9ycGhOb3JtYWxzW3RdLnZlcnRleE5vcm1hbHM9W107dmFyIHMsdSxsPXRoaXMubW9ycGhOb3JtYWxzW3RdLmZhY2VOb3JtYWxzLGM9dGhpcy5tb3JwaE5vcm1hbHNbdF0udmVydGV4Tm9ybWFscztmb3IoaT0wLHI9dGhpcy5mYWNlcy5sZW5ndGg7aTxyO2krKylzPW5ldyBuLHU9e2E6bmV3IG4sYjpuZXcgbixjOm5ldyBufSxsLnB1c2gocyksYy5wdXNoKHUpfXZhciBoPXRoaXMubW9ycGhOb3JtYWxzW3RdO2EudmVydGljZXM9dGhpcy5tb3JwaFRhcmdldHNbdF0udmVydGljZXMsYS5jb21wdXRlRmFjZU5vcm1hbHMoKSxhLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7dmFyIHMsdTtmb3IoaT0wLHI9dGhpcy5mYWNlcy5sZW5ndGg7aTxyO2krKylvPXRoaXMuZmFjZXNbaV0scz1oLmZhY2VOb3JtYWxzW2ldLHU9aC52ZXJ0ZXhOb3JtYWxzW2ldLHMuY29weShvLm5vcm1hbCksdS5hLmNvcHkoby52ZXJ0ZXhOb3JtYWxzWzBdKSx1LmIuY29weShvLnZlcnRleE5vcm1hbHNbMV0pLHUuYy5jb3B5KG8udmVydGV4Tm9ybWFsc1syXSl9Zm9yKGk9MCxyPXRoaXMuZmFjZXMubGVuZ3RoO2k8cjtpKyspbz10aGlzLmZhY2VzW2ldLG8ubm9ybWFsPW8uX19vcmlnaW5hbEZhY2VOb3JtYWwsby52ZXJ0ZXhOb3JtYWxzPW8uX19vcmlnaW5hbFZlcnRleE5vcm1hbHN9LGNvbXB1dGVMaW5lRGlzdGFuY2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLnZlcnRpY2VzLG49MCxpPWUubGVuZ3RoO248aTtuKyspbj4wJiYodCs9ZVtuXS5kaXN0YW5jZVRvKGVbbi0xXSkpLHRoaXMubGluZURpc3RhbmNlc1tuXT10fSxjb21wdXRlQm91bmRpbmdCb3g6ZnVuY3Rpb24oKXtudWxsPT09dGhpcy5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9bmV3IEspLHRoaXMuYm91bmRpbmdCb3guc2V0RnJvbVBvaW50cyh0aGlzLnZlcnRpY2VzKX0sY29tcHV0ZUJvdW5kaW5nU3BoZXJlOmZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBRKSx0aGlzLmJvdW5kaW5nU3BoZXJlLnNldEZyb21Qb2ludHModGhpcy52ZXJ0aWNlcyl9LG1lcmdlOmZ1bmN0aW9uKHQsZSxuKXtpZigodCYmdC5pc0dlb21ldHJ5KT09PSExKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5HZW9tZXRyeS5tZXJnZSgpOiBnZW9tZXRyeSBub3QgYW4gaW5zdGFuY2Ugb2YgVEhSRUUuR2VvbWV0cnkuXCIsdCk7dmFyIGkscj10aGlzLnZlcnRpY2VzLmxlbmd0aCxvPXRoaXMudmVydGljZXMsYT10LnZlcnRpY2VzLHM9dGhpcy5mYWNlcyx1PXQuZmFjZXMsbD10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0sYz10LmZhY2VWZXJ0ZXhVdnNbMF0saD10aGlzLmNvbG9ycyxmPXQuY29sb3JzO3ZvaWQgMD09PW4mJihuPTApLHZvaWQgMCE9PWUmJihpPShuZXcgJCkuZ2V0Tm9ybWFsTWF0cml4KGUpKTtmb3IodmFyIGQ9MCxwPWEubGVuZ3RoO2Q8cDtkKyspe3ZhciBnPWFbZF0sdj1nLmNsb25lKCk7dm9pZCAwIT09ZSYmdi5hcHBseU1hdHJpeDQoZSksby5wdXNoKHYpfWZvcih2YXIgZD0wLHA9Zi5sZW5ndGg7ZDxwO2QrKyloLnB1c2goZltkXS5jbG9uZSgpKTtmb3IoZD0wLHA9dS5sZW5ndGg7ZDxwO2QrKyl7dmFyIG0seSxfLGI9dVtkXSx4PWIudmVydGV4Tm9ybWFscyx3PWIudmVydGV4Q29sb3JzO209bmV3IGx0KGIuYStyLGIuYityLGIuYytyKSxtLm5vcm1hbC5jb3B5KGIubm9ybWFsKSx2b2lkIDAhPT1pJiZtLm5vcm1hbC5hcHBseU1hdHJpeDMoaSkubm9ybWFsaXplKCk7Zm9yKHZhciBFPTAsUz14Lmxlbmd0aDtFPFM7RSsrKXk9eFtFXS5jbG9uZSgpLHZvaWQgMCE9PWkmJnkuYXBwbHlNYXRyaXgzKGkpLm5vcm1hbGl6ZSgpLG0udmVydGV4Tm9ybWFscy5wdXNoKHkpO20uY29sb3IuY29weShiLmNvbG9yKTtmb3IodmFyIEU9MCxTPXcubGVuZ3RoO0U8UztFKyspXz13W0VdLG0udmVydGV4Q29sb3JzLnB1c2goXy5jbG9uZSgpKTttLm1hdGVyaWFsSW5kZXg9Yi5tYXRlcmlhbEluZGV4K24scy5wdXNoKG0pfWZvcihkPTAscD1jLmxlbmd0aDtkPHA7ZCsrKXt2YXIgTT1jW2RdLEM9W107aWYodm9pZCAwIT09TSl7Zm9yKHZhciBFPTAsUz1NLmxlbmd0aDtFPFM7RSsrKUMucHVzaChNW0VdLmNsb25lKCkpO2wucHVzaChDKX19fSxtZXJnZU1lc2g6ZnVuY3Rpb24odCl7cmV0dXJuKHQmJnQuaXNNZXNoKT09PSExP3ZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLkdlb21ldHJ5Lm1lcmdlTWVzaCgpOiBtZXNoIG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5NZXNoLlwiLHQpOih0Lm1hdHJpeEF1dG9VcGRhdGUmJnQudXBkYXRlTWF0cml4KCksdm9pZCB0aGlzLm1lcmdlKHQuZ2VvbWV0cnksdC5tYXRyaXgpKX0sbWVyZ2VWZXJ0aWNlczpmdW5jdGlvbigpe3ZhciB0LGUsbixpLHIsbyxhLHMsdT17fSxsPVtdLGM9W10saD00LGY9TWF0aC5wb3coMTAsaCk7Zm9yKG49MCxpPXRoaXMudmVydGljZXMubGVuZ3RoO248aTtuKyspdD10aGlzLnZlcnRpY2VzW25dLGU9TWF0aC5yb3VuZCh0LngqZikrXCJfXCIrTWF0aC5yb3VuZCh0LnkqZikrXCJfXCIrTWF0aC5yb3VuZCh0LnoqZiksdm9pZCAwPT09dVtlXT8odVtlXT1uLGwucHVzaCh0aGlzLnZlcnRpY2VzW25dKSxjW25dPWwubGVuZ3RoLTEpOmNbbl09Y1t1W2VdXTt2YXIgZD1bXTtmb3Iobj0wLGk9dGhpcy5mYWNlcy5sZW5ndGg7bjxpO24rKyl7cj10aGlzLmZhY2VzW25dLHIuYT1jW3IuYV0sci5iPWNbci5iXSxyLmM9Y1tyLmNdLG89W3IuYSxyLmIsci5jXTtmb3IodmFyIHA9MDtwPDM7cCsrKWlmKG9bcF09PT1vWyhwKzEpJTNdKXtkLnB1c2gobik7YnJlYWt9fWZvcihuPWQubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBnPWRbbl07Zm9yKHRoaXMuZmFjZXMuc3BsaWNlKGcsMSksYT0wLHM9dGhpcy5mYWNlVmVydGV4VXZzLmxlbmd0aDthPHM7YSsrKXRoaXMuZmFjZVZlcnRleFV2c1thXS5zcGxpY2UoZywxKX12YXIgdj10aGlzLnZlcnRpY2VzLmxlbmd0aC1sLmxlbmd0aDtyZXR1cm4gdGhpcy52ZXJ0aWNlcz1sLHZ9LHNvcnRGYWNlc0J5TWF0ZXJpYWxJbmRleDpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtyZXR1cm4gdC5tYXRlcmlhbEluZGV4LWUubWF0ZXJpYWxJbmRleH1mb3IodmFyIGU9dGhpcy5mYWNlcyxuPWUubGVuZ3RoLGk9MDtpPG47aSsrKWVbaV0uX2lkPWk7ZS5zb3J0KHQpO3ZhciByLG8sYT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF0scz10aGlzLmZhY2VWZXJ0ZXhVdnNbMV07YSYmYS5sZW5ndGg9PT1uJiYocj1bXSkscyYmcy5sZW5ndGg9PT1uJiYobz1bXSk7Zm9yKHZhciBpPTA7aTxuO2krKyl7dmFyIHU9ZVtpXS5faWQ7ciYmci5wdXNoKGFbdV0pLG8mJm8ucHVzaChzW3VdKX1yJiYodGhpcy5mYWNlVmVydGV4VXZzWzBdPXIpLG8mJih0aGlzLmZhY2VWZXJ0ZXhVdnNbMV09byl9LHRvSlNPTjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLG4pe3JldHVybiBuP3R8MTw8ZTp0Jn4oMTw8ZSl9ZnVuY3Rpb24gZSh0KXt2YXIgZT10LngudG9TdHJpbmcoKSt0LnkudG9TdHJpbmcoKSt0LnoudG9TdHJpbmcoKTtyZXR1cm4gdm9pZCAwIT09ZltlXT9mW2VdOihmW2VdPWgubGVuZ3RoLzMsaC5wdXNoKHQueCx0LnksdC56KSxmW2VdKX1mdW5jdGlvbiBuKHQpe3ZhciBlPXQuci50b1N0cmluZygpK3QuZy50b1N0cmluZygpK3QuYi50b1N0cmluZygpO3JldHVybiB2b2lkIDAhPT1wW2VdP3BbZV06KHBbZV09ZC5sZW5ndGgsZC5wdXNoKHQuZ2V0SGV4KCkpLHBbZV0pfWZ1bmN0aW9uIGkodCl7dmFyIGU9dC54LnRvU3RyaW5nKCkrdC55LnRvU3RyaW5nKCk7cmV0dXJuIHZvaWQgMCE9PXZbZV0/dltlXToodltlXT1nLmxlbmd0aC8yLGcucHVzaCh0LngsdC55KSx2W2VdKX12YXIgcj17bWV0YWRhdGE6e3ZlcnNpb246NC41LHR5cGU6XCJHZW9tZXRyeVwiLGdlbmVyYXRvcjpcIkdlb21ldHJ5LnRvSlNPTlwifX07aWYoci51dWlkPXRoaXMudXVpZCxyLnR5cGU9dGhpcy50eXBlLFwiXCIhPT10aGlzLm5hbWUmJihyLm5hbWU9dGhpcy5uYW1lKSx2b2lkIDAhPT10aGlzLnBhcmFtZXRlcnMpe3ZhciBvPXRoaXMucGFyYW1ldGVycztmb3IodmFyIGEgaW4gbyl2b2lkIDAhPT1vW2FdJiYoclthXT1vW2FdKTtyZXR1cm4gcn1mb3IodmFyIHM9W10sdT0wO3U8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7dSsrKXt2YXIgbD10aGlzLnZlcnRpY2VzW3VdO3MucHVzaChsLngsbC55LGwueil9Zm9yKHZhciBjPVtdLGg9W10sZj17fSxkPVtdLHA9e30sZz1bXSx2PXt9LHU9MDt1PHRoaXMuZmFjZXMubGVuZ3RoO3UrKyl7dmFyIG09dGhpcy5mYWNlc1t1XSx5PSEwLF89ITEsYj12b2lkIDAhPT10aGlzLmZhY2VWZXJ0ZXhVdnNbMF1bdV0seD1tLm5vcm1hbC5sZW5ndGgoKT4wLHc9bS52ZXJ0ZXhOb3JtYWxzLmxlbmd0aD4wLEU9MSE9PW0uY29sb3Iucnx8MSE9PW0uY29sb3IuZ3x8MSE9PW0uY29sb3IuYixTPW0udmVydGV4Q29sb3JzLmxlbmd0aD4wLE09MDtpZihNPXQoTSwwLDApLE09dChNLDEseSksTT10KE0sMixfKSxNPXQoTSwzLGIpLE09dChNLDQseCksTT10KE0sNSx3KSxNPXQoTSw2LEUpLE09dChNLDcsUyksYy5wdXNoKE0pLGMucHVzaChtLmEsbS5iLG0uYyksYy5wdXNoKG0ubWF0ZXJpYWxJbmRleCksYil7dmFyIEM9dGhpcy5mYWNlVmVydGV4VXZzWzBdW3VdO2MucHVzaChpKENbMF0pLGkoQ1sxXSksaShDWzJdKSl9aWYoeCYmYy5wdXNoKGUobS5ub3JtYWwpKSx3KXt2YXIgST1tLnZlcnRleE5vcm1hbHM7Yy5wdXNoKGUoSVswXSksZShJWzFdKSxlKElbMl0pKX1pZihFJiZjLnB1c2gobihtLmNvbG9yKSksUyl7dmFyIE89bS52ZXJ0ZXhDb2xvcnM7Yy5wdXNoKG4oT1swXSksbihPWzFdKSxuKE9bMl0pKX19cmV0dXJuIHIuZGF0YT17fSxyLmRhdGEudmVydGljZXM9cyxyLmRhdGEubm9ybWFscz1oLGQubGVuZ3RoPjAmJihyLmRhdGEuY29sb3JzPWQpLGcubGVuZ3RoPjAmJihyLmRhdGEudXZzPVtnXSksci5kYXRhLmZhY2VzPWMscn0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IFN0KS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3ZhciBlLG4saSxyLG8sYTt0aGlzLnZlcnRpY2VzPVtdLHRoaXMuY29sb3JzPVtdLHRoaXMuZmFjZXM9W10sdGhpcy5mYWNlVmVydGV4VXZzPVtbXV0sdGhpcy5tb3JwaFRhcmdldHM9W10sdGhpcy5tb3JwaE5vcm1hbHM9W10sdGhpcy5za2luV2VpZ2h0cz1bXSx0aGlzLnNraW5JbmRpY2VzPVtdLHRoaXMubGluZURpc3RhbmNlcz1bXSx0aGlzLmJvdW5kaW5nQm94PW51bGwsdGhpcy5ib3VuZGluZ1NwaGVyZT1udWxsLHRoaXMubmFtZT10Lm5hbWU7dmFyIHM9dC52ZXJ0aWNlcztmb3IoZT0wLG49cy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnZlcnRpY2VzLnB1c2goc1tlXS5jbG9uZSgpKTt2YXIgdT10LmNvbG9ycztmb3IoZT0wLG49dS5sZW5ndGg7ZTxuO2UrKyl0aGlzLmNvbG9ycy5wdXNoKHVbZV0uY2xvbmUoKSk7dmFyIGw9dC5mYWNlcztmb3IoZT0wLG49bC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmZhY2VzLnB1c2gobFtlXS5jbG9uZSgpKTtmb3IoZT0wLG49dC5mYWNlVmVydGV4VXZzLmxlbmd0aDtlPG47ZSsrKXt2YXIgYz10LmZhY2VWZXJ0ZXhVdnNbZV07Zm9yKHZvaWQgMD09PXRoaXMuZmFjZVZlcnRleFV2c1tlXSYmKHRoaXMuZmFjZVZlcnRleFV2c1tlXT1bXSksaT0wLHI9Yy5sZW5ndGg7aTxyO2krKyl7dmFyIGg9Y1tpXSxmPVtdO2ZvcihvPTAsYT1oLmxlbmd0aDtvPGE7bysrKXt2YXIgZD1oW29dO2YucHVzaChkLmNsb25lKCkpfXRoaXMuZmFjZVZlcnRleFV2c1tlXS5wdXNoKGYpfX12YXIgcD10Lm1vcnBoVGFyZ2V0cztmb3IoZT0wLG49cC5sZW5ndGg7ZTxuO2UrKyl7dmFyIGc9e307aWYoZy5uYW1lPXBbZV0ubmFtZSx2b2lkIDAhPT1wW2VdLnZlcnRpY2VzKWZvcihnLnZlcnRpY2VzPVtdLGk9MCxyPXBbZV0udmVydGljZXMubGVuZ3RoO2k8cjtpKyspZy52ZXJ0aWNlcy5wdXNoKHBbZV0udmVydGljZXNbaV0uY2xvbmUoKSk7aWYodm9pZCAwIT09cFtlXS5ub3JtYWxzKWZvcihnLm5vcm1hbHM9W10saT0wLHI9cFtlXS5ub3JtYWxzLmxlbmd0aDtpPHI7aSsrKWcubm9ybWFscy5wdXNoKHBbZV0ubm9ybWFsc1tpXS5jbG9uZSgpKTt0aGlzLm1vcnBoVGFyZ2V0cy5wdXNoKGcpfXZhciB2PXQubW9ycGhOb3JtYWxzO2ZvcihlPTAsbj12Lmxlbmd0aDtlPG47ZSsrKXt2YXIgbT17fTtpZih2b2lkIDAhPT12W2VdLnZlcnRleE5vcm1hbHMpZm9yKG0udmVydGV4Tm9ybWFscz1bXSxpPTAscj12W2VdLnZlcnRleE5vcm1hbHMubGVuZ3RoO2k8cjtpKyspe3ZhciB5PXZbZV0udmVydGV4Tm9ybWFsc1tpXSxfPXt9O18uYT15LmEuY2xvbmUoKSxfLmI9eS5iLmNsb25lKCksXy5jPXkuYy5jbG9uZSgpLG0udmVydGV4Tm9ybWFscy5wdXNoKF8pfWlmKHZvaWQgMCE9PXZbZV0uZmFjZU5vcm1hbHMpZm9yKG0uZmFjZU5vcm1hbHM9W10saT0wLHI9dltlXS5mYWNlTm9ybWFscy5sZW5ndGg7aTxyO2krKyltLmZhY2VOb3JtYWxzLnB1c2godltlXS5mYWNlTm9ybWFsc1tpXS5jbG9uZSgpKTt0aGlzLm1vcnBoTm9ybWFscy5wdXNoKG0pfXZhciBiPXQuc2tpbldlaWdodHM7Zm9yKGU9MCxuPWIubGVuZ3RoO2U8bjtlKyspdGhpcy5za2luV2VpZ2h0cy5wdXNoKGJbZV0uY2xvbmUoKSk7dmFyIHg9dC5za2luSW5kaWNlcztmb3IoZT0wLG49eC5sZW5ndGg7ZTxuO2UrKyl0aGlzLnNraW5JbmRpY2VzLnB1c2goeFtlXS5jbG9uZSgpKTt2YXIgdz10LmxpbmVEaXN0YW5jZXM7Zm9yKGU9MCxuPXcubGVuZ3RoO2U8bjtlKyspdGhpcy5saW5lRGlzdGFuY2VzLnB1c2god1tlXSk7dmFyIEU9dC5ib3VuZGluZ0JveDtudWxsIT09RSYmKHRoaXMuYm91bmRpbmdCb3g9RS5jbG9uZSgpKTt2YXIgUz10LmJvdW5kaW5nU3BoZXJlO3JldHVybiBudWxsIT09UyYmKHRoaXMuYm91bmRpbmdTcGhlcmU9Uy5jbG9uZSgpKSx0aGlzLmVsZW1lbnRzTmVlZFVwZGF0ZT10LmVsZW1lbnRzTmVlZFVwZGF0ZSx0aGlzLnZlcnRpY2VzTmVlZFVwZGF0ZT10LnZlcnRpY2VzTmVlZFVwZGF0ZSx0aGlzLnV2c05lZWRVcGRhdGU9dC51dnNOZWVkVXBkYXRlLHRoaXMubm9ybWFsc05lZWRVcGRhdGU9dC5ub3JtYWxzTmVlZFVwZGF0ZSx0aGlzLmNvbG9yc05lZWRVcGRhdGU9dC5jb2xvcnNOZWVkVXBkYXRlLHRoaXMubGluZURpc3RhbmNlc05lZWRVcGRhdGU9dC5saW5lRGlzdGFuY2VzTmVlZFVwZGF0ZSx0aGlzLmdyb3Vwc05lZWRVcGRhdGU9dC5ncm91cHNOZWVkVXBkYXRlLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJkaXNwb3NlXCJ9KX19KSxNdC5NYXhJbmRleD02NTUzNSxhKE10LnByb3RvdHlwZSxyLnByb3RvdHlwZSx7aXNCdWZmZXJHZW9tZXRyeTohMCxnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fSxzZXRJbmRleDpmdW5jdGlvbih0KXtBcnJheS5pc0FycmF5KHQpP3RoaXMuaW5kZXg9bmV3KHd0KHQpPjY1NTM1P3l0OnZ0KSh0LDEpOnRoaXMuaW5kZXg9dH0sYWRkQXR0cmlidXRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuKGUmJmUuaXNCdWZmZXJBdHRyaWJ1dGUpPT09ITEmJihlJiZlLmlzSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUpPT09ITE/KGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5OiAuYWRkQXR0cmlidXRlKCkgbm93IGV4cGVjdHMgKCBuYW1lLCBhdHRyaWJ1dGUgKS5cIiksdm9pZCB0aGlzLmFkZEF0dHJpYnV0ZSh0LG5ldyBodChhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKSkpOlwiaW5kZXhcIj09PXQ/KGNvbnNvbGUud2FybihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5LmFkZEF0dHJpYnV0ZTogVXNlIC5zZXRJbmRleCgpIGZvciBpbmRleCBhdHRyaWJ1dGUuXCIpLHZvaWQgdGhpcy5zZXRJbmRleChlKSk6KHRoaXMuYXR0cmlidXRlc1t0XT1lLHRoaXMpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1t0XX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3JldHVybiBkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW3RdLHRoaXN9LGFkZEdyb3VwOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLmdyb3Vwcy5wdXNoKHtzdGFydDp0LGNvdW50OmUsbWF0ZXJpYWxJbmRleDp2b2lkIDAhPT1uP246MH0pfSxjbGVhckdyb3VwczpmdW5jdGlvbigpe3RoaXMuZ3JvdXBzPVtdfSxzZXREcmF3UmFuZ2U6ZnVuY3Rpb24odCxlKXt0aGlzLmRyYXdSYW5nZS5zdGFydD10LHRoaXMuZHJhd1JhbmdlLmNvdW50PWV9LGFwcGx5TWF0cml4OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjt2b2lkIDAhPT1lJiYodC5hcHBseVRvQnVmZmVyQXR0cmlidXRlKGUpLGUubmVlZHNVcGRhdGU9ITApO3ZhciBuPXRoaXMuYXR0cmlidXRlcy5ub3JtYWw7aWYodm9pZCAwIT09bil7dmFyIGk9KG5ldyAkKS5nZXROb3JtYWxNYXRyaXgodCk7aS5hcHBseVRvQnVmZmVyQXR0cmlidXRlKG4pLG4ubmVlZHNVcGRhdGU9ITB9cmV0dXJuIG51bGwhPT10aGlzLmJvdW5kaW5nQm94JiZ0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpLG51bGwhPT10aGlzLmJvdW5kaW5nU3BoZXJlJiZ0aGlzLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHRoaXN9LHJvdGF0ZVg6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQubWFrZVJvdGF0aW9uWChlKSx0aGlzLmFwcGx5TWF0cml4KHQpLHRoaXN9fSgpLHJvdGF0ZVk6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQubWFrZVJvdGF0aW9uWShlKSx0aGlzLmFwcGx5TWF0cml4KHQpLHRoaXN9fSgpLHJvdGF0ZVo6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQubWFrZVJvdGF0aW9uWihlKSx0aGlzLmFwcGx5TWF0cml4KHQpLHRoaXN9fSgpLHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBpO3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQubWFrZVRyYW5zbGF0aW9uKGUsbixpKSx0aGlzLmFwcGx5TWF0cml4KHQpLHRoaXN9fSgpLHNjYWxlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGk7cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gdC5tYWtlU2NhbGUoZSxuLGkpLHRoaXMuYXBwbHlNYXRyaXgodCksdGhpc319KCksbG9va0F0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGF0O3JldHVybiBmdW5jdGlvbihlKXt0Lmxvb2tBdChlKSx0LnVwZGF0ZU1hdHJpeCgpLHRoaXMuYXBwbHlNYXRyaXgodC5tYXRyaXgpfX0oKSxjZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLmNvbXB1dGVCb3VuZGluZ0JveCgpO3ZhciB0PXRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKCkubmVnYXRlKCk7cmV0dXJuIHRoaXMudHJhbnNsYXRlKHQueCx0LnksdC56KSx0fSxzZXRGcm9tT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2VvbWV0cnk7aWYodC5pc1BvaW50c3x8dC5pc0xpbmUpe3ZhciBuPW5ldyBfdCgzKmUudmVydGljZXMubGVuZ3RoLDMpLGk9bmV3IF90KDMqZS5jb2xvcnMubGVuZ3RoLDMpO2lmKHRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuLmNvcHlWZWN0b3Izc0FycmF5KGUudmVydGljZXMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcImNvbG9yXCIsaS5jb3B5Q29sb3JzQXJyYXkoZS5jb2xvcnMpKSxlLmxpbmVEaXN0YW5jZXMmJmUubGluZURpc3RhbmNlcy5sZW5ndGg9PT1lLnZlcnRpY2VzLmxlbmd0aCl7dmFyIHI9bmV3IF90KGUubGluZURpc3RhbmNlcy5sZW5ndGgsMSk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJsaW5lRGlzdGFuY2VcIixyLmNvcHlBcnJheShlLmxpbmVEaXN0YW5jZXMpKX1udWxsIT09ZS5ib3VuZGluZ1NwaGVyZSYmKHRoaXMuYm91bmRpbmdTcGhlcmU9ZS5ib3VuZGluZ1NwaGVyZS5jbG9uZSgpKSxudWxsIT09ZS5ib3VuZGluZ0JveCYmKHRoaXMuYm91bmRpbmdCb3g9ZS5ib3VuZGluZ0JveC5jbG9uZSgpKX1lbHNlIHQuaXNNZXNoJiZlJiZlLmlzR2VvbWV0cnkmJnRoaXMuZnJvbUdlb21ldHJ5KGUpO3JldHVybiB0aGlzfSx1cGRhdGVGcm9tT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2VvbWV0cnk7aWYodC5pc01lc2gpe3ZhciBuPWUuX19kaXJlY3RHZW9tZXRyeTtpZihlLmVsZW1lbnRzTmVlZFVwZGF0ZT09PSEwJiYobj12b2lkIDAsZS5lbGVtZW50c05lZWRVcGRhdGU9ITEpLHZvaWQgMD09PW4pcmV0dXJuIHRoaXMuZnJvbUdlb21ldHJ5KGUpO24udmVydGljZXNOZWVkVXBkYXRlPWUudmVydGljZXNOZWVkVXBkYXRlLG4ubm9ybWFsc05lZWRVcGRhdGU9ZS5ub3JtYWxzTmVlZFVwZGF0ZSxuLmNvbG9yc05lZWRVcGRhdGU9ZS5jb2xvcnNOZWVkVXBkYXRlLG4udXZzTmVlZFVwZGF0ZT1lLnV2c05lZWRVcGRhdGUsbi5ncm91cHNOZWVkVXBkYXRlPWUuZ3JvdXBzTmVlZFVwZGF0ZSxlLnZlcnRpY2VzTmVlZFVwZGF0ZT0hMSxlLm5vcm1hbHNOZWVkVXBkYXRlPSExLGUuY29sb3JzTmVlZFVwZGF0ZT0hMSxlLnV2c05lZWRVcGRhdGU9ITEsZS5ncm91cHNOZWVkVXBkYXRlPSExLGU9bn12YXIgaTtyZXR1cm4gZS52ZXJ0aWNlc05lZWRVcGRhdGU9PT0hMCYmKGk9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLHZvaWQgMCE9PWkmJihpLmNvcHlWZWN0b3Izc0FycmF5KGUudmVydGljZXMpLGkubmVlZHNVcGRhdGU9ITApLGUudmVydGljZXNOZWVkVXBkYXRlPSExKSxlLm5vcm1hbHNOZWVkVXBkYXRlPT09ITAmJihpPXRoaXMuYXR0cmlidXRlcy5ub3JtYWwsdm9pZCAwIT09aSYmKGkuY29weVZlY3RvcjNzQXJyYXkoZS5ub3JtYWxzKSxpLm5lZWRzVXBkYXRlPSEwKSxlLm5vcm1hbHNOZWVkVXBkYXRlPSExKSxlLmNvbG9yc05lZWRVcGRhdGU9PT0hMCYmKGk9dGhpcy5hdHRyaWJ1dGVzLmNvbG9yLHZvaWQgMCE9PWkmJihpLmNvcHlDb2xvcnNBcnJheShlLmNvbG9ycyksaS5uZWVkc1VwZGF0ZT0hMCksZS5jb2xvcnNOZWVkVXBkYXRlPSExKSxlLnV2c05lZWRVcGRhdGUmJihpPXRoaXMuYXR0cmlidXRlcy51dix2b2lkIDAhPT1pJiYoaS5jb3B5VmVjdG9yMnNBcnJheShlLnV2cyksaS5uZWVkc1VwZGF0ZT0hMCksZS51dnNOZWVkVXBkYXRlPSExKSxlLmxpbmVEaXN0YW5jZXNOZWVkVXBkYXRlJiYoaT10aGlzLmF0dHJpYnV0ZXMubGluZURpc3RhbmNlLHZvaWQgMCE9PWkmJihpLmNvcHlBcnJheShlLmxpbmVEaXN0YW5jZXMpLGkubmVlZHNVcGRhdGU9ITApLGUubGluZURpc3RhbmNlc05lZWRVcGRhdGU9ITEpLGUuZ3JvdXBzTmVlZFVwZGF0ZSYmKGUuY29tcHV0ZUdyb3Vwcyh0Lmdlb21ldHJ5KSx0aGlzLmdyb3Vwcz1lLmdyb3VwcyxlLmdyb3Vwc05lZWRVcGRhdGU9ITEpLHRoaXN9LGZyb21HZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX2RpcmVjdEdlb21ldHJ5PShuZXcgeHQpLmZyb21HZW9tZXRyeSh0KSx0aGlzLmZyb21EaXJlY3RHZW9tZXRyeSh0Ll9fZGlyZWN0R2VvbWV0cnkpfSxmcm9tRGlyZWN0R2VvbWV0cnk6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEZsb2F0MzJBcnJheSgzKnQudmVydGljZXMubGVuZ3RoKTtpZih0aGlzLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGh0KGUsMykuY29weVZlY3RvcjNzQXJyYXkodC52ZXJ0aWNlcykpLHQubm9ybWFscy5sZW5ndGg+MCl7dmFyIG49bmV3IEZsb2F0MzJBcnJheSgzKnQubm9ybWFscy5sZW5ndGgpO3RoaXMuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGh0KG4sMykuY29weVZlY3RvcjNzQXJyYXkodC5ub3JtYWxzKSl9aWYodC5jb2xvcnMubGVuZ3RoPjApe3ZhciBpPW5ldyBGbG9hdDMyQXJyYXkoMyp0LmNvbG9ycy5sZW5ndGgpO3RoaXMuYWRkQXR0cmlidXRlKFwiY29sb3JcIixuZXcgaHQoaSwzKS5jb3B5Q29sb3JzQXJyYXkodC5jb2xvcnMpKX1pZih0LnV2cy5sZW5ndGg+MCl7dmFyIHI9bmV3IEZsb2F0MzJBcnJheSgyKnQudXZzLmxlbmd0aCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBodChyLDIpLmNvcHlWZWN0b3Iyc0FycmF5KHQudXZzKSl9aWYodC51dnMyLmxlbmd0aD4wKXt2YXIgbz1uZXcgRmxvYXQzMkFycmF5KDIqdC51dnMyLmxlbmd0aCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJ1djJcIixuZXcgaHQobywyKS5jb3B5VmVjdG9yMnNBcnJheSh0LnV2czIpKX1pZih0LmluZGljZXMubGVuZ3RoPjApe3ZhciBhPXd0KHQuaW5kaWNlcyk+NjU1MzU/VWludDMyQXJyYXk6VWludDE2QXJyYXkscz1uZXcgYSgzKnQuaW5kaWNlcy5sZW5ndGgpO3RoaXMuc2V0SW5kZXgobmV3IGh0KHMsMSkuY29weUluZGljZXNBcnJheSh0LmluZGljZXMpKX10aGlzLmdyb3Vwcz10Lmdyb3Vwcztmb3IodmFyIHUgaW4gdC5tb3JwaFRhcmdldHMpe2Zvcih2YXIgbD1bXSxjPXQubW9ycGhUYXJnZXRzW3VdLGg9MCxmPWMubGVuZ3RoO2g8ZjtoKyspe1xudmFyIGQ9Y1toXSxwPW5ldyBfdCgzKmQubGVuZ3RoLDMpO2wucHVzaChwLmNvcHlWZWN0b3Izc0FycmF5KGQpKX10aGlzLm1vcnBoQXR0cmlidXRlc1t1XT1sfWlmKHQuc2tpbkluZGljZXMubGVuZ3RoPjApe3ZhciBnPW5ldyBfdCg0KnQuc2tpbkluZGljZXMubGVuZ3RoLDQpO3RoaXMuYWRkQXR0cmlidXRlKFwic2tpbkluZGV4XCIsZy5jb3B5VmVjdG9yNHNBcnJheSh0LnNraW5JbmRpY2VzKSl9aWYodC5za2luV2VpZ2h0cy5sZW5ndGg+MCl7dmFyIHY9bmV3IF90KDQqdC5za2luV2VpZ2h0cy5sZW5ndGgsNCk7dGhpcy5hZGRBdHRyaWJ1dGUoXCJza2luV2VpZ2h0XCIsdi5jb3B5VmVjdG9yNHNBcnJheSh0LnNraW5XZWlnaHRzKSl9cmV0dXJuIG51bGwhPT10LmJvdW5kaW5nU3BoZXJlJiYodGhpcy5ib3VuZGluZ1NwaGVyZT10LmJvdW5kaW5nU3BoZXJlLmNsb25lKCkpLG51bGwhPT10LmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD10LmJvdW5kaW5nQm94LmNsb25lKCkpLHRoaXN9LGNvbXB1dGVCb3VuZGluZ0JveDpmdW5jdGlvbigpe251bGw9PT10aGlzLmJvdW5kaW5nQm94JiYodGhpcy5ib3VuZGluZ0JveD1uZXcgSyk7dmFyIHQ9dGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO3ZvaWQgMCE9PXQ/dGhpcy5ib3VuZGluZ0JveC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKHQpOnRoaXMuYm91bmRpbmdCb3gubWFrZUVtcHR5KCksKGlzTmFOKHRoaXMuYm91bmRpbmdCb3gubWluLngpfHxpc05hTih0aGlzLmJvdW5kaW5nQm94Lm1pbi55KXx8aXNOYU4odGhpcy5ib3VuZGluZ0JveC5taW4ueikpJiZjb25zb2xlLmVycm9yKCdUSFJFRS5CdWZmZXJHZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3g6IENvbXB1dGVkIG1pbi9tYXggaGF2ZSBOYU4gdmFsdWVzLiBUaGUgXCJwb3NpdGlvblwiIGF0dHJpYnV0ZSBpcyBsaWtlbHkgdG8gaGF2ZSBOYU4gdmFsdWVzLicsdGhpcyl9LGNvbXB1dGVCb3VuZGluZ1NwaGVyZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBLLGU9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKCl7bnVsbD09PXRoaXMuYm91bmRpbmdTcGhlcmUmJih0aGlzLmJvdW5kaW5nU3BoZXJlPW5ldyBRKTt2YXIgbj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb247aWYobil7dmFyIGk9dGhpcy5ib3VuZGluZ1NwaGVyZS5jZW50ZXI7dC5zZXRGcm9tQnVmZmVyQXR0cmlidXRlKG4pLHQuZ2V0Q2VudGVyKGkpO2Zvcih2YXIgcj0wLG89MCxhPW4uY291bnQ7bzxhO28rKyllLng9bi5nZXRYKG8pLGUueT1uLmdldFkobyksZS56PW4uZ2V0WihvKSxyPU1hdGgubWF4KHIsaS5kaXN0YW5jZVRvU3F1YXJlZChlKSk7dGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXM9TWF0aC5zcXJ0KHIpLGlzTmFOKHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzKSYmY29uc29sZS5lcnJvcignVEhSRUUuQnVmZmVyR2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk6IENvbXB1dGVkIHJhZGl1cyBpcyBOYU4uIFRoZSBcInBvc2l0aW9uXCIgYXR0cmlidXRlIGlzIGxpa2VseSB0byBoYXZlIE5hTiB2YWx1ZXMuJyx0aGlzKX19fSgpLGNvbXB1dGVGYWNlTm9ybWFsczpmdW5jdGlvbigpe30sY29tcHV0ZVZlcnRleE5vcm1hbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4LGU9dGhpcy5hdHRyaWJ1dGVzLGk9dGhpcy5ncm91cHM7aWYoZS5wb3NpdGlvbil7dmFyIHI9ZS5wb3NpdGlvbi5hcnJheTtpZih2b2lkIDA9PT1lLm5vcm1hbCl0aGlzLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBodChuZXcgRmxvYXQzMkFycmF5KHIubGVuZ3RoKSwzKSk7ZWxzZSBmb3IodmFyIG89ZS5ub3JtYWwuYXJyYXksYT0wLHM9by5sZW5ndGg7YTxzO2ErKylvW2FdPTA7dmFyIHUsbCxjLGg9ZS5ub3JtYWwuYXJyYXksZj1uZXcgbixkPW5ldyBuLHA9bmV3IG4sZz1uZXcgbix2PW5ldyBuO2lmKHQpe3ZhciBtPXQuYXJyYXk7MD09PWkubGVuZ3RoJiZ0aGlzLmFkZEdyb3VwKDAsbS5sZW5ndGgpO2Zvcih2YXIgeT0wLF89aS5sZW5ndGg7eTxfOysreSlmb3IodmFyIGI9aVt5XSx4PWIuc3RhcnQsdz1iLmNvdW50LGE9eCxzPXgrdzthPHM7YSs9Myl1PTMqbVthKzBdLGw9MyptW2ErMV0sYz0zKm1bYSsyXSxmLmZyb21BcnJheShyLHUpLGQuZnJvbUFycmF5KHIsbCkscC5mcm9tQXJyYXkocixjKSxnLnN1YlZlY3RvcnMocCxkKSx2LnN1YlZlY3RvcnMoZixkKSxnLmNyb3NzKHYpLGhbdV0rPWcueCxoW3UrMV0rPWcueSxoW3UrMl0rPWcueixoW2xdKz1nLngsaFtsKzFdKz1nLnksaFtsKzJdKz1nLnosaFtjXSs9Zy54LGhbYysxXSs9Zy55LGhbYysyXSs9Zy56fWVsc2UgZm9yKHZhciBhPTAscz1yLmxlbmd0aDthPHM7YSs9OSlmLmZyb21BcnJheShyLGEpLGQuZnJvbUFycmF5KHIsYSszKSxwLmZyb21BcnJheShyLGErNiksZy5zdWJWZWN0b3JzKHAsZCksdi5zdWJWZWN0b3JzKGYsZCksZy5jcm9zcyh2KSxoW2FdPWcueCxoW2ErMV09Zy55LGhbYSsyXT1nLnosaFthKzNdPWcueCxoW2ErNF09Zy55LGhbYSs1XT1nLnosaFthKzZdPWcueCxoW2ErN109Zy55LGhbYSs4XT1nLno7dGhpcy5ub3JtYWxpemVOb3JtYWxzKCksZS5ub3JtYWwubmVlZHNVcGRhdGU9ITB9fSxtZXJnZTpmdW5jdGlvbih0LGUpe2lmKCh0JiZ0LmlzQnVmZmVyR2VvbWV0cnkpPT09ITEpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlRIUkVFLkJ1ZmZlckdlb21ldHJ5Lm1lcmdlKCk6IGdlb21ldHJ5IG5vdCBhbiBpbnN0YW5jZSBvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeS5cIix0KTt2b2lkIDA9PT1lJiYoZT0wKTt2YXIgbj10aGlzLmF0dHJpYnV0ZXM7Zm9yKHZhciBpIGluIG4paWYodm9pZCAwIT09dC5hdHRyaWJ1dGVzW2ldKWZvcih2YXIgcj1uW2ldLG89ci5hcnJheSxhPXQuYXR0cmlidXRlc1tpXSxzPWEuYXJyYXksdT1hLml0ZW1TaXplLGw9MCxjPXUqZTtsPHMubGVuZ3RoO2wrKyxjKyspb1tjXT1zW2xdO3JldHVybiB0aGlzfSxub3JtYWxpemVOb3JtYWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGUsbixpLHI9dGhpcy5hdHRyaWJ1dGVzLm5vcm1hbCxvPTAsYT1yLmNvdW50O288YTtvKyspdD1yLmdldFgobyksZT1yLmdldFkobyksbj1yLmdldFoobyksaT0xL01hdGguc3FydCh0KnQrZSplK24qbiksci5zZXRYWVoobyx0KmksZSppLG4qaSl9LHRvTm9uSW5kZXhlZDpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmluZGV4KXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5CdWZmZXJHZW9tZXRyeS50b05vbkluZGV4ZWQoKTogR2VvbWV0cnkgaXMgYWxyZWFkeSBub24taW5kZXhlZC5cIiksdGhpczt2YXIgdD1uZXcgTXQsZT10aGlzLmluZGV4LmFycmF5LG49dGhpcy5hdHRyaWJ1dGVzO2Zvcih2YXIgaSBpbiBuKXtmb3IodmFyIHI9bltpXSxvPXIuYXJyYXksYT1yLml0ZW1TaXplLHM9bmV3IG8uY29uc3RydWN0b3IoZS5sZW5ndGgqYSksdT0wLGw9MCxjPTAsaD1lLmxlbmd0aDtjPGg7YysrKXt1PWVbY10qYTtmb3IodmFyIGY9MDtmPGE7ZisrKXNbbCsrXT1vW3UrK119dC5hZGRBdHRyaWJ1dGUoaSxuZXcgaHQocyxhKSl9cmV0dXJuIHR9LHRvSlNPTjpmdW5jdGlvbigpe3ZhciB0PXttZXRhZGF0YTp7dmVyc2lvbjo0LjUsdHlwZTpcIkJ1ZmZlckdlb21ldHJ5XCIsZ2VuZXJhdG9yOlwiQnVmZmVyR2VvbWV0cnkudG9KU09OXCJ9fTtpZih0LnV1aWQ9dGhpcy51dWlkLHQudHlwZT10aGlzLnR5cGUsXCJcIiE9PXRoaXMubmFtZSYmKHQubmFtZT10aGlzLm5hbWUpLHZvaWQgMCE9PXRoaXMucGFyYW1ldGVycyl7dmFyIGU9dGhpcy5wYXJhbWV0ZXJzO2Zvcih2YXIgbiBpbiBlKXZvaWQgMCE9PWVbbl0mJih0W25dPWVbbl0pO3JldHVybiB0fXQuZGF0YT17YXR0cmlidXRlczp7fX07dmFyIGk9dGhpcy5pbmRleDtpZihudWxsIT09aSl7dmFyIHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaS5hcnJheSk7dC5kYXRhLmluZGV4PXt0eXBlOmkuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpyfX12YXIgbz10aGlzLmF0dHJpYnV0ZXM7Zm9yKHZhciBuIGluIG8pe3ZhciBhPW9bbl0scj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLmFycmF5KTt0LmRhdGEuYXR0cmlidXRlc1tuXT17aXRlbVNpemU6YS5pdGVtU2l6ZSx0eXBlOmEuYXJyYXkuY29uc3RydWN0b3IubmFtZSxhcnJheTpyLG5vcm1hbGl6ZWQ6YS5ub3JtYWxpemVkfX12YXIgcz10aGlzLmdyb3VwcztzLmxlbmd0aD4wJiYodC5kYXRhLmdyb3Vwcz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMpKSk7dmFyIHU9dGhpcy5ib3VuZGluZ1NwaGVyZTtyZXR1cm4gbnVsbCE9PXUmJih0LmRhdGEuYm91bmRpbmdTcGhlcmU9e2NlbnRlcjp1LmNlbnRlci50b0FycmF5KCkscmFkaXVzOnUucmFkaXVzfSksdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IE10KS5jb3B5KHRoaXMpfSxjb3B5OmZ1bmN0aW9uKHQpe3ZhciBlLG4saTt0aGlzLmluZGV4PW51bGwsdGhpcy5hdHRyaWJ1dGVzPXt9LHRoaXMubW9ycGhBdHRyaWJ1dGVzPXt9LHRoaXMuZ3JvdXBzPVtdLHRoaXMuYm91bmRpbmdCb3g9bnVsbCx0aGlzLmJvdW5kaW5nU3BoZXJlPW51bGwsdGhpcy5uYW1lPXQubmFtZTt2YXIgcj10LmluZGV4O251bGwhPT1yJiZ0aGlzLnNldEluZGV4KHIuY2xvbmUoKSk7dmFyIG89dC5hdHRyaWJ1dGVzO2ZvcihlIGluIG8pe3ZhciBhPW9bZV07dGhpcy5hZGRBdHRyaWJ1dGUoZSxhLmNsb25lKCkpfXZhciBzPXQubW9ycGhBdHRyaWJ1dGVzO2ZvcihlIGluIHMpe3ZhciB1PVtdLGw9c1tlXTtmb3Iobj0wLGk9bC5sZW5ndGg7bjxpO24rKyl1LnB1c2gobFtuXS5jbG9uZSgpKTt0aGlzLm1vcnBoQXR0cmlidXRlc1tlXT11fXZhciBjPXQuZ3JvdXBzO2ZvcihuPTAsaT1jLmxlbmd0aDtuPGk7bisrKXt2YXIgaD1jW25dO3RoaXMuYWRkR3JvdXAoaC5zdGFydCxoLmNvdW50LGgubWF0ZXJpYWxJbmRleCl9dmFyIGY9dC5ib3VuZGluZ0JveDtudWxsIT09ZiYmKHRoaXMuYm91bmRpbmdCb3g9Zi5jbG9uZSgpKTt2YXIgZD10LmJvdW5kaW5nU3BoZXJlO3JldHVybiBudWxsIT09ZCYmKHRoaXMuYm91bmRpbmdTcGhlcmU9ZC5jbG9uZSgpKSx0aGlzLmRyYXdSYW5nZS5zdGFydD10LmRyYXdSYW5nZS5zdGFydCx0aGlzLmRyYXdSYW5nZS5jb3VudD10LmRyYXdSYW5nZS5jb3VudCx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZGlzcG9zZVwifSl9fSksQ3QucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShhdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpDdCxpc01lc2g6ITAsc2V0RHJhd01vZGU6ZnVuY3Rpb24odCl7dGhpcy5kcmF3TW9kZT10fSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBhdC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5kcmF3TW9kZT10LmRyYXdNb2RlLHRoaXN9LHVwZGF0ZU1vcnBoVGFyZ2V0czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2VvbWV0cnkubW9ycGhUYXJnZXRzO2lmKHZvaWQgMCE9PXQmJnQubGVuZ3RoPjApe3RoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzPVtdLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5PXt9O2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5wdXNoKDApLHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W3RbZV0ubmFtZV09ZX19LHJheWNhc3Q6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxuLGkscixvLGEpe3JldHVybiB1dC5iYXJ5Y29vcmRGcm9tUG9pbnQodCxlLG4saSx5KSxyLm11bHRpcGx5U2NhbGFyKHkueCksby5tdWx0aXBseVNjYWxhcih5LnkpLGEubXVsdGlwbHlTY2FsYXIoeS56KSxyLmFkZChvKS5hZGQoYSksci5jbG9uZSgpfWZ1bmN0aW9uIGUodCxlLG4saSxyLG8sYSl7dmFyIHMsdT10Lm1hdGVyaWFsO2lmKHM9dS5zaWRlPT09Vm4/bi5pbnRlcnNlY3RUcmlhbmdsZShvLHIsaSwhMCxhKTpuLmludGVyc2VjdFRyaWFuZ2xlKGkscixvLHUuc2lkZSE9PVhuLGEpLG51bGw9PT1zKXJldHVybiBudWxsO2IuY29weShhKSxiLmFwcGx5TWF0cml4NCh0Lm1hdHJpeFdvcmxkKTt2YXIgbD1lLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhiKTtyZXR1cm4gbDxlLm5lYXJ8fGw+ZS5mYXI/bnVsbDp7ZGlzdGFuY2U6bCxwb2ludDpiLmNsb25lKCksb2JqZWN0OnR9fWZ1bmN0aW9uIHIobixpLHIsbyxhLHMsdSxmKXtsLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxzKSxjLmZyb21CdWZmZXJBdHRyaWJ1dGUobyx1KSxoLmZyb21CdWZmZXJBdHRyaWJ1dGUobyxmKTt2YXIgZD1lKG4saSxyLGwsYyxoLF8pO3JldHVybiBkJiYoYSYmKGcuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhLHMpLHYuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhLHUpLG0uZnJvbUJ1ZmZlckF0dHJpYnV0ZShhLGYpLGQudXY9dChfLGwsYyxoLGcsdixtKSksZC5mYWNlPW5ldyBsdChzLHUsZix1dC5ub3JtYWwobCxjLGgpKSxkLmZhY2VJbmRleD1zKSxkfXZhciBhPW5ldyBpLHM9bmV3IGl0LHU9bmV3IFEsbD1uZXcgbixjPW5ldyBuLGg9bmV3IG4sZj1uZXcgbixkPW5ldyBuLHA9bmV3IG4sZz1uZXcgbyx2PW5ldyBvLG09bmV3IG8seT1uZXcgbixfPW5ldyBuLGI9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKG4saSl7dmFyIG89dGhpcy5nZW9tZXRyeSx5PXRoaXMubWF0ZXJpYWwsYj10aGlzLm1hdHJpeFdvcmxkO2lmKHZvaWQgMCE9PXkmJihudWxsPT09by5ib3VuZGluZ1NwaGVyZSYmby5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSx1LmNvcHkoby5ib3VuZGluZ1NwaGVyZSksdS5hcHBseU1hdHJpeDQoYiksbi5yYXkuaW50ZXJzZWN0c1NwaGVyZSh1KSE9PSExJiYoYS5nZXRJbnZlcnNlKGIpLHMuY29weShuLnJheSkuYXBwbHlNYXRyaXg0KGEpLG51bGw9PT1vLmJvdW5kaW5nQm94fHxzLmludGVyc2VjdHNCb3goby5ib3VuZGluZ0JveCkhPT0hMSkpKXt2YXIgeDtpZihvLmlzQnVmZmVyR2VvbWV0cnkpe3ZhciB3LEUsUyxNLEMsST1vLmluZGV4LE89by5hdHRyaWJ1dGVzLnBvc2l0aW9uLFQ9by5hdHRyaWJ1dGVzLnV2O2lmKG51bGwhPT1JKWZvcihNPTAsQz1JLmNvdW50O008QztNKz0zKXc9SS5nZXRYKE0pLEU9SS5nZXRYKE0rMSksUz1JLmdldFgoTSsyKSx4PXIodGhpcyxuLHMsTyxULHcsRSxTKSx4JiYoeC5mYWNlSW5kZXg9TWF0aC5mbG9vcihNLzMpLGkucHVzaCh4KSk7ZWxzZSBmb3IoTT0wLEM9Ty5jb3VudDtNPEM7TSs9Myl3PU0sRT1NKzEsUz1NKzIseD1yKHRoaXMsbixzLE8sVCx3LEUsUykseCYmKHguaW5kZXg9dyxpLnB1c2goeCkpfWVsc2UgaWYoby5pc0dlb21ldHJ5KXt2YXIgUCxBLEwsTixrPUFycmF5LmlzQXJyYXkoeSksUj1vLnZlcnRpY2VzLEQ9by5mYWNlcyxGPW8uZmFjZVZlcnRleFV2c1swXTtGLmxlbmd0aD4wJiYoTj1GKTtmb3IodmFyIEI9MCxqPUQubGVuZ3RoO0I8ajtCKyspe3ZhciBVPURbQl0sej1rP3lbVS5tYXRlcmlhbEluZGV4XTp5O2lmKHZvaWQgMCE9PXope2lmKFA9UltVLmFdLEE9UltVLmJdLEw9UltVLmNdLHoubW9ycGhUYXJnZXRzPT09ITApe3ZhciBHPW8ubW9ycGhUYXJnZXRzLFY9dGhpcy5tb3JwaFRhcmdldEluZmx1ZW5jZXM7bC5zZXQoMCwwLDApLGMuc2V0KDAsMCwwKSxoLnNldCgwLDAsMCk7Zm9yKHZhciBYPTAsSD1HLmxlbmd0aDtYPEg7WCsrKXt2YXIgcT1WW1hdO2lmKDAhPT1xKXt2YXIgWT1HW1hdLnZlcnRpY2VzO2wuYWRkU2NhbGVkVmVjdG9yKGYuc3ViVmVjdG9ycyhZW1UuYV0sUCkscSksYy5hZGRTY2FsZWRWZWN0b3IoZC5zdWJWZWN0b3JzKFlbVS5iXSxBKSxxKSxoLmFkZFNjYWxlZFZlY3RvcihwLnN1YlZlY3RvcnMoWVtVLmNdLEwpLHEpfX1sLmFkZChQKSxjLmFkZChBKSxoLmFkZChMKSxQPWwsQT1jLEw9aH1pZih4PWUodGhpcyxuLHMsUCxBLEwsXykpe2lmKE4mJk5bQl0pe3ZhciBXPU5bQl07Zy5jb3B5KFdbMF0pLHYuY29weShXWzFdKSxtLmNvcHkoV1syXSkseC51dj10KF8sUCxBLEwsZyx2LG0pfXguZmFjZT1VLHguZmFjZUluZGV4PUIsaS5wdXNoKHgpfX19fX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKX19KSxJdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNdC5wcm90b3R5cGUpLEl0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1JdCxPdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShNdC5wcm90b3R5cGUpLE90LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1PdCxUdC5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGF0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlR0LGlzQ2FtZXJhOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIGF0LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLm1hdHJpeFdvcmxkSW52ZXJzZS5jb3B5KHQubWF0cml4V29ybGRJbnZlcnNlKSx0aGlzLnByb2plY3Rpb25NYXRyaXguY29weSh0LnByb2plY3Rpb25NYXRyaXgpLHRoaXN9LGdldFdvcmxkRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBpPWV8fG5ldyBuO3JldHVybiB0aGlzLmdldFdvcmxkUXVhdGVybmlvbih0KSxpLnNldCgwLDAsLTEpLmFwcGx5UXVhdGVybmlvbih0KX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9fSksUHQucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShUdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpQdCxpc1BlcnNwZWN0aXZlQ2FtZXJhOiEwLGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIFR0LnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmZvdj10LmZvdix0aGlzLnpvb209dC56b29tLHRoaXMubmVhcj10Lm5lYXIsdGhpcy5mYXI9dC5mYXIsdGhpcy5mb2N1cz10LmZvY3VzLHRoaXMuYXNwZWN0PXQuYXNwZWN0LHRoaXMudmlldz1udWxsPT09dC52aWV3P251bGw6YSh7fSx0LnZpZXcpLHRoaXMuZmlsbUdhdWdlPXQuZmlsbUdhdWdlLHRoaXMuZmlsbU9mZnNldD10LmZpbG1PZmZzZXQsdGhpc30sc2V0Rm9jYWxMZW5ndGg6ZnVuY3Rpb24odCl7dmFyIGU9LjUqdGhpcy5nZXRGaWxtSGVpZ2h0KCkvdDt0aGlzLmZvdj0yKldyLlJBRDJERUcqTWF0aC5hdGFuKGUpLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSxnZXRGb2NhbExlbmd0aDpmdW5jdGlvbigpe3ZhciB0PU1hdGgudGFuKC41KldyLkRFRzJSQUQqdGhpcy5mb3YpO3JldHVybi41KnRoaXMuZ2V0RmlsbUhlaWdodCgpL3R9LGdldEVmZmVjdGl2ZUZPVjpmdW5jdGlvbigpe3JldHVybiAyKldyLlJBRDJERUcqTWF0aC5hdGFuKE1hdGgudGFuKC41KldyLkRFRzJSQUQqdGhpcy5mb3YpL3RoaXMuem9vbSl9LGdldEZpbG1XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZSpNYXRoLm1pbih0aGlzLmFzcGVjdCwxKX0sZ2V0RmlsbUhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbG1HYXVnZS9NYXRoLm1heCh0aGlzLmFzcGVjdCwxKX0sc2V0Vmlld09mZnNldDpmdW5jdGlvbih0LGUsbixpLHIsbyl7dGhpcy5hc3BlY3Q9dC9lLHRoaXMudmlldz17ZnVsbFdpZHRoOnQsZnVsbEhlaWdodDplLG9mZnNldFg6bixvZmZzZXRZOmksd2lkdGg6cixoZWlnaHQ6b30sdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe3RoaXMudmlldz1udWxsLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZWFyLGU9dCpNYXRoLnRhbiguNSpXci5ERUcyUkFEKnRoaXMuZm92KS90aGlzLnpvb20sbj0yKmUsaT10aGlzLmFzcGVjdCpuLHI9LS41Kmksbz10aGlzLnZpZXc7aWYobnVsbCE9PW8pe3ZhciBhPW8uZnVsbFdpZHRoLHM9by5mdWxsSGVpZ2h0O3IrPW8ub2Zmc2V0WCppL2EsZS09by5vZmZzZXRZKm4vcyxpKj1vLndpZHRoL2Esbio9by5oZWlnaHQvc312YXIgdT10aGlzLmZpbG1PZmZzZXQ7MCE9PXUmJihyKz10KnUvdGhpcy5nZXRGaWxtV2lkdGgoKSksdGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VQZXJzcGVjdGl2ZShyLHIraSxlLGUtbix0LHRoaXMuZmFyKX0sdG9KU09OOmZ1bmN0aW9uKHQpe3ZhciBlPWF0LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBlLm9iamVjdC5mb3Y9dGhpcy5mb3YsZS5vYmplY3Quem9vbT10aGlzLnpvb20sZS5vYmplY3QubmVhcj10aGlzLm5lYXIsZS5vYmplY3QuZmFyPXRoaXMuZmFyLGUub2JqZWN0LmZvY3VzPXRoaXMuZm9jdXMsZS5vYmplY3QuYXNwZWN0PXRoaXMuYXNwZWN0LG51bGwhPT10aGlzLnZpZXcmJihlLm9iamVjdC52aWV3PWEoe30sdGhpcy52aWV3KSksZS5vYmplY3QuZmlsbUdhdWdlPXRoaXMuZmlsbUdhdWdlLGUub2JqZWN0LmZpbG1PZmZzZXQ9dGhpcy5maWxtT2Zmc2V0LGV9fSksQXQucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShUdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpBdCxpc09ydGhvZ3JhcGhpY0NhbWVyYTohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBUdC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5sZWZ0PXQubGVmdCx0aGlzLnJpZ2h0PXQucmlnaHQsdGhpcy50b3A9dC50b3AsdGhpcy5ib3R0b209dC5ib3R0b20sdGhpcy5uZWFyPXQubmVhcix0aGlzLmZhcj10LmZhcix0aGlzLnpvb209dC56b29tLHRoaXMudmlldz1udWxsPT09dC52aWV3P251bGw6YSh7fSx0LnZpZXcpLHRoaXN9LHNldFZpZXdPZmZzZXQ6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3RoaXMudmlldz17ZnVsbFdpZHRoOnQsZnVsbEhlaWdodDplLG9mZnNldFg6bixvZmZzZXRZOmksd2lkdGg6cixoZWlnaHQ6b30sdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCl9LGNsZWFyVmlld09mZnNldDpmdW5jdGlvbigpe3RoaXMudmlldz1udWxsLHRoaXMudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfSx1cGRhdGVQcm9qZWN0aW9uTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ9KHRoaXMucmlnaHQtdGhpcy5sZWZ0KS8oMip0aGlzLnpvb20pLGU9KHRoaXMudG9wLXRoaXMuYm90dG9tKS8oMip0aGlzLnpvb20pLG49KHRoaXMucmlnaHQrdGhpcy5sZWZ0KS8yLGk9KHRoaXMudG9wK3RoaXMuYm90dG9tKS8yLHI9bi10LG89bit0LGE9aStlLHM9aS1lO2lmKG51bGwhPT10aGlzLnZpZXcpe3ZhciB1PXRoaXMuem9vbS8odGhpcy52aWV3LndpZHRoL3RoaXMudmlldy5mdWxsV2lkdGgpLGw9dGhpcy56b29tLyh0aGlzLnZpZXcuaGVpZ2h0L3RoaXMudmlldy5mdWxsSGVpZ2h0KSxjPSh0aGlzLnJpZ2h0LXRoaXMubGVmdCkvdGhpcy52aWV3LndpZHRoLGg9KHRoaXMudG9wLXRoaXMuYm90dG9tKS90aGlzLnZpZXcuaGVpZ2h0O3IrPWMqKHRoaXMudmlldy5vZmZzZXRYL3UpLG89citjKih0aGlzLnZpZXcud2lkdGgvdSksYS09aCoodGhpcy52aWV3Lm9mZnNldFkvbCkscz1hLWgqKHRoaXMudmlldy5oZWlnaHQvbCl9dGhpcy5wcm9qZWN0aW9uTWF0cml4Lm1ha2VPcnRob2dyYXBoaWMocixvLGEscyx0aGlzLm5lYXIsdGhpcy5mYXIpfSx0b0pTT046ZnVuY3Rpb24odCl7dmFyIGU9YXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7cmV0dXJuIGUub2JqZWN0Lnpvb209dGhpcy56b29tLGUub2JqZWN0LmxlZnQ9dGhpcy5sZWZ0LGUub2JqZWN0LnJpZ2h0PXRoaXMucmlnaHQsZS5vYmplY3QudG9wPXRoaXMudG9wLGUub2JqZWN0LmJvdHRvbT10aGlzLmJvdHRvbSxlLm9iamVjdC5uZWFyPXRoaXMubmVhcixlLm9iamVjdC5mYXI9dGhpcy5mYXIsbnVsbCE9PXRoaXMudmlldyYmKGUub2JqZWN0LnZpZXc9YSh7fSx0aGlzLnZpZXcpKSxlfX0pO3ZhciBwcz0wO2NlLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoYXQucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6Y2UsY29weTpmdW5jdGlvbih0LGUpe3JldHVybiBhdC5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCxlKSxudWxsIT09dC5iYWNrZ3JvdW5kJiYodGhpcy5iYWNrZ3JvdW5kPXQuYmFja2dyb3VuZC5jbG9uZSgpKSxudWxsIT09dC5mb2cmJih0aGlzLmZvZz10LmZvZy5jbG9uZSgpKSxudWxsIT09dC5vdmVycmlkZU1hdGVyaWFsJiYodGhpcy5vdmVycmlkZU1hdGVyaWFsPXQub3ZlcnJpZGVNYXRlcmlhbC5jbG9uZSgpKSx0aGlzLmF1dG9VcGRhdGU9dC5hdXRvVXBkYXRlLHRoaXMubWF0cml4QXV0b1VwZGF0ZT10Lm1hdHJpeEF1dG9VcGRhdGUsdGhpc30sdG9KU09OOmZ1bmN0aW9uKHQpe3ZhciBlPWF0LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzLHQpO3JldHVybiBudWxsIT09dGhpcy5iYWNrZ3JvdW5kJiYoZS5vYmplY3QuYmFja2dyb3VuZD10aGlzLmJhY2tncm91bmQudG9KU09OKHQpKSxudWxsIT09dGhpcy5mb2cmJihlLm9iamVjdC5mb2c9dGhpcy5mb2cudG9KU09OKCkpLGV9fSksaGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVy5wcm90b3R5cGUpLGhlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oZSxoZS5wcm90b3R5cGUuaXNTcHJpdGVNYXRlcmlhbD0hMCxoZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gVy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMubWFwPXQubWFwLHRoaXMucm90YXRpb249dC5yb3RhdGlvbix0aGlzfSxmZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGF0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmZlLGlzU3ByaXRlOiEwLHJheWNhc3Q6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbixlPW5ldyBuLGk9bmV3IG47cmV0dXJuIGZ1bmN0aW9uKG4scil7ZS5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5tYXRyaXhXb3JsZCksbi5yYXkuY2xvc2VzdFBvaW50VG9Qb2ludChlLHQpLGkuc2V0RnJvbU1hdHJpeFNjYWxlKHRoaXMubWF0cml4V29ybGQpO3ZhciBvPWkueCppLnkvNDtpZighKGUuZGlzdGFuY2VUb1NxdWFyZWQodCk+bykpe3ZhciBhPW4ucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKHQpO2E8bi5uZWFyfHxhPm4uZmFyfHxyLnB1c2goe2Rpc3RhbmNlOmEscG9pbnQ6dC5jbG9uZSgpLGZhY2U6bnVsbCxvYmplY3Q6dGhpc30pfX19KCksY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKX19KSxkZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShXLnByb3RvdHlwZSksZGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWRlLGRlLnByb3RvdHlwZS5pc0xpbmVCYXNpY01hdGVyaWFsPSEwLGRlLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiBXLnByb3RvdHlwZS5jb3B5LmNhbGwodGhpcyx0KSx0aGlzLmNvbG9yLmNvcHkodC5jb2xvciksdGhpcy5saW5ld2lkdGg9dC5saW5ld2lkdGgsdGhpcy5saW5lY2FwPXQubGluZWNhcCx0aGlzLmxpbmVqb2luPXQubGluZWpvaW4sdGhpc30scGUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShhdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpwZSxpc0xpbmU6ITAscmF5Y2FzdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBpLGU9bmV3IGl0LHI9bmV3IFE7cmV0dXJuIGZ1bmN0aW9uKGksbyl7dmFyIGE9aS5saW5lUHJlY2lzaW9uLHM9YSphLHU9dGhpcy5nZW9tZXRyeSxsPXRoaXMubWF0cml4V29ybGQ7aWYobnVsbD09PXUuYm91bmRpbmdTcGhlcmUmJnUuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksci5jb3B5KHUuYm91bmRpbmdTcGhlcmUpLHIuYXBwbHlNYXRyaXg0KGwpLGkucmF5LmludGVyc2VjdHNTcGhlcmUocikhPT0hMSl7dC5nZXRJbnZlcnNlKGwpLGUuY29weShpLnJheSkuYXBwbHlNYXRyaXg0KHQpO3ZhciBjPW5ldyBuLGg9bmV3IG4sZj1uZXcgbixkPW5ldyBuLHA9dGhpcyYmdGhpcy5pc0xpbmVTZWdtZW50cz8yOjE7aWYodS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgZz11LmluZGV4LHY9dS5hdHRyaWJ1dGVzLG09di5wb3NpdGlvbi5hcnJheTtpZihudWxsIT09Zylmb3IodmFyIHk9Zy5hcnJheSxfPTAsYj15Lmxlbmd0aC0xO188YjtfKz1wKXt2YXIgeD15W19dLHc9eVtfKzFdO2MuZnJvbUFycmF5KG0sMyp4KSxoLmZyb21BcnJheShtLDMqdyk7dmFyIEU9ZS5kaXN0YW5jZVNxVG9TZWdtZW50KGMsaCxkLGYpO2lmKCEoRT5zKSl7ZC5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7dmFyIFM9aS5yYXkub3JpZ2luLmRpc3RhbmNlVG8oZCk7UzxpLm5lYXJ8fFM+aS5mYXJ8fG8ucHVzaCh7ZGlzdGFuY2U6Uyxwb2ludDpmLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4Ol8sZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSl9fWVsc2UgZm9yKHZhciBfPTAsYj1tLmxlbmd0aC8zLTE7XzxiO18rPXApe2MuZnJvbUFycmF5KG0sMypfKSxoLmZyb21BcnJheShtLDMqXyszKTt2YXIgRT1lLmRpc3RhbmNlU3FUb1NlZ21lbnQoYyxoLGQsZik7aWYoIShFPnMpKXtkLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTt2YXIgUz1pLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhkKTtTPGkubmVhcnx8Uz5pLmZhcnx8by5wdXNoKHtkaXN0YW5jZTpTLHBvaW50OmYuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksaW5kZXg6XyxmYWNlOm51bGwsZmFjZUluZGV4Om51bGwsb2JqZWN0OnRoaXN9KX19fWVsc2UgaWYodS5pc0dlb21ldHJ5KWZvcih2YXIgTT11LnZlcnRpY2VzLEM9TS5sZW5ndGgsXz0wO188Qy0xO18rPXApe3ZhciBFPWUuZGlzdGFuY2VTcVRvU2VnbWVudChNW19dLE1bXysxXSxkLGYpO2lmKCEoRT5zKSl7ZC5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCk7dmFyIFM9aS5yYXkub3JpZ2luLmRpc3RhbmNlVG8oZCk7UzxpLm5lYXJ8fFM+aS5mYXJ8fG8ucHVzaCh7ZGlzdGFuY2U6Uyxwb2ludDpmLmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLGluZGV4Ol8sZmFjZTpudWxsLGZhY2VJbmRleDpudWxsLG9iamVjdDp0aGlzfSl9fX19fSgpLGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZ2VvbWV0cnksdGhpcy5tYXRlcmlhbCkuY29weSh0aGlzKX19KSxnZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKHBlLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOmdlLGlzTGluZVNlZ21lbnRzOiEwfSksdmUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVy5wcm90b3R5cGUpLHZlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj12ZSx2ZS5wcm90b3R5cGUuaXNQb2ludHNNYXRlcmlhbD0hMCx2ZS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gVy5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5jb2xvci5jb3B5KHQuY29sb3IpLHRoaXMubWFwPXQubWFwLHRoaXMuc2l6ZT10LnNpemUsdGhpcy5zaXplQXR0ZW51YXRpb249dC5zaXplQXR0ZW51YXRpb24sdGhpc30sbWUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShhdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjptZSxpc1BvaW50czohMCxyYXljYXN0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGksZT1uZXcgaXQscj1uZXcgUTtyZXR1cm4gZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBhKHQsbil7dmFyIHI9ZS5kaXN0YW5jZVNxVG9Qb2ludCh0KTtpZihyPGYpe3ZhciBhPWUuY2xvc2VzdFBvaW50VG9Qb2ludCh0KTthLmFwcGx5TWF0cml4NChsKTt2YXIgdT1pLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhhKTtpZih1PGkubmVhcnx8dT5pLmZhcilyZXR1cm47by5wdXNoKHtkaXN0YW5jZTp1LGRpc3RhbmNlVG9SYXk6TWF0aC5zcXJ0KHIpLHBvaW50OmEuY2xvbmUoKSxpbmRleDpuLGZhY2U6bnVsbCxvYmplY3Q6c30pfX12YXIgcz10aGlzLHU9dGhpcy5nZW9tZXRyeSxsPXRoaXMubWF0cml4V29ybGQsYz1pLnBhcmFtcy5Qb2ludHMudGhyZXNob2xkO2lmKG51bGw9PT11LmJvdW5kaW5nU3BoZXJlJiZ1LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHIuY29weSh1LmJvdW5kaW5nU3BoZXJlKSxyLmFwcGx5TWF0cml4NChsKSxyLnJhZGl1cys9YyxpLnJheS5pbnRlcnNlY3RzU3BoZXJlKHIpIT09ITEpe3QuZ2V0SW52ZXJzZShsKSxlLmNvcHkoaS5yYXkpLmFwcGx5TWF0cml4NCh0KTt2YXIgaD1jLygodGhpcy5zY2FsZS54K3RoaXMuc2NhbGUueSt0aGlzLnNjYWxlLnopLzMpLGY9aCpoLGQ9bmV3IG47aWYodS5pc0J1ZmZlckdlb21ldHJ5KXt2YXIgcD11LmluZGV4LGc9dS5hdHRyaWJ1dGVzLHY9Zy5wb3NpdGlvbi5hcnJheTtpZihudWxsIT09cClmb3IodmFyIG09cC5hcnJheSx5PTAsXz1tLmxlbmd0aDt5PF87eSsrKXt2YXIgYj1tW3ldO2QuZnJvbUFycmF5KHYsMypiKSxhKGQsYil9ZWxzZSBmb3IodmFyIHk9MCx4PXYubGVuZ3RoLzM7eTx4O3krKylkLmZyb21BcnJheSh2LDMqeSksYShkLHkpfWVsc2UgZm9yKHZhciB3PXUudmVydGljZXMseT0wLHg9dy5sZW5ndGg7eTx4O3krKylhKHdbeV0seSl9fX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdlb21ldHJ5LHRoaXMubWF0ZXJpYWwpLmNvcHkodGhpcyl9fSkseWUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShhdC5wcm90b3R5cGUpLHtjb25zdHJ1Y3Rvcjp5ZX0pLF9lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFN0LnByb3RvdHlwZSksX2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPV9lLGJlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE10LnByb3RvdHlwZSksYmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWJlLHhlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFN0LnByb3RvdHlwZSkseGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPXhlLHdlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE10LnByb3RvdHlwZSksd2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPXdlO3ZhciBncz17YXJlYTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgsbj0wLGk9ZS0xLHI9MDtyPGU7aT1yKyspbis9dFtpXS54KnRbcl0ueS10W3JdLngqdFtpXS55O3JldHVybi41Km59LHRyaWFuZ3VsYXRlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsbixpLHIsbyl7dmFyIGEscyx1LGwsYyxoLGYsZCxwO2lmKHM9dFtvW2VdXS54LHU9dFtvW2VdXS55LGw9dFtvW25dXS54LGM9dFtvW25dXS55LGg9dFtvW2ldXS54LGY9dFtvW2ldXS55LChsLXMpKihmLXUpLShjLXUpKihoLXMpPD0wKXJldHVybiExO3ZhciBnLHYsbSx5LF8sYix4LHcsRSxTLE0sQyxJLE8sVDtmb3IoZz1oLWwsdj1mLWMsbT1zLWgseT11LWYsXz1sLXMsYj1jLXUsYT0wO2E8cjthKyspaWYoZD10W29bYV1dLngscD10W29bYV1dLnksIShkPT09cyYmcD09PXV8fGQ9PT1sJiZwPT09Y3x8ZD09PWgmJnA9PT1mKSYmKHg9ZC1zLHc9cC11LEU9ZC1sLFM9cC1jLE09ZC1oLEM9cC1mLFQ9ZypTLXYqRSxJPV8qdy1iKngsTz1tKkMteSpNLFQ+PS1OdW1iZXIuRVBTSUxPTiYmTz49LU51bWJlci5FUFNJTE9OJiZJPj0tTnVtYmVyLkVQU0lMT04pKXJldHVybiExO3JldHVybiEwfXJldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPWUubGVuZ3RoO2lmKGk8MylyZXR1cm4gbnVsbDt2YXIgcixvLGEscz1bXSx1PVtdLGw9W107aWYoZ3MuYXJlYShlKT4wKWZvcihvPTA7bzxpO28rKyl1W29dPW87ZWxzZSBmb3Iobz0wO288aTtvKyspdVtvXT1pLTEtbzt2YXIgYz1pLGg9MipjO2ZvcihvPWMtMTtjPjI7KXtpZihoLS08PTApcmV0dXJuIGNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlVXRpbHM6IFVuYWJsZSB0byB0cmlhbmd1bGF0ZSBwb2x5Z29uISBpbiB0cmlhbmd1bGF0ZSgpXCIpLG4/bDpzO2lmKHI9byxjPD1yJiYocj0wKSxvPXIrMSxjPD1vJiYobz0wKSxhPW8rMSxjPD1hJiYoYT0wKSx0KGUscixvLGEsYyx1KSl7dmFyIGYsZCxwLGcsdjtmb3IoZj11W3JdLGQ9dVtvXSxwPXVbYV0scy5wdXNoKFtlW2ZdLGVbZF0sZVtwXV0pLGwucHVzaChbdVtyXSx1W29dLHVbYV1dKSxnPW8sdj1vKzE7djxjO2crKyx2KyspdVtnXT11W3ZdO2MtLSxoPTIqY319cmV0dXJuIG4/bDpzfX0oKSx0cmlhbmd1bGF0ZVNoYXBlOmZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10Lmxlbmd0aDtlPjImJnRbZS0xXS5lcXVhbHModFswXSkmJnQucG9wKCl9ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIHQueCE9PWUueD90Lng8ZS54P3QueDw9bi54JiZuLng8PWUueDplLng8PW4ueCYmbi54PD10Lng6dC55PGUueT90Lnk8PW4ueSYmbi55PD1lLnk6ZS55PD1uLnkmJm4ueTw9dC55fWZ1bmN0aW9uIHIodCxlLG4scixvKXt2YXIgYT1lLngtdC54LHM9ZS55LXQueSx1PXIueC1uLngsbD1yLnktbi55LGM9dC54LW4ueCxoPXQueS1uLnksZj1zKnUtYSpsLGQ9cypjLWEqaDtpZihNYXRoLmFicyhmKT5OdW1iZXIuRVBTSUxPTil7dmFyIHA7aWYoZj4wKXtpZihkPDB8fGQ+ZilyZXR1cm5bXTtpZihwPWwqYy11KmgscDwwfHxwPmYpcmV0dXJuW119ZWxzZXtpZihkPjB8fGQ8ZilyZXR1cm5bXTtpZihwPWwqYy11KmgscD4wfHxwPGYpcmV0dXJuW119aWYoMD09PXApcmV0dXJuIW98fDAhPT1kJiZkIT09Zj9bdF06W107aWYocD09PWYpcmV0dXJuIW98fDAhPT1kJiZkIT09Zj9bZV06W107aWYoMD09PWQpcmV0dXJuW25dO2lmKGQ9PT1mKXJldHVybltyXTt2YXIgZz1wL2Y7cmV0dXJuW3t4OnQueCtnKmEseTp0LnkrZypzfV19aWYoMCE9PWR8fGwqYyE9PXUqaClyZXR1cm5bXTt2YXIgdj0wPT09YSYmMD09PXMsbT0wPT09dSYmMD09PWw7aWYodiYmbSlyZXR1cm4gdC54IT09bi54fHx0LnkhPT1uLnk/W106W3RdO2lmKHYpcmV0dXJuIGkobixyLHQpP1t0XTpbXTtpZihtKXJldHVybiBpKHQsZSxuKT9bbl06W107dmFyIHksXyxiLHgsdyxFLFMsTTtyZXR1cm4gMCE9PWE/KHQueDxlLng/KHk9dCxiPXQueCxfPWUseD1lLngpOih5PWUsYj1lLngsXz10LHg9dC54KSxuLng8ci54Pyh3PW4sUz1uLngsRT1yLE09ci54KToodz1yLFM9ci54LEU9bixNPW4ueCkpOih0Lnk8ZS55Pyh5PXQsYj10LnksXz1lLHg9ZS55KTooeT1lLGI9ZS55LF89dCx4PXQueSksbi55PHIueT8odz1uLFM9bi55LEU9cixNPXIueSk6KHc9cixTPXIueSxFPW4sTT1uLnkpKSxiPD1TP3g8Uz9bXTp4PT09Uz9vP1tdOlt3XTp4PD1NP1t3LF9dOlt3LEVdOmI+TT9bXTpiPT09TT9vP1tdOlt5XTp4PD1NP1t5LF9dOlt5LEVdfWZ1bmN0aW9uIG8odCxlLG4saSl7dmFyIHI9ZS54LXQueCxvPWUueS10LnksYT1uLngtdC54LHM9bi55LXQueSx1PWkueC10LngsbD1pLnktdC55LGM9cipzLW8qYSxoPXIqbC1vKnU7aWYoTWF0aC5hYnMoYyk+TnVtYmVyLkVQU0lMT04pe3ZhciBmPXUqcy1sKmE7cmV0dXJuIGM+MD9oPj0wJiZmPj0wOmg+PTB8fGY+PTB9cmV0dXJuIGg+MH1mdW5jdGlvbiBhKHQsZSl7ZnVuY3Rpb24gbih0LGUpe3ZhciBuPXkubGVuZ3RoLTEsaT10LTE7aTwwJiYoaT1uKTt2YXIgcj10KzE7cj5uJiYocj0wKTt2YXIgYT1vKHlbdF0seVtpXSx5W3JdLHNbZV0pO2lmKCFhKXJldHVybiExO3ZhciB1PXMubGVuZ3RoLTEsbD1lLTE7bDwwJiYobD11KTt2YXIgYz1lKzE7cmV0dXJuIGM+dSYmKGM9MCksYT1vKHNbZV0sc1tsXSxzW2NdLHlbdF0pLCEhYX1mdW5jdGlvbiBpKHQsZSl7dmFyIG4saSxvO2ZvcihuPTA7bjx5Lmxlbmd0aDtuKyspaWYoaT1uKzEsaSU9eS5sZW5ndGgsbz1yKHQsZSx5W25dLHlbaV0sITApLG8ubGVuZ3RoPjApcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYSh0LG4pe3ZhciBpLG8sYSxzLHU7Zm9yKGk9MDtpPF8ubGVuZ3RoO2krKylmb3Iobz1lW19baV1dLGE9MDthPG8ubGVuZ3RoO2ErKylpZihzPWErMSxzJT1vLmxlbmd0aCx1PXIodCxuLG9bYV0sb1tzXSwhMCksdS5sZW5ndGg+MClyZXR1cm4hMDtyZXR1cm4hMX1mb3IodmFyIHMsdSxsLGMsaCxmLGQscCxnLHYsbSx5PXQuY29uY2F0KCksXz1bXSxiPVtdLHg9MCx3PWUubGVuZ3RoO3g8dzt4KyspXy5wdXNoKHgpO2Zvcih2YXIgRT0wLFM9MipfLmxlbmd0aDtfLmxlbmd0aD4wOyl7aWYoUy0tLFM8MCl7Y29uc29sZS5sb2coXCJJbmZpbml0ZSBMb29wISBIb2xlcyBsZWZ0OlwiK18ubGVuZ3RoK1wiLCBQcm9iYWJseSBIb2xlIG91dHNpZGUgU2hhcGUhXCIpO2JyZWFrfWZvcihsPUU7bDx5Lmxlbmd0aDtsKyspe2M9eVtsXSx1PS0xO2Zvcih2YXIgeD0wO3g8Xy5sZW5ndGg7eCsrKWlmKGY9X1t4XSxkPWMueCtcIjpcIitjLnkrXCI6XCIrZix2b2lkIDA9PT1iW2RdKXtzPWVbZl07Zm9yKHZhciBNPTA7TTxzLmxlbmd0aDtNKyspaWYoaD1zW01dLG4obCxNKSYmIWkoYyxoKSYmIWEoYyxoKSl7dT1NLF8uc3BsaWNlKHgsMSkscD15LnNsaWNlKDAsbCsxKSxnPXkuc2xpY2UobCksdj1zLnNsaWNlKHUpLG09cy5zbGljZSgwLHUrMSkseT1wLmNvbmNhdCh2KS5jb25jYXQobSkuY29uY2F0KGcpLEU9bDticmVha31pZih1Pj0wKWJyZWFrO2JbZF09ITB9aWYodT49MClicmVha319cmV0dXJuIHl9bih0KSxlLmZvckVhY2gobik7Zm9yKHZhciBzLHUsbCxjLGgsZixkPXt9LHA9dC5jb25jYXQoKSxnPTAsdj1lLmxlbmd0aDtnPHY7ZysrKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHAsZVtnXSk7Zm9yKHM9MCx1PXAubGVuZ3RoO3M8dTtzKyspaD1wW3NdLngrXCI6XCIrcFtzXS55LHZvaWQgMCE9PWRbaF0mJmNvbnNvbGUud2FybihcIlRIUkVFLlNoYXBlVXRpbHM6IER1cGxpY2F0ZSBwb2ludFwiLGgscyksZFtoXT1zO3ZhciBtPWEodCxlKSx5PWdzLnRyaWFuZ3VsYXRlKG0sITEpO2ZvcihzPTAsdT15Lmxlbmd0aDtzPHU7cysrKWZvcihjPXlbc10sbD0wO2w8MztsKyspaD1jW2xdLngrXCI6XCIrY1tsXS55LGY9ZFtoXSx2b2lkIDAhPT1mJiYoY1tsXT1mKTtyZXR1cm4geS5jb25jYXQoKX0saXNDbG9ja1dpc2U6ZnVuY3Rpb24odCl7cmV0dXJuIGdzLmFyZWEodCk8MH19O0VlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFN0LnByb3RvdHlwZSksRWUucHJvdG90eXBlLmNvbnN0cnVjdG9yPUVlLFNlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE10LnByb3RvdHlwZSksU2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPVNlLE1lLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFN0LnByb3RvdHlwZSksTWUucHJvdG90eXBlLmNvbnN0cnVjdG9yPU1lLENlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKE10LnByb3RvdHlwZSksQ2UucHJvdG90eXBlLmNvbnN0cnVjdG9yPUNlLENlLnByb3RvdHlwZS5nZXRBcnJheXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLGU9dD9BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmFycmF5KTpbXSxuPXRoaXMuZ2V0QXR0cmlidXRlKFwidXZcIiksaT1uP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4uYXJyYXkpOltdLHI9dGhpcy5pbmRleCxvPXI/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoci5hcnJheSk6W107cmV0dXJue3Bvc2l0aW9uOmUsdXY6aSxpbmRleDpvfX0sQ2UucHJvdG90eXBlLmFkZFNoYXBlTGlzdD1mdW5jdGlvbih0LGUpe3ZhciBuPXQubGVuZ3RoO2UuYXJyYXlzPXRoaXMuZ2V0QXJyYXlzKCk7Zm9yKHZhciBpPTA7aTxuO2krKyl7dmFyIHI9dFtpXTt0aGlzLmFkZFNoYXBlKHIsZSl9dGhpcy5zZXRJbmRleChlLmFycmF5cy5pbmRleCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBfdChlLmFycmF5cy5wb3NpdGlvbiwzKSksdGhpcy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBfdChlLmFycmF5cy51diwyKSl9LENlLnByb3RvdHlwZS5hZGRTaGFwZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCxlLG4pe3JldHVybiBlfHxjb25zb2xlLmVycm9yKFwiVEhSRUUuRXh0cnVkZUdlb21ldHJ5OiB2ZWMgZG9lcyBub3QgZXhpc3RcIiksZS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKG4pLmFkZCh0KX1mdW5jdGlvbiByKHQsZSxuKXt2YXIgaSxyLGE9MSxzPXQueC1lLngsdT10LnktZS55LGw9bi54LXQueCxjPW4ueS10LnksaD1zKnMrdSp1LGY9cypjLXUqbDtpZihNYXRoLmFicyhmKT5OdW1iZXIuRVBTSUxPTil7dmFyIGQ9TWF0aC5zcXJ0KGgpLHA9TWF0aC5zcXJ0KGwqbCtjKmMpLGc9ZS54LXUvZCx2PWUueStzL2QsbT1uLngtYy9wLHk9bi55K2wvcCxfPSgobS1nKSpjLSh5LXYpKmwpLyhzKmMtdSpsKTtpPWcrcypfLXQueCxyPXYrdSpfLXQueTt2YXIgYj1pKmkrcipyO2lmKGI8PTIpcmV0dXJuIG5ldyBvKGkscik7YT1NYXRoLnNxcnQoYi8yKX1lbHNle3ZhciB4PSExO3M+TnVtYmVyLkVQU0lMT04/bD5OdW1iZXIuRVBTSUxPTiYmKHg9ITApOnM8LU51bWJlci5FUFNJTE9OP2w8LU51bWJlci5FUFNJTE9OJiYoeD0hMCk6TWF0aC5zaWduKHUpPT09TWF0aC5zaWduKGMpJiYoeD0hMCkseD8oaT0tdSxyPXMsYT1NYXRoLnNxcnQoaCkpOihpPXMscj11LGE9TWF0aC5zcXJ0KGgvMikpfXJldHVybiBuZXcgbyhpL2Esci9hKX1mdW5jdGlvbiBhKCl7dmFyIHQ9Yi5sZW5ndGgvMztpZihPKXt2YXIgbj0wLGk9SipuO2ZvcigkPTA7JDxLOyQrKylaPUdbJF0sYyhaWzJdK2ksWlsxXStpLFpbMF0raSk7Zm9yKG49UCsyKkksaT1KKm4sJD0wOyQ8SzskKyspWj1HWyRdLGMoWlswXStpLFpbMV0raSxaWzJdK2kpfWVsc2V7Zm9yKCQ9MDskPEs7JCsrKVo9R1skXSxjKFpbMl0sWlsxXSxaWzBdKTtmb3IoJD0wOyQ8SzskKyspWj1HWyRdLGMoWlswXStKKlAsWlsxXStKKlAsWlsyXStKKlApfUYuYWRkR3JvdXAodCxiLmxlbmd0aC8zLXQsdm9pZCAwIT09ZS5tYXRlcmlhbD9lLm1hdGVyaWFsOjApfWZ1bmN0aW9uIHMoKXt2YXIgdD1iLmxlbmd0aC8zLG49MDtmb3IodShWLG4pLG4rPVYubGVuZ3RoLFI9MCxEPVUubGVuZ3RoO1I8RDtSKyspaz1VW1JdLHUoayxuKSxuKz1rLmxlbmd0aDtGLmFkZEdyb3VwKHQsYi5sZW5ndGgvMy10LHZvaWQgMCE9PWUuZXh0cnVkZU1hdGVyaWFsP2UuZXh0cnVkZU1hdGVyaWFsOjEpfWZ1bmN0aW9uIHUodCxlKXt2YXIgbixpO2ZvcigkPXQubGVuZ3RoOy0tJD49MDspe249JCxpPSQtMSxpPDAmJihpPXQubGVuZ3RoLTEpO3ZhciByPTAsbz1QKzIqSTtmb3Iocj0wO3I8bztyKyspe3ZhciBhPUoqcixzPUoqKHIrMSksdT1lK24rYSxsPWUraSthLGM9ZStpK3MsZj1lK24rcztoKHUsbCxjLGYsdCxyLG8sbixpKX19fWZ1bmN0aW9uIGwodCxlLG4pe0UucHVzaCh0KSxFLnB1c2goZSksRS5wdXNoKG4pfWZ1bmN0aW9uIGModCxlLG4pe2YodCksZihlKSxmKG4pO3ZhciBpPWIubGVuZ3RoLzMscj1OLmdlbmVyYXRlVG9wVVYoRixiLGktMyxpLTIsaS0xKTtkKHJbMF0pLGQoclsxXSksZChyWzJdKX1mdW5jdGlvbiBoKHQsZSxuLGkscixvLGEscyx1KXtmKHQpLGYoZSksZihpKSxmKGUpLGYobiksZihpKTt2YXIgbD1iLmxlbmd0aC8zLGM9Ti5nZW5lcmF0ZVNpZGVXYWxsVVYoRixiLGwtNixsLTMsbC0yLGwtMSk7ZChjWzBdKSxkKGNbMV0pLGQoY1szXSksZChjWzFdKSxkKGNbMl0pLGQoY1szXSl9ZnVuY3Rpb24gZih0KXt4LnB1c2goYi5sZW5ndGgvMyksYi5wdXNoKEVbMyp0KzBdKSxiLnB1c2goRVszKnQrMV0pLGIucHVzaChFWzMqdCsyXSl9ZnVuY3Rpb24gZCh0KXt3LnB1c2godC54KSx3LnB1c2godC55KX12YXIgcCxnLHYsbSx5LF89ZS5hcnJheXM/ZS5hcnJheXM6dGhpcy5nZXRBcnJheXMoKSxiPV8ucG9zaXRpb24seD1fLmluZGV4LHc9Xy51dixFPVtdLFM9dm9pZCAwIT09ZS5hbW91bnQ/ZS5hbW91bnQ6MTAwLE09dm9pZCAwIT09ZS5iZXZlbFRoaWNrbmVzcz9lLmJldmVsVGhpY2tuZXNzOjYsQz12b2lkIDAhPT1lLmJldmVsU2l6ZT9lLmJldmVsU2l6ZTpNLTIsST12b2lkIDAhPT1lLmJldmVsU2VnbWVudHM/ZS5iZXZlbFNlZ21lbnRzOjMsTz12b2lkIDA9PT1lLmJldmVsRW5hYmxlZHx8ZS5iZXZlbEVuYWJsZWQsVD12b2lkIDAhPT1lLmN1cnZlU2VnbWVudHM/ZS5jdXJ2ZVNlZ21lbnRzOjEyLFA9dm9pZCAwIT09ZS5zdGVwcz9lLnN0ZXBzOjEsQT1lLmV4dHJ1ZGVQYXRoLEw9ITEsTj12b2lkIDAhPT1lLlVWR2VuZXJhdG9yP2UuVVZHZW5lcmF0b3I6TWUuV29ybGRVVkdlbmVyYXRvcjtBJiYocD1BLmdldFNwYWNlZFBvaW50cyhQKSxMPSEwLE89ITEsZz12b2lkIDAhPT1lLmZyYW1lcz9lLmZyYW1lczpBLmNvbXB1dGVGcmVuZXRGcmFtZXMoUCwhMSksdj1uZXcgbixtPW5ldyBuLHk9bmV3IG4pLE98fChJPTAsTT0wLEM9MCk7dmFyIGssUixELEY9dGhpcyxCPXQuZXh0cmFjdFBvaW50cyhUKSxqPUIuc2hhcGUsVT1CLmhvbGVzLHo9IWdzLmlzQ2xvY2tXaXNlKGopO2lmKHope2ZvcihqPWoucmV2ZXJzZSgpLFI9MCxEPVUubGVuZ3RoO1I8RDtSKyspaz1VW1JdLGdzLmlzQ2xvY2tXaXNlKGspJiYoVVtSXT1rLnJldmVyc2UoKSk7ej0hMX12YXIgRz1ncy50cmlhbmd1bGF0ZVNoYXBlKGosVSksVj1qO2ZvcihSPTAsRD1VLmxlbmd0aDtSPEQ7UisrKWs9VVtSXSxqPWouY29uY2F0KGspO2Zvcih2YXIgWCxILHEsWSxXLFosSj1qLmxlbmd0aCxLPUcubGVuZ3RoLFE9W10sJD0wLHR0PVYubGVuZ3RoLGV0PXR0LTEsbnQ9JCsxOyQ8dHQ7JCsrLGV0KyssbnQrKylldD09PXR0JiYoZXQ9MCksbnQ9PT10dCYmKG50PTApLFFbJF09cihWWyRdLFZbZXRdLFZbbnRdKTt2YXIgaXQscnQ9W10sb3Q9US5jb25jYXQoKTtmb3IoUj0wLEQ9VS5sZW5ndGg7UjxEO1IrKyl7Zm9yKGs9VVtSXSxpdD1bXSwkPTAsdHQ9ay5sZW5ndGgsZXQ9dHQtMSxudD0kKzE7JDx0dDskKyssZXQrKyxudCsrKWV0PT09dHQmJihldD0wKSxudD09PXR0JiYobnQ9MCksaXRbJF09cihrWyRdLGtbZXRdLGtbbnRdKTtydC5wdXNoKGl0KSxvdD1vdC5jb25jYXQoaXQpfWZvcihYPTA7WDxJO1grKyl7Zm9yKHE9WC9JLFk9TSpNYXRoLmNvcyhxKk1hdGguUEkvMiksSD1DKk1hdGguc2luKHEqTWF0aC5QSS8yKSwkPTAsdHQ9Vi5sZW5ndGg7JDx0dDskKyspVz1pKFZbJF0sUVskXSxIKSxsKFcueCxXLnksLVkpO2ZvcihSPTAsRD1VLmxlbmd0aDtSPEQ7UisrKWZvcihrPVVbUl0saXQ9cnRbUl0sJD0wLHR0PWsubGVuZ3RoOyQ8dHQ7JCsrKVc9aShrWyRdLGl0WyRdLEgpLGwoVy54LFcueSwtWSl9Zm9yKEg9QywkPTA7JDxKOyQrKylXPU8/aShqWyRdLG90WyRdLEgpOmpbJF0sTD8obS5jb3B5KGcubm9ybWFsc1swXSkubXVsdGlwbHlTY2FsYXIoVy54KSx2LmNvcHkoZy5iaW5vcm1hbHNbMF0pLm11bHRpcGx5U2NhbGFyKFcueSkseS5jb3B5KHBbMF0pLmFkZChtKS5hZGQodiksbCh5LngseS55LHkueikpOmwoVy54LFcueSwwKTt2YXIgYXQ7Zm9yKGF0PTE7YXQ8PVA7YXQrKylmb3IoJD0wOyQ8SjskKyspVz1PP2koalskXSxvdFskXSxIKTpqWyRdLEw/KG0uY29weShnLm5vcm1hbHNbYXRdKS5tdWx0aXBseVNjYWxhcihXLngpLHYuY29weShnLmJpbm9ybWFsc1thdF0pLm11bHRpcGx5U2NhbGFyKFcueSkseS5jb3B5KHBbYXRdKS5hZGQobSkuYWRkKHYpLGwoeS54LHkueSx5LnopKTpsKFcueCxXLnksUy9QKmF0KTtmb3IoWD1JLTE7WD49MDtYLS0pe2ZvcihxPVgvSSxZPU0qTWF0aC5jb3MocSpNYXRoLlBJLzIpLEg9QypNYXRoLnNpbihxKk1hdGguUEkvMiksJD0wLHR0PVYubGVuZ3RoOyQ8dHQ7JCsrKVc9aShWWyRdLFFbJF0sSCksbChXLngsVy55LFMrWSk7Zm9yKFI9MCxEPVUubGVuZ3RoO1I8RDtSKyspZm9yKGs9VVtSXSxpdD1ydFtSXSwkPTAsdHQ9ay5sZW5ndGg7JDx0dDskKyspVz1pKGtbJF0saXRbJF0sSCksTD9sKFcueCxXLnkrcFtQLTFdLnkscFtQLTFdLngrWSk6bChXLngsVy55LFMrWSl9YSgpLHMoKSxlLmFycmF5c3x8KHRoaXMuc2V0SW5kZXgoeCksdGhpcy5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBfdChiLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IF90KGUuYXJyYXlzLnV2LDIpKSl9LE1lLldvcmxkVVZHZW5lcmF0b3I9e2dlbmVyYXRlVG9wVVY6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgYT1lWzMqbl0scz1lWzMqbisxXSx1PWVbMyppXSxsPWVbMyppKzFdLGM9ZVszKnJdLGg9ZVszKnIrMV07cmV0dXJuW25ldyBvKGEscyksbmV3IG8odSxsKSxuZXcgbyhjLGgpXX0sZ2VuZXJhdGVTaWRlV2FsbFVWOmZ1bmN0aW9uKHQsZSxuLGkscixhKXt2YXIgcz1lWzMqbl0sdT1lWzMqbisxXSxsPWVbMypuKzJdLGM9ZVszKmldLGg9ZVszKmkrMV0sZj1lWzMqaSsyXSxkPWVbMypyXSxwPWVbMypyKzFdLGc9ZVszKnIrMl0sdj1lWzMqYV0sbT1lWzMqYSsxXSx5PWVbMyphKzJdO3JldHVybiBNYXRoLmFicyh1LWgpPC4wMT9bbmV3IG8ocywxLWwpLG5ldyBvKGMsMS1mKSxuZXcgbyhkLDEtZyksbmV3IG8odiwxLXkpXTpbbmV3IG8odSwxLWwpLG5ldyBvKGgsMS1mKSxuZXcgbyhwLDEtZyksbmV3IG8obSwxLXkpXX19LEllLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFcucHJvdG90eXBlKSxJZS5wcm90b3R5cGUuY29uc3RydWN0b3I9SWUsSWUucHJvdG90eXBlLmlzTWVzaFBob25nTWF0ZXJpYWw9ITAsSWUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIFcucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLnNwZWN1bGFyLmNvcHkodC5zcGVjdWxhciksdGhpcy5zaGluaW5lc3M9dC5zaGluaW5lc3MsdGhpcy5tYXA9dC5tYXAsdGhpcy5saWdodE1hcD10LmxpZ2h0TWFwLHRoaXMubGlnaHRNYXBJbnRlbnNpdHk9dC5saWdodE1hcEludGVuc2l0eSx0aGlzLmFvTWFwPXQuYW9NYXAsdGhpcy5hb01hcEludGVuc2l0eT10LmFvTWFwSW50ZW5zaXR5LHRoaXMuZW1pc3NpdmUuY29weSh0LmVtaXNzaXZlKSx0aGlzLmVtaXNzaXZlTWFwPXQuZW1pc3NpdmVNYXAsdGhpcy5lbWlzc2l2ZUludGVuc2l0eT10LmVtaXNzaXZlSW50ZW5zaXR5LHRoaXMuYnVtcE1hcD10LmJ1bXBNYXAsdGhpcy5idW1wU2NhbGU9dC5idW1wU2NhbGUsdGhpcy5ub3JtYWxNYXA9dC5ub3JtYWxNYXAsdGhpcy5ub3JtYWxTY2FsZS5jb3B5KHQubm9ybWFsU2NhbGUpLHRoaXMuZGlzcGxhY2VtZW50TWFwPXQuZGlzcGxhY2VtZW50TWFwLHRoaXMuZGlzcGxhY2VtZW50U2NhbGU9dC5kaXNwbGFjZW1lbnRTY2FsZSx0aGlzLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzLHRoaXMuc3BlY3VsYXJNYXA9dC5zcGVjdWxhck1hcCx0aGlzLmFscGhhTWFwPXQuYWxwaGFNYXAsdGhpcy5lbnZNYXA9dC5lbnZNYXAsdGhpcy5jb21iaW5lPXQuY29tYmluZSx0aGlzLnJlZmxlY3Rpdml0eT10LnJlZmxlY3Rpdml0eSx0aGlzLnJlZnJhY3Rpb25SYXRpbz10LnJlZnJhY3Rpb25SYXRpbyx0aGlzLndpcmVmcmFtZT10LndpcmVmcmFtZSx0aGlzLndpcmVmcmFtZUxpbmV3aWR0aD10LndpcmVmcmFtZUxpbmV3aWR0aCx0aGlzLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwLHRoaXMud2lyZWZyYW1lTGluZWpvaW49dC53aXJlZnJhbWVMaW5lam9pbix0aGlzLnNraW5uaW5nPXQuc2tpbm5pbmcsdGhpcy5tb3JwaFRhcmdldHM9dC5tb3JwaFRhcmdldHMsdGhpcy5tb3JwaE5vcm1hbHM9dC5tb3JwaE5vcm1hbHMsdGhpc307dmFyIHZzPU9iamVjdC5mcmVlemUoe1Nwcml0ZU1hdGVyaWFsOmhlLFNoYWRlck1hdGVyaWFsOlosTWVzaFBob25nTWF0ZXJpYWw6SWUsTWVzaEJhc2ljTWF0ZXJpYWw6Y3QsTGluZUJhc2ljTWF0ZXJpYWw6ZGUsTWF0ZXJpYWw6V30pLG1zPXtlbmFibGVkOiExLGZpbGVzOnt9LGFkZDpmdW5jdGlvbih0LGUpe3RoaXMuZW5hYmxlZCE9PSExJiYodGhpcy5maWxlc1t0XT1lKX0sZ2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuZW5hYmxlZCE9PSExKXJldHVybiB0aGlzLmZpbGVzW3RdfSxyZW1vdmU6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuZmlsZXNbdF19LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5maWxlcz17fX19LHlzPW5ldyBPZTthKFRlLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbih0LGUsbixpKXt2b2lkIDA9PT10JiYodD1cIlwiKSx2b2lkIDAhPT10aGlzLnBhdGgmJih0PXRoaXMucGF0aCt0KTt2YXIgcj10aGlzLG89bXMuZ2V0KHQpO2lmKHZvaWQgMCE9PW8pcmV0dXJuIHIubWFuYWdlci5pdGVtU3RhcnQodCksc2V0VGltZW91dChmdW5jdGlvbigpe2UmJmUobyksci5tYW5hZ2VyLml0ZW1FbmQodCl9LDApLG87dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiaW1nXCIpO3JldHVybiBhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXttcy5hZGQodCx0aGlzKSxlJiZlKHRoaXMpLHIubWFuYWdlci5pdGVtRW5kKHQpfSwhMSksYS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmdW5jdGlvbihlKXtpJiZpKGUpLHIubWFuYWdlci5pdGVtRW5kKHQpLHIubWFuYWdlci5pdGVtRXJyb3IodCl9LCExKSxcImRhdGE6XCIhPT10LnN1YnN0cigwLDUpJiZ2b2lkIDAhPT10aGlzLmNyb3NzT3JpZ2luJiYoYS5jcm9zc09yaWdpbj10aGlzLmNyb3NzT3JpZ2luKSxyLm1hbmFnZXIuaXRlbVN0YXJ0KHQpLGEuc3JjPXQsYX0sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3Jvc3NPcmlnaW49dCx0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGg9dCx0aGlzfX0pLGEoUGUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW5ldyBUZSh0aGlzLm1hbmFnZXIpO3Iuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbiksci5zZXRQYXRoKHRoaXMucGF0aCk7dmFyIG89bmV3IHU7cmV0dXJuIG8uaW1hZ2U9ci5sb2FkKHQsZnVuY3Rpb24oKXt2YXIgbj10LnNlYXJjaCgvXFwuKGpwZ3xqcGVnKSQvKT4wfHwwPT09dC5zZWFyY2goL15kYXRhXFw6aW1hZ2VcXC9qcGVnLyk7by5mb3JtYXQ9bj9jcjpocixvLm5lZWRzVXBkYXRlPSEwLHZvaWQgMCE9PWUmJmUobyl9LG4saSksb30sc2V0Q3Jvc3NPcmlnaW46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3Jvc3NPcmlnaW49dCx0aGlzfSxzZXRQYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGg9dCx0aGlzfX0pLGEoQWUucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZvaWQgMD09PXQmJih0PVwiXCIpLHZvaWQgMCE9PXRoaXMucGF0aCYmKHQ9dGhpcy5wYXRoK3QpO3ZhciByPXRoaXMsbz1tcy5nZXQodCk7aWYodm9pZCAwIT09bylyZXR1cm4gci5tYW5hZ2VyLml0ZW1TdGFydCh0KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSYmZShvKSxyLm1hbmFnZXIuaXRlbUVuZCh0KX0sMCksbzt2YXIgYT0vXmRhdGE6KC4qPykoO2Jhc2U2NCk/LCguKikkLyxzPXQubWF0Y2goYSk7aWYocyl7dmFyIHU9c1sxXSxsPSEhc1syXSxjPXNbM107Yz13aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KGMpLGwmJihjPXdpbmRvdy5hdG9iKGMpKTt0cnl7dmFyIGgsZj0odGhpcy5yZXNwb25zZVR5cGV8fFwiXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKGYpe2Nhc2VcImFycmF5YnVmZmVyXCI6Y2FzZVwiYmxvYlwiOmg9bmV3IEFycmF5QnVmZmVyKGMubGVuZ3RoKTtmb3IodmFyIGQ9bmV3IFVpbnQ4QXJyYXkoaCkscD0wO3A8Yy5sZW5ndGg7cCsrKWRbcF09Yy5jaGFyQ29kZUF0KHApO1wiYmxvYlwiPT09ZiYmKGg9bmV3IEJsb2IoW2hdLHt0eXBlOnV9KSk7YnJlYWs7Y2FzZVwiZG9jdW1lbnRcIjp2YXIgZz1uZXcgRE9NUGFyc2VyO2g9Zy5wYXJzZUZyb21TdHJpbmcoYyx1KTticmVhaztjYXNlXCJqc29uXCI6aD1KU09OLnBhcnNlKGMpO2JyZWFrO2RlZmF1bHQ6aD1jfXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSYmZShoKSxyLm1hbmFnZXIuaXRlbUVuZCh0KX0sMCl9Y2F0Y2goZSl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpJiZpKGUpLHIubWFuYWdlci5pdGVtRW5kKHQpLHIubWFuYWdlci5pdGVtRXJyb3IodCl9LDApfX1lbHNle3ZhciB2PW5ldyBYTUxIdHRwUmVxdWVzdDt2Lm9wZW4oXCJHRVRcIix0LCEwKSx2LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24obil7dmFyIG89bi50YXJnZXQucmVzcG9uc2U7bXMuYWRkKHQsbyksMjAwPT09dGhpcy5zdGF0dXM/KGUmJmUobyksci5tYW5hZ2VyLml0ZW1FbmQodCkpOjA9PT10aGlzLnN0YXR1cz8oY29uc29sZS53YXJuKFwiVEhSRUUuRmlsZUxvYWRlcjogSFRUUCBTdGF0dXMgMCByZWNlaXZlZC5cIiksZSYmZShvKSxyLm1hbmFnZXIuaXRlbUVuZCh0KSk6KGkmJmkobiksci5tYW5hZ2VyLml0ZW1FbmQodCksci5tYW5hZ2VyLml0ZW1FcnJvcih0KSl9LCExKSx2b2lkIDAhPT1uJiZ2LmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKHQpe24odCl9LCExKSx2LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGUpe2kmJmkoZSksci5tYW5hZ2VyLml0ZW1FbmQodCksci5tYW5hZ2VyLml0ZW1FcnJvcih0KX0sITEpLHZvaWQgMCE9PXRoaXMucmVzcG9uc2VUeXBlJiYodi5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVR5cGUpLHZvaWQgMCE9PXRoaXMud2l0aENyZWRlbnRpYWxzJiYodi53aXRoQ3JlZGVudGlhbHM9dGhpcy53aXRoQ3JlZGVudGlhbHMpLHYub3ZlcnJpZGVNaW1lVHlwZSYmdi5vdmVycmlkZU1pbWVUeXBlKHZvaWQgMCE9PXRoaXMubWltZVR5cGU/dGhpcy5taW1lVHlwZTpcInRleHQvcGxhaW5cIik7Zm9yKHZhciBtIGluIHRoaXMucmVxdWVzdEhlYWRlcil2LnNldFJlcXVlc3RIZWFkZXIobSx0aGlzLnJlcXVlc3RIZWFkZXJbbV0pO3Yuc2VuZChudWxsKX1yZXR1cm4gci5tYW5hZ2VyLml0ZW1TdGFydCh0KSx2fSxzZXRQYXRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGg9dCx0aGlzfSxzZXRSZXNwb25zZVR5cGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmVzcG9uc2VUeXBlPXQsdGhpc30sc2V0V2l0aENyZWRlbnRpYWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLndpdGhDcmVkZW50aWFscz10LHRoaXN9LHNldE1pbWVUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbWVUeXBlPXQsdGhpc30sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXF1ZXN0SGVhZGVyPXQsdGhpc319KSxhKExlLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLG89bmV3IEFlKHIubWFuYWdlcik7by5zZXRSZXNwb25zZVR5cGUoXCJqc29uXCIpLG8ubG9hZCh0LGZ1bmN0aW9uKHQpe2Uoci5wYXJzZSh0KSl9LG4saSl9LHNldFRleHR1cmVzOmZ1bmN0aW9uKHQpe3RoaXMudGV4dHVyZXM9dH0scGFyc2U6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdm9pZCAwPT09blt0XSYmY29uc29sZS53YXJuKFwiVEhSRUUuTWF0ZXJpYWxMb2FkZXI6IFVuZGVmaW5lZCB0ZXh0dXJlXCIsdCksblt0XX12YXIgbj10aGlzLnRleHR1cmVzLGk9bmV3IHZzW3QudHlwZV07aWYodm9pZCAwIT09dC51dWlkJiYoaS51dWlkPXQudXVpZCksdm9pZCAwIT09dC5uYW1lJiYoaS5uYW1lPXQubmFtZSksdm9pZCAwIT09dC5jb2xvciYmaS5jb2xvci5zZXRIZXgodC5jb2xvciksdm9pZCAwIT09dC5yb3VnaG5lc3MmJihpLnJvdWdobmVzcz10LnJvdWdobmVzcyksdm9pZCAwIT09dC5tZXRhbG5lc3MmJihpLm1ldGFsbmVzcz10Lm1ldGFsbmVzcyksdm9pZCAwIT09dC5lbWlzc2l2ZSYmaS5lbWlzc2l2ZS5zZXRIZXgodC5lbWlzc2l2ZSksdm9pZCAwIT09dC5zcGVjdWxhciYmaS5zcGVjdWxhci5zZXRIZXgodC5zcGVjdWxhciksdm9pZCAwIT09dC5zaGluaW5lc3MmJihpLnNoaW5pbmVzcz10LnNoaW5pbmVzcyksdm9pZCAwIT09dC5jbGVhckNvYXQmJihpLmNsZWFyQ29hdD10LmNsZWFyQ29hdCksdm9pZCAwIT09dC5jbGVhckNvYXRSb3VnaG5lc3MmJihpLmNsZWFyQ29hdFJvdWdobmVzcz10LmNsZWFyQ29hdFJvdWdobmVzcyksdm9pZCAwIT09dC51bmlmb3JtcyYmKGkudW5pZm9ybXM9dC51bmlmb3Jtcyksdm9pZCAwIT09dC52ZXJ0ZXhTaGFkZXImJihpLnZlcnRleFNoYWRlcj10LnZlcnRleFNoYWRlciksdm9pZCAwIT09dC5mcmFnbWVudFNoYWRlciYmKGkuZnJhZ21lbnRTaGFkZXI9dC5mcmFnbWVudFNoYWRlciksdm9pZCAwIT09dC52ZXJ0ZXhDb2xvcnMmJihpLnZlcnRleENvbG9ycz10LnZlcnRleENvbG9ycyksdm9pZCAwIT09dC5mb2cmJihpLmZvZz10LmZvZyksdm9pZCAwIT09dC5zaGFkaW5nJiYoaS5zaGFkaW5nPXQuc2hhZGluZyksdm9pZCAwIT09dC5ibGVuZGluZyYmKGkuYmxlbmRpbmc9dC5ibGVuZGluZyksdm9pZCAwIT09dC5zaWRlJiYoaS5zaWRlPXQuc2lkZSksdm9pZCAwIT09dC5vcGFjaXR5JiYoaS5vcGFjaXR5PXQub3BhY2l0eSksdm9pZCAwIT09dC50cmFuc3BhcmVudCYmKGkudHJhbnNwYXJlbnQ9dC50cmFuc3BhcmVudCksdm9pZCAwIT09dC5hbHBoYVRlc3QmJihpLmFscGhhVGVzdD10LmFscGhhVGVzdCksdm9pZCAwIT09dC5kZXB0aFRlc3QmJihpLmRlcHRoVGVzdD10LmRlcHRoVGVzdCksdm9pZCAwIT09dC5kZXB0aFdyaXRlJiYoaS5kZXB0aFdyaXRlPXQuZGVwdGhXcml0ZSksdm9pZCAwIT09dC5jb2xvcldyaXRlJiYoaS5jb2xvcldyaXRlPXQuY29sb3JXcml0ZSksXG52b2lkIDAhPT10LndpcmVmcmFtZSYmKGkud2lyZWZyYW1lPXQud2lyZWZyYW1lKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmV3aWR0aCYmKGkud2lyZWZyYW1lTGluZXdpZHRoPXQud2lyZWZyYW1lTGluZXdpZHRoKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmVjYXAmJihpLndpcmVmcmFtZUxpbmVjYXA9dC53aXJlZnJhbWVMaW5lY2FwKSx2b2lkIDAhPT10LndpcmVmcmFtZUxpbmVqb2luJiYoaS53aXJlZnJhbWVMaW5lam9pbj10LndpcmVmcmFtZUxpbmVqb2luKSx2b2lkIDAhPT10LnNraW5uaW5nJiYoaS5za2lubmluZz10LnNraW5uaW5nKSx2b2lkIDAhPT10Lm1vcnBoVGFyZ2V0cyYmKGkubW9ycGhUYXJnZXRzPXQubW9ycGhUYXJnZXRzKSx2b2lkIDAhPT10LnNpemUmJihpLnNpemU9dC5zaXplKSx2b2lkIDAhPT10LnNpemVBdHRlbnVhdGlvbiYmKGkuc2l6ZUF0dGVudWF0aW9uPXQuc2l6ZUF0dGVudWF0aW9uKSx2b2lkIDAhPT10Lm1hcCYmKGkubWFwPWUodC5tYXApKSx2b2lkIDAhPT10LmFscGhhTWFwJiYoaS5hbHBoYU1hcD1lKHQuYWxwaGFNYXApLGkudHJhbnNwYXJlbnQ9ITApLHZvaWQgMCE9PXQuYnVtcE1hcCYmKGkuYnVtcE1hcD1lKHQuYnVtcE1hcCkpLHZvaWQgMCE9PXQuYnVtcFNjYWxlJiYoaS5idW1wU2NhbGU9dC5idW1wU2NhbGUpLHZvaWQgMCE9PXQubm9ybWFsTWFwJiYoaS5ub3JtYWxNYXA9ZSh0Lm5vcm1hbE1hcCkpLHZvaWQgMCE9PXQubm9ybWFsU2NhbGUpe3ZhciByPXQubm9ybWFsU2NhbGU7QXJyYXkuaXNBcnJheShyKT09PSExJiYocj1bcixyXSksaS5ub3JtYWxTY2FsZT0obmV3IG8pLmZyb21BcnJheShyKX1pZih2b2lkIDAhPT10LmRpc3BsYWNlbWVudE1hcCYmKGkuZGlzcGxhY2VtZW50TWFwPWUodC5kaXNwbGFjZW1lbnRNYXApKSx2b2lkIDAhPT10LmRpc3BsYWNlbWVudFNjYWxlJiYoaS5kaXNwbGFjZW1lbnRTY2FsZT10LmRpc3BsYWNlbWVudFNjYWxlKSx2b2lkIDAhPT10LmRpc3BsYWNlbWVudEJpYXMmJihpLmRpc3BsYWNlbWVudEJpYXM9dC5kaXNwbGFjZW1lbnRCaWFzKSx2b2lkIDAhPT10LnJvdWdobmVzc01hcCYmKGkucm91Z2huZXNzTWFwPWUodC5yb3VnaG5lc3NNYXApKSx2b2lkIDAhPT10Lm1ldGFsbmVzc01hcCYmKGkubWV0YWxuZXNzTWFwPWUodC5tZXRhbG5lc3NNYXApKSx2b2lkIDAhPT10LmVtaXNzaXZlTWFwJiYoaS5lbWlzc2l2ZU1hcD1lKHQuZW1pc3NpdmVNYXApKSx2b2lkIDAhPT10LmVtaXNzaXZlSW50ZW5zaXR5JiYoaS5lbWlzc2l2ZUludGVuc2l0eT10LmVtaXNzaXZlSW50ZW5zaXR5KSx2b2lkIDAhPT10LnNwZWN1bGFyTWFwJiYoaS5zcGVjdWxhck1hcD1lKHQuc3BlY3VsYXJNYXApKSx2b2lkIDAhPT10LmVudk1hcCYmKGkuZW52TWFwPWUodC5lbnZNYXApKSx2b2lkIDAhPT10LnJlZmxlY3Rpdml0eSYmKGkucmVmbGVjdGl2aXR5PXQucmVmbGVjdGl2aXR5KSx2b2lkIDAhPT10LmxpZ2h0TWFwJiYoaS5saWdodE1hcD1lKHQubGlnaHRNYXApKSx2b2lkIDAhPT10LmxpZ2h0TWFwSW50ZW5zaXR5JiYoaS5saWdodE1hcEludGVuc2l0eT10LmxpZ2h0TWFwSW50ZW5zaXR5KSx2b2lkIDAhPT10LmFvTWFwJiYoaS5hb01hcD1lKHQuYW9NYXApKSx2b2lkIDAhPT10LmFvTWFwSW50ZW5zaXR5JiYoaS5hb01hcEludGVuc2l0eT10LmFvTWFwSW50ZW5zaXR5KSx2b2lkIDAhPT10LmdyYWRpZW50TWFwJiYoaS5ncmFkaWVudE1hcD1lKHQuZ3JhZGllbnRNYXApKSx2b2lkIDAhPT10Lm1hdGVyaWFscylmb3IodmFyIGE9MCxzPXQubWF0ZXJpYWxzLmxlbmd0aDthPHM7YSsrKWkubWF0ZXJpYWxzLnB1c2godGhpcy5wYXJzZSh0Lm1hdGVyaWFsc1thXSkpO3JldHVybiBpfX0pLE5lLkhhbmRsZXJzPXtoYW5kbGVyczpbXSxhZGQ6ZnVuY3Rpb24odCxlKXt0aGlzLmhhbmRsZXJzLnB1c2godCxlKX0sZ2V0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmhhbmRsZXJzLG49MCxpPWUubGVuZ3RoO248aTtuKz0yKXt2YXIgcj1lW25dLG89ZVtuKzFdO2lmKHIudGVzdCh0KSlyZXR1cm4gb31yZXR1cm4gbnVsbH19LGEoTmUucHJvdG90eXBlLHtjcm9zc09yaWdpbjp2b2lkIDAsZXh0cmFjdFVybEJhc2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5zcGxpdChcIi9cIik7cmV0dXJuIDE9PT1lLmxlbmd0aD9cIi4vXCI6KGUucG9wKCksZS5qb2luKFwiL1wiKStcIi9cIil9LGluaXRNYXRlcmlhbHM6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1bXSxyPTA7cjx0Lmxlbmd0aDsrK3IpaVtyXT10aGlzLmNyZWF0ZU1hdGVyaWFsKHRbcl0sZSxuKTtyZXR1cm4gaX0sY3JlYXRlTWF0ZXJpYWw6ZnVuY3Rpb24oKXt2YXIgdD17Tm9CbGVuZGluZzpKbixOb3JtYWxCbGVuZGluZzpLbixBZGRpdGl2ZUJsZW5kaW5nOlFuLFN1YnRyYWN0aXZlQmxlbmRpbmc6JG4sTXVsdGlwbHlCbGVuZGluZzp0aSxDdXN0b21CbGVuZGluZzplaX0sZT1uZXcgcSxuPW5ldyBQZSxpPW5ldyBMZTtyZXR1cm4gZnVuY3Rpb24ocixvLGEpe2Z1bmN0aW9uIHModCxlLGkscixzKXt2YXIgbCxjPW8rdCxoPU5lLkhhbmRsZXJzLmdldChjKTtudWxsIT09aD9sPWgubG9hZChjKToobi5zZXRDcm9zc09yaWdpbihhKSxsPW4ubG9hZChjKSksdm9pZCAwIT09ZSYmKGwucmVwZWF0LmZyb21BcnJheShlKSwxIT09ZVswXSYmKGwud3JhcFM9R2kpLDEhPT1lWzFdJiYobC53cmFwVD1HaSkpLHZvaWQgMCE9PWkmJmwub2Zmc2V0LmZyb21BcnJheShpKSx2b2lkIDAhPT1yJiYoXCJyZXBlYXRcIj09PXJbMF0mJihsLndyYXBTPUdpKSxcIm1pcnJvclwiPT09clswXSYmKGwud3JhcFM9WGkpLFwicmVwZWF0XCI9PT1yWzFdJiYobC53cmFwVD1HaSksXCJtaXJyb3JcIj09PXJbMV0mJihsLndyYXBUPVhpKSksdm9pZCAwIT09cyYmKGwuYW5pc290cm9weT1zKTt2YXIgZj1Xci5nZW5lcmF0ZVVVSUQoKTtyZXR1cm4gdVtmXT1sLGZ9dmFyIHU9e30sbD17dXVpZDpXci5nZW5lcmF0ZVVVSUQoKSx0eXBlOlwiTWVzaExhbWJlcnRNYXRlcmlhbFwifTtmb3IodmFyIGMgaW4gcil7dmFyIGg9cltjXTtzd2l0Y2goYyl7Y2FzZVwiRGJnQ29sb3JcIjpjYXNlXCJEYmdJbmRleFwiOmNhc2VcIm9wdGljYWxEZW5zaXR5XCI6Y2FzZVwiaWxsdW1pbmF0aW9uXCI6YnJlYWs7Y2FzZVwiRGJnTmFtZVwiOmwubmFtZT1oO2JyZWFrO2Nhc2VcImJsZW5kaW5nXCI6bC5ibGVuZGluZz10W2hdO2JyZWFrO2Nhc2VcImNvbG9yQW1iaWVudFwiOmNhc2VcIm1hcEFtYmllbnRcIjpjb25zb2xlLndhcm4oXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6XCIsYyxcImlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuXCIpO2JyZWFrO2Nhc2VcImNvbG9yRGlmZnVzZVwiOmwuY29sb3I9ZS5mcm9tQXJyYXkoaCkuZ2V0SGV4KCk7YnJlYWs7Y2FzZVwiY29sb3JTcGVjdWxhclwiOmwuc3BlY3VsYXI9ZS5mcm9tQXJyYXkoaCkuZ2V0SGV4KCk7YnJlYWs7Y2FzZVwiY29sb3JFbWlzc2l2ZVwiOmwuZW1pc3NpdmU9ZS5mcm9tQXJyYXkoaCkuZ2V0SGV4KCk7YnJlYWs7Y2FzZVwic3BlY3VsYXJDb2VmXCI6bC5zaGluaW5lc3M9aDticmVhaztjYXNlXCJzaGFkaW5nXCI6XCJiYXNpY1wiPT09aC50b0xvd2VyQ2FzZSgpJiYobC50eXBlPVwiTWVzaEJhc2ljTWF0ZXJpYWxcIiksXCJwaG9uZ1wiPT09aC50b0xvd2VyQ2FzZSgpJiYobC50eXBlPVwiTWVzaFBob25nTWF0ZXJpYWxcIiksXCJzdGFuZGFyZFwiPT09aC50b0xvd2VyQ2FzZSgpJiYobC50eXBlPVwiTWVzaFN0YW5kYXJkTWF0ZXJpYWxcIik7YnJlYWs7Y2FzZVwibWFwRGlmZnVzZVwiOmwubWFwPXMoaCxyLm1hcERpZmZ1c2VSZXBlYXQsci5tYXBEaWZmdXNlT2Zmc2V0LHIubWFwRGlmZnVzZVdyYXAsci5tYXBEaWZmdXNlQW5pc290cm9weSk7YnJlYWs7Y2FzZVwibWFwRGlmZnVzZVJlcGVhdFwiOmNhc2VcIm1hcERpZmZ1c2VPZmZzZXRcIjpjYXNlXCJtYXBEaWZmdXNlV3JhcFwiOmNhc2VcIm1hcERpZmZ1c2VBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZVwibWFwRW1pc3NpdmVcIjpsLmVtaXNzaXZlTWFwPXMoaCxyLm1hcEVtaXNzaXZlUmVwZWF0LHIubWFwRW1pc3NpdmVPZmZzZXQsci5tYXBFbWlzc2l2ZVdyYXAsci5tYXBFbWlzc2l2ZUFuaXNvdHJvcHkpO2JyZWFrO2Nhc2VcIm1hcEVtaXNzaXZlUmVwZWF0XCI6Y2FzZVwibWFwRW1pc3NpdmVPZmZzZXRcIjpjYXNlXCJtYXBFbWlzc2l2ZVdyYXBcIjpjYXNlXCJtYXBFbWlzc2l2ZUFuaXNvdHJvcHlcIjpicmVhaztjYXNlXCJtYXBMaWdodFwiOmwubGlnaHRNYXA9cyhoLHIubWFwTGlnaHRSZXBlYXQsci5tYXBMaWdodE9mZnNldCxyLm1hcExpZ2h0V3JhcCxyLm1hcExpZ2h0QW5pc290cm9weSk7YnJlYWs7Y2FzZVwibWFwTGlnaHRSZXBlYXRcIjpjYXNlXCJtYXBMaWdodE9mZnNldFwiOmNhc2VcIm1hcExpZ2h0V3JhcFwiOmNhc2VcIm1hcExpZ2h0QW5pc290cm9weVwiOmJyZWFrO2Nhc2VcIm1hcEFPXCI6bC5hb01hcD1zKGgsci5tYXBBT1JlcGVhdCxyLm1hcEFPT2Zmc2V0LHIubWFwQU9XcmFwLHIubWFwQU9Bbmlzb3Ryb3B5KTticmVhaztjYXNlXCJtYXBBT1JlcGVhdFwiOmNhc2VcIm1hcEFPT2Zmc2V0XCI6Y2FzZVwibWFwQU9XcmFwXCI6Y2FzZVwibWFwQU9Bbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZVwibWFwQnVtcFwiOmwuYnVtcE1hcD1zKGgsci5tYXBCdW1wUmVwZWF0LHIubWFwQnVtcE9mZnNldCxyLm1hcEJ1bXBXcmFwLHIubWFwQnVtcEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2VcIm1hcEJ1bXBTY2FsZVwiOmwuYnVtcFNjYWxlPWg7YnJlYWs7Y2FzZVwibWFwQnVtcFJlcGVhdFwiOmNhc2VcIm1hcEJ1bXBPZmZzZXRcIjpjYXNlXCJtYXBCdW1wV3JhcFwiOmNhc2VcIm1hcEJ1bXBBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZVwibWFwTm9ybWFsXCI6bC5ub3JtYWxNYXA9cyhoLHIubWFwTm9ybWFsUmVwZWF0LHIubWFwTm9ybWFsT2Zmc2V0LHIubWFwTm9ybWFsV3JhcCxyLm1hcE5vcm1hbEFuaXNvdHJvcHkpO2JyZWFrO2Nhc2VcIm1hcE5vcm1hbEZhY3RvclwiOmwubm9ybWFsU2NhbGU9W2gsaF07YnJlYWs7Y2FzZVwibWFwTm9ybWFsUmVwZWF0XCI6Y2FzZVwibWFwTm9ybWFsT2Zmc2V0XCI6Y2FzZVwibWFwTm9ybWFsV3JhcFwiOmNhc2VcIm1hcE5vcm1hbEFuaXNvdHJvcHlcIjpicmVhaztjYXNlXCJtYXBTcGVjdWxhclwiOmwuc3BlY3VsYXJNYXA9cyhoLHIubWFwU3BlY3VsYXJSZXBlYXQsci5tYXBTcGVjdWxhck9mZnNldCxyLm1hcFNwZWN1bGFyV3JhcCxyLm1hcFNwZWN1bGFyQW5pc290cm9weSk7YnJlYWs7Y2FzZVwibWFwU3BlY3VsYXJSZXBlYXRcIjpjYXNlXCJtYXBTcGVjdWxhck9mZnNldFwiOmNhc2VcIm1hcFNwZWN1bGFyV3JhcFwiOmNhc2VcIm1hcFNwZWN1bGFyQW5pc290cm9weVwiOmJyZWFrO2Nhc2VcIm1hcE1ldGFsbmVzc1wiOmwubWV0YWxuZXNzTWFwPXMoaCxyLm1hcE1ldGFsbmVzc1JlcGVhdCxyLm1hcE1ldGFsbmVzc09mZnNldCxyLm1hcE1ldGFsbmVzc1dyYXAsci5tYXBNZXRhbG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlXCJtYXBNZXRhbG5lc3NSZXBlYXRcIjpjYXNlXCJtYXBNZXRhbG5lc3NPZmZzZXRcIjpjYXNlXCJtYXBNZXRhbG5lc3NXcmFwXCI6Y2FzZVwibWFwTWV0YWxuZXNzQW5pc290cm9weVwiOmJyZWFrO2Nhc2VcIm1hcFJvdWdobmVzc1wiOmwucm91Z2huZXNzTWFwPXMoaCxyLm1hcFJvdWdobmVzc1JlcGVhdCxyLm1hcFJvdWdobmVzc09mZnNldCxyLm1hcFJvdWdobmVzc1dyYXAsci5tYXBSb3VnaG5lc3NBbmlzb3Ryb3B5KTticmVhaztjYXNlXCJtYXBSb3VnaG5lc3NSZXBlYXRcIjpjYXNlXCJtYXBSb3VnaG5lc3NPZmZzZXRcIjpjYXNlXCJtYXBSb3VnaG5lc3NXcmFwXCI6Y2FzZVwibWFwUm91Z2huZXNzQW5pc290cm9weVwiOmJyZWFrO2Nhc2VcIm1hcEFscGhhXCI6bC5hbHBoYU1hcD1zKGgsci5tYXBBbHBoYVJlcGVhdCxyLm1hcEFscGhhT2Zmc2V0LHIubWFwQWxwaGFXcmFwLHIubWFwQWxwaGFBbmlzb3Ryb3B5KTticmVhaztjYXNlXCJtYXBBbHBoYVJlcGVhdFwiOmNhc2VcIm1hcEFscGhhT2Zmc2V0XCI6Y2FzZVwibWFwQWxwaGFXcmFwXCI6Y2FzZVwibWFwQWxwaGFBbmlzb3Ryb3B5XCI6YnJlYWs7Y2FzZVwiZmxpcFNpZGVkXCI6bC5zaWRlPVZuO2JyZWFrO2Nhc2VcImRvdWJsZVNpZGVkXCI6bC5zaWRlPVhuO2JyZWFrO2Nhc2VcInRyYW5zcGFyZW5jeVwiOmNvbnNvbGUud2FybihcIlRIUkVFLkxvYWRlci5jcmVhdGVNYXRlcmlhbDogdHJhbnNwYXJlbmN5IGhhcyBiZWVuIHJlbmFtZWQgdG8gb3BhY2l0eVwiKSxsLm9wYWNpdHk9aDticmVhaztjYXNlXCJkZXB0aFRlc3RcIjpjYXNlXCJkZXB0aFdyaXRlXCI6Y2FzZVwiY29sb3JXcml0ZVwiOmNhc2VcIm9wYWNpdHlcIjpjYXNlXCJyZWZsZWN0aXZpdHlcIjpjYXNlXCJ0cmFuc3BhcmVudFwiOmNhc2VcInZpc2libGVcIjpjYXNlXCJ3aXJlZnJhbWVcIjpsW2NdPWg7YnJlYWs7Y2FzZVwidmVydGV4Q29sb3JzXCI6aD09PSEwJiYobC52ZXJ0ZXhDb2xvcnM9Wm4pLFwiZmFjZVwiPT09aCYmKGwudmVydGV4Q29sb3JzPVduKTticmVhaztkZWZhdWx0OmNvbnNvbGUuZXJyb3IoXCJUSFJFRS5Mb2FkZXIuY3JlYXRlTWF0ZXJpYWw6IFVuc3VwcG9ydGVkXCIsYyxoKX19cmV0dXJuXCJNZXNoQmFzaWNNYXRlcmlhbFwiPT09bC50eXBlJiZkZWxldGUgbC5lbWlzc2l2ZSxcIk1lc2hQaG9uZ01hdGVyaWFsXCIhPT1sLnR5cGUmJmRlbGV0ZSBsLnNwZWN1bGFyLGwub3BhY2l0eTwxJiYobC50cmFuc3BhcmVudD0hMCksaS5zZXRUZXh0dXJlcyh1KSxpLnBhcnNlKGwpfX0oKX0pO3ZhciBfcz17YXJyYXlTbGljZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIF9zLmlzVHlwZWRBcnJheSh0KT9uZXcgdC5jb25zdHJ1Y3Rvcih0LnN1YmFycmF5KGUsdm9pZCAwIT09bj9uOnQubGVuZ3RoKSk6dC5zbGljZShlLG4pfSxjb252ZXJ0QXJyYXk6ZnVuY3Rpb24odCxlLG4pe3JldHVybiF0fHwhbiYmdC5jb25zdHJ1Y3Rvcj09PWU/dDpcIm51bWJlclwiPT10eXBlb2YgZS5CWVRFU19QRVJfRUxFTUVOVD9uZXcgZSh0KTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KX0saXNUeXBlZEFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcodCkmJiEodCBpbnN0YW5jZW9mIERhdGFWaWV3KX0sZ2V0S2V5ZnJhbWVPcmRlcjpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7cmV0dXJuIHRbZV0tdFtuXX1mb3IodmFyIG49dC5sZW5ndGgsaT1uZXcgQXJyYXkobikscj0wO3IhPT1uOysrcilpW3JdPXI7cmV0dXJuIGkuc29ydChlKSxpfSxzb3J0ZWRBcnJheTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXQubGVuZ3RoLHI9bmV3IHQuY29uc3RydWN0b3IoaSksbz0wLGE9MDthIT09aTsrK28pZm9yKHZhciBzPW5bb10qZSx1PTA7dSE9PWU7Kyt1KXJbYSsrXT10W3MrdV07cmV0dXJuIHJ9LGZsYXR0ZW5KU09OOmZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj0xLG89dFswXTt2b2lkIDAhPT1vJiZ2b2lkIDA9PT1vW2ldOylvPXRbcisrXTtpZih2b2lkIDAhPT1vKXt2YXIgYT1vW2ldO2lmKHZvaWQgMCE9PWEpaWYoQXJyYXkuaXNBcnJheShhKSl7ZG8gYT1vW2ldLHZvaWQgMCE9PWEmJihlLnB1c2goby50aW1lKSxuLnB1c2guYXBwbHkobixhKSksbz10W3IrK107d2hpbGUodm9pZCAwIT09byl9ZWxzZSBpZih2b2lkIDAhPT1hLnRvQXJyYXkpe2RvIGE9b1tpXSx2b2lkIDAhPT1hJiYoZS5wdXNoKG8udGltZSksYS50b0FycmF5KG4sbi5sZW5ndGgpKSxvPXRbcisrXTt3aGlsZSh2b2lkIDAhPT1vKX1lbHNlIGRvIGE9b1tpXSx2b2lkIDAhPT1hJiYoZS5wdXNoKG8udGltZSksbi5wdXNoKGEpKSxvPXRbcisrXTt3aGlsZSh2b2lkIDAhPT1vKX19fTthKGtlLnByb3RvdHlwZSx7ZXZhbHVhdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJhbWV0ZXJQb3NpdGlvbnMsbj10aGlzLl9jYWNoZWRJbmRleCxpPWVbbl0scj1lW24tMV07dDp7ZTp7dmFyIG87bjp7aTppZighKHQ8aSkpe2Zvcih2YXIgYT1uKzI7Oyl7aWYodm9pZCAwPT09aSl7aWYodDxyKWJyZWFrIGk7cmV0dXJuIG49ZS5sZW5ndGgsdGhpcy5fY2FjaGVkSW5kZXg9bix0aGlzLmFmdGVyRW5kXyhuLTEsdCxyKX1pZihuPT09YSlicmVhaztpZihyPWksaT1lWysrbl0sdDxpKWJyZWFrIGV9bz1lLmxlbmd0aDticmVhayBufXtpZih0Pj1yKWJyZWFrIHQ7dmFyIHM9ZVsxXTt0PHMmJihuPTIscj1zKTtmb3IodmFyIGE9bi0yOzspe2lmKHZvaWQgMD09PXIpcmV0dXJuIHRoaXMuX2NhY2hlZEluZGV4PTAsdGhpcy5iZWZvcmVTdGFydF8oMCx0LGkpO2lmKG49PT1hKWJyZWFrO2lmKGk9cixyPWVbLS1uLTFdLHQ+PXIpYnJlYWsgZX1vPW4sbj0wfX1mb3IoO248bzspe3ZhciB1PW4rbz4+PjE7dDxlW3VdP289dTpuPXUrMX1pZihpPWVbbl0scj1lW24tMV0sdm9pZCAwPT09cilyZXR1cm4gdGhpcy5fY2FjaGVkSW5kZXg9MCx0aGlzLmJlZm9yZVN0YXJ0XygwLHQsaSk7aWYodm9pZCAwPT09aSlyZXR1cm4gbj1lLmxlbmd0aCx0aGlzLl9jYWNoZWRJbmRleD1uLHRoaXMuYWZ0ZXJFbmRfKG4tMSxyLHQpfXRoaXMuX2NhY2hlZEluZGV4PW4sdGhpcy5pbnRlcnZhbENoYW5nZWRfKG4scixpKX1yZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV8obixyLHQsaSl9LHNldHRpbmdzOm51bGwsRGVmYXVsdFNldHRpbmdzXzp7fSxnZXRTZXR0aW5nc186ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXR0aW5nc3x8dGhpcy5EZWZhdWx0U2V0dGluZ3NffSxjb3B5U2FtcGxlVmFsdWVfOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnJlc3VsdEJ1ZmZlcixuPXRoaXMuc2FtcGxlVmFsdWVzLGk9dGhpcy52YWx1ZVNpemUscj10Kmksbz0wO28hPT1pOysrbyllW29dPW5bcitvXTtyZXR1cm4gZX0saW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQsZSxuLGkpe3Rocm93IG5ldyBFcnJvcihcImNhbGwgdG8gYWJzdHJhY3QgbWV0aG9kXCIpfSxpbnRlcnZhbENoYW5nZWRfOmZ1bmN0aW9uKHQsZSxuKXt9fSksLy8hXFwgREVDTEFSRSBBTElBUyBBRlRFUiBhc3NpZ24gcHJvdG90eXBlICFcbmEoa2UucHJvdG90eXBlLHtiZWZvcmVTdGFydF86a2UucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV8sYWZ0ZXJFbmRfOmtlLnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVffSksUmUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShrZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpSZSxEZWZhdWx0U2V0dGluZ3NfOntlbmRpbmdTdGFydDpMcixlbmRpbmdFbmQ6THJ9LGludGVydmFsQ2hhbmdlZF86ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMucGFyYW1ldGVyUG9zaXRpb25zLHI9dC0yLG89dCsxLGE9aVtyXSxzPWlbb107aWYodm9pZCAwPT09YSlzd2l0Y2godGhpcy5nZXRTZXR0aW5nc18oKS5lbmRpbmdTdGFydCl7Y2FzZSBOcjpyPXQsYT0yKmUtbjticmVhaztjYXNlIGtyOnI9aS5sZW5ndGgtMixhPWUraVtyXS1pW3IrMV07YnJlYWs7ZGVmYXVsdDpyPXQsYT1ufWlmKHZvaWQgMD09PXMpc3dpdGNoKHRoaXMuZ2V0U2V0dGluZ3NfKCkuZW5kaW5nRW5kKXtjYXNlIE5yOm89dCxzPTIqbi1lO2JyZWFrO2Nhc2Uga3I6bz0xLHM9bitpWzFdLWlbMF07YnJlYWs7ZGVmYXVsdDpvPXQtMSxzPWV9dmFyIHU9LjUqKG4tZSksbD10aGlzLnZhbHVlU2l6ZTt0aGlzLl93ZWlnaHRQcmV2PXUvKGUtYSksdGhpcy5fd2VpZ2h0TmV4dD11LyhzLW4pLHRoaXMuX29mZnNldFByZXY9cipsLHRoaXMuX29mZnNldE5leHQ9bypsfSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPXRoaXMucmVzdWx0QnVmZmVyLG89dGhpcy5zYW1wbGVWYWx1ZXMsYT10aGlzLnZhbHVlU2l6ZSxzPXQqYSx1PXMtYSxsPXRoaXMuX29mZnNldFByZXYsYz10aGlzLl9vZmZzZXROZXh0LGg9dGhpcy5fd2VpZ2h0UHJldixmPXRoaXMuX3dlaWdodE5leHQsZD0obi1lKS8oaS1lKSxwPWQqZCxnPXAqZCx2PS1oKmcrMipoKnAtaCpkLG09KDEraCkqZysoLTEuNS0yKmgpKnArKC0uNStoKSpkKzEseT0oLTEtZikqZysoMS41K2YpKnArLjUqZCxfPWYqZy1mKnAsYj0wO2IhPT1hOysrYilyW2JdPXYqb1tsK2JdK20qb1t1K2JdK3kqb1tzK2JdK18qb1tjK2JdO3JldHVybiByfX0pLERlLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoa2UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6RGUsaW50ZXJwb2xhdGVfOmZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj10aGlzLnJlc3VsdEJ1ZmZlcixvPXRoaXMuc2FtcGxlVmFsdWVzLGE9dGhpcy52YWx1ZVNpemUscz10KmEsdT1zLWEsbD0obi1lKS8oaS1lKSxjPTEtbCxoPTA7aCE9PWE7KytoKXJbaF09b1t1K2hdKmMrb1tzK2hdKmw7cmV0dXJuIHJ9fSksRmUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShrZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpGZSxpbnRlcnBvbGF0ZV86ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHRoaXMuY29weVNhbXBsZVZhbHVlXyh0LTEpfX0pO3ZhciBiczticz17VGltZUJ1ZmZlclR5cGU6RmxvYXQzMkFycmF5LFZhbHVlQnVmZmVyVHlwZTpGbG9hdDMyQXJyYXksRGVmYXVsdEludGVycG9sYXRpb246UHIsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kRGlzY3JldGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBGZSh0aGlzLnRpbWVzLHRoaXMudmFsdWVzLHRoaXMuZ2V0VmFsdWVTaXplKCksdCl9LEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IERlKHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSx0KX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUmUodGhpcy50aW1lcyx0aGlzLnZhbHVlcyx0aGlzLmdldFZhbHVlU2l6ZSgpLHQpfSxzZXRJbnRlcnBvbGF0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlO3N3aXRjaCh0KXtjYXNlIFRyOmU9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2REaXNjcmV0ZTticmVhaztjYXNlIFByOmU9dGhpcy5JbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI7YnJlYWs7Y2FzZSBBcjplPXRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RofWlmKHZvaWQgMD09PWUpe3ZhciBuPVwidW5zdXBwb3J0ZWQgaW50ZXJwb2xhdGlvbiBmb3IgXCIrdGhpcy5WYWx1ZVR5cGVOYW1lK1wiIGtleWZyYW1lIHRyYWNrIG5hbWVkIFwiK3RoaXMubmFtZTtpZih2b2lkIDA9PT10aGlzLmNyZWF0ZUludGVycG9sYW50KXtpZih0PT09dGhpcy5EZWZhdWx0SW50ZXJwb2xhdGlvbil0aHJvdyBuZXcgRXJyb3Iobik7dGhpcy5zZXRJbnRlcnBvbGF0aW9uKHRoaXMuRGVmYXVsdEludGVycG9sYXRpb24pfXJldHVybiB2b2lkIGNvbnNvbGUud2FybihuKX10aGlzLmNyZWF0ZUludGVycG9sYW50PWV9LGdldEludGVycG9sYXRpb246ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5jcmVhdGVJbnRlcnBvbGFudCl7Y2FzZSB0aGlzLkludGVycG9sYW50RmFjdG9yeU1ldGhvZERpc2NyZXRlOnJldHVybiBUcjtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnJldHVybiBQcjtjYXNlIHRoaXMuSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnJldHVybiBBcn19LGdldFZhbHVlU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcy5sZW5ndGgvdGhpcy50aW1lcy5sZW5ndGh9LHNoaWZ0OmZ1bmN0aW9uKHQpe2lmKDAhPT10KWZvcih2YXIgZT10aGlzLnRpbWVzLG49MCxpPWUubGVuZ3RoO24hPT1pOysrbillW25dKz10O3JldHVybiB0aGlzfSxzY2FsZTpmdW5jdGlvbih0KXtpZigxIT09dClmb3IodmFyIGU9dGhpcy50aW1lcyxuPTAsaT1lLmxlbmd0aDtuIT09aTsrK24pZVtuXSo9dDtyZXR1cm4gdGhpc30sdHJpbTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLnRpbWVzLGk9bi5sZW5ndGgscj0wLG89aS0xO3IhPT1pJiZuW3JdPHQ7KSsrcjtmb3IoO28hPT0tMSYmbltvXT5lOyktLW87aWYoKytvLDAhPT1yfHxvIT09aSl7cj49byYmKG89TWF0aC5tYXgobywxKSxyPW8tMSk7dmFyIGE9dGhpcy5nZXRWYWx1ZVNpemUoKTt0aGlzLnRpbWVzPV9zLmFycmF5U2xpY2UobixyLG8pLHRoaXMudmFsdWVzPV9zLmFycmF5U2xpY2UodGhpcy52YWx1ZXMsciphLG8qYSl9cmV0dXJuIHRoaXN9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9ITAsZT10aGlzLmdldFZhbHVlU2l6ZSgpO2UtTWF0aC5mbG9vcihlKSE9PTAmJihjb25zb2xlLmVycm9yKFwiaW52YWxpZCB2YWx1ZSBzaXplIGluIHRyYWNrXCIsdGhpcyksdD0hMSk7dmFyIG49dGhpcy50aW1lcyxpPXRoaXMudmFsdWVzLHI9bi5sZW5ndGg7MD09PXImJihjb25zb2xlLmVycm9yKFwidHJhY2sgaXMgZW1wdHlcIix0aGlzKSx0PSExKTtmb3IodmFyIG89bnVsbCxhPTA7YSE9PXI7YSsrKXt2YXIgcz1uW2FdO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBzJiZpc05hTihzKSl7Y29uc29sZS5lcnJvcihcInRpbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyXCIsdGhpcyxhLHMpLHQ9ITE7YnJlYWt9aWYobnVsbCE9PW8mJm8+cyl7Y29uc29sZS5lcnJvcihcIm91dCBvZiBvcmRlciBrZXlzXCIsdGhpcyxhLHMsbyksdD0hMTticmVha31vPXN9aWYodm9pZCAwIT09aSYmX3MuaXNUeXBlZEFycmF5KGkpKWZvcih2YXIgYT0wLHU9aS5sZW5ndGg7YSE9PXU7KythKXt2YXIgbD1pW2FdO2lmKGlzTmFOKGwpKXtjb25zb2xlLmVycm9yKFwidmFsdWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyXCIsdGhpcyxhLGwpLHQ9ITE7YnJlYWt9fXJldHVybiB0fSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnRpbWVzLGU9dGhpcy52YWx1ZXMsbj10aGlzLmdldFZhbHVlU2l6ZSgpLGk9dGhpcy5nZXRJbnRlcnBvbGF0aW9uKCk9PT1BcixyPTEsbz10Lmxlbmd0aC0xLGE9MTthPG87KythKXt2YXIgcz0hMSx1PXRbYV0sbD10W2ErMV07aWYodSE9PWwmJigxIT09YXx8dSE9PXVbMF0pKWlmKGkpcz0hMDtlbHNlIGZvcih2YXIgYz1hKm4saD1jLW4sZj1jK24sZD0wO2QhPT1uOysrZCl7dmFyIHA9ZVtjK2RdO2lmKHAhPT1lW2grZF18fHAhPT1lW2YrZF0pe3M9ITA7YnJlYWt9fWlmKHMpe2lmKGEhPT1yKXt0W3JdPXRbYV07Zm9yKHZhciBnPWEqbix2PXIqbixkPTA7ZCE9PW47KytkKWVbditkXT1lW2crZF19KytyfX1pZihvPjApe3Rbcl09dFtvXTtmb3IodmFyIGc9bypuLHY9cipuLGQ9MDtkIT09bjsrK2QpZVt2K2RdPWVbZytkXTsrK3J9cmV0dXJuIHIhPT10Lmxlbmd0aCYmKHRoaXMudGltZXM9X3MuYXJyYXlTbGljZSh0LDAsciksdGhpcy52YWx1ZXM9X3MuYXJyYXlTbGljZShlLDAscipuKSksdGhpc319LGplLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoYnMpLHtjb25zdHJ1Y3RvcjpqZSxWYWx1ZVR5cGVOYW1lOlwidmVjdG9yXCJ9KSxVZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGtlLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlVlLGludGVycG9sYXRlXzpmdW5jdGlvbih0LG4saSxyKXtmb3IodmFyIG89dGhpcy5yZXN1bHRCdWZmZXIsYT10aGlzLnNhbXBsZVZhbHVlcyxzPXRoaXMudmFsdWVTaXplLHU9dCpzLGw9KGktbikvKHItbiksYz11K3M7dSE9PWM7dSs9NCllLnNsZXJwRmxhdChvLDAsYSx1LXMsYSx1LGwpO3JldHVybiBvfX0pLHplLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoYnMpLHtjb25zdHJ1Y3Rvcjp6ZSxWYWx1ZVR5cGVOYW1lOlwicXVhdGVybmlvblwiLERlZmF1bHRJbnRlcnBvbGF0aW9uOlByLEludGVycG9sYW50RmFjdG9yeU1ldGhvZExpbmVhcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFVlKHRoaXMudGltZXMsdGhpcy52YWx1ZXMsdGhpcy5nZXRWYWx1ZVNpemUoKSx0KX0sSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kU21vb3RoOnZvaWQgMH0pLEdlLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoYnMpLHtjb25zdHJ1Y3RvcjpHZSxWYWx1ZVR5cGVOYW1lOlwibnVtYmVyXCJ9KSxWZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGJzKSx7Y29uc3RydWN0b3I6VmUsVmFsdWVUeXBlTmFtZTpcInN0cmluZ1wiLFZhbHVlQnVmZmVyVHlwZTpBcnJheSxEZWZhdWx0SW50ZXJwb2xhdGlvbjpUcixJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RMaW5lYXI6dm9pZCAwLEludGVycG9sYW50RmFjdG9yeU1ldGhvZFNtb290aDp2b2lkIDB9KSxYZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGJzKSx7Y29uc3RydWN0b3I6WGUsVmFsdWVUeXBlTmFtZTpcImJvb2xcIixWYWx1ZUJ1ZmZlclR5cGU6QXJyYXksRGVmYXVsdEludGVycG9sYXRpb246VHIsSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kTGluZWFyOnZvaWQgMCxJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RTbW9vdGg6dm9pZCAwfSksSGUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShicykse2NvbnN0cnVjdG9yOkhlLFZhbHVlVHlwZU5hbWU6XCJjb2xvclwifSkscWUucHJvdG90eXBlPWJzLGJzLmNvbnN0cnVjdG9yPXFlLGEocWUse3BhcnNlOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQudHlwZSl0aHJvdyBuZXcgRXJyb3IoXCJ0cmFjayB0eXBlIHVuZGVmaW5lZCwgY2FuIG5vdCBwYXJzZVwiKTt2YXIgZT1xZS5fZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZSh0LnR5cGUpO2lmKHZvaWQgMD09PXQudGltZXMpe3ZhciBuPVtdLGk9W107X3MuZmxhdHRlbkpTT04odC5rZXlzLG4saSxcInZhbHVlXCIpLHQudGltZXM9bix0LnZhbHVlcz1pfXJldHVybiB2b2lkIDAhPT1lLnBhcnNlP2UucGFyc2UodCk6bmV3IGUodC5uYW1lLHQudGltZXMsdC52YWx1ZXMsdC5pbnRlcnBvbGF0aW9uKX0sdG9KU09OOmZ1bmN0aW9uKHQpe3ZhciBlLG49dC5jb25zdHJ1Y3RvcjtpZih2b2lkIDAhPT1uLnRvSlNPTillPW4udG9KU09OKHQpO2Vsc2V7ZT17bmFtZTp0Lm5hbWUsdGltZXM6X3MuY29udmVydEFycmF5KHQudGltZXMsQXJyYXkpLHZhbHVlczpfcy5jb252ZXJ0QXJyYXkodC52YWx1ZXMsQXJyYXkpfTt2YXIgaT10LmdldEludGVycG9sYXRpb24oKTtpIT09dC5EZWZhdWx0SW50ZXJwb2xhdGlvbiYmKGUuaW50ZXJwb2xhdGlvbj1pKX1yZXR1cm4gZS50eXBlPXQuVmFsdWVUeXBlTmFtZSxlfSxfZ2V0VHJhY2tUeXBlRm9yVmFsdWVUeXBlTmFtZTpmdW5jdGlvbih0KXtzd2l0Y2godC50b0xvd2VyQ2FzZSgpKXtjYXNlXCJzY2FsYXJcIjpjYXNlXCJkb3VibGVcIjpjYXNlXCJmbG9hdFwiOmNhc2VcIm51bWJlclwiOmNhc2VcImludGVnZXJcIjpyZXR1cm4gR2U7Y2FzZVwidmVjdG9yXCI6Y2FzZVwidmVjdG9yMlwiOmNhc2VcInZlY3RvcjNcIjpjYXNlXCJ2ZWN0b3I0XCI6cmV0dXJuIGplO2Nhc2VcImNvbG9yXCI6cmV0dXJuIEhlO2Nhc2VcInF1YXRlcm5pb25cIjpyZXR1cm4gemU7Y2FzZVwiYm9vbFwiOmNhc2VcImJvb2xlYW5cIjpyZXR1cm4gWGU7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIFZlfXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHR5cGVOYW1lOiBcIit0KX19KSxhKFllLHtwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj10LnRyYWNrcyxpPTEvKHQuZnBzfHwxKSxyPTAsbz1uLmxlbmd0aDtyIT09bzsrK3IpZS5wdXNoKHFlLnBhcnNlKG5bcl0pLnNjYWxlKGkpKTtyZXR1cm4gbmV3IFllKHQubmFtZSx0LmR1cmF0aW9uLGUpfSx0b0pTT046ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49dC50cmFja3MsaT17bmFtZTp0Lm5hbWUsZHVyYXRpb246dC5kdXJhdGlvbix0cmFja3M6ZX0scj0wLG89bi5sZW5ndGg7ciE9PW87KytyKWUucHVzaChxZS50b0pTT04obltyXSkpO3JldHVybiBpfSxDcmVhdGVGcm9tTW9ycGhUYXJnZXRTZXF1ZW5jZTpmdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHI9ZS5sZW5ndGgsbz1bXSxhPTA7YTxyO2ErKyl7dmFyIHM9W10sdT1bXTtzLnB1c2goKGErci0xKSVyLGEsKGErMSklciksdS5wdXNoKDAsMSwwKTt2YXIgbD1fcy5nZXRLZXlmcmFtZU9yZGVyKHMpO3M9X3Muc29ydGVkQXJyYXkocywxLGwpLHU9X3Muc29ydGVkQXJyYXkodSwxLGwpLGl8fDAhPT1zWzBdfHwocy5wdXNoKHIpLHUucHVzaCh1WzBdKSksby5wdXNoKG5ldyBHZShcIi5tb3JwaFRhcmdldEluZmx1ZW5jZXNbXCIrZVthXS5uYW1lK1wiXVwiLHMsdSkuc2NhbGUoMS9uKSl9cmV0dXJuIG5ldyBZZSh0LC0xLG8pfSxmaW5kQnlOYW1lOmZ1bmN0aW9uKHQsZSl7dmFyIG49dDtpZighQXJyYXkuaXNBcnJheSh0KSl7dmFyIGk9dDtuPWkuZ2VvbWV0cnkmJmkuZ2VvbWV0cnkuYW5pbWF0aW9uc3x8aS5hbmltYXRpb25zfWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKWlmKG5bcl0ubmFtZT09PWUpcmV0dXJuIG5bcl07cmV0dXJuIG51bGx9LENyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9e30scj0vXihbXFx3LV0qPykoW1xcZF0rKSQvLG89MCxhPXQubGVuZ3RoO288YTtvKyspe3ZhciBzPXRbb10sdT1zLm5hbWUubWF0Y2gocik7aWYodSYmdS5sZW5ndGg+MSl7dmFyIGw9dVsxXSxjPWlbbF07Y3x8KGlbbF09Yz1bXSksYy5wdXNoKHMpfX12YXIgaD1bXTtmb3IodmFyIGwgaW4gaSloLnB1c2goWWUuQ3JlYXRlRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2UobCxpW2xdLGUsbikpO3JldHVybiBofSxwYXJzZUFuaW1hdGlvbjpmdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiBjb25zb2xlLmVycm9yKFwiICBubyBhbmltYXRpb24gaW4gSlNPTkxvYWRlciBkYXRhXCIpLG51bGw7Zm9yKHZhciBuPWZ1bmN0aW9uKHQsZSxuLGkscil7aWYoMCE9PW4ubGVuZ3RoKXt2YXIgbz1bXSxhPVtdO19zLmZsYXR0ZW5KU09OKG4sbyxhLGkpLDAhPT1vLmxlbmd0aCYmci5wdXNoKG5ldyB0KGUsbyxhKSl9fSxpPVtdLHI9dC5uYW1lfHxcImRlZmF1bHRcIixvPXQubGVuZ3RofHwtMSxhPXQuZnBzfHwzMCxzPXQuaGllcmFyY2h5fHxbXSx1PTA7dTxzLmxlbmd0aDt1Kyspe3ZhciBsPXNbdV0ua2V5cztpZihsJiYwIT09bC5sZW5ndGgpaWYobFswXS5tb3JwaFRhcmdldHMpe2Zvcih2YXIgYz17fSxoPTA7aDxsLmxlbmd0aDtoKyspaWYobFtoXS5tb3JwaFRhcmdldHMpZm9yKHZhciBmPTA7ZjxsW2hdLm1vcnBoVGFyZ2V0cy5sZW5ndGg7ZisrKWNbbFtoXS5tb3JwaFRhcmdldHNbZl1dPS0xO2Zvcih2YXIgZCBpbiBjKXtmb3IodmFyIHA9W10sZz1bXSxmPTA7ZiE9PWxbaF0ubW9ycGhUYXJnZXRzLmxlbmd0aDsrK2Ype3ZhciB2PWxbaF07cC5wdXNoKHYudGltZSksZy5wdXNoKHYubW9ycGhUYXJnZXQ9PT1kPzE6MCl9aS5wdXNoKG5ldyBHZShcIi5tb3JwaFRhcmdldEluZmx1ZW5jZVtcIitkK1wiXVwiLHAsZykpfW89Yy5sZW5ndGgqKGF8fDEpfWVsc2V7dmFyIG09XCIuYm9uZXNbXCIrZVt1XS5uYW1lK1wiXVwiO24oamUsbStcIi5wb3NpdGlvblwiLGwsXCJwb3NcIixpKSxuKHplLG0rXCIucXVhdGVybmlvblwiLGwsXCJyb3RcIixpKSxuKGplLG0rXCIuc2NhbGVcIixsLFwic2NsXCIsaSl9fWlmKDA9PT1pLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgeT1uZXcgWWUocixvLGkpO3JldHVybiB5fX0pLGEoWWUucHJvdG90eXBlLHtyZXNldER1cmF0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMudHJhY2tzLGU9MCxuPTAsaT10Lmxlbmd0aDtuIT09aTsrK24pe3ZhciByPXRoaXMudHJhY2tzW25dO2U9TWF0aC5tYXgoZSxyLnRpbWVzW3IudGltZXMubGVuZ3RoLTFdKX10aGlzLmR1cmF0aW9uPWV9LHRyaW06ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMudHJhY2tzLmxlbmd0aDt0KyspdGhpcy50cmFja3NbdF0udHJpbSgwLHRoaXMuZHVyYXRpb24pO3JldHVybiB0aGlzfSxvcHRpbWl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy50cmFja3MubGVuZ3RoO3QrKyl0aGlzLnRyYWNrc1t0XS5vcHRpbWl6ZSgpO3JldHVybiB0aGlzfX0pLGEoV2UucHJvdG90eXBlLHtsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXRoaXMsbz10aGlzLnRleHR1cmVQYXRoJiZcInN0cmluZ1wiPT10eXBlb2YgdGhpcy50ZXh0dXJlUGF0aD90aGlzLnRleHR1cmVQYXRoOk5lLnByb3RvdHlwZS5leHRyYWN0VXJsQmFzZSh0KSxhPW5ldyBBZSh0aGlzLm1hbmFnZXIpO2Euc2V0UmVzcG9uc2VUeXBlKFwianNvblwiKSxhLnNldFdpdGhDcmVkZW50aWFscyh0aGlzLndpdGhDcmVkZW50aWFscyksYS5sb2FkKHQsZnVuY3Rpb24obil7dmFyIGk9bi5tZXRhZGF0YTtpZih2b2lkIDAhPT1pKXt2YXIgYT1pLnR5cGU7aWYodm9pZCAwIT09YSl7aWYoXCJvYmplY3RcIj09PWEudG9Mb3dlckNhc2UoKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrdCtcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuT2JqZWN0TG9hZGVyIGluc3RlYWQuXCIpO2lmKFwic2NlbmVcIj09PWEudG9Mb3dlckNhc2UoKSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiVEhSRUUuSlNPTkxvYWRlcjogXCIrdCtcIiBzaG91bGQgYmUgbG9hZGVkIHdpdGggVEhSRUUuU2NlbmVMb2FkZXIgaW5zdGVhZC5cIil9fXZhciBzPXIucGFyc2UobixvKTtlKHMuZ2VvbWV0cnkscy5tYXRlcmlhbHMpfSxuLGkpfSxzZXRUZXh0dXJlUGF0aDpmdW5jdGlvbih0KXt0aGlzLnRleHR1cmVQYXRoPXR9LHBhcnNlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gdCYxPDxlfXZhciByLGEscyx1LGwsYyxoLGYsZCxwLGcsdixtLHksXyxiLHgsdyxFLFMsTSxDLEksTyxULFAsQSxMPXQuZmFjZXMsTj10LnZlcnRpY2VzLGs9dC5ub3JtYWxzLFI9dC5jb2xvcnMsRD10LnNjYWxlLEY9MDtpZih2b2lkIDAhPT10LnV2cyl7Zm9yKHI9MDtyPHQudXZzLmxlbmd0aDtyKyspdC51dnNbcl0ubGVuZ3RoJiZGKys7Zm9yKHI9MDtyPEY7cisrKWUuZmFjZVZlcnRleFV2c1tyXT1bXX1mb3IodT0wLGw9Ti5sZW5ndGg7dTxsOyl3PW5ldyBuLHcueD1OW3UrK10qRCx3Lnk9Tlt1KytdKkQsdy56PU5bdSsrXSpELGUudmVydGljZXMucHVzaCh3KTtmb3IodT0wLGw9TC5sZW5ndGg7dTxsOylpZihwPUxbdSsrXSxnPWkocCwwKSx2PWkocCwxKSxtPWkocCwzKSx5PWkocCw0KSxfPWkocCw1KSxiPWkocCw2KSx4PWkocCw3KSxnKXtpZihTPW5ldyBsdCxTLmE9TFt1XSxTLmI9TFt1KzFdLFMuYz1MW3UrM10sTT1uZXcgbHQsTS5hPUxbdSsxXSxNLmI9TFt1KzJdLE0uYz1MW3UrM10sdSs9NCx2JiYoZD1MW3UrK10sUy5tYXRlcmlhbEluZGV4PWQsTS5tYXRlcmlhbEluZGV4PWQpLHM9ZS5mYWNlcy5sZW5ndGgsbSlmb3Iocj0wO3I8RjtyKyspZm9yKE89dC51dnNbcl0sZS5mYWNlVmVydGV4VXZzW3JdW3NdPVtdLGUuZmFjZVZlcnRleFV2c1tyXVtzKzFdPVtdLGE9MDthPDQ7YSsrKWY9TFt1KytdLFA9T1syKmZdLEE9T1syKmYrMV0sVD1uZXcgbyhQLEEpLDIhPT1hJiZlLmZhY2VWZXJ0ZXhVdnNbcl1bc10ucHVzaChUKSwwIT09YSYmZS5mYWNlVmVydGV4VXZzW3JdW3MrMV0ucHVzaChUKTtpZih5JiYoaD0zKkxbdSsrXSxTLm5vcm1hbC5zZXQoa1toKytdLGtbaCsrXSxrW2hdKSxNLm5vcm1hbC5jb3B5KFMubm9ybWFsKSksXylmb3Iocj0wO3I8NDtyKyspaD0zKkxbdSsrXSxJPW5ldyBuKGtbaCsrXSxrW2grK10sa1toXSksMiE9PXImJlMudmVydGV4Tm9ybWFscy5wdXNoKEkpLDAhPT1yJiZNLnZlcnRleE5vcm1hbHMucHVzaChJKTtpZihiJiYoYz1MW3UrK10sQz1SW2NdLFMuY29sb3Iuc2V0SGV4KEMpLE0uY29sb3Iuc2V0SGV4KEMpKSx4KWZvcihyPTA7cjw0O3IrKyljPUxbdSsrXSxDPVJbY10sMiE9PXImJlMudmVydGV4Q29sb3JzLnB1c2gobmV3IHEoQykpLDAhPT1yJiZNLnZlcnRleENvbG9ycy5wdXNoKG5ldyBxKEMpKTtlLmZhY2VzLnB1c2goUyksZS5mYWNlcy5wdXNoKE0pfWVsc2V7aWYoRT1uZXcgbHQsRS5hPUxbdSsrXSxFLmI9TFt1KytdLEUuYz1MW3UrK10sdiYmKGQ9TFt1KytdLEUubWF0ZXJpYWxJbmRleD1kKSxzPWUuZmFjZXMubGVuZ3RoLG0pZm9yKHI9MDtyPEY7cisrKWZvcihPPXQudXZzW3JdLGUuZmFjZVZlcnRleFV2c1tyXVtzXT1bXSxhPTA7YTwzO2ErKylmPUxbdSsrXSxQPU9bMipmXSxBPU9bMipmKzFdLFQ9bmV3IG8oUCxBKSxlLmZhY2VWZXJ0ZXhVdnNbcl1bc10ucHVzaChUKTtpZih5JiYoaD0zKkxbdSsrXSxFLm5vcm1hbC5zZXQoa1toKytdLGtbaCsrXSxrW2hdKSksXylmb3Iocj0wO3I8MztyKyspaD0zKkxbdSsrXSxJPW5ldyBuKGtbaCsrXSxrW2grK10sa1toXSksRS52ZXJ0ZXhOb3JtYWxzLnB1c2goSSk7aWYoYiYmKGM9TFt1KytdLEUuY29sb3Iuc2V0SGV4KFJbY10pKSx4KWZvcihyPTA7cjwzO3IrKyljPUxbdSsrXSxFLnZlcnRleENvbG9ycy5wdXNoKG5ldyBxKFJbY10pKTtlLmZhY2VzLnB1c2goRSl9fWZ1bmN0aW9uIGUodCxlKXt2YXIgbj12b2lkIDAhPT10LmluZmx1ZW5jZXNQZXJWZXJ0ZXg/dC5pbmZsdWVuY2VzUGVyVmVydGV4OjI7aWYodC5za2luV2VpZ2h0cylmb3IodmFyIGk9MCxyPXQuc2tpbldlaWdodHMubGVuZ3RoO2k8cjtpKz1uKXt2YXIgbz10LnNraW5XZWlnaHRzW2ldLGE9bj4xP3Quc2tpbldlaWdodHNbaSsxXTowLHM9bj4yP3Quc2tpbldlaWdodHNbaSsyXTowLHU9bj4zP3Quc2tpbldlaWdodHNbaSszXTowO2Uuc2tpbldlaWdodHMucHVzaChuZXcgSChvLGEscyx1KSl9aWYodC5za2luSW5kaWNlcylmb3IodmFyIGk9MCxyPXQuc2tpbkluZGljZXMubGVuZ3RoO2k8cjtpKz1uKXt2YXIgbD10LnNraW5JbmRpY2VzW2ldLGM9bj4xP3Quc2tpbkluZGljZXNbaSsxXTowLGg9bj4yP3Quc2tpbkluZGljZXNbaSsyXTowLGY9bj4zP3Quc2tpbkluZGljZXNbaSszXTowO2Uuc2tpbkluZGljZXMucHVzaChuZXcgSChsLGMsaCxmKSl9ZS5ib25lcz10LmJvbmVzLGUuYm9uZXMmJmUuYm9uZXMubGVuZ3RoPjAmJihlLnNraW5XZWlnaHRzLmxlbmd0aCE9PWUuc2tpbkluZGljZXMubGVuZ3RofHxlLnNraW5JbmRpY2VzLmxlbmd0aCE9PWUudmVydGljZXMubGVuZ3RoKSYmY29uc29sZS53YXJuKFwiV2hlbiBza2lubmluZywgbnVtYmVyIG9mIHZlcnRpY2VzIChcIitlLnZlcnRpY2VzLmxlbmd0aCtcIiksIHNraW5JbmRpY2VzIChcIitlLnNraW5JbmRpY2VzLmxlbmd0aCtcIiksIGFuZCBza2luV2VpZ2h0cyAoXCIrZS5za2luV2VpZ2h0cy5sZW5ndGgrXCIpIHNob3VsZCBtYXRjaC5cIil9ZnVuY3Rpb24gaSh0LGUpe3ZhciBpPXQuc2NhbGU7aWYodm9pZCAwIT09dC5tb3JwaFRhcmdldHMpZm9yKHZhciByPTAsbz10Lm1vcnBoVGFyZ2V0cy5sZW5ndGg7cjxvO3IrKyl7ZS5tb3JwaFRhcmdldHNbcl09e30sZS5tb3JwaFRhcmdldHNbcl0ubmFtZT10Lm1vcnBoVGFyZ2V0c1tyXS5uYW1lLGUubW9ycGhUYXJnZXRzW3JdLnZlcnRpY2VzPVtdO2Zvcih2YXIgYT1lLm1vcnBoVGFyZ2V0c1tyXS52ZXJ0aWNlcyxzPXQubW9ycGhUYXJnZXRzW3JdLnZlcnRpY2VzLHU9MCxsPXMubGVuZ3RoO3U8bDt1Kz0zKXt2YXIgYz1uZXcgbjtjLng9c1t1XSppLGMueT1zW3UrMV0qaSxjLno9c1t1KzJdKmksYS5wdXNoKGMpfX1pZih2b2lkIDAhPT10Lm1vcnBoQ29sb3JzJiZ0Lm1vcnBoQ29sb3JzLmxlbmd0aD4wKXtjb25zb2xlLndhcm4oJ1RIUkVFLkpTT05Mb2FkZXI6IFwibW9ycGhDb2xvcnNcIiBubyBsb25nZXIgc3VwcG9ydGVkLiBVc2luZyB0aGVtIGFzIGZhY2UgY29sb3JzLicpO2Zvcih2YXIgaD1lLmZhY2VzLGY9dC5tb3JwaENvbG9yc1swXS5jb2xvcnMscj0wLG89aC5sZW5ndGg7cjxvO3IrKyloW3JdLmNvbG9yLmZyb21BcnJheShmLDMqcil9fWZ1bmN0aW9uIHIodCxlKXt2YXIgbj1bXSxpPVtdO3ZvaWQgMCE9PXQuYW5pbWF0aW9uJiZpLnB1c2godC5hbmltYXRpb24pLHZvaWQgMCE9PXQuYW5pbWF0aW9ucyYmKHQuYW5pbWF0aW9ucy5sZW5ndGg/aT1pLmNvbmNhdCh0LmFuaW1hdGlvbnMpOmkucHVzaCh0LmFuaW1hdGlvbnMpKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl7dmFyIG89WWUucGFyc2VBbmltYXRpb24oaVtyXSxlLmJvbmVzKTtvJiZuLnB1c2gobyl9aWYoZS5tb3JwaFRhcmdldHMpe3ZhciBhPVllLkNyZWF0ZUNsaXBzRnJvbU1vcnBoVGFyZ2V0U2VxdWVuY2VzKGUubW9ycGhUYXJnZXRzLDEwKTtuPW4uY29uY2F0KGEpfW4ubGVuZ3RoPjAmJihlLmFuaW1hdGlvbnM9bil9cmV0dXJuIGZ1bmN0aW9uKG4sbyl7dm9pZCAwIT09bi5kYXRhJiYobj1uLmRhdGEpLHZvaWQgMCE9PW4uc2NhbGU/bi5zY2FsZT0xL24uc2NhbGU6bi5zY2FsZT0xO3ZhciBhPW5ldyBTdDtpZih0KG4sYSksZShuLGEpLGkobixhKSxyKG4sYSksYS5jb21wdXRlRmFjZU5vcm1hbHMoKSxhLmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHZvaWQgMD09PW4ubWF0ZXJpYWxzfHwwPT09bi5tYXRlcmlhbHMubGVuZ3RoKXJldHVybntnZW9tZXRyeTphfTt2YXIgcz1OZS5wcm90b3R5cGUuaW5pdE1hdGVyaWFscyhuLm1hdGVyaWFscyxvLHRoaXMuY3Jvc3NPcmlnaW4pO3JldHVybntnZW9tZXRyeTphLG1hdGVyaWFsczpzfX19KCl9KSxaZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKGF0LnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOlplLGlzTGlnaHQ6ITAsY29weTpmdW5jdGlvbih0KXtyZXR1cm4gYXQucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLHQpLHRoaXMuY29sb3IuY29weSh0LmNvbG9yKSx0aGlzLmludGVuc2l0eT10LmludGVuc2l0eSx0aGlzfSx0b0pTT046ZnVuY3Rpb24odCl7dmFyIGU9YXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMsdCk7cmV0dXJuIGUub2JqZWN0LmNvbG9yPXRoaXMuY29sb3IuZ2V0SGV4KCksZS5vYmplY3QuaW50ZW5zaXR5PXRoaXMuaW50ZW5zaXR5LHZvaWQgMCE9PXRoaXMuZ3JvdW5kQ29sb3ImJihlLm9iamVjdC5ncm91bmRDb2xvcj10aGlzLmdyb3VuZENvbG9yLmdldEhleCgpKSx2b2lkIDAhPT10aGlzLmRpc3RhbmNlJiYoZS5vYmplY3QuZGlzdGFuY2U9dGhpcy5kaXN0YW5jZSksdm9pZCAwIT09dGhpcy5hbmdsZSYmKGUub2JqZWN0LmFuZ2xlPXRoaXMuYW5nbGUpLHZvaWQgMCE9PXRoaXMuZGVjYXkmJihlLm9iamVjdC5kZWNheT10aGlzLmRlY2F5KSx2b2lkIDAhPT10aGlzLnBlbnVtYnJhJiYoZS5vYmplY3QucGVudW1icmE9dGhpcy5wZW51bWJyYSksdm9pZCAwIT09dGhpcy5zaGFkb3cmJihlLm9iamVjdC5zaGFkb3c9dGhpcy5zaGFkb3cudG9KU09OKCkpLGV9fSksSmUucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZShaZS5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpKZSxpc0hlbWlzcGhlcmVMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBaZS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy5ncm91bmRDb2xvci5jb3B5KHQuZ3JvdW5kQ29sb3IpLHRoaXN9fSksYShLZS5wcm90b3R5cGUse2NvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FtZXJhPXQuY2FtZXJhLmNsb25lKCksdGhpcy5iaWFzPXQuYmlhcyx0aGlzLnJhZGl1cz10LnJhZGl1cyx0aGlzLm1hcFNpemUuY29weSh0Lm1hcFNpemUpLHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyB0aGlzLmNvbnN0cnVjdG9yKS5jb3B5KHRoaXMpfSx0b0pTT046ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gMCE9PXRoaXMuYmlhcyYmKHQuYmlhcz10aGlzLmJpYXMpLDEhPT10aGlzLnJhZGl1cyYmKHQucmFkaXVzPXRoaXMucmFkaXVzKSw1MTI9PT10aGlzLm1hcFNpemUueCYmNTEyPT09dGhpcy5tYXBTaXplLnl8fCh0Lm1hcFNpemU9dGhpcy5tYXBTaXplLnRvQXJyYXkoKSksdC5jYW1lcmE9dGhpcy5jYW1lcmEudG9KU09OKCExKS5vYmplY3QsZGVsZXRlIHQuY2FtZXJhLm1hdHJpeCx0fX0pLFFlLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoS2UucHJvdG90eXBlKSx7Y29uc3RydWN0b3I6UWV9KSwkZS5wcm90b3R5cGU9YShPYmplY3QuY3JlYXRlKFplLnByb3RvdHlwZSkse2NvbnN0cnVjdG9yOiRlLGlzRGlyZWN0aW9uYWxMaWdodDohMCxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiBaZS5wcm90b3R5cGUuY29weS5jYWxsKHRoaXMsdCksdGhpcy50YXJnZXQ9dC50YXJnZXQuY2xvbmUoKSx0aGlzLnNoYWRvdz10LnNoYWRvdy5jbG9uZSgpLHRoaXN9fSksdG4ucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0bih2b2lkIDA9PT10aGlzLnZhbHVlLmNsb25lP3RoaXMudmFsdWU6dGhpcy52YWx1ZS5jbG9uZSgpKX0sYShlbi5wcm90b3R5cGUse2xpbmVQcmVjaXNpb246MSxzZXQ6ZnVuY3Rpb24odCxlKXt0aGlzLnJheS5zZXQodCxlKX0sc2V0RnJvbUNhbWVyYTpmdW5jdGlvbih0LGUpe2UmJmUuaXNQZXJzcGVjdGl2ZUNhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbihlLm1hdHJpeFdvcmxkKSx0aGlzLnJheS5kaXJlY3Rpb24uc2V0KHQueCx0LnksLjUpLnVucHJvamVjdChlKS5zdWIodGhpcy5yYXkub3JpZ2luKS5ub3JtYWxpemUoKSk6ZSYmZS5pc09ydGhvZ3JhcGhpY0NhbWVyYT8odGhpcy5yYXkub3JpZ2luLnNldCh0LngsdC55LChlLm5lYXIrZS5mYXIpLyhlLm5lYXItZS5mYXIpKS51bnByb2plY3QoZSksdGhpcy5yYXkuZGlyZWN0aW9uLnNldCgwLDAsLTEpLnRyYW5zZm9ybURpcmVjdGlvbihlLm1hdHJpeFdvcmxkKSk6Y29uc29sZS5lcnJvcihcIlRIUkVFLlJheWNhc3RlcjogVW5zdXBwb3J0ZWQgY2FtZXJhIHR5cGUuXCIpfSxpbnRlcnNlY3RPYmplY3Q6ZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtyZXR1cm4gcm4odCx0aGlzLG4sZSksbi5zb3J0KG5uKSxufSxpbnRlcnNlY3RPYmplY3RzOmZ1bmN0aW9uKHQsZSl7dmFyIG49W107aWYoQXJyYXkuaXNBcnJheSh0KT09PSExKXJldHVybiBjb25zb2xlLndhcm4oXCJUSFJFRS5SYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0czogb2JqZWN0cyBpcyBub3QgYW4gQXJyYXkuXCIpLG47Zm9yKHZhciBpPTAscj10Lmxlbmd0aDtpPHI7aSsrKXJuKHRbaV0sdGhpcyxuLGUpO3JldHVybiBuLnNvcnQobm4pLG59fSksYShvbi5wcm90b3R5cGUse3N0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5zdGFydFRpbWU9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwZXJmb3JtYW5jZT9EYXRlOnBlcmZvcm1hbmNlKS5ub3coKSx0aGlzLm9sZFRpbWU9dGhpcy5zdGFydFRpbWUsdGhpcy5lbGFwc2VkVGltZT0wLHRoaXMucnVubmluZz0hMH0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZ2V0RWxhcHNlZFRpbWUoKSx0aGlzLnJ1bm5pbmc9ITF9LGdldEVsYXBzZWRUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RGVsdGEoKSx0aGlzLmVsYXBzZWRUaW1lfSxnZXREZWx0YTpmdW5jdGlvbigpe3ZhciB0PTA7aWYodGhpcy5hdXRvU3RhcnQmJiF0aGlzLnJ1bm5pbmcpcmV0dXJuIHRoaXMuc3RhcnQoKSwwO2lmKHRoaXMucnVubmluZyl7dmFyIGU9KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBwZXJmb3JtYW5jZT9EYXRlOnBlcmZvcm1hbmNlKS5ub3coKTt0PShlLXRoaXMub2xkVGltZSkvMWUzLHRoaXMub2xkVGltZT1lLHRoaXMuZWxhcHNlZFRpbWUrPXR9cmV0dXJuIHR9fSksYShhbi5wcm90b3R5cGUse3NldDpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMucmFkaXVzPXQsdGhpcy5waGk9ZSx0aGlzLnRoZXRhPW4sdGhpc30sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IHRoaXMuY29uc3RydWN0b3IpLmNvcHkodGhpcyl9LGNvcHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmFkaXVzPXQucmFkaXVzLHRoaXMucGhpPXQucGhpLHRoaXMudGhldGE9dC50aGV0YSx0aGlzfSxtYWtlU2FmZTpmdW5jdGlvbigpe3ZhciB0PTFlLTY7cmV0dXJuIHRoaXMucGhpPU1hdGgubWF4KHQsTWF0aC5taW4oTWF0aC5QSS10LHRoaXMucGhpKSksdGhpc30sc2V0RnJvbVZlY3RvcjM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucmFkaXVzPXQubGVuZ3RoKCksMD09PXRoaXMucmFkaXVzPyh0aGlzLnRoZXRhPTAsdGhpcy5waGk9MCk6KHRoaXMudGhldGE9TWF0aC5hdGFuMih0LngsdC56KSx0aGlzLnBoaT1NYXRoLmFjb3MoV3IuY2xhbXAodC55L3RoaXMucmFkaXVzLC0xLDEpKSksdGhpc319KSxhKHNuLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWluLmNvcHkodCksdGhpcy5tYXguY29weShlKSx0aGlzfSxzZXRGcm9tUG9pbnRzOmZ1bmN0aW9uKHQpe3RoaXMubWFrZUVtcHR5KCk7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMuZXhwYW5kQnlQb2ludCh0W2VdKTtyZXR1cm4gdGhpc30sc2V0RnJvbUNlbnRlckFuZFNpemU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbztyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaT10LmNvcHkobikubXVsdGlwbHlTY2FsYXIoLjUpO3JldHVybiB0aGlzLm1pbi5jb3B5KGUpLnN1YihpKSx0aGlzLm1heC5jb3B5KGUpLmFkZChpKSx0aGlzfX0oKSxjbG9uZTpmdW5jdGlvbigpe3JldHVybihuZXcgdGhpcy5jb25zdHJ1Y3RvcikuY29weSh0aGlzKX0sY29weTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4uY29weSh0Lm1pbiksdGhpcy5tYXguY29weSh0Lm1heCksdGhpc30sbWFrZUVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluLng9dGhpcy5taW4ueT0rKDEvMCksdGhpcy5tYXgueD10aGlzLm1heC55PS0oMS8wKSx0aGlzfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4Lng8dGhpcy5taW4ueHx8dGhpcy5tYXgueTx0aGlzLm1pbi55fSxnZXRDZW50ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IG87cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Uuc2V0KDAsMCk6ZS5hZGRWZWN0b3JzKHRoaXMubWluLHRoaXMubWF4KS5tdWx0aXBseVNjYWxhciguNSl9LGdldFNpemU6ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IG87cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2Uuc2V0KDAsMCk6ZS5zdWJWZWN0b3JzKHRoaXMubWF4LHRoaXMubWluKX0sZXhwYW5kQnlQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4ubWluKHQpLHRoaXMubWF4Lm1heCh0KSx0aGlzfSxleHBhbmRCeVZlY3RvcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4uc3ViKHQpLHRoaXMubWF4LmFkZCh0KSx0aGlzfSxleHBhbmRCeVNjYWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4uYWRkU2NhbGFyKC10KSx0aGlzLm1heC5hZGRTY2FsYXIodCksdGhpc30sY29udGFpbnNQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4hKHQueDx0aGlzLm1pbi54fHx0Lng+dGhpcy5tYXgueHx8dC55PHRoaXMubWluLnl8fHQueT50aGlzLm1heC55KX0sY29udGFpbnNCb3g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWluLng8PXQubWluLngmJnQubWF4Lng8PXRoaXMubWF4LngmJnRoaXMubWluLnk8PXQubWluLnkmJnQubWF4Lnk8PXRoaXMubWF4Lnl9LGdldFBhcmFtZXRlcjpmdW5jdGlvbih0LGUpe3ZhciBuPWV8fG5ldyBvO3JldHVybiBuLnNldCgodC54LXRoaXMubWluLngpLyh0aGlzLm1heC54LXRoaXMubWluLngpLCh0LnktdGhpcy5taW4ueSkvKHRoaXMubWF4LnktdGhpcy5taW4ueSkpfSxpbnRlcnNlY3RzQm94OmZ1bmN0aW9uKHQpe3JldHVybiEodC5tYXgueDx0aGlzLm1pbi54fHx0Lm1pbi54PnRoaXMubWF4Lnh8fHQubWF4Lnk8dGhpcy5taW4ueXx8dC5taW4ueT50aGlzLm1heC55KX0sY2xhbXBQb2ludDpmdW5jdGlvbih0LGUpe3ZhciBuPWV8fG5ldyBvO3JldHVybiBuLmNvcHkodCkuY2xhbXAodGhpcy5taW4sdGhpcy5tYXgpfSxkaXN0YW5jZVRvUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgbztyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dC5jb3B5KGUpLmNsYW1wKHRoaXMubWluLHRoaXMubWF4KTtyZXR1cm4gbi5zdWIoZSkubGVuZ3RoKCl9fSgpLGludGVyc2VjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5taW4ubWF4KHQubWluKSx0aGlzLm1heC5taW4odC5tYXgpLHRoaXN9LHVuaW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi5taW4odC5taW4pLHRoaXMubWF4Lm1heCh0Lm1heCksdGhpc30sdHJhbnNsYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1pbi5hZGQodCksdGhpcy5tYXguYWRkKHQpLHRoaXN9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdC5taW4uZXF1YWxzKHRoaXMubWluKSYmdC5tYXguZXF1YWxzKHRoaXMubWF4KX19KSxhKHVuLnByb3RvdHlwZSx7Z2V0UG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS53YXJuKFwiVEhSRUUuQ3VydmU6IC5nZXRQb2ludCgpIG5vdCBpbXBsZW1lbnRlZC5cIiksbnVsbH0sZ2V0UG9pbnRBdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFV0b1RtYXBwaW5nKHQpO3JldHVybiB0aGlzLmdldFBvaW50KGUpfSxnZXRQb2ludHM6ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9NSk7Zm9yKHZhciBlPVtdLG49MDtuPD10O24rKyllLnB1c2godGhpcy5nZXRQb2ludChuL3QpKTtyZXR1cm4gZX0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PTUpO2Zvcih2YXIgZT1bXSxuPTA7bjw9dDtuKyspZS5wdXNoKHRoaXMuZ2V0UG9pbnRBdChuL3QpKTtyZXR1cm4gZX0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRMZW5ndGhzKCk7cmV0dXJuIHRbdC5sZW5ndGgtMV19LGdldExlbmd0aHM6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcy5hcmNMZW5ndGhEaXZpc2lvbnMpLHRoaXMuY2FjaGVBcmNMZW5ndGhzJiZ0aGlzLmNhY2hlQXJjTGVuZ3Rocy5sZW5ndGg9PT10KzEmJiF0aGlzLm5lZWRzVXBkYXRlKXJldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Roczt0aGlzLm5lZWRzVXBkYXRlPSExO3ZhciBlLG4saT1bXSxyPXRoaXMuZ2V0UG9pbnQoMCksbz0wO2ZvcihpLnB1c2goMCksbj0xO248PXQ7bisrKWU9dGhpcy5nZXRQb2ludChuL3QpLG8rPWUuZGlzdGFuY2VUbyhyKSxpLnB1c2gobykscj1lO3JldHVybiB0aGlzLmNhY2hlQXJjTGVuZ3Rocz1pLGl9LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwLHRoaXMuZ2V0TGVuZ3RocygpfSxnZXRVdG9UbWFwcGluZzpmdW5jdGlvbih0LGUpe3ZhciBuLGk9dGhpcy5nZXRMZW5ndGhzKCkscj0wLG89aS5sZW5ndGg7bj1lP2U6dCppW28tMV07Zm9yKHZhciBhLHM9MCx1PW8tMTtzPD11OylpZihyPU1hdGguZmxvb3IocysodS1zKS8yKSxhPWlbcl0tbixhPDApcz1yKzE7ZWxzZXtpZighKGE+MCkpe3U9cjticmVha311PXItMX1pZihyPXUsaVtyXT09PW4pcmV0dXJuIHIvKG8tMSk7dmFyIGw9aVtyXSxjPWlbcisxXSxoPWMtbCxmPShuLWwpL2gsZD0ocitmKS8oby0xKTtyZXR1cm4gZH0sZ2V0VGFuZ2VudDpmdW5jdGlvbih0KXt2YXIgZT0xZS00LG49dC1lLGk9dCtlO248MCYmKG49MCksaT4xJiYoaT0xKTt2YXIgcj10aGlzLmdldFBvaW50KG4pLG89dGhpcy5nZXRQb2ludChpKSxhPW8uY2xvbmUoKS5zdWIocik7cmV0dXJuIGEubm9ybWFsaXplKCl9LGdldFRhbmdlbnRBdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFV0b1RtYXBwaW5nKHQpO3JldHVybiB0aGlzLmdldFRhbmdlbnQoZSl9LGNvbXB1dGVGcmVuZXRGcmFtZXM6ZnVuY3Rpb24odCxlKXt2YXIgcixvLGEscz1uZXcgbix1PVtdLGw9W10sYz1bXSxoPW5ldyBuLGY9bmV3IGk7Zm9yKHI9MDtyPD10O3IrKylvPXIvdCx1W3JdPXRoaXMuZ2V0VGFuZ2VudEF0KG8pLHVbcl0ubm9ybWFsaXplKCk7bFswXT1uZXcgbixjWzBdPW5ldyBuO3ZhciBkPU51bWJlci5NQVhfVkFMVUUscD1NYXRoLmFicyh1WzBdLngpLGc9TWF0aC5hYnModVswXS55KSx2PU1hdGguYWJzKHVbMF0ueik7Zm9yKHA8PWQmJihkPXAscy5zZXQoMSwwLDApKSxnPD1kJiYoZD1nLHMuc2V0KDAsMSwwKSksdjw9ZCYmcy5zZXQoMCwwLDEpLGguY3Jvc3NWZWN0b3JzKHVbMF0scykubm9ybWFsaXplKCksbFswXS5jcm9zc1ZlY3RvcnModVswXSxoKSxjWzBdLmNyb3NzVmVjdG9ycyh1WzBdLGxbMF0pLHI9MTtyPD10O3IrKylsW3JdPWxbci0xXS5jbG9uZSgpLGNbcl09Y1tyLTFdLmNsb25lKCksaC5jcm9zc1ZlY3RvcnModVtyLTFdLHVbcl0pLGgubGVuZ3RoKCk+TnVtYmVyLkVQU0lMT04mJihoLm5vcm1hbGl6ZSgpLGE9TWF0aC5hY29zKFdyLmNsYW1wKHVbci0xXS5kb3QodVtyXSksLTEsMSkpLGxbcl0uYXBwbHlNYXRyaXg0KGYubWFrZVJvdGF0aW9uQXhpcyhoLGEpKSksY1tyXS5jcm9zc1ZlY3RvcnModVtyXSxsW3JdKTtpZihlPT09ITApZm9yKGE9TWF0aC5hY29zKFdyLmNsYW1wKGxbMF0uZG90KGxbdF0pLC0xLDEpKSxhLz10LHVbMF0uZG90KGguY3Jvc3NWZWN0b3JzKGxbMF0sbFt0XSkpPjAmJihhPS1hKSxyPTE7cjw9dDtyKyspbFtyXS5hcHBseU1hdHJpeDQoZi5tYWtlUm90YXRpb25BeGlzKHVbcl0sYSpyKSksY1tyXS5jcm9zc1ZlY3RvcnModVtyXSxsW3JdKTtyZXR1cm57dGFuZ2VudHM6dSxub3JtYWxzOmwsYmlub3JtYWxzOmN9fX0pO3ZhciB4cz1uZXcgbix3cz1uZXcgbG4sRXM9bmV3IGxuLFNzPW5ldyBsbjtjbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1bi5wcm90b3R5cGUpLGNuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jbixjbi5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wb2ludHMsaT1lLmxlbmd0aDtpPDImJmNvbnNvbGUubG9nKFwiZHVoLCB5b3UgbmVlZCBhdCBsZWFzdCAyIHBvaW50c1wiKTt2YXIgcj0oaS0odGhpcy5jbG9zZWQ/MDoxKSkqdCxvPU1hdGguZmxvb3IociksYT1yLW87dGhpcy5jbG9zZWQ/bys9bz4wPzA6KE1hdGguZmxvb3IoTWF0aC5hYnMobykvZS5sZW5ndGgpKzEpKmUubGVuZ3RoOjA9PT1hJiZvPT09aS0xJiYobz1pLTIsYT0xKTt2YXIgcyx1LGwsYztpZih0aGlzLmNsb3NlZHx8bz4wP3M9ZVsoby0xKSVpXTooeHMuc3ViVmVjdG9ycyhlWzBdLGVbMV0pLmFkZChlWzBdKSxzPXhzKSx1PWVbbyVpXSxsPWVbKG8rMSklaV0sdGhpcy5jbG9zZWR8fG8rMjxpP2M9ZVsobysyKSVpXTooeHMuc3ViVmVjdG9ycyhlW2ktMV0sZVtpLTJdKS5hZGQoZVtpLTFdKSxjPXhzKSx2b2lkIDA9PT10aGlzLnR5cGV8fFwiY2VudHJpcGV0YWxcIj09PXRoaXMudHlwZXx8XCJjaG9yZGFsXCI9PT10aGlzLnR5cGUpe3ZhciBoPVwiY2hvcmRhbFwiPT09dGhpcy50eXBlPy41Oi4yNSxmPU1hdGgucG93KHMuZGlzdGFuY2VUb1NxdWFyZWQodSksaCksZD1NYXRoLnBvdyh1LmRpc3RhbmNlVG9TcXVhcmVkKGwpLGgpLHA9TWF0aC5wb3cobC5kaXN0YW5jZVRvU3F1YXJlZChjKSxoKTtkPDFlLTQmJihkPTEpLGY8MWUtNCYmKGY9ZCkscDwxZS00JiYocD1kKSx3cy5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20ocy54LHUueCxsLngsYy54LGYsZCxwKSxFcy5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20ocy55LHUueSxsLnksYy55LGYsZCxwKSxTcy5pbml0Tm9udW5pZm9ybUNhdG11bGxSb20ocy56LHUueixsLnosYy56LGYsZCxwKX1lbHNlIGlmKFwiY2F0bXVsbHJvbVwiPT09dGhpcy50eXBlKXt2YXIgZz12b2lkIDAhPT10aGlzLnRlbnNpb24/dGhpcy50ZW5zaW9uOi41O3dzLmluaXRDYXRtdWxsUm9tKHMueCx1LngsbC54LGMueCxnKSxFcy5pbml0Q2F0bXVsbFJvbShzLnksdS55LGwueSxjLnksZyksU3MuaW5pdENhdG11bGxSb20ocy56LHUueixsLnosYy56LGcpfXJldHVybiBuZXcgbih3cy5jYWxjKGEpLEVzLmNhbGMoYSksU3MuY2FsYyhhKSl9LGhuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHVuLnByb3RvdHlwZSksaG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWhuLGhuLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0KXtpZigxPT09dClyZXR1cm4gdGhpcy52Mi5jbG9uZSgpO3ZhciBlPW5ldyBuO3JldHVybiBlLnN1YlZlY3RvcnModGhpcy52Mix0aGlzLnYxKSxlLm11bHRpcGx5U2NhbGFyKHQpLGUuYWRkKHRoaXMudjEpLGV9LGZuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHVuLnByb3RvdHlwZSksZm4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWZuLGZuLnByb3RvdHlwZS5pc0xpbmVDdXJ2ZT0hMCxmbi5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7aWYoMT09PXQpcmV0dXJuIHRoaXMudjIuY2xvbmUoKTt2YXIgZT10aGlzLnYyLmNsb25lKCkuc3ViKHRoaXMudjEpO3JldHVybiBlLm11bHRpcGx5U2NhbGFyKHQpLmFkZCh0aGlzLnYxKSxlfSxmbi5wcm90b3R5cGUuZ2V0UG9pbnRBdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRQb2ludCh0KX0sZm4ucHJvdG90eXBlLmdldFRhbmdlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52Mi5jbG9uZSgpLnN1Yih0aGlzLnYxKTtyZXR1cm4gZS5ub3JtYWxpemUoKX0sZG4ucHJvdG90eXBlPWEoT2JqZWN0LmNyZWF0ZSh1bi5wcm90b3R5cGUpLHtjb25zdHJ1Y3RvcjpkbixhZGQ6ZnVuY3Rpb24odCl7dGhpcy5jdXJ2ZXMucHVzaCh0KX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jdXJ2ZXNbMF0uZ2V0UG9pbnQoMCksZT10aGlzLmN1cnZlc1t0aGlzLmN1cnZlcy5sZW5ndGgtMV0uZ2V0UG9pbnQoMSk7dC5lcXVhbHMoZSl8fHRoaXMuY3VydmVzLnB1c2gobmV3IGZuKGUsdCkpfSxnZXRQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCp0aGlzLmdldExlbmd0aCgpLG49dGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKSxpPTA7aTxuLmxlbmd0aDspe2lmKG5baV0+PWUpe3ZhciByPW5baV0tZSxvPXRoaXMuY3VydmVzW2ldLGE9by5nZXRMZW5ndGgoKSxzPTA9PT1hPzA6MS1yL2E7cmV0dXJuIG8uZ2V0UG9pbnRBdChzKX1pKyt9cmV0dXJuIG51bGx9LGdldExlbmd0aDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Q3VydmVMZW5ndGhzKCk7cmV0dXJuIHRbdC5sZW5ndGgtMV19LHVwZGF0ZUFyY0xlbmd0aHM6ZnVuY3Rpb24oKXt0aGlzLm5lZWRzVXBkYXRlPSEwLHRoaXMuY2FjaGVMZW5ndGhzPW51bGwsdGhpcy5nZXRDdXJ2ZUxlbmd0aHMoKX0sZ2V0Q3VydmVMZW5ndGhzOmZ1bmN0aW9uKCl7aWYodGhpcy5jYWNoZUxlbmd0aHMmJnRoaXMuY2FjaGVMZW5ndGhzLmxlbmd0aD09PXRoaXMuY3VydmVzLmxlbmd0aClyZXR1cm4gdGhpcy5jYWNoZUxlbmd0aHM7Zm9yKHZhciB0PVtdLGU9MCxuPTAsaT10aGlzLmN1cnZlcy5sZW5ndGg7bjxpO24rKyllKz10aGlzLmN1cnZlc1tuXS5nZXRMZW5ndGgoKSx0LnB1c2goZSk7cmV0dXJuIHRoaXMuY2FjaGVMZW5ndGhzPXQsdH0sZ2V0U3BhY2VkUG9pbnRzOmZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PTQwKTtmb3IodmFyIGU9W10sbj0wO248PXQ7bisrKWUucHVzaCh0aGlzLmdldFBvaW50KG4vdCkpO3JldHVybiB0aGlzLmF1dG9DbG9zZSYmZS5wdXNoKGVbMF0pLGV9LGdldFBvaW50czpmdW5jdGlvbih0KXt0PXR8fDEyO2Zvcih2YXIgZSxuPVtdLGk9MCxyPXRoaXMuY3VydmVzO2k8ci5sZW5ndGg7aSsrKWZvcih2YXIgbz1yW2ldLGE9byYmby5pc0VsbGlwc2VDdXJ2ZT8yKnQ6byYmby5pc0xpbmVDdXJ2ZT8xOm8mJm8uaXNTcGxpbmVDdXJ2ZT90Km8ucG9pbnRzLmxlbmd0aDp0LHM9by5nZXRQb2ludHMoYSksdT0wO3U8cy5sZW5ndGg7dSsrKXt2YXIgbD1zW3VdO2UmJmUuZXF1YWxzKGwpfHwobi5wdXNoKGwpLGU9bCl9cmV0dXJuIHRoaXMuYXV0b0Nsb3NlJiZuLmxlbmd0aD4xJiYhbltuLmxlbmd0aC0xXS5lcXVhbHMoblswXSkmJm4ucHVzaChuWzBdKSxufSxjcmVhdGVQb2ludHNHZW9tZXRyeTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFBvaW50cyh0KTtyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeShlKX0sY3JlYXRlU3BhY2VkUG9pbnRzR2VvbWV0cnk6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTcGFjZWRQb2ludHModCk7cmV0dXJuIHRoaXMuY3JlYXRlR2VvbWV0cnkoZSl9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgU3QsaT0wLHI9dC5sZW5ndGg7aTxyO2krKyl7dmFyIG89dFtpXTtlLnZlcnRpY2VzLnB1c2gobmV3IG4oby54LG8ueSxvLnp8fDApKX1yZXR1cm4gZX19KSxwbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1bi5wcm90b3R5cGUpLHBuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wbixwbi5wcm90b3R5cGUuaXNFbGxpcHNlQ3VydmU9ITAscG4ucHJvdG90eXBlLmdldFBvaW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0yKk1hdGguUEksbj10aGlzLmFFbmRBbmdsZS10aGlzLmFTdGFydEFuZ2xlLGk9TWF0aC5hYnMobik8TnVtYmVyLkVQU0lMT047bjwwOyluKz1lO2Zvcig7bj5lOyluLT1lO248TnVtYmVyLkVQU0lMT04mJihuPWk/MDplKSx0aGlzLmFDbG9ja3dpc2UhPT0hMHx8aXx8KG49PT1lP249LWU6bi09ZSk7dmFyIHI9dGhpcy5hU3RhcnRBbmdsZSt0Km4sYT10aGlzLmFYK3RoaXMueFJhZGl1cypNYXRoLmNvcyhyKSxzPXRoaXMuYVkrdGhpcy55UmFkaXVzKk1hdGguc2luKHIpO2lmKDAhPT10aGlzLmFSb3RhdGlvbil7dmFyIHU9TWF0aC5jb3ModGhpcy5hUm90YXRpb24pLGw9TWF0aC5zaW4odGhpcy5hUm90YXRpb24pLGM9YS10aGlzLmFYLGg9cy10aGlzLmFZO2E9Yyp1LWgqbCt0aGlzLmFYLHM9YypsK2gqdSt0aGlzLmFZfXJldHVybiBuZXcgbyhhLHMpfSxNbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1bi5wcm90b3R5cGUpLE1uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1NbixNbi5wcm90b3R5cGUuaXNTcGxpbmVDdXJ2ZT0hMCxNbi5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wb2ludHMsbj0oZS5sZW5ndGgtMSkqdCxpPU1hdGguZmxvb3Iobikscj1uLWksYT1lWzA9PT1pP2k6aS0xXSxzPWVbaV0sdT1lW2k+ZS5sZW5ndGgtMj9lLmxlbmd0aC0xOmkrMV0sbD1lW2k+ZS5sZW5ndGgtMz9lLmxlbmd0aC0xOmkrMl07cmV0dXJuIG5ldyBvKGduKHIsYS54LHMueCx1LngsbC54KSxnbihyLGEueSxzLnksdS55LGwueSkpfSxDbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1bi5wcm90b3R5cGUpLENuLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1DbixDbi5wcm90b3R5cGUuZ2V0UG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52MCxuPXRoaXMudjEsaT10aGlzLnYyLHI9dGhpcy52MztyZXR1cm4gbmV3IG8oU24odCxlLngsbi54LGkueCxyLngpLFNuKHQsZS55LG4ueSxpLnksci55KSl9LEluLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHVuLnByb3RvdHlwZSksSW4ucHJvdG90eXBlLmNvbnN0cnVjdG9yPUluLEluLnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnYwLG49dGhpcy52MSxpPXRoaXMudjI7cmV0dXJuIG5ldyBvKF9uKHQsZS54LG4ueCxpLngpLF9uKHQsZS55LG4ueSxpLnkpKX07dmFyIE1zPWEoT2JqZWN0LmNyZWF0ZShkbi5wcm90b3R5cGUpLHtmcm9tUG9pbnRzOmZ1bmN0aW9uKHQpe3RoaXMubW92ZVRvKHRbMF0ueCx0WzBdLnkpO2Zvcih2YXIgZT0xLG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmxpbmVUbyh0W2VdLngsdFtlXS55KX0sbW92ZVRvOmZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50UG9pbnQuc2V0KHQsZSl9LGxpbmVUbzpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBmbih0aGlzLmN1cnJlbnRQb2ludC5jbG9uZSgpLG5ldyBvKHQsZSkpO3RoaXMuY3VydmVzLnB1c2gobiksdGhpcy5jdXJyZW50UG9pbnQuc2V0KHQsZSl9LHF1YWRyYXRpY0N1cnZlVG86ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bmV3IEluKHRoaXMuY3VycmVudFBvaW50LmNsb25lKCksbmV3IG8odCxlKSxuZXcgbyhuLGkpKTt0aGlzLmN1cnZlcy5wdXNoKHIpLHRoaXMuY3VycmVudFBvaW50LnNldChuLGkpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKHQsZSxuLGkscixhKXt2YXIgcz1uZXcgQ24odGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKSxuZXcgbyh0LGUpLG5ldyBvKG4saSksbmV3IG8ocixhKSk7dGhpcy5jdXJ2ZXMucHVzaChzKSx0aGlzLmN1cnJlbnRQb2ludC5zZXQocixhKX0sc3BsaW5lVGhydTpmdW5jdGlvbih0KXt2YXIgZT1bdGhpcy5jdXJyZW50UG9pbnQuY2xvbmUoKV0uY29uY2F0KHQpLG49bmV3IE1uKGUpO3RoaXMuY3VydmVzLnB1c2gobiksdGhpcy5jdXJyZW50UG9pbnQuY29weSh0W3QubGVuZ3RoLTFdKX0sYXJjOmZ1bmN0aW9uKHQsZSxuLGkscixvKXt2YXIgYT10aGlzLmN1cnJlbnRQb2ludC54LHM9dGhpcy5jdXJyZW50UG9pbnQueTt0aGlzLmFic2FyYyh0K2EsZStzLG4saSxyLG8pfSxhYnNhcmM6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3RoaXMuYWJzZWxsaXBzZSh0LGUsbixuLGkscixvKX0sZWxsaXBzZTpmdW5jdGlvbih0LGUsbixpLHIsbyxhLHMpe3ZhciB1PXRoaXMuY3VycmVudFBvaW50LngsbD10aGlzLmN1cnJlbnRQb2ludC55O3RoaXMuYWJzZWxsaXBzZSh0K3UsZStsLG4saSxyLG8sYSxzKX0sYWJzZWxsaXBzZTpmdW5jdGlvbih0LGUsbixpLHIsbyxhLHMpe3ZhciB1PW5ldyBwbih0LGUsbixpLHIsbyxhLHMpO2lmKHRoaXMuY3VydmVzLmxlbmd0aD4wKXt2YXIgbD11LmdldFBvaW50KDApO2wuZXF1YWxzKHRoaXMuY3VycmVudFBvaW50KXx8dGhpcy5saW5lVG8obC54LGwueSl9dGhpcy5jdXJ2ZXMucHVzaCh1KTt2YXIgYz11LmdldFBvaW50KDEpO3RoaXMuY3VycmVudFBvaW50LmNvcHkoYyl9fSk7T24ucHJvdG90eXBlPU1zLE1zLmNvbnN0cnVjdG9yPU9uLFRuLnByb3RvdHlwZT1hKE9iamVjdC5jcmVhdGUoTXMpLHtjb25zdHJ1Y3RvcjpUbixnZXRQb2ludHNIb2xlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dGhpcy5ob2xlcy5sZW5ndGg7bjxpO24rKyllW25dPXRoaXMuaG9sZXNbbl0uZ2V0UG9pbnRzKHQpO3JldHVybiBlfSxleHRyYWN0QWxsUG9pbnRzOmZ1bmN0aW9uKHQpe3JldHVybntzaGFwZTp0aGlzLmdldFBvaW50cyh0KSxob2xlczp0aGlzLmdldFBvaW50c0hvbGVzKHQpfX0sZXh0cmFjdFBvaW50czpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leHRyYWN0QWxsUG9pbnRzKHQpfX0pLGEoUG4ucHJvdG90eXBlLHttb3ZlVG86ZnVuY3Rpb24odCxlKXt0aGlzLmN1cnJlbnRQYXRoPW5ldyBPbix0aGlzLnN1YlBhdGhzLnB1c2godGhpcy5jdXJyZW50UGF0aCksdGhpcy5jdXJyZW50UGF0aC5tb3ZlVG8odCxlKX0sbGluZVRvOmZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50UGF0aC5saW5lVG8odCxlKX0scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbih0LGUsbixpKXt0aGlzLmN1cnJlbnRQYXRoLnF1YWRyYXRpY0N1cnZlVG8odCxlLG4saSl9LGJlemllckN1cnZlVG86ZnVuY3Rpb24odCxlLG4saSxyLG8pe3RoaXMuY3VycmVudFBhdGguYmV6aWVyQ3VydmVUbyh0LGUsbixpLHIsbyl9LHNwbGluZVRocnU6ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50UGF0aC5zcGxpbmVUaHJ1KHQpfSx0b1NoYXBlczpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQubGVuZ3RoO248aTtuKyspe3ZhciByPXRbbl0sbz1uZXcgVG47by5jdXJ2ZXM9ci5jdXJ2ZXMsZS5wdXNoKG8pfXJldHVybiBlfWZ1bmN0aW9uIGkodCxlKXtmb3IodmFyIG49ZS5sZW5ndGgsaT0hMSxyPW4tMSxvPTA7bzxuO3I9bysrKXt2YXIgYT1lW3JdLHM9ZVtvXSx1PXMueC1hLngsbD1zLnktYS55O2lmKE1hdGguYWJzKGwpPk51bWJlci5FUFNJTE9OKXtpZihsPDAmJihhPWVbb10sdT0tdSxzPWVbcl0sbD0tbCksdC55PGEueXx8dC55PnMueSljb250aW51ZTtpZih0Lnk9PT1hLnkpe2lmKHQueD09PWEueClyZXR1cm4hMH1lbHNle3ZhciBjPWwqKHQueC1hLngpLXUqKHQueS1hLnkpO2lmKDA9PT1jKXJldHVybiEwO2lmKGM8MCljb250aW51ZTtpPSFpfX1lbHNle2lmKHQueSE9PWEueSljb250aW51ZTtpZihzLng8PXQueCYmdC54PD1hLnh8fGEueDw9dC54JiZ0Lng8PXMueClyZXR1cm4hMH19cmV0dXJuIGl9dmFyIHI9Z3MuaXNDbG9ja1dpc2Usbz10aGlzLnN1YlBhdGhzO2lmKDA9PT1vLmxlbmd0aClyZXR1cm5bXTtpZihlPT09ITApcmV0dXJuIG4obyk7dmFyIGEscyx1LGw9W107aWYoMT09PW8ubGVuZ3RoKXJldHVybiBzPW9bMF0sdT1uZXcgVG4sdS5jdXJ2ZXM9cy5jdXJ2ZXMsbC5wdXNoKHUpLGw7dmFyIGM9IXIob1swXS5nZXRQb2ludHMoKSk7Yz10PyFjOmM7dmFyIGgsZj1bXSxkPVtdLHA9W10sZz0wO2RbZ109dm9pZCAwLHBbZ109W107Zm9yKHZhciB2PTAsbT1vLmxlbmd0aDt2PG07disrKXM9b1t2XSxoPXMuZ2V0UG9pbnRzKCksYT1yKGgpLGE9dD8hYTphLGE/KCFjJiZkW2ddJiZnKyssZFtnXT17czpuZXcgVG4scDpofSxkW2ddLnMuY3VydmVzPXMuY3VydmVzLGMmJmcrKyxwW2ddPVtdKTpwW2ddLnB1c2goe2g6cyxwOmhbMF19KTtpZighZFswXSlyZXR1cm4gbihvKTtpZihkLmxlbmd0aD4xKXtmb3IodmFyIHk9ITEsXz1bXSxiPTAseD1kLmxlbmd0aDtiPHg7YisrKWZbYl09W107Zm9yKHZhciBiPTAseD1kLmxlbmd0aDtiPHg7YisrKWZvcih2YXIgdz1wW2JdLEU9MDtFPHcubGVuZ3RoO0UrKyl7Zm9yKHZhciBTPXdbRV0sTT0hMCxDPTA7QzxkLmxlbmd0aDtDKyspaShTLnAsZFtDXS5wKSYmKGIhPT1DJiZfLnB1c2goe2Zyb21zOmIsdG9zOkMsaG9sZTpFfSksTT8oTT0hMSxmW0NdLnB1c2goUykpOnk9ITApO00mJmZbYl0ucHVzaChTKX1fLmxlbmd0aD4wJiYoeXx8KHA9ZikpfWZvcih2YXIgSSx2PTAsTz1kLmxlbmd0aDt2PE87disrKXt1PWRbdl0ucyxsLnB1c2godSksST1wW3ZdO2Zvcih2YXIgVD0wLFA9SS5sZW5ndGg7VDxQO1QrKyl1LmhvbGVzLnB1c2goSVtUXS5oKX1yZXR1cm4gbH19KTt2YXIgQ3M9e2NyZWF0ZU11bHRpTWF0ZXJpYWxPYmplY3Q6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IHllLGk9MCxyPWUubGVuZ3RoO2k8cjtpKyspbi5hZGQobmV3IEN0KHQsZVtpXSkpO3JldHVybiBufSxkZXRhY2g6ZnVuY3Rpb24odCxlLG4pe3QuYXBwbHlNYXRyaXgoZS5tYXRyaXhXb3JsZCksZS5yZW1vdmUodCksbi5hZGQodCl9LGF0dGFjaDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bmV3IGk7ci5nZXRJbnZlcnNlKG4ubWF0cml4V29ybGQpLHQuYXBwbHlNYXRyaXgociksZS5yZW1vdmUodCksbi5hZGQodCl9fTt0LldlYkdMUmVuZGVyZXI9bGUsdC5TaGFkZXJDaHVuaz1scyx0LlNjZW5lPWNlLHQuU3ByaXRlPWZlLHQuTWVzaD1DdCx0LkxpbmVTZWdtZW50cz1nZSx0LkxpbmU9cGUsdC5Qb2ludHM9bWUsdC5Hcm91cD15ZSx0LlRleHR1cmU9dSx0LlRleHR1cmVMb2FkZXI9UGUsdC5KU09OTG9hZGVyPVdlLHQuSW1hZ2VMb2FkZXI9VGUsdC5GaWxlTG9hZGVyPUFlLHQuTG9hZGVyPU5lLHQuQ2FjaGU9bXMsdC5IZW1pc3BoZXJlTGlnaHQ9SmUsdC5EaXJlY3Rpb25hbExpZ2h0U2hhZG93PVFlLHQuRGlyZWN0aW9uYWxMaWdodD0kZSx0LkxpZ2h0PVplLHQuUGVyc3BlY3RpdmVDYW1lcmE9UHQsdC5DYW1lcmE9VHQsdC5Vbmlmb3JtPXRuLHQuQnVmZmVyR2VvbWV0cnk9TXQsdC5HZW9tZXRyeUlkQ291bnQ9RXQsdC5HZW9tZXRyeT1TdCx0LkZhY2UzPWx0LHQuT2JqZWN0M0Q9YXQsdC5SYXljYXN0ZXI9ZW4sdC5FdmVudERpc3BhdGNoZXI9cix0LkNsb2NrPW9uLHQuSW50ZXJwb2xhbnQ9a2UsdC5UcmlhbmdsZT11dCx0Lk1hdGg9V3IsdC5TcGhlcmljYWw9YW4sdC5QbGFuZT10dCx0LlJheT1pdCx0Lk1hdHJpeDQ9aSx0Lk1hdHJpeDM9JCx0LkJveDM9Syx0LkJveDI9c24sdC5MaW5lMz1zdCx0LkV1bGVyPXJ0LHQuVmVjdG9yND1ILHQuVmVjdG9yMz1uLHQuVmVjdG9yMj1vLHQuUXVhdGVybmlvbj1lLHQuQ29sb3I9cSx0LkNhdG11bGxSb21DdXJ2ZTM9Y24sdC5MaW5lQ3VydmUzPWhuLHQuTGluZUN1cnZlPWZuLHQuU2hhcGU9VG4sdC5QYXRoPU9uLHQuU2hhcGVQYXRoPVBuLHQuQ3VydmVQYXRoPWRuLHQuQ3VydmU9dW4sdC5TaGFwZVV0aWxzPWdzLHQuU2NlbmVVdGlscz1Dcyx0LlR1YmVHZW9tZXRyeT1fZSx0LlR1YmVCdWZmZXJHZW9tZXRyeT1iZSx0LlNwaGVyZUdlb21ldHJ5PXhlLHQuU3BoZXJlQnVmZmVyR2VvbWV0cnk9d2UsdC5TaGFwZUdlb21ldHJ5PUVlLHQuU2hhcGVCdWZmZXJHZW9tZXRyeT1TZSx0LkV4dHJ1ZGVHZW9tZXRyeT1NZSx0LkV4dHJ1ZGVCdWZmZXJHZW9tZXRyeT1DZSx0LlNwcml0ZU1hdGVyaWFsPWhlLHQuU2hhZGVyTWF0ZXJpYWw9Wix0Lk1lc2hQaG9uZ01hdGVyaWFsPUllLHQuTWVzaEJhc2ljTWF0ZXJpYWw9Y3QsdC5MaW5lQmFzaWNNYXRlcmlhbD1kZSx0Lk1hdGVyaWFsPVcsdC5GbG9hdDY0QnVmZmVyQXR0cmlidXRlPWJ0LHQuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZT1fdCx0LlVpbnQzMkJ1ZmZlckF0dHJpYnV0ZT15dCx0LkludDMyQnVmZmVyQXR0cmlidXRlPW10LHQuVWludDE2QnVmZmVyQXR0cmlidXRlPXZ0LHQuSW50MTZCdWZmZXJBdHRyaWJ1dGU9Z3QsdC5VaW50OENsYW1wZWRCdWZmZXJBdHRyaWJ1dGU9cHQsdC5VaW50OEJ1ZmZlckF0dHJpYnV0ZT1kdCx0LkludDhCdWZmZXJBdHRyaWJ1dGU9ZnQsdC5CdWZmZXJBdHRyaWJ1dGU9aHQsdC5SRVZJU0lPTj1Bbix0Lk1PVVNFPUxuLHQuQ3VsbEZhY2VOb25lPU5uLHQuQ3VsbEZhY2VCYWNrPWtuLHQuQ3VsbEZhY2VGcm9udD1Sbix0LkN1bGxGYWNlRnJvbnRCYWNrPURuLHQuRnJvbnRGYWNlRGlyZWN0aW9uQ1c9Rm4sdC5Gcm9udEZhY2VEaXJlY3Rpb25DQ1c9Qm4sdC5CYXNpY1NoYWRvd01hcD1qbix0LlBDRlNoYWRvd01hcD1Vbix0LlBDRlNvZnRTaGFkb3dNYXA9em4sdC5Gcm9udFNpZGU9R24sdC5CYWNrU2lkZT1Wbix0LkRvdWJsZVNpZGU9WG4sdC5GbGF0U2hhZGluZz1Ibix0LlNtb290aFNoYWRpbmc9cW4sdC5Ob0NvbG9ycz1Zbix0LkZhY2VDb2xvcnM9V24sdC5WZXJ0ZXhDb2xvcnM9Wm4sdC5Ob0JsZW5kaW5nPUpuLHQuTm9ybWFsQmxlbmRpbmc9S24sdC5BZGRpdGl2ZUJsZW5kaW5nPVFuLHQuU3VidHJhY3RpdmVCbGVuZGluZz0kbix0Lk11bHRpcGx5QmxlbmRpbmc9dGksdC5DdXN0b21CbGVuZGluZz1laSx0LkFkZEVxdWF0aW9uPW5pLHQuU3VidHJhY3RFcXVhdGlvbj1paSx0LlJldmVyc2VTdWJ0cmFjdEVxdWF0aW9uPXJpLHQuTWluRXF1YXRpb249b2ksdC5NYXhFcXVhdGlvbj1haSx0Llplcm9GYWN0b3I9c2ksdC5PbmVGYWN0b3I9dWksdC5TcmNDb2xvckZhY3Rvcj1saSx0Lk9uZU1pbnVzU3JjQ29sb3JGYWN0b3I9Y2ksdC5TcmNBbHBoYUZhY3Rvcj1oaSx0Lk9uZU1pbnVzU3JjQWxwaGFGYWN0b3I9ZmksdC5Ec3RBbHBoYUZhY3Rvcj1kaSx0Lk9uZU1pbnVzRHN0QWxwaGFGYWN0b3I9cGksdC5Ec3RDb2xvckZhY3Rvcj1naSx0Lk9uZU1pbnVzRHN0Q29sb3JGYWN0b3I9dmksdC5TcmNBbHBoYVNhdHVyYXRlRmFjdG9yPW1pLHQuTmV2ZXJEZXB0aD15aSx0LkFsd2F5c0RlcHRoPV9pLHQuTGVzc0RlcHRoPWJpLHQuTGVzc0VxdWFsRGVwdGg9eGksdC5FcXVhbERlcHRoPXdpLHQuR3JlYXRlckVxdWFsRGVwdGg9RWksdC5HcmVhdGVyRGVwdGg9U2ksdC5Ob3RFcXVhbERlcHRoPU1pLHQuTXVsdGlwbHlPcGVyYXRpb249Q2ksdC5NaXhPcGVyYXRpb249SWksdC5BZGRPcGVyYXRpb249T2ksdC5Ob1RvbmVNYXBwaW5nPVRpLHQuTGluZWFyVG9uZU1hcHBpbmc9UGksdC5SZWluaGFyZFRvbmVNYXBwaW5nPUFpLHQuVW5jaGFydGVkMlRvbmVNYXBwaW5nPUxpLFxudC5DaW5lb25Ub25lTWFwcGluZz1OaSx0LlVWTWFwcGluZz1raSx0LkN1YmVSZWZsZWN0aW9uTWFwcGluZz1SaSx0LkN1YmVSZWZyYWN0aW9uTWFwcGluZz1EaSx0LkVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nPUZpLHQuRXF1aXJlY3Rhbmd1bGFyUmVmcmFjdGlvbk1hcHBpbmc9QmksdC5TcGhlcmljYWxSZWZsZWN0aW9uTWFwcGluZz1qaSx0LkN1YmVVVlJlZmxlY3Rpb25NYXBwaW5nPVVpLHQuQ3ViZVVWUmVmcmFjdGlvbk1hcHBpbmc9emksdC5SZXBlYXRXcmFwcGluZz1HaSx0LkNsYW1wVG9FZGdlV3JhcHBpbmc9VmksdC5NaXJyb3JlZFJlcGVhdFdyYXBwaW5nPVhpLHQuTmVhcmVzdEZpbHRlcj1IaSx0Lk5lYXJlc3RNaXBNYXBOZWFyZXN0RmlsdGVyPXFpLHQuTmVhcmVzdE1pcE1hcExpbmVhckZpbHRlcj1ZaSx0LkxpbmVhckZpbHRlcj1XaSx0LkxpbmVhck1pcE1hcE5lYXJlc3RGaWx0ZXI9WmksdC5MaW5lYXJNaXBNYXBMaW5lYXJGaWx0ZXI9SmksdC5VbnNpZ25lZEJ5dGVUeXBlPUtpLHQuQnl0ZVR5cGU9UWksdC5TaG9ydFR5cGU9JGksdC5VbnNpZ25lZFNob3J0VHlwZT10cix0LkludFR5cGU9ZXIsdC5VbnNpZ25lZEludFR5cGU9bnIsdC5GbG9hdFR5cGU9aXIsdC5IYWxmRmxvYXRUeXBlPXJyLHQuVW5zaWduZWRTaG9ydDQ0NDRUeXBlPW9yLHQuVW5zaWduZWRTaG9ydDU1NTFUeXBlPWFyLHQuVW5zaWduZWRTaG9ydDU2NVR5cGU9c3IsdC5VbnNpZ25lZEludDI0OFR5cGU9dXIsdC5BbHBoYUZvcm1hdD1scix0LlJHQkZvcm1hdD1jcix0LlJHQkFGb3JtYXQ9aHIsdC5MdW1pbmFuY2VGb3JtYXQ9ZnIsdC5MdW1pbmFuY2VBbHBoYUZvcm1hdD1kcix0LlJHQkVGb3JtYXQ9cHIsdC5EZXB0aEZvcm1hdD1ncix0LkRlcHRoU3RlbmNpbEZvcm1hdD12cix0LlJHQl9TM1RDX0RYVDFfRm9ybWF0PW1yLHQuUkdCQV9TM1RDX0RYVDFfRm9ybWF0PXlyLHQuUkdCQV9TM1RDX0RYVDNfRm9ybWF0PV9yLHQuUkdCQV9TM1RDX0RYVDVfRm9ybWF0PWJyLHQuUkdCX1BWUlRDXzRCUFBWMV9Gb3JtYXQ9eHIsdC5SR0JfUFZSVENfMkJQUFYxX0Zvcm1hdD13cix0LlJHQkFfUFZSVENfNEJQUFYxX0Zvcm1hdD1Fcix0LlJHQkFfUFZSVENfMkJQUFYxX0Zvcm1hdD1Tcix0LlJHQl9FVEMxX0Zvcm1hdD1Ncix0Lkxvb3BPbmNlPUNyLHQuTG9vcFJlcGVhdD1Jcix0Lkxvb3BQaW5nUG9uZz1Pcix0LkludGVycG9sYXRlRGlzY3JldGU9VHIsdC5JbnRlcnBvbGF0ZUxpbmVhcj1Qcix0LkludGVycG9sYXRlU21vb3RoPUFyLHQuWmVyb0N1cnZhdHVyZUVuZGluZz1Mcix0Llplcm9TbG9wZUVuZGluZz1Ocix0LldyYXBBcm91bmRFbmRpbmc9a3IsdC5UcmlhbmdsZXNEcmF3TW9kZT1Scix0LlRyaWFuZ2xlU3RyaXBEcmF3TW9kZT1Ecix0LlRyaWFuZ2xlRmFuRHJhd01vZGU9RnIsdC5MaW5lYXJFbmNvZGluZz1Ccix0LnNSR0JFbmNvZGluZz1qcix0LkdhbW1hRW5jb2Rpbmc9VXI7dC5SR0JFRW5jb2Rpbmc9enI7dC5Mb2dMdXZFbmNvZGluZz1Hcix0LlJHQk03RW5jb2Rpbmc9VnIsdC5SR0JNMTZFbmNvZGluZz1Ycix0LlJHQkRFbmNvZGluZz1Icix0LkJhc2ljRGVwdGhQYWNraW5nPXFyLHQuUkdCQURlcHRoUGFja2luZz1ZcixPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LGk9ZS5pc1ByZXNlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJm51bGwhPT10fSxyPWUuaXNCbGFuaz1mdW5jdGlvbih0KXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgdHx8bnVsbD09PXR9LG89KGUuaXNCb29sZWFuPWZ1bmN0aW9uKHQpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgdH0sZS5pc051bWJlcj1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH0sZS5pc1N0cmluZz1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdH0sZS5pc0FycmF5PWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KX1jYXRjaChlKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9fSxlLmlzRGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIERhdGUmJiFpc05hTih0LnZhbHVlT2YoKSl9LGUuaXNGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fSk7ZS5pc0pzT2JqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmKG8odCl8fFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/XCJ1bmRlZmluZWRcIjpuKHQpKSl9LGUuaXNQcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBpKHQpJiZvKHQudGhlbil9LGUuaXNFbXB0eT1mdW5jdGlvbih0KXtpZihyKHQpKXJldHVybiEwO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4hMDtmb3IodmFyIGUgaW4gdClpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSlyZXR1cm4hMTtyZXR1cm4hMH19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8sYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fTsvKipcblx0ICogSlNUUy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iam9ybmhhcnJ0ZWxsL2pzdHNcblx0ICogaHR0cHM6Ly9naXRodWIuY29tL2Jqb3JuaGFycnRlbGwvanN0cy9ibG9iL21hc3Rlci9MSUNFTlNFX0VETHYxLnR4dFxuXHQgKiBodHRwczovL2dpdGh1Yi5jb20vYmpvcm5oYXJydGVsbC9qc3RzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VfRVBMdjEudHh0XG5cdCAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iam9ybmhhcnJ0ZWxsL2pzdHMvYmxvYi9tYXN0ZXIvTElDRU5TRV9MSUNFTlNFX0VTNl9DT0xMRUNUSU9OUy50eHRcblx0ICogQGxpY2Vuc2Vcblx0ICovXG4hZnVuY3Rpb24obixzKXtcIm9iamVjdFwiPT1hKGUpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgdD9zKGUpOihyPVtlXSxpPXMsbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkoZSxyKTppLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSkpfSh2b2lkIDAsZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSgpe31mdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIGkoKXt9ZnVuY3Rpb24gcigpe31mdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiB1KHQpe3RoaXMubmFtZT1cIlJ1bnRpbWVFeGNlcHRpb25cIix0aGlzLm1lc3NhZ2U9dCx0aGlzLnN0YWNrPShuZXcgRXJyb3IpLnN0YWNrLEVycm9yLmNhbGwodGhpcyx0KX1mdW5jdGlvbiBsKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpdS5jYWxsKHRoaXMpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt1LmNhbGwodGhpcyx0KX19ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBoKCl7aWYodGhpcy54PW51bGwsdGhpcy55PW51bGwsdGhpcy56PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpaC5jYWxsKHRoaXMsMCwwKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07aC5jYWxsKHRoaXMsdC54LHQueSx0LnopfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtoLmNhbGwodGhpcyxlLG4saC5OVUxMX09SRElOQVRFKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07dGhpcy54PWksdGhpcy55PXIsdGhpcy56PW99fWZ1bmN0aW9uIGYoKXtpZih0aGlzLmRpbWVuc2lvbnNUb1Rlc3Q9MiwwPT09YXJndW1lbnRzLmxlbmd0aClmLmNhbGwodGhpcywyKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07aWYoMiE9PXQmJjMhPT10KXRocm93IG5ldyBuKFwib25seSAyIG9yIDMgZGltZW5zaW9ucyBtYXkgYmUgc3BlY2lmaWVkXCIpO3RoaXMuZGltZW5zaW9uc1RvVGVzdD10fX1mdW5jdGlvbiBkKCl7fWZ1bmN0aW9uIHAoKXt9ZnVuY3Rpb24gZyh0KXt0aGlzLm1lc3NhZ2U9dHx8XCJcIn1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIG0odCl7dGhpcy5tZXNzYWdlPXR8fFwiXCJ9ZnVuY3Rpb24geSh0KXt0aGlzLm1lc3NhZ2U9dHx8XCJcIn1mdW5jdGlvbiBfKCl7dGhpcy5hcnJheV89W10sYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBwJiZ0aGlzLmFkZEFsbChhcmd1bWVudHNbMF0pfWZ1bmN0aW9uIGIoKXtpZihfLmFwcGx5KHRoaXMpLDA9PT1hcmd1bWVudHMubGVuZ3RoKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5lbnN1cmVDYXBhY2l0eSh0Lmxlbmd0aCksdGhpcy5hZGQodCwhMCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuZW5zdXJlQ2FwYWNpdHkoZS5sZW5ndGgpLHRoaXMuYWRkKGUsbil9fWZ1bmN0aW9uIHgoKXtpZih0aGlzLm1pbng9bnVsbCx0aGlzLm1heHg9bnVsbCx0aGlzLm1pbnk9bnVsbCx0aGlzLm1heHk9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aCl0aGlzLmluaXQoKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluaXQodC54LHQueCx0LnksdC55KX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgeCl7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuaW5pdChlKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3RoaXMuaW5pdChuLngsaS54LG4ueSxpLnkpfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXSxzPWFyZ3VtZW50c1szXTt0aGlzLmluaXQocixvLGEscyl9fWZ1bmN0aW9uIHcoKXt9ZnVuY3Rpb24gRSgpe3cuY2FsbCh0aGlzLFwiUHJvamVjdGl2ZSBwb2ludCBub3QgcmVwcmVzZW50YWJsZSBvbiB0aGUgQ2FydGVzaWFuIHBsYW5lLlwiKX1mdW5jdGlvbiBTKCl7fWZ1bmN0aW9uIE0oKXt9ZnVuY3Rpb24gQyh0KXt0aGlzLnN0cj10fWZ1bmN0aW9uIEkodCl7dGhpcy52YWx1ZT10fWZ1bmN0aW9uIE8oKXt9ZnVuY3Rpb24gVCgpe2lmKHRoaXMuaGk9MCx0aGlzLmxvPTAsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5pbml0KDApO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluaXQodCl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFQpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmluaXQoZSl9ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgbj1hcmd1bWVudHNbMF07VC5jYWxsKHRoaXMsVC5wYXJzZShuKSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTt0aGlzLmluaXQoaSxyKX19ZnVuY3Rpb24gUCgpe31mdW5jdGlvbiBBKCl7fWZ1bmN0aW9uIEwoKXt9ZnVuY3Rpb24gTigpe2lmKHRoaXMueD1udWxsLHRoaXMueT1udWxsLHRoaXMudz1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMueD0wLHRoaXMueT0wLHRoaXMudz0xO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy53PTF9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMueD1lLHRoaXMueT1uLHRoaXMudz0xfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBOJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIE4pe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTt0aGlzLng9aS55KnIudy1yLnkqaS53LHRoaXMueT1yLngqaS53LWkueCpyLncsdGhpcy53PWkueCpyLnktci54KmkueX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBoKXt2YXIgbz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV07dGhpcy54PW8ueS1hLnksdGhpcy55PWEueC1vLngsdGhpcy53PW8ueCphLnktYS54Km8ueX19ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHM9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdLGw9YXJndW1lbnRzWzJdO3RoaXMueD1zLHRoaXMueT11LHRoaXMudz1sfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBjPWFyZ3VtZW50c1swXSxmPWFyZ3VtZW50c1sxXSxkPWFyZ3VtZW50c1syXSxwPWFyZ3VtZW50c1szXSxnPWMueS1mLnksdj1mLngtYy54LG09Yy54KmYueS1mLngqYy55LHk9ZC55LXAueSxfPXAueC1kLngsYj1kLngqcC55LXAueCpkLnk7dGhpcy54PXYqYi1fKm0sdGhpcy55PXkqbS1nKmIsdGhpcy53PWcqXy15KnZ9fWZ1bmN0aW9uIGsoKXt9ZnVuY3Rpb24gUigpe31mdW5jdGlvbiBEKCl7dGhpcy5lbnZlbG9wZT1udWxsLHRoaXMuZmFjdG9yeT1udWxsLHRoaXMuU1JJRD1udWxsLHRoaXMudXNlckRhdGE9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5mYWN0b3J5PXQsdGhpcy5TUklEPXQuZ2V0U1JJRCgpfWZ1bmN0aW9uIEYoKXt9ZnVuY3Rpb24gQigpe31mdW5jdGlvbiBqKCl7fWZ1bmN0aW9uIFUoKXt9ZnVuY3Rpb24geigpe31mdW5jdGlvbiBHKCl7fWZ1bmN0aW9uIFYoKXt9ZnVuY3Rpb24gWCgpe31mdW5jdGlvbiBIKCl7fWZ1bmN0aW9uIHEoKXt9ZnVuY3Rpb24gWSgpe31mdW5jdGlvbiBXKCl7fWZ1bmN0aW9uIFooKXt0aGlzLmFycmF5Xz1bXSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHAmJnRoaXMuYWRkQWxsKGFyZ3VtZW50c1swXSl9ZnVuY3Rpb24gSih0KXtyZXR1cm4gbnVsbD09dD9rcjp0LmNvbG9yfWZ1bmN0aW9uIEsodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDp0LnBhcmVudH1mdW5jdGlvbiBRKHQsZSl7bnVsbCE9PXQmJih0LmNvbG9yPWUpfWZ1bmN0aW9uICQodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmxlZnR9ZnVuY3Rpb24gdHQodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDp0LnJpZ2h0fWZ1bmN0aW9uIGV0KCl7dGhpcy5yb290Xz1udWxsLHRoaXMuc2l6ZV89MH1mdW5jdGlvbiBudCgpe31mdW5jdGlvbiBpdCgpe31mdW5jdGlvbiBydCgpe3RoaXMuYXJyYXlfPVtdLGFyZ3VtZW50c1swXWluc3RhbmNlb2YgcCYmdGhpcy5hZGRBbGwoYXJndW1lbnRzWzBdKX1mdW5jdGlvbiBvdCgpe31mdW5jdGlvbiBhdCgpe31mdW5jdGlvbiBzdCgpe31mdW5jdGlvbiB1dCgpe31mdW5jdGlvbiBsdCgpe3RoaXMuZ2VvbWV0cmllcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZihELmNhbGwodGhpcyxlKSxudWxsPT09dCYmKHQ9W10pLEQuaGFzTnVsbEVsZW1lbnRzKHQpKXRocm93IG5ldyBuKFwiZ2VvbWV0cmllcyBtdXN0IG5vdCBjb250YWluIG51bGwgZWxlbWVudHNcIik7dGhpcy5nZW9tZXRyaWVzPXR9ZnVuY3Rpb24gY3QoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07bHQuY2FsbCh0aGlzLHQsZSl9ZnVuY3Rpb24gaHQoKXtpZih0aGlzLmdlb209bnVsbCx0aGlzLmdlb21GYWN0PW51bGwsdGhpcy5iblJ1bGU9bnVsbCx0aGlzLmVuZHBvaW50TWFwPW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtodC5jYWxsKHRoaXMsdCxCLk1PRDJfQk9VTkRBUllfUlVMRSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuZ2VvbT1lLHRoaXMuZ2VvbUZhY3Q9ZS5nZXRGYWN0b3J5KCksdGhpcy5iblJ1bGU9bn19ZnVuY3Rpb24gZnQoKXt0aGlzLmNvdW50PW51bGx9ZnVuY3Rpb24gZHQoKXt9ZnVuY3Rpb24gcHQoKXt9ZnVuY3Rpb24gZ3QoKXt9ZnVuY3Rpb24gdnQoKXt9ZnVuY3Rpb24gbXQoKXt9ZnVuY3Rpb24geXQoKXt9ZnVuY3Rpb24gX3QoKXt9ZnVuY3Rpb24gYnQoKXt9ZnVuY3Rpb24geHQoKXt0aGlzLnBvaW50cz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtELmNhbGwodGhpcyxlKSx0aGlzLmluaXQodCl9ZnVuY3Rpb24gd3QoKXt9ZnVuY3Rpb24gRXQoKXt0aGlzLmNvb3JkaW5hdGVzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO0QuY2FsbCh0aGlzLGUpLHRoaXMuaW5pdCh0KX1mdW5jdGlvbiBTdCgpe31mdW5jdGlvbiBNdCgpe3RoaXMuc2hlbGw9bnVsbCx0aGlzLmhvbGVzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdO2lmKEQuY2FsbCh0aGlzLGkpLG51bGw9PT10JiYodD10aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKCkpLG51bGw9PT1lJiYoZT1bXSksRC5oYXNOdWxsRWxlbWVudHMoZSkpdGhyb3cgbmV3IG4oXCJob2xlcyBtdXN0IG5vdCBjb250YWluIG51bGwgZWxlbWVudHNcIik7aWYodC5pc0VtcHR5KCkmJkQuaGFzTm9uRW1wdHlFbGVtZW50cyhlKSl0aHJvdyBuZXcgbihcInNoZWxsIGlzIGVtcHR5IGJ1dCBob2xlcyBhcmUgbm90XCIpO3RoaXMuc2hlbGw9dCx0aGlzLmhvbGVzPWV9ZnVuY3Rpb24gQ3QoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07bHQuY2FsbCh0aGlzLHQsZSl9ZnVuY3Rpb24gSXQoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgJHQpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtJdC5jYWxsKHRoaXMsZS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpLGUpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLEEpJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mICR0KXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07eHQuY2FsbCh0aGlzLG4saSksdGhpcy52YWxpZGF0ZUNvbnN0cnVjdGlvbigpfX1mdW5jdGlvbiBPdCgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtsdC5jYWxsKHRoaXMsdCxlKX1mdW5jdGlvbiBUdCgpe2lmKHRoaXMuZmFjdG9yeT1udWxsLHRoaXMuaXNVc2VyRGF0YUNvcGllZD0hMSwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZmFjdG9yeT10fX1mdW5jdGlvbiBQdCgpe31mdW5jdGlvbiBBdCgpe31mdW5jdGlvbiBMdCgpe31mdW5jdGlvbiBOdCgpe31mdW5jdGlvbiBrdCgpe2lmKHRoaXMuZGltZW5zaW9uPTMsdGhpcy5jb29yZGluYXRlcz1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07a3QuY2FsbCh0aGlzLHQsMyl9ZWxzZSBpZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1swXSkpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmNvb3JkaW5hdGVzPW5ldyBBcnJheShlKS5maWxsKG51bGwpO2Zvcih2YXIgbj0wO248ZTtuKyspdGhpcy5jb29yZGluYXRlc1tuXT1uZXcgaH1lbHNlIGlmKExyKGFyZ3VtZW50c1swXSxBKSl7dmFyIGk9YXJndW1lbnRzWzBdO2lmKG51bGw9PT1pKXJldHVybiB0aGlzLmNvb3JkaW5hdGVzPW5ldyBBcnJheSgwKS5maWxsKG51bGwpLG51bGw7dGhpcy5kaW1lbnNpb249aS5nZXREaW1lbnNpb24oKSx0aGlzLmNvb3JkaW5hdGVzPW5ldyBBcnJheShpLnNpemUoKSkuZmlsbChudWxsKTtmb3IodmFyIG49MDtuPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO24rKyl0aGlzLmNvb3JkaW5hdGVzW25dPWkuZ2V0Q29vcmRpbmF0ZUNvcHkobil9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV07dGhpcy5jb29yZGluYXRlcz1yLHRoaXMuZGltZW5zaW9uPW8sbnVsbD09PXImJih0aGlzLmNvb3JkaW5hdGVzPW5ldyBBcnJheSgwKS5maWxsKG51bGwpKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgYT1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV07dGhpcy5jb29yZGluYXRlcz1uZXcgQXJyYXkoYSkuZmlsbChudWxsKSx0aGlzLmRpbWVuc2lvbj1zO2Zvcih2YXIgbj0wO248YTtuKyspdGhpcy5jb29yZGluYXRlc1tuXT1uZXcgaH19ZnVuY3Rpb24gUnQoKXt9ZnVuY3Rpb24gRHQodCxlKXtyZXR1cm4gdD09PWV8fHQhPT10JiZlIT09ZX1mdW5jdGlvbiBGdCh0KXt0aGlzLmFkZD90LmZvckVhY2godGhpcy5hZGQsdGhpcyk6dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuc2V0KHRbMF0sdFsxXSl9LHRoaXMpfWZ1bmN0aW9uIEJ0KHQpe3JldHVybiB0aGlzLmhhcyh0KSYmKHRoaXMuX2tleXMuc3BsaWNlKERyLDEpLHRoaXMuX3ZhbHVlcy5zcGxpY2UoRHIsMSksdGhpcy5faXRwLmZvckVhY2goZnVuY3Rpb24odCl7RHI8dFswXSYmdFswXS0tfSkpLERyPi0xfWZ1bmN0aW9uIGp0KHQpe3JldHVybiB0aGlzLmhhcyh0KT90aGlzLl92YWx1ZXNbRHJdOnZvaWQgMH1mdW5jdGlvbiBVdCh0LGUpe2lmKHRoaXMub2JqZWN0T25seSYmZSE9PU9iamVjdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB2YWx1ZSB1c2VkIGFzIHdlYWsgY29sbGVjdGlvbiBrZXlcIik7aWYoZSE9PWV8fDA9PT1lKWZvcihEcj10Lmxlbmd0aDtEci0tJiYhRHQodFtEcl0sZSk7KTtlbHNlIERyPXQuaW5kZXhPZihlKTtyZXR1cm4gRHI+LTF9ZnVuY3Rpb24genQodCl7cmV0dXJuIFV0LmNhbGwodGhpcyx0aGlzLl9rZXlzLHQpfWZ1bmN0aW9uIEd0KHQsZSl7cmV0dXJuIHRoaXMuaGFzKHQpP3RoaXMuX3ZhbHVlc1tEcl09ZTp0aGlzLl92YWx1ZXNbdGhpcy5fa2V5cy5wdXNoKHQpLTFdPWUsdGhpc31mdW5jdGlvbiBWdCgpeyh0aGlzLl9rZXlzfHwwKS5sZW5ndGg9dGhpcy5fdmFsdWVzLmxlbmd0aD0wfWZ1bmN0aW9uIFh0KCl7cmV0dXJuIFl0KHRoaXMuX2l0cCx0aGlzLl9rZXlzKX1mdW5jdGlvbiBIdCgpe3JldHVybiBZdCh0aGlzLl9pdHAsdGhpcy5fdmFsdWVzKX1mdW5jdGlvbiBxdCgpe3JldHVybiBZdCh0aGlzLl9pdHAsdGhpcy5fa2V5cyx0aGlzLl92YWx1ZXMpfWZ1bmN0aW9uIFl0KHQsZSxuKXt2YXIgaT1bMF0scj0hMTtyZXR1cm4gdC5wdXNoKGkpLHtuZXh0OmZ1bmN0aW9uKCl7dmFyIG8sYT1pWzBdO3JldHVybiFyJiZhPGUubGVuZ3RoPyhvPW4/W2VbYV0sblthXV06ZVthXSxpWzBdKyspOihyPSEwLHQuc3BsaWNlKHQuaW5kZXhPZihpKSwxKSkse2RvbmU6cix2YWx1ZTpvfX19fWZ1bmN0aW9uIFd0KCl7cmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGh9ZnVuY3Rpb24gWnQodCxlKXtmb3IodmFyIG49dGhpcy5lbnRyaWVzKCk7Oyl7dmFyIGk9bi5uZXh0KCk7aWYoaS5kb25lKWJyZWFrO3QuY2FsbChlLGkudmFsdWVbMV0saS52YWx1ZVswXSx0aGlzKX19ZnVuY3Rpb24gSnQoKXt0aGlzLm1hcF89bmV3IGpyfWZ1bmN0aW9uIEt0KCl7aWYodGhpcy5tb2RlbFR5cGU9bnVsbCx0aGlzLnNjYWxlPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5tb2RlbFR5cGU9S3QuRkxPQVRJTkc7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aClpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFF0KXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5tb2RlbFR5cGU9dCx0PT09S3QuRklYRUQmJnRoaXMuc2V0U2NhbGUoMSl9ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5tb2RlbFR5cGU9S3QuRklYRUQsdGhpcy5zZXRTY2FsZShlKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgS3Qpe3ZhciBuPWFyZ3VtZW50c1swXTt0aGlzLm1vZGVsVHlwZT1uLm1vZGVsVHlwZSx0aGlzLnNjYWxlPW4uc2NhbGV9fWZ1bmN0aW9uIFF0KCl7dGhpcy5uYW1lPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubmFtZT10LFF0Lm5hbWVUb1R5cGVNYXAucHV0KHQsdGhpcyl9ZnVuY3Rpb24gJHQoKXtpZih0aGlzLnByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5PW51bGwsdGhpcy5TUklEPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpJHQuY2FsbCh0aGlzLG5ldyBLdCwwKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihMcihhcmd1bWVudHNbMF0saykpe3ZhciB0PWFyZ3VtZW50c1swXTskdC5jYWxsKHRoaXMsbmV3IEt0LDAsdCl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEt0KXt2YXIgZT1hcmd1bWVudHNbMF07JHQuY2FsbCh0aGlzLGUsMCwkdC5nZXREZWZhdWx0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdOyR0LmNhbGwodGhpcyxuLGksJHQuZ2V0RGVmYXVsdENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO3RoaXMucHJlY2lzaW9uTW9kZWw9cix0aGlzLmNvb3JkaW5hdGVTZXF1ZW5jZUZhY3Rvcnk9YSx0aGlzLlNSSUQ9b319ZnVuY3Rpb24gdGUodCl7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9dHx8bmV3ICR0fWZ1bmN0aW9uIGVlKHQpe3RoaXMucGFyc2VyPW5ldyB0ZSh0KX1mdW5jdGlvbiBuZSgpe3RoaXMucmVzdWx0PW51bGwsdGhpcy5pbnB1dExpbmVzPUFycmF5KDIpLmZpbGwoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkoMil9KSx0aGlzLmludFB0PW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuaW50TGluZUluZGV4PW51bGwsdGhpcy5faXNQcm9wZXI9bnVsbCx0aGlzLnBhPW51bGwsdGhpcy5wYj1udWxsLHRoaXMucHJlY2lzaW9uTW9kZWw9bnVsbCx0aGlzLmludFB0WzBdPW5ldyBoLHRoaXMuaW50UHRbMV09bmV3IGgsdGhpcy5wYT10aGlzLmludFB0WzBdLHRoaXMucGI9dGhpcy5pbnRQdFsxXSx0aGlzLnJlc3VsdD0wfWZ1bmN0aW9uIGllKCl7bmUuYXBwbHkodGhpcyl9ZnVuY3Rpb24gcmUoKXt9ZnVuY3Rpb24gb2UoKXt0aGlzLnA9bnVsbCx0aGlzLmNyb3NzaW5nQ291bnQ9MCx0aGlzLmlzUG9pbnRPblNlZ21lbnQ9ITE7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucD10fWZ1bmN0aW9uIGFlKCl7fWZ1bmN0aW9uIHNlKCl7aWYodGhpcy5wMD1udWxsLHRoaXMucDE9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aClzZS5jYWxsKHRoaXMsbmV3IGgsbmV3IGgpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtzZS5jYWxsKHRoaXMsdC5wMCx0LnAxKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5wMD1lLHRoaXMucDE9bn1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl0sYT1hcmd1bWVudHNbM107c2UuY2FsbCh0aGlzLG5ldyBoKGksciksbmV3IGgobyxhKSl9fWZ1bmN0aW9uIHVlKCl7dGhpcy5pdGVtcz1uZXcgXyx0aGlzLnN1Ym5vZGU9bmV3IEFycmF5KDQpLmZpbGwobnVsbCl9ZnVuY3Rpb24gbGUoKXt9ZnVuY3Rpb24gY2UodCxlKXt2YXIgbixpLHIsbyxhPXszMjp7ZDoxMjcsYzoxMjgsYjowLGE6MH0sNjQ6e2Q6MzI3NTIsYzowLGI6MCxhOjB9fSxzPXszMjo4LDY0OjExfVt0XTtpZihvfHwobj1lPDB8fDEvZTwwLGlzRmluaXRlKGUpfHwobz1hW3RdLG4mJihvLmQrPTE8PHQvNC0xKSxpPU1hdGgucG93KDIscyktMSxyPTApKSwhbyl7Zm9yKGk9ezMyOjEyNyw2NDoxMDIzfVt0XSxyPU1hdGguYWJzKGUpO3I+PTI7KWkrKyxyLz0yO2Zvcig7cjwxJiZpPjA7KWktLSxyKj0yO2k8PTAmJihyLz0yKSwzMj09PXQmJmk+MjU0JiYobz17ZDpuPzI1NToxMjcsYzoxMjgsYjowLGE6MH0saT1NYXRoLnBvdygyLHMpLTEscj0wKX1yZXR1cm4gaX1mdW5jdGlvbiBoZSgpe3RoaXMucHQ9bmV3IGgsdGhpcy5sZXZlbD0wLHRoaXMuZW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuY29tcHV0ZUtleSh0KX1mdW5jdGlvbiBmZSgpe3VlLmFwcGx5KHRoaXMpLHRoaXMuZW52PW51bGwsdGhpcy5jZW50cmV4PW51bGwsdGhpcy5jZW50cmV5PW51bGwsdGhpcy5sZXZlbD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmVudj10LHRoaXMubGV2ZWw9ZSx0aGlzLmNlbnRyZXg9KHQuZ2V0TWluWCgpK3QuZ2V0TWF4WCgpKS8yLHRoaXMuY2VudHJleT0odC5nZXRNaW5ZKCkrdC5nZXRNYXhZKCkpLzJ9ZnVuY3Rpb24gZGUoKXt9ZnVuY3Rpb24gcGUoKXt1ZS5hcHBseSh0aGlzKX1mdW5jdGlvbiBnZSgpe31mdW5jdGlvbiB2ZSgpe31mdW5jdGlvbiBtZSgpe3RoaXMuaXRlbXM9bmV3IF99ZnVuY3Rpb24geWUoKXt0aGlzLnJvb3Q9bnVsbCx0aGlzLm1pbkV4dGVudD0xLHRoaXMucm9vdD1uZXcgcGV9ZnVuY3Rpb24gX2UodCl7dGhpcy5nZW9tZXRyeUZhY3Rvcnk9dHx8bmV3ICR0fWZ1bmN0aW9uIGJlKHQpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PXR8fG5ldyAkdCx0aGlzLnByZWNpc2lvbk1vZGVsPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmdldFByZWNpc2lvbk1vZGVsKCksdGhpcy5wYXJzZXI9bmV3IF9lKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KX1mdW5jdGlvbiB4ZSgpe3RoaXMucGFyc2VyPW5ldyBfZSh0aGlzLmdlb21ldHJ5RmFjdG9yeSl9ZnVuY3Rpb24gd2UoKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuYXRTdGFydD1udWxsLHRoaXMubWF4PW51bGwsdGhpcy5pbmRleD1udWxsLHRoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucGFyZW50PXQsdGhpcy5hdFN0YXJ0PSEwLHRoaXMuaW5kZXg9MCx0aGlzLm1heD10LmdldE51bUdlb21ldHJpZXMoKX1mdW5jdGlvbiBFZSgpe2lmKHRoaXMuYm91bmRhcnlSdWxlPUIuT0dDX1NGU19CT1VOREFSWV9SVUxFLHRoaXMuaXNJbj1udWxsLHRoaXMubnVtQm91bmRhcmllcz1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07aWYobnVsbD09PXQpdGhyb3cgbmV3IG4oXCJSdWxlIG11c3QgYmUgbm9uLW51bGxcIik7dGhpcy5ib3VuZGFyeVJ1bGU9dH19ZnVuY3Rpb24gU2UoKXt0aGlzLmNvbXBzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuY29tcHM9dH1mdW5jdGlvbiBNZSgpe2lmKHRoaXMuY29tcG9uZW50PW51bGwsdGhpcy5zZWdJbmRleD1udWxsLHRoaXMucHQ9bnVsbCwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO01lLmNhbGwodGhpcyx0LE1lLklOU0lERV9BUkVBLGUpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTt0aGlzLmNvbXBvbmVudD1uLHRoaXMuc2VnSW5kZXg9aSx0aGlzLnB0PXJ9fWZ1bmN0aW9uIENlKCl7dGhpcy5wdHM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wdHM9dH1mdW5jdGlvbiBJZSgpe3RoaXMubG9jYXRpb25zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubG9jYXRpb25zPXR9ZnVuY3Rpb24gT2UoKXtpZih0aGlzLmxpbmVzPW51bGwsdGhpcy5pc0ZvcmNlZFRvTGluZVN0cmluZz0hMSwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubGluZXM9dH1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5saW5lcz1lLHRoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmc9bn19ZnVuY3Rpb24gVGUoKXtpZih0aGlzLmdlb209bnVsbCx0aGlzLnRlcm1pbmF0ZURpc3RhbmNlPTAsdGhpcy5wdExvY2F0b3I9bmV3IEVlLHRoaXMubWluRGlzdGFuY2VMb2NhdGlvbj1udWxsLHRoaXMubWluRGlzdGFuY2U9aS5NQVhfVkFMVUUsMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtUZS5jYWxsKHRoaXMsdCxlLDApfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXTt0aGlzLmdlb209bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5nZW9tWzBdPW4sdGhpcy5nZW9tWzFdPXIsdGhpcy50ZXJtaW5hdGVEaXN0YW5jZT1vfX1mdW5jdGlvbiBQZSgpe3RoaXMubWFwT3A9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5tYXBPcD10fWZ1bmN0aW9uIEFlKCl7fWZ1bmN0aW9uIExlKCl7aWYodGhpcy5wdD1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dS5jYWxsKHRoaXMsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3UuY2FsbCh0aGlzLExlLm1zZ1dpdGhDb29yZChlLG4pKSx0aGlzLm5hbWU9XCJUb3BvbG9neUV4Y2VwdGlvblwiLHRoaXMucHQ9bmV3IGgobil9fWZ1bmN0aW9uIE5lKCl7aWYodGhpcy5sb2NhdGlvbj1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbml0KHQubGVuZ3RoKX1lbHNlIGlmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSl7dmFyIGU9YXJndW1lbnRzWzBdO3RoaXMuaW5pdCgxKSx0aGlzLmxvY2F0aW9uW0FlLk9OXT1lfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBOZSl7dmFyIG49YXJndW1lbnRzWzBdO2lmKHRoaXMuaW5pdChuLmxvY2F0aW9uLmxlbmd0aCksbnVsbCE9PW4pZm9yKHZhciBpPTA7aTx0aGlzLmxvY2F0aW9uLmxlbmd0aDtpKyspdGhpcy5sb2NhdGlvbltpXT1uLmxvY2F0aW9uW2ldfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl07dGhpcy5pbml0KDMpLHRoaXMubG9jYXRpb25bQWUuT05dPXIsdGhpcy5sb2NhdGlvbltBZS5MRUZUXT1vLHRoaXMubG9jYXRpb25bQWUuUklHSFRdPWF9fWZ1bmN0aW9uIGtlKCl7aWYodGhpcy5lbHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZWx0WzBdPW5ldyBOZSh0KSx0aGlzLmVsdFsxXT1uZXcgTmUodCl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGtlKXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5lbHRbMF09bmV3IE5lKGUuZWx0WzBdKSx0aGlzLmVsdFsxXT1uZXcgTmUoZS5lbHRbMV0pfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5lbHRbMF09bmV3IE5lKFMuTk9ORSksdGhpcy5lbHRbMV09bmV3IE5lKFMuTk9ORSksdGhpcy5lbHRbbl0uc2V0TG9jYXRpb24oaSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO3RoaXMuZWx0WzBdPW5ldyBOZShyLG8sYSksdGhpcy5lbHRbMV09bmV3IE5lKHIsbyxhKX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcz1hcmd1bWVudHNbMF0sdT1hcmd1bWVudHNbMV0sbD1hcmd1bWVudHNbMl0sYz1hcmd1bWVudHNbM107dGhpcy5lbHRbMF09bmV3IE5lKFMuTk9ORSxTLk5PTkUsUy5OT05FKSx0aGlzLmVsdFsxXT1uZXcgTmUoUy5OT05FLFMuTk9ORSxTLk5PTkUpLHRoaXMuZWx0W3NdLnNldExvY2F0aW9ucyh1LGwsYyl9fWZ1bmN0aW9uIFJlKCl7dGhpcy5zdGFydERlPW51bGwsdGhpcy5tYXhOb2RlRGVncmVlPS0xLHRoaXMuZWRnZXM9bmV3IF8sdGhpcy5wdHM9bmV3IF8sdGhpcy5sYWJlbD1uZXcga2UoUy5OT05FKSx0aGlzLnJpbmc9bnVsbCx0aGlzLl9pc0hvbGU9bnVsbCx0aGlzLnNoZWxsPW51bGwsdGhpcy5ob2xlcz1uZXcgXyx0aGlzLmdlb21ldHJ5RmFjdG9yeT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmdlb21ldHJ5RmFjdG9yeT1lLHRoaXMuY29tcHV0ZVBvaW50cyh0KSx0aGlzLmNvbXB1dGVSaW5nKCl9ZnVuY3Rpb24gRGUoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07UmUuY2FsbCh0aGlzLHQsZSl9ZnVuY3Rpb24gRmUoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07UmUuY2FsbCh0aGlzLHQsZSl9ZnVuY3Rpb24gQmUoKXt9ZnVuY3Rpb24gamUoKXt0aGlzLmdlb209bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5nZW9tPXR9ZnVuY3Rpb24gVWUoKXt0aGlzLmVkZ2VNYXA9bmV3IGV0LHRoaXMuZWRnZUxpc3Q9bnVsbCx0aGlzLnB0SW5BcmVhTG9jYXRpb249W1MuTk9ORSxTLk5PTkVdfWZ1bmN0aW9uIHplKCl7fWZ1bmN0aW9uIEdlKCl7VWUuYXBwbHkodGhpcyksdGhpcy5yZXN1bHRBcmVhRWRnZUxpc3Q9bnVsbCx0aGlzLmxhYmVsPW51bGwsdGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkc9MSx0aGlzLkxJTktJTkdfVE9fT1VUR09JTkc9Mn1mdW5jdGlvbiBWZSgpe2lmKHRoaXMubGFiZWw9bnVsbCx0aGlzLl9pc0luUmVzdWx0PSExLHRoaXMuX2lzQ292ZXJlZD0hMSx0aGlzLl9pc0NvdmVyZWRTZXQ9ITEsdGhpcy5faXNWaXNpdGVkPSExLDA9PT1hcmd1bWVudHMubGVuZ3RoKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5sYWJlbD10fX1mdW5jdGlvbiBYZSgpe1ZlLmFwcGx5KHRoaXMpLHRoaXMuY29vcmQ9bnVsbCx0aGlzLmVkZ2VzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuY29vcmQ9dCx0aGlzLmVkZ2VzPWUsdGhpcy5sYWJlbD1uZXcga2UoMCxTLk5PTkUpfWZ1bmN0aW9uIEhlKCl7fWZ1bmN0aW9uIHFlKCl7SGUuYXBwbHkodGhpcyl9ZnVuY3Rpb24gWWUoKXt0aGlzLm5vZGVNYXA9bmV3IGV0LHRoaXMubm9kZUZhY3Q9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5ub2RlRmFjdD10fWZ1bmN0aW9uIFdlKCl7aWYodGhpcy5lZGdlPW51bGwsdGhpcy5sYWJlbD1udWxsLHRoaXMubm9kZT1udWxsLHRoaXMucDA9bnVsbCx0aGlzLnAxPW51bGwsdGhpcy5keD1udWxsLHRoaXMuZHk9bnVsbCx0aGlzLnF1YWRyYW50PW51bGwsMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmVkZ2U9dH1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1hcmd1bWVudHNbMl07V2UuY2FsbCh0aGlzLGUsbixpLG51bGwpfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXSxzPWFyZ3VtZW50c1szXTtXZS5jYWxsKHRoaXMsciksdGhpcy5pbml0KG8sYSksdGhpcy5sYWJlbD1zfX1mdW5jdGlvbiBaZSgpe3RoaXMuX2lzRm9yd2FyZD1udWxsLHRoaXMuX2lzSW5SZXN1bHQ9ITEsdGhpcy5faXNWaXNpdGVkPSExLHRoaXMuc3ltPW51bGwsdGhpcy5uZXh0PW51bGwsdGhpcy5uZXh0TWluPW51bGwsdGhpcy5lZGdlUmluZz1udWxsLHRoaXMubWluRWRnZVJpbmc9bnVsbCx0aGlzLmRlcHRoPVswLC05OTksLTk5OV07dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKFdlLmNhbGwodGhpcyx0KSx0aGlzLl9pc0ZvcndhcmQ9ZSxlKXRoaXMuaW5pdCh0LmdldENvb3JkaW5hdGUoMCksdC5nZXRDb29yZGluYXRlKDEpKTtlbHNle3ZhciBuPXQuZ2V0TnVtUG9pbnRzKCktMTt0aGlzLmluaXQodC5nZXRDb29yZGluYXRlKG4pLHQuZ2V0Q29vcmRpbmF0ZShuLTEpKX10aGlzLmNvbXB1dGVEaXJlY3RlZExhYmVsKCl9ZnVuY3Rpb24gSmUoKXtpZih0aGlzLmVkZ2VzPW5ldyBfLHRoaXMubm9kZXM9bnVsbCx0aGlzLmVkZ2VFbmRMaXN0PW5ldyBfLDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMubm9kZXM9bmV3IFllKG5ldyBIZSk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubm9kZXM9bmV3IFllKHQpfX1mdW5jdGlvbiBLZSgpe3RoaXMuZ2VvbWV0cnlGYWN0b3J5PW5ldyAkdCx0aGlzLmdlb21HcmFwaD1udWxsLHRoaXMuZGlzY29ubmVjdGVkUmluZ2Nvb3JkPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ2VvbUdyYXBoPXR9ZnVuY3Rpb24gUWUoKXt0aGlzLnRlbXBFbnYxPW5ldyB4LHRoaXMuc2VsZWN0ZWRTZWdtZW50PW5ldyBzZX1mdW5jdGlvbiAkZSgpe3RoaXMuaXRlbXM9bmV3IF8sdGhpcy5zdWJub2RlPVtudWxsLG51bGxdfWZ1bmN0aW9uIHRuKCl7aWYodGhpcy5taW49bnVsbCx0aGlzLm1heD1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMubWluPTAsdGhpcy5tYXg9MDtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbml0KHQubWluLHQubWF4KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5pbml0KGUsbil9fWZ1bmN0aW9uIGVuKCl7dGhpcy5wdD0wLHRoaXMubGV2ZWw9MCx0aGlzLmludGVydmFsPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuY29tcHV0ZUtleSh0KX1mdW5jdGlvbiBubigpeyRlLmFwcGx5KHRoaXMpLHRoaXMuaW50ZXJ2YWw9bnVsbCx0aGlzLmNlbnRyZT1udWxsLHRoaXMubGV2ZWw9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5pbnRlcnZhbD10LHRoaXMubGV2ZWw9ZSx0aGlzLmNlbnRyZT0odC5nZXRNaW4oKSt0LmdldE1heCgpKS8yfWZ1bmN0aW9uIHJuKCl7JGUuYXBwbHkodGhpcyl9ZnVuY3Rpb24gb24oKXt0aGlzLnJvb3Q9bnVsbCx0aGlzLm1pbkV4dGVudD0xLHRoaXMucm9vdD1uZXcgcm59ZnVuY3Rpb24gYW4oKXt0aGlzLnB0cz1udWxsLHRoaXMuc3RhcnQ9bnVsbCx0aGlzLmVuZD1udWxsLHRoaXMuZW52PW51bGwsdGhpcy5jb250ZXh0PW51bGwsdGhpcy5pZD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXTt0aGlzLnB0cz10LHRoaXMuc3RhcnQ9ZSx0aGlzLmVuZD1uLHRoaXMuY29udGV4dD1pfWZ1bmN0aW9uIHNuKCl7fWZ1bmN0aW9uIHVuKCl7fWZ1bmN0aW9uIGxuKCl7dGhpcy5yaW5nPW51bGwsdGhpcy50cmVlPW51bGwsdGhpcy5jcm9zc2luZ3M9MCx0aGlzLmludGVydmFsPW5ldyB0bjt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yaW5nPXQsdGhpcy5idWlsZEluZGV4KCl9ZnVuY3Rpb24gY24oKXtRZS5hcHBseSh0aGlzKSx0aGlzLm1jcD1udWxsLHRoaXMucD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLm1jcD10LHRoaXMucD1lfWZ1bmN0aW9uIGhuKCl7dGhpcy5tY2U9bnVsbCx0aGlzLmNoYWluSW5kZXg9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5tY2U9dCx0aGlzLmNoYWluSW5kZXg9ZX1mdW5jdGlvbiBmbigpe2lmKHRoaXMubGFiZWw9bnVsbCx0aGlzLnhWYWx1ZT1udWxsLHRoaXMuZXZlbnRUeXBlPW51bGwsdGhpcy5pbnNlcnRFdmVudD1udWxsLHRoaXMuZGVsZXRlRXZlbnRJbmRleD1udWxsLHRoaXMub2JqPW51bGwsMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmV2ZW50VHlwZT1mbi5ERUxFVEUsdGhpcy54VmFsdWU9dCx0aGlzLmluc2VydEV2ZW50PWV9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3RoaXMuZXZlbnRUeXBlPWZuLklOU0VSVCx0aGlzLmxhYmVsPW4sdGhpcy54VmFsdWU9aSx0aGlzLm9iaj1yfX1mdW5jdGlvbiBkbigpe31mdW5jdGlvbiBwbigpe3RoaXMuX2hhc0ludGVyc2VjdGlvbj0hMSx0aGlzLmhhc1Byb3Blcj0hMSx0aGlzLmhhc1Byb3BlckludGVyaW9yPSExLHRoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ9bnVsbCx0aGlzLmxpPW51bGwsdGhpcy5pbmNsdWRlUHJvcGVyPW51bGwsdGhpcy5yZWNvcmRJc29sYXRlZD1udWxsLHRoaXMuaXNTZWxmSW50ZXJzZWN0aW9uPW51bGwsdGhpcy5udW1JbnRlcnNlY3Rpb25zPTAsdGhpcy5udW1UZXN0cz0wLHRoaXMuYmR5Tm9kZXM9bnVsbCx0aGlzLl9pc0RvbmU9ITEsdGhpcy5pc0RvbmVXaGVuUHJvcGVySW50PSExO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLmxpPXQsdGhpcy5pbmNsdWRlUHJvcGVyPWUsdGhpcy5yZWNvcmRJc29sYXRlZD1ufWZ1bmN0aW9uIGduKCl7ZG4uYXBwbHkodGhpcyksdGhpcy5ldmVudHM9bmV3IF8sdGhpcy5uT3ZlcmxhcHM9bnVsbH1mdW5jdGlvbiB2bigpe3RoaXMubWluPWkuUE9TSVRJVkVfSU5GSU5JVFksdGhpcy5tYXg9aS5ORUdBVElWRV9JTkZJTklUWX1mdW5jdGlvbiBtbigpe31mdW5jdGlvbiB5bigpe3ZuLmFwcGx5KHRoaXMpLHRoaXMuaXRlbT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLm1pbj10LHRoaXMubWF4PWUsdGhpcy5pdGVtPW59ZnVuY3Rpb24gX24oKXt2bi5hcHBseSh0aGlzKSx0aGlzLm5vZGUxPW51bGwsdGhpcy5ub2RlMj1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLm5vZGUxPXQsdGhpcy5ub2RlMj1lLHRoaXMuYnVpbGRFeHRlbnQodGhpcy5ub2RlMSx0aGlzLm5vZGUyKX1mdW5jdGlvbiBibigpe3RoaXMubGVhdmVzPW5ldyBfLHRoaXMucm9vdD1udWxsLHRoaXMubGV2ZWw9MH1mdW5jdGlvbiB4bigpe3RoaXMuaW5kZXg9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07aWYoIUxyKHQsU3QpKXRocm93IG5ldyBuKFwiQXJndW1lbnQgbXVzdCBiZSBQb2x5Z29uYWxcIik7dGhpcy5pbmRleD1uZXcgRW4odCl9ZnVuY3Rpb24gd24oKXt0aGlzLmNvdW50ZXI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5jb3VudGVyPXR9ZnVuY3Rpb24gRW4oKXt0aGlzLmluZGV4PW5ldyBibjt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbml0KHQpfWZ1bmN0aW9uIFNuKCl7dGhpcy5jb29yZD1udWxsLHRoaXMuc2VnbWVudEluZGV4PW51bGwsdGhpcy5kaXN0PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuY29vcmQ9bmV3IGgodCksdGhpcy5zZWdtZW50SW5kZXg9ZSx0aGlzLmRpc3Q9bn1mdW5jdGlvbiBNbigpe3RoaXMubm9kZU1hcD1uZXcgZXQsdGhpcy5lZGdlPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZWRnZT10fWZ1bmN0aW9uIENuKCl7fWZ1bmN0aW9uIEluKCl7dGhpcy5lPW51bGwsdGhpcy5wdHM9bnVsbCx0aGlzLnN0YXJ0SW5kZXg9bnVsbCx0aGlzLmVudjE9bmV3IHgsdGhpcy5lbnYyPW5ldyB4O3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmU9dCx0aGlzLnB0cz10LmdldENvb3JkaW5hdGVzKCk7dmFyIGU9bmV3IENuO3RoaXMuc3RhcnRJbmRleD1lLmdldENoYWluU3RhcnRJbmRpY2VzKHRoaXMucHRzKX1mdW5jdGlvbiBPbigpe3RoaXMuZGVwdGg9QXJyYXkoMikuZmlsbCgpLm1hcChmdW5jdGlvbigpe3JldHVybiBBcnJheSgzKX0pO2Zvcih2YXIgdD0wO3Q8Mjt0KyspZm9yKHZhciBlPTA7ZTwzO2UrKyl0aGlzLmRlcHRoW3RdW2VdPU9uLk5VTExfVkFMVUV9ZnVuY3Rpb24gVG4oKXtpZihWZS5hcHBseSh0aGlzKSx0aGlzLnB0cz1udWxsLHRoaXMuZW52PW51bGwsdGhpcy5laUxpc3Q9bmV3IE1uKHRoaXMpLHRoaXMubmFtZT1udWxsLHRoaXMubWNlPW51bGwsdGhpcy5faXNJc29sYXRlZD0hMCx0aGlzLmRlcHRoPW5ldyBPbix0aGlzLmRlcHRoRGVsdGE9MCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO1RuLmNhbGwodGhpcyx0LG51bGwpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTt0aGlzLnB0cz1lLHRoaXMubGFiZWw9bn19ZnVuY3Rpb24gUG4oKXtpZihKZS5hcHBseSh0aGlzKSx0aGlzLnBhcmVudEdlb209bnVsbCx0aGlzLmxpbmVFZGdlTWFwPW5ldyBKdCx0aGlzLmJvdW5kYXJ5Tm9kZVJ1bGU9bnVsbCx0aGlzLnVzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU9ITAsdGhpcy5hcmdJbmRleD1udWxsLHRoaXMuYm91bmRhcnlOb2Rlcz1udWxsLHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMSx0aGlzLmludmFsaWRQb2ludD1udWxsLHRoaXMuYXJlYVB0TG9jYXRvcj1udWxsLHRoaXMucHRMb2NhdG9yPW5ldyBFZSwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO1BuLmNhbGwodGhpcyx0LGUsQi5PR0NfU0ZTX0JPVU5EQVJZX1JVTEUpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTt0aGlzLmFyZ0luZGV4PW4sdGhpcy5wYXJlbnRHZW9tPWksdGhpcy5ib3VuZGFyeU5vZGVSdWxlPXIsbnVsbCE9PWkmJnRoaXMuYWRkKGkpfX1mdW5jdGlvbiBBbigpe31mdW5jdGlvbiBMbigpe2lmKHRoaXMuZWRnZUVuZHM9bmV3IF8sMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtMbi5jYWxsKHRoaXMsbnVsbCx0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT0oYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk7V2UuY2FsbCh0aGlzLGUuZ2V0RWRnZSgpLGUuZ2V0Q29vcmRpbmF0ZSgpLGUuZ2V0RGlyZWN0ZWRDb29yZGluYXRlKCksbmV3IGtlKGUuZ2V0TGFiZWwoKSkpLHRoaXMuaW5zZXJ0KGUpfX1mdW5jdGlvbiBObigpe1VlLmFwcGx5KHRoaXMpfWZ1bmN0aW9uIGtuKCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO1hlLmNhbGwodGhpcyx0LGUpfWZ1bmN0aW9uIFJuKCl7SGUuYXBwbHkodGhpcyl9ZnVuY3Rpb24gRG4oKXt0aGlzLm5vZGVzPW5ldyBZZShuZXcgUm4pfWZ1bmN0aW9uIEZuKCl7dGhpcy5saT1uZXcgaWUsdGhpcy5nZW9tR3JhcGg9bnVsbCx0aGlzLm5vZGVHcmFwaD1uZXcgRG4sdGhpcy5pbnZhbGlkUG9pbnQ9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5nZW9tR3JhcGg9dH1mdW5jdGlvbiBCbigpe31mdW5jdGlvbiBqbigpe3RoaXMuYm91bmRzPW51bGwsdGhpcy5pdGVtPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuYm91bmRzPXQsdGhpcy5pdGVtPWV9ZnVuY3Rpb24gVW4oKXt0aGlzLl9zaXplPW51bGwsdGhpcy5pdGVtcz1udWxsLHRoaXMuX3NpemU9MCx0aGlzLml0ZW1zPW5ldyBfLHRoaXMuaXRlbXMuYWRkKG51bGwpfWZ1bmN0aW9uIHpuKCl7aWYodGhpcy5jaGlsZEJvdW5kYWJsZXM9bmV3IF8sdGhpcy5ib3VuZHM9bnVsbCx0aGlzLmxldmVsPW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmxldmVsPXR9fWZ1bmN0aW9uIEduKCl7dGhpcy5ib3VuZGFibGUxPW51bGwsdGhpcy5ib3VuZGFibGUyPW51bGwsdGhpcy5fZGlzdGFuY2U9bnVsbCx0aGlzLml0ZW1EaXN0YW5jZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLmJvdW5kYWJsZTE9dCx0aGlzLmJvdW5kYWJsZTI9ZSx0aGlzLml0ZW1EaXN0YW5jZT1uLHRoaXMuX2Rpc3RhbmNlPXRoaXMuZGlzdGFuY2UoKX1mdW5jdGlvbiBWbigpe2lmKHRoaXMucm9vdD1udWxsLHRoaXMuYnVpbHQ9ITEsdGhpcy5pdGVtQm91bmRhYmxlcz1uZXcgXyx0aGlzLm5vZGVDYXBhY2l0eT1udWxsLDA9PT1hcmd1bWVudHMubGVuZ3RoKVZuLmNhbGwodGhpcyxWbi5ERUZBVUxUX05PREVfQ0FQQUNJVFkpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtjLmlzVHJ1ZSh0PjEsXCJOb2RlIGNhcGFjaXR5IG11c3QgYmUgZ3JlYXRlciB0aGFuIDFcIiksdGhpcy5ub2RlQ2FwYWNpdHk9dH19ZnVuY3Rpb24gWG4oKXt9ZnVuY3Rpb24gSG4oKXt9ZnVuY3Rpb24gcW4oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClxbi5jYWxsKHRoaXMscW4uREVGQVVMVF9OT0RFX0NBUEFDSVRZKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07Vm4uY2FsbCh0aGlzLHQpfX1mdW5jdGlvbiBZbigpe3ZhciB0PWFyZ3VtZW50c1swXTt6bi5jYWxsKHRoaXMsdCl9ZnVuY3Rpb24gV24oKXt0aGlzLmdyYXBoPW51bGwsdGhpcy5yaW5ncz1uZXcgXyx0aGlzLnRvdGFsRW52PW5ldyB4LHRoaXMuaW5kZXg9bnVsbCx0aGlzLm5lc3RlZFB0PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZ3JhcGg9dH1mdW5jdGlvbiBabigpe2lmKHRoaXMuZXJyb3JUeXBlPW51bGwsdGhpcy5wdD1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07Wm4uY2FsbCh0aGlzLHQsbnVsbCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuZXJyb3JUeXBlPWUsbnVsbCE9PW4mJih0aGlzLnB0PW4uY29weSgpKX19ZnVuY3Rpb24gSm4oKXt0aGlzLnBhcmVudEdlb21ldHJ5PW51bGwsdGhpcy5pc1NlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkPSExLHRoaXMudmFsaWRFcnI9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wYXJlbnRHZW9tZXRyeT10fWZ1bmN0aW9uIEtuKCl7dGhpcy5pbnB1dEdlb209bnVsbCx0aGlzLmZhY3Rvcnk9bnVsbCx0aGlzLnBydW5lRW1wdHlHZW9tZXRyeT0hMCx0aGlzLnByZXNlcnZlR2VvbWV0cnlDb2xsZWN0aW9uVHlwZT0hMCx0aGlzLnByZXNlcnZlQ29sbGVjdGlvbnM9ITEsdGhpcy5wcmVzZXJ2ZVR5cGU9ITF9ZnVuY3Rpb24gUW4oKXtpZih0aGlzLnNuYXBUb2xlcmFuY2U9MCx0aGlzLnNyY1B0cz1udWxsLHRoaXMuc2VnPW5ldyBzZSx0aGlzLmFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzPSExLHRoaXMuX2lzQ2xvc2VkPSExLGFyZ3VtZW50c1swXWluc3RhbmNlb2YgeHQmJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtRbi5jYWxsKHRoaXMsdC5nZXRDb29yZGluYXRlcygpLGUpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3RoaXMuc3JjUHRzPW4sdGhpcy5faXNDbG9zZWQ9UW4uaXNDbG9zZWQobiksdGhpcy5zbmFwVG9sZXJhbmNlPWl9fWZ1bmN0aW9uICRuKCl7dGhpcy5zcmNHZW9tPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc3JjR2VvbT10fWZ1bmN0aW9uIHRpKCl7aWYoS24uYXBwbHkodGhpcyksdGhpcy5zbmFwVG9sZXJhbmNlPW51bGwsdGhpcy5zbmFwUHRzPW51bGwsdGhpcy5pc1NlbGZTbmFwPSExLDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5zbmFwVG9sZXJhbmNlPXQsdGhpcy5zbmFwUHRzPWV9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3RoaXMuc25hcFRvbGVyYW5jZT1uLHRoaXMuc25hcFB0cz1pLHRoaXMuaXNTZWxmU25hcD1yfX1mdW5jdGlvbiBlaSgpe3RoaXMuaXNGaXJzdD0hMCx0aGlzLmNvbW1vbk1hbnRpc3NhQml0c0NvdW50PTUzLHRoaXMuY29tbW9uQml0cz0wLHRoaXMuY29tbW9uU2lnbkV4cD1udWxsfWZ1bmN0aW9uIG5pKCl7dGhpcy5jb21tb25Db29yZD1udWxsLHRoaXMuY2NGaWx0ZXI9bmV3IGlpfWZ1bmN0aW9uIGlpKCl7dGhpcy5jb21tb25CaXRzWD1uZXcgZWksdGhpcy5jb21tb25CaXRzWT1uZXcgZWl9ZnVuY3Rpb24gcmkoKXt0aGlzLnRyYW5zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMudHJhbnM9dH1mdW5jdGlvbiBvaSgpe31mdW5jdGlvbiBhaSgpe31mdW5jdGlvbiBzaSgpe3RoaXMucHRzPW51bGwsdGhpcy5kYXRhPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMucHRzPXQsdGhpcy5kYXRhPWV9ZnVuY3Rpb24gdWkoKXt9ZnVuY3Rpb24gbGkoKXt0aGlzLnNlZ1N0cmluZz1udWxsLHRoaXMuY29vcmQ9bnVsbCx0aGlzLnNlZ21lbnRJbmRleD1udWxsLHRoaXMuc2VnbWVudE9jdGFudD1udWxsLHRoaXMuX2lzSW50ZXJpb3I9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM107dGhpcy5zZWdTdHJpbmc9dCx0aGlzLmNvb3JkPW5ldyBoKGUpLHRoaXMuc2VnbWVudEluZGV4PW4sdGhpcy5zZWdtZW50T2N0YW50PWksdGhpcy5faXNJbnRlcmlvcj0hZS5lcXVhbHMyRCh0LmdldENvb3JkaW5hdGUobikpfWZ1bmN0aW9uIGNpKCl7dGhpcy5ub2RlTWFwPW5ldyBldCx0aGlzLmVkZ2U9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5lZGdlPXR9ZnVuY3Rpb24gaGkoKXt0aGlzLm5vZGVMaXN0PW51bGwsdGhpcy5lZGdlPW51bGwsdGhpcy5ub2RlSXQ9bnVsbCx0aGlzLmN1cnJOb2RlPW51bGwsdGhpcy5uZXh0Tm9kZT1udWxsLHRoaXMuY3VyclNlZ0luZGV4PTA7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubm9kZUxpc3Q9dCx0aGlzLmVkZ2U9dC5nZXRFZGdlKCksdGhpcy5ub2RlSXQ9dC5pdGVyYXRvcigpLHRoaXMucmVhZE5leHROb2RlKCl9ZnVuY3Rpb24gZmkoKXt9ZnVuY3Rpb24gZGkoKXt0aGlzLm5vZGVMaXN0PW5ldyBjaSh0aGlzKSx0aGlzLnB0cz1udWxsLHRoaXMuZGF0YT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnB0cz10LHRoaXMuZGF0YT1lfWZ1bmN0aW9uIHBpKCl7dGhpcy50ZW1wRW52MT1uZXcgeCx0aGlzLnRlbXBFbnYyPW5ldyB4LHRoaXMub3ZlcmxhcFNlZzE9bmV3IHNlLHRoaXMub3ZlcmxhcFNlZzI9bmV3IHNlfWZ1bmN0aW9uIGdpKCl7fWZ1bmN0aW9uIHZpKCl7aWYodGhpcy5zZWdJbnQ9bnVsbCwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0U2VnbWVudEludGVyc2VjdG9yKHQpfX1mdW5jdGlvbiBtaSgpe2lmKHRoaXMubW9ub0NoYWlucz1uZXcgXyx0aGlzLmluZGV4PW5ldyBxbix0aGlzLmlkQ291bnRlcj0wLHRoaXMubm9kZWRTZWdTdHJpbmdzPW51bGwsdGhpcy5uT3ZlcmxhcHM9MCwwPT09YXJndW1lbnRzLmxlbmd0aCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3ZpLmNhbGwodGhpcyx0KX19ZnVuY3Rpb24geWkoKXtwaS5hcHBseSh0aGlzKSx0aGlzLnNpPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2k9dH1mdW5jdGlvbiBfaSgpe31mdW5jdGlvbiBiaSgpe3RoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9ITEsdGhpcy5pc0NoZWNrRW5kU2VnbWVudHNPbmx5PSExLHRoaXMubGk9bnVsbCx0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uPW51bGwsdGhpcy5pbnRTZWdtZW50cz1udWxsLHRoaXMuaW50ZXJzZWN0aW9ucz1uZXcgXyx0aGlzLmludGVyc2VjdGlvbkNvdW50PTAsdGhpcy5rZWVwSW50ZXJzZWN0aW9ucz0hMDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5saT10LHRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb249bnVsbH1mdW5jdGlvbiB4aSgpe3RoaXMubGk9bmV3IGllLHRoaXMuc2VnU3RyaW5ncz1udWxsLHRoaXMuZmluZEFsbEludGVyc2VjdGlvbnM9ITEsdGhpcy5zZWdJbnQ9bnVsbCx0aGlzLl9pc1ZhbGlkPSEwO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNlZ1N0cmluZ3M9dH1mdW5jdGlvbiB3aSgpe3RoaXMubnY9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5udj1uZXcgeGkod2kudG9TZWdtZW50U3RyaW5ncyh0KSl9ZnVuY3Rpb24gRWkoKXt0aGlzLmdlb21ldHJ5RmFjdG9yeT1udWxsLHRoaXMuc2hlbGxMaXN0PW5ldyBfO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmdlb21ldHJ5RmFjdG9yeT10fWZ1bmN0aW9uIFNpKCl7dGhpcy5vcD1udWxsLHRoaXMuZ2VvbWV0cnlGYWN0b3J5PW51bGwsdGhpcy5wdExvY2F0b3I9bnVsbCx0aGlzLmxpbmVFZGdlc0xpc3Q9bmV3IF8sdGhpcy5yZXN1bHRMaW5lTGlzdD1uZXcgXzt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07dGhpcy5vcD10LHRoaXMuZ2VvbWV0cnlGYWN0b3J5PWUsdGhpcy5wdExvY2F0b3I9bn1mdW5jdGlvbiBNaSgpe3RoaXMub3A9bnVsbCx0aGlzLmdlb21ldHJ5RmFjdG9yeT1udWxsLHRoaXMucmVzdWx0UG9pbnRMaXN0PW5ldyBfO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTthcmd1bWVudHNbMl0sdGhpcy5vcD10LHRoaXMuZ2VvbWV0cnlGYWN0b3J5PWV9ZnVuY3Rpb24gQ2koKXtpZih0aGlzLmxpPW5ldyBpZSx0aGlzLnJlc3VsdFByZWNpc2lvbk1vZGVsPW51bGwsdGhpcy5hcmc9bnVsbCwxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0Q29tcHV0YXRpb25QcmVjaXNpb24odC5nZXRQcmVjaXNpb25Nb2RlbCgpKSx0aGlzLmFyZz1uZXcgQXJyYXkoMSkuZmlsbChudWxsKSx0aGlzLmFyZ1swXT1uZXcgUG4oMCx0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07Q2kuY2FsbCh0aGlzLGUsbixCLk9HQ19TRlNfQk9VTkRBUllfUlVMRSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO2kuZ2V0UHJlY2lzaW9uTW9kZWwoKS5jb21wYXJlVG8oci5nZXRQcmVjaXNpb25Nb2RlbCgpKT49MD90aGlzLnNldENvbXB1dGF0aW9uUHJlY2lzaW9uKGkuZ2V0UHJlY2lzaW9uTW9kZWwoKSk6dGhpcy5zZXRDb21wdXRhdGlvblByZWNpc2lvbihyLmdldFByZWNpc2lvbk1vZGVsKCkpLHRoaXMuYXJnPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuYXJnWzBdPW5ldyBQbigwLGksbyksdGhpcy5hcmdbMV09bmV3IFBuKDEscixvKX19ZnVuY3Rpb24gSWkoKXt0aGlzLnB0cz1udWxsLHRoaXMuX29yaWVudGF0aW9uPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucHRzPXQsdGhpcy5fb3JpZW50YXRpb249SWkub3JpZW50YXRpb24odCl9ZnVuY3Rpb24gT2koKXt0aGlzLmVkZ2VzPW5ldyBfLHRoaXMub2NhTWFwPW5ldyBldH1mdW5jdGlvbiBUaSgpe3RoaXMucHRMb2NhdG9yPW5ldyBFZSx0aGlzLmdlb21GYWN0PW51bGwsdGhpcy5yZXN1bHRHZW9tPW51bGwsdGhpcy5ncmFwaD1udWxsLHRoaXMuZWRnZUxpc3Q9bmV3IE9pLHRoaXMucmVzdWx0UG9seUxpc3Q9bmV3IF8sdGhpcy5yZXN1bHRMaW5lTGlzdD1uZXcgXyx0aGlzLnJlc3VsdFBvaW50TGlzdD1uZXcgXzt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07Q2kuY2FsbCh0aGlzLHQsZSksdGhpcy5ncmFwaD1uZXcgSmUobmV3IHFlKSx0aGlzLmdlb21GYWN0PXQuZ2V0RmFjdG9yeSgpfWZ1bmN0aW9uIFBpKCl7dGhpcy5nZW9tPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuc25hcFRvbGVyYW5jZT1udWxsLHRoaXMuY2JyPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuZ2VvbVswXT10LHRoaXMuZ2VvbVsxXT1lLHRoaXMuY29tcHV0ZVNuYXBUb2xlcmFuY2UoKX1mdW5jdGlvbiBBaSgpe3RoaXMuZ2VvbT1uZXcgQXJyYXkoMikuZmlsbChudWxsKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07dGhpcy5nZW9tWzBdPXQsdGhpcy5nZW9tWzFdPWV9ZnVuY3Rpb24gTGkoKXt0aGlzLmZhY3Rvcnk9bnVsbCx0aGlzLmludGVyaW9yUG9pbnQ9bnVsbCx0aGlzLm1heFdpZHRoPTA7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZmFjdG9yeT10LmdldEZhY3RvcnkoKSx0aGlzLmFkZCh0KX1mdW5jdGlvbiBOaSgpe3RoaXMucG9seT1udWxsLHRoaXMuY2VudHJlWT1udWxsLHRoaXMuaGlZPWkuTUFYX1ZBTFVFLHRoaXMubG9ZPS1pLk1BWF9WQUxVRTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5wb2x5PXQsdGhpcy5oaVk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkuZ2V0TWF4WSgpLHRoaXMubG9ZPXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmdldE1pblkoKSx0aGlzLmNlbnRyZVk9TGkuYXZnKHRoaXMubG9ZLHRoaXMuaGlZKX1mdW5jdGlvbiBraSgpe3RoaXMuZ2VvbUZhY3Rvcnk9bnVsbCx0aGlzLnNraXBFbXB0eT0hMSx0aGlzLmlucHV0R2VvbXM9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5nZW9tRmFjdG9yeT1raS5leHRyYWN0RmFjdG9yeSh0KSx0aGlzLmlucHV0R2VvbXM9dH1mdW5jdGlvbiBSaSgpe3RoaXMucG9pbnRHZW9tPW51bGwsdGhpcy5vdGhlckdlb209bnVsbCx0aGlzLmdlb21GYWN0PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMucG9pbnRHZW9tPXQsdGhpcy5vdGhlckdlb209ZSx0aGlzLmdlb21GYWN0PWUuZ2V0RmFjdG9yeSgpfWZ1bmN0aW9uIERpKCl7dGhpcy5zb3J0SW5kZXg9LTEsdGhpcy5jb21wcz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnNvcnRJbmRleD10LHRoaXMuY29tcHM9ZX1mdW5jdGlvbiBGaSgpe3RoaXMuaW5wdXRQb2x5cz1udWxsLHRoaXMuZ2VvbUZhY3Rvcnk9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbnB1dFBvbHlzPXQsbnVsbD09PXRoaXMuaW5wdXRQb2x5cyYmKHRoaXMuaW5wdXRQb2x5cz1uZXcgXyl9ZnVuY3Rpb24gQmkoKXtpZih0aGlzLnBvbHlnb25zPW5ldyBfLHRoaXMubGluZXM9bmV3IF8sdGhpcy5wb2ludHM9bmV3IF8sdGhpcy5nZW9tRmFjdD1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihMcihhcmd1bWVudHNbMF0scCkpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4dHJhY3QodCl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmV4dHJhY3QoZSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTt0aGlzLmdlb21GYWN0PWksdGhpcy5leHRyYWN0KG4pfX1mdW5jdGlvbiBqaSgpe31mdW5jdGlvbiBVaSgpe3RoaXMuY2VudHJvaWQ9bnVsbCx0aGlzLm1pbkRpc3RhbmNlPWkuTUFYX1ZBTFVFLHRoaXMuaW50ZXJpb3JQb2ludD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNlbnRyb2lkPXQuZ2V0Q2VudHJvaWQoKS5nZXRDb29yZGluYXRlKCksdGhpcy5hZGRJbnRlcmlvcih0KSxudWxsPT09dGhpcy5pbnRlcmlvclBvaW50JiZ0aGlzLmFkZEVuZHBvaW50cyh0KX1mdW5jdGlvbiB6aSgpe2lmKHRoaXMuaW5wdXRHZW9tPW51bGwsdGhpcy5pc0Nsb3NlZEVuZHBvaW50c0luSW50ZXJpb3I9ITAsdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbnB1dEdlb209dH1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07dGhpcy5pbnB1dEdlb209ZSx0aGlzLmlzQ2xvc2VkRW5kcG9pbnRzSW5JbnRlcmlvcj0hbi5pc0luQm91bmRhcnkoMil9fWZ1bmN0aW9uIEdpKCl7dGhpcy5wdD1udWxsLHRoaXMuaXNDbG9zZWQ9bnVsbCx0aGlzLmRlZ3JlZT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnB0PXQsdGhpcy5pc0Nsb3NlZD0hMSx0aGlzLmRlZ3JlZT0wfWZ1bmN0aW9uIFZpKCl7aWYodGhpcy5xdWFkcmFudFNlZ21lbnRzPVZpLkRFRkFVTFRfUVVBRFJBTlRfU0VHTUVOVFMsdGhpcy5lbmRDYXBTdHlsZT1WaS5DQVBfUk9VTkQsdGhpcy5qb2luU3R5bGU9VmkuSk9JTl9ST1VORCx0aGlzLm1pdHJlTGltaXQ9VmkuREVGQVVMVF9NSVRSRV9MSU1JVCx0aGlzLl9pc1NpbmdsZVNpZGVkPSExLHRoaXMuc2ltcGxpZnlGYWN0b3I9VmkuREVGQVVMVF9TSU1QTElGWV9GQUNUT1IsMD09PWFyZ3VtZW50cy5sZW5ndGgpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNldFF1YWRyYW50U2VnbWVudHModCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuc2V0UXVhZHJhbnRTZWdtZW50cyhlKSx0aGlzLnNldEVuZENhcFN0eWxlKG4pfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXSxhPWFyZ3VtZW50c1szXTt0aGlzLnNldFF1YWRyYW50U2VnbWVudHMoaSksdGhpcy5zZXRFbmRDYXBTdHlsZShyKSx0aGlzLnNldEpvaW5TdHlsZShvKSx0aGlzLnNldE1pdHJlTGltaXQoYSl9fWZ1bmN0aW9uIFhpKHQpe3RoaXMubWVzc2FnZT10fHxcIlwifWZ1bmN0aW9uIEhpKCl7dGhpcy5hcnJheV89W119ZnVuY3Rpb24gcWkoKXt0aGlzLm1pbkluZGV4PS0xLHRoaXMubWluQ29vcmQ9bnVsbCx0aGlzLm1pbkRlPW51bGwsdGhpcy5vcmllbnRlZERlPW51bGx9ZnVuY3Rpb24gWWkoKXt0aGlzLmFycmF5Xz1bXX1mdW5jdGlvbiBXaSgpe3RoaXMuZmluZGVyPW51bGwsdGhpcy5kaXJFZGdlTGlzdD1uZXcgXyxcbnRoaXMubm9kZXM9bmV3IF8sdGhpcy5yaWdodE1vc3RDb29yZD1udWxsLHRoaXMuZW52PW51bGwsdGhpcy5maW5kZXI9bmV3IHFpfWZ1bmN0aW9uIFppKCl7dGhpcy5pbnB1dExpbmU9bnVsbCx0aGlzLmRpc3RhbmNlVG9sPW51bGwsdGhpcy5pc0RlbGV0ZWQ9bnVsbCx0aGlzLmFuZ2xlT3JpZW50YXRpb249YWUuQ09VTlRFUkNMT0NLV0lTRTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbnB1dExpbmU9dH1mdW5jdGlvbiBKaSgpe3RoaXMucHRMaXN0PW51bGwsdGhpcy5wcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMubWluaW1pbVZlcnRleERpc3RhbmNlPTAsdGhpcy5wdExpc3Q9bmV3IF99ZnVuY3Rpb24gS2koKXt9ZnVuY3Rpb24gUWkoKXt0aGlzLm1heEN1cnZlU2VnbWVudEVycm9yPTAsdGhpcy5maWxsZXRBbmdsZVF1YW50dW09bnVsbCx0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3I9MSx0aGlzLnNlZ0xpc3Q9bnVsbCx0aGlzLmRpc3RhbmNlPTAsdGhpcy5wcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMuYnVmUGFyYW1zPW51bGwsdGhpcy5saT1udWxsLHRoaXMuczA9bnVsbCx0aGlzLnMxPW51bGwsdGhpcy5zMj1udWxsLHRoaXMuc2VnMD1uZXcgc2UsdGhpcy5zZWcxPW5ldyBzZSx0aGlzLm9mZnNldDA9bmV3IHNlLHRoaXMub2Zmc2V0MT1uZXcgc2UsdGhpcy5zaWRlPTAsdGhpcy5faGFzTmFycm93Q29uY2F2ZUFuZ2xlPSExO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLnByZWNpc2lvbk1vZGVsPXQsdGhpcy5idWZQYXJhbXM9ZSx0aGlzLmxpPW5ldyBpZSx0aGlzLmZpbGxldEFuZ2xlUXVhbnR1bT1NYXRoLlBJLzIvZS5nZXRRdWFkcmFudFNlZ21lbnRzKCksZS5nZXRRdWFkcmFudFNlZ21lbnRzKCk+PTgmJmUuZ2V0Sm9pblN0eWxlKCk9PT1WaS5KT0lOX1JPVU5EJiYodGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPVFpLk1BWF9DTE9TSU5HX1NFR19MRU5fRkFDVE9SKSx0aGlzLmluaXQobil9ZnVuY3Rpb24gJGkoKXt0aGlzLmRpc3RhbmNlPTAsdGhpcy5wcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMuYnVmUGFyYW1zPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMucHJlY2lzaW9uTW9kZWw9dCx0aGlzLmJ1ZlBhcmFtcz1lfWZ1bmN0aW9uIHRyKCl7dGhpcy5zdWJncmFwaHM9bnVsbCx0aGlzLnNlZz1uZXcgc2UsdGhpcy5jZ2E9bmV3IGFlO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnN1YmdyYXBocz10fWZ1bmN0aW9uIGVyKCl7dGhpcy51cHdhcmRTZWc9bnVsbCx0aGlzLmxlZnREZXB0aD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLnVwd2FyZFNlZz1uZXcgc2UodCksdGhpcy5sZWZ0RGVwdGg9ZX1mdW5jdGlvbiBucigpe3RoaXMucDA9bnVsbCx0aGlzLnAxPW51bGwsdGhpcy5wMj1udWxsO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTt0aGlzLnAwPXQsdGhpcy5wMT1lLHRoaXMucDI9bn1mdW5jdGlvbiBpcigpe3RoaXMuaW5wdXRHZW9tPW51bGwsdGhpcy5kaXN0YW5jZT1udWxsLHRoaXMuY3VydmVCdWlsZGVyPW51bGwsdGhpcy5jdXJ2ZUxpc3Q9bmV3IF87dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuaW5wdXRHZW9tPXQsdGhpcy5kaXN0YW5jZT1lLHRoaXMuY3VydmVCdWlsZGVyPW59ZnVuY3Rpb24gcnIoKXt0aGlzLl9oYXNJbnRlcnNlY3Rpb249ITEsdGhpcy5oYXNQcm9wZXI9ITEsdGhpcy5oYXNQcm9wZXJJbnRlcmlvcj0hMSx0aGlzLmhhc0ludGVyaW9yPSExLHRoaXMucHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ9bnVsbCx0aGlzLmxpPW51bGwsdGhpcy5pc1NlbGZJbnRlcnNlY3Rpb249bnVsbCx0aGlzLm51bUludGVyc2VjdGlvbnM9MCx0aGlzLm51bUludGVyaW9ySW50ZXJzZWN0aW9ucz0wLHRoaXMubnVtUHJvcGVySW50ZXJzZWN0aW9ucz0wLHRoaXMubnVtVGVzdHM9MDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5saT10fWZ1bmN0aW9uIG9yKCl7dGhpcy5idWZQYXJhbXM9bnVsbCx0aGlzLndvcmtpbmdQcmVjaXNpb25Nb2RlbD1udWxsLHRoaXMud29ya2luZ05vZGVyPW51bGwsdGhpcy5nZW9tRmFjdD1udWxsLHRoaXMuZ3JhcGg9bnVsbCx0aGlzLmVkZ2VMaXN0PW5ldyBPaTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5idWZQYXJhbXM9dH1mdW5jdGlvbiBhcigpe2lmKHRoaXMubm9kZXI9bnVsbCx0aGlzLnNjYWxlRmFjdG9yPW51bGwsdGhpcy5vZmZzZXRYPW51bGwsdGhpcy5vZmZzZXRZPW51bGwsdGhpcy5pc1NjYWxlZD0hMSwyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2FyLmNhbGwodGhpcyx0LGUsMCwwKX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07YXJndW1lbnRzWzJdLGFyZ3VtZW50c1szXSx0aGlzLm5vZGVyPW4sdGhpcy5zY2FsZUZhY3Rvcj1pLHRoaXMuaXNTY2FsZWQ9IXRoaXMuaXNJbnRlZ2VyUHJlY2lzaW9uKCl9fWZ1bmN0aW9uIHNyKCl7dGhpcy5saT1uZXcgaWUsdGhpcy5zZWdTdHJpbmdzPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2VnU3RyaW5ncz10fWZ1bmN0aW9uIHVyKCl7dGhpcy5saT1udWxsLHRoaXMucHQ9bnVsbCx0aGlzLm9yaWdpbmFsUHQ9bnVsbCx0aGlzLnB0U2NhbGVkPW51bGwsdGhpcy5wMFNjYWxlZD1udWxsLHRoaXMucDFTY2FsZWQ9bnVsbCx0aGlzLnNjYWxlRmFjdG9yPW51bGwsdGhpcy5taW54PW51bGwsdGhpcy5tYXh4PW51bGwsdGhpcy5taW55PW51bGwsdGhpcy5tYXh5PW51bGwsdGhpcy5jb3JuZXI9bmV3IEFycmF5KDQpLmZpbGwobnVsbCksdGhpcy5zYWZlRW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLGk9YXJndW1lbnRzWzJdO2lmKHRoaXMub3JpZ2luYWxQdD10LHRoaXMucHQ9dCx0aGlzLnNjYWxlRmFjdG9yPWUsdGhpcy5saT1pLGU8PTApdGhyb3cgbmV3IG4oXCJTY2FsZSBmYWN0b3IgbXVzdCBiZSBub24temVyb1wiKTsxIT09ZSYmKHRoaXMucHQ9bmV3IGgodGhpcy5zY2FsZSh0LngpLHRoaXMuc2NhbGUodC55KSksdGhpcy5wMFNjYWxlZD1uZXcgaCx0aGlzLnAxU2NhbGVkPW5ldyBoKSx0aGlzLmluaXRDb3JuZXJzKHRoaXMucHQpfWZ1bmN0aW9uIGxyKCl7dGhpcy5pbmRleD1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmluZGV4PXR9ZnVuY3Rpb24gY3IoKXtRZS5hcHBseSh0aGlzKSx0aGlzLmhvdFBpeGVsPW51bGwsdGhpcy5wYXJlbnRFZGdlPW51bGwsdGhpcy5ob3RQaXhlbFZlcnRleEluZGV4PW51bGwsdGhpcy5faXNOb2RlQWRkZWQ9ITE7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdO3RoaXMuaG90UGl4ZWw9dCx0aGlzLnBhcmVudEVkZ2U9ZSx0aGlzLmhvdFBpeGVsVmVydGV4SW5kZXg9bn1mdW5jdGlvbiBocigpe3RoaXMubGk9bnVsbCx0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9ucz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmxpPXQsdGhpcy5pbnRlcmlvckludGVyc2VjdGlvbnM9bmV3IF99ZnVuY3Rpb24gZnIoKXt0aGlzLnBtPW51bGwsdGhpcy5saT1udWxsLHRoaXMuc2NhbGVGYWN0b3I9bnVsbCx0aGlzLm5vZGVyPW51bGwsdGhpcy5wb2ludFNuYXBwZXI9bnVsbCx0aGlzLm5vZGVkU2VnU3RyaW5ncz1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnBtPXQsdGhpcy5saT1uZXcgaWUsdGhpcy5saS5zZXRQcmVjaXNpb25Nb2RlbCh0KSx0aGlzLnNjYWxlRmFjdG9yPXQuZ2V0U2NhbGUoKX1mdW5jdGlvbiBkcigpe2lmKHRoaXMuYXJnR2VvbT1udWxsLHRoaXMuZGlzdGFuY2U9bnVsbCx0aGlzLmJ1ZlBhcmFtcz1uZXcgVmksdGhpcy5yZXN1bHRHZW9tZXRyeT1udWxsLHRoaXMuc2F2ZUV4Y2VwdGlvbj1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5hcmdHZW9tPXR9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuYXJnR2VvbT1lLHRoaXMuYnVmUGFyYW1zPW59fWZ1bmN0aW9uIHByKCl7dGhpcy50cmVlU2V0PW5ldyBydCx0aGlzLmxpc3Q9bmV3IF99ZnVuY3Rpb24gZ3IoKXtpZih0aGlzLmdlb21GYWN0b3J5PW51bGwsdGhpcy5pbnB1dFB0cz1udWxsLDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07Z3IuY2FsbCh0aGlzLGdyLmV4dHJhY3RDb29yZGluYXRlcyh0KSx0LmdldEZhY3RvcnkoKSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuaW5wdXRQdHM9cHIuZmlsdGVyQ29vcmRpbmF0ZXMoZSksdGhpcy5nZW9tRmFjdG9yeT1ufX1mdW5jdGlvbiB2cigpe3RoaXMub3JpZ2luPW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMub3JpZ2luPXR9ZnVuY3Rpb24gbXIoKXt0aGlzLmFyZWFCYXNlUHQ9bnVsbCx0aGlzLnRyaWFuZ2xlQ2VudDM9bmV3IGgsdGhpcy5hcmVhc3VtMj0wLHRoaXMuY2czPW5ldyBoLHRoaXMubGluZUNlbnRTdW09bmV3IGgsdGhpcy50b3RhbExlbmd0aD0wLHRoaXMucHRDb3VudD0wLHRoaXMucHRDZW50U3VtPW5ldyBoO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmFyZWFCYXNlUHQ9bnVsbCx0aGlzLmFkZCh0KX1mdW5jdGlvbiB5cigpe2lmKHRoaXMubWF0cml4PW51bGwsMD09PWFyZ3VtZW50cy5sZW5ndGgpdGhpcy5tYXRyaXg9QXJyYXkoMykuZmlsbCgpLm1hcChmdW5jdGlvbigpe3JldHVybiBBcnJheSgzKX0pLHRoaXMuc2V0QWxsKGF0LkZBTFNFKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWlmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciB0PWFyZ3VtZW50c1swXTt5ci5jYWxsKHRoaXMpLHRoaXMuc2V0KHQpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB5cil7dmFyIGU9YXJndW1lbnRzWzBdO3lyLmNhbGwodGhpcyksdGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5JTlRFUklPUl09ZS5tYXRyaXhbUy5JTlRFUklPUl1bUy5JTlRFUklPUl0sdGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5CT1VOREFSWV09ZS5tYXRyaXhbUy5JTlRFUklPUl1bUy5CT1VOREFSWV0sdGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl09ZS5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl0sdGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5JTlRFUklPUl09ZS5tYXRyaXhbUy5CT1VOREFSWV1bUy5JTlRFUklPUl0sdGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5CT1VOREFSWV09ZS5tYXRyaXhbUy5CT1VOREFSWV1bUy5CT1VOREFSWV0sdGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5FWFRFUklPUl09ZS5tYXRyaXhbUy5CT1VOREFSWV1bUy5FWFRFUklPUl0sdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl09ZS5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl0sdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5CT1VOREFSWV09ZS5tYXRyaXhbUy5FWFRFUklPUl1bUy5CT1VOREFSWV0sdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5FWFRFUklPUl09ZS5tYXRyaXhbUy5FWFRFUklPUl1bUy5FWFRFUklPUl19fWZ1bmN0aW9uIF9yKCl7dGhpcy5saT1uZXcgaWUsdGhpcy5wdExvY2F0b3I9bmV3IEVlLHRoaXMuYXJnPW51bGwsdGhpcy5ub2Rlcz1uZXcgWWUobmV3IFJuKSx0aGlzLmltPW51bGwsdGhpcy5pc29sYXRlZEVkZ2VzPW5ldyBfLHRoaXMuaW52YWxpZFBvaW50PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuYXJnPXR9ZnVuY3Rpb24gYnIoKXt0aGlzLnJlY3RFbnY9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yZWN0RW52PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpfWZ1bmN0aW9uIHhyKCl7dGhpcy5saT1uZXcgaWUsdGhpcy5yZWN0RW52PW51bGwsdGhpcy5kaWFnVXAwPW51bGwsdGhpcy5kaWFnVXAxPW51bGwsdGhpcy5kaWFnRG93bjA9bnVsbCx0aGlzLmRpYWdEb3duMT1udWxsO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnJlY3RFbnY9dCx0aGlzLmRpYWdVcDA9bmV3IGgodC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpLHRoaXMuZGlhZ1VwMT1uZXcgaCh0LmdldE1heFgoKSx0LmdldE1heFkoKSksdGhpcy5kaWFnRG93bjA9bmV3IGgodC5nZXRNaW5YKCksdC5nZXRNYXhZKCkpLHRoaXMuZGlhZ0Rvd24xPW5ldyBoKHQuZ2V0TWF4WCgpLHQuZ2V0TWluWSgpKX1mdW5jdGlvbiB3cigpe3RoaXMuX2lzRG9uZT0hMX1mdW5jdGlvbiBFcigpe3RoaXMucmVjdGFuZ2xlPW51bGwsdGhpcy5yZWN0RW52PW51bGw7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMucmVjdGFuZ2xlPXQsdGhpcy5yZWN0RW52PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpfWZ1bmN0aW9uIFNyKCl7d3IuYXBwbHkodGhpcyksdGhpcy5yZWN0RW52PW51bGwsdGhpcy5faW50ZXJzZWN0cz0hMTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yZWN0RW52PXR9ZnVuY3Rpb24gTXIoKXt3ci5hcHBseSh0aGlzKSx0aGlzLnJlY3RTZXE9bnVsbCx0aGlzLnJlY3RFbnY9bnVsbCx0aGlzLl9jb250YWluc1BvaW50PSExO3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnJlY3RTZXE9dC5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0aGlzLnJlY3RFbnY9dC5nZXRFbnZlbG9wZUludGVybmFsKCl9ZnVuY3Rpb24gQ3IoKXt3ci5hcHBseSh0aGlzKSx0aGlzLnJlY3RFbnY9bnVsbCx0aGlzLnJlY3RJbnRlcnNlY3Rvcj1udWxsLHRoaXMuaGFzSW50ZXJzZWN0aW9uPSExLHRoaXMucDA9bmV3IGgsdGhpcy5wMT1uZXcgaDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5yZWN0RW52PXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLHRoaXMucmVjdEludGVyc2VjdG9yPW5ldyB4cih0aGlzLnJlY3RFbnYpfWZ1bmN0aW9uIElyKCl7aWYodGhpcy5fcmVsYXRlPW51bGwsMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtDaS5jYWxsKHRoaXMsdCxlKSx0aGlzLl9yZWxhdGU9bmV3IF9yKHRoaXMuYXJnKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl07Q2kuY2FsbCh0aGlzLG4saSxyKSx0aGlzLl9yZWxhdGU9bmV3IF9yKHRoaXMuYXJnKX19ZnVuY3Rpb24gT3IoKXt0aGlzLmNlbnRyb2lkPW51bGwsdGhpcy5taW5EaXN0YW5jZT1pLk1BWF9WQUxVRSx0aGlzLmludGVyaW9yUG9pbnQ9bnVsbDt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5jZW50cm9pZD10LmdldENlbnRyb2lkKCkuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuYWRkKHQpfVwiZmlsbFwiaW4gQXJyYXkucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLFwiZmlsbFwiLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dGhpc3x8bnVsbD09PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcih0aGlzK1wiIGlzIG5vdCBhbiBvYmplY3RcIik7dmFyIGU9T2JqZWN0KHRoaXMpLG49TWF0aC5tYXgoTWF0aC5taW4oZS5sZW5ndGgsOTAwNzE5OTI1NDc0MDk5MSksMCl8fDAsaT0xIGluIGFyZ3VtZW50cz9wYXJzZUludChOdW1iZXIoYXJndW1lbnRzWzFdKSwxMCl8fDA6MDtpPWk8MD9NYXRoLm1heChuK2ksMCk6TWF0aC5taW4oaSxuKTt2YXIgcj0yIGluIGFyZ3VtZW50cyYmdm9pZCAwIT09YXJndW1lbnRzWzJdP3BhcnNlSW50KE51bWJlcihhcmd1bWVudHNbMl0pLDEwKXx8MDpuO2ZvcihyPXI8MD9NYXRoLm1heChuK2FyZ3VtZW50c1syXSwwKTpNYXRoLm1pbihyLG4pO2k8cjspZVtpXT10LCsraTtyZXR1cm4gZX0sd3JpdGFibGU6ITB9KSxOdW1iZXIuaXNGaW5pdGU9TnVtYmVyLmlzRmluaXRlfHxmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaXNGaW5pdGUodCl9LE51bWJlci5pc0ludGVnZXI9TnVtYmVyLmlzSW50ZWdlcnx8ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmlzRmluaXRlKHQpJiZNYXRoLmZsb29yKHQpPT09dH0sTnVtYmVyLnBhcnNlRmxvYXQ9TnVtYmVyLnBhcnNlRmxvYXR8fHBhcnNlRmxvYXQsTnVtYmVyLmlzTmFOPU51bWJlci5pc05hTnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQhPT10fSxNYXRoLnRydW5jPU1hdGgudHJ1bmN8fGZ1bmN0aW9uKHQpe3JldHVybiB0PDA/TWF0aC5jZWlsKHQpOk1hdGguZmxvb3IodCl9O3ZhciBUcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKWUuaGFzT3duUHJvcGVydHkobikmJih0W25dPWVbbl0pfTtUcihlLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZX19KSxlLmVxdWFsc1dpdGhUb2xlcmFuY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBNYXRoLmFicyh0LWUpPD1ufSxpLmlzTmFOPWZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIuaXNOYU4odCl9LGkuZG91YmxlVG9Mb25nQml0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH0saS5sb25nQml0c1RvRG91YmxlPWZ1bmN0aW9uKHQpe3JldHVybiB0fSxpLmlzSW5maW5pdGU9ZnVuY3Rpb24odCl7cmV0dXJuIU51bWJlci5pc0Zpbml0ZSh0KX0saS5NQVhfVkFMVUU9TnVtYmVyLk1BWF9WQUxVRSx1LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksdS5wcm90b3R5cGUuY29uc3RydWN0b3I9RXJyb3I7dmFyIFByPWZ1bmN0aW9uKHQsZSl7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSksdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dH07UHIobCx1KSxUcihsLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbH19KSxUcihjLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gY319KSxjLnNob3VsZE5ldmVyUmVhY2hIZXJlPWZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpYy5zaG91bGROZXZlclJlYWNoSGVyZShudWxsKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhyb3cgbmV3IGwoXCJTaG91bGQgbmV2ZXIgcmVhY2ggaGVyZVwiKyhudWxsIT09dD9cIjogXCIrdDpcIlwiKSl9fSxjLmlzVHJ1ZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07Yy5pc1RydWUodCxudWxsKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYoIWUpdGhyb3cgbnVsbD09PW4/bmV3IGw6bmV3IGwobil9fSxjLmVxdWFscz1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07Yy5lcXVhbHModCxlLG51bGwpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTtpZighaS5lcXVhbHMobikpdGhyb3cgbmV3IGwoXCJFeHBlY3RlZCBcIituK1wiIGJ1dCBlbmNvdW50ZXJlZCBcIitpKyhudWxsIT09cj9cIjogXCIrcjpcIlwiKSl9fSxUcihoLnByb3RvdHlwZSx7c2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlKXtzd2l0Y2godCl7Y2FzZSBoLlg6dGhpcy54PWU7YnJlYWs7Y2FzZSBoLlk6dGhpcy55PWU7YnJlYWs7Y2FzZSBoLlo6dGhpcy56PWU7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgbihcIkludmFsaWQgb3JkaW5hdGUgaW5kZXg6IFwiK3QpfX0sZXF1YWxzMkQ6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLng9PT10LngmJnRoaXMueT09PXQueX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3JldHVybiEhZS5lcXVhbHNXaXRoVG9sZXJhbmNlKHRoaXMueCxuLngsaSkmJiEhZS5lcXVhbHNXaXRoVG9sZXJhbmNlKHRoaXMueSxuLnksaSl9fSxnZXRPcmRpbmF0ZTpmdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSBoLlg6cmV0dXJuIHRoaXMueDtjYXNlIGguWTpyZXR1cm4gdGhpcy55O2Nhc2UgaC5aOnJldHVybiB0aGlzLnp9dGhyb3cgbmV3IG4oXCJJbnZhbGlkIG9yZGluYXRlIGluZGV4OiBcIit0KX0sZXF1YWxzM0Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD09PXQueCYmdGhpcy55PT09dC55JiYodGhpcy56PT09dC56fHxpLmlzTmFOKHRoaXMueikmJmkuaXNOYU4odC56KSl9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGgmJnRoaXMuZXF1YWxzMkQodCl9LGVxdWFsSW5aOmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuZXF1YWxzV2l0aFRvbGVyYW5jZSh0aGlzLnosdC56LG4pfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy54PGUueD8tMTp0aGlzLng+ZS54PzE6dGhpcy55PGUueT8tMTp0aGlzLnk+ZS55PzE6MH0sY2xvbmU6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG51bGx9Y2F0Y2godCl7aWYodCBpbnN0YW5jZW9mIENsb25lTm90U3VwcG9ydGVkRXhjZXB0aW9uKXJldHVybiBjLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwidGhpcyBzaG91bGRuJ3QgaGFwcGVuIGJlY2F1c2UgdGhpcyBjbGFzcyBpcyBDbG9uZWFibGVcIiksbnVsbDt0aHJvdyB0fWZpbmFsbHl7fX0sY29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIihcIit0aGlzLngrXCIsIFwiK3RoaXMueStcIiwgXCIrdGhpcy56K1wiKVwifSxkaXN0YW5jZTNEOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueC10Lngsbj10aGlzLnktdC55LGk9dGhpcy56LXQuejtyZXR1cm4gTWF0aC5zcXJ0KGUqZStuKm4raSppKX0sZGlzdGFuY2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LXQueCxuPXRoaXMueS10Lnk7cmV0dXJuIE1hdGguc3FydChlKmUrbipuKX0saGFzaENvZGU6ZnVuY3Rpb24oKXt2YXIgdD0xNztyZXR1cm4gdD0zNyp0K2guaGFzaENvZGUodGhpcy54KSx0PTM3KnQraC5oYXNoQ29kZSh0aGlzLnkpfSxzZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3RoaXMueD10LngsdGhpcy55PXQueSx0aGlzLno9dC56fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyLG8sc119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGh9fSksaC5oYXNoQ29kZT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1pLmRvdWJsZVRvTG9uZ0JpdHModCk7cmV0dXJuIE1hdGgudHJ1bmMoZV5lPj4+MzIpfX0sVHIoZi5wcm90b3R5cGUse2NvbXBhcmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LGk9ZSxyPWYuY29tcGFyZShuLngsaS54KTtpZigwIT09cilyZXR1cm4gcjt2YXIgbz1mLmNvbXBhcmUobi55LGkueSk7cmV0dXJuIDAhPT1vP286dGhpcy5kaW1lbnNpb25zVG9UZXN0PD0yPzA6Zi5jb21wYXJlKG4ueixpLnopfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblthXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZn19KSxmLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdDxlPy0xOnQ+ZT8xOmkuaXNOYU4odCk/aS5pc05hTihlKT8wOi0xOmkuaXNOYU4oZSk/MTowfSxoLkRpbWVuc2lvbmFsQ29tcGFyYXRvcj1mLGguc2VyaWFsVmVyc2lvblVJRD0weDVjYmYyYzIzNWM3ZTU4MDAsaC5OVUxMX09SRElOQVRFPWkuTmFOLGguWD0wLGguWT0xLGguWj0yLGQucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXt9LGQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt9LGQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe30scC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKCl7fSxwLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24oKXt9LHAucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXt9LHAucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7fSxwLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7fSxwLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7fSxwLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXt9LGcucHJvdG90eXBlPW5ldyBFcnJvcixnLnByb3RvdHlwZS5uYW1lPVwiSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvblwiLHYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocC5wcm90b3R5cGUpLHYucHJvdG90eXBlLmNvbnN0cnVjdG9yPXYsdi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7fSx2LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oKXt9LHYucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXt9LG0ucHJvdG90eXBlPW5ldyBFcnJvcixtLnByb3RvdHlwZS5uYW1lPVwiTm9TdWNoRWxlbWVudEV4Y2VwdGlvblwiLHkucHJvdG90eXBlPW5ldyBFcnJvcix5LnByb3RvdHlwZS5uYW1lPVwiT3BlcmF0aW9uTm90U3VwcG9ydGVkXCIsXy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh2LnByb3RvdHlwZSksXy5wcm90b3R5cGUuY29uc3RydWN0b3I9XyxfLnByb3RvdHlwZS5lbnN1cmVDYXBhY2l0eT1mdW5jdGlvbigpe30sXy5wcm90b3R5cGUuaW50ZXJmYWNlc189ZnVuY3Rpb24oKXtyZXR1cm5bdixwXX0sXy5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLmFycmF5Xy5wdXNoKHQpOnRoaXMuYXJyYXlfLnNwbGljZShhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKSwhMH0sXy5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmFycmF5Xz1bXX0sXy5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXRoaXMuYWRkKGUubmV4dCgpKTtyZXR1cm4hMH0sXy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5hcnJheV9bdF07cmV0dXJuIHRoaXMuYXJyYXlfW3RdPWUsbn0sXy5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFyKHRoaXMpfSxfLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYodDwwfHx0Pj10aGlzLnNpemUoKSl0aHJvdyBuZXcgZztyZXR1cm4gdGhpcy5hcnJheV9bdF19LF8ucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sXy5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Xy5sZW5ndGh9LF8ucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspdC5wdXNoKHRoaXMuYXJyYXlfW2VdKTtyZXR1cm4gdH0sXy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0hMSxuPTAsaT10aGlzLmFycmF5Xy5sZW5ndGg7bjxpO24rKylpZih0aGlzLmFycmF5X1tuXT09PXQpe3RoaXMuYXJyYXlfLnNwbGljZShuLDEpLGU9ITA7YnJlYWt9cmV0dXJuIGV9O3ZhciBBcj1mdW5jdGlvbih0KXt0aGlzLmFycmF5TGlzdF89dCx0aGlzLnBvc2l0aW9uXz0wfTtBci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb25fPT09dGhpcy5hcnJheUxpc3RfLnNpemUoKSl0aHJvdyBuZXcgbTtyZXR1cm4gdGhpcy5hcnJheUxpc3RfLmdldCh0aGlzLnBvc2l0aW9uXysrKX0sQXIucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbl88dGhpcy5hcnJheUxpc3RfLnNpemUoKX0sQXIucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheUxpc3RfLnNldCh0aGlzLnBvc2l0aW9uXy0xLHQpfSxBci5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5hcnJheUxpc3RfLnJlbW92ZSh0aGlzLmFycmF5TGlzdF8uZ2V0KHRoaXMucG9zaXRpb25fKSl9LFByKGIsXyksVHIoYi5wcm90b3R5cGUse2dldENvb3JkaW5hdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0KHQpfSxhZGRBbGw6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPSExLGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl0aGlzLmFkZChpLm5leHQoKSxlKSxuPSEwO3JldHVybiBufXJldHVybiBfLnByb3RvdHlwZS5hZGRBbGwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1fLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpLGU9MDtlPHRoaXMuc2l6ZSgpO2UrKyl0LmFkZChlLHRoaXMuZ2V0KGUpLmNvcHkoKSk7cmV0dXJuIHR9LHRvQ29vcmRpbmF0ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9BcnJheShiLmNvb3JkQXJyYXlUeXBlKX0sYWRkOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtfLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHQpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYWRkKGUsbiwhMCksITB9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdO2lmKCFyJiZ0aGlzLnNpemUoKT49MSl7dmFyIG89dGhpcy5nZXQodGhpcy5zaXplKCktMSk7aWYoby5lcXVhbHMyRChpKSlyZXR1cm4gbnVsbH1fLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLGkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJlwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgYT1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYWRkKGEscyksITB9fWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwiYm9vbGVhblwiPT10eXBlb2YgYXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5JiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHU9YXJndW1lbnRzWzBdLGw9YXJndW1lbnRzWzFdLGM9YXJndW1lbnRzWzJdO2lmKGMpZm9yKHZhciBmPTA7Zjx1Lmxlbmd0aDtmKyspdGhpcy5hZGQodVtmXSxsKTtlbHNlIGZvcih2YXIgZj11Lmxlbmd0aC0xO2Y+PTA7Zi0tKXRoaXMuYWRkKHVbZl0sbCk7cmV0dXJuITB9aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJk51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBoKXt2YXIgZD1hcmd1bWVudHNbMF0scD1hcmd1bWVudHNbMV0sZz1hcmd1bWVudHNbMl07aWYoIWcpe3ZhciB2PXRoaXMuc2l6ZSgpO2lmKHY+MCl7aWYoZD4wKXt2YXIgbT10aGlzLmdldChkLTEpO2lmKG0uZXF1YWxzMkQocCkpcmV0dXJuIG51bGx9aWYoZDx2KXt2YXIgeT10aGlzLmdldChkKTtpZih5LmVxdWFsczJEKHApKXJldHVybiBudWxsfX19Xy5wcm90b3R5cGUuYWRkLmNhbGwodGhpcyxkLHApfX1lbHNlIGlmKDQ9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgYj1hcmd1bWVudHNbMF0seD1hcmd1bWVudHNbMV0sdz1hcmd1bWVudHNbMl0sRT1hcmd1bWVudHNbM10sUz0xO3c+RSYmKFM9LTEpO2Zvcih2YXIgZj13O2YhPT1FO2YrPVMpdGhpcy5hZGQoYltmXSx4KTtyZXR1cm4hMH19LGNsb3NlUmluZzpmdW5jdGlvbigpe3RoaXMuc2l6ZSgpPjAmJnRoaXMuYWRkKG5ldyBoKHRoaXMuZ2V0KDApKSwhMSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGJ9fSksYi5jb29yZEFycmF5VHlwZT1uZXcgQXJyYXkoMCkuZmlsbChudWxsKSxUcih4LnByb3RvdHlwZSx7Z2V0QXJlYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFdpZHRoKCkqdGhpcy5nZXRIZWlnaHQoKX0sZXF1YWxzOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIHgpKXJldHVybiExO3ZhciBlPXQ7cmV0dXJuIHRoaXMuaXNOdWxsKCk/ZS5pc051bGwoKTp0aGlzLm1heHg9PT1lLmdldE1heFgoKSYmdGhpcy5tYXh5PT09ZS5nZXRNYXhZKCkmJnRoaXMubWlueD09PWUuZ2V0TWluWCgpJiZ0aGlzLm1pbnk9PT1lLmdldE1pblkoKX0saW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNOdWxsKCl8fHQuaXNOdWxsKCl8fCF0aGlzLmludGVyc2VjdHModCkpcmV0dXJuIG5ldyB4O3ZhciBlPXRoaXMubWlueD50Lm1pbng/dGhpcy5taW54OnQubWlueCxuPXRoaXMubWlueT50Lm1pbnk/dGhpcy5taW55OnQubWlueTtyZXR1cm4gbmV3IHgoZSx0aGlzLm1heHg8dC5tYXh4P3RoaXMubWF4eDp0Lm1heHgsbix0aGlzLm1heHk8dC5tYXh5P3RoaXMubWF4eTp0Lm1heHkpfSxpc051bGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh4PHRoaXMubWlueH0sZ2V0TWF4WDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heHh9LGNvdmVyczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb3ZlcnModC54LHQueSl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB4KXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIXRoaXMuaXNOdWxsKCkmJiFlLmlzTnVsbCgpJiZlLmdldE1pblgoKT49dGhpcy5taW54JiZlLmdldE1heFgoKTw9dGhpcy5tYXh4JiZlLmdldE1pblkoKT49dGhpcy5taW55JiZlLmdldE1heFkoKTw9dGhpcy5tYXh5fX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07cmV0dXJuIXRoaXMuaXNOdWxsKCkmJm4+PXRoaXMubWlueCYmbjw9dGhpcy5tYXh4JiZpPj10aGlzLm1pbnkmJmk8PXRoaXMubWF4eX19LGludGVyc2VjdHM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB4KXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIXRoaXMuaXNOdWxsKCkmJiF0LmlzTnVsbCgpJiYhKHQubWlueD50aGlzLm1heHh8fHQubWF4eDx0aGlzLm1pbnh8fHQubWlueT50aGlzLm1heHl8fHQubWF4eTx0aGlzLm1pbnkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmludGVyc2VjdHMoZS54LGUueSl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTtyZXR1cm4hdGhpcy5pc051bGwoKSYmIShuPnRoaXMubWF4eHx8bjx0aGlzLm1pbnh8fGk+dGhpcy5tYXh5fHxpPHRoaXMubWlueSl9fSxnZXRNaW5ZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWlueX0sZ2V0TWluWDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbnh9LGV4cGFuZFRvSW5jbHVkZTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmV4cGFuZFRvSW5jbHVkZSh0LngsdC55KX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgeCl7dmFyIGU9YXJndW1lbnRzWzBdO2lmKGUuaXNOdWxsKCkpcmV0dXJuIG51bGw7dGhpcy5pc051bGwoKT8odGhpcy5taW54PWUuZ2V0TWluWCgpLHRoaXMubWF4eD1lLmdldE1heFgoKSx0aGlzLm1pbnk9ZS5nZXRNaW5ZKCksdGhpcy5tYXh5PWUuZ2V0TWF4WSgpKTooZS5taW54PHRoaXMubWlueCYmKHRoaXMubWlueD1lLm1pbngpLGUubWF4eD50aGlzLm1heHgmJih0aGlzLm1heHg9ZS5tYXh4KSxlLm1pbnk8dGhpcy5taW55JiYodGhpcy5taW55PWUubWlueSksZS5tYXh5PnRoaXMubWF4eSYmKHRoaXMubWF4eT1lLm1heHkpKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3RoaXMuaXNOdWxsKCk/KHRoaXMubWlueD1uLHRoaXMubWF4eD1uLHRoaXMubWlueT1pLHRoaXMubWF4eT1pKToobjx0aGlzLm1pbngmJih0aGlzLm1pbng9biksbj50aGlzLm1heHgmJih0aGlzLm1heHg9biksaTx0aGlzLm1pbnkmJih0aGlzLm1pbnk9aSksaT50aGlzLm1heHkmJih0aGlzLm1heHk9aSkpfX0sbWluRXh0ZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5pc051bGwoKSlyZXR1cm4gMDt2YXIgdD10aGlzLmdldFdpZHRoKCksZT10aGlzLmdldEhlaWdodCgpO3JldHVybiB0PGU/dDplfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTnVsbCgpPzA6dGhpcy5tYXh4LXRoaXMubWlueH0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuaXNOdWxsKCk/ZS5pc051bGwoKT8wOi0xOmUuaXNOdWxsKCk/MTp0aGlzLm1pbng8ZS5taW54Py0xOnRoaXMubWlueD5lLm1pbng/MTp0aGlzLm1pbnk8ZS5taW55Py0xOnRoaXMubWlueT5lLm1pbnk/MTp0aGlzLm1heHg8ZS5tYXh4Py0xOnRoaXMubWF4eD5lLm1heHg/MTp0aGlzLm1heHk8ZS5tYXh5Py0xOnRoaXMubWF4eT5lLm1heHk/MTowfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5pc051bGwoKT9udWxsOnZvaWQgdGhpcy5pbml0KHRoaXMuZ2V0TWluWCgpK3QsdGhpcy5nZXRNYXhYKCkrdCx0aGlzLmdldE1pblkoKStlLHRoaXMuZ2V0TWF4WSgpK2UpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiRW52W1wiK3RoaXMubWlueCtcIiA6IFwiK3RoaXMubWF4eCtcIiwgXCIrdGhpcy5taW55K1wiIDogXCIrdGhpcy5tYXh5K1wiXVwifSxzZXRUb051bGw6ZnVuY3Rpb24oKXt0aGlzLm1pbng9MCx0aGlzLm1heHg9LTEsdGhpcy5taW55PTAsdGhpcy5tYXh5PS0xfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc051bGwoKT8wOnRoaXMubWF4eS10aGlzLm1pbnl9LG1heEV4dGVudDpmdW5jdGlvbigpe2lmKHRoaXMuaXNOdWxsKCkpcmV0dXJuIDA7dmFyIHQ9dGhpcy5nZXRXaWR0aCgpLGU9dGhpcy5nZXRIZWlnaHQoKTtyZXR1cm4gdD5lP3Q6ZX0sZXhwYW5kQnk6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuZXhwYW5kQnkodCx0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYodGhpcy5pc051bGwoKSlyZXR1cm4gbnVsbDt0aGlzLm1pbngtPWUsdGhpcy5tYXh4Kz1lLHRoaXMubWlueS09bix0aGlzLm1heHkrPW4sKHRoaXMubWlueD50aGlzLm1heHh8fHRoaXMubWlueT50aGlzLm1heHkpJiZ0aGlzLnNldFRvTnVsbCgpfX0sY29udGFpbnM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB4KXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY292ZXJzKHQpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNvdmVycyhlKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLmNvdmVycyhuLGkpfX0sY2VudHJlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOdWxsKCk/bnVsbDpuZXcgaCgodGhpcy5nZXRNaW5YKCkrdGhpcy5nZXRNYXhYKCkpLzIsKHRoaXMuZ2V0TWluWSgpK3RoaXMuZ2V0TWF4WSgpKS8yKX0saW5pdDpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXRoaXMuc2V0VG9OdWxsKCk7ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5pbml0KHQueCx0LngsdC55LHQueSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHgpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLm1pbng9ZS5taW54LHRoaXMubWF4eD1lLm1heHgsdGhpcy5taW55PWUubWlueSx0aGlzLm1heHk9ZS5tYXh5fX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5pbml0KG4ueCxpLngsbi55LGkueSl9ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzWzNdO3I8bz8odGhpcy5taW54PXIsdGhpcy5tYXh4PW8pOih0aGlzLm1pbng9byx0aGlzLm1heHg9ciksYTxzPyh0aGlzLm1pbnk9YSx0aGlzLm1heHk9cyk6KHRoaXMubWlueT1zLHRoaXMubWF4eT1hKX19LGdldE1heFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh5fSxkaXN0YW5jZTpmdW5jdGlvbih0KXtpZih0aGlzLmludGVyc2VjdHModCkpcmV0dXJuIDA7dmFyIGU9MDt0aGlzLm1heHg8dC5taW54P2U9dC5taW54LXRoaXMubWF4eDp0aGlzLm1pbng+dC5tYXh4JiYoZT10aGlzLm1pbngtdC5tYXh4KTt2YXIgbj0wO3JldHVybiB0aGlzLm1heHk8dC5taW55P249dC5taW55LXRoaXMubWF4eTp0aGlzLm1pbnk+dC5tYXh5JiYobj10aGlzLm1pbnktdC5tYXh5KSwwPT09ZT9uOjA9PT1uP2U6TWF0aC5zcXJ0KGUqZStuKm4pfSxoYXNoQ29kZTpmdW5jdGlvbigpe3ZhciB0PTE3O3JldHVybiB0PTM3KnQraC5oYXNoQ29kZSh0aGlzLm1pbngpLHQ9MzcqdCtoLmhhc2hDb2RlKHRoaXMubWF4eCksdD0zNyp0K2guaGFzaENvZGUodGhpcy5taW55KSx0PTM3KnQraC5oYXNoQ29kZSh0aGlzLm1heHkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyLHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB4fX0pLHguaW50ZXJzZWN0cz1mdW5jdGlvbigpe2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl07cmV0dXJuIG4ueD49KHQueDxlLng/dC54OmUueCkmJm4ueDw9KHQueD5lLng/dC54OmUueCkmJm4ueT49KHQueTxlLnk/dC55OmUueSkmJm4ueTw9KHQueT5lLnk/dC55OmUueSl9aWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXSxhPWFyZ3VtZW50c1szXSxzPU1hdGgubWluKG8ueCxhLngpLHU9TWF0aC5tYXgoby54LGEueCksbD1NYXRoLm1pbihpLngsci54KSxjPU1hdGgubWF4KGkueCxyLngpO3JldHVybiEobD51fHxjPHN8fChzPU1hdGgubWluKG8ueSxhLnkpLHU9TWF0aC5tYXgoby55LGEueSksbD1NYXRoLm1pbihpLnksci55KSxjPU1hdGgubWF4KGkueSxyLnkpLGw+dXx8YzxzKSl9fSx4LnNlcmlhbFZlcnNpb25VSUQ9MHg1MTg0NWNkNTUyMTg5ODAwLFByKEUsdyksVHIoRS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEV9fSksVHIoUy5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFN9fSksUy50b0xvY2F0aW9uU3ltYm9sPWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIFMuRVhURVJJT1I6cmV0dXJuXCJlXCI7Y2FzZSBTLkJPVU5EQVJZOnJldHVyblwiYlwiO2Nhc2UgUy5JTlRFUklPUjpyZXR1cm5cImlcIjtjYXNlIFMuTk9ORTpyZXR1cm5cIi1cIn10aHJvdyBuZXcgbihcIlVua25vd24gbG9jYXRpb24gdmFsdWU6IFwiK3QpfSxTLklOVEVSSU9SPTAsUy5CT1VOREFSWT0xLFMuRVhURVJJT1I9MixTLk5PTkU9LTE7dmFyIExyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW50ZXJmYWNlc18mJnQuaW50ZXJmYWNlc18oKS5pbmRleE9mKGUpPi0xfTtUcihNLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTX19KSxNLmxvZzEwPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgubG9nKHQpO3JldHVybiBpLmlzSW5maW5pdGUoZSk/ZTppLmlzTmFOKGUpP2U6ZS9NLkxPR18xMH0sTS5taW49ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dDtyZXR1cm4gZTxyJiYocj1lKSxuPHImJihyPW4pLGk8ciYmKHI9aSkscn0sTS5jbGFtcD1mdW5jdGlvbigpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdDxlP2U6dD5uP246dH1pZihOdW1iZXIuaXNJbnRlZ2VyKGFyZ3VtZW50c1syXSkmJk51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMV0pKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07cmV0dXJuIGk8cj9yOmk+bz9vOml9fSxNLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdDwwP2UtIC10JWU6dCVlfSxNLm1heD1mdW5jdGlvbigpe2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1hcmd1bWVudHNbMl0saT10O3JldHVybiBlPmkmJihpPWUpLG4+aSYmKGk9biksaX1pZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzWzNdLGk9cjtyZXR1cm4gbz5pJiYoaT1vKSxhPmkmJihpPWEpLHM+aSYmKGk9cyksaX19LE0uYXZlcmFnZT1mdW5jdGlvbih0LGUpe3JldHVybih0K2UpLzJ9LE0uTE9HXzEwPU1hdGgubG9nKDEwKSxDLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7dGhpcy5zdHIrPXR9LEMucHJvdG90eXBlLnNldENoYXJBdD1mdW5jdGlvbih0LGUpe3RoaXMuc3RyPXRoaXMuc3RyLnN1YnN0cigwLHQpK2UrdGhpcy5zdHIuc3Vic3RyKHQrMSl9LEMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0cn0sSS5wcm90b3R5cGUuaW50VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0sSS5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlPHQ/LTE6dGhpcy52YWx1ZT50PzE6MH0sSS5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyLmlzTmFOKHQpfSxPLmlzV2hpdGVzcGFjZT1mdW5jdGlvbih0KXtyZXR1cm4gdDw9MzImJnQ+PTB8fDEyNz09dH0sTy50b1VwcGVyQ2FzZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSxUcihULnByb3RvdHlwZSx7bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGk8dC5oaXx8dGhpcy5oaT09PXQuaGkmJnRoaXMubG88PXQubG99LGV4dHJhY3RTaWduaWZpY2FudERpZ2l0czpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuYWJzKCksaT1ULm1hZ25pdHVkZShuLmhpKSxyPVQuVEVOLnBvdyhpKTtuPW4uZGl2aWRlKHIpLG4uZ3QoVC5URU4pPyhuPW4uZGl2aWRlKFQuVEVOKSxpKz0xKTpuLmx0KFQuT05FKSYmKG49bi5tdWx0aXBseShULlRFTiksaS09MSk7Zm9yKHZhciBvPWkrMSxhPW5ldyBDLHM9VC5NQVhfUFJJTlRfRElHSVRTLTEsdT0wO3U8PXM7dSsrKXt0JiZ1PT09byYmYS5hcHBlbmQoXCIuXCIpO3ZhciBsPU1hdGgudHJ1bmMobi5oaSk7aWYobDwwKWJyZWFrO3ZhciBjPSExLGg9MDtsPjk/KGM9ITAsaD1cIjlcIik6aD1cIjBcIitsLGEuYXBwZW5kKGgpLG49bi5zdWJ0cmFjdChULnZhbHVlT2YobCkpLm11bHRpcGx5KFQuVEVOKSxjJiZuLnNlbGZBZGQoVC5URU4pO3ZhciBmPSEwLGQ9VC5tYWduaXR1ZGUobi5oaSk7aWYoZDwwJiZNYXRoLmFicyhkKT49cy11JiYoZj0hMSksIWYpYnJlYWt9cmV0dXJuIGVbMF09aSxhLnRvU3RyaW5nKCl9LHNxcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm11bHRpcGx5KHRoaXMpfSxkb3VibGVWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhpK3RoaXMubG99LHN1YnRyYWN0OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBUKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuYWRkKHQubmVnYXRlKCkpfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5hZGQoLWUpfX0sZXF1YWxzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5oaT09PXQuaGkmJnRoaXMubG89PT10LmxvfX0saXNaZXJvOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmhpJiYwPT09dGhpcy5sb30sc2VsZlN1YnRyYWN0OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBUKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaXNOYU4oKT90aGlzOnRoaXMuc2VsZkFkZCgtdC5oaSwtdC5sbyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmlzTmFOKCk/dGhpczp0aGlzLnNlbGZBZGQoLWUsMCl9fSxnZXRTcGVjaWFsTnVtYmVyU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNaZXJvKCk/XCIwLjBcIjp0aGlzLmlzTmFOKCk/XCJOYU4gXCI6bnVsbH0sbWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxlKHQpP3RoaXM6dH0sc2VsZkRpdmlkZTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFQpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmRGl2aWRlKHQuaGksdC5sbyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLnNlbGZEaXZpZGUoZSwwKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9bnVsbCxvPW51bGwsYT1udWxsLHM9bnVsbCx1PW51bGwsbD1udWxsLGM9bnVsbCxoPW51bGw7cmV0dXJuIHU9dGhpcy5oaS9uLGw9VC5TUExJVCp1LHI9bC11LGg9VC5TUExJVCpuLHI9bC1yLG89dS1yLGE9aC1uLGM9dSpuLGE9aC1hLHM9bi1hLGg9ciphLWMrcipzK28qYStvKnMsbD0odGhpcy5oaS1jLWgrdGhpcy5sby11KmkpL24saD11K2wsdGhpcy5oaT1oLHRoaXMubG89dS1oK2wsdGhpc319LGR1bXA6ZnVuY3Rpb24oKXtyZXR1cm5cIkREPFwiK3RoaXMuaGkrXCIsIFwiK3RoaXMubG8rXCI+XCJ9LGRpdmlkZTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgVCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bnVsbCxuPW51bGwscj1udWxsLG89bnVsbCxhPW51bGwscz1udWxsLHU9bnVsbCxsPW51bGw7cmV0dXJuIGE9dGhpcy5oaS90LmhpLHM9VC5TUExJVCphLGU9cy1hLGw9VC5TUExJVCp0LmhpLGU9cy1lLG49YS1lLHI9bC10LmhpLHU9YSp0LmhpLHI9bC1yLG89dC5oaS1yLGw9ZSpyLXUrZSpvK24qcituKm8scz0odGhpcy5oaS11LWwrdGhpcy5sby1hKnQubG8pL3QuaGksbD1hK3MsbmV3IFQobCxhLWwrcyl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGM9YXJndW1lbnRzWzBdO3JldHVybiBpLmlzTmFOKGMpP1QuY3JlYXRlTmFOKCk6VC5jb3B5KHRoaXMpLnNlbGZEaXZpZGUoYywwKX19LGdlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhpPnQuaGl8fHRoaXMuaGk9PT10LmhpJiZ0aGlzLmxvPj10LmxvfSxwb3c6ZnVuY3Rpb24odCl7aWYoMD09PXQpcmV0dXJuIFQudmFsdWVPZigxKTt2YXIgZT1uZXcgVCh0aGlzKSxuPVQudmFsdWVPZigxKSxpPU1hdGguYWJzKHQpO2lmKGk+MSlmb3IoO2k+MDspaSUyPT0xJiZuLnNlbGZNdWx0aXBseShlKSwoaS89Mik+MCYmKGU9ZS5zcXIoKSk7ZWxzZSBuPWU7cmV0dXJuIHQ8MD9uLnJlY2lwcm9jYWwoKTpufSxjZWlsOmZ1bmN0aW9uKCl7aWYodGhpcy5pc05hTigpKXJldHVybiBULk5hTjt2YXIgdD1NYXRoLmNlaWwodGhpcy5oaSksZT0wO3JldHVybiB0PT09dGhpcy5oaSYmKGU9TWF0aC5jZWlsKHRoaXMubG8pKSxuZXcgVCh0LGUpfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy5oaTxlLmhpPy0xOnRoaXMuaGk+ZS5oaT8xOnRoaXMubG88ZS5sbz8tMTp0aGlzLmxvPmUubG8/MTowfSxyaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNOYU4oKT90aGlzOnRoaXMuYWRkKC41KS5mbG9vcigpfSxzZXRWYWx1ZTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgVCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmluaXQodCksdGhpc31pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuaW5pdChlKSx0aGlzfX0sbWF4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdlKHQpP3RoaXM6dH0sc3FydDpmdW5jdGlvbigpe2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIFQudmFsdWVPZigwKTtpZih0aGlzLmlzTmVnYXRpdmUoKSlyZXR1cm4gVC5OYU47dmFyIHQ9MS9NYXRoLnNxcnQodGhpcy5oaSksZT10aGlzLmhpKnQsbj1ULnZhbHVlT2YoZSksaT10aGlzLnN1YnRyYWN0KG4uc3FyKCkpLHI9aS5oaSooLjUqdCk7cmV0dXJuIG4uYWRkKHIpfSxzZWxmQWRkOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgVCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLnNlbGZBZGQodC5oaSx0LmxvKX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1udWxsLGk9bnVsbCxyPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGw7cmV0dXJuIHI9dGhpcy5oaStlLGE9ci10aGlzLmhpLG89ci1hLG89ZS1hKyh0aGlzLmhpLW8pLHM9byt0aGlzLmxvLG49citzLGk9cysoci1uKSx0aGlzLmhpPW4raSx0aGlzLmxvPWkrKG4tdGhpcy5oaSksdGhpc319ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHU9YXJndW1lbnRzWzBdLGw9YXJndW1lbnRzWzFdLG49bnVsbCxpPW51bGwsYz1udWxsLGg9bnVsbCxyPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGw7cj10aGlzLmhpK3UsYz10aGlzLmxvK2wsYT1yLXRoaXMuaGkscz1jLXRoaXMubG8sbz1yLWEsaD1jLXMsbz11LWErKHRoaXMuaGktbyksaD1sLXMrKHRoaXMubG8taCksYT1vK2Msbj1yK2EsaT1hKyhyLW4pLGE9aCtpO3ZhciBmPW4rYSxkPWErKG4tZik7cmV0dXJuIHRoaXMuaGk9Zix0aGlzLmxvPWQsdGhpc319LHNlbGZNdWx0aXBseTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFQpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zZWxmTXVsdGlwbHkodC5oaSx0LmxvKX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuc2VsZk11bHRpcGx5KGUsMCl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPW51bGwsbz1udWxsLGE9bnVsbCxzPW51bGwsdT1udWxsLGw9bnVsbDt1PVQuU1BMSVQqdGhpcy5oaSxyPXUtdGhpcy5oaSxsPVQuU1BMSVQqbixyPXUtcixvPXRoaXMuaGktcixhPWwtbix1PXRoaXMuaGkqbixhPWwtYSxzPW4tYSxsPXIqYS11K3IqcytvKmErbypzKyh0aGlzLmhpKmkrdGhpcy5sbypuKTt2YXIgYz11K2w7cj11LWM7dmFyIGg9bCtyO3JldHVybiB0aGlzLmhpPWMsdGhpcy5sbz1oLHRoaXN9fSxzZWxmU3FyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZk11bHRpcGx5KHRoaXMpfSxmbG9vcjpmdW5jdGlvbigpe2lmKHRoaXMuaXNOYU4oKSlyZXR1cm4gVC5OYU47dmFyIHQ9TWF0aC5mbG9vcih0aGlzLmhpKSxlPTA7cmV0dXJuIHQ9PT10aGlzLmhpJiYoZT1NYXRoLmZsb29yKHRoaXMubG8pKSxuZXcgVCh0LGUpfSxuZWdhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP3RoaXM6bmV3IFQoLXRoaXMuaGksLXRoaXMubG8pfSxjbG9uZTpmdW5jdGlvbigpe3RyeXtyZXR1cm4gbnVsbH1jYXRjaCh0KXtpZih0IGluc3RhbmNlb2YgQ2xvbmVOb3RTdXBwb3J0ZWRFeGNlcHRpb24pcmV0dXJuIG51bGw7dGhyb3cgdH1maW5hbGx5e319LG11bHRpcGx5OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBUKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHQuaXNOYU4oKT9ULmNyZWF0ZU5hTigpOlQuY29weSh0aGlzKS5zZWxmTXVsdGlwbHkodCl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBpLmlzTmFOKGUpP1QuY3JlYXRlTmFOKCk6VC5jb3B5KHRoaXMpLnNlbGZNdWx0aXBseShlLDApfX0saXNOYU46ZnVuY3Rpb24oKXtyZXR1cm4gaS5pc05hTih0aGlzLmhpKX0saW50VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC50cnVuYyh0aGlzLmhpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD1ULm1hZ25pdHVkZSh0aGlzLmhpKTtyZXR1cm4gdD49LTMmJnQ8PTIwP3RoaXMudG9TdGFuZGFyZE5vdGF0aW9uKCk6dGhpcy50b1NjaU5vdGF0aW9uKCl9LHRvU3RhbmRhcmROb3RhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U3BlY2lhbE51bWJlclN0cmluZygpO2lmKG51bGwhPT10KXJldHVybiB0O3ZhciBlPW5ldyBBcnJheSgxKS5maWxsKG51bGwpLG49dGhpcy5leHRyYWN0U2lnbmlmaWNhbnREaWdpdHMoITAsZSksaT1lWzBdKzEscj1uO2lmKFwiLlwiPT09bi5jaGFyQXQoMCkpcj1cIjBcIituO2Vsc2UgaWYoaTwwKXI9XCIwLlwiK1Quc3RyaW5nT2ZDaGFyKFwiMFwiLC1pKStuO2Vsc2UgaWYobi5pbmRleE9mKFwiLlwiKT09PS0xKXt2YXIgbz1pLW4ubGVuZ3RoLGE9VC5zdHJpbmdPZkNoYXIoXCIwXCIsbyk7cj1uK2ErXCIuMFwifXJldHVybiB0aGlzLmlzTmVnYXRpdmUoKT9cIi1cIityOnJ9LHJlY2lwcm9jYWw6ZnVuY3Rpb24oKXt2YXIgdD1udWxsLGU9bnVsbCxuPW51bGwsaT1udWxsLHI9bnVsbCxvPW51bGwsYT1udWxsLHM9bnVsbDtyPTEvdGhpcy5oaSxvPVQuU1BMSVQqcix0PW8tcixzPVQuU1BMSVQqdGhpcy5oaSx0PW8tdCxlPXItdCxuPXMtdGhpcy5oaSxhPXIqdGhpcy5oaSxuPXMtbixpPXRoaXMuaGktbixzPXQqbi1hK3QqaStlKm4rZSppLG89KDEtYS1zLXIqdGhpcy5sbykvdGhpcy5oaTt2YXIgdT1yK287cmV0dXJuIG5ldyBUKHUsci11K28pfSx0b1NjaU5vdGF0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gVC5TQ0lfTk9UX1pFUk87dmFyIHQ9dGhpcy5nZXRTcGVjaWFsTnVtYmVyU3RyaW5nKCk7aWYobnVsbCE9PXQpcmV0dXJuIHQ7dmFyIGU9bmV3IEFycmF5KDEpLmZpbGwobnVsbCksbj10aGlzLmV4dHJhY3RTaWduaWZpY2FudERpZ2l0cyghMSxlKSxpPVQuU0NJX05PVF9FWFBPTkVOVF9DSEFSK2VbMF07aWYoXCIwXCI9PT1uLmNoYXJBdCgwKSl0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiRm91bmQgbGVhZGluZyB6ZXJvOiBcIituKTt2YXIgcj1cIlwiO24ubGVuZ3RoPjEmJihyPW4uc3Vic3RyaW5nKDEpKTt2YXIgbz1uLmNoYXJBdCgwKStcIi5cIityO3JldHVybiB0aGlzLmlzTmVnYXRpdmUoKT9cIi1cIitvK2k6bytpfSxhYnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc05hTigpP1QuTmFOOnRoaXMuaXNOZWdhdGl2ZSgpP3RoaXMubmVnYXRlKCk6bmV3IFQodGhpcyl9LGlzUG9zaXRpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaT4wfHwwPT09dGhpcy5oaSYmdGhpcy5sbz4wfSxsdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oaTx0LmhpfHx0aGlzLmhpPT09dC5oaSYmdGhpcy5sbzx0LmxvfSxhZGQ6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFQpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gVC5jb3B5KHRoaXMpLnNlbGZBZGQodCl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBULmNvcHkodGhpcykuc2VsZkFkZChlKX19LGluaXQ6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuaGk9dCx0aGlzLmxvPTB9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFQpe3ZhciBlPWFyZ3VtZW50c1swXTt0aGlzLmhpPWUuaGksdGhpcy5sbz1lLmxvfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07dGhpcy5oaT1uLHRoaXMubG89aX19LGd0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhpPnQuaGl8fHRoaXMuaGk9PT10LmhpJiZ0aGlzLmxvPnQubG99LGlzTmVnYXRpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaTwwfHwwPT09dGhpcy5oaSYmdGhpcy5sbzwwfSx0cnVuYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTmFOKCk/VC5OYU46dGhpcy5pc1Bvc2l0aXZlKCk/dGhpcy5mbG9vcigpOnRoaXMuY2VpbCgpfSxzaWdudW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaT4wPzE6dGhpcy5oaTwwPy0xOnRoaXMubG8+MD8xOnRoaXMubG88MD8tMTowfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzLHIsb119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFR9fSksVC5zcXI9ZnVuY3Rpb24odCl7cmV0dXJuIFQudmFsdWVPZih0KS5zZWxmTXVsdGlwbHkodCl9LFQudmFsdWVPZj1mdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gVC5wYXJzZSh0KX1pZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXJldHVybiBuZXcgVChhcmd1bWVudHNbMF0pfSxULnNxcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFQudmFsdWVPZih0KS5zcXJ0KCl9LFQucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtPLmlzV2hpdGVzcGFjZSh0LmNoYXJBdChlKSk7KWUrKzt2YXIgaT0hMTtpZihlPG4pe3ZhciByPXQuY2hhckF0KGUpO1wiLVwiIT09ciYmXCIrXCIhPT1yfHwoZSsrLFwiLVwiPT09ciYmKGk9ITApKX1mb3IodmFyIG89bmV3IFQsYT0wLHM9MCx1PTA7IShlPj1uKTspe3ZhciBsPXQuY2hhckF0KGUpO2lmKGUrKyxPLmlzRGlnaXQobCkpe3ZhciBjPWwtXCIwXCI7by5zZWxmTXVsdGlwbHkoVC5URU4pLG8uc2VsZkFkZChjKSxhKyt9ZWxzZXtpZihcIi5cIiE9PWwpe2lmKFwiZVwiPT09bHx8XCJFXCI9PT1sKXt2YXIgaD10LnN1YnN0cmluZyhlKTt0cnl7dT1JLnBhcnNlSW50KGgpfWNhdGNoKGUpe3Rocm93IGUgaW5zdGFuY2VvZiBOdW1iZXJGb3JtYXRFeGNlcHRpb24/bmV3IE51bWJlckZvcm1hdEV4Y2VwdGlvbihcIkludmFsaWQgZXhwb25lbnQgXCIraCtcIiBpbiBzdHJpbmcgXCIrdCk6ZX1maW5hbGx5e31icmVha310aHJvdyBuZXcgTnVtYmVyRm9ybWF0RXhjZXB0aW9uKFwiVW5leHBlY3RlZCBjaGFyYWN0ZXIgJ1wiK2wrXCInIGF0IHBvc2l0aW9uIFwiK2UrXCIgaW4gc3RyaW5nIFwiK3QpfXM9YX19dmFyIGY9byxkPWEtcy11O2lmKDA9PT1kKWY9bztlbHNlIGlmKGQ+MCl7dmFyIHA9VC5URU4ucG93KGQpO2Y9by5kaXZpZGUocCl9ZWxzZSBpZihkPDApe3ZhciBwPVQuVEVOLnBvdygtZCk7Zj1vLm11bHRpcGx5KHApfXJldHVybiBpP2YubmVnYXRlKCk6Zn0sVC5jcmVhdGVOYU49ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFQoaS5OYU4saS5OYU4pfSxULmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBUKHQpfSxULm1hZ25pdHVkZT1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmFicyh0KSxuPU1hdGgubG9nKGUpL01hdGgubG9nKDEwKSxpPU1hdGgudHJ1bmMoTWF0aC5mbG9vcihuKSk7cmV0dXJuIDEwKk1hdGgucG93KDEwLGkpPD1lJiYoaSs9MSksaX0sVC5zdHJpbmdPZkNoYXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IEMsaT0wO2k8ZTtpKyspbi5hcHBlbmQodCk7cmV0dXJuIG4udG9TdHJpbmcoKX0sVC5QST1uZXcgVCgzLjE0MTU5MjY1MzU4OTc5MywxLjIyNDY0Njc5OTE0NzM1MzJlLTE2KSxULlRXT19QST1uZXcgVCg2LjI4MzE4NTMwNzE3OTU4NiwyLjQ0OTI5MzU5ODI5NDcwNjRlLTE2KSxULlBJXzI9bmV3IFQoMS41NzA3OTYzMjY3OTQ4OTY2LDYuMTIzMjMzOTk1NzM2NzY2ZS0xNyksVC5FPW5ldyBUKDIuNzE4MjgxODI4NDU5MDQ1LDEuNDQ1NjQ2ODkxNzI5MjUwMmUtMTYpLFxuVC5OYU49bmV3IFQoaS5OYU4saS5OYU4pLFQuRVBTPTEuMjMyNTk1MTY0NDA3ODNlLTMyLFQuU1BMSVQ9MTM0MjE3NzI5LFQuTUFYX1BSSU5UX0RJR0lUUz0zMixULlRFTj1ULnZhbHVlT2YoMTApLFQuT05FPVQudmFsdWVPZigxKSxULlNDSV9OT1RfRVhQT05FTlRfQ0hBUj1cIkVcIixULlNDSV9OT1RfWkVSTz1cIjAuMEUwXCIsVHIoUC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFB9fSksUC5vcmllbnRhdGlvbkluZGV4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1QLm9yaWVudGF0aW9uSW5kZXhGaWx0ZXIodCxlLG4pO2lmKGk8PTEpcmV0dXJuIGk7dmFyIHI9VC52YWx1ZU9mKGUueCkuc2VsZkFkZCgtdC54KSxvPVQudmFsdWVPZihlLnkpLnNlbGZBZGQoLXQueSksYT1ULnZhbHVlT2Yobi54KS5zZWxmQWRkKC1lLngpLHM9VC52YWx1ZU9mKG4ueSkuc2VsZkFkZCgtZS55KTtyZXR1cm4gci5zZWxmTXVsdGlwbHkocykuc2VsZlN1YnRyYWN0KG8uc2VsZk11bHRpcGx5KGEpKS5zaWdudW0oKX0sUC5zaWduT2ZEZXQyeDI9ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHQubXVsdGlwbHkoaSkuc2VsZlN1YnRyYWN0KGUubXVsdGlwbHkobikpLnNpZ251bSgpfSxQLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1ULnZhbHVlT2YoaS55KS5zZWxmU3VidHJhY3Qobi55KS5zZWxmTXVsdGlwbHkoVC52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkpLG89VC52YWx1ZU9mKGkueCkuc2VsZlN1YnRyYWN0KG4ueCkuc2VsZk11bHRpcGx5KFQudmFsdWVPZihlLnkpLnNlbGZTdWJ0cmFjdCh0LnkpKSxhPXIuc3VidHJhY3Qobykscz1ULnZhbHVlT2YoaS54KS5zZWxmU3VidHJhY3Qobi54KS5zZWxmTXVsdGlwbHkoVC52YWx1ZU9mKHQueSkuc2VsZlN1YnRyYWN0KG4ueSkpLHU9VC52YWx1ZU9mKGkueSkuc2VsZlN1YnRyYWN0KG4ueSkuc2VsZk11bHRpcGx5KFQudmFsdWVPZih0LngpLnNlbGZTdWJ0cmFjdChuLngpKSxsPXMuc3VidHJhY3QodSksYz1sLnNlbGZEaXZpZGUoYSkuZG91YmxlVmFsdWUoKSxmPVQudmFsdWVPZih0LngpLnNlbGZBZGQoVC52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkuc2VsZk11bHRpcGx5KGMpKS5kb3VibGVWYWx1ZSgpLGQ9VC52YWx1ZU9mKGUueCkuc2VsZlN1YnRyYWN0KHQueCkuc2VsZk11bHRpcGx5KFQudmFsdWVPZih0LnkpLnNlbGZTdWJ0cmFjdChuLnkpKSxwPVQudmFsdWVPZihlLnkpLnNlbGZTdWJ0cmFjdCh0LnkpLnNlbGZNdWx0aXBseShULnZhbHVlT2YodC54KS5zZWxmU3VidHJhY3Qobi54KSksZz1kLnN1YnRyYWN0KHApLHY9Zy5zZWxmRGl2aWRlKGEpLmRvdWJsZVZhbHVlKCk7cmV0dXJuIG5ldyBoKGYsVC52YWx1ZU9mKG4ueSkuc2VsZkFkZChULnZhbHVlT2YoaS55KS5zZWxmU3VidHJhY3Qobi55KS5zZWxmTXVsdGlwbHkodikpLmRvdWJsZVZhbHVlKCkpfSxQLm9yaWVudGF0aW9uSW5kZXhGaWx0ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW51bGwscj0odC54LW4ueCkqKGUueS1uLnkpLG89KHQueS1uLnkpKihlLngtbi54KSxhPXItbztpZihyPjApe2lmKG88PTApcmV0dXJuIFAuc2lnbnVtKGEpO2k9citvfWVsc2V7aWYoIShyPDApKXJldHVybiBQLnNpZ251bShhKTtpZihvPj0wKXJldHVybiBQLnNpZ251bShhKTtpPS1yLW99dmFyIHM9UC5EUF9TQUZFX0VQU0lMT04qaTtyZXR1cm4gYT49c3x8LWE+PXM/UC5zaWdudW0oYSk6Mn0sUC5zaWdudW09ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD8xOnQ8MD8tMTowfSxQLkRQX1NBRkVfRVBTSUxPTj0xZS0xNSxUcihBLnByb3RvdHlwZSx7c2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlLG4pe30sc2l6ZTpmdW5jdGlvbigpe30sZ2V0T3JkaW5hdGU6ZnVuY3Rpb24odCxlKXt9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXsxPT09YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKX0sZ2V0Q29vcmRpbmF0ZUNvcHk6ZnVuY3Rpb24odCl7fSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXt9LGdldFg6ZnVuY3Rpb24odCl7fSxjbG9uZTpmdW5jdGlvbigpe30sZXhwYW5kRW52ZWxvcGU6ZnVuY3Rpb24odCl7fSxjb3B5OmZ1bmN0aW9uKCl7fSxnZXRZOmZ1bmN0aW9uKHQpe30sdG9Db29yZGluYXRlQXJyYXk6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW29dfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBBfX0pLEEuWD0wLEEuWT0xLEEuWj0yLEEuTT0zLEwuYXJyYXljb3B5PWZ1bmN0aW9uKHQsZSxuLGkscil7Zm9yKHZhciBvPTAsYT1lO2E8ZStyO2ErKyluW2krb109dFthXSxvKyt9LEwuZ2V0UHJvcGVydHk9ZnVuY3Rpb24odCl7cmV0dXJue1wibGluZS5zZXBhcmF0b3JcIjpcIlxcblwifVt0XX0sVHIoTi5wcm90b3R5cGUse2dldFk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnkvdGhpcy53O2lmKGkuaXNOYU4odCl8fGkuaXNJbmZpbml0ZSh0KSl0aHJvdyBuZXcgRTtyZXR1cm4gdH0sZ2V0WDpmdW5jdGlvbigpe3ZhciB0PXRoaXMueC90aGlzLnc7aWYoaS5pc05hTih0KXx8aS5pc0luZmluaXRlKHQpKXRocm93IG5ldyBFO3JldHVybiB0fSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGg7cmV0dXJuIHQueD10aGlzLmdldFgoKSx0Lnk9dGhpcy5nZXRZKCksdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTn19KSxOLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10LnktZS55LGE9ZS54LXQueCxzPXQueCplLnktZS54KnQueSx1PW4ueS1yLnksbD1yLngtbi54LGM9bi54KnIueS1yLngqbi55LGY9YSpjLWwqcyxkPXUqcy1vKmMscD1vKmwtdSphLGc9Zi9wLHY9ZC9wO2lmKGkuaXNOYU4oZyl8fGkuaXNJbmZpbml0ZShnKXx8aS5pc05hTih2KXx8aS5pc0luZmluaXRlKHYpKXRocm93IG5ldyBFO3JldHVybiBuZXcgaChnLHYpfSxUcihrLnByb3RvdHlwZSx7Y3JlYXRlOmZ1bmN0aW9uKCl7MT09PWFyZ3VtZW50cy5sZW5ndGg/YXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheT9hcmd1bWVudHNbMF06THIoYXJndW1lbnRzWzBdLEEpJiZhcmd1bWVudHNbMF06Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4ga319KSxUcihSLnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUn19KSxUcihELnByb3RvdHlwZSx7aXNHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoKT09PUQuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTn0sZ2V0RmFjdG9yeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZhY3Rvcnl9LGdldEdlb21ldHJ5TjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc30sZ2V0QXJlYTpmdW5jdGlvbigpe3JldHVybiAwfSxpc1JlY3RhbmdsZTpmdW5jdGlvbigpe3JldHVybiExfSxlcXVhbHM6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIG51bGwhPT10JiZ0aGlzLmVxdWFsc1RvcG8odCl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciBlPWFyZ3VtZW50c1swXTtpZighKGUgaW5zdGFuY2VvZiBEKSlyZXR1cm4hMTt2YXIgbj1lO3JldHVybiB0aGlzLmVxdWFsc0V4YWN0KG4pfX19LGVxdWFsc0V4YWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dHx8dGhpcy5lcXVhbHNFeGFjdCh0LDApfSxnZW9tZXRyeUNoYW5nZWQ6ZnVuY3Rpb24oKXt0aGlzLmFwcGx5KEQuZ2VvbWV0cnlDaGFuZ2VkRmlsdGVyKX0sZ2VvbWV0cnlDaGFuZ2VkQWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy5lbnZlbG9wZT1udWxsfSxlcXVhbHNOb3JtOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmdGhpcy5ub3JtKCkuZXF1YWxzRXhhY3QodC5ub3JtKCkpfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZ2V0TnVtR2VvbWV0cmllczpmdW5jdGlvbigpe3JldHVybiAxfSxjb21wYXJlVG86ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dDtyZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoKSE9PWUuZ2V0U29ydEluZGV4KCk/dGhpcy5nZXRTb3J0SW5kZXgoKS1lLmdldFNvcnRJbmRleCgpOnRoaXMuaXNFbXB0eSgpJiZlLmlzRW1wdHkoKT8wOnRoaXMuaXNFbXB0eSgpPy0xOmUuaXNFbXB0eSgpPzE6dGhpcy5jb21wYXJlVG9TYW1lQ2xhc3ModCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxlPW47cmV0dXJuIHRoaXMuZ2V0U29ydEluZGV4KCkhPT1lLmdldFNvcnRJbmRleCgpP3RoaXMuZ2V0U29ydEluZGV4KCktZS5nZXRTb3J0SW5kZXgoKTp0aGlzLmlzRW1wdHkoKSYmZS5pc0VtcHR5KCk/MDp0aGlzLmlzRW1wdHkoKT8tMTplLmlzRW1wdHkoKT8xOnRoaXMuY29tcGFyZVRvU2FtZUNsYXNzKG4saSl9fSxnZXRVc2VyRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVzZXJEYXRhfSxnZXRTUklEOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU1JJRH0sZ2V0RW52ZWxvcGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkudG9HZW9tZXRyeSh0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKSl9LGNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2lmKHQuZ2V0U29ydEluZGV4KCk9PT1ELlNPUlRJTkRFWF9HRU9NRVRSWUNPTExFQ1RJT04pdGhyb3cgbmV3IG4oXCJUaGlzIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0IEdlb21ldHJ5Q29sbGVjdGlvbiBhcmd1bWVudHNcIil9LGVxdWFsOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PW4/dC5lcXVhbHMoZSk6dC5kaXN0YW5jZShlKTw9bn0sbm9ybTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY29weSgpO3JldHVybiB0Lm5vcm1hbGl6ZSgpLHR9LGdldFByZWNpc2lvbk1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmFjdG9yeS5nZXRQcmVjaXNpb25Nb2RlbCgpfSxnZXRFbnZlbG9wZUludGVybmFsOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLmVudmVsb3BlJiYodGhpcy5lbnZlbG9wZT10aGlzLmNvbXB1dGVFbnZlbG9wZUludGVybmFsKCkpLG5ldyB4KHRoaXMuZW52ZWxvcGUpfSxzZXRTUklEOmZ1bmN0aW9uKHQpe3RoaXMuU1JJRD10fSxzZXRVc2VyRGF0YTpmdW5jdGlvbih0KXt0aGlzLnVzZXJEYXRhPXR9LGNvbXBhcmU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5pdGVyYXRvcigpLGk9ZS5pdGVyYXRvcigpO24uaGFzTmV4dCgpJiZpLmhhc05leHQoKTspe3ZhciByPW4ubmV4dCgpLG89aS5uZXh0KCksYT1yLmNvbXBhcmVUbyhvKTtpZigwIT09YSlyZXR1cm4gYX1yZXR1cm4gbi5oYXNOZXh0KCk/MTppLmhhc05leHQoKT8tMTowfSxoYXNoQ29kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5oYXNoQ29kZSgpfSxpc0dlb21ldHJ5Q29sbGVjdGlvbk9yRGVyaXZlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNvcnRJbmRleCgpPT09RC5TT1JUSU5ERVhfR0VPTUVUUllDT0xMRUNUSU9OfHx0aGlzLmdldFNvcnRJbmRleCgpPT09RC5TT1JUSU5ERVhfTVVMVElQT0lOVHx8dGhpcy5nZXRTb3J0SW5kZXgoKT09PUQuU09SVElOREVYX01VTFRJTElORVNUUklOR3x8dGhpcy5nZXRTb3J0SW5kZXgoKT09PUQuU09SVElOREVYX01VTFRJUE9MWUdPTn0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbyxyLHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBEfX0pLEQuaGFzTm9uRW1wdHlFbGVtZW50cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdFtlXS5pc0VtcHR5KCkpcmV0dXJuITA7cmV0dXJuITF9LEQuaGFzTnVsbEVsZW1lbnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKG51bGw9PT10W2VdKXJldHVybiEwO3JldHVybiExfSxELnNlcmlhbFZlcnNpb25VSUQ9MHg3OTllYTQ2NTIyODU0YzAwLEQuU09SVElOREVYX1BPSU5UPTAsRC5TT1JUSU5ERVhfTVVMVElQT0lOVD0xLEQuU09SVElOREVYX0xJTkVTVFJJTkc9MixELlNPUlRJTkRFWF9MSU5FQVJSSU5HPTMsRC5TT1JUSU5ERVhfTVVMVElMSU5FU1RSSU5HPTQsRC5TT1JUSU5ERVhfUE9MWUdPTj01LEQuU09SVElOREVYX01VTFRJUE9MWUdPTj02LEQuU09SVElOREVYX0dFT01FVFJZQ09MTEVDVElPTj03LEQuZ2VvbWV0cnlDaGFuZ2VkRmlsdGVyPXtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltSXX0sZmlsdGVyOmZ1bmN0aW9uKHQpe3QuZ2VvbWV0cnlDaGFuZ2VkQWN0aW9uKCl9fSxUcihGLnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRn19KSxUcihCLnByb3RvdHlwZSx7aXNJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQn19KSxUcihqLnByb3RvdHlwZSx7aXNJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0JTI9PTF9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0JdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBqfX0pLFRyKFUucHJvdG90eXBlLHtpc0luQm91bmRhcnk6ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFV9fSksVHIoei5wcm90b3R5cGUse2lzSW5Cb3VuZGFyeTpmdW5jdGlvbih0KXtyZXR1cm4gdD4xfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltCXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gen19KSxUcihHLnByb3RvdHlwZSx7aXNJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe3JldHVybiAxPT09dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEd9fSksQi5Nb2QyQm91bmRhcnlOb2RlUnVsZT1qLEIuRW5kUG9pbnRCb3VuZGFyeU5vZGVSdWxlPVUsQi5NdWx0aVZhbGVudEVuZFBvaW50Qm91bmRhcnlOb2RlUnVsZT16LEIuTW9ub1ZhbGVudEVuZFBvaW50Qm91bmRhcnlOb2RlUnVsZT1HLEIuTU9EMl9CT1VOREFSWV9SVUxFPW5ldyBqLEIuRU5EUE9JTlRfQk9VTkRBUllfUlVMRT1uZXcgVSxCLk1VTFRJVkFMRU5UX0VORFBPSU5UX0JPVU5EQVJZX1JVTEU9bmV3IHosQi5NT05PVkFMRU5UX0VORFBPSU5UX0JPVU5EQVJZX1JVTEU9bmV3IEcsQi5PR0NfU0ZTX0JPVU5EQVJZX1JVTEU9Qi5NT0QyX0JPVU5EQVJZX1JVTEUsVHIoVi5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFZ9fSksVi5pc1Jpbmc9ZnVuY3Rpb24odCl7cmV0dXJuISh0Lmxlbmd0aDw0fHwhdFswXS5lcXVhbHMyRCh0W3QubGVuZ3RoLTFdKSl9LFYucHROb3RJbkxpc3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtpZihWLmluZGV4T2YoaSxlKTwwKXJldHVybiBpfXJldHVybiBudWxsfSxWLnNjcm9sbD1mdW5jdGlvbih0LGUpe3ZhciBuPVYuaW5kZXhPZihlLHQpO2lmKG48MClyZXR1cm4gbnVsbDt2YXIgaT1uZXcgQXJyYXkodC5sZW5ndGgpLmZpbGwobnVsbCk7TC5hcnJheWNvcHkodCxuLGksMCx0Lmxlbmd0aC1uKSxMLmFycmF5Y29weSh0LDAsaSx0Lmxlbmd0aC1uLG4pLEwuYXJyYXljb3B5KGksMCx0LDAsdC5sZW5ndGgpfSxWLmVxdWFscz1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYodD09PWUpcmV0dXJuITA7aWYobnVsbD09PXR8fG51bGw9PT1lKXJldHVybiExO2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXF1YWxzKGVbbl0pKXJldHVybiExO3JldHVybiEwfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07aWYoaT09PXIpcmV0dXJuITA7aWYobnVsbD09PWl8fG51bGw9PT1yKXJldHVybiExO2lmKGkubGVuZ3RoIT09ci5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspaWYoMCE9PW8uY29tcGFyZShpW25dLHJbbl0pKXJldHVybiExO3JldHVybiEwfX0sVi5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IGIsaT0wO2k8dC5sZW5ndGg7aSsrKWUuaW50ZXJzZWN0cyh0W2ldKSYmbi5hZGQodFtpXSwhMCk7cmV0dXJuIG4udG9Db29yZGluYXRlQXJyYXkoKX0sVi5oYXNSZXBlYXRlZFBvaW50cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPHQubGVuZ3RoO2UrKylpZih0W2UtMV0uZXF1YWxzKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxWLnJlbW92ZVJlcGVhdGVkUG9pbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBWLmhhc1JlcGVhdGVkUG9pbnRzKHQpP25ldyBiKHQsITEpLnRvQ29vcmRpbmF0ZUFycmF5KCk6dH0sVi5yZXZlcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aC0xLG49TWF0aC50cnVuYyhlLzIpLGk9MDtpPD1uO2krKyl7dmFyIHI9dFtpXTt0W2ldPXRbZS1pXSx0W2UtaV09cn19LFYucmVtb3ZlTnVsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9PXRbbl0mJmUrKzt2YXIgaT1uZXcgQXJyYXkoZSkuZmlsbChudWxsKTtpZigwPT09ZSlyZXR1cm4gaTtmb3IodmFyIHI9MCxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9PXRbbl0mJihpW3IrK109dFtuXSk7cmV0dXJuIGl9LFYuY29weURlZXA9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBBcnJheSh0Lmxlbmd0aCkuZmlsbChudWxsKSxuPTA7bjx0Lmxlbmd0aDtuKyspZVtuXT1uZXcgaCh0W25dKTtyZXR1cm4gZX1pZig1PT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdLGE9YXJndW1lbnRzWzNdLHM9YXJndW1lbnRzWzRdLG49MDtuPHM7bisrKW9bYStuXT1uZXcgaChpW3Irbl0pfSxWLmlzRXF1YWxSZXZlcnNlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dLHI9ZVt0Lmxlbmd0aC1uLTFdO2lmKDAhPT1pLmNvbXBhcmVUbyhyKSlyZXR1cm4hMX1yZXR1cm4hMH0sVi5lbnZlbG9wZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IHgsbj0wO248dC5sZW5ndGg7bisrKWUuZXhwYW5kVG9JbmNsdWRlKHRbbl0pO3JldHVybiBlfSxWLnRvQ29vcmRpbmF0ZUFycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvQXJyYXkoVi5jb29yZEFycmF5VHlwZSl9LFYuYXRMZWFzdE5Db29yZGluYXRlc09yTm90aGluZz1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD49dD9lOltdfSxWLmluZGV4T2Y9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZih0LmVxdWFscyhlW25dKSlyZXR1cm4gbjtyZXR1cm4tMX0sVi5pbmNyZWFzaW5nRGlyZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8TWF0aC50cnVuYyh0Lmxlbmd0aC8yKTtlKyspe3ZhciBuPXQubGVuZ3RoLTEtZSxpPXRbZV0uY29tcGFyZVRvKHRbbl0pO2lmKDAhPT1pKXJldHVybiBpfXJldHVybiAxfSxWLmNvbXBhcmU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoJiZuPGUubGVuZ3RoOyl7dmFyIGk9dFtuXS5jb21wYXJlVG8oZVtuXSk7aWYoMCE9PWkpcmV0dXJuIGk7bisrfXJldHVybiBuPGUubGVuZ3RoPy0xOm48dC5sZW5ndGg/MTowfSxWLm1pbkNvb3JkaW5hdGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW51bGwsbj0wO248dC5sZW5ndGg7bisrKShudWxsPT09ZXx8ZS5jb21wYXJlVG8odFtuXSk+MCkmJihlPXRbbl0pO3JldHVybiBlfSxWLmV4dHJhY3Q9ZnVuY3Rpb24odCxlLG4pe2U9TS5jbGFtcChlLDAsdC5sZW5ndGgpLG49TS5jbGFtcChuLC0xLHQubGVuZ3RoKTt2YXIgaT1uLWUrMTtuPDAmJihpPTApLGU+PXQubGVuZ3RoJiYoaT0wKSxuPGUmJihpPTApO3ZhciByPW5ldyBBcnJheShpKS5maWxsKG51bGwpO2lmKDA9PT1pKXJldHVybiByO2Zvcih2YXIgbz0wLGE9ZTthPD1uO2ErKylyW28rK109dFthXTtyZXR1cm4gcn0sVHIoWC5wcm90b3R5cGUse2NvbXBhcmU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LGk9ZTtyZXR1cm4gVi5jb21wYXJlKG4saSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2FdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBYfX0pLFRyKEgucHJvdG90eXBlLHtjb21wYXJlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dCxpPWU7aWYobi5sZW5ndGg8aS5sZW5ndGgpcmV0dXJuLTE7aWYobi5sZW5ndGg+aS5sZW5ndGgpcmV0dXJuIDE7aWYoMD09PW4ubGVuZ3RoKXJldHVybiAwO3ZhciByPVYuY29tcGFyZShuLGkpO3JldHVybiBWLmlzRXF1YWxSZXZlcnNlZChuLGkpPzA6cn0sT0xEY29tcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQsaT1lO2lmKG4ubGVuZ3RoPGkubGVuZ3RoKXJldHVybi0xO2lmKG4ubGVuZ3RoPmkubGVuZ3RoKXJldHVybiAxO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4gMDtmb3IodmFyIHI9Vi5pbmNyZWFzaW5nRGlyZWN0aW9uKG4pLG89Vi5pbmNyZWFzaW5nRGlyZWN0aW9uKGkpLGE9cj4wPzA6bi5sZW5ndGgtMSxzPW8+MD8wOm4ubGVuZ3RoLTEsdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgbD1uW2FdLmNvbXBhcmVUbyhpW3NdKTtpZigwIT09bClyZXR1cm4gbDthKz1yLHMrPW99cmV0dXJuIDB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2FdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBIfX0pLFYuRm9yd2FyZENvbXBhcmF0b3I9WCxWLkJpZGlyZWN0aW9uYWxDb21wYXJhdG9yPUgsVi5jb29yZEFycmF5VHlwZT1uZXcgQXJyYXkoMCkuZmlsbChudWxsKSxxLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt9LHEucHJvdG90eXBlLnB1dD1mdW5jdGlvbigpe30scS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe30scS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7fSxxLnByb3RvdHlwZS5lbnRyeVNldD1mdW5jdGlvbigpe30sWS5wcm90b3R5cGU9bmV3IHEsVy5wcm90b3R5cGU9bmV3IHAsVy5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oKXt9LFoucHJvdG90eXBlPW5ldyBXLFoucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspaWYodGhpcy5hcnJheV9bZV09PT10KXJldHVybiEwO3JldHVybiExfSxaLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY29udGFpbnModCkmJih0aGlzLmFycmF5Xy5wdXNoKHQpLCEwKX0sWi5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXRoaXMuYWRkKGUubmV4dCgpKTtyZXR1cm4hMH0sWi5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBqYXZhc2NyaXB0LnV0aWwuT3BlcmF0aW9uTm90U3VwcG9ydGVkfSxaLnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLmxlbmd0aH0sWi5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5hcnJheV8ubGVuZ3RofSxaLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXQucHVzaCh0aGlzLmFycmF5X1tlXSk7cmV0dXJuIHR9LFoucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOcih0aGlzKX07dmFyIE5yPWZ1bmN0aW9uKHQpe3RoaXMuaGFzaFNldF89dCx0aGlzLnBvc2l0aW9uXz0wfTtOci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb25fPT09dGhpcy5oYXNoU2V0Xy5zaXplKCkpdGhyb3cgbmV3IG07cmV0dXJuIHRoaXMuaGFzaFNldF8uYXJyYXlfW3RoaXMucG9zaXRpb25fKytdfSxOci5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uXzx0aGlzLmhhc2hTZXRfLnNpemUoKX0sTnIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyB5fTt2YXIga3I9MDtldC5wcm90b3R5cGU9bmV3IFksZXQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yb290XztudWxsIT09ZTspe3ZhciBuPXQuY29tcGFyZVRvKGUua2V5KTtpZihuPDApZT1lLmxlZnQ7ZWxzZXtpZighKG4+MCkpcmV0dXJuIGUudmFsdWU7ZT1lLnJpZ2h0fX1yZXR1cm4gbnVsbH0sZXQucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PT10aGlzLnJvb3RfKXJldHVybiB0aGlzLnJvb3RfPXtrZXk6dCx2YWx1ZTplLGxlZnQ6bnVsbCxyaWdodDpudWxsLHBhcmVudDpudWxsLGNvbG9yOmtyLGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmtleX19LHRoaXMuc2l6ZV89MSxudWxsO3ZhciBuLGkscj10aGlzLnJvb3RfO2RvIGlmKG49ciwoaT10LmNvbXBhcmVUbyhyLmtleSkpPDApcj1yLmxlZnQ7ZWxzZXtpZighKGk+MCkpe3ZhciBvPXIudmFsdWU7cmV0dXJuIHIudmFsdWU9ZSxvfXI9ci5yaWdodH13aGlsZShudWxsIT09cik7dmFyIGE9e2tleTp0LGxlZnQ6bnVsbCxyaWdodDpudWxsLHZhbHVlOmUscGFyZW50Om4sY29sb3I6a3IsZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0sZ2V0S2V5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5fX07cmV0dXJuIGk8MD9uLmxlZnQ9YTpuLnJpZ2h0PWEsdGhpcy5maXhBZnRlckluc2VydGlvbihhKSx0aGlzLnNpemVfKyssbnVsbH0sZXQucHJvdG90eXBlLmZpeEFmdGVySW5zZXJ0aW9uPWZ1bmN0aW9uKHQpe2Zvcih0LmNvbG9yPTE7bnVsbCE9dCYmdCE9dGhpcy5yb290XyYmMT09dC5wYXJlbnQuY29sb3I7KWlmKEsodCk9PSQoSyhLKHQpKSkpe3ZhciBlPXR0KEsoSyh0KSkpOzE9PUooZSk/KFEoSyh0KSxrciksUShlLGtyKSxRKEsoSyh0KSksMSksdD1LKEsodCkpKToodD09dHQoSyh0KSkmJih0PUsodCksdGhpcy5yb3RhdGVMZWZ0KHQpKSxRKEsodCksa3IpLFEoSyhLKHQpKSwxKSx0aGlzLnJvdGF0ZVJpZ2h0KEsoSyh0KSkpKX1lbHNle3ZhciBlPSQoSyhLKHQpKSk7MT09SihlKT8oUShLKHQpLGtyKSxRKGUsa3IpLFEoSyhLKHQpKSwxKSx0PUsoSyh0KSkpOih0PT0kKEsodCkpJiYodD1LKHQpLHRoaXMucm90YXRlUmlnaHQodCkpLFEoSyh0KSxrciksUShLKEsodCkpLDEpLHRoaXMucm90YXRlTGVmdChLKEsodCkpKSl9dGhpcy5yb290Xy5jb2xvcj1rcn0sZXQucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3ZhciB0PW5ldyBfLGU9dGhpcy5nZXRGaXJzdEVudHJ5KCk7aWYobnVsbCE9PWUpZm9yKHQuYWRkKGUudmFsdWUpO251bGwhPT0oZT1ldC5zdWNjZXNzb3IoZSkpOyl0LmFkZChlLnZhbHVlKTtyZXR1cm4gdH0sZXQucHJvdG90eXBlLmVudHJ5U2V0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IFosZT10aGlzLmdldEZpcnN0RW50cnkoKTtpZihudWxsIT09ZSlmb3IodC5hZGQoZSk7bnVsbCE9PShlPWV0LnN1Y2Nlc3NvcihlKSk7KXQuYWRkKGUpO3JldHVybiB0fSxldC5wcm90b3R5cGUucm90YXRlTGVmdD1mdW5jdGlvbih0KXtpZihudWxsIT10KXt2YXIgZT10LnJpZ2h0O3QucmlnaHQ9ZS5sZWZ0LG51bGwhPWUubGVmdCYmKGUubGVmdC5wYXJlbnQ9dCksZS5wYXJlbnQ9dC5wYXJlbnQsbnVsbD09dC5wYXJlbnQ/dGhpcy5yb290Xz1lOnQucGFyZW50LmxlZnQ9PXQ/dC5wYXJlbnQubGVmdD1lOnQucGFyZW50LnJpZ2h0PWUsZS5sZWZ0PXQsdC5wYXJlbnQ9ZX19LGV0LnByb3RvdHlwZS5yb3RhdGVSaWdodD1mdW5jdGlvbih0KXtpZihudWxsIT10KXt2YXIgZT10LmxlZnQ7dC5sZWZ0PWUucmlnaHQsbnVsbCE9ZS5yaWdodCYmKGUucmlnaHQucGFyZW50PXQpLGUucGFyZW50PXQucGFyZW50LG51bGw9PXQucGFyZW50P3RoaXMucm9vdF89ZTp0LnBhcmVudC5yaWdodD09dD90LnBhcmVudC5yaWdodD1lOnQucGFyZW50LmxlZnQ9ZSxlLnJpZ2h0PXQsdC5wYXJlbnQ9ZX19LGV0LnByb3RvdHlwZS5nZXRGaXJzdEVudHJ5PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yb290XztpZihudWxsIT10KWZvcig7bnVsbCE9dC5sZWZ0Oyl0PXQubGVmdDtyZXR1cm4gdH0sZXQuc3VjY2Vzc29yPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXJldHVybiBudWxsO2lmKG51bGwhPT10LnJpZ2h0KXtmb3IodmFyIGU9dC5yaWdodDtudWxsIT09ZS5sZWZ0OyllPWUubGVmdDtyZXR1cm4gZX1mb3IodmFyIGU9dC5wYXJlbnQsbj10O251bGwhPT1lJiZuPT09ZS5yaWdodDspbj1lLGU9ZS5wYXJlbnQ7cmV0dXJuIGV9LGV0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2l6ZV99LFRyKG50LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbnR9fSksaXQucHJvdG90eXBlPW5ldyBXLHJ0LnByb3RvdHlwZT1uZXcgaXQscnQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspaWYoMD09PXRoaXMuYXJyYXlfW2VdLmNvbXBhcmVUbyh0KSlyZXR1cm4hMDtyZXR1cm4hMX0scnQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRhaW5zKHQpKXJldHVybiExO2Zvcih2YXIgZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspaWYoMT09PXRoaXMuYXJyYXlfW2VdLmNvbXBhcmVUbyh0KSlyZXR1cm4gdGhpcy5hcnJheV8uc3BsaWNlKGUsMCx0KSwhMDtyZXR1cm4gdGhpcy5hcnJheV8ucHVzaCh0KSwhMH0scnQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl0aGlzLmFkZChlLm5leHQoKSk7cmV0dXJuITB9LHJ0LnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IHl9LHJ0LnByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLmxlbmd0aH0scnQucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0scnQucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wLG49dGhpcy5hcnJheV8ubGVuZ3RoO2U8bjtlKyspdC5wdXNoKHRoaXMuYXJyYXlfW2VdKTtyZXR1cm4gdH0scnQucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBScih0aGlzKX07dmFyIFJyPWZ1bmN0aW9uKHQpe3RoaXMudHJlZVNldF89dCx0aGlzLnBvc2l0aW9uXz0wfTtSci5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe2lmKHRoaXMucG9zaXRpb25fPT09dGhpcy50cmVlU2V0Xy5zaXplKCkpdGhyb3cgbmV3IG07cmV0dXJuIHRoaXMudHJlZVNldF8uYXJyYXlfW3RoaXMucG9zaXRpb25fKytdfSxSci5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uXzx0aGlzLnRyZWVTZXRfLnNpemUoKX0sUnIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3Rocm93IG5ldyB5fSxvdC5zb3J0PWZ1bmN0aW9uKCl7dmFyIHQsZSxuLGkscj1hcmd1bWVudHNbMF07aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jb21wYXJlVG8oZSl9LHZvaWQgci5zb3J0KGkpO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKW49YXJndW1lbnRzWzFdLGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jb21wYXJlKHQsZSl9LHIuc29ydChpKTtlbHNle2lmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXtlPXIuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksZS5zb3J0KCk7dmFyIG89ci5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGUsci5zbGljZShhcmd1bWVudHNbMl0sci5sZW5ndGgpKTtmb3Ioci5zcGxpY2UoMCxyLmxlbmd0aCksdD0wO3Q8by5sZW5ndGg7dCsrKXIucHVzaChvW3RdKTtyZXR1cm59aWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe2ZvcihlPXIuc2xpY2UoYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSksbj1hcmd1bWVudHNbM10saT1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNvbXBhcmUodCxlKX0sZS5zb3J0KGkpLG89ci5zbGljZSgwLGFyZ3VtZW50c1sxXSkuY29uY2F0KGUsci5zbGljZShhcmd1bWVudHNbMl0sci5sZW5ndGgpKSxyLnNwbGljZSgwLHIubGVuZ3RoKSx0PTA7dDxvLmxlbmd0aDt0Kyspci5wdXNoKG9bdF0pO3JldHVybn19fSxvdC5hc0xpc3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBfLG49MCxpPXQubGVuZ3RoO248aTtuKyspZS5hZGQodFtuXSk7cmV0dXJuIGV9LFRyKGF0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYXR9fSksYXQudG9EaW1lbnNpb25TeW1ib2w9ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgYXQuRkFMU0U6cmV0dXJuIGF0LlNZTV9GQUxTRTtjYXNlIGF0LlRSVUU6cmV0dXJuIGF0LlNZTV9UUlVFO2Nhc2UgYXQuRE9OVENBUkU6cmV0dXJuIGF0LlNZTV9ET05UQ0FSRTtjYXNlIGF0LlA6cmV0dXJuIGF0LlNZTV9QO2Nhc2UgYXQuTDpyZXR1cm4gYXQuU1lNX0w7Y2FzZSBhdC5BOnJldHVybiBhdC5TWU1fQX10aHJvdyBuZXcgbihcIlVua25vd24gZGltZW5zaW9uIHZhbHVlOiBcIit0KX0sYXQudG9EaW1lbnNpb25WYWx1ZT1mdW5jdGlvbih0KXtzd2l0Y2goTy50b1VwcGVyQ2FzZSh0KSl7Y2FzZSBhdC5TWU1fRkFMU0U6cmV0dXJuIGF0LkZBTFNFO2Nhc2UgYXQuU1lNX1RSVUU6cmV0dXJuIGF0LlRSVUU7Y2FzZSBhdC5TWU1fRE9OVENBUkU6cmV0dXJuIGF0LkRPTlRDQVJFO2Nhc2UgYXQuU1lNX1A6cmV0dXJuIGF0LlA7Y2FzZSBhdC5TWU1fTDpyZXR1cm4gYXQuTDtjYXNlIGF0LlNZTV9BOnJldHVybiBhdC5BfXRocm93IG5ldyBuKFwiVW5rbm93biBkaW1lbnNpb24gc3ltYm9sOiBcIit0KX0sYXQuUD0wLGF0Lkw9MSxhdC5BPTIsYXQuRkFMU0U9LTEsYXQuVFJVRT0tMixhdC5ET05UQ0FSRT0tMyxhdC5TWU1fRkFMU0U9XCJGXCIsYXQuU1lNX1RSVUU9XCJUXCIsYXQuU1lNX0RPTlRDQVJFPVwiKlwiLGF0LlNZTV9QPVwiMFwiLGF0LlNZTV9MPVwiMVwiLGF0LlNZTV9BPVwiMlwiLFRyKHN0LnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gc3R9fSksVHIodXQucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCxlKXt9LGlzRG9uZTpmdW5jdGlvbigpe30saXNHZW9tZXRyeUNoYW5nZWQ6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHV0fX0pLFByKGx0LEQpLFRyKGx0LnByb3RvdHlwZSx7Y29tcHV0ZUVudmVsb3BlSW50ZXJuYWw6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IHgsZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdC5leHBhbmRUb0luY2x1ZGUodGhpcy5nZW9tZXRyaWVzW2VdLmdldEVudmVsb3BlSW50ZXJuYWwoKSk7cmV0dXJuIHR9LGdldEdlb21ldHJ5TjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZW9tZXRyaWVzW3RdfSxnZXRTb3J0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gRC5TT1JUSU5ERVhfR0VPTUVUUllDT0xMRUNUSU9OfSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5nZXROdW1Qb2ludHMoKSkuZmlsbChudWxsKSxlPS0xLG49MDtuPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7bisrKWZvcih2YXIgaT10aGlzLmdlb21ldHJpZXNbbl0uZ2V0Q29vcmRpbmF0ZXMoKSxyPTA7cjxpLmxlbmd0aDtyKyspZSsrLHRbZV09aVtyXTtyZXR1cm4gdH0sZ2V0QXJlYTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQrPXRoaXMuZ2VvbWV0cmllc1tlXS5nZXRBcmVhKCk7cmV0dXJuIHR9LGVxdWFsc0V4YWN0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSlyZXR1cm4hMTt2YXIgbj10O2lmKHRoaXMuZ2VvbWV0cmllcy5sZW5ndGghPT1uLmdlb21ldHJpZXMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgaT0wO2k8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtpKyspaWYoIXRoaXMuZ2VvbWV0cmllc1tpXS5lcXVhbHNFeGFjdChuLmdlb21ldHJpZXNbaV0sZSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIEQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbm9ybWFsaXplOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO3QrKyl0aGlzLmdlb21ldHJpZXNbdF0ubm9ybWFsaXplKCk7b3Quc29ydCh0aGlzLmdlb21ldHJpZXMpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNFbXB0eSgpP251bGw6dGhpcy5nZW9tZXRyaWVzWzBdLmdldENvb3JkaW5hdGUoKX0sZ2V0Qm91bmRhcnlEaW1lbnNpb246ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXQuRkFMU0UsZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdD1NYXRoLm1heCh0LHRoaXMuZ2VvbWV0cmllc1tlXS5nZXRCb3VuZGFyeURpbWVuc2lvbigpKTtyZXR1cm4gdH0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWF0LkZBTFNFLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQ9TWF0aC5tYXgodCx0aGlzLmdlb21ldHJpZXNbZV0uZ2V0RGltZW5zaW9uKCkpO3JldHVybiB0fSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2UrKyl0Kz10aGlzLmdlb21ldHJpZXNbZV0uZ2V0TGVuZ3RoKCk7cmV0dXJuIHR9LGdldE51bVBvaW50czpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXQrPXRoaXMuZ2VvbWV0cmllc1tlXS5nZXROdW1Qb2ludHMoKTtyZXR1cm4gdH0sZ2V0TnVtR2VvbWV0cmllczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdlb21ldHJpZXMubGVuZ3RofSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2VvbWV0cmllcy5sZW5ndGgsZT1uZXcgQXJyYXkodCkuZmlsbChudWxsKSxuPTA7bjx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO24rKyllW25dPXRoaXMuZ2VvbWV0cmllc1tuXS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihlKX0sY29tcGFyZVRvU2FtZUNsYXNzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBydChvdC5hc0xpc3QodGhpcy5nZW9tZXRyaWVzKSksbj1uZXcgcnQob3QuYXNMaXN0KHQuZ2VvbWV0cmllcykpO3JldHVybiB0aGlzLmNvbXBhcmUoZSxuKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWksYT10aGlzLmdldE51bUdlb21ldHJpZXMoKSxzPW8uZ2V0TnVtR2VvbWV0cmllcygpLHU9MDt1PGEmJnU8czspe3ZhciBsPXRoaXMuZ2V0R2VvbWV0cnlOKHUpLGM9by5nZXRHZW9tZXRyeU4odSksaD1sLmNvbXBhcmVUb1NhbWVDbGFzcyhjLHIpO2lmKDAhPT1oKXJldHVybiBoO3UrK31yZXR1cm4gdTxhPzE6dTxzPy0xOjB9fSxhcHBseTpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxGKSlmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7ZSsrKXRoaXMuZ2VvbWV0cmllc1tlXS5hcHBseSh0KTtlbHNlIGlmKExyKGFyZ3VtZW50c1swXSx1dCkpe3ZhciBuPWFyZ3VtZW50c1swXTtpZigwPT09dGhpcy5nZW9tZXRyaWVzLmxlbmd0aClyZXR1cm4gbnVsbDtmb3IodmFyIGU9MDtlPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgmJih0aGlzLmdlb21ldHJpZXNbZV0uYXBwbHkobiksIW4uaXNEb25lKCkpO2UrKyk7bi5pc0dlb21ldHJ5Q2hhbmdlZCgpJiZ0aGlzLmdlb21ldHJ5Q2hhbmdlZCgpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLHN0KSl7dmFyIGk9YXJndW1lbnRzWzBdO2kuZmlsdGVyKHRoaXMpO2Zvcih2YXIgZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdGhpcy5nZW9tZXRyaWVzW2VdLmFwcGx5KGkpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLFIpKXt2YXIgcj1hcmd1bWVudHNbMF07ci5maWx0ZXIodGhpcyk7Zm9yKHZhciBlPTA7ZTx0aGlzLmdlb21ldHJpZXMubGVuZ3RoO2UrKyl0aGlzLmdlb21ldHJpZXNbZV0uYXBwbHkocil9fSxnZXRCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpLGMuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKSxudWxsfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PUQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7dC5nZW9tZXRyaWVzPW5ldyBBcnJheSh0aGlzLmdlb21ldHJpZXMubGVuZ3RoKS5maWxsKG51bGwpO2Zvcih2YXIgZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspdC5nZW9tZXRyaWVzW2VdPXRoaXMuZ2VvbWV0cmllc1tlXS5jbG9uZSgpO3JldHVybiB0fSxnZXRHZW9tZXRyeVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm5cIkdlb21ldHJ5Q29sbGVjdGlvblwifSxjb3B5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLmdlb21ldHJpZXMubGVuZ3RoKS5maWxsKG51bGwpLGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdPXRoaXMuZ2VvbWV0cmllc1tlXS5jb3B5KCk7cmV0dXJuIG5ldyBsdCh0LHRoaXMuZmFjdG9yeSl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7dCsrKWlmKCF0aGlzLmdlb21ldHJpZXNbdF0uaXNFbXB0eSgpKXJldHVybiExO3JldHVybiEwfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBsdH19KSxsdC5zZXJpYWxWZXJzaW9uVUlEPS0weDRmMDdiY2IxZjg1N2Q4MDAsUHIoY3QsbHQpLFRyKGN0LnByb3RvdHlwZSx7Z2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEQuU09SVElOREVYX01VTFRJTElORVNUUklOR30sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiEhdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSYmbHQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmNhbGwodGhpcyx0LGUpfXJldHVybiBsdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ2xvc2VkKCk/YXQuRkFMU0U6MH0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4hMTtmb3IodmFyIHQ9MDt0PHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7dCsrKWlmKCF0aGlzLmdlb21ldHJpZXNbdF0uaXNDbG9zZWQoKSlyZXR1cm4hMTtyZXR1cm4hMH0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDF9LHJldmVyc2U6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZW9tZXRyaWVzLmxlbmd0aCxlPW5ldyBBcnJheSh0KS5maWxsKG51bGwpLG49MDtuPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7bisrKWVbdC0xLW5dPXRoaXMuZ2VvbWV0cmllc1tuXS5yZXZlcnNlKCk7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZyhlKX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGh0KHRoaXMpLmdldEJvdW5kYXJ5KCl9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiTXVsdGlMaW5lU3RyaW5nXCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IGN0KHQsdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbnRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBjdH19KSxjdC5zZXJpYWxWZXJzaW9uVUlEPTB4NzE1NWQyYWI0YWZhODAwMCxUcihodC5wcm90b3R5cGUse2JvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZ2VvbS5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZ2V0RW1wdHlNdWx0aVBvaW50KCk7dmFyIGU9dGhpcy5jb21wdXRlQm91bmRhcnlDb29yZGluYXRlcyh0KTtyZXR1cm4gMT09PWUubGVuZ3RoP3RoaXMuZ2VvbUZhY3QuY3JlYXRlUG9pbnQoZVswXSk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50RnJvbUNvb3JkcyhlKX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZW9tIGluc3RhbmNlb2YgeHQ/dGhpcy5ib3VuZGFyeUxpbmVTdHJpbmcodGhpcy5nZW9tKTp0aGlzLmdlb20gaW5zdGFuY2VvZiBjdD90aGlzLmJvdW5kYXJ5TXVsdGlMaW5lU3RyaW5nKHRoaXMuZ2VvbSk6dGhpcy5nZW9tLmdldEJvdW5kYXJ5KCl9LGJvdW5kYXJ5TGluZVN0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZW9tLmlzRW1wdHkoKT90aGlzLmdldEVtcHR5TXVsdGlQb2ludCgpOnQuaXNDbG9zZWQoKT90aGlzLmJuUnVsZS5pc0luQm91bmRhcnkoMik/dC5nZXRTdGFydFBvaW50KCk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KCk6dGhpcy5nZW9tRmFjdC5jcmVhdGVNdWx0aVBvaW50KFt0LmdldFN0YXJ0UG9pbnQoKSx0LmdldEVuZFBvaW50KCldKX0sZ2V0RW1wdHlNdWx0aVBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbUZhY3QuY3JlYXRlTXVsdGlQb2ludCgpfSxjb21wdXRlQm91bmRhcnlDb29yZGluYXRlczpmdW5jdGlvbih0KXt2YXIgZT1uZXcgXzt0aGlzLmVuZHBvaW50TWFwPW5ldyBldDtmb3IodmFyIG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dC5nZXRHZW9tZXRyeU4obik7MCE9PWkuZ2V0TnVtUG9pbnRzKCkmJih0aGlzLmFkZEVuZHBvaW50KGkuZ2V0Q29vcmRpbmF0ZU4oMCkpLHRoaXMuYWRkRW5kcG9pbnQoaS5nZXRDb29yZGluYXRlTihpLmdldE51bVBvaW50cygpLTEpKSl9Zm9yKHZhciByPXRoaXMuZW5kcG9pbnRNYXAuZW50cnlTZXQoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCksYT1vLmdldFZhbHVlKCkscz1hLmNvdW50O3RoaXMuYm5SdWxlLmlzSW5Cb3VuZGFyeShzKSYmZS5hZGQoby5nZXRLZXkoKSl9cmV0dXJuIFYudG9Db29yZGluYXRlQXJyYXkoZSl9LGFkZEVuZHBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZW5kcG9pbnRNYXAuZ2V0KHQpO251bGw9PT1lJiYoZT1uZXcgZnQsdGhpcy5lbmRwb2ludE1hcC5wdXQodCxlKSksZS5jb3VudCsrfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBodH19KSxodC5nZXRCb3VuZGFyeT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgaHQodCk7cmV0dXJuIGUuZ2V0Qm91bmRhcnkoKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLGU9bmV3IGh0KG4saSk7cmV0dXJuIGUuZ2V0Qm91bmRhcnkoKX19LFRyKGZ0LnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZnR9fSksVHIoX3QucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBfdH19KSxfdC5jaGFycz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgQXJyYXkoZSkuZmlsbChudWxsKSxpPTA7aTxlO2krKyluW2ldPXQ7cmV0dXJuIG5ldyBTdHJpbmcobil9LF90LmdldFN0YWNrVHJhY2U9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IHZ0LG49bmV3IGR0KGUpO3JldHVybiB0LnByaW50U3RhY2tUcmFjZShuKSxlLnRvU3RyaW5nKCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1cIlwiLGE9bmV3IHB0KF90LmdldFN0YWNrVHJhY2UoaSkpLHM9bmV3IHl0KGEpLHU9MDt1PHI7dSsrKXRyeXtvKz1zLnJlYWRMaW5lKCkrX3QuTkVXTElORX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiBtdCkpdGhyb3cgdDtjLnNob3VsZE5ldmVyUmVhY2hIZXJlKCl9ZmluYWxseXt9cmV0dXJuIG99fSxfdC5zcGxpdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLmxlbmd0aCxpPW5ldyBfLHI9XCJcIit0LG89ci5pbmRleE9mKGUpO28+PTA7KXt2YXIgYT1yLnN1YnN0cmluZygwLG8pO2kuYWRkKGEpLHI9ci5zdWJzdHJpbmcobytuKSxvPXIuaW5kZXhPZihlKX1yLmxlbmd0aD4wJiZpLmFkZChyKTtmb3IodmFyIHM9bmV3IEFycmF5KGkuc2l6ZSgpKS5maWxsKG51bGwpLHU9MDt1PHMubGVuZ3RoO3UrKylzW3VdPWkuZ2V0KHUpO3JldHVybiBzfSxfdC50b1N0cmluZz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIF90LlNJTVBMRV9PUkRJTkFURV9GT1JNQVQuZm9ybWF0KHQpfX0sX3Quc3BhY2VzPWZ1bmN0aW9uKHQpe3JldHVybiBfdC5jaGFycyhcIiBcIix0KX0sX3QuTkVXTElORT1MLmdldFByb3BlcnR5KFwibGluZS5zZXBhcmF0b3JcIiksX3QuU0lNUExFX09SRElOQVRFX0ZPUk1BVD1uZXcgZ3QoXCIwLiNcIiksVHIoYnQucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBidH19KSxidC5jb3B5Q29vcmQ9ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPU1hdGgubWluKHQuZ2V0RGltZW5zaW9uKCksbi5nZXREaW1lbnNpb24oKSksbz0wO288cjtvKyspbi5zZXRPcmRpbmF0ZShpLG8sdC5nZXRPcmRpbmF0ZShlLG8pKX0sYnQuaXNSaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2l6ZSgpO3JldHVybiAwPT09ZXx8IShlPD0zKSYmdC5nZXRPcmRpbmF0ZSgwLEEuWCk9PT10LmdldE9yZGluYXRlKGUtMSxBLlgpJiZ0LmdldE9yZGluYXRlKDAsQS5ZKT09PXQuZ2V0T3JkaW5hdGUoZS0xLEEuWSl9LGJ0LmlzRXF1YWw9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnNpemUoKTtpZihuIT09ZS5zaXplKCkpcmV0dXJuITE7Zm9yKHZhciByPU1hdGgubWluKHQuZ2V0RGltZW5zaW9uKCksZS5nZXREaW1lbnNpb24oKSksbz0wO288bjtvKyspZm9yKHZhciBhPTA7YTxyO2ErKyl7dmFyIHM9dC5nZXRPcmRpbmF0ZShvLGEpLHU9ZS5nZXRPcmRpbmF0ZShvLGEpO2lmKCEodC5nZXRPcmRpbmF0ZShvLGEpPT09ZS5nZXRPcmRpbmF0ZShvLGEpfHxpLmlzTmFOKHMpJiZpLmlzTmFOKHUpKSlyZXR1cm4hMX1yZXR1cm4hMH0sYnQuZXh0ZW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmNyZWF0ZShuLGUuZ2V0RGltZW5zaW9uKCkpLHI9ZS5zaXplKCk7aWYoYnQuY29weShlLDAsaSwwLHIpLHI+MClmb3IodmFyIG89cjtvPG47bysrKWJ0LmNvcHkoZSxyLTEsaSxvLDEpO3JldHVybiBpfSxidC5yZXZlcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnNpemUoKS0xLG49TWF0aC50cnVuYyhlLzIpLGk9MDtpPD1uO2krKylidC5zd2FwKHQsaSxlLWkpfSxidC5zd2FwPWZ1bmN0aW9uKHQsZSxuKXtpZihlPT09bilyZXR1cm4gbnVsbDtmb3IodmFyIGk9MDtpPHQuZ2V0RGltZW5zaW9uKCk7aSsrKXt2YXIgcj10LmdldE9yZGluYXRlKGUsaSk7dC5zZXRPcmRpbmF0ZShlLGksdC5nZXRPcmRpbmF0ZShuLGkpKSx0LnNldE9yZGluYXRlKG4saSxyKX19LGJ0LmNvcHk9ZnVuY3Rpb24odCxlLG4saSxyKXtmb3IodmFyIG89MDtvPHI7bysrKWJ0LmNvcHlDb29yZCh0LGUrbyxuLGkrbyl9LGJ0LnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQuc2l6ZSgpO2lmKDA9PT1lKXJldHVyblwiKClcIjt2YXIgbj10LmdldERpbWVuc2lvbigpLGk9bmV3IEM7aS5hcHBlbmQoXCIoXCIpO2Zvcih2YXIgcj0wO3I8ZTtyKyspe3I+MCYmaS5hcHBlbmQoXCIgXCIpO2Zvcih2YXIgbz0wO288bjtvKyspbz4wJiZpLmFwcGVuZChcIixcIiksaS5hcHBlbmQoX3QudG9TdHJpbmcodC5nZXRPcmRpbmF0ZShyLG8pKSl9cmV0dXJuIGkuYXBwZW5kKFwiKVwiKSxpLnRvU3RyaW5nKCl9fSxidC5lbnN1cmVWYWxpZFJpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj1lLnNpemUoKTtyZXR1cm4gMD09PW4/ZTpuPD0zP2J0LmNyZWF0ZUNsb3NlZFJpbmcodCxlLDQpOmUuZ2V0T3JkaW5hdGUoMCxBLlgpPT09ZS5nZXRPcmRpbmF0ZShuLTEsQS5YKSYmZS5nZXRPcmRpbmF0ZSgwLEEuWSk9PT1lLmdldE9yZGluYXRlKG4tMSxBLlkpP2U6YnQuY3JlYXRlQ2xvc2VkUmluZyh0LGUsbisxKX0sYnQuY3JlYXRlQ2xvc2VkUmluZz1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC5jcmVhdGUobixlLmdldERpbWVuc2lvbigpKSxyPWUuc2l6ZSgpO2J0LmNvcHkoZSwwLGksMCxyKTtmb3IodmFyIG89cjtvPG47bysrKWJ0LmNvcHkoZSwwLGksbywxKTtyZXR1cm4gaX0sUHIoeHQsRCksVHIoeHQucHJvdG90eXBlLHtjb21wdXRlRW52ZWxvcGVJbnRlcm5hbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9uZXcgeDp0aGlzLnBvaW50cy5leHBhbmRFbnZlbG9wZShuZXcgeCl9LGlzUmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ2xvc2VkKCkmJnRoaXMuaXNTaW1wbGUoKX0sZ2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEQuU09SVElOREVYX0xJTkVTVFJJTkd9LGdldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRzLnRvQ29vcmRpbmF0ZUFycmF5KCl9LGVxdWFsc0V4YWN0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZighdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSlyZXR1cm4hMTt2YXIgbj10O2lmKHRoaXMucG9pbnRzLnNpemUoKSE9PW4ucG9pbnRzLnNpemUoKSlyZXR1cm4hMTtmb3IodmFyIGk9MDtpPHRoaXMucG9pbnRzLnNpemUoKTtpKyspaWYoIXRoaXMuZXF1YWwodGhpcy5wb2ludHMuZ2V0Q29vcmRpbmF0ZShpKSxuLnBvaW50cy5nZXRDb29yZGluYXRlKGkpLGUpKXJldHVybiExO3JldHVybiEwfXJldHVybiBELnByb3RvdHlwZS5lcXVhbHNFeGFjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8TWF0aC50cnVuYyh0aGlzLnBvaW50cy5zaXplKCkvMik7dCsrKXt2YXIgZT10aGlzLnBvaW50cy5zaXplKCktMS10O2lmKCF0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKHQpLmVxdWFscyh0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKGUpKSlyZXR1cm4gdGhpcy5wb2ludHMuZ2V0Q29vcmRpbmF0ZSh0KS5jb21wYXJlVG8odGhpcy5wb2ludHMuZ2V0Q29vcmRpbmF0ZShlKSk+MCYmYnQucmV2ZXJzZSh0aGlzLnBvaW50cyksbnVsbH19LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKDApfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ2xvc2VkKCk/YXQuRkFMU0U6MH0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0VtcHR5KCkmJnRoaXMuZ2V0Q29vcmRpbmF0ZU4oMCkuZXF1YWxzMkQodGhpcy5nZXRDb29yZGluYXRlTih0aGlzLmdldE51bVBvaW50cygpLTEpKX0sZ2V0RW5kUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLmdldFBvaW50Tih0aGlzLmdldE51bVBvaW50cygpLTEpfSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGFlLmNvbXB1dGVMZW5ndGgodGhpcy5wb2ludHMpfSxnZXROdW1Qb2ludHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb2ludHMuc2l6ZSgpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb2ludHMuY29weSgpO3JldHVybiBidC5yZXZlcnNlKHQpLHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVTdHJpbmcodCl9LGNvbXBhcmVUb1NhbWVDbGFzczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9dCxuPTAsaT0wO248dGhpcy5wb2ludHMuc2l6ZSgpJiZpPGUucG9pbnRzLnNpemUoKTspe3ZhciByPXRoaXMucG9pbnRzLmdldENvb3JkaW5hdGUobikuY29tcGFyZVRvKGUucG9pbnRzLmdldENvb3JkaW5hdGUoaSkpO2lmKDAhPT1yKXJldHVybiByO24rKyxpKyt9cmV0dXJuIG48dGhpcy5wb2ludHMuc2l6ZSgpPzE6aTxlLnBvaW50cy5zaXplKCk/LTE6MH1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG89YXJndW1lbnRzWzBdLGE9YXJndW1lbnRzWzFdLGU9bztyZXR1cm4gYS5jb21wYXJlKHRoaXMucG9pbnRzLGUucG9pbnRzKX19LGFwcGx5OmZ1bmN0aW9uKCl7aWYoTHIoYXJndW1lbnRzWzBdLEYpKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dGhpcy5wb2ludHMuc2l6ZSgpO2UrKyl0LmZpbHRlcih0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKGUpKTtlbHNlIGlmKExyKGFyZ3VtZW50c1swXSx1dCkpe3ZhciBuPWFyZ3VtZW50c1swXTtpZigwPT09dGhpcy5wb2ludHMuc2l6ZSgpKXJldHVybiBudWxsO2Zvcih2YXIgZT0wO2U8dGhpcy5wb2ludHMuc2l6ZSgpJiYobi5maWx0ZXIodGhpcy5wb2ludHMsZSksIW4uaXNEb25lKCkpO2UrKyk7bi5pc0dlb21ldHJ5Q2hhbmdlZCgpJiZ0aGlzLmdlb21ldHJ5Q2hhbmdlZCgpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLHN0KSl7dmFyIGk9YXJndW1lbnRzWzBdO2kuZmlsdGVyKHRoaXMpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLFIpKXt2YXIgcj1hcmd1bWVudHNbMF07ci5maWx0ZXIodGhpcyl9fSxnZXRCb3VuZGFyeTpmdW5jdGlvbigpe3JldHVybiBuZXcgaHQodGhpcykuZ2V0Qm91bmRhcnkoKX0saXNFcXVpdmFsZW50Q2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiB4dH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1ELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LnBvaW50cz10aGlzLnBvaW50cy5jbG9uZSgpLHR9LGdldENvb3JkaW5hdGVOOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKHQpfSxnZXRHZW9tZXRyeVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm5cIkxpbmVTdHJpbmdcIn0sY29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgeHQodGhpcy5wb2ludHMuY29weSgpLHRoaXMuZmFjdG9yeSl9LGdldENvb3JkaW5hdGVTZXF1ZW5jZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvaW50c30saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5wb2ludHMuc2l6ZSgpfSxpbml0OmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10JiYodD10aGlzLmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSksMT09PXQuc2l6ZSgpKXRocm93IG5ldyBuKFwiSW52YWxpZCBudW1iZXIgb2YgcG9pbnRzIGluIExpbmVTdHJpbmcgKGZvdW5kIFwiK3Quc2l6ZSgpK1wiIC0gbXVzdCBiZSAwIG9yID49IDIpXCIpO3RoaXMucG9pbnRzPXR9LGlzQ29vcmRpbmF0ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMucG9pbnRzLnNpemUoKTtlKyspaWYodGhpcy5wb2ludHMuZ2V0Q29vcmRpbmF0ZShlKS5lcXVhbHModCkpcmV0dXJuITA7cmV0dXJuITF9LGdldFN0YXJ0UG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/bnVsbDp0aGlzLmdldFBvaW50TigwKX0sZ2V0UG9pbnROOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLnBvaW50cy5nZXRDb29yZGluYXRlKHQpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bbnRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB4dH19KSx4dC5zZXJpYWxWZXJzaW9uVUlEPTB4MmIyYjUxYmE0MzVjOGUwMCxUcih3dC5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHd0fX0pLFByKEV0LEQpLFRyKEV0LnByb3RvdHlwZSx7Y29tcHV0ZUVudmVsb3BlSW50ZXJuYWw6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbmV3IHg7dmFyIHQ9bmV3IHg7cmV0dXJuIHQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuY29vcmRpbmF0ZXMuZ2V0WCgwKSx0aGlzLmNvb3JkaW5hdGVzLmdldFkoMCkpLHR9LGdldFNvcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBELlNPUlRJTkRFWF9QT0lOVH0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0VtcHR5KCk/W106W3RoaXMuZ2V0Q29vcmRpbmF0ZSgpXX0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiEhdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSYmKCEoIXRoaXMuaXNFbXB0eSgpfHwhdC5pc0VtcHR5KCkpfHx0aGlzLmlzRW1wdHkoKT09PXQuaXNFbXB0eSgpJiZ0aGlzLmVxdWFsKHQuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLGUpKX1yZXR1cm4gRC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXt9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuY29vcmRpbmF0ZXMuc2l6ZSgpP3RoaXMuY29vcmRpbmF0ZXMuZ2V0Q29vcmRpbmF0ZSgwKTpudWxsfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiBhdC5GQUxTRX0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldE51bVBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzRW1wdHkoKT8wOjF9LHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb3B5KCl9LGdldFg6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5nZXRDb29yZGluYXRlKCkpdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcImdldFggY2FsbGVkIG9uIGVtcHR5IFBvaW50XCIpO3JldHVybiB0aGlzLmdldENvb3JkaW5hdGUoKS54fSxjb21wYXJlVG9TYW1lQ2xhc3M6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9dDtyZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlKCkuY29tcGFyZVRvKGUuZ2V0Q29vcmRpbmF0ZSgpKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLGU9bjtyZXR1cm4gaS5jb21wYXJlKHRoaXMuY29vcmRpbmF0ZXMsZS5jb29yZGluYXRlcyl9fSxhcHBseTpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxGKSl7dmFyIHQ9YXJndW1lbnRzWzBdO2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiBudWxsO3QuZmlsdGVyKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKTtcbn1lbHNlIGlmKExyKGFyZ3VtZW50c1swXSx1dCkpe3ZhciBlPWFyZ3VtZW50c1swXTtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDtlLmZpbHRlcih0aGlzLmNvb3JkaW5hdGVzLDApLGUuaXNHZW9tZXRyeUNoYW5nZWQoKSYmdGhpcy5nZW9tZXRyeUNoYW5nZWQoKX1lbHNlIGlmKExyKGFyZ3VtZW50c1swXSxzdCkpe3ZhciBuPWFyZ3VtZW50c1swXTtuLmZpbHRlcih0aGlzKX1lbHNlIGlmKExyKGFyZ3VtZW50c1swXSxSKSl7dmFyIGk9YXJndW1lbnRzWzBdO2kuZmlsdGVyKHRoaXMpfX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKG51bGwpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PUQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuY29vcmRpbmF0ZXM9dGhpcy5jb29yZGluYXRlcy5jbG9uZSgpLHR9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiUG9pbnRcIn0sY29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgRXQodGhpcy5jb29yZGluYXRlcy5jb3B5KCksdGhpcy5mYWN0b3J5KX0sZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXN9LGdldFk6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5nZXRDb29yZGluYXRlKCkpdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcImdldFkgY2FsbGVkIG9uIGVtcHR5IFBvaW50XCIpO3JldHVybiB0aGlzLmdldENvb3JkaW5hdGUoKS55fSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmNvb3JkaW5hdGVzLnNpemUoKX0saW5pdDpmdW5jdGlvbih0KXtudWxsPT09dCYmKHQ9dGhpcy5nZXRGYWN0b3J5KCkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShbXSkpLGMuaXNUcnVlKHQuc2l6ZSgpPD0xKSx0aGlzLmNvb3JkaW5hdGVzPXR9LGlzU2ltcGxlOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3d0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRXR9fSksRXQuc2VyaWFsVmVyc2lvblVJRD0weDQ0MDc3YmFkMTYxY2JjMDAsVHIoU3QucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBTdH19KSxQcihNdCxEKSxUcihNdC5wcm90b3R5cGUse2NvbXB1dGVFbnZlbG9wZUludGVybmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpfSxnZXRTb3J0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gRC5TT1JUSU5ERVhfUE9MWUdPTn0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm5bXTtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2V0TnVtUG9pbnRzKCkpLmZpbGwobnVsbCksZT0tMSxuPXRoaXMuc2hlbGwuZ2V0Q29vcmRpbmF0ZXMoKSxpPTA7aTxuLmxlbmd0aDtpKyspZSsrLHRbZV09bltpXTtmb3IodmFyIHI9MDtyPHRoaXMuaG9sZXMubGVuZ3RoO3IrKylmb3IodmFyIG89dGhpcy5ob2xlc1tyXS5nZXRDb29yZGluYXRlcygpLGE9MDthPG8ubGVuZ3RoO2ErKyllKyssdFtlXT1vW2FdO3JldHVybiB0fSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIHQ9MDt0Kz1NYXRoLmFicyhhZS5zaWduZWRBcmVhKHRoaXMuc2hlbGwuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpKTtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0LT1NYXRoLmFicyhhZS5zaWduZWRBcmVhKHRoaXMuaG9sZXNbZV0uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpKTtyZXR1cm4gdH0saXNSZWN0YW5nbGU6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5nZXROdW1JbnRlcmlvclJpbmcoKSlyZXR1cm4hMTtpZihudWxsPT09dGhpcy5zaGVsbClyZXR1cm4hMTtpZig1IT09dGhpcy5zaGVsbC5nZXROdW1Qb2ludHMoKSlyZXR1cm4hMTtmb3IodmFyIHQ9dGhpcy5zaGVsbC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSxlPXRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLG49MDtuPDU7bisrKXt2YXIgaT10LmdldFgobik7aWYoaSE9PWUuZ2V0TWluWCgpJiZpIT09ZS5nZXRNYXhYKCkpcmV0dXJuITE7dmFyIHI9dC5nZXRZKG4pO2lmKHIhPT1lLmdldE1pblkoKSYmciE9PWUuZ2V0TWF4WSgpKXJldHVybiExfWZvcih2YXIgbz10LmdldFgoMCksYT10LmdldFkoMCksbj0xO248PTQ7bisrKXt2YXIgaT10LmdldFgobikscj10LmdldFkobik7aWYoaSE9PW89PShyIT09YSkpcmV0dXJuITE7bz1pLGE9cn1yZXR1cm4hMH0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKCF0aGlzLmlzRXF1aXZhbGVudENsYXNzKHQpKXJldHVybiExO3ZhciBuPXQsaT10aGlzLnNoZWxsLHI9bi5zaGVsbDtpZighaS5lcXVhbHNFeGFjdChyLGUpKXJldHVybiExO2lmKHRoaXMuaG9sZXMubGVuZ3RoIT09bi5ob2xlcy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBvPTA7bzx0aGlzLmhvbGVzLmxlbmd0aDtvKyspaWYoIXRoaXMuaG9sZXNbb10uZXF1YWxzRXhhY3Qobi5ob2xlc1tvXSxlKSlyZXR1cm4hMTtyZXR1cm4hMH1yZXR1cm4gRC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7dGhpcy5ub3JtYWxpemUodGhpcy5zaGVsbCwhMCk7Zm9yKHZhciB0PTA7dDx0aGlzLmhvbGVzLmxlbmd0aDt0KyspdGhpcy5ub3JtYWxpemUodGhpcy5ob2xlc1t0XSwhMSk7b3Quc29ydCh0aGlzLmhvbGVzKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07aWYoZS5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIGk9bmV3IEFycmF5KGUuZ2V0Q29vcmRpbmF0ZXMoKS5sZW5ndGgtMSkuZmlsbChudWxsKTtMLmFycmF5Y29weShlLmdldENvb3JkaW5hdGVzKCksMCxpLDAsaS5sZW5ndGgpO3ZhciByPVYubWluQ29vcmRpbmF0ZShlLmdldENvb3JkaW5hdGVzKCkpO1Yuc2Nyb2xsKGksciksTC5hcnJheWNvcHkoaSwwLGUuZ2V0Q29vcmRpbmF0ZXMoKSwwLGkubGVuZ3RoKSxlLmdldENvb3JkaW5hdGVzKClbaS5sZW5ndGhdPWlbMF0sYWUuaXNDQ1coZS5nZXRDb29yZGluYXRlcygpKT09PW4mJlYucmV2ZXJzZShlLmdldENvb3JkaW5hdGVzKCkpfX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoZWxsLmdldENvb3JkaW5hdGUoKX0sZ2V0TnVtSW50ZXJpb3JSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9sZXMubGVuZ3RofSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiAxfSxnZXREaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMn0sZ2V0TGVuZ3RoOmZ1bmN0aW9uKCl7dmFyIHQ9MDt0Kz10aGlzLnNoZWxsLmdldExlbmd0aCgpO2Zvcih2YXIgZT0wO2U8dGhpcy5ob2xlcy5sZW5ndGg7ZSsrKXQrPXRoaXMuaG9sZXNbZV0uZ2V0TGVuZ3RoKCk7cmV0dXJuIHR9LGdldE51bVBvaW50czpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnNoZWxsLmdldE51bVBvaW50cygpLGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0Kz10aGlzLmhvbGVzW2VdLmdldE51bVBvaW50cygpO3JldHVybiB0fSxyZXZlcnNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb3B5KCk7dC5zaGVsbD10aGlzLnNoZWxsLmNvcHkoKS5yZXZlcnNlKCksdC5ob2xlcz1uZXcgQXJyYXkodGhpcy5ob2xlcy5sZW5ndGgpLmZpbGwobnVsbCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aDtlKyspdC5ob2xlc1tlXT10aGlzLmhvbGVzW2VdLmNvcHkoKS5yZXZlcnNlKCk7cmV0dXJuIHR9LGNvbnZleEh1bGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRFeHRlcmlvclJpbmcoKS5jb252ZXhIdWxsKCl9LGNvbXBhcmVUb1NhbWVDbGFzczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLnNoZWxsLG49dC5zaGVsbDtyZXR1cm4gZS5jb21wYXJlVG9TYW1lQ2xhc3Mobil9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWksZT10aGlzLnNoZWxsLG49by5zaGVsbCxhPWUuY29tcGFyZVRvU2FtZUNsYXNzKG4scik7aWYoMCE9PWEpcmV0dXJuIGE7Zm9yKHZhciBzPXRoaXMuZ2V0TnVtSW50ZXJpb3JSaW5nKCksdT1vLmdldE51bUludGVyaW9yUmluZygpLGw9MDtsPHMmJmw8dTspe3ZhciBjPXRoaXMuZ2V0SW50ZXJpb3JSaW5nTihsKSxoPW8uZ2V0SW50ZXJpb3JSaW5nTihsKSxmPWMuY29tcGFyZVRvU2FtZUNsYXNzKGgscik7aWYoMCE9PWYpcmV0dXJuIGY7bCsrfXJldHVybiBsPHM/MTpsPHU/LTE6MH19LGFwcGx5OmZ1bmN0aW9uKCl7aWYoTHIoYXJndW1lbnRzWzBdLEYpKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5zaGVsbC5hcHBseSh0KTtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0aGlzLmhvbGVzW2VdLmFwcGx5KHQpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLHV0KSl7dmFyIG49YXJndW1lbnRzWzBdO2lmKHRoaXMuc2hlbGwuYXBwbHkobiksIW4uaXNEb25lKCkpZm9yKHZhciBlPTA7ZTx0aGlzLmhvbGVzLmxlbmd0aCYmKHRoaXMuaG9sZXNbZV0uYXBwbHkobiksIW4uaXNEb25lKCkpO2UrKyk7bi5pc0dlb21ldHJ5Q2hhbmdlZCgpJiZ0aGlzLmdlb21ldHJ5Q2hhbmdlZCgpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLHN0KSl7dmFyIGk9YXJndW1lbnRzWzBdO2kuZmlsdGVyKHRoaXMpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzBdLFIpKXt2YXIgcj1hcmd1bWVudHNbMF07ci5maWx0ZXIodGhpcyksdGhpcy5zaGVsbC5hcHBseShyKTtmb3IodmFyIGU9MDtlPHRoaXMuaG9sZXMubGVuZ3RoO2UrKyl0aGlzLmhvbGVzW2VdLmFwcGx5KHIpfX0sZ2V0Qm91bmRhcnk6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKCk7dmFyIHQ9bmV3IEFycmF5KHRoaXMuaG9sZXMubGVuZ3RoKzEpLmZpbGwobnVsbCk7dFswXT10aGlzLnNoZWxsO2Zvcih2YXIgZT0wO2U8dGhpcy5ob2xlcy5sZW5ndGg7ZSsrKXRbZSsxXT10aGlzLmhvbGVzW2VdO3JldHVybiB0Lmxlbmd0aDw9MT90aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lYXJSaW5nKHRbMF0uZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkpOnRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpTGluZVN0cmluZyh0KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1ELnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO3Quc2hlbGw9dGhpcy5zaGVsbC5jbG9uZSgpLHQuaG9sZXM9bmV3IEFycmF5KHRoaXMuaG9sZXMubGVuZ3RoKS5maWxsKG51bGwpO2Zvcih2YXIgZT0wO2U8dGhpcy5ob2xlcy5sZW5ndGg7ZSsrKXQuaG9sZXNbZV09dGhpcy5ob2xlc1tlXS5jbG9uZSgpO3JldHVybiB0fSxnZXRHZW9tZXRyeVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm5cIlBvbHlnb25cIn0sY29weTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnNoZWxsLmNvcHkoKSxlPW5ldyBBcnJheSh0aGlzLmhvbGVzLmxlbmd0aCkuZmlsbChudWxsKSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXT10aGlzLmhvbGVzW25dLmNvcHkoKTtyZXR1cm4gbmV3IE10KHQsZSx0aGlzLmZhY3RvcnkpfSxnZXRFeHRlcmlvclJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGVsbH0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNoZWxsLmlzRW1wdHkoKX0sZ2V0SW50ZXJpb3JSaW5nTjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ob2xlc1t0XX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bU3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBNdH19KSxNdC5zZXJpYWxWZXJzaW9uVUlEPS0weDMwN2ZmZWZkOGRjOTcyMDAsUHIoQ3QsbHQpLFRyKEN0LnByb3RvdHlwZSx7Z2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEQuU09SVElOREVYX01VTFRJUE9JTlR9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZXF1YWxzRXhhY3Q6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiEhdGhpcy5pc0VxdWl2YWxlbnRDbGFzcyh0KSYmbHQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmNhbGwodGhpcyx0LGUpfXJldHVybiBsdC5wcm90b3R5cGUuZXF1YWxzRXhhY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5nZW9tZXRyaWVzW3RdLmdldENvb3JkaW5hdGUoKX1yZXR1cm4gbHQucHJvdG90eXBlLmdldENvb3JkaW5hdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxnZXRCb3VuZGFyeURpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiBhdC5GQUxTRX0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGdldEJvdW5kYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihudWxsKX0sZ2V0R2VvbWV0cnlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJNdWx0aVBvaW50XCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IEN0KHQsdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bd3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBDdH19KSxDdC5zZXJpYWxWZXJzaW9uVUlEPS0weDZmYjFlZDQxNjJlMGZjMDAsUHIoSXQseHQpLFRyKEl0LnByb3RvdHlwZSx7Z2V0U29ydEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIEQuU09SVElOREVYX0xJTkVBUlJJTkd9LGdldEJvdW5kYXJ5RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGF0LkZBTFNFfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5pc0VtcHR5KCl8fHh0LnByb3RvdHlwZS5pc0Nsb3NlZC5jYWxsKHRoaXMpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb2ludHMuY29weSgpO3JldHVybiBidC5yZXZlcnNlKHQpLHRoaXMuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVhclJpbmcodCl9LHZhbGlkYXRlQ29uc3RydWN0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFbXB0eSgpJiYheHQucHJvdG90eXBlLmlzQ2xvc2VkLmNhbGwodGhpcykpdGhyb3cgbmV3IG4oXCJQb2ludHMgb2YgTGluZWFyUmluZyBkbyBub3QgZm9ybSBhIGNsb3NlZCBsaW5lc3RyaW5nXCIpO2lmKHRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlKCkuc2l6ZSgpPj0xJiZ0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLnNpemUoKTxJdC5NSU5JTVVNX1ZBTElEX1NJWkUpdGhyb3cgbmV3IG4oXCJJbnZhbGlkIG51bWJlciBvZiBwb2ludHMgaW4gTGluZWFyUmluZyAoZm91bmQgXCIrdGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2UoKS5zaXplKCkrXCIgLSBtdXN0IGJlIDAgb3IgPj0gNClcIil9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiTGluZWFyUmluZ1wifSxjb3B5OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJdCh0aGlzLnBvaW50cy5jb3B5KCksdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSXR9fSksSXQuTUlOSU1VTV9WQUxJRF9TSVpFPTQsSXQuc2VyaWFsVmVyc2lvblVJRD0tMHgzYjIyOWUyNjIzNjdhNjAwLFByKE90LGx0KSxUcihPdC5wcm90b3R5cGUse2dldFNvcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiBELlNPUlRJTkRFWF9NVUxUSVBPTFlHT059LGVxdWFsc0V4YWN0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4hIXRoaXMuaXNFcXVpdmFsZW50Q2xhc3ModCkmJmx0LnByb3RvdHlwZS5lcXVhbHNFeGFjdC5jYWxsKHRoaXMsdCxlKX1yZXR1cm4gbHQucHJvdG90eXBlLmVxdWFsc0V4YWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0Qm91bmRhcnlEaW1lbnNpb246ZnVuY3Rpb24oKXtyZXR1cm4gMX0sZ2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIDJ9LHJldmVyc2U6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5nZW9tZXRyaWVzLmxlbmd0aCxlPW5ldyBBcnJheSh0KS5maWxsKG51bGwpLG49MDtuPHRoaXMuZ2VvbWV0cmllcy5sZW5ndGg7bisrKWVbbl09dGhpcy5nZW9tZXRyaWVzW25dLnJldmVyc2UoKTtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlQb2x5Z29uKGUpfSxnZXRCb3VuZGFyeTpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybiB0aGlzLmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoKTtmb3IodmFyIHQ9bmV3IF8sZT0wO2U8dGhpcy5nZW9tZXRyaWVzLmxlbmd0aDtlKyspZm9yKHZhciBuPXRoaXMuZ2VvbWV0cmllc1tlXSxpPW4uZ2V0Qm91bmRhcnkoKSxyPTA7cjxpLmdldE51bUdlb21ldHJpZXMoKTtyKyspdC5hZGQoaS5nZXRHZW9tZXRyeU4ocikpO3ZhciBvPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdGhpcy5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKHQudG9BcnJheShvKSl9LGdldEdlb21ldHJ5VHlwZTpmdW5jdGlvbigpe3JldHVyblwiTXVsdGlQb2x5Z29uXCJ9LGNvcHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZ2VvbWV0cmllcy5sZW5ndGgpLmZpbGwobnVsbCksZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09dGhpcy5nZW9tZXRyaWVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IE90KHQsdGhpcy5mYWN0b3J5KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bU3RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPdH19KSxPdC5zZXJpYWxWZXJzaW9uVUlEPS0weDdhNWFhMTM2OTE3MTk4MCxUcihUdC5wcm90b3R5cGUse3NldENvcHlVc2VyRGF0YTpmdW5jdGlvbih0KXt0aGlzLmlzVXNlckRhdGFDb3BpZWQ9dH0sZWRpdDpmdW5jdGlvbih0LGUpe2lmKG51bGw9PT10KXJldHVybiBudWxsO3ZhciBuPXRoaXMuZWRpdEludGVybmFsKHQsZSk7cmV0dXJuIHRoaXMuaXNVc2VyRGF0YUNvcGllZCYmbi5zZXRVc2VyRGF0YSh0LmdldFVzZXJEYXRhKCkpLG59LGVkaXRJbnRlcm5hbDpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09dGhpcy5mYWN0b3J5JiYodGhpcy5mYWN0b3J5PXQuZ2V0RmFjdG9yeSgpKSx0IGluc3RhbmNlb2YgbHQ/dGhpcy5lZGl0R2VvbWV0cnlDb2xsZWN0aW9uKHQsZSk6dCBpbnN0YW5jZW9mIE10P3RoaXMuZWRpdFBvbHlnb24odCxlKTp0IGluc3RhbmNlb2YgRXQ/ZS5lZGl0KHQsdGhpcy5mYWN0b3J5KTp0IGluc3RhbmNlb2YgeHQ/ZS5lZGl0KHQsdGhpcy5mYWN0b3J5KTooYy5zaG91bGROZXZlclJlYWNoSGVyZShcIlVuc3VwcG9ydGVkIEdlb21ldHJ5IGNsYXNzOiBcIit0LmdldENsYXNzKCkuZ2V0TmFtZSgpKSxudWxsKX0sZWRpdEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1lLmVkaXQodCx0aGlzLmZhY3RvcnkpLGk9bmV3IF8scj0wO3I8bi5nZXROdW1HZW9tZXRyaWVzKCk7cisrKXt2YXIgbz10aGlzLmVkaXQobi5nZXRHZW9tZXRyeU4ociksZSk7bnVsbD09PW98fG8uaXNFbXB0eSgpfHxpLmFkZChvKX1yZXR1cm4gbi5nZXRDbGFzcygpPT09Q3Q/dGhpcy5mYWN0b3J5LmNyZWF0ZU11bHRpUG9pbnQoaS50b0FycmF5KFtdKSk6bi5nZXRDbGFzcygpPT09Y3Q/dGhpcy5mYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhpLnRvQXJyYXkoW10pKTpuLmdldENsYXNzKCk9PT1PdD90aGlzLmZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGkudG9BcnJheShbXSkpOnRoaXMuZmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oaS50b0FycmF5KFtdKSl9LGVkaXRQb2x5Z29uOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5lZGl0KHQsdGhpcy5mYWN0b3J5KTtpZihudWxsPT09biYmKG49dGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24obnVsbCkpLG4uaXNFbXB0eSgpKXJldHVybiBuO3ZhciBpPXRoaXMuZWRpdChuLmdldEV4dGVyaW9yUmluZygpLGUpO2lmKG51bGw9PT1pfHxpLmlzRW1wdHkoKSlyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24oKTtmb3IodmFyIHI9bmV3IF8sbz0wO288bi5nZXROdW1JbnRlcmlvclJpbmcoKTtvKyspe3ZhciBhPXRoaXMuZWRpdChuLmdldEludGVyaW9yUmluZ04obyksZSk7bnVsbD09PWF8fGEuaXNFbXB0eSgpfHxyLmFkZChhKX1yZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24oaSxyLnRvQXJyYXkoW10pKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVHR9fSksVHQuR2VvbWV0cnlFZGl0b3JPcGVyYXRpb249UHQsVHIoQXQucHJvdG90eXBlLHtlZGl0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW1B0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQXR9fSksVHIoTHQucHJvdG90eXBlLHtlZGl0OmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5lZGl0Q29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlcygpLHQpO3JldHVybiBudWxsPT09bj90OnQgaW5zdGFuY2VvZiBJdD9lLmNyZWF0ZUxpbmVhclJpbmcobik6dCBpbnN0YW5jZW9mIHh0P2UuY3JlYXRlTGluZVN0cmluZyhuKTp0IGluc3RhbmNlb2YgRXQ/bi5sZW5ndGg+MD9lLmNyZWF0ZVBvaW50KG5bMF0pOmUuY3JlYXRlUG9pbnQoKTp0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltQdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEx0fX0pLFRyKE50LnByb3RvdHlwZSx7ZWRpdDpmdW5jdGlvbih0LGUpe3JldHVybiB0IGluc3RhbmNlb2YgSXQ/ZS5jcmVhdGVMaW5lYXJSaW5nKHRoaXMuZWRpdCh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpKTp0IGluc3RhbmNlb2YgeHQ/ZS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMuZWRpdCh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpKTp0IGluc3RhbmNlb2YgRXQ/ZS5jcmVhdGVQb2ludCh0aGlzLmVkaXQodC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSk6dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bUHRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBOdH19KSxUdC5Ob09wR2VvbWV0cnlPcGVyYXRpb249QXQsVHQuQ29vcmRpbmF0ZU9wZXJhdGlvbj1MdCxUdC5Db29yZGluYXRlU2VxdWVuY2VPcGVyYXRpb249TnQsVHIoa3QucHJvdG90eXBlLHtzZXRPcmRpbmF0ZTpmdW5jdGlvbih0LGUsaSl7c3dpdGNoKGUpe2Nhc2UgQS5YOnRoaXMuY29vcmRpbmF0ZXNbdF0ueD1pO2JyZWFrO2Nhc2UgQS5ZOnRoaXMuY29vcmRpbmF0ZXNbdF0ueT1pO2JyZWFrO2Nhc2UgQS5aOnRoaXMuY29vcmRpbmF0ZXNbdF0uej1pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IG4oXCJpbnZhbGlkIG9yZGluYXRlSW5kZXhcIil9fSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RofSxnZXRPcmRpbmF0ZTpmdW5jdGlvbih0LGUpe3N3aXRjaChlKXtjYXNlIEEuWDpyZXR1cm4gdGhpcy5jb29yZGluYXRlc1t0XS54O2Nhc2UgQS5ZOnJldHVybiB0aGlzLmNvb3JkaW5hdGVzW3RdLnk7Y2FzZSBBLlo6cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbdF0uen1yZXR1cm4gaS5OYU59LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNvb3JkaW5hdGVzW3RdfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07bi54PXRoaXMuY29vcmRpbmF0ZXNbZV0ueCxuLnk9dGhpcy5jb29yZGluYXRlc1tlXS55LG4uej10aGlzLmNvb3JkaW5hdGVzW2VdLnp9fSxnZXRDb29yZGluYXRlQ29weTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGgodGhpcy5jb29yZGluYXRlc1t0XSl9LGdldERpbWVuc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpbWVuc2lvbn0sZ2V0WDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb29yZGluYXRlc1t0XS54fSxjbG9uZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgQXJyYXkodGhpcy5zaXplKCkpLmZpbGwobnVsbCksZT0wO2U8dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXRbZV09dGhpcy5jb29yZGluYXRlc1tlXS5jbG9uZSgpO3JldHVybiBuZXcga3QodCx0aGlzLmRpbWVuc2lvbil9LGV4cGFuZEVudmVsb3BlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7ZSsrKXQuZXhwYW5kVG9JbmNsdWRlKHRoaXMuY29vcmRpbmF0ZXNbZV0pO3JldHVybiB0fSxjb3B5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBBcnJheSh0aGlzLnNpemUoKSkuZmlsbChudWxsKSxlPTA7ZTx0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtlKyspdFtlXT10aGlzLmNvb3JkaW5hdGVzW2VdLmNvcHkoKTtyZXR1cm4gbmV3IGt0KHQsdGhpcy5kaW1lbnNpb24pfSx0b1N0cmluZzpmdW5jdGlvbigpe2lmKHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoPjApe3ZhciB0PW5ldyBDKDE3KnRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoKTt0LmFwcGVuZChcIihcIiksdC5hcHBlbmQodGhpcy5jb29yZGluYXRlc1swXSk7Zm9yKHZhciBlPTE7ZTx0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aDtlKyspdC5hcHBlbmQoXCIsIFwiKSx0LmFwcGVuZCh0aGlzLmNvb3JkaW5hdGVzW2VdKTtyZXR1cm4gdC5hcHBlbmQoXCIpXCIpLHQudG9TdHJpbmcoKX1yZXR1cm5cIigpXCJ9LGdldFk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbdF0ueX0sdG9Db29yZGluYXRlQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bQSxzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4ga3R9fSksa3Quc2VyaWFsVmVyc2lvblVJRD0tMHhjYjQ0YTc3OGRiMThlMDAsVHIoUnQucHJvdG90eXBlLHtyZWFkUmVzb2x2ZTpmdW5jdGlvbigpe3JldHVybiBSdC5pbnN0YW5jZSgpfSxjcmVhdGU6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gbmV3IGt0KGFyZ3VtZW50c1swXSk7aWYoTHIoYXJndW1lbnRzWzBdLEEpKXJldHVybiBuZXcga3QoYXJndW1lbnRzWzBdKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIGU+MyYmKGU9MyksZTwyP25ldyBrdCh0KTpuZXcga3QodCxlKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ssc119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFJ0fX0pLFJ0Lmluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIFJ0Lmluc3RhbmNlT2JqZWN0fSxSdC5zZXJpYWxWZXJzaW9uVUlEPS0weDM4ZTQ5ZmE2Y2Y2ZjJlMDAsUnQuaW5zdGFuY2VPYmplY3Q9bmV3IFJ0O3ZhciBEcixGcj1PYmplY3QuZGVmaW5lUHJvcGVydHksQnI9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiB0aGlzJiZ0aGlzLmNvbnN0cnVjdG9yPT09bj8odGhpcy5fa2V5cz1bXSx0aGlzLl92YWx1ZXM9W10sdGhpcy5faXRwPVtdLHRoaXMub2JqZWN0T25seT1lLHQmJkZ0LmNhbGwodGhpcyx0KSx2b2lkIDApOm5ldyBuKHQpfXJldHVybiBlfHxGcih0LFwic2l6ZVwiLHtnZXQ6V3R9KSx0LmNvbnN0cnVjdG9yPW4sbi5wcm90b3R5cGU9dCxufSh7ZGVsZXRlOkJ0LGhhczp6dCxnZXQ6anQsc2V0Okd0LGtleXM6WHQsdmFsdWVzOkh0LGVudHJpZXM6cXQsZm9yRWFjaDpadCxjbGVhcjpWdH0pLGpyPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAmJk1hcC5wcm90b3R5cGUudmFsdWVzP01hcDpCcjtKdC5wcm90b3R5cGU9bmV3IHEsSnQucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tYXBfLmdldCh0KXx8bnVsbH0sSnQucHJvdG90eXBlLnB1dD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1hcF8uc2V0KHQsZSksZX0sSnQucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgXyxlPXRoaXMubWFwXy52YWx1ZXMoKSxuPWUubmV4dCgpOyFuLmRvbmU7KXQuYWRkKG4udmFsdWUpLG49ZS5uZXh0KCk7cmV0dXJuIHR9LEp0LnByb3RvdHlwZS5lbnRyeVNldD1mdW5jdGlvbigpe3ZhciB0PW5ldyBaO3JldHVybiB0aGlzLm1hcF8uZW50cmllcygpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYWRkKGUpfSksdH0sSnQucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXBfLnNpemUoKX0sVHIoS3QucHJvdG90eXBlLHtlcXVhbHM6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgS3QpKXJldHVybiExO3ZhciBlPXQ7cmV0dXJuIHRoaXMubW9kZWxUeXBlPT09ZS5tb2RlbFR5cGUmJnRoaXMuc2NhbGU9PT1lLnNjYWxlfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dCxuPXRoaXMuZ2V0TWF4aW11bVNpZ25pZmljYW50RGlnaXRzKCksaT1lLmdldE1heGltdW1TaWduaWZpY2FudERpZ2l0cygpO3JldHVybiBuZXcgSShuKS5jb21wYXJlVG8obmV3IEkoaSkpfSxnZXRTY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjYWxlfSxpc0Zsb2F0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWxUeXBlPT09S3QuRkxPQVRJTkd8fHRoaXMubW9kZWxUeXBlPT09S3QuRkxPQVRJTkdfU0lOR0xFfSxnZXRUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWxUeXBlfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PVwiVU5LTk9XTlwiO3JldHVybiB0aGlzLm1vZGVsVHlwZT09PUt0LkZMT0FUSU5HP3Q9XCJGbG9hdGluZ1wiOnRoaXMubW9kZWxUeXBlPT09S3QuRkxPQVRJTkdfU0lOR0xFP3Q9XCJGbG9hdGluZy1TaW5nbGVcIjp0aGlzLm1vZGVsVHlwZT09PUt0LkZJWEVEJiYodD1cIkZpeGVkIChTY2FsZT1cIit0aGlzLmdldFNjYWxlKCkrXCIpXCIpLHR9LG1ha2VQcmVjaXNlOmZ1bmN0aW9uKCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBpLmlzTmFOKHQpP3Q6dGhpcy5tb2RlbFR5cGU9PT1LdC5GTE9BVElOR19TSU5HTEU/dDp0aGlzLm1vZGVsVHlwZT09PUt0LkZJWEVEP01hdGgucm91bmQodCp0aGlzLnNjYWxlKS90aGlzLnNjYWxlOnR9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgZT1hcmd1bWVudHNbMF07aWYodGhpcy5tb2RlbFR5cGU9PT1LdC5GTE9BVElORylyZXR1cm4gbnVsbDtlLng9dGhpcy5tYWtlUHJlY2lzZShlLngpLGUueT10aGlzLm1ha2VQcmVjaXNlKGUueSl9fSxnZXRNYXhpbXVtU2lnbmlmaWNhbnREaWdpdHM6ZnVuY3Rpb24oKXt2YXIgdD0xNjtyZXR1cm4gdGhpcy5tb2RlbFR5cGU9PT1LdC5GTE9BVElORz90PTE2OnRoaXMubW9kZWxUeXBlPT09S3QuRkxPQVRJTkdfU0lOR0xFP3Q9Njp0aGlzLm1vZGVsVHlwZT09PUt0LkZJWEVEJiYodD0xK01hdGgudHJ1bmMoTWF0aC5jZWlsKE1hdGgubG9nKHRoaXMuZ2V0U2NhbGUoKSkvTWF0aC5sb2coMTApKSkpLHR9LHNldFNjYWxlOmZ1bmN0aW9uKHQpe3RoaXMuc2NhbGU9TWF0aC5hYnModCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3Mscl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEt0fX0pLEt0Lm1vc3RQcmVjaXNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29tcGFyZVRvKGUpPj0wP3Q6ZX0sVHIoUXQucHJvdG90eXBlLHtyZWFkUmVzb2x2ZTpmdW5jdGlvbigpe3JldHVybiBRdC5uYW1lVG9UeXBlTWFwLmdldCh0aGlzLm5hbWUpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3NdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBRdH19KSxRdC5zZXJpYWxWZXJzaW9uVUlEPS01NTI4NjAyNjMxNzMxNTllNCxRdC5uYW1lVG9UeXBlTWFwPW5ldyBKdCxLdC5UeXBlPVF0LEt0LnNlcmlhbFZlcnNpb25VSUQ9MHg2YmVlNjQwNGU5YTI1YzAwLEt0LkZJWEVEPW5ldyBRdChcIkZJWEVEXCIpLEt0LkZMT0FUSU5HPW5ldyBRdChcIkZMT0FUSU5HXCIpLEt0LkZMT0FUSU5HX1NJTkdMRT1uZXcgUXQoXCJGTE9BVElORyBTSU5HTEVcIiksS3QubWF4aW11bVByZWNpc2VWYWx1ZT05MDA3MTk5MjU0NzQwOTkyLFRyKCR0LnByb3RvdHlwZSx7dG9HZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdC5pc051bGwoKT90aGlzLmNyZWF0ZVBvaW50KG51bGwpOnQuZ2V0TWluWCgpPT09dC5nZXRNYXhYKCkmJnQuZ2V0TWluWSgpPT09dC5nZXRNYXhZKCk/dGhpcy5jcmVhdGVQb2ludChuZXcgaCh0LmdldE1pblgoKSx0LmdldE1pblkoKSkpOnQuZ2V0TWluWCgpPT09dC5nZXRNYXhYKCl8fHQuZ2V0TWluWSgpPT09dC5nZXRNYXhZKCk/dGhpcy5jcmVhdGVMaW5lU3RyaW5nKFtuZXcgaCh0LmdldE1pblgoKSx0LmdldE1pblkoKSksbmV3IGgodC5nZXRNYXhYKCksdC5nZXRNYXhZKCkpXSk6dGhpcy5jcmVhdGVQb2x5Z29uKHRoaXMuY3JlYXRlTGluZWFyUmluZyhbbmV3IGgodC5nZXRNaW5YKCksdC5nZXRNaW5ZKCkpLG5ldyBoKHQuZ2V0TWluWCgpLHQuZ2V0TWF4WSgpKSxuZXcgaCh0LmdldE1heFgoKSx0LmdldE1heFkoKSksbmV3IGgodC5nZXRNYXhYKCksdC5nZXRNaW5ZKCkpLG5ldyBoKHQuZ2V0TWluWCgpLHQuZ2V0TWluWSgpKV0pLG51bGwpfSxjcmVhdGVMaW5lU3RyaW5nOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuY3JlYXRlTGluZVN0cmluZyh0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoW10pKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZUxpbmVTdHJpbmcobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpOm51bGwpfWlmKExyKGFyZ3VtZW50c1swXSxBKSlyZXR1cm4gbmV3IHh0KGFyZ3VtZW50c1swXSx0aGlzKX19LGNyZWF0ZU11bHRpTGluZVN0cmluZzpmdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgY3QobnVsbCx0aGlzKToxPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgY3QoYXJndW1lbnRzWzBdLHRoaXMpOnZvaWQgMH0sYnVpbGRHZW9tZXRyeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPSExLGk9ITEscj10Lml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKSxhPW8uZ2V0Q2xhc3MoKTtudWxsPT09ZSYmKGU9YSksYSE9PWUmJihuPSEwKSxvLmlzR2VvbWV0cnlDb2xsZWN0aW9uT3JEZXJpdmVkKCkmJihpPSEwKX1pZihudWxsPT09ZSlyZXR1cm4gdGhpcy5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oKTtpZihufHxpKXJldHVybiB0aGlzLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigkdC50b0dlb21ldHJ5QXJyYXkodCkpO3ZhciBzPXQuaXRlcmF0b3IoKS5uZXh0KCk7aWYodC5zaXplKCk+MSl7aWYocyBpbnN0YW5jZW9mIE10KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9seWdvbigkdC50b1BvbHlnb25BcnJheSh0KSk7aWYocyBpbnN0YW5jZW9mIHh0KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpTGluZVN0cmluZygkdC50b0xpbmVTdHJpbmdBcnJheSh0KSk7aWYocyBpbnN0YW5jZW9mIEV0KXJldHVybiB0aGlzLmNyZWF0ZU11bHRpUG9pbnQoJHQudG9Qb2ludEFycmF5KHQpKTtjLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiVW5oYW5kbGVkIGNsYXNzOiBcIitzLmdldENsYXNzKCkuZ2V0TmFtZSgpKX1yZXR1cm4gc30sY3JlYXRlTXVsdGlQb2ludEZyb21Db29yZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChudWxsIT09dD90aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCk6bnVsbCl9LGNyZWF0ZVBvaW50OmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuY3JlYXRlUG9pbnQodGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtdKSk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZVBvaW50KG51bGwhPT10P3RoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShbdF0pOm51bGwpfWlmKExyKGFyZ3VtZW50c1swXSxBKSlyZXR1cm4gbmV3IEV0KGFyZ3VtZW50c1swXSx0aGlzKX19LGdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3Rvcnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5fSxjcmVhdGVQb2x5Z29uOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG5ldyBNdChudWxsLG51bGwsdGhpcyk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKExyKGFyZ3VtZW50c1swXSxBKSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZVBvbHlnb24odGhpcy5jcmVhdGVMaW5lYXJSaW5nKHQpKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlUG9seWdvbih0aGlzLmNyZWF0ZUxpbmVhclJpbmcoZSkpfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgSXQpe3ZhciBuPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jcmVhdGVQb2x5Z29uKG4sbnVsbCl9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTtyZXR1cm4gbmV3IE10KGkscix0aGlzKX19LGdldFNSSUQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5TUklEfSxjcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGx0KG51bGwsdGhpcyk6MT09PWFyZ3VtZW50cy5sZW5ndGg/bmV3IGx0KGFyZ3VtZW50c1swXSx0aGlzKTp2b2lkIDB9LGNyZWF0ZUdlb21ldHJ5OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgVHQodGhpcykuZWRpdCh0LHtlZGl0OmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gYXJndW1lbnRzWzFdLHRoaXMuY29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeS5jcmVhdGUodCl9fX0pfSxnZXRQcmVjaXNpb25Nb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZWNpc2lvbk1vZGVsfSxjcmVhdGVMaW5lYXJSaW5nOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuY3JlYXRlTGluZWFyUmluZyh0aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoW10pKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmNyZWF0ZUxpbmVhclJpbmcobnVsbCE9PXQ/dGhpcy5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpOm51bGwpfWlmKExyKGFyZ3VtZW50c1swXSxBKSlyZXR1cm4gbmV3IEl0KGFyZ3VtZW50c1swXSx0aGlzKX19LGNyZWF0ZU11bHRpUG9seWdvbjpmdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgT3QobnVsbCx0aGlzKToxPT09YXJndW1lbnRzLmxlbmd0aD9uZXcgT3QoYXJndW1lbnRzWzBdLHRoaXMpOnZvaWQgMH0sY3JlYXRlTXVsdGlQb2ludDpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBuZXcgQ3QobnVsbCx0aGlzKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gbmV3IEN0KGFyZ3VtZW50c1swXSx0aGlzKTtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChudWxsIT09dD90aGlzLmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUodCk6bnVsbCl9aWYoTHIoYXJndW1lbnRzWzBdLEEpKXt2YXIgZT1hcmd1bWVudHNbMF07aWYobnVsbD09PWUpcmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChuZXcgQXJyYXkoMCkuZmlsbChudWxsKSk7Zm9yKHZhciBuPW5ldyBBcnJheShlLnNpemUoKSkuZmlsbChudWxsKSxpPTA7aTxlLnNpemUoKTtpKyspe3ZhciByPXRoaXMuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZSgxLGUuZ2V0RGltZW5zaW9uKCkpO2J0LmNvcHkoZSxpLHIsMCwxKSxuW2ldPXRoaXMuY3JlYXRlUG9pbnQocil9cmV0dXJuIHRoaXMuY3JlYXRlTXVsdGlQb2ludChuKX19fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJHR9fSksJHQudG9NdWx0aVBvbHlnb25BcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sJHQudG9HZW9tZXRyeUFycmF5PWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXJldHVybiBudWxsO3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSwkdC5nZXREZWZhdWx0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeT1mdW5jdGlvbigpe3JldHVybiBSdC5pbnN0YW5jZSgpfSwkdC50b011bHRpTGluZVN0cmluZ0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSwkdC50b0xpbmVTdHJpbmdBcnJheT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkodC5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIHQudG9BcnJheShlKX0sJHQudG9NdWx0aVBvaW50QXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LCR0LnRvTGluZWFyUmluZ0FycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSwkdC50b1BvaW50QXJyYXk9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0LnRvQXJyYXkoZSl9LCR0LnRvUG9seWdvbkFycmF5PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheSh0LnNpemUoKSkuZmlsbChudWxsKTtyZXR1cm4gdC50b0FycmF5KGUpfSwkdC5jcmVhdGVQb2ludEZyb21JbnRlcm5hbENvb3JkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZ2V0UHJlY2lzaW9uTW9kZWwoKS5tYWtlUHJlY2lzZSh0KSxlLmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0KX0sJHQuc2VyaWFsVmVyc2lvblVJRD0tMHg1ZWE3NWYyMDUxZWViNDAwO3ZhciBVcj17dHlwZVN0cjovXlxccyooXFx3KylcXHMqXFwoXFxzKiguKilcXHMqXFwpXFxzKiQvLGVtcHR5VHlwZVN0cjovXlxccyooXFx3KylcXHMqRU1QVFlcXHMqJC8sc3BhY2VzOi9cXHMrLyxwYXJlbkNvbW1hOi9cXClcXHMqLFxccypcXCgvLGRvdWJsZVBhcmVuQ29tbWE6L1xcKVxccypcXClcXHMqLFxccypcXChcXHMqXFwoLyx0cmltUGFyZW5zOi9eXFxzKlxcKD8oLio/KVxcKT9cXHMqJC99O1RyKHRlLnByb3RvdHlwZSx7cmVhZDpmdW5jdGlvbih0KXt2YXIgZSxuLGk7dD10LnJlcGxhY2UoL1tcXG5cXHJdL2csXCIgXCIpO3ZhciByPVVyLnR5cGVTdHIuZXhlYyh0KTtpZih0LnNlYXJjaChcIkVNUFRZXCIpIT09LTEmJihyPVVyLmVtcHR5VHlwZVN0ci5leGVjKHQpLHJbMl09dm9pZCAwKSxyJiYobj1yWzFdLnRvTG93ZXJDYXNlKCksaT1yWzJdLEdyW25dJiYoZT1HcltuXS5hcHBseSh0aGlzLFtpXSkpKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBXS1QgXCIrdCk7cmV0dXJuIGV9LHdyaXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4dHJhY3RHZW9tZXRyeSh0KX0sZXh0cmFjdEdlb21ldHJ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0R2VvbWV0cnlUeXBlKCkudG9Mb3dlckNhc2UoKTtpZighenJbZV0pcmV0dXJuIG51bGw7dmFyIG49ZS50b1VwcGVyQ2FzZSgpO3JldHVybiB0LmlzRW1wdHkoKT9uK1wiIEVNUFRZXCI6bitcIihcIit6cltlXS5hcHBseSh0aGlzLFt0XSkrXCIpXCJ9fSk7dmFyIHpyPXtjb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0LngrXCIgXCIrdC55fSxwb2ludDpmdW5jdGlvbih0KXtyZXR1cm4genIuY29vcmRpbmF0ZS5jYWxsKHRoaXMsdC5jb29yZGluYXRlcy5jb29yZGluYXRlc1swXSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQuZ2VvbWV0cmllcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrenIucG9pbnQuYXBwbHkodGhpcyxbdC5nZW9tZXRyaWVzW25dXSkrXCIpXCIpO3JldHVybiBlLmpvaW4oXCIsXCIpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAsaT10LnBvaW50cy5jb29yZGluYXRlcy5sZW5ndGg7bjxpOysrbillLnB1c2goenIuY29vcmRpbmF0ZS5hcHBseSh0aGlzLFt0LnBvaW50cy5jb29yZGluYXRlc1tuXV0pKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0sbGluZWFycmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5wb2ludHMuY29vcmRpbmF0ZXMubGVuZ3RoO248aTsrK24pZS5wdXNoKHpyLmNvb3JkaW5hdGUuYXBwbHkodGhpcyxbdC5wb2ludHMuY29vcmRpbmF0ZXNbbl1dKSk7cmV0dXJuIGUuam9pbihcIixcIil9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaChcIihcIit6ci5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW3QuZ2VvbWV0cmllc1tuXV0pK1wiKVwiKTtyZXR1cm4gZS5qb2luKFwiLFwiKX0scG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXTtlLnB1c2goXCIoXCIrenIubGluZXN0cmluZy5hcHBseSh0aGlzLFt0LnNoZWxsXSkrXCIpXCIpO2Zvcih2YXIgbj0wLGk9dC5ob2xlcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrenIubGluZXN0cmluZy5hcHBseSh0aGlzLFt0LmhvbGVzW25dXSkrXCIpXCIpO3JldHVybiBlLmpvaW4oXCIsXCIpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MCxpPXQuZ2VvbWV0cmllcy5sZW5ndGg7bjxpOysrbillLnB1c2goXCIoXCIrenIucG9seWdvbi5hcHBseSh0aGlzLFt0Lmdlb21ldHJpZXNbbl1dKStcIilcIik7cmV0dXJuIGUuam9pbihcIixcIil9LGdlb21ldHJ5Y29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wLGk9dC5nZW9tZXRyaWVzLmxlbmd0aDtuPGk7KytuKWUucHVzaCh0aGlzLmV4dHJhY3RHZW9tZXRyeSh0Lmdlb21ldHJpZXNbbl0pKTtyZXR1cm4gZS5qb2luKFwiLFwiKX19LEdyPXtwb2ludDpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludCgpO3ZhciBlPXQudHJpbSgpLnNwbGl0KFVyLnNwYWNlcyk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvaW50KG5ldyBoKE51bWJlci5wYXJzZUZsb2F0KGVbMF0pLE51bWJlci5wYXJzZUZsb2F0KGVbMV0pKSl9LG11bHRpcG9pbnQ6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2ludCgpO2Zvcih2YXIgZSxuPXQudHJpbSgpLnNwbGl0KFwiLFwiKSxpPVtdLHI9MCxvPW4ubGVuZ3RoO3I8bzsrK3IpZT1uW3JdLnJlcGxhY2UoVXIudHJpbVBhcmVucyxcIiQxXCIpLGkucHVzaChHci5wb2ludC5hcHBseSh0aGlzLFtlXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KGkpfSxsaW5lc3RyaW5nOmZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcoKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChcIixcIiksaT1bXSxyPTAsbz1uLmxlbmd0aDtyPG87KytyKWU9bltyXS50cmltKCkuc3BsaXQoVXIuc3BhY2VzKSxpLnB1c2gobmV3IGgoTnVtYmVyLnBhcnNlRmxvYXQoZVswXSksTnVtYmVyLnBhcnNlRmxvYXQoZVsxXSkpKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhpKX0sbGluZWFycmluZzpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKCk7Zm9yKHZhciBlLG49dC50cmltKCkuc3BsaXQoXCIsXCIpLGk9W10scj0wLG89bi5sZW5ndGg7cjxvOysrcillPW5bcl0udHJpbSgpLnNwbGl0KFVyLnNwYWNlcyksaS5wdXNoKG5ldyBoKE51bWJlci5wYXJzZUZsb2F0KGVbMF0pLE51bWJlci5wYXJzZUZsb2F0KGVbMV0pKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoaSl9LG11bHRpbGluZXN0cmluZzpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoKTtmb3IodmFyIGUsbj10LnRyaW0oKS5zcGxpdChVci5wYXJlbkNvbW1hKSxpPVtdLHI9MCxvPW4ubGVuZ3RoO3I8bzsrK3IpZT1uW3JdLnJlcGxhY2UoVXIudHJpbVBhcmVucyxcIiQxXCIpLGkucHVzaChHci5saW5lc3RyaW5nLmFwcGx5KHRoaXMsW2VdKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZU11bHRpTGluZVN0cmluZyhpKX0scG9seWdvbjpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2x5Z29uKCk7Zm9yKHZhciBlLG4saSxyLG89dC50cmltKCkuc3BsaXQoVXIucGFyZW5Db21tYSksYT1bXSxzPTAsdT1vLmxlbmd0aDtzPHU7KytzKWU9b1tzXS5yZXBsYWNlKFVyLnRyaW1QYXJlbnMsXCIkMVwiKSxuPUdyLmxpbmVzdHJpbmcuYXBwbHkodGhpcyxbZV0pLGk9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhuLnBvaW50cyksMD09PXM/cj1pOmEucHVzaChpKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlUG9seWdvbihyLGEpfSxtdWx0aXBvbHlnb246ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKCk7Zm9yKHZhciBlLG49dC50cmltKCkuc3BsaXQoVXIuZG91YmxlUGFyZW5Db21tYSksaT1bXSxyPTAsbz1uLmxlbmd0aDtyPG87KytyKWU9bltyXS5yZXBsYWNlKFVyLnRyaW1QYXJlbnMsXCIkMVwiKSxpLnB1c2goR3IucG9seWdvbi5hcHBseSh0aGlzLFtlXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvbHlnb24oaSl9LGdlb21ldHJ5Y29sbGVjdGlvbjpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oKTt0PXQucmVwbGFjZSgvLFxccyooW0EtWmEtel0pL2csXCJ8JDFcIik7Zm9yKHZhciBlPXQudHJpbSgpLnNwbGl0KFwifFwiKSxuPVtdLGk9MCxyPWUubGVuZ3RoO2k8cjsrK2kpbi5wdXNoKHRoaXMucmVhZChlW2ldKSk7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihuKX19O1RyKGVlLnByb3RvdHlwZSx7d3JpdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfX0pLFRyKGVlLHt0b0xpbmVTdHJpbmc6ZnVuY3Rpb24odCxlKXtpZigyIT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7cmV0dXJuXCJMSU5FU1RSSU5HICggXCIrdC54K1wiIFwiK3QueStcIiwgXCIrZS54K1wiIFwiK2UueStcIiApXCJ9fSksVHIobmUucHJvdG90eXBlLHtnZXRJbmRleEFsb25nU2VnbWVudDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoKSx0aGlzLmludExpbmVJbmRleFt0XVtlXX0sZ2V0VG9wb2xvZ3lTdW1tYXJ5OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEM7cmV0dXJuIHRoaXMuaXNFbmRQb2ludCgpJiZ0LmFwcGVuZChcIiBlbmRwb2ludFwiKSx0aGlzLl9pc1Byb3BlciYmdC5hcHBlbmQoXCIgcHJvcGVyXCIpLHRoaXMuaXNDb2xsaW5lYXIoKSYmdC5hcHBlbmQoXCIgY29sbGluZWFyXCIpLHQudG9TdHJpbmcoKX0sY29tcHV0ZUludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsbixpKXt0aGlzLmlucHV0TGluZXNbMF1bMF09dCx0aGlzLmlucHV0TGluZXNbMF1bMV09ZSx0aGlzLmlucHV0TGluZXNbMV1bMF09bix0aGlzLmlucHV0TGluZXNbMV1bMV09aSx0aGlzLnJlc3VsdD10aGlzLmNvbXB1dGVJbnRlcnNlY3QodCxlLG4saSl9LGdldEludGVyc2VjdGlvbk51bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdH0sY29tcHV0ZUludExpbmVJbmRleDpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKW51bGw9PT10aGlzLmludExpbmVJbmRleCYmKHRoaXMuaW50TGluZUluZGV4PUFycmF5KDIpLmZpbGwoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkoMil9KSx0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoMCksdGhpcy5jb21wdXRlSW50TGluZUluZGV4KDEpKTtlbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLmdldEVkZ2VEaXN0YW5jZSh0LDApLG49dGhpcy5nZXRFZGdlRGlzdGFuY2UodCwxKTtlPm4/KHRoaXMuaW50TGluZUluZGV4W3RdWzBdPTAsdGhpcy5pbnRMaW5lSW5kZXhbdF1bMV09MSk6KHRoaXMuaW50TGluZUluZGV4W3RdWzBdPTEsdGhpcy5pbnRMaW5lSW5kZXhbdF1bMV09MCl9fSxpc1Byb3BlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbigpJiZ0aGlzLl9pc1Byb3Blcn0sc2V0UHJlY2lzaW9uTW9kZWw6ZnVuY3Rpb24odCl7dGhpcy5wcmVjaXNpb25Nb2RlbD10fSxpc0ludGVyaW9ySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuISF0aGlzLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oMCl8fCEhdGhpcy5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKDEpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHRoaXMucmVzdWx0O2UrKylpZighdGhpcy5pbnRQdFtlXS5lcXVhbHMyRCh0aGlzLmlucHV0TGluZXNbdF1bMF0pJiYhdGhpcy5pbnRQdFtlXS5lcXVhbHMyRCh0aGlzLmlucHV0TGluZXNbdF1bMV0pKXJldHVybiEwO3JldHVybiExfX0sZ2V0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludFB0W3RdfSxpc0VuZFBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzSW50ZXJzZWN0aW9uKCkmJiF0aGlzLl9pc1Byb3Blcn0saGFzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdWx0IT09bmUuTk9fSU5URVJTRUNUSU9OfSxnZXRFZGdlRGlzdGFuY2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmUuY29tcHV0ZUVkZ2VEaXN0YW5jZSh0aGlzLmludFB0W2VdLHRoaXMuaW5wdXRMaW5lc1t0XVswXSx0aGlzLmlucHV0TGluZXNbdF1bMV0pfSxpc0NvbGxpbmVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlc3VsdD09PW5lLkNPTExJTkVBUl9JTlRFUlNFQ1RJT059LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGVlLnRvTGluZVN0cmluZyh0aGlzLmlucHV0TGluZXNbMF1bMF0sdGhpcy5pbnB1dExpbmVzWzBdWzFdKStcIiAtIFwiK2VlLnRvTGluZVN0cmluZyh0aGlzLmlucHV0TGluZXNbMV1bMF0sdGhpcy5pbnB1dExpbmVzWzFdWzFdKSt0aGlzLmdldFRvcG9sb2d5U3VtbWFyeSgpfSxnZXRFbmRwb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmlucHV0TGluZXNbdF1bZV19LGlzSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5yZXN1bHQ7ZSsrKWlmKHRoaXMuaW50UHRbZV0uZXF1YWxzMkQodCkpcmV0dXJuITA7cmV0dXJuITF9LGdldEludGVyc2VjdGlvbkFsb25nU2VnbWVudDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbXB1dGVJbnRMaW5lSW5kZXgoKSx0aGlzLmludFB0W3RoaXMuaW50TGluZUluZGV4W3RdW2VdXX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbmV9fSksbmUuY29tcHV0ZUVkZ2VEaXN0YW5jZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9TWF0aC5hYnMobi54LWUueCkscj1NYXRoLmFicyhuLnktZS55KSxvPS0xO2lmKHQuZXF1YWxzKGUpKW89MDtlbHNlIGlmKHQuZXF1YWxzKG4pKW89aT5yP2k6cjtlbHNle3ZhciBhPU1hdGguYWJzKHQueC1lLngpLHM9TWF0aC5hYnModC55LWUueSk7bz1pPnI/YTpzLDAhPT1vfHx0LmVxdWFscyhlKXx8KG89TWF0aC5tYXgoYSxzKSl9cmV0dXJuIGMuaXNUcnVlKCEoMD09PW8mJiF0LmVxdWFscyhlKSksXCJCYWQgZGlzdGFuY2UgY2FsY3VsYXRpb25cIiksb30sbmUubm9uUm9idXN0Q29tcHV0ZUVkZ2VEaXN0YW5jZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC54LWUueCxyPXQueS1lLnksbz1NYXRoLnNxcnQoaSppK3Iqcik7cmV0dXJuIGMuaXNUcnVlKCEoMD09PW8mJiF0LmVxdWFscyhlKSksXCJJbnZhbGlkIGRpc3RhbmNlIGNhbGN1bGF0aW9uXCIpLG99LG5lLkRPTlRfSU5URVJTRUNUPTAsbmUuRE9fSU5URVJTRUNUPTEsbmUuQ09MTElORUFSPTIsbmUuTk9fSU5URVJTRUNUSU9OPTAsbmUuUE9JTlRfSU5URVJTRUNUSU9OPTEsbmUuQ09MTElORUFSX0lOVEVSU0VDVElPTj0yLFByKGllLG5lKSxUcihpZS5wcm90b3R5cGUse2lzSW5TZWdtZW50RW52ZWxvcGVzOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB4KHRoaXMuaW5wdXRMaW5lc1swXVswXSx0aGlzLmlucHV0TGluZXNbMF1bMV0pLG49bmV3IHgodGhpcy5pbnB1dExpbmVzWzFdWzBdLHRoaXMuaW5wdXRMaW5lc1sxXVsxXSk7cmV0dXJuIGUuY29udGFpbnModCkmJm4uY29udGFpbnModCl9LGNvbXB1dGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtpZigzIT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gbmUucHJvdG90eXBlLmNvbXB1dGVJbnRlcnNlY3Rpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtyZXR1cm4gdGhpcy5faXNQcm9wZXI9ITEseC5pbnRlcnNlY3RzKGUsbix0KSYmMD09PWFlLm9yaWVudGF0aW9uSW5kZXgoZSxuLHQpJiYwPT09YWUub3JpZW50YXRpb25JbmRleChuLGUsdCk/KHRoaXMuX2lzUHJvcGVyPSEwLCh0LmVxdWFscyhlKXx8dC5lcXVhbHMobikpJiYodGhpcy5faXNQcm9wZXI9ITEpLHRoaXMucmVzdWx0PW5lLlBPSU5UX0lOVEVSU0VDVElPTixudWxsKTp2b2lkKHRoaXMucmVzdWx0PW5lLk5PX0lOVEVSU0VDVElPTil9LG5vcm1hbGl6ZVRvTWluaW11bTpmdW5jdGlvbih0LGUsbixpLHIpe3IueD10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZSh0LngsZS54LG4ueCxpLngpLHIueT10aGlzLnNtYWxsZXN0SW5BYnNWYWx1ZSh0LnksZS55LG4ueSxpLnkpLHQueC09ci54LHQueS09ci55LGUueC09ci54LGUueS09ci55LG4ueC09ci54LG4ueS09ci55LGkueC09ci54LGkueS09ci55fSxzYWZlSENvb3JkaW5hdGVJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bnVsbDt0cnl7cj1OLmludGVyc2VjdGlvbih0LGUsbixpKX1jYXRjaChvKXtpZighKG8gaW5zdGFuY2VvZiBFKSl0aHJvdyBvO3I9aWUubmVhcmVzdEVuZHBvaW50KHQsZSxuLGkpfWZpbmFsbHl7fXJldHVybiByfSxpbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5pbnRlcnNlY3Rpb25XaXRoTm9ybWFsaXphdGlvbih0LGUsbixpKTtyZXR1cm4gdGhpcy5pc0luU2VnbWVudEVudmVsb3BlcyhyKXx8KHI9bmV3IGgoaWUubmVhcmVzdEVuZHBvaW50KHQsZSxuLGkpKSksbnVsbCE9PXRoaXMucHJlY2lzaW9uTW9kZWwmJnRoaXMucHJlY2lzaW9uTW9kZWwubWFrZVByZWNpc2Uocikscn0sc21hbGxlc3RJbkFic1ZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXQsbz1NYXRoLmFicyhyKTtyZXR1cm4gTWF0aC5hYnMoZSk8byYmKHI9ZSxvPU1hdGguYWJzKGUpKSxNYXRoLmFicyhuKTxvJiYocj1uLG89TWF0aC5hYnMobikpLE1hdGguYWJzKGkpPG8mJihyPWkpLHJ9LGNoZWNrREQ6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz1QLmludGVyc2VjdGlvbih0LGUsbixpKSxhPXRoaXMuaXNJblNlZ21lbnRFbnZlbG9wZXMobyk7TC5vdXQucHJpbnRsbihcIkREIGluIGVudiA9IFwiK2ErXCIgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLSBcIitvKSxyLmRpc3RhbmNlKG8pPjFlLTQmJkwub3V0LnByaW50bG4oXCJEaXN0YW5jZSA9IFwiK3IuZGlzdGFuY2UobykpfSxpbnRlcnNlY3Rpb25XaXRoTm9ybWFsaXphdGlvbjpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1uZXcgaCh0KSxvPW5ldyBoKGUpLGE9bmV3IGgobikscz1uZXcgaChpKSx1PW5ldyBoO3RoaXMubm9ybWFsaXplVG9FbnZDZW50cmUocixvLGEscyx1KTt2YXIgbD10aGlzLnNhZmVIQ29vcmRpbmF0ZUludGVyc2VjdGlvbihyLG8sYSxzKTtyZXR1cm4gbC54Kz11LngsbC55Kz11LnksbH0sY29tcHV0ZUNvbGxpbmVhckludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj14LmludGVyc2VjdHModCxlLG4pLG89eC5pbnRlcnNlY3RzKHQsZSxpKSxhPXguaW50ZXJzZWN0cyhuLGksdCkscz14LmludGVyc2VjdHMobixpLGUpO3JldHVybiByJiZvPyh0aGlzLmludFB0WzBdPW4sdGhpcy5pbnRQdFsxXT1pLG5lLkNPTExJTkVBUl9JTlRFUlNFQ1RJT04pOmEmJnM/KHRoaXMuaW50UHRbMF09dCx0aGlzLmludFB0WzFdPWUsbmUuQ09MTElORUFSX0lOVEVSU0VDVElPTik6ciYmYT8odGhpcy5pbnRQdFswXT1uLHRoaXMuaW50UHRbMV09dCwhbi5lcXVhbHModCl8fG98fHM/bmUuQ09MTElORUFSX0lOVEVSU0VDVElPTjpuZS5QT0lOVF9JTlRFUlNFQ1RJT04pOnImJnM/KHRoaXMuaW50UHRbMF09bix0aGlzLmludFB0WzFdPWUsIW4uZXF1YWxzKGUpfHxvfHxhP25lLkNPTExJTkVBUl9JTlRFUlNFQ1RJT046bmUuUE9JTlRfSU5URVJTRUNUSU9OKTpvJiZhPyh0aGlzLmludFB0WzBdPWksdGhpcy5pbnRQdFsxXT10LCFpLmVxdWFscyh0KXx8cnx8cz9uZS5DT0xMSU5FQVJfSU5URVJTRUNUSU9OOm5lLlBPSU5UX0lOVEVSU0VDVElPTik6byYmcz8odGhpcy5pbnRQdFswXT1pLHRoaXMuaW50UHRbMV09ZSwhaS5lcXVhbHMoZSl8fHJ8fGE/bmUuQ09MTElORUFSX0lOVEVSU0VDVElPTjpuZS5QT0lOVF9JTlRFUlNFQ1RJT04pOm5lLk5PX0lOVEVSU0VDVElPTn0sbm9ybWFsaXplVG9FbnZDZW50cmU6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10Lng8ZS54P3QueDplLngsYT10Lnk8ZS55P3QueTplLnkscz10Lng+ZS54P3QueDplLngsdT10Lnk+ZS55P3QueTplLnksbD1uLng8aS54P24ueDppLngsYz1uLnk8aS55P24ueTppLnksaD1uLng+aS54P24ueDppLngsZj1uLnk+aS55P24ueTppLnksZD1vPmw/bzpsLHA9czxoP3M6aCxnPWE+Yz9hOmMsdj11PGY/dTpmLG09KGQrcCkvMix5PShnK3YpLzI7ci54PW0sci55PXksdC54LT1yLngsdC55LT1yLnksZS54LT1yLngsZS55LT1yLnksbi54LT1yLngsbi55LT1yLnksaS54LT1yLngsaS55LT1yLnl9LGNvbXB1dGVJbnRlcnNlY3Q6ZnVuY3Rpb24odCxlLG4saSl7aWYodGhpcy5faXNQcm9wZXI9ITEsIXguaW50ZXJzZWN0cyh0LGUsbixpKSlyZXR1cm4gbmUuTk9fSU5URVJTRUNUSU9OO3ZhciByPWFlLm9yaWVudGF0aW9uSW5kZXgodCxlLG4pLG89YWUub3JpZW50YXRpb25JbmRleCh0LGUsaSk7aWYocj4wJiZvPjB8fHI8MCYmbzwwKXJldHVybiBuZS5OT19JTlRFUlNFQ1RJT047dmFyIGE9YWUub3JpZW50YXRpb25JbmRleChuLGksdCkscz1hZS5vcmllbnRhdGlvbkluZGV4KG4saSxlKTtcbnJldHVybiBhPjAmJnM+MHx8YTwwJiZzPDA/bmUuTk9fSU5URVJTRUNUSU9OOjA9PT1yJiYwPT09byYmMD09PWEmJjA9PT1zP3RoaXMuY29tcHV0ZUNvbGxpbmVhckludGVyc2VjdGlvbih0LGUsbixpKTooMD09PXJ8fDA9PT1vfHwwPT09YXx8MD09PXM/KHRoaXMuX2lzUHJvcGVyPSExLHQuZXF1YWxzMkQobil8fHQuZXF1YWxzMkQoaSk/dGhpcy5pbnRQdFswXT10OmUuZXF1YWxzMkQobil8fGUuZXF1YWxzMkQoaSk/dGhpcy5pbnRQdFswXT1lOjA9PT1yP3RoaXMuaW50UHRbMF09bmV3IGgobik6MD09PW8/dGhpcy5pbnRQdFswXT1uZXcgaChpKTowPT09YT90aGlzLmludFB0WzBdPW5ldyBoKHQpOjA9PT1zJiYodGhpcy5pbnRQdFswXT1uZXcgaChlKSkpOih0aGlzLl9pc1Byb3Blcj0hMCx0aGlzLmludFB0WzBdPXRoaXMuaW50ZXJzZWN0aW9uKHQsZSxuLGkpKSxuZS5QT0lOVF9JTlRFUlNFQ1RJT04pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBpZX19KSxpZS5uZWFyZXN0RW5kcG9pbnQ9ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dCxvPWFlLmRpc3RhbmNlUG9pbnRMaW5lKHQsbixpKSxhPWFlLmRpc3RhbmNlUG9pbnRMaW5lKGUsbixpKTtyZXR1cm4gYTxvJiYobz1hLHI9ZSksYT1hZS5kaXN0YW5jZVBvaW50TGluZShuLHQsZSksYTxvJiYobz1hLHI9biksYT1hZS5kaXN0YW5jZVBvaW50TGluZShpLHQsZSksYTxvJiYobz1hLHI9aSkscn0sVHIocmUucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiByZX19KSxyZS5vcmllbnRhdGlvbkluZGV4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLngtdC54LHI9ZS55LXQueSxvPW4ueC1lLngsYT1uLnktZS55O3JldHVybiByZS5zaWduT2ZEZXQyeDIoaSxyLG8sYSl9LHJlLnNpZ25PZkRldDJ4Mj1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1udWxsLG89bnVsbCxhPW51bGwscz0wO2lmKHI9MSwwPT09dHx8MD09PWkpcmV0dXJuIDA9PT1lfHwwPT09bj8wOmU+MD9uPjA/LXI6cjpuPjA/cjotcjtpZigwPT09ZXx8MD09PW4pcmV0dXJuIGk+MD90PjA/cjotcjp0PjA/LXI6cjtpZigwPGU/MDxpP2U8PWl8fChyPS1yLG89dCx0PW4sbj1vLG89ZSxlPWksaT1vKTplPD0taT8ocj0tcixuPS1uLGk9LWkpOihvPXQsdD0tbixuPW8sbz1lLGU9LWksaT1vKTowPGk/LWU8PWk/KHI9LXIsdD0tdCxlPS1lKToobz0tdCx0PW4sbj1vLG89LWUsZT1pLGk9byk6ZT49aT8odD0tdCxlPS1lLG49LW4saT0taSk6KHI9LXIsbz0tdCx0PS1uLG49byxvPS1lLGU9LWksaT1vKSwwPHQpe2lmKCEoMDxuKSlyZXR1cm4gcjtpZighKHQ8PW4pKXJldHVybiByfWVsc2V7aWYoMDxuKXJldHVybi1yO2lmKCEodD49bikpcmV0dXJuLXI7cj0tcix0PS10LG49LW59Zm9yKDs7KXtpZihzKz0xLGE9TWF0aC5mbG9vcihuL3QpLG4tPWEqdCwoaS09YSplKTwwKXJldHVybi1yO2lmKGk+ZSlyZXR1cm4gcjtpZih0Pm4rbil7aWYoZTxpK2kpcmV0dXJuIHJ9ZWxzZXtpZihlPmkraSlyZXR1cm4tcjtuPXQtbixpPWUtaSxyPS1yfWlmKDA9PT1pKXJldHVybiAwPT09bj8wOi1yO2lmKDA9PT1uKXJldHVybiByO2lmKGE9TWF0aC5mbG9vcih0L24pLHQtPWEqbiwoZS09YSppKTwwKXJldHVybiByO2lmKGU+aSlyZXR1cm4tcjtpZihuPnQrdCl7aWYoaTxlK2UpcmV0dXJuLXJ9ZWxzZXtpZihpPmUrZSlyZXR1cm4gcjt0PW4tdCxlPWktZSxyPS1yfWlmKDA9PT1lKXJldHVybiAwPT09dD8wOnI7aWYoMD09PXQpcmV0dXJuLXJ9fSxUcihvZS5wcm90b3R5cGUse2NvdW50U2VnbWVudDpmdW5jdGlvbih0LGUpe2lmKHQueDx0aGlzLnAueCYmZS54PHRoaXMucC54KXJldHVybiBudWxsO2lmKHRoaXMucC54PT09ZS54JiZ0aGlzLnAueT09PWUueSlyZXR1cm4gdGhpcy5pc1BvaW50T25TZWdtZW50PSEwLG51bGw7aWYodC55PT09dGhpcy5wLnkmJmUueT09PXRoaXMucC55KXt2YXIgbj10LngsaT1lLng7cmV0dXJuIG4+aSYmKG49ZS54LGk9dC54KSx0aGlzLnAueD49biYmdGhpcy5wLng8PWkmJih0aGlzLmlzUG9pbnRPblNlZ21lbnQ9ITApLG51bGx9aWYodC55PnRoaXMucC55JiZlLnk8PXRoaXMucC55fHxlLnk+dGhpcy5wLnkmJnQueTw9dGhpcy5wLnkpe3ZhciByPXQueC10aGlzLnAueCxvPXQueS10aGlzLnAueSxhPWUueC10aGlzLnAueCxzPWUueS10aGlzLnAueSx1PXJlLnNpZ25PZkRldDJ4MihyLG8sYSxzKTtpZigwPT09dSlyZXR1cm4gdGhpcy5pc1BvaW50T25TZWdtZW50PSEwLG51bGw7czxvJiYodT0tdSksdT4wJiZ0aGlzLmNyb3NzaW5nQ291bnQrK319LGlzUG9pbnRJblBvbHlnb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMb2NhdGlvbigpIT09Uy5FWFRFUklPUn0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1BvaW50T25TZWdtZW50P1MuQk9VTkRBUlk6dGhpcy5jcm9zc2luZ0NvdW50JTI9PTE/Uy5JTlRFUklPUjpTLkVYVEVSSU9SfSxpc09uU2VnbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUG9pbnRPblNlZ21lbnR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG9lfX0pLG9lLmxvY2F0ZVBvaW50SW5SaW5nPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZMcihhcmd1bWVudHNbMV0sQSkpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1uZXcgb2UodCksaT1uZXcgaCxyPW5ldyBoLG89MTtvPGUuc2l6ZSgpO28rKylpZihlLmdldENvb3JkaW5hdGUobyxpKSxlLmdldENvb3JkaW5hdGUoby0xLHIpLG4uY291bnRTZWdtZW50KGksciksbi5pc09uU2VnbWVudCgpKXJldHVybiBuLmdldExvY2F0aW9uKCk7cmV0dXJuIG4uZ2V0TG9jYXRpb24oKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgQXJyYXkpe2Zvcih2YXIgYT1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sbj1uZXcgb2UoYSksbz0xO288cy5sZW5ndGg7bysrKXt2YXIgaT1zW29dLHI9c1tvLTFdO2lmKG4uY291bnRTZWdtZW50KGksciksbi5pc09uU2VnbWVudCgpKXJldHVybiBuLmdldExvY2F0aW9uKCl9cmV0dXJuIG4uZ2V0TG9jYXRpb24oKX19LFRyKGFlLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYWV9fSksYWUub3JpZW50YXRpb25JbmRleD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFAub3JpZW50YXRpb25JbmRleCh0LGUsbil9LGFlLnNpZ25lZEFyZWE9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgdD1hcmd1bWVudHNbMF07aWYodC5sZW5ndGg8MylyZXR1cm4gMDtmb3IodmFyIGU9MCxuPXRbMF0ueCxpPTE7aTx0Lmxlbmd0aC0xO2krKyl7dmFyIHI9dFtpXS54LW4sbz10W2krMV0ueTtlKz1yKih0W2ktMV0ueS1vKX1yZXR1cm4gZS8yfWlmKExyKGFyZ3VtZW50c1swXSxBKSl7dmFyIGE9YXJndW1lbnRzWzBdLHM9YS5zaXplKCk7aWYoczwzKXJldHVybiAwO3ZhciB1PW5ldyBoLGw9bmV3IGgsYz1uZXcgaDthLmdldENvb3JkaW5hdGUoMCxsKSxhLmdldENvb3JkaW5hdGUoMSxjKTt2YXIgbj1sLng7Yy54LT1uO2Zvcih2YXIgZT0wLGk9MTtpPHMtMTtpKyspdS55PWwueSxsLng9Yy54LGwueT1jLnksYS5nZXRDb29yZGluYXRlKGkrMSxjKSxjLngtPW4sZSs9bC54Kih1LnktYy55KTtyZXR1cm4gZS8yfX0sYWUuZGlzdGFuY2VMaW5lTGluZT1mdW5jdGlvbih0LGUsbixpKXtpZih0LmVxdWFscyhlKSlyZXR1cm4gYWUuZGlzdGFuY2VQb2ludExpbmUodCxuLGkpO2lmKG4uZXF1YWxzKGkpKXJldHVybiBhZS5kaXN0YW5jZVBvaW50TGluZShpLHQsZSk7dmFyIHI9ITE7aWYoeC5pbnRlcnNlY3RzKHQsZSxuLGkpKXt2YXIgbz0oZS54LXQueCkqKGkueS1uLnkpLShlLnktdC55KSooaS54LW4ueCk7aWYoMD09PW8pcj0hMDtlbHNle3ZhciBhPSh0Lnktbi55KSooaS54LW4ueCktKHQueC1uLngpKihpLnktbi55KSxzPSh0Lnktbi55KSooZS54LXQueCktKHQueC1uLngpKihlLnktdC55KSx1PXMvbyxsPWEvbzsobDwwfHxsPjF8fHU8MHx8dT4xKSYmKHI9ITApfX1lbHNlIHI9ITA7cmV0dXJuIHI/TS5taW4oYWUuZGlzdGFuY2VQb2ludExpbmUodCxuLGkpLGFlLmRpc3RhbmNlUG9pbnRMaW5lKGUsbixpKSxhZS5kaXN0YW5jZVBvaW50TGluZShuLHQsZSksYWUuZGlzdGFuY2VQb2ludExpbmUoaSx0LGUpKTowfSxhZS5pc1BvaW50SW5SaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFlLmxvY2F0ZVBvaW50SW5SaW5nKHQsZSkhPT1TLkVYVEVSSU9SfSxhZS5jb21wdXRlTGVuZ3RoPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2l6ZSgpO2lmKGU8PTEpcmV0dXJuIDA7dmFyIG49MCxpPW5ldyBoO3QuZ2V0Q29vcmRpbmF0ZSgwLGkpO2Zvcih2YXIgcj1pLngsbz1pLnksYT0xO2E8ZTthKyspe3QuZ2V0Q29vcmRpbmF0ZShhLGkpO3ZhciBzPWkueCx1PWkueSxsPXMtcixjPXUtbztuKz1NYXRoLnNxcnQobCpsK2MqYykscj1zLG89dX1yZXR1cm4gbn0sYWUuaXNDQ1c9ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgtMTtpZihlPDMpdGhyb3cgbmV3IG4oXCJSaW5nIGhhcyBmZXdlciB0aGFuIDQgcG9pbnRzLCBzbyBvcmllbnRhdGlvbiBjYW5ub3QgYmUgZGV0ZXJtaW5lZFwiKTtmb3IodmFyIGk9dFswXSxyPTAsbz0xO288PWU7bysrKXt2YXIgYT10W29dO2EueT5pLnkmJihpPWEscj1vKX12YXIgcz1yO2RvKHMtPTEpPDAmJihzPWUpO3doaWxlKHRbc10uZXF1YWxzMkQoaSkmJnMhPT1yKTt2YXIgdT1yO2RvIHU9KHUrMSklZTt3aGlsZSh0W3VdLmVxdWFsczJEKGkpJiZ1IT09cik7dmFyIGw9dFtzXSxjPXRbdV07aWYobC5lcXVhbHMyRChpKXx8Yy5lcXVhbHMyRChpKXx8bC5lcXVhbHMyRChjKSlyZXR1cm4hMTt2YXIgaD1hZS5jb21wdXRlT3JpZW50YXRpb24obCxpLGMpO3JldHVybiAwPT09aD9sLng+Yy54Omg+MH0sYWUubG9jYXRlUG9pbnRJblJpbmc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb2UubG9jYXRlUG9pbnRJblJpbmcodCxlKX0sYWUuZGlzdGFuY2VQb2ludExpbmVQZXJwZW5kaWN1bGFyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0obi54LWUueCkqKG4ueC1lLngpKyhuLnktZS55KSoobi55LWUueSkscj0oKGUueS10LnkpKihuLngtZS54KS0oZS54LXQueCkqKG4ueS1lLnkpKS9pO3JldHVybiBNYXRoLmFicyhyKSpNYXRoLnNxcnQoaSl9LGFlLmNvbXB1dGVPcmllbnRhdGlvbj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGFlLm9yaWVudGF0aW9uSW5kZXgodCxlLG4pfSxhZS5kaXN0YW5jZVBvaW50TGluZT1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoMD09PWUubGVuZ3RoKXRocm93IG5ldyBuKFwiTGluZSBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHZlcnRleFwiKTtmb3IodmFyIGk9dC5kaXN0YW5jZShlWzBdKSxyPTA7cjxlLmxlbmd0aC0xO3IrKyl7dmFyIG89YWUuZGlzdGFuY2VQb2ludExpbmUodCxlW3JdLGVbcisxXSk7bzxpJiYoaT1vKX1yZXR1cm4gaX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLHU9YXJndW1lbnRzWzJdO2lmKHMueD09PXUueCYmcy55PT09dS55KXJldHVybiBhLmRpc3RhbmNlKHMpO3ZhciBsPSh1Lngtcy54KSoodS54LXMueCkrKHUueS1zLnkpKih1Lnktcy55KSxjPSgoYS54LXMueCkqKHUueC1zLngpKyhhLnktcy55KSoodS55LXMueSkpL2w7aWYoYzw9MClyZXR1cm4gYS5kaXN0YW5jZShzKTtpZihjPj0xKXJldHVybiBhLmRpc3RhbmNlKHUpO3ZhciBoPSgocy55LWEueSkqKHUueC1zLngpLShzLngtYS54KSoodS55LXMueSkpL2w7cmV0dXJuIE1hdGguYWJzKGgpKk1hdGguc3FydChsKX19LGFlLmlzT25MaW5lPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBpZSxpPTE7aTxlLmxlbmd0aDtpKyspe3ZhciByPWVbaS0xXSxvPWVbaV07aWYobi5jb21wdXRlSW50ZXJzZWN0aW9uKHQscixvKSxuLmhhc0ludGVyc2VjdGlvbigpKXJldHVybiEwfXJldHVybiExfSxhZS5DTE9DS1dJU0U9LTEsYWUuUklHSFQ9YWUuQ0xPQ0tXSVNFLGFlLkNPVU5URVJDTE9DS1dJU0U9MSxhZS5MRUZUPWFlLkNPVU5URVJDTE9DS1dJU0UsYWUuQ09MTElORUFSPTAsYWUuU1RSQUlHSFQ9YWUuQ09MTElORUFSLFRyKHNlLnByb3RvdHlwZSx7bWluWDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLnAwLngsdGhpcy5wMS54KX0sb3JpZW50YXRpb25JbmRleDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2Ygc2Upe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFlLm9yaWVudGF0aW9uSW5kZXgodGhpcy5wMCx0aGlzLnAxLHQucDApLG49YWUub3JpZW50YXRpb25JbmRleCh0aGlzLnAwLHRoaXMucDEsdC5wMSk7cmV0dXJuIGU+PTAmJm4+PTA/TWF0aC5tYXgoZSxuKTplPD0wJiZuPD0wP01hdGgubWF4KGUsbik6MH1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciBpPWFyZ3VtZW50c1swXTtyZXR1cm4gYWUub3JpZW50YXRpb25JbmRleCh0aGlzLnAwLHRoaXMucDEsaSl9fSx0b0dlb21ldHJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUxpbmVTdHJpbmcoW3RoaXMucDAsdGhpcy5wMV0pfSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDAueD09PXRoaXMucDEueH0sZXF1YWxzOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIHNlKSlyZXR1cm4hMTt2YXIgZT10O3JldHVybiB0aGlzLnAwLmVxdWFscyhlLnAwKSYmdGhpcy5wMS5lcXVhbHMoZS5wMSl9LGludGVyc2VjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT1uZXcgaWU7cmV0dXJuIGUuY29tcHV0ZUludGVyc2VjdGlvbih0aGlzLnAwLHRoaXMucDEsdC5wMCx0LnAxKSxlLmhhc0ludGVyc2VjdGlvbigpP2UuZ2V0SW50ZXJzZWN0aW9uKDApOm51bGx9LHByb2plY3Q6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0LmVxdWFscyh0aGlzLnAwKXx8dC5lcXVhbHModGhpcy5wMSkpcmV0dXJuIG5ldyBoKHQpO3ZhciBlPXRoaXMucHJvamVjdGlvbkZhY3Rvcih0KSxuPW5ldyBoO3JldHVybiBuLng9dGhpcy5wMC54K2UqKHRoaXMucDEueC10aGlzLnAwLngpLG4ueT10aGlzLnAwLnkrZSoodGhpcy5wMS55LXRoaXMucDAueSksbn1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHNlKXt2YXIgaT1hcmd1bWVudHNbMF0scj10aGlzLnByb2plY3Rpb25GYWN0b3IoaS5wMCksbz10aGlzLnByb2plY3Rpb25GYWN0b3IoaS5wMSk7aWYocj49MSYmbz49MSlyZXR1cm4gbnVsbDtpZihyPD0wJiZvPD0wKXJldHVybiBudWxsO3ZhciBhPXRoaXMucHJvamVjdChpLnAwKTtyPDAmJihhPXRoaXMucDApLHI+MSYmKGE9dGhpcy5wMSk7dmFyIHM9dGhpcy5wcm9qZWN0KGkucDEpO3JldHVybiBvPDAmJihzPXRoaXMucDApLG8+MSYmKHM9dGhpcy5wMSksbmV3IHNlKGEscyl9fSxub3JtYWxpemU6ZnVuY3Rpb24oKXt0aGlzLnAxLmNvbXBhcmVUbyh0aGlzLnAwKTwwJiZ0aGlzLnJldmVyc2UoKX0sYW5nbGU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hdGFuMih0aGlzLnAxLnktdGhpcy5wMC55LHRoaXMucDEueC10aGlzLnAwLngpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD90aGlzLnAwOnRoaXMucDF9LGRpc3RhbmNlUGVycGVuZGljdWxhcjpmdW5jdGlvbih0KXtyZXR1cm4gYWUuZGlzdGFuY2VQb2ludExpbmVQZXJwZW5kaWN1bGFyKHQsdGhpcy5wMCx0aGlzLnAxKX0sbWluWTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbih0aGlzLnAwLnksdGhpcy5wMS55KX0sbWlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gc2UubWlkUG9pbnQodGhpcy5wMCx0aGlzLnAxKX0scHJvamVjdGlvbkZhY3RvcjpmdW5jdGlvbih0KXtpZih0LmVxdWFscyh0aGlzLnAwKSlyZXR1cm4gMDtpZih0LmVxdWFscyh0aGlzLnAxKSlyZXR1cm4gMTt2YXIgZT10aGlzLnAxLngtdGhpcy5wMC54LG49dGhpcy5wMS55LXRoaXMucDAueSxyPWUqZStuKm47cmV0dXJuIHI8PTA/aS5OYU46KCh0LngtdGhpcy5wMC54KSplKyh0LnktdGhpcy5wMC55KSpuKS9yfSxjbG9zZXN0UG9pbnRzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaW50ZXJzZWN0aW9uKHQpO2lmKG51bGwhPT1lKXJldHVybltlLGVdO3ZhciBuPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHI9aS5NQVhfVkFMVUUsbz1udWxsLGE9dGhpcy5jbG9zZXN0UG9pbnQodC5wMCk7cj1hLmRpc3RhbmNlKHQucDApLG5bMF09YSxuWzFdPXQucDA7dmFyIHM9dGhpcy5jbG9zZXN0UG9pbnQodC5wMSk7KG89cy5kaXN0YW5jZSh0LnAxKSk8ciYmKHI9byxuWzBdPXMsblsxXT10LnAxKTt2YXIgdT10LmNsb3Nlc3RQb2ludCh0aGlzLnAwKTsobz11LmRpc3RhbmNlKHRoaXMucDApKTxyJiYocj1vLG5bMF09dGhpcy5wMCxuWzFdPXUpO3ZhciBsPXQuY2xvc2VzdFBvaW50KHRoaXMucDEpO3JldHVybiBvPWwuZGlzdGFuY2UodGhpcy5wMSksbzxyJiYocj1vLG5bMF09dGhpcy5wMSxuWzFdPWwpLG59LGNsb3Nlc3RQb2ludDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnByb2plY3Rpb25GYWN0b3IodCk7cmV0dXJuIGU+MCYmZTwxP3RoaXMucHJvamVjdCh0KTp0aGlzLnAwLmRpc3RhbmNlKHQpPHRoaXMucDEuZGlzdGFuY2UodCk/dGhpcy5wMDp0aGlzLnAxfSxtYXhYOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KHRoaXMucDAueCx0aGlzLnAxLngpfSxnZXRMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMC5kaXN0YW5jZSh0aGlzLnAxKX0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQsbj10aGlzLnAwLmNvbXBhcmVUbyhlLnAwKTtyZXR1cm4gMCE9PW4/bjp0aGlzLnAxLmNvbXBhcmVUbyhlLnAxKX0scmV2ZXJzZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMucDA7dGhpcy5wMD10aGlzLnAxLHRoaXMucDE9dH0sZXF1YWxzVG9wbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wMC5lcXVhbHModC5wMCkmJnRoaXMucDEuZXF1YWxzKHQucDEpfHx0aGlzLnAwLmVxdWFscyh0LnAxKSYmdGhpcy5wMS5lcXVhbHModC5wMCl9LGxpbmVJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBOLmludGVyc2VjdGlvbih0aGlzLnAwLHRoaXMucDEsdC5wMCx0LnAxKX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiBFKSl0aHJvdyB0fWZpbmFsbHl7fXJldHVybiBudWxsfSxtYXhZOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KHRoaXMucDAueSx0aGlzLnAxLnkpfSxwb2ludEFsb25nT2Zmc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wMC54K3QqKHRoaXMucDEueC10aGlzLnAwLngpLGk9dGhpcy5wMC55K3QqKHRoaXMucDEueS10aGlzLnAwLnkpLHI9dGhpcy5wMS54LXRoaXMucDAueCxvPXRoaXMucDEueS10aGlzLnAwLnksYT1NYXRoLnNxcnQocipyK28qbykscz0wLHU9MDtpZigwIT09ZSl7aWYoYTw9MCl0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiQ2Fubm90IGNvbXB1dGUgb2Zmc2V0IGZyb20gemVyby1sZW5ndGggbGluZSBzZWdtZW50XCIpO3M9ZSpyL2EsdT1lKm8vYX1yZXR1cm4gbmV3IGgobi11LGkrcyl9LHNldENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNldENvb3JkaW5hdGVzKHQucDAsdC5wMSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMucDAueD1lLngsdGhpcy5wMC55PWUueSx0aGlzLnAxLng9bi54LHRoaXMucDEueT1uLnl9fSxzZWdtZW50RnJhY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wcm9qZWN0aW9uRmFjdG9yKHQpO3JldHVybiBlPDA/ZT0wOihlPjF8fGkuaXNOYU4oZSkpJiYoZT0xKSxlfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiTElORVNUUklORyggXCIrdGhpcy5wMC54K1wiIFwiK3RoaXMucDAueStcIiwgXCIrdGhpcy5wMS54K1wiIFwiK3RoaXMucDEueStcIilcIn0saXNIb3Jpem9udGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDAueT09PXRoaXMucDEueX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHNlKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIGFlLmRpc3RhbmNlTGluZUxpbmUodGhpcy5wMCx0aGlzLnAxLHQucDAsdC5wMSl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgZT1hcmd1bWVudHNbMF07cmV0dXJuIGFlLmRpc3RhbmNlUG9pbnRMaW5lKGUsdGhpcy5wMCx0aGlzLnAxKX19LHBvaW50QWxvbmc6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGg7cmV0dXJuIGUueD10aGlzLnAwLngrdCoodGhpcy5wMS54LXRoaXMucDAueCksZS55PXRoaXMucDAueSt0Kih0aGlzLnAxLnktdGhpcy5wMC55KSxlfSxoYXNoQ29kZTpmdW5jdGlvbigpe3ZhciB0PWphdmEubGFuZy5Eb3VibGUuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLngpO3RePTMxKmphdmEubGFuZy5Eb3VibGUuZG91YmxlVG9Mb25nQml0cyh0aGlzLnAwLnkpO3ZhciBlPU1hdGgudHJ1bmModCleTWF0aC50cnVuYyh0Pj4zMiksbj1qYXZhLmxhbmcuRG91YmxlLmRvdWJsZVRvTG9uZ0JpdHModGhpcy5wMS54KTtyZXR1cm4gbl49MzEqamF2YS5sYW5nLkRvdWJsZS5kb3VibGVUb0xvbmdCaXRzKHRoaXMucDEueSksZV5NYXRoLnRydW5jKG4pXk1hdGgudHJ1bmMobj4+MzIpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyLHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBzZX19KSxzZS5taWRQb2ludD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgaCgodC54K2UueCkvMiwodC55K2UueSkvMil9LHNlLnNlcmlhbFZlcnNpb25VSUQ9MHgyZDIxNzIxMzVmNDExYzAwO3ZhciBWcj1PYmplY3QuZnJlZXplKHtDb29yZGluYXRlOmgsQ29vcmRpbmF0ZUxpc3Q6YixFbnZlbG9wZTp4LExpbmVTZWdtZW50OnNlLEdlb21ldHJ5RmFjdG9yeTokdCxHZW9tZXRyeTpELFBvaW50OkV0LExpbmVTdHJpbmc6eHQsTGluZWFyUmluZzpJdCxQb2x5Z29uOk10LEdlb21ldHJ5Q29sbGVjdGlvbjpsdCxNdWx0aVBvaW50OkN0LE11bHRpTGluZVN0cmluZzpjdCxNdWx0aVBvbHlnb246T3R9KTtUcih1ZS5wcm90b3R5cGUse2hhc0NoaWxkcmVuOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw0O3QrKylpZihudWxsIT09dGhpcy5zdWJub2RlW3RdKXJldHVybiEwO3JldHVybiExfSxpc1BydW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLmhhc0NoaWxkcmVuKCl8fHRoaXMuaGFzSXRlbXMoKSl9LGFkZEFsbEl0ZW1zOmZ1bmN0aW9uKHQpe3QuYWRkQWxsKHRoaXMuaXRlbXMpO2Zvcih2YXIgZT0wO2U8NDtlKyspbnVsbCE9PXRoaXMuc3Vibm9kZVtlXSYmdGhpcy5zdWJub2RlW2VdLmFkZEFsbEl0ZW1zKHQpO3JldHVybiB0fSxnZXROb2RlQ291bnQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTw0O2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodCs9dGhpcy5zdWJub2RlW2VdLnNpemUoKSk7cmV0dXJuIHQrMX0sc2l6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPDQ7ZSsrKW51bGwhPT10aGlzLnN1Ym5vZGVbZV0mJih0Kz10aGlzLnN1Ym5vZGVbZV0uc2l6ZSgpKTtyZXR1cm4gdCt0aGlzLml0ZW1zLnNpemUoKX0sYWRkQWxsSXRlbXNGcm9tT3ZlcmxhcHBpbmc6ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc1NlYXJjaE1hdGNoKHQpKXJldHVybiBudWxsO2UuYWRkQWxsKHRoaXMuaXRlbXMpO2Zvcih2YXIgbj0wO248NDtuKyspbnVsbCE9PXRoaXMuc3Vibm9kZVtuXSYmdGhpcy5zdWJub2RlW25dLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKHQsZSl9LHZpc2l0SXRlbXM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5pdGVtcy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyllLnZpc2l0SXRlbShuLm5leHQoKSl9LGhhc0l0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXRlbXMuaXNFbXB0eSgpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc1NlYXJjaE1hdGNoKHQpKXJldHVybiExO2Zvcih2YXIgbj0hMSxpPTA7aTw0O2krKylpZihudWxsIT09dGhpcy5zdWJub2RlW2ldJiYobj10aGlzLnN1Ym5vZGVbaV0ucmVtb3ZlKHQsZSkpKXt0aGlzLnN1Ym5vZGVbaV0uaXNQcnVuYWJsZSgpJiYodGhpcy5zdWJub2RlW2ldPW51bGwpO2JyZWFrfXJldHVybiBufHwobj10aGlzLml0ZW1zLnJlbW92ZShlKSl9LHZpc2l0OmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaCh0KSlyZXR1cm4gbnVsbDt0aGlzLnZpc2l0SXRlbXModCxlKTtmb3IodmFyIG49MDtuPDQ7bisrKW51bGwhPT10aGlzLnN1Ym5vZGVbbl0mJnRoaXMuc3Vibm9kZVtuXS52aXNpdCh0LGUpfSxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zfSxkZXB0aDpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPDQ7ZSsrKWlmKG51bGwhPT10aGlzLnN1Ym5vZGVbZV0pe3ZhciBuPXRoaXMuc3Vibm9kZVtlXS5kZXB0aCgpO24+dCYmKHQ9bil9cmV0dXJuIHQrMX0saXNFbXB0eTpmdW5jdGlvbigpe3ZhciB0PSEwO3RoaXMuaXRlbXMuaXNFbXB0eSgpfHwodD0hMSk7Zm9yKHZhciBlPTA7ZTw0O2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodGhpcy5zdWJub2RlW2VdLmlzRW1wdHkoKXx8KHQ9ITEpKTtyZXR1cm4gdH0sYWRkOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbXMuYWRkKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdWV9fSksdWUuZ2V0U3Vibm9kZUluZGV4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0tMTtyZXR1cm4gdC5nZXRNaW5YKCk+PWUmJih0LmdldE1pblkoKT49biYmKGk9MyksdC5nZXRNYXhZKCk8PW4mJihpPTEpKSx0LmdldE1heFgoKTw9ZSYmKHQuZ2V0TWluWSgpPj1uJiYoaT0yKSx0LmdldE1heFkoKTw9biYmKGk9MCkpLGl9LGxlLmV4cG9uZW50PWZ1bmN0aW9uKHQpe3JldHVybiBjZSg2NCx0KS0xMDIzfSxsZS5wb3dlck9mMj1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0KX0sVHIoaGUucHJvdG90eXBlLHtnZXRMZXZlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxldmVsfSxjb21wdXRlS2V5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtmb3IodGhpcy5sZXZlbD1oZS5jb21wdXRlUXVhZExldmVsKHQpLHRoaXMuZW52PW5ldyB4LHRoaXMuY29tcHV0ZUtleSh0aGlzLmxldmVsLHQpOyF0aGlzLmVudi5jb250YWlucyh0KTspdGhpcy5sZXZlbCs9MSx0aGlzLmNvbXB1dGVLZXkodGhpcy5sZXZlbCx0KX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1sZS5wb3dlck9mMihlKTt0aGlzLnB0Lng9TWF0aC5mbG9vcihuLmdldE1pblgoKS9pKSppLHRoaXMucHQueT1NYXRoLmZsb29yKG4uZ2V0TWluWSgpL2kpKmksdGhpcy5lbnYuaW5pdCh0aGlzLnB0LngsdGhpcy5wdC54K2ksdGhpcy5wdC55LHRoaXMucHQueStpKX19LGdldEVudmVsb3BlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW52fSxnZXRDZW50cmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGgoKHRoaXMuZW52LmdldE1pblgoKSt0aGlzLmVudi5nZXRNYXhYKCkpLzIsKHRoaXMuZW52LmdldE1pblkoKSt0aGlzLmVudi5nZXRNYXhZKCkpLzIpfSxnZXRQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBoZX19KSxoZS5jb21wdXRlUXVhZExldmVsPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0V2lkdGgoKSxuPXQuZ2V0SGVpZ2h0KCksaT1lPm4/ZTpuO3JldHVybiBsZS5leHBvbmVudChpKSsxfSxQcihmZSx1ZSksVHIoZmUucHJvdG90eXBlLHtmaW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXVlLmdldFN1Ym5vZGVJbmRleCh0LHRoaXMuY2VudHJleCx0aGlzLmNlbnRyZXkpO3JldHVybiBlPT09LTE/dGhpczpudWxsIT09dGhpcy5zdWJub2RlW2VdP3RoaXMuc3Vibm9kZVtlXS5maW5kKHQpOnRoaXN9LGlzU2VhcmNoTWF0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52LmludGVyc2VjdHModCl9LGdldFN1Ym5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10aGlzLnN1Ym5vZGVbdF0mJih0aGlzLnN1Ym5vZGVbdF09dGhpcy5jcmVhdGVTdWJub2RlKHQpKSx0aGlzLnN1Ym5vZGVbdF19LGdldEVudmVsb3BlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW52fSxnZXROb2RlOmZ1bmN0aW9uKHQpe3ZhciBlPXVlLmdldFN1Ym5vZGVJbmRleCh0LHRoaXMuY2VudHJleCx0aGlzLmNlbnRyZXkpO3JldHVybiBlIT09LTE/dGhpcy5nZXRTdWJub2RlKGUpLmdldE5vZGUodCk6dGhpc30sY3JlYXRlU3Vibm9kZTpmdW5jdGlvbih0KXt2YXIgZT0wLG49MCxpPTAscj0wO3N3aXRjaCh0KXtjYXNlIDA6ZT10aGlzLmVudi5nZXRNaW5YKCksbj10aGlzLmNlbnRyZXgsaT10aGlzLmVudi5nZXRNaW5ZKCkscj10aGlzLmNlbnRyZXk7YnJlYWs7Y2FzZSAxOmU9dGhpcy5jZW50cmV4LG49dGhpcy5lbnYuZ2V0TWF4WCgpLGk9dGhpcy5lbnYuZ2V0TWluWSgpLHI9dGhpcy5jZW50cmV5O2JyZWFrO2Nhc2UgMjplPXRoaXMuZW52LmdldE1pblgoKSxuPXRoaXMuY2VudHJleCxpPXRoaXMuY2VudHJleSxyPXRoaXMuZW52LmdldE1heFkoKTticmVhaztjYXNlIDM6ZT10aGlzLmNlbnRyZXgsbj10aGlzLmVudi5nZXRNYXhYKCksaT10aGlzLmNlbnRyZXkscj10aGlzLmVudi5nZXRNYXhZKCl9cmV0dXJuIG5ldyBmZShuZXcgeChlLG4saSxyKSx0aGlzLmxldmVsLTEpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKHQpe2MuaXNUcnVlKG51bGw9PT10aGlzLmVudnx8dGhpcy5lbnYuY29udGFpbnModC5lbnYpKTt2YXIgZT11ZS5nZXRTdWJub2RlSW5kZXgodC5lbnYsdGhpcy5jZW50cmV4LHRoaXMuY2VudHJleSk7aWYodC5sZXZlbD09PXRoaXMubGV2ZWwtMSl0aGlzLnN1Ym5vZGVbZV09dDtlbHNle3ZhciBuPXRoaXMuY3JlYXRlU3Vibm9kZShlKTtuLmluc2VydE5vZGUodCksdGhpcy5zdWJub2RlW2VdPW59fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBmZX19KSxmZS5jcmVhdGVOb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBoZSh0KTtyZXR1cm4gbmV3IGZlKGUuZ2V0RW52ZWxvcGUoKSxlLmdldExldmVsKCkpfSxmZS5jcmVhdGVFeHBhbmRlZD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyB4KGUpO251bGwhPT10JiZuLmV4cGFuZFRvSW5jbHVkZSh0LmVudik7dmFyIGk9ZmUuY3JlYXRlTm9kZShuKTtyZXR1cm4gbnVsbCE9PXQmJmkuaW5zZXJ0Tm9kZSh0KSxpfSxUcihkZS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGRlfX0pLGRlLmlzWmVyb1dpZHRoPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS10O2lmKDA9PT1uKXJldHVybiEwO3ZhciBpPU1hdGgubWF4KE1hdGguYWJzKHQpLE1hdGguYWJzKGUpKSxyPW4vaTtyZXR1cm4gbGUuZXhwb25lbnQocik8PWRlLk1JTl9CSU5BUllfRVhQT05FTlR9LGRlLk1JTl9CSU5BUllfRVhQT05FTlQ9LTUwLFByKHBlLHVlKSxUcihwZS5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbih0LGUpe3ZhciBuPXVlLmdldFN1Ym5vZGVJbmRleCh0LHBlLm9yaWdpbi54LHBlLm9yaWdpbi55KTtpZihuPT09LTEpcmV0dXJuIHRoaXMuYWRkKGUpLG51bGw7dmFyIGk9dGhpcy5zdWJub2RlW25dO2lmKG51bGw9PT1pfHwhaS5nZXRFbnZlbG9wZSgpLmNvbnRhaW5zKHQpKXt2YXIgcj1mZS5jcmVhdGVFeHBhbmRlZChpLHQpO3RoaXMuc3Vibm9kZVtuXT1yfXRoaXMuaW5zZXJ0Q29udGFpbmVkKHRoaXMuc3Vibm9kZVtuXSx0LGUpfSxpc1NlYXJjaE1hdGNoOmZ1bmN0aW9uKHQpe3JldHVybiEwfSxpbnNlcnRDb250YWluZWQ6ZnVuY3Rpb24odCxlLG4pe2MuaXNUcnVlKHQuZ2V0RW52ZWxvcGUoKS5jb250YWlucyhlKSk7dmFyIGk9ZGUuaXNaZXJvV2lkdGgoZS5nZXRNaW5YKCksZS5nZXRNYXhYKCkpLHI9ZGUuaXNaZXJvV2lkdGgoZS5nZXRNaW5ZKCksZS5nZXRNYXhZKCkpLG89bnVsbDtvPWl8fHI/dC5maW5kKGUpOnQuZ2V0Tm9kZShlKSxvLmFkZChuKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcGV9fSkscGUub3JpZ2luPW5ldyBoKDAsMCksVHIoZ2UucHJvdG90eXBlLHtpbnNlcnQ6ZnVuY3Rpb24odCxlKXt9LHJlbW92ZTpmdW5jdGlvbih0LGUpe30scXVlcnk6ZnVuY3Rpb24oKXsxPT09YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZ2V9fSksVHIodmUucHJvdG90eXBlLHt2aXNpdEl0ZW06ZnVuY3Rpb24odCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB2ZX19KSxUcihtZS5wcm90b3R5cGUse3Zpc2l0SXRlbTpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZCh0KX0sZ2V0SXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bdmVdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBtZX19KSxUcih5ZS5wcm90b3R5cGUse3NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucm9vdD90aGlzLnJvb3Quc2l6ZSgpOjB9LGluc2VydDpmdW5jdGlvbih0LGUpe3RoaXMuY29sbGVjdFN0YXRzKHQpO3ZhciBuPXllLmVuc3VyZUV4dGVudCh0LHRoaXMubWluRXh0ZW50KTt0aGlzLnJvb3QuaW5zZXJ0KG4sZSl9LHF1ZXJ5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBtZTtyZXR1cm4gdGhpcy5xdWVyeSh0LGUpLGUuZ2V0SXRlbXMoKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdO3RoaXMucm9vdC52aXNpdChuLGkpfX0scXVlcnlBbGw6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgXztyZXR1cm4gdGhpcy5yb290LmFkZEFsbEl0ZW1zKHQpLHR9LHJlbW92ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXllLmVuc3VyZUV4dGVudCh0LHRoaXMubWluRXh0ZW50KTtyZXR1cm4gdGhpcy5yb290LnJlbW92ZShuLGUpfSxjb2xsZWN0U3RhdHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRXaWR0aCgpO2U8dGhpcy5taW5FeHRlbnQmJmU+MCYmKHRoaXMubWluRXh0ZW50PWUpO3ZhciBuPXQuZ2V0SGVpZ2h0KCk7bjx0aGlzLm1pbkV4dGVudCYmbj4wJiYodGhpcy5taW5FeHRlbnQ9bil9LGRlcHRoOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/dGhpcy5yb290LmRlcHRoKCk6MH0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5yb290fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltnZSxzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4geWV9fSkseWUuZW5zdXJlRXh0ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRNaW5YKCksaT10LmdldE1heFgoKSxyPXQuZ2V0TWluWSgpLG89dC5nZXRNYXhZKCk7cmV0dXJuIG4hPT1pJiZyIT09bz90OihuPT09aSYmKG4tPWUvMixpPW4rZS8yKSxyPT09byYmKHItPWUvMixvPXIrZS8yKSxuZXcgeChuLGkscixvKSl9LHllLnNlcmlhbFZlcnNpb25VSUQ9LTB4Njc4YjYwYzk2N2EyNTQwMDt2YXIgWHI9T2JqZWN0LmZyZWV6ZSh7UXVhZHRyZWU6eWV9KSxIcj1PYmplY3QuZnJlZXplKHtxdWFkdHJlZTpYcn0pLHFyPVtcIlBvaW50XCIsXCJNdWx0aVBvaW50XCIsXCJMaW5lU3RyaW5nXCIsXCJNdWx0aUxpbmVTdHJpbmdcIixcIlBvbHlnb25cIixcIk11bHRpUG9seWdvblwiXTtUcihfZS5wcm90b3R5cGUse3JlYWQ6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwO2U9XCJzdHJpbmdcIj09dHlwZW9mIHQ/SlNPTi5wYXJzZSh0KTp0O3ZhciBuPWUudHlwZTtpZighWXJbbl0pdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBHZW9KU09OIHR5cGU6IFwiK2UudHlwZSk7cmV0dXJuIHFyLmluZGV4T2YobikhPT0tMT9ZcltuXS5hcHBseSh0aGlzLFtlLmNvb3JkaW5hdGVzXSk6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PW4/WXJbbl0uYXBwbHkodGhpcyxbZS5nZW9tZXRyaWVzXSk6WXJbbl0uYXBwbHkodGhpcyxbZV0pfSx3cml0ZTpmdW5jdGlvbih0KXt2YXIgZT10LmdldEdlb21ldHJ5VHlwZSgpO2lmKCFXcltlXSl0aHJvdyBuZXcgRXJyb3IoXCJHZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkXCIpO3JldHVybiBXcltlXS5hcHBseSh0aGlzLFt0XSl9fSk7dmFyIFlyPXtGZWF0dXJlOmZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtpZih0Lmdlb21ldHJ5KXt2YXIgaT10Lmdlb21ldHJ5LnR5cGU7aWYoIVlyW2ldKXRocm93IG5ldyBFcnJvcihcIlVua25vd24gR2VvSlNPTiB0eXBlOiBcIit0LnR5cGUpO2UuZ2VvbWV0cnk9dGhpcy5yZWFkKHQuZ2VvbWV0cnkpfXJldHVybiB0LmJib3gmJihlLmJib3g9WXIuYmJveC5hcHBseSh0aGlzLFt0LmJib3hdKSksZX0sRmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9e307aWYodC5mZWF0dXJlcyl7ZS5mZWF0dXJlcz1bXTtmb3IodmFyIG49MDtuPHQuZmVhdHVyZXMubGVuZ3RoOysrbillLmZlYXR1cmVzLnB1c2godGhpcy5yZWFkKHQuZmVhdHVyZXNbbl0pKX1yZXR1cm4gdC5iYm94JiYoZS5iYm94PXRoaXMucGFyc2UuYmJveC5hcHBseSh0aGlzLFt0LmJib3hdKSksZX0sY29vcmRpbmF0ZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbil7dmFyIGk9dFtuXTtlLnB1c2gobmV3IGgoaVswXSxpWzFdKSl9cmV0dXJuIGV9LGJib3g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVhclJpbmcoW25ldyBoKHRbMF0sdFsxXSksbmV3IGgodFsyXSx0WzFdKSxuZXcgaCh0WzJdLHRbM10pLG5ldyBoKHRbMF0sdFszXSksbmV3IGgodFswXSx0WzFdKV0pfSxQb2ludDpmdW5jdGlvbih0KXt2YXIgZT1uZXcgaCh0WzBdLHRbMV0pO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVQb2ludChlKX0sTXVsdGlQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7KytuKWUucHVzaChZci5Qb2ludC5hcHBseSh0aGlzLFt0W25dXSkpO3JldHVybiB0aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVNdWx0aVBvaW50KGUpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe3ZhciBlPVlyLmNvb3JkaW5hdGVzLmFwcGx5KHRoaXMsW3RdKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhlKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pZS5wdXNoKFlyLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbdFtuXV0pKTtyZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlMaW5lU3RyaW5nKGUpfSxQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1Zci5jb29yZGluYXRlcy5hcHBseSh0aGlzLFt0WzBdXSksbj10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKGUpLGk9W10scj0xO3I8dC5sZW5ndGg7KytyKXt2YXIgbz10W3JdLGE9WXIuY29vcmRpbmF0ZXMuYXBwbHkodGhpcyxbb10pLHM9dGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhhKTtpLnB1c2gocyl9cmV0dXJuIHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvbHlnb24obixpKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDsrK24pe3ZhciBpPXRbbl07ZS5wdXNoKFlyLlBvbHlnb24uYXBwbHkodGhpcyxbaV0pKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlTXVsdGlQb2x5Z29uKGUpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoOysrbil7dmFyIGk9dFtuXTtlLnB1c2godGhpcy5yZWFkKGkpKX1yZXR1cm4gdGhpcy5nZW9tZXRyeUZhY3RvcnkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKGUpfX0sV3I9e2Nvb3JkaW5hdGU6ZnVuY3Rpb24odCl7cmV0dXJuW3QueCx0LnldfSxQb2ludDpmdW5jdGlvbih0KXtyZXR1cm57dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6V3IuY29vcmRpbmF0ZS5hcHBseSh0aGlzLFt0LmdldENvb3JkaW5hdGUoKV0pfX0sTXVsdGlQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuZ2VvbWV0cmllc1tuXSxyPVdyLlBvaW50LmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goci5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aVBvaW50XCIsY29vcmRpbmF0ZXM6ZX19LExpbmVTdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49dC5nZXRDb29yZGluYXRlcygpLGk9MDtpPG4ubGVuZ3RoOysraSl7dmFyIHI9bltpXTtlLnB1c2goV3IuY29vcmRpbmF0ZS5hcHBseSh0aGlzLFtyXSkpfXJldHVybnt0eXBlOlwiTGluZVN0cmluZ1wiLGNvb3JkaW5hdGVzOmV9fSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQuZ2VvbWV0cmllcy5sZW5ndGg7KytuKXt2YXIgaT10Lmdlb21ldHJpZXNbbl0scj1Xci5MaW5lU3RyaW5nLmFwcGx5KHRoaXMsW2ldKTtlLnB1c2goci5jb29yZGluYXRlcyl9cmV0dXJue3R5cGU6XCJNdWx0aUxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfX0sUG9seWdvbjpmdW5jdGlvbih0KXt2YXIgZT1bXSxuPVdyLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbdC5zaGVsbF0pO2UucHVzaChuLmNvb3JkaW5hdGVzKTtmb3IodmFyIGk9MDtpPHQuaG9sZXMubGVuZ3RoOysraSl7dmFyIHI9dC5ob2xlc1tpXSxvPVdyLkxpbmVTdHJpbmcuYXBwbHkodGhpcyxbcl0pO2UucHVzaChvLmNvb3JkaW5hdGVzKX1yZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczplfX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmdlb21ldHJpZXMubGVuZ3RoOysrbil7dmFyIGk9dC5nZW9tZXRyaWVzW25dLHI9V3IuUG9seWdvbi5hcHBseSh0aGlzLFtpXSk7ZS5wdXNoKHIuY29vcmRpbmF0ZXMpfXJldHVybnt0eXBlOlwiTXVsdGlQb2x5Z29uXCIsY29vcmRpbmF0ZXM6ZX19LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZW9tZXRyaWVzLmxlbmd0aDsrK24pe3ZhciBpPXQuZ2VvbWV0cmllc1tuXSxyPWkuZ2V0R2VvbWV0cnlUeXBlKCk7ZS5wdXNoKFdyW3JdLmFwcGx5KHRoaXMsW2ldKSl9cmV0dXJue3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOmV9fX07VHIoYmUucHJvdG90eXBlLHtyZWFkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyc2VyLnJlYWQodCk7cmV0dXJuIHRoaXMucHJlY2lzaW9uTW9kZWwuZ2V0VHlwZSgpPT09S3QuRklYRUQmJnRoaXMucmVkdWNlUHJlY2lzaW9uKGUpLGV9LHJlZHVjZVByZWNpc2lvbjpmdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQuY29vcmRpbmF0ZSl0aGlzLnByZWNpc2lvbk1vZGVsLm1ha2VQcmVjaXNlKHQuY29vcmRpbmF0ZSk7ZWxzZSBpZih0LnBvaW50cylmb3IoZT0wLG49dC5wb2ludHMubGVuZ3RoO2U8bjtlKyspdGhpcy5wcmVjaXNpb25Nb2RlbC5tYWtlUHJlY2lzZSh0LnBvaW50c1tlXSk7ZWxzZSBpZih0Lmdlb21ldHJpZXMpZm9yKGU9MCxuPXQuZ2VvbWV0cmllcy5sZW5ndGg7ZTxuO2UrKyl0aGlzLnJlZHVjZVByZWNpc2lvbih0Lmdlb21ldHJpZXNbZV0pfX0pLFRyKHhlLnByb3RvdHlwZSx7d3JpdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyc2VyLndyaXRlKHQpfX0pO3ZhciBacj1PYmplY3QuZnJlZXplKHtHZW9KU09OUmVhZGVyOmJlLEdlb0pTT05Xcml0ZXI6eGV9KTtUcih3ZS5wcm90b3R5cGUse25leHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmF0U3RhcnQpcmV0dXJuIHRoaXMuYXRTdGFydD0hMSx3ZS5pc0F0b21pYyh0aGlzLnBhcmVudCkmJnRoaXMuaW5kZXgrKyx0aGlzLnBhcmVudDtpZihudWxsIT09dGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3Ipe2lmKHRoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yLmhhc05leHQoKSlyZXR1cm4gdGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3IubmV4dCgpO3RoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGx9aWYodGhpcy5pbmRleD49dGhpcy5tYXgpdGhyb3cgbmV3IG07dmFyIHQ9dGhpcy5wYXJlbnQuZ2V0R2VvbWV0cnlOKHRoaXMuaW5kZXgrKyk7cmV0dXJuIHQgaW5zdGFuY2VvZiBsdD8odGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3I9bmV3IHdlKHQpLHRoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yLm5leHQoKSk6dH0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKHRoaXMuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpfSxoYXNOZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5hdFN0YXJ0KXJldHVybiEwO2lmKG51bGwhPT10aGlzLnN1YmNvbGxlY3Rpb25JdGVyYXRvcil7aWYodGhpcy5zdWJjb2xsZWN0aW9uSXRlcmF0b3IuaGFzTmV4dCgpKXJldHVybiEwO3RoaXMuc3ViY29sbGVjdGlvbkl0ZXJhdG9yPW51bGx9cmV0dXJuISh0aGlzLmluZGV4Pj10aGlzLm1heCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2RdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB3ZX19KSx3ZS5pc0F0b21pYz1mdW5jdGlvbih0KXtyZXR1cm4hKHQgaW5zdGFuY2VvZiBsdCl9LFRyKEVlLnByb3RvdHlwZSx7bG9jYXRlSW50ZXJuYWw6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgTXQpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtpZihlLmlzRW1wdHkoKSlyZXR1cm4gUy5FWFRFUklPUjt2YXIgbj1lLmdldEV4dGVyaW9yUmluZygpLGk9dGhpcy5sb2NhdGVJblBvbHlnb25SaW5nKHQsbik7aWYoaT09PVMuRVhURVJJT1IpcmV0dXJuIFMuRVhURVJJT1I7aWYoaT09PVMuQk9VTkRBUlkpcmV0dXJuIFMuQk9VTkRBUlk7Zm9yKHZhciByPTA7cjxlLmdldE51bUludGVyaW9yUmluZygpO3IrKyl7dmFyIG89ZS5nZXRJbnRlcmlvclJpbmdOKHIpLGE9dGhpcy5sb2NhdGVJblBvbHlnb25SaW5nKHQsbyk7aWYoYT09PVMuSU5URVJJT1IpcmV0dXJuIFMuRVhURVJJT1I7aWYoYT09PVMuQk9VTkRBUlkpcmV0dXJuIFMuQk9VTkRBUll9cmV0dXJuIFMuSU5URVJJT1J9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIHh0KXt2YXIgcz1hcmd1bWVudHNbMF0sdT1hcmd1bWVudHNbMV07aWYoIXUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHMocykpcmV0dXJuIFMuRVhURVJJT1I7dmFyIGw9dS5nZXRDb29yZGluYXRlcygpO3JldHVybiB1LmlzQ2xvc2VkKCl8fCFzLmVxdWFscyhsWzBdKSYmIXMuZXF1YWxzKGxbbC5sZW5ndGgtMV0pP2FlLmlzT25MaW5lKHMsbCk/Uy5JTlRFUklPUjpTLkVYVEVSSU9SOlMuQk9VTkRBUll9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIEV0KXt2YXIgYz1hcmd1bWVudHNbMF07cmV0dXJuIGFyZ3VtZW50c1sxXS5nZXRDb29yZGluYXRlKCkuZXF1YWxzMkQoYyk/Uy5JTlRFUklPUjpTLkVYVEVSSU9SfX0sbG9jYXRlSW5Qb2x5Z29uUmluZzpmdW5jdGlvbih0LGUpe3JldHVybiBlLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHQpP2FlLmxvY2F0ZVBvaW50SW5SaW5nKHQsZS5nZXRDb29yZGluYXRlcygpKTpTLkVYVEVSSU9SfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubG9jYXRlKHQsZSkhPT1TLkVYVEVSSU9SfSx1cGRhdGVMb2NhdGlvbkluZm86ZnVuY3Rpb24odCl7dD09PVMuSU5URVJJT1ImJih0aGlzLmlzSW49ITApLHQ9PT1TLkJPVU5EQVJZJiZ0aGlzLm51bUJvdW5kYXJpZXMrK30sY29tcHV0ZUxvY2F0aW9uOmZ1bmN0aW9uKHQsZSl7aWYoZSBpbnN0YW5jZW9mIEV0JiZ0aGlzLnVwZGF0ZUxvY2F0aW9uSW5mbyh0aGlzLmxvY2F0ZUludGVybmFsKHQsZSkpLGUgaW5zdGFuY2VvZiB4dCl0aGlzLnVwZGF0ZUxvY2F0aW9uSW5mbyh0aGlzLmxvY2F0ZUludGVybmFsKHQsZSkpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIE10KXRoaXMudXBkYXRlTG9jYXRpb25JbmZvKHRoaXMubG9jYXRlSW50ZXJuYWwodCxlKSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgY3QpZm9yKHZhciBuPWUsaT0wO2k8bi5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj1uLmdldEdlb21ldHJ5TihpKTt0aGlzLnVwZGF0ZUxvY2F0aW9uSW5mbyh0aGlzLmxvY2F0ZUludGVybmFsKHQscikpfWVsc2UgaWYoZSBpbnN0YW5jZW9mIE90KWZvcih2YXIgbz1lLGk9MDtpPG8uZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIGE9by5nZXRHZW9tZXRyeU4oaSk7dGhpcy51cGRhdGVMb2NhdGlvbkluZm8odGhpcy5sb2NhdGVJbnRlcm5hbCh0LGEpKX1lbHNlIGlmKGUgaW5zdGFuY2VvZiBsdClmb3IodmFyIHM9bmV3IHdlKGUpO3MuaGFzTmV4dCgpOyl7dmFyIHU9cy5uZXh0KCk7dSE9PWUmJnRoaXMuY29tcHV0ZUxvY2F0aW9uKHQsdSl9fSxsb2NhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5pc0VtcHR5KCk/Uy5FWFRFUklPUjplIGluc3RhbmNlb2YgeHQ/dGhpcy5sb2NhdGVJbnRlcm5hbCh0LGUpOmUgaW5zdGFuY2VvZiBNdD90aGlzLmxvY2F0ZUludGVybmFsKHQsZSk6KHRoaXMuaXNJbj0hMSx0aGlzLm51bUJvdW5kYXJpZXM9MCx0aGlzLmNvbXB1dGVMb2NhdGlvbih0LGUpLHRoaXMuYm91bmRhcnlSdWxlLmlzSW5Cb3VuZGFyeSh0aGlzLm51bUJvdW5kYXJpZXMpP1MuQk9VTkRBUlk6dGhpcy5udW1Cb3VuZGFyaWVzPjB8fHRoaXMuaXNJbj9TLklOVEVSSU9SOlMuRVhURVJJT1IpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBFZX19KSxUcihTZS5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgTXQmJnRoaXMuY29tcHMuYWRkKHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFNlfX0pLFNlLmdldFBvbHlnb25zPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gU2UuZ2V0UG9seWdvbnModCxuZXcgXyl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4gZSBpbnN0YW5jZW9mIE10P24uYWRkKGUpOmUgaW5zdGFuY2VvZiBsdCYmZS5hcHBseShuZXcgU2UobikpLG59fSxUcihNZS5wcm90b3R5cGUse2lzSW5zaWRlQXJlYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ0luZGV4PT09TWUuSU5TSURFX0FSRUF9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdH0sZ2V0R2VvbWV0cnlDb21wb25lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnR9LGdldFNlZ21lbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ0luZGV4fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBNZX19KSxNZS5JTlNJREVfQVJFQT0tMTt2YXIgSnI9e3JldmVyc2VPcmRlcjpmdW5jdGlvbigpe3JldHVybntjb21wYXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuY29tcGFyZVRvKHQpfX19LG1pbjpmdW5jdGlvbih0KXtyZXR1cm4gSnIuc29ydCh0KSx0LmdldCgwKX0sc29ydDpmdW5jdGlvbih0LGUpe3ZhciBuPXQudG9BcnJheSgpO2U/b3Quc29ydChuLGUpOm90LnNvcnQobik7Zm9yKHZhciBpPXQuaXRlcmF0b3IoKSxyPTAsbz1uLmxlbmd0aDtyPG87cisrKWkubmV4dCgpLGkuc2V0KG5bcl0pfSxzaW5nbGV0b25MaXN0OmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBfO3JldHVybiBlLmFkZCh0KSxlfX07VHIoQ2UucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEV0JiZ0aGlzLnB0cy5hZGQodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3N0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQ2V9fSksQ2UuZ2V0UG9pbnRzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdCBpbnN0YW5jZW9mIEV0P0pyLnNpbmdsZXRvbkxpc3QodCk6Q2UuZ2V0UG9pbnRzKHQsbmV3IF8pfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuIGUgaW5zdGFuY2VvZiBFdD9uLmFkZChlKTplIGluc3RhbmNlb2YgbHQmJmUuYXBwbHkobmV3IENlKG4pKSxufX0sVHIoSWUucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7KHQgaW5zdGFuY2VvZiBFdHx8dCBpbnN0YW5jZW9mIHh0fHx0IGluc3RhbmNlb2YgTXQpJiZ0aGlzLmxvY2F0aW9ucy5hZGQobmV3IE1lKHQsMCx0LmdldENvb3JkaW5hdGUoKSkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzdF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEllfX0pLEllLmdldExvY2F0aW9ucz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgXztyZXR1cm4gdC5hcHBseShuZXcgSWUoZSkpLGV9LFRyKE9lLnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNGb3JjZWRUb0xpbmVTdHJpbmcmJnQgaW5zdGFuY2VvZiBJdCl7dmFyIGU9dC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpKTtyZXR1cm4gdGhpcy5saW5lcy5hZGQoZSksbnVsbH10IGluc3RhbmNlb2YgeHQmJnRoaXMubGluZXMuYWRkKHQpfSxzZXRGb3JjZVRvTGluZVN0cmluZzpmdW5jdGlvbih0KXt0aGlzLmlzRm9yY2VkVG9MaW5lU3RyaW5nPXR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW1JdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPZX19KSxPZS5nZXRHZW9tZXRyeT1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHQuZ2V0RmFjdG9yeSgpLmJ1aWxkR2VvbWV0cnkoT2UuZ2V0TGluZXModCkpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuIGUuZ2V0RmFjdG9yeSgpLmJ1aWxkR2VvbWV0cnkoT2UuZ2V0TGluZXMoZSxuKSl9fSxPZS5nZXRMaW5lcz1mdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIE9lLmdldExpbmVzKHQsITEpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihMcihhcmd1bWVudHNbMF0scCkmJkxyKGFyZ3VtZW50c1sxXSxwKSl7Zm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWUuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO09lLmdldExpbmVzKHIsbil9cmV0dXJuIG59aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEJiZcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIG89YXJndW1lbnRzWzBdLGE9YXJndW1lbnRzWzFdLHM9bmV3IF87cmV0dXJuIG8uYXBwbHkobmV3IE9lKHMsYSkpLHN9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEJiZMcihhcmd1bWVudHNbMV0scCkpe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXTtyZXR1cm4gdSBpbnN0YW5jZW9mIHh0P2wuYWRkKHUpOnUuYXBwbHkobmV3IE9lKGwpKSxsfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihcImJvb2xlYW5cIj09dHlwZW9mIGFyZ3VtZW50c1syXSYmTHIoYXJndW1lbnRzWzBdLHApJiZMcihhcmd1bWVudHNbMV0scCkpe2Zvcih2YXIgYz1hcmd1bWVudHNbMF0saD1hcmd1bWVudHNbMV0sZj1hcmd1bWVudHNbMl0saT1jLml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtPZS5nZXRMaW5lcyhyLGgsZil9cmV0dXJuIGh9aWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgRCYmTHIoYXJndW1lbnRzWzFdLHApKXt2YXIgZD1hcmd1bWVudHNbMF0sZz1hcmd1bWVudHNbMV0sdj1hcmd1bWVudHNbMl07cmV0dXJuIGQuYXBwbHkobmV3IE9lKGcsdikpLGd9fX0sVHIoVGUucHJvdG90eXBlLHtjb21wdXRlQ29udGFpbm1lbnREaXN0YW5jZTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1uZXcgQXJyYXkoMikuZmlsbChudWxsKTtpZih0aGlzLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlKDAsdCksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gbnVsbDt0aGlzLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlKDEsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdLGk9MS1lLHI9U2UuZ2V0UG9seWdvbnModGhpcy5nZW9tW2VdKTtpZihyLnNpemUoKT4wKXt2YXIgbz1JZS5nZXRMb2NhdGlvbnModGhpcy5nZW9tW2ldKTtpZih0aGlzLmNvbXB1dGVDb250YWlubWVudERpc3RhbmNlKG8scixuKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiB0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25baV09blswXSx0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bZV09blsxXSxudWxsfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgQXJyYXkmJkxyKGFyZ3VtZW50c1swXSx2KSYmTHIoYXJndW1lbnRzWzFdLHYpKXtmb3IodmFyIGE9YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLHU9YXJndW1lbnRzWzJdLGw9MDtsPGEuc2l6ZSgpO2wrKylmb3IodmFyIGM9YS5nZXQobCksaD0wO2g8cy5zaXplKCk7aCsrKWlmKHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoYyxzLmdldChoKSx1KSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsfWVsc2UgaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBNZSYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBNdCl7dmFyIGY9YXJndW1lbnRzWzBdLGQ9YXJndW1lbnRzWzFdLHA9YXJndW1lbnRzWzJdLGc9Zi5nZXRDb29yZGluYXRlKCk7aWYoUy5FWFRFUklPUiE9PXRoaXMucHRMb2NhdG9yLmxvY2F0ZShnLGQpKXJldHVybiB0aGlzLm1pbkRpc3RhbmNlPTAscFswXT1mLHBbMV09bmV3IE1lKGQsZyksbnVsbH19LGNvbXB1dGVNaW5EaXN0YW5jZUxpbmVzUG9pbnRzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuc2l6ZSgpO2krKylmb3IodmFyIHI9dC5nZXQoaSksbz0wO288ZS5zaXplKCk7bysrKXt2YXIgYT1lLmdldChvKTtpZih0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZShyLGEsbiksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gbnVsbH19LGNvbXB1dGVGYWNldERpc3RhbmNlOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksZT1PZS5nZXRMaW5lcyh0aGlzLmdlb21bMF0pLG49T2UuZ2V0TGluZXModGhpcy5nZW9tWzFdKSxpPUNlLmdldFBvaW50cyh0aGlzLmdlb21bMF0pLHI9Q2UuZ2V0UG9pbnRzKHRoaXMuZ2VvbVsxXSk7cmV0dXJuIHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXMoZSxuLHQpLHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMSksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZT9udWxsOih0WzBdPW51bGwsdFsxXT1udWxsLHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHMoZSxyLHQpLHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMSksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZT9udWxsOih0WzBdPW51bGwsdFsxXT1udWxsLHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlTGluZXNQb2ludHMobixpLHQpLHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMCksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZT9udWxsOih0WzBdPW51bGwsdFsxXT1udWxsLHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlUG9pbnRzKGkscix0KSx2b2lkIHRoaXMudXBkYXRlTWluRGlzdGFuY2UodCwhMSkpKSl9LG5lYXJlc3RMb2NhdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wdXRlTWluRGlzdGFuY2UoKSx0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb259LHVwZGF0ZU1pbkRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PT10WzBdP251bGw6dm9pZChlPyh0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMF09dFsxXSx0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMV09dFswXSk6KHRoaXMubWluRGlzdGFuY2VMb2NhdGlvblswXT10WzBdLHRoaXMubWluRGlzdGFuY2VMb2NhdGlvblsxXT10WzFdKSl9LG5lYXJlc3RQb2ludHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wdXRlTWluRGlzdGFuY2UoKSxbdGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uWzBdLmdldENvb3JkaW5hdGUoKSx0aGlzLm1pbkRpc3RhbmNlTG9jYXRpb25bMV0uZ2V0Q29vcmRpbmF0ZSgpXX0sY29tcHV0ZU1pbkRpc3RhbmNlOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKG51bGwhPT10aGlzLm1pbkRpc3RhbmNlTG9jYXRpb24pcmV0dXJuIG51bGw7aWYodGhpcy5taW5EaXN0YW5jZUxvY2F0aW9uPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHRoaXMuY29tcHV0ZUNvbnRhaW5tZW50RGlzdGFuY2UoKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsO3RoaXMuY29tcHV0ZUZhY2V0RGlzdGFuY2UoKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgQXJyYXkmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgeHQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgRXQpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50c1syXTtpZih0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5kaXN0YW5jZShlLmdldEVudmVsb3BlSW50ZXJuYWwoKSk+dGhpcy5taW5EaXN0YW5jZSlyZXR1cm4gbnVsbDtmb3IodmFyIGk9dC5nZXRDb29yZGluYXRlcygpLHI9ZS5nZXRDb29yZGluYXRlKCksbz0wO288aS5sZW5ndGgtMTtvKyspe3ZhciBhPWFlLmRpc3RhbmNlUG9pbnRMaW5lKHIsaVtvXSxpW28rMV0pO2lmKGE8dGhpcy5taW5EaXN0YW5jZSl7dGhpcy5taW5EaXN0YW5jZT1hO3ZhciBzPW5ldyBzZShpW29dLGlbbysxXSksdT1zLmNsb3Nlc3RQb2ludChyKTtuWzBdPW5ldyBNZSh0LG8sdSksblsxXT1uZXcgTWUoZSwwLHIpfWlmKHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fWVsc2UgaWYoYXJndW1lbnRzWzJdaW5zdGFuY2VvZiBBcnJheSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB4dCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB4dCl7dmFyIGw9YXJndW1lbnRzWzBdLGM9YXJndW1lbnRzWzFdLGg9YXJndW1lbnRzWzJdO2lmKGwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmRpc3RhbmNlKGMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKT50aGlzLm1pbkRpc3RhbmNlKXJldHVybiBudWxsO2Zvcih2YXIgaT1sLmdldENvb3JkaW5hdGVzKCksZj1jLmdldENvb3JkaW5hdGVzKCksbz0wO288aS5sZW5ndGgtMTtvKyspZm9yKHZhciBkPTA7ZDxmLmxlbmd0aC0xO2QrKyl7dmFyIGE9YWUuZGlzdGFuY2VMaW5lTGluZShpW29dLGlbbysxXSxmW2RdLGZbZCsxXSk7XG5pZihhPHRoaXMubWluRGlzdGFuY2Upe3RoaXMubWluRGlzdGFuY2U9YTt2YXIgcD1uZXcgc2UoaVtvXSxpW28rMV0pLGc9bmV3IHNlKGZbZF0sZltkKzFdKSx2PXAuY2xvc2VzdFBvaW50cyhnKTtoWzBdPW5ldyBNZShsLG8sdlswXSksaFsxXT1uZXcgTWUoYyxkLHZbMV0pfWlmKHRoaXMubWluRGlzdGFuY2U8PXRoaXMudGVybWluYXRlRGlzdGFuY2UpcmV0dXJuIG51bGx9fX0sY29tcHV0ZU1pbkRpc3RhbmNlUG9pbnRzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuc2l6ZSgpO2krKylmb3IodmFyIHI9dC5nZXQoaSksbz0wO288ZS5zaXplKCk7bysrKXt2YXIgYT1lLmdldChvKSxzPXIuZ2V0Q29vcmRpbmF0ZSgpLmRpc3RhbmNlKGEuZ2V0Q29vcmRpbmF0ZSgpKTtpZihzPHRoaXMubWluRGlzdGFuY2UmJih0aGlzLm1pbkRpc3RhbmNlPXMsblswXT1uZXcgTWUociwwLHIuZ2V0Q29vcmRpbmF0ZSgpKSxuWzFdPW5ldyBNZShhLDAsYS5nZXRDb29yZGluYXRlKCkpKSx0aGlzLm1pbkRpc3RhbmNlPD10aGlzLnRlcm1pbmF0ZURpc3RhbmNlKXJldHVybiBudWxsfX0sZGlzdGFuY2U6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5nZW9tWzBdfHxudWxsPT09dGhpcy5nZW9tWzFdKXRocm93IG5ldyBuKFwibnVsbCBnZW9tZXRyaWVzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO3JldHVybiB0aGlzLmdlb21bMF0uaXNFbXB0eSgpfHx0aGlzLmdlb21bMV0uaXNFbXB0eSgpPzA6KHRoaXMuY29tcHV0ZU1pbkRpc3RhbmNlKCksdGhpcy5taW5EaXN0YW5jZSl9LGNvbXB1dGVNaW5EaXN0YW5jZUxpbmVzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuc2l6ZSgpO2krKylmb3IodmFyIHI9dC5nZXQoaSksbz0wO288ZS5zaXplKCk7bysrKXt2YXIgYT1lLmdldChvKTtpZih0aGlzLmNvbXB1dGVNaW5EaXN0YW5jZShyLGEsbiksdGhpcy5taW5EaXN0YW5jZTw9dGhpcy50ZXJtaW5hdGVEaXN0YW5jZSlyZXR1cm4gbnVsbH19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFRlfX0pLFRlLmRpc3RhbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBUZSh0LGUpLmRpc3RhbmNlKCl9LFRlLmlzV2l0aGluRGlzdGFuY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgVGUodCxlLG4pLmRpc3RhbmNlKCk8PW59LFRlLm5lYXJlc3RQb2ludHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFRlKHQsZSkubmVhcmVzdFBvaW50cygpfTt2YXIgS3I9T2JqZWN0LmZyZWV6ZSh7RGlzdGFuY2VPcDpUZX0pLFFyPU9iamVjdC5mcmVlemUoe2Rpc3RhbmNlOktyfSk7VHIoUGUucHJvdG90eXBlLHttYXA6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBfLG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dGhpcy5tYXBPcC5tYXAodC5nZXRHZW9tZXRyeU4obikpO2kuaXNFbXB0eSgpfHxlLmFkZChpKX1yZXR1cm4gdC5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKCR0LnRvR2VvbWV0cnlBcnJheShlKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFBlfX0pLFBlLm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgUGUoZSkubWFwKHQpfSxUcihBZS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEFlfX0pLEFlLm9wcG9zaXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09QWUuTEVGVD9BZS5SSUdIVDp0PT09QWUuUklHSFQ/QWUuTEVGVDp0fSxBZS5PTj0wLEFlLkxFRlQ9MSxBZS5SSUdIVD0yLFByKExlLHUpLFRyKExlLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBMZX19KSxMZS5tc2dXaXRoQ29vcmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9PWU/dCtcIiBbIFwiK2UrXCIgXVwiOnR9LFRyKE5lLnByb3RvdHlwZSx7c2V0QWxsTG9jYXRpb25zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhdGlvbi5sZW5ndGg7ZSsrKXRoaXMubG9jYXRpb25bZV09dH0saXNOdWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmxvY2F0aW9uLmxlbmd0aDt0KyspaWYodGhpcy5sb2NhdGlvblt0XSE9PVMuTk9ORSlyZXR1cm4hMTtyZXR1cm4hMH0sc2V0QWxsTG9jYXRpb25zSWZOdWxsOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhdGlvbi5sZW5ndGg7ZSsrKXRoaXMubG9jYXRpb25bZV09PT1TLk5PTkUmJih0aGlzLmxvY2F0aW9uW2VdPXQpfSxpc0xpbmU6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubG9jYXRpb24ubGVuZ3RofSxtZXJnZTpmdW5jdGlvbih0KXtpZih0LmxvY2F0aW9uLmxlbmd0aD50aGlzLmxvY2F0aW9uLmxlbmd0aCl7dmFyIGU9bmV3IEFycmF5KDMpLmZpbGwobnVsbCk7ZVtBZS5PTl09dGhpcy5sb2NhdGlvbltBZS5PTl0sZVtBZS5MRUZUXT1TLk5PTkUsZVtBZS5SSUdIVF09Uy5OT05FLHRoaXMubG9jYXRpb249ZX1mb3IodmFyIG49MDtuPHRoaXMubG9jYXRpb24ubGVuZ3RoO24rKyl0aGlzLmxvY2F0aW9uW25dPT09Uy5OT05FJiZuPHQubG9jYXRpb24ubGVuZ3RoJiYodGhpcy5sb2NhdGlvbltuXT10LmxvY2F0aW9uW25dKX0sZ2V0TG9jYXRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYXRpb259LGZsaXA6ZnVuY3Rpb24oKXtpZih0aGlzLmxvY2F0aW9uLmxlbmd0aDw9MSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLmxvY2F0aW9uW0FlLkxFRlRdO3RoaXMubG9jYXRpb25bQWUuTEVGVF09dGhpcy5sb2NhdGlvbltBZS5SSUdIVF0sdGhpcy5sb2NhdGlvbltBZS5SSUdIVF09dH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQztyZXR1cm4gdGhpcy5sb2NhdGlvbi5sZW5ndGg+MSYmdC5hcHBlbmQoUy50b0xvY2F0aW9uU3ltYm9sKHRoaXMubG9jYXRpb25bQWUuTEVGVF0pKSx0LmFwcGVuZChTLnRvTG9jYXRpb25TeW1ib2wodGhpcy5sb2NhdGlvbltBZS5PTl0pKSx0aGlzLmxvY2F0aW9uLmxlbmd0aD4xJiZ0LmFwcGVuZChTLnRvTG9jYXRpb25TeW1ib2wodGhpcy5sb2NhdGlvbltBZS5SSUdIVF0pKSx0LnRvU3RyaW5nKCl9LHNldExvY2F0aW9uczpmdW5jdGlvbih0LGUsbil7dGhpcy5sb2NhdGlvbltBZS5PTl09dCx0aGlzLmxvY2F0aW9uW0FlLkxFRlRdPWUsdGhpcy5sb2NhdGlvbltBZS5SSUdIVF09bn0sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0PHRoaXMubG9jYXRpb24ubGVuZ3RoP3RoaXMubG9jYXRpb25bdF06Uy5OT05FfSxpc0FyZWE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhdGlvbi5sZW5ndGg+MX0saXNBbnlOdWxsOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmxvY2F0aW9uLmxlbmd0aDt0KyspaWYodGhpcy5sb2NhdGlvblt0XT09PVMuTk9ORSlyZXR1cm4hMDtyZXR1cm4hMX0sc2V0TG9jYXRpb246ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMuc2V0TG9jYXRpb24oQWUuT04sdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMubG9jYXRpb25bZV09bn19LGluaXQ6ZnVuY3Rpb24odCl7dGhpcy5sb2NhdGlvbj1uZXcgQXJyYXkodCkuZmlsbChudWxsKSx0aGlzLnNldEFsbExvY2F0aW9ucyhTLk5PTkUpfSxpc0VxdWFsT25TaWRlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubG9jYXRpb25bZV09PT10LmxvY2F0aW9uW2VdfSxhbGxQb3NpdGlvbnNFcXVhbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubG9jYXRpb24ubGVuZ3RoO2UrKylpZih0aGlzLmxvY2F0aW9uW2VdIT09dClyZXR1cm4hMTtyZXR1cm4hMH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTmV9fSksVHIoa2UucHJvdG90eXBlLHtnZXRHZW9tZXRyeUNvdW50OmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5lbHRbMF0uaXNOdWxsKCl8fHQrKyx0aGlzLmVsdFsxXS5pc051bGwoKXx8dCsrLHR9LHNldEFsbExvY2F0aW9uczpmdW5jdGlvbih0LGUpe3RoaXMuZWx0W3RdLnNldEFsbExvY2F0aW9ucyhlKX0saXNOdWxsOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVsdFt0XS5pc051bGwoKX0sc2V0QWxsTG9jYXRpb25zSWZOdWxsOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLnNldEFsbExvY2F0aW9uc0lmTnVsbCgwLHQpLHRoaXMuc2V0QWxsTG9jYXRpb25zSWZOdWxsKDEsdCl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3RoaXMuZWx0W2VdLnNldEFsbExvY2F0aW9uc0lmTnVsbChuKX19LGlzTGluZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbHRbdF0uaXNMaW5lKCl9LG1lcmdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8MjtlKyspbnVsbD09PXRoaXMuZWx0W2VdJiZudWxsIT09dC5lbHRbZV0/dGhpcy5lbHRbZV09bmV3IE5lKHQuZWx0W2VdKTp0aGlzLmVsdFtlXS5tZXJnZSh0LmVsdFtlXSl9LGZsaXA6ZnVuY3Rpb24oKXt0aGlzLmVsdFswXS5mbGlwKCksdGhpcy5lbHRbMV0uZmxpcCgpfSxnZXRMb2NhdGlvbjpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZWx0W3RdLmdldChBZS5PTil9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5lbHRbZV0uZ2V0KG4pfX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQztyZXR1cm4gbnVsbCE9PXRoaXMuZWx0WzBdJiYodC5hcHBlbmQoXCJBOlwiKSx0LmFwcGVuZCh0aGlzLmVsdFswXS50b1N0cmluZygpKSksbnVsbCE9PXRoaXMuZWx0WzFdJiYodC5hcHBlbmQoXCIgQjpcIiksdC5hcHBlbmQodGhpcy5lbHRbMV0udG9TdHJpbmcoKSkpLHQudG9TdHJpbmcoKX0saXNBcmVhOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuZWx0WzBdLmlzQXJlYSgpfHx0aGlzLmVsdFsxXS5pc0FyZWEoKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmVsdFt0XS5pc0FyZWEoKX19LGlzQW55TnVsbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbHRbdF0uaXNBbnlOdWxsKCl9LHNldExvY2F0aW9uOmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTt0aGlzLmVsdFt0XS5zZXRMb2NhdGlvbihBZS5PTixlKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl07dGhpcy5lbHRbbl0uc2V0TG9jYXRpb24oaSxyKX19LGlzRXF1YWxPblNpZGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbHRbMF0uaXNFcXVhbE9uU2lkZSh0LmVsdFswXSxlKSYmdGhpcy5lbHRbMV0uaXNFcXVhbE9uU2lkZSh0LmVsdFsxXSxlKX0sYWxsUG9zaXRpb25zRXF1YWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbHRbdF0uYWxsUG9zaXRpb25zRXF1YWwoZSl9LHRvTGluZTpmdW5jdGlvbih0KXt0aGlzLmVsdFt0XS5pc0FyZWEoKSYmKHRoaXMuZWx0W3RdPW5ldyBOZSh0aGlzLmVsdFt0XS5sb2NhdGlvblswXSkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBrZX19KSxrZS50b0xpbmVMYWJlbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IGtlKFMuTk9ORSksbj0wO248MjtuKyspZS5zZXRMb2NhdGlvbihuLHQuZ2V0TG9jYXRpb24obikpO3JldHVybiBlfSxUcihSZS5wcm90b3R5cGUse2NvbXB1dGVSaW5nOmZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMucmluZylyZXR1cm4gbnVsbDtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMucHRzLnNpemUoKSkuZmlsbChudWxsKSxlPTA7ZTx0aGlzLnB0cy5zaXplKCk7ZSsrKXRbZV09dGhpcy5wdHMuZ2V0KGUpO3RoaXMucmluZz10aGlzLmdlb21ldHJ5RmFjdG9yeS5jcmVhdGVMaW5lYXJSaW5nKHQpLHRoaXMuX2lzSG9sZT1hZS5pc0NDVyh0aGlzLnJpbmcuZ2V0Q29vcmRpbmF0ZXMoKSl9LGlzSXNvbGF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpfSxjb21wdXRlUG9pbnRzOmZ1bmN0aW9uKHQpe3RoaXMuc3RhcnREZT10O3ZhciBlPXQsbj0hMDtkb3tpZihudWxsPT09ZSl0aHJvdyBuZXcgTGUoXCJGb3VuZCBudWxsIERpcmVjdGVkRWRnZVwiKTtpZihlLmdldEVkZ2VSaW5nKCk9PT10aGlzKXRocm93IG5ldyBMZShcIkRpcmVjdGVkIEVkZ2UgdmlzaXRlZCB0d2ljZSBkdXJpbmcgcmluZy1idWlsZGluZyBhdCBcIitlLmdldENvb3JkaW5hdGUoKSk7dGhpcy5lZGdlcy5hZGQoZSk7dmFyIGk9ZS5nZXRMYWJlbCgpO2MuaXNUcnVlKGkuaXNBcmVhKCkpLHRoaXMubWVyZ2VMYWJlbChpKSx0aGlzLmFkZFBvaW50cyhlLmdldEVkZ2UoKSxlLmlzRm9yd2FyZCgpLG4pLG49ITEsdGhpcy5zZXRFZGdlUmluZyhlLHRoaXMpLGU9dGhpcy5nZXROZXh0KGUpfXdoaWxlKGUhPT10aGlzLnN0YXJ0RGUpfSxnZXRMaW5lYXJSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmluZ30sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wdHMuZ2V0KHQpfSxjb21wdXRlTWF4Tm9kZURlZ3JlZTpmdW5jdGlvbigpe3RoaXMubWF4Tm9kZURlZ3JlZT0wO3ZhciB0PXRoaXMuc3RhcnREZTtkb3t2YXIgZT10LmdldE5vZGUoKSxuPWUuZ2V0RWRnZXMoKS5nZXRPdXRnb2luZ0RlZ3JlZSh0aGlzKTtuPnRoaXMubWF4Tm9kZURlZ3JlZSYmKHRoaXMubWF4Tm9kZURlZ3JlZT1uKSx0PXRoaXMuZ2V0TmV4dCh0KX13aGlsZSh0IT09dGhpcy5zdGFydERlKTt0aGlzLm1heE5vZGVEZWdyZWUqPTJ9LGFkZFBvaW50czpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRDb29yZGluYXRlcygpO2lmKGUpe3ZhciByPTE7biYmKHI9MCk7Zm9yKHZhciBvPXI7bzxpLmxlbmd0aDtvKyspdGhpcy5wdHMuYWRkKGlbb10pfWVsc2V7dmFyIHI9aS5sZW5ndGgtMjtuJiYocj1pLmxlbmd0aC0xKTtmb3IodmFyIG89cjtvPj0wO28tLSl0aGlzLnB0cy5hZGQoaVtvXSl9fSxpc0hvbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNIb2xlfSxzZXRJblJlc3VsdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RhcnREZTtkbyB0LmdldEVkZ2UoKS5zZXRJblJlc3VsdCghMCksdD10LmdldE5leHQoKTt3aGlsZSh0IT09dGhpcy5zdGFydERlKX0sY29udGFpbnNQb2ludDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldExpbmVhclJpbmcoKTtpZighZS5nZXRFbnZlbG9wZUludGVybmFsKCkuY29udGFpbnModCkpcmV0dXJuITE7aWYoIWFlLmlzUG9pbnRJblJpbmcodCxlLmdldENvb3JkaW5hdGVzKCkpKXJldHVybiExO2Zvcih2YXIgbj10aGlzLmhvbGVzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KWlmKG4ubmV4dCgpLmNvbnRhaW5zUG9pbnQodCkpcmV0dXJuITE7cmV0dXJuITB9LGFkZEhvbGU6ZnVuY3Rpb24odCl7dGhpcy5ob2xlcy5hZGQodCl9LGlzU2hlbGw6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuc2hlbGx9LGdldExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWx9LGdldEVkZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXN9LGdldE1heE5vZGVEZWdyZWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhOb2RlRGVncmVlPDAmJnRoaXMuY29tcHV0ZU1heE5vZGVEZWdyZWUoKSx0aGlzLm1heE5vZGVEZWdyZWV9LGdldFNoZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hlbGx9LG1lcmdlTGFiZWw6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubWVyZ2VMYWJlbCh0LDApLHRoaXMubWVyZ2VMYWJlbCh0LDEpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWUuZ2V0TG9jYXRpb24obixBZS5SSUdIVCk7aWYoaT09PVMuTk9ORSlyZXR1cm4gbnVsbDtpZih0aGlzLmxhYmVsLmdldExvY2F0aW9uKG4pPT09Uy5OT05FKXJldHVybiB0aGlzLmxhYmVsLnNldExvY2F0aW9uKG4saSksbnVsbH19LHNldFNoZWxsOmZ1bmN0aW9uKHQpe3RoaXMuc2hlbGw9dCxudWxsIT09dCYmdC5hZGRIb2xlKHRoaXMpfSx0b1BvbHlnb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLmhvbGVzLnNpemUoKSkuZmlsbChudWxsKSxuPTA7bjx0aGlzLmhvbGVzLnNpemUoKTtuKyspZVtuXT10aGlzLmhvbGVzLmdldChuKS5nZXRMaW5lYXJSaW5nKCk7cmV0dXJuIHQuY3JlYXRlUG9seWdvbih0aGlzLmdldExpbmVhclJpbmcoKSxlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUmV9fSksUHIoRGUsUmUpLFRyKERlLnByb3RvdHlwZSx7c2V0RWRnZVJpbmc6ZnVuY3Rpb24odCxlKXt0LnNldE1pbkVkZ2VSaW5nKGUpfSxnZXROZXh0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldE5leHRNaW4oKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRGV9fSksUHIoRmUsUmUpLFRyKEZlLnByb3RvdHlwZSx7YnVpbGRNaW5pbWFsUmluZ3M6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgXyxlPXRoaXMuc3RhcnREZTtkb3tpZihudWxsPT09ZS5nZXRNaW5FZGdlUmluZygpKXt2YXIgbj1uZXcgRGUoZSx0aGlzLmdlb21ldHJ5RmFjdG9yeSk7dC5hZGQobil9ZT1lLmdldE5leHQoKX13aGlsZShlIT09dGhpcy5zdGFydERlKTtyZXR1cm4gdH0sc2V0RWRnZVJpbmc6ZnVuY3Rpb24odCxlKXt0LnNldEVkZ2VSaW5nKGUpfSxsaW5rRGlyZWN0ZWRFZGdlc0Zvck1pbmltYWxFZGdlUmluZ3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0YXJ0RGU7ZG8gdC5nZXROb2RlKCkuZ2V0RWRnZXMoKS5saW5rTWluaW1hbERpcmVjdGVkRWRnZXModGhpcyksdD10LmdldE5leHQoKTt3aGlsZSh0IT09dGhpcy5zdGFydERlKX0sZ2V0TmV4dDpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXROZXh0KCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEZlfX0pLFRyKEJlLnByb3RvdHlwZSx7bG9jYXRlOmZ1bmN0aW9uKHQpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQmV9fSksVHIoamUucHJvdG90eXBlLHtsb2NhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIGplLmxvY2F0ZSh0LHRoaXMuZ2VvbSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0JlXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gamV9fSksamUuaXNQb2ludEluUmluZz1mdW5jdGlvbih0LGUpe3JldHVybiEhZS5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyh0KSYmYWUuaXNQb2ludEluUmluZyh0LGUuZ2V0Q29vcmRpbmF0ZXMoKSl9LGplLmNvbnRhaW5zUG9pbnRJblBvbHlnb249ZnVuY3Rpb24odCxlKXtpZihlLmlzRW1wdHkoKSlyZXR1cm4hMTt2YXIgbj1lLmdldEV4dGVyaW9yUmluZygpO2lmKCFqZS5pc1BvaW50SW5SaW5nKHQsbikpcmV0dXJuITE7Zm9yKHZhciBpPTA7aTxlLmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIHI9ZS5nZXRJbnRlcmlvclJpbmdOKGkpO2lmKGplLmlzUG9pbnRJblJpbmcodCxyKSlyZXR1cm4hMX1yZXR1cm4hMH0samUuY29udGFpbnNQb2ludD1mdW5jdGlvbih0LGUpe2lmKGUgaW5zdGFuY2VvZiBNdClyZXR1cm4gamUuY29udGFpbnNQb2ludEluUG9seWdvbih0LGUpO2lmKGUgaW5zdGFuY2VvZiBsdClmb3IodmFyIG49bmV3IHdlKGUpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aWYoaSE9PWUmJmplLmNvbnRhaW5zUG9pbnQodCxpKSlyZXR1cm4hMH1yZXR1cm4hMX0samUubG9jYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuaXNFbXB0eSgpP1MuRVhURVJJT1I6amUuY29udGFpbnNQb2ludCh0LGUpP1MuSU5URVJJT1I6Uy5FWFRFUklPUn0sVHIoVWUucHJvdG90eXBlLHtnZXROZXh0Q1c6ZnVuY3Rpb24odCl7dGhpcy5nZXRFZGdlcygpO3ZhciBlPXRoaXMuZWRnZUxpc3QuaW5kZXhPZih0KSxuPWUtMTtyZXR1cm4gMD09PWUmJihuPXRoaXMuZWRnZUxpc3Quc2l6ZSgpLTEpLHRoaXMuZWRnZUxpc3QuZ2V0KG4pfSxwcm9wYWdhdGVTaWRlTGFiZWxzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1TLk5PTkUsbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKTtyLmlzQXJlYSh0KSYmci5nZXRMb2NhdGlvbih0LEFlLkxFRlQpIT09Uy5OT05FJiYoZT1yLmdldExvY2F0aW9uKHQsQWUuTEVGVCkpfWlmKGU9PT1TLk5PTkUpcmV0dXJuIG51bGw7Zm9yKHZhciBvPWUsbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKTtpZihyLmdldExvY2F0aW9uKHQsQWUuT04pPT09Uy5OT05FJiZyLnNldExvY2F0aW9uKHQsQWUuT04sbyksci5pc0FyZWEodCkpe3ZhciBhPXIuZ2V0TG9jYXRpb24odCxBZS5MRUZUKSxzPXIuZ2V0TG9jYXRpb24odCxBZS5SSUdIVCk7aWYocyE9PVMuTk9ORSl7aWYocyE9PW8pdGhyb3cgbmV3IExlKFwic2lkZSBsb2NhdGlvbiBjb25mbGljdFwiLGkuZ2V0Q29vcmRpbmF0ZSgpKTthPT09Uy5OT05FJiZjLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiZm91bmQgc2luZ2xlIG51bGwgc2lkZSAoYXQgXCIraS5nZXRDb29yZGluYXRlKCkrXCIpXCIpLG89YX1lbHNlIGMuaXNUcnVlKHIuZ2V0TG9jYXRpb24odCxBZS5MRUZUKT09PVMuTk9ORSxcImZvdW5kIHNpbmdsZSBudWxsIHNpZGVcIiksci5zZXRMb2NhdGlvbih0LEFlLlJJR0hULG8pLHIuc2V0TG9jYXRpb24odCxBZS5MRUZULG8pfX19LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLml0ZXJhdG9yKCk7cmV0dXJuIHQuaGFzTmV4dCgpP3QubmV4dCgpLmdldENvb3JkaW5hdGUoKTpudWxsfSxwcmludDpmdW5jdGlvbih0KXtMLm91dC5wcmludGxuKFwiRWRnZUVuZFN0YXI6ICAgXCIrdGhpcy5nZXRDb29yZGluYXRlKCkpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWUubmV4dCgpLnByaW50KHQpfSxpc0FyZWFMYWJlbHNDb25zaXN0ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXB1dGVFZGdlRW5kTGFiZWxzKHQuZ2V0Qm91bmRhcnlOb2RlUnVsZSgpKSx0aGlzLmNoZWNrQXJlYUxhYmVsc0NvbnNpc3RlbnQoMCl9LGNoZWNrQXJlYUxhYmVsc0NvbnNpc3RlbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRFZGdlcygpO2lmKGUuc2l6ZSgpPD0wKXJldHVybiEwO3ZhciBuPWUuc2l6ZSgpLTEsaT1lLmdldChuKS5nZXRMYWJlbCgpLHI9aS5nZXRMb2NhdGlvbih0LEFlLkxFRlQpO2MuaXNUcnVlKHIhPT1TLk5PTkUsXCJGb3VuZCB1bmxhYmVsbGVkIGFyZWEgZWRnZVwiKTtmb3IodmFyIG89cixhPXRoaXMuaXRlcmF0b3IoKTthLmhhc05leHQoKTspe3ZhciBzPWEubmV4dCgpLHU9cy5nZXRMYWJlbCgpO2MuaXNUcnVlKHUuaXNBcmVhKHQpLFwiRm91bmQgbm9uLWFyZWEgZWRnZVwiKTt2YXIgbD11LmdldExvY2F0aW9uKHQsQWUuTEVGVCksaD11LmdldExvY2F0aW9uKHQsQWUuUklHSFQpO2lmKGw9PT1oKXJldHVybiExO2lmKGghPT1vKXJldHVybiExO289bH1yZXR1cm4hMH0sZmluZEluZGV4OmZ1bmN0aW9uKHQpe3RoaXMuaXRlcmF0b3IoKTtmb3IodmFyIGU9MDtlPHRoaXMuZWRnZUxpc3Quc2l6ZSgpO2UrKylpZih0aGlzLmVkZ2VMaXN0LmdldChlKT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0RWRnZXMoKS5pdGVyYXRvcigpfSxnZXRFZGdlczpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5lZGdlTGlzdCYmKHRoaXMuZWRnZUxpc3Q9bmV3IF8odGhpcy5lZGdlTWFwLnZhbHVlcygpKSksdGhpcy5lZGdlTGlzdH0sZ2V0TG9jYXRpb246ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnB0SW5BcmVhTG9jYXRpb25bdF09PT1TLk5PTkUmJih0aGlzLnB0SW5BcmVhTG9jYXRpb25bdF09amUubG9jYXRlKGUsblt0XS5nZXRHZW9tZXRyeSgpKSksdGhpcy5wdEluQXJlYUxvY2F0aW9uW3RdfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PW5ldyBDO3QuYXBwZW5kKFwiRWRnZUVuZFN0YXI6ICAgXCIrdGhpcy5nZXRDb29yZGluYXRlKCkpLHQuYXBwZW5kKFwiXFxuXCIpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0LmFwcGVuZChuKSx0LmFwcGVuZChcIlxcblwiKX1yZXR1cm4gdC50b1N0cmluZygpfSxjb21wdXRlRWRnZUVuZExhYmVsczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyllLm5leHQoKS5jb21wdXRlTGFiZWwodCl9LGNvbXB1dGVMYWJlbGxpbmc6ZnVuY3Rpb24odCl7dGhpcy5jb21wdXRlRWRnZUVuZExhYmVscyh0WzBdLmdldEJvdW5kYXJ5Tm9kZVJ1bGUoKSksdGhpcy5wcm9wYWdhdGVTaWRlTGFiZWxzKDApLHRoaXMucHJvcGFnYXRlU2lkZUxhYmVscygxKTtmb3IodmFyIGU9WyExLCExXSxuPXRoaXMuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspZm9yKHZhciBpPW4ubmV4dCgpLHI9aS5nZXRMYWJlbCgpLG89MDtvPDI7bysrKXIuaXNMaW5lKG8pJiZyLmdldExvY2F0aW9uKG8pPT09Uy5CT1VOREFSWSYmKGVbb109ITApO2Zvcih2YXIgbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KWZvcih2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKSxvPTA7bzwyO28rKylpZihyLmlzQW55TnVsbChvKSl7dmFyIGE9Uy5OT05FO2lmKGVbb10pYT1TLkVYVEVSSU9SO2Vsc2V7dmFyIHM9aS5nZXRDb29yZGluYXRlKCk7YT10aGlzLmdldExvY2F0aW9uKG8scyx0KX1yLnNldEFsbExvY2F0aW9uc0lmTnVsbChvLGEpfX0sZ2V0RGVncmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZU1hcC5zaXplKCl9LGluc2VydEVkZ2VFbmQ6ZnVuY3Rpb24odCxlKXt0aGlzLmVkZ2VNYXAucHV0KHQsZSksdGhpcy5lZGdlTGlzdD1udWxsfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBVZX19KSxUcih6ZS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHplfX0pLHplLmlzTm9ydGhlcm49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT16ZS5ORXx8dD09PXplLk5XfSx6ZS5pc09wcG9zaXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQhPT1lJiYyPT0odC1lKzQpJTR9LHplLmNvbW1vbkhhbGZQbGFuZT1mdW5jdGlvbih0LGUpe2lmKHQ9PT1lKXJldHVybiB0O2lmKDI9PSh0LWUrNCklNClyZXR1cm4tMTt2YXIgbj10PGU/dDplLGk9dD5lP3Q6ZTtyZXR1cm4gMD09PW4mJjM9PT1pPzM6bn0semUuaXNJbkhhbGZQbGFuZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPT09emUuU0U/dD09PXplLlNFfHx0PT09emUuU1c6dD09PWV8fHQ9PT1lKzF9LHplLnF1YWRyYW50PWZ1bmN0aW9uKCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2lmKDA9PT10JiYwPT09ZSl0aHJvdyBuZXcgbihcIkNhbm5vdCBjb21wdXRlIHRoZSBxdWFkcmFudCBmb3IgcG9pbnQgKCBcIit0K1wiLCBcIitlK1wiIClcIik7cmV0dXJuIHQ+PTA/ZT49MD96ZS5ORTp6ZS5TRTplPj0wP3plLk5XOnplLlNXfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07aWYoci54PT09aS54JiZyLnk9PT1pLnkpdGhyb3cgbmV3IG4oXCJDYW5ub3QgY29tcHV0ZSB0aGUgcXVhZHJhbnQgZm9yIHR3byBpZGVudGljYWwgcG9pbnRzIFwiK2kpO3JldHVybiByLng+PWkueD9yLnk+PWkueT96ZS5ORTp6ZS5TRTpyLnk+PWkueT96ZS5OVzp6ZS5TV319LHplLk5FPTAsemUuTlc9MSx6ZS5TVz0yLHplLlNFPTMsUHIoR2UsVWUpLFRyKEdlLnByb3RvdHlwZSx7bGlua1Jlc3VsdERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24oKXt0aGlzLmdldFJlc3VsdEFyZWFFZGdlcygpO2Zvcih2YXIgdD1udWxsLGU9bnVsbCxuPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HLGk9MDtpPHRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LnNpemUoKTtpKyspe3ZhciByPXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LmdldChpKSxvPXIuZ2V0U3ltKCk7aWYoci5nZXRMYWJlbCgpLmlzQXJlYSgpKXN3aXRjaChudWxsPT09dCYmci5pc0luUmVzdWx0KCkmJih0PXIpLG4pe2Nhc2UgdGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkc6aWYoIW8uaXNJblJlc3VsdCgpKWNvbnRpbnVlO2U9byxuPXRoaXMuTElOS0lOR19UT19PVVRHT0lORzticmVhaztjYXNlIHRoaXMuTElOS0lOR19UT19PVVRHT0lORzppZighci5pc0luUmVzdWx0KCkpY29udGludWU7ZS5zZXROZXh0KHIpLG49dGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkd9fWlmKG49PT10aGlzLkxJTktJTkdfVE9fT1VUR09JTkcpe2lmKG51bGw9PT10KXRocm93IG5ldyBMZShcIm5vIG91dGdvaW5nIGRpckVkZ2UgZm91bmRcIix0aGlzLmdldENvb3JkaW5hdGUoKSk7Yy5pc1RydWUodC5pc0luUmVzdWx0KCksXCJ1bmFibGUgdG8gbGluayBsYXN0IGluY29taW5nIGRpckVkZ2VcIiksZS5zZXROZXh0KHQpfX0saW5zZXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXQ7dGhpcy5pbnNlcnRFZGdlRW5kKGUsZSl9LGdldFJpZ2h0bW9zdEVkZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEVkZ2VzKCksZT10LnNpemUoKTtpZihlPDEpcmV0dXJuIG51bGw7dmFyIG49dC5nZXQoMCk7aWYoMT09PWUpcmV0dXJuIG47dmFyIGk9dC5nZXQoZS0xKSxyPW4uZ2V0UXVhZHJhbnQoKSxvPWkuZ2V0UXVhZHJhbnQoKTtyZXR1cm4gemUuaXNOb3J0aGVybihyKSYmemUuaXNOb3J0aGVybihvKT9uOnplLmlzTm9ydGhlcm4ocil8fHplLmlzTm9ydGhlcm4obyk/MCE9PW4uZ2V0RHkoKT9uOjAhPT1pLmdldER5KCk/aTooYy5zaG91bGROZXZlclJlYWNoSGVyZShcImZvdW5kIHR3byBob3Jpem9udGFsIGVkZ2VzIGluY2lkZW50IG9uIG5vZGVcIiksbnVsbCk6aX0scHJpbnQ6ZnVuY3Rpb24odCl7TC5vdXQucHJpbnRsbihcIkRpcmVjdGVkRWRnZVN0YXI6IFwiK3RoaXMuZ2V0Q29vcmRpbmF0ZSgpKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dC5wcmludChcIm91dCBcIiksbi5wcmludCh0KSx0LnByaW50bG4oKSx0LnByaW50KFwiaW4gXCIpLG4uZ2V0U3ltKCkucHJpbnQodCksdC5wcmludGxuKCl9fSxnZXRSZXN1bHRBcmVhRWRnZXM6ZnVuY3Rpb24oKXtpZihudWxsIT09dGhpcy5yZXN1bHRBcmVhRWRnZUxpc3QpcmV0dXJuIHRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0O3RoaXMucmVzdWx0QXJlYUVkZ2VMaXN0PW5ldyBfO2Zvcih2YXIgdD10aGlzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTsoZS5pc0luUmVzdWx0KCl8fGUuZ2V0U3ltKCkuaXNJblJlc3VsdCgpKSYmdGhpcy5yZXN1bHRBcmVhRWRnZUxpc3QuYWRkKGUpfXJldHVybiB0aGlzLnJlc3VsdEFyZWFFZGdlTGlzdH0sdXBkYXRlTGFiZWxsaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKTtpLnNldEFsbExvY2F0aW9uc0lmTnVsbCgwLHQuZ2V0TG9jYXRpb24oMCkpLGkuc2V0QWxsTG9jYXRpb25zSWZOdWxsKDEsdC5nZXRMb2NhdGlvbigxKSl9fSxsaW5rQWxsRGlyZWN0ZWRFZGdlczpmdW5jdGlvbigpe3RoaXMuZ2V0RWRnZXMoKTtmb3IodmFyIHQ9bnVsbCxlPW51bGwsbj10aGlzLmVkZ2VMaXN0LnNpemUoKS0xO24+PTA7bi0tKXt2YXIgaT10aGlzLmVkZ2VMaXN0LmdldChuKSxyPWkuZ2V0U3ltKCk7bnVsbD09PWUmJihlPXIpLG51bGwhPT10JiZyLnNldE5leHQodCksdD1pfWUuc2V0TmV4dCh0KX0sY29tcHV0ZURlcHRoczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLmZpbmRJbmRleCh0KSxuPSh0LmdldExhYmVsKCksdC5nZXREZXB0aChBZS5MRUZUKSksaT10LmdldERlcHRoKEFlLlJJR0hUKSxyPXRoaXMuY29tcHV0ZURlcHRocyhlKzEsdGhpcy5lZGdlTGlzdC5zaXplKCksbik7aWYodGhpcy5jb21wdXRlRGVwdGhzKDAsZSxyKSE9PWkpdGhyb3cgbmV3IExlKFwiZGVwdGggbWlzbWF0Y2ggYXQgXCIrdC5nZXRDb29yZGluYXRlKCkpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgbz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sdT1zLGw9bztsPGE7bCsrKXt2YXIgYz10aGlzLmVkZ2VMaXN0LmdldChsKTtjLmdldExhYmVsKCksYy5zZXRFZGdlRGVwdGhzKEFlLlJJR0hULHUpLHU9Yy5nZXREZXB0aChBZS5MRUZUKX1yZXR1cm4gdX19LG1lcmdlU3ltTGFiZWxzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpO2UuZ2V0TGFiZWwoKS5tZXJnZShlLmdldFN5bSgpLmdldExhYmVsKCkpfX0sbGlua01pbmltYWxEaXJlY3RlZEVkZ2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49bnVsbCxpPXRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HLHI9dGhpcy5yZXN1bHRBcmVhRWRnZUxpc3Quc2l6ZSgpLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMucmVzdWx0QXJlYUVkZ2VMaXN0LmdldChyKSxhPW8uZ2V0U3ltKCk7c3dpdGNoKG51bGw9PT1lJiZvLmdldEVkZ2VSaW5nKCk9PT10JiYoZT1vKSxpKXtjYXNlIHRoaXMuU0NBTk5JTkdfRk9SX0lOQ09NSU5HOmlmKGEuZ2V0RWRnZVJpbmcoKSE9PXQpY29udGludWU7bj1hLGk9dGhpcy5MSU5LSU5HX1RPX09VVEdPSU5HO2JyZWFrO2Nhc2UgdGhpcy5MSU5LSU5HX1RPX09VVEdPSU5HOmlmKG8uZ2V0RWRnZVJpbmcoKSE9PXQpY29udGludWU7bi5zZXROZXh0TWluKG8pLGk9dGhpcy5TQ0FOTklOR19GT1JfSU5DT01JTkd9fWk9PT10aGlzLkxJTktJTkdfVE9fT1VUR09JTkcmJihjLmlzVHJ1ZShudWxsIT09ZSxcImZvdW5kIG51bGwgZm9yIGZpcnN0IG91dGdvaW5nIGRpckVkZ2VcIiksYy5pc1RydWUoZS5nZXRFZGdlUmluZygpPT09dCxcInVuYWJsZSB0byBsaW5rIGxhc3QgaW5jb21pbmcgZGlyRWRnZVwiKSxuLnNldE5leHRNaW4oZSkpfSxnZXRPdXRnb2luZ0RlZ3JlZTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9MCxlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO24uaXNJblJlc3VsdCgpJiZ0Kyt9cmV0dXJuIHR9aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgaT1hcmd1bWVudHNbMF0sdD0wLGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5nZXRFZGdlUmluZygpPT09aSYmdCsrfXJldHVybiB0fX0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sZmluZENvdmVyZWRMaW5lRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9Uy5OT05FLGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT1uLmdldFN5bSgpO2lmKCFuLmlzTGluZUVkZ2UoKSl7aWYobi5pc0luUmVzdWx0KCkpe3Q9Uy5JTlRFUklPUjticmVha31pZihpLmlzSW5SZXN1bHQoKSl7dD1TLkVYVEVSSU9SO2JyZWFrfX19aWYodD09PVMuTk9ORSlyZXR1cm4gbnVsbDtmb3IodmFyIHI9dCxlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRTeW0oKTtuLmlzTGluZUVkZ2UoKT9uLmdldEVkZ2UoKS5zZXRDb3ZlcmVkKHI9PT1TLklOVEVSSU9SKToobi5pc0luUmVzdWx0KCkmJihyPVMuRVhURVJJT1IpLGkuaXNJblJlc3VsdCgpJiYocj1TLklOVEVSSU9SKSl9fSxjb21wdXRlTGFiZWxsaW5nOmZ1bmN0aW9uKHQpe1VlLnByb3RvdHlwZS5jb21wdXRlTGFiZWxsaW5nLmNhbGwodGhpcyx0KSx0aGlzLmxhYmVsPW5ldyBrZShTLk5PTkUpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPW4uZ2V0RWRnZSgpLHI9aS5nZXRMYWJlbCgpLG89MDtvPDI7bysrKXt2YXIgYT1yLmdldExvY2F0aW9uKG8pO2EhPT1TLklOVEVSSU9SJiZhIT09Uy5CT1VOREFSWXx8dGhpcy5sYWJlbC5zZXRMb2NhdGlvbihvLFMuSU5URVJJT1IpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gR2V9fSksVHIoVmUucHJvdG90eXBlLHtzZXRWaXNpdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxzZXRJblJlc3VsdDpmdW5jdGlvbih0KXt0aGlzLl9pc0luUmVzdWx0PXR9LGlzQ292ZXJlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWR9LGlzQ292ZXJlZFNldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvdmVyZWRTZXR9LHNldExhYmVsOmZ1bmN0aW9uKHQpe3RoaXMubGFiZWw9dH0sZ2V0TGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYWJlbH0sc2V0Q292ZXJlZDpmdW5jdGlvbih0KXt0aGlzLl9pc0NvdmVyZWQ9dCx0aGlzLl9pc0NvdmVyZWRTZXQ9ITB9LHVwZGF0ZUlNOmZ1bmN0aW9uKHQpe2MuaXNUcnVlKHRoaXMubGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpPj0yLFwiZm91bmQgcGFydGlhbCBsYWJlbFwiKSx0aGlzLmNvbXB1dGVJTSh0KX0saXNJblJlc3VsdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luUmVzdWx0fSxpc1Zpc2l0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpdGVkfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBWZX19KSxQcihYZSxWZSksVHIoWGUucHJvdG90eXBlLHtpc0luY2lkZW50RWRnZUluUmVzdWx0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2V0RWRnZXMoKS5nZXRFZGdlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KWlmKHQubmV4dCgpLmdldEVkZ2UoKS5pc0luUmVzdWx0KCkpcmV0dXJuITA7cmV0dXJuITF9LGlzSXNvbGF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMubGFiZWwuZ2V0R2VvbWV0cnlDb3VudCgpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmR9LHByaW50OmZ1bmN0aW9uKHQpe3QucHJpbnRsbihcIm5vZGUgXCIrdGhpcy5jb29yZCtcIiBsYmw6IFwiK3RoaXMubGFiZWwpfSxjb21wdXRlSU06ZnVuY3Rpb24odCl7fSxjb21wdXRlTWVyZ2VkTG9jYXRpb246ZnVuY3Rpb24odCxlKXt2YXIgbj1TLk5PTkU7aWYobj10aGlzLmxhYmVsLmdldExvY2F0aW9uKGUpLCF0LmlzTnVsbChlKSl7dmFyIGk9dC5nZXRMb2NhdGlvbihlKTtuIT09Uy5CT1VOREFSWSYmKG49aSl9cmV0dXJuIG59LHNldExhYmVsOmZ1bmN0aW9uKCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIFZlLnByb3RvdHlwZS5zZXRMYWJlbC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO251bGw9PT10aGlzLmxhYmVsP3RoaXMubGFiZWw9bmV3IGtlKHQsZSk6dGhpcy5sYWJlbC5zZXRMb2NhdGlvbih0LGUpfSxnZXRFZGdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzfSxtZXJnZUxhYmVsOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBYZSl7dmFyIHQ9YXJndW1lbnRzWzBdO3RoaXMubWVyZ2VMYWJlbCh0LmxhYmVsKX1lbHNlIGlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2Yga2UpZm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPTA7bjwyO24rKyl7dmFyIGk9dGhpcy5jb21wdXRlTWVyZ2VkTG9jYXRpb24oZSxuKSxyPXRoaXMubGFiZWwuZ2V0TG9jYXRpb24obik7cj09PVMuTk9ORSYmdGhpcy5sYWJlbC5zZXRMb2NhdGlvbihuLGkpfX0sYWRkOmZ1bmN0aW9uKHQpe3RoaXMuZWRnZXMuaW5zZXJ0KHQpLHQuc2V0Tm9kZSh0aGlzKX0sc2V0TGFiZWxCb3VuZGFyeTpmdW5jdGlvbih0KXtpZihudWxsPT09dGhpcy5sYWJlbClyZXR1cm4gbnVsbDt2YXIgZT1TLk5PTkU7bnVsbCE9PXRoaXMubGFiZWwmJihlPXRoaXMubGFiZWwuZ2V0TG9jYXRpb24odCkpO3ZhciBuPW51bGw7c3dpdGNoKGUpe2Nhc2UgUy5CT1VOREFSWTpuPVMuSU5URVJJT1I7YnJlYWs7Y2FzZSBTLklOVEVSSU9SOmRlZmF1bHQ6bj1TLkJPVU5EQVJZfXRoaXMubGFiZWwuc2V0TG9jYXRpb24odCxuKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWGV9fSksVHIoSGUucHJvdG90eXBlLHtjcmVhdGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWGUodCxudWxsKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSGV9fSksUHIocWUsSGUpLFRyKHFlLnByb3RvdHlwZSx7Y3JlYXRlTm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFhlKHQsbmV3IEdlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcWV9fSksVHIoWWUucHJvdG90eXBlLHtmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVNYXAuZ2V0KHQpfSxhZGROb2RlOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT10aGlzLm5vZGVNYXAuZ2V0KHQpO3JldHVybiBudWxsPT09ZSYmKGU9dGhpcy5ub2RlRmFjdC5jcmVhdGVOb2RlKHQpLHRoaXMubm9kZU1hcC5wdXQodCxlKSksZX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFhlKXt2YXIgbj1hcmd1bWVudHNbMF0sZT10aGlzLm5vZGVNYXAuZ2V0KG4uZ2V0Q29vcmRpbmF0ZSgpKTtyZXR1cm4gbnVsbD09PWU/KHRoaXMubm9kZU1hcC5wdXQobi5nZXRDb29yZGluYXRlKCksbiksbik6KGUubWVyZ2VMYWJlbChuKSxlKX19LHByaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWUubmV4dCgpLnByaW50KHQpfSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKX0sZ2V0Qm91bmRhcnlOb2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IF8sbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCk9PT1TLkJPVU5EQVJZJiZlLmFkZChpKX1yZXR1cm4gZX0sYWRkOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Q29vcmRpbmF0ZSgpO3RoaXMuYWRkTm9kZShlKS5hZGQodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFllfX0pLFRyKFdlLnByb3RvdHlwZSx7Y29tcGFyZURpcmVjdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5keD09PXQuZHgmJnRoaXMuZHk9PT10LmR5PzA6dGhpcy5xdWFkcmFudD50LnF1YWRyYW50PzE6dGhpcy5xdWFkcmFudDx0LnF1YWRyYW50Py0xOmFlLmNvbXB1dGVPcmllbnRhdGlvbih0LnAwLHQucDEsdGhpcy5wMSl9LGdldER5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHl9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wMH0sc2V0Tm9kZTpmdW5jdGlvbih0KXt0aGlzLm5vZGU9dH0scHJpbnQ6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5hdGFuMih0aGlzLmR5LHRoaXMuZHgpLG49dGhpcy5nZXRDbGFzcygpLmdldE5hbWUoKSxpPW4ubGFzdEluZGV4T2YoXCIuXCIpLHI9bi5zdWJzdHJpbmcoaSsxKTt0LnByaW50KFwiICBcIityK1wiOiBcIit0aGlzLnAwK1wiIC0gXCIrdGhpcy5wMStcIiBcIit0aGlzLnF1YWRyYW50K1wiOlwiK2UrXCIgICBcIit0aGlzLmxhYmVsKX0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuY29tcGFyZURpcmVjdGlvbihlKX0sZ2V0RGlyZWN0ZWRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucDF9LGdldER4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHh9LGdldExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFiZWx9LGdldEVkZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlfSxnZXRRdWFkcmFudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YWRyYW50fSxnZXROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD1NYXRoLmF0YW4yKHRoaXMuZHksdGhpcy5keCksZT10aGlzLmdldENsYXNzKCkuZ2V0TmFtZSgpLG49ZS5sYXN0SW5kZXhPZihcIi5cIik7cmV0dXJuXCIgIFwiK2Uuc3Vic3RyaW5nKG4rMSkrXCI6IFwiK3RoaXMucDArXCIgLSBcIit0aGlzLnAxK1wiIFwiK3RoaXMucXVhZHJhbnQrXCI6XCIrdCtcIiAgIFwiK3RoaXMubGFiZWx9LGNvbXB1dGVMYWJlbDpmdW5jdGlvbih0KXt9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLnAwPXQsdGhpcy5wMT1lLHRoaXMuZHg9ZS54LXQueCx0aGlzLmR5PWUueS10LnksdGhpcy5xdWFkcmFudD16ZS5xdWFkcmFudCh0aGlzLmR4LHRoaXMuZHkpLGMuaXNUcnVlKCEoMD09PXRoaXMuZHgmJjA9PT10aGlzLmR5KSxcIkVkZ2VFbmQgd2l0aCBpZGVudGljYWwgZW5kcG9pbnRzIGZvdW5kXCIpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gV2V9fSksUHIoWmUsV2UpLFRyKFplLnByb3RvdHlwZSx7Z2V0TmV4dE1pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHRNaW59LGdldERlcHRoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRlcHRoW3RdfSxzZXRWaXNpdGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmlzaXRlZD10fSxjb21wdXRlRGlyZWN0ZWRMYWJlbDpmdW5jdGlvbigpe3RoaXMubGFiZWw9bmV3IGtlKHRoaXMuZWRnZS5nZXRMYWJlbCgpKSx0aGlzLl9pc0ZvcndhcmR8fHRoaXMubGFiZWwuZmxpcCgpfSxnZXROZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dH0sc2V0RGVwdGg6ZnVuY3Rpb24odCxlKXtpZih0aGlzLmRlcHRoW3RdIT09LTk5OSYmdGhpcy5kZXB0aFt0XSE9PWUpdGhyb3cgbmV3IExlKFwiYXNzaWduZWQgZGVwdGhzIGRvIG5vdCBtYXRjaFwiLHRoaXMuZ2V0Q29vcmRpbmF0ZSgpKTt0aGlzLmRlcHRoW3RdPWV9LGlzSW50ZXJpb3JBcmVhRWRnZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0hMCxlPTA7ZTwyO2UrKyl0aGlzLmxhYmVsLmlzQXJlYShlKSYmdGhpcy5sYWJlbC5nZXRMb2NhdGlvbihlLEFlLkxFRlQpPT09Uy5JTlRFUklPUiYmdGhpcy5sYWJlbC5nZXRMb2NhdGlvbihlLEFlLlJJR0hUKT09PVMuSU5URVJJT1J8fCh0PSExKTtyZXR1cm4gdH0sc2V0TmV4dE1pbjpmdW5jdGlvbih0KXt0aGlzLm5leHRNaW49dH0scHJpbnQ6ZnVuY3Rpb24odCl7V2UucHJvdG90eXBlLnByaW50LmNhbGwodGhpcyx0KSx0LnByaW50KFwiIFwiK3RoaXMuZGVwdGhbQWUuTEVGVF0rXCIvXCIrdGhpcy5kZXB0aFtBZS5SSUdIVF0pLHQucHJpbnQoXCIgKFwiK3RoaXMuZ2V0RGVwdGhEZWx0YSgpK1wiKVwiKSx0aGlzLl9pc0luUmVzdWx0JiZ0LnByaW50KFwiIGluUmVzdWx0XCIpfSxzZXRNaW5FZGdlUmluZzpmdW5jdGlvbih0KXt0aGlzLm1pbkVkZ2VSaW5nPXR9LGlzTGluZUVkZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxhYmVsLmlzTGluZSgwKXx8dGhpcy5sYWJlbC5pc0xpbmUoMSksZT0hdGhpcy5sYWJlbC5pc0FyZWEoMCl8fHRoaXMubGFiZWwuYWxsUG9zaXRpb25zRXF1YWwoMCxTLkVYVEVSSU9SKSxuPSF0aGlzLmxhYmVsLmlzQXJlYSgxKXx8dGhpcy5sYWJlbC5hbGxQb3NpdGlvbnNFcXVhbCgxLFMuRVhURVJJT1IpO3JldHVybiB0JiZlJiZufSxzZXRFZGdlUmluZzpmdW5jdGlvbih0KXt0aGlzLmVkZ2VSaW5nPXR9LGdldE1pbkVkZ2VSaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluRWRnZVJpbmd9LGdldERlcHRoRGVsdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2UuZ2V0RGVwdGhEZWx0YSgpO3JldHVybiB0aGlzLl9pc0ZvcndhcmR8fCh0PS10KSx0fSxzZXRJblJlc3VsdDpmdW5jdGlvbih0KXt0aGlzLl9pc0luUmVzdWx0PXR9LGdldFN5bTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN5bX0saXNGb3J3YXJkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzRm9yd2FyZH0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2V9LHByaW50RWRnZTpmdW5jdGlvbih0KXt0aGlzLnByaW50KHQpLHQucHJpbnQoXCIgXCIpLHRoaXMuX2lzRm9yd2FyZD90aGlzLmVkZ2UucHJpbnQodCk6dGhpcy5lZGdlLnByaW50UmV2ZXJzZSh0KX0sc2V0U3ltOmZ1bmN0aW9uKHQpe3RoaXMuc3ltPXR9LHNldFZpc2l0ZWRFZGdlOmZ1bmN0aW9uKHQpe3RoaXMuc2V0VmlzaXRlZCh0KSx0aGlzLnN5bS5zZXRWaXNpdGVkKHQpfSxzZXRFZGdlRGVwdGhzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRFZGdlKCkuZ2V0RGVwdGhEZWx0YSgpO3RoaXMuX2lzRm9yd2FyZHx8KG49LW4pO3ZhciBpPTE7dD09PUFlLkxFRlQmJihpPS0xKTt2YXIgcj1BZS5vcHBvc2l0ZSh0KSxvPW4qaSxhPWUrbzt0aGlzLnNldERlcHRoKHQsZSksdGhpcy5zZXREZXB0aChyLGEpfSxnZXRFZGdlUmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VSaW5nfSxpc0luUmVzdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW5SZXN1bHR9LHNldE5leHQ6ZnVuY3Rpb24odCl7dGhpcy5uZXh0PXR9LGlzVmlzaXRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1Zpc2l0ZWR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFplfX0pLFplLmRlcHRoRmFjdG9yPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PT1TLkVYVEVSSU9SJiZlPT09Uy5JTlRFUklPUj8xOnQ9PT1TLklOVEVSSU9SJiZlPT09Uy5FWFRFUklPUj8tMTowfSxUcihKZS5wcm90b3R5cGUse3ByaW50RWRnZXM6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiRWRnZXM6XCIpO2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlcy5zaXplKCk7ZSsrKXt0LnByaW50bG4oXCJlZGdlIFwiK2UrXCI6XCIpO3ZhciBuPXRoaXMuZWRnZXMuZ2V0KGUpO24ucHJpbnQodCksbi5laUxpc3QucHJpbnQodCl9fSxmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5vZGVzLmZpbmQodCl9LGFkZE5vZGU6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFhlKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubm9kZXMuYWRkTm9kZSh0KX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5ub2Rlcy5hZGROb2RlKGUpfX0sZ2V0Tm9kZUl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXMuaXRlcmF0b3IoKX0sbGlua1Jlc3VsdERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ub2Rlcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl0Lm5leHQoKS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCl9LGRlYnVnUHJpbnRsbjpmdW5jdGlvbih0KXtMLm91dC5wcmludGxuKHQpfSxpc0JvdW5kYXJ5Tm9kZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMuZmluZChlKTtpZihudWxsPT09bilyZXR1cm4hMTt2YXIgaT1uLmdldExhYmVsKCk7cmV0dXJuIG51bGwhPT1pJiZpLmdldExvY2F0aW9uKHQpPT09Uy5CT1VOREFSWX0sbGlua0FsbERpcmVjdGVkRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ub2Rlcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl0Lm5leHQoKS5nZXRFZGdlcygpLmxpbmtBbGxEaXJlY3RlZEVkZ2VzKCl9LG1hdGNoSW5TYW1lRGlyZWN0aW9uOmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiEhdC5lcXVhbHMobikmJmFlLmNvbXB1dGVPcmllbnRhdGlvbih0LGUsaSk9PT1hZS5DT0xMSU5FQVImJnplLnF1YWRyYW50KHQsZSk9PT16ZS5xdWFkcmFudChuLGkpfSxnZXRFZGdlRW5kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VFbmRMaXN0fSxkZWJ1Z1ByaW50OmZ1bmN0aW9uKHQpe0wub3V0LnByaW50KHQpfSxnZXRFZGdlSXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlcy5pdGVyYXRvcigpfSxmaW5kRWRnZUluU2FtZURpcmVjdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy5lZGdlcy5zaXplKCk7bisrKXt2YXIgaT10aGlzLmVkZ2VzLmdldChuKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKTtpZih0aGlzLm1hdGNoSW5TYW1lRGlyZWN0aW9uKHQsZSxyWzBdLHJbMV0pKXJldHVybiBpO2lmKHRoaXMubWF0Y2hJblNhbWVEaXJlY3Rpb24odCxlLHJbci5sZW5ndGgtMV0scltyLmxlbmd0aC0yXSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGluc2VydEVkZ2U6ZnVuY3Rpb24odCl7dGhpcy5lZGdlcy5hZGQodCl9LGZpbmRFZGdlRW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO2lmKG4uZ2V0RWRnZSgpPT09dClyZXR1cm4gbn1yZXR1cm4gbnVsbH0sYWRkRWRnZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuZWRnZXMuYWRkKG4pO3ZhciBpPW5ldyBaZShuLCEwKSxyPW5ldyBaZShuLCExKTtpLnNldFN5bShyKSxyLnNldFN5bShpKSx0aGlzLmFkZChpKSx0aGlzLmFkZChyKX19LGFkZDpmdW5jdGlvbih0KXt0aGlzLm5vZGVzLmFkZCh0KSx0aGlzLmVkZ2VFbmRMaXN0LmFkZCh0KX0sZ2V0Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlcy52YWx1ZXMoKX0sZmluZEVkZ2U6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMuZWRnZXMuc2l6ZSgpO24rKyl7dmFyIGk9dGhpcy5lZGdlcy5nZXQobikscj1pLmdldENvb3JkaW5hdGVzKCk7aWYodC5lcXVhbHMoclswXSkmJmUuZXF1YWxzKHJbMV0pKXJldHVybiBpfXJldHVybiBudWxsfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBKZX19KSxKZS5saW5rUmVzdWx0RGlyZWN0ZWRFZGdlcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyllLm5leHQoKS5nZXRFZGdlcygpLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCl9LFRyKEtlLnByb3RvdHlwZSx7dmlzaXRJbnRlcmlvclJpbmc6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldENvb3JkaW5hdGVzKCksaT1uWzBdLHI9S2UuZmluZERpZmZlcmVudFBvaW50KG4saSksbz1lLmZpbmRFZGdlSW5TYW1lRGlyZWN0aW9uKGksciksYT1lLmZpbmRFZGdlRW5kKG8pLHM9bnVsbDthLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxBZS5SSUdIVCk9PT1TLklOVEVSSU9SP3M9YTphLmdldFN5bSgpLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxBZS5SSUdIVCk9PT1TLklOVEVSSU9SJiYocz1hLmdldFN5bSgpKSxjLmlzVHJ1ZShudWxsIT09cyxcInVuYWJsZSB0byBmaW5kIGRpckVkZ2Ugd2l0aCBJbnRlcmlvciBvbiBSSFNcIiksdGhpcy52aXNpdExpbmtlZERpcmVjdGVkRWRnZXMocyl9LHZpc2l0U2hlbGxJbnRlcmlvcnM6ZnVuY3Rpb24odCxlKXtpZih0IGluc3RhbmNlb2YgTXQpe3ZhciBuPXQ7dGhpcy52aXNpdEludGVyaW9yUmluZyhuLmdldEV4dGVyaW9yUmluZygpLGUpfWlmKHQgaW5zdGFuY2VvZiBPdClmb3IodmFyIGk9dCxyPTA7cjxpLmdldE51bUdlb21ldHJpZXMoKTtyKyspe3ZhciBuPWkuZ2V0R2VvbWV0cnlOKHIpO3RoaXMudmlzaXRJbnRlcmlvclJpbmcobi5nZXRFeHRlcmlvclJpbmcoKSxlKX19LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNjb25uZWN0ZWRSaW5nY29vcmR9LHNldEludGVyaW9yRWRnZXNJblJlc3VsdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtuLmdldExhYmVsKCkuZ2V0TG9jYXRpb24oMCxBZS5SSUdIVCk9PT1TLklOVEVSSU9SJiZuLnNldEluUmVzdWx0KCEwKX19LHZpc2l0TGlua2VkRGlyZWN0ZWRFZGdlczpmdW5jdGlvbih0KXt2YXIgZT10LG49dDtkbyBjLmlzVHJ1ZShudWxsIT09bixcImZvdW5kIG51bGwgRGlyZWN0ZWQgRWRnZVwiKSxuLnNldFZpc2l0ZWQoITApLG49bi5nZXROZXh0KCk7d2hpbGUobiE9PWUpfSxidWlsZEVkZ2VSaW5nczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IF8sbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpLmlzSW5SZXN1bHQoKSYmbnVsbD09PWkuZ2V0RWRnZVJpbmcoKSl7dmFyIHI9bmV3IEZlKGksdGhpcy5nZW9tZXRyeUZhY3RvcnkpO3IubGlua0RpcmVjdGVkRWRnZXNGb3JNaW5pbWFsRWRnZVJpbmdzKCk7dmFyIG89ci5idWlsZE1pbmltYWxSaW5ncygpO2UuYWRkQWxsKG8pfX1yZXR1cm4gZX0saGFzVW52aXNpdGVkU2hlbGxFZGdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5zaXplKCk7ZSsrKXt2YXIgbj10LmdldChlKTtpZighbi5pc0hvbGUoKSl7dmFyIGk9bi5nZXRFZGdlcygpLHI9aS5nZXQoMCk7aWYoci5nZXRMYWJlbCgpLmdldExvY2F0aW9uKDAsQWUuUklHSFQpPT09Uy5JTlRFUklPUilmb3IodmFyIG89MDtvPGkuc2l6ZSgpO28rKylpZihyPWkuZ2V0KG8pLCFyLmlzVmlzaXRlZCgpKXJldHVybiB0aGlzLmRpc2Nvbm5lY3RlZFJpbmdjb29yZD1yLmdldENvb3JkaW5hdGUoKSwhMH19cmV0dXJuITF9LGlzSW50ZXJpb3JzQ29ubmVjdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IF87dGhpcy5nZW9tR3JhcGguY29tcHV0ZVNwbGl0RWRnZXModCk7dmFyIGU9bmV3IEplKG5ldyBxZSk7ZS5hZGRFZGdlcyh0KSx0aGlzLnNldEludGVyaW9yRWRnZXNJblJlc3VsdChlKSxlLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKCk7dmFyIG49dGhpcy5idWlsZEVkZ2VSaW5ncyhlLmdldEVkZ2VFbmRzKCkpO3JldHVybiB0aGlzLnZpc2l0U2hlbGxJbnRlcmlvcnModGhpcy5nZW9tR3JhcGguZ2V0R2VvbWV0cnkoKSxlKSwhdGhpcy5oYXNVbnZpc2l0ZWRTaGVsbEVkZ2Uobil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEtlfX0pLEtlLmZpbmREaWZmZXJlbnRQb2ludD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxdWFscyhlKSlyZXR1cm4gdFtuXTtyZXR1cm4gbnVsbH0sVHIoUWUucHJvdG90eXBlLHtzZWxlY3Q6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClhcmd1bWVudHNbMF07ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3QuZ2V0TGluZVNlZ21lbnQoZSx0aGlzLnNlbGVjdGVkU2VnbWVudCksdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZFNlZ21lbnQpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUWV9fSksVHIoJGUucHJvdG90eXBlLHtoYXNDaGlsZHJlbjpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8Mjt0KyspaWYobnVsbCE9PXRoaXMuc3Vibm9kZVt0XSlyZXR1cm4hMDtyZXR1cm4hMX0saXNQcnVuYWJsZTpmdW5jdGlvbigpe3JldHVybiEodGhpcy5oYXNDaGlsZHJlbigpfHx0aGlzLmhhc0l0ZW1zKCkpfSxhZGRBbGxJdGVtczpmdW5jdGlvbih0KXt0LmFkZEFsbCh0aGlzLml0ZW1zKTtmb3IodmFyIGU9MDtlPDI7ZSsrKW51bGwhPT10aGlzLnN1Ym5vZGVbZV0mJnRoaXMuc3Vibm9kZVtlXS5hZGRBbGxJdGVtcyh0KTtyZXR1cm4gdH0sc2l6ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPDI7ZSsrKW51bGwhPT10aGlzLnN1Ym5vZGVbZV0mJih0Kz10aGlzLnN1Ym5vZGVbZV0uc2l6ZSgpKTtyZXR1cm4gdCt0aGlzLml0ZW1zLnNpemUoKX0sYWRkQWxsSXRlbXNGcm9tT3ZlcmxhcHBpbmc6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXR8fHRoaXMuaXNTZWFyY2hNYXRjaCh0KT8oZS5hZGRBbGwodGhpcy5pdGVtcyksbnVsbCE9PXRoaXMuc3Vibm9kZVswXSYmdGhpcy5zdWJub2RlWzBdLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKHQsZSksbnVsbCE9PXRoaXMuc3Vibm9kZVsxXSYmdGhpcy5zdWJub2RlWzFdLmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKHQsZSksdm9pZCAwKTpudWxsfSxoYXNJdGVtczpmdW5jdGlvbigpe3JldHVybiF0aGlzLml0ZW1zLmlzRW1wdHkoKX0scmVtb3ZlOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNTZWFyY2hNYXRjaCh0KSlyZXR1cm4hMTtmb3IodmFyIG49ITEsaT0wO2k8MjtpKyspaWYobnVsbCE9PXRoaXMuc3Vibm9kZVtpXSYmKG49dGhpcy5zdWJub2RlW2ldLnJlbW92ZSh0LGUpKSl7dGhpcy5zdWJub2RlW2ldLmlzUHJ1bmFibGUoKSYmKHRoaXMuc3Vibm9kZVtpXT1udWxsKTticmVha31yZXR1cm4gbnx8KG49dGhpcy5pdGVtcy5yZW1vdmUoZSkpfSxnZXRJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zfSxkZXB0aDpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPDI7ZSsrKWlmKG51bGwhPT10aGlzLnN1Ym5vZGVbZV0pe3ZhciBuPXRoaXMuc3Vibm9kZVtlXS5kZXB0aCgpO24+dCYmKHQ9bil9cmV0dXJuIHQrMX0sbm9kZVNpemU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTwyO2UrKyludWxsIT09dGhpcy5zdWJub2RlW2VdJiYodCs9dGhpcy5zdWJub2RlW2VdLm5vZGVTaXplKCkpO3JldHVybiB0KzF9LGFkZDpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJGV9fSksJGUuZ2V0U3Vibm9kZUluZGV4PWZ1bmN0aW9uKHQsZSl7dmFyIG49LTE7cmV0dXJuIHQubWluPj1lJiYobj0xKSx0Lm1heDw9ZSYmKG49MCksbn0sVHIodG4ucHJvdG90eXBlLHtleHBhbmRUb0luY2x1ZGU6ZnVuY3Rpb24odCl7dC5tYXg+dGhpcy5tYXgmJih0aGlzLm1heD10Lm1heCksdC5taW48dGhpcy5taW4mJih0aGlzLm1pbj10Lm1pbil9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4LXRoaXMubWlufSxvdmVybGFwczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMub3ZlcmxhcHModC5taW4sdC5tYXgpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV07cmV0dXJuISh0aGlzLm1pbj5ufHx0aGlzLm1heDxlKX19LGdldE1pbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIltcIit0aGlzLm1pbitcIiwgXCIrdGhpcy5tYXgrXCJdXCJ9LGNvbnRhaW5zOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgdG4pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5jb250YWlucyh0Lm1pbix0Lm1heCl9aWYoXCJudW1iZXJcIj09dHlwZW9mIGFyZ3VtZW50c1swXSl7dmFyIGU9YXJndW1lbnRzWzBdO3JldHVybiBlPj10aGlzLm1pbiYmZTw9dGhpcy5tYXh9fWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTtyZXR1cm4gbj49dGhpcy5taW4mJmk8PXRoaXMubWF4fX0saW5pdDpmdW5jdGlvbih0LGUpe3RoaXMubWluPXQsdGhpcy5tYXg9ZSx0PmUmJih0aGlzLm1pbj1lLHRoaXMubWF4PXQpO1xufSxnZXRNYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRufX0pLFRyKGVuLnByb3RvdHlwZSx7Z2V0SW50ZXJ2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcnZhbH0sZ2V0TGV2ZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZXZlbH0sY29tcHV0ZUtleTpmdW5jdGlvbih0KXtmb3IodGhpcy5sZXZlbD1lbi5jb21wdXRlTGV2ZWwodCksdGhpcy5pbnRlcnZhbD1uZXcgdG4sdGhpcy5jb21wdXRlSW50ZXJ2YWwodGhpcy5sZXZlbCx0KTshdGhpcy5pbnRlcnZhbC5jb250YWlucyh0KTspdGhpcy5sZXZlbCs9MSx0aGlzLmNvbXB1dGVJbnRlcnZhbCh0aGlzLmxldmVsLHQpfSxjb21wdXRlSW50ZXJ2YWw6ZnVuY3Rpb24odCxlKXt2YXIgbj1sZS5wb3dlck9mMih0KTt0aGlzLnB0PU1hdGguZmxvb3IoZS5nZXRNaW4oKS9uKSpuLHRoaXMuaW50ZXJ2YWwuaW5pdCh0aGlzLnB0LHRoaXMucHQrbil9LGdldFBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGVufX0pLGVuLmNvbXB1dGVMZXZlbD1mdW5jdGlvbih0KXt2YXIgZT10LmdldFdpZHRoKCk7cmV0dXJuIGxlLmV4cG9uZW50KGUpKzF9LFByKG5uLCRlKSxUcihubi5wcm90b3R5cGUse2dldEludGVydmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJ2YWx9LGZpbmQ6ZnVuY3Rpb24odCl7dmFyIGU9JGUuZ2V0U3Vibm9kZUluZGV4KHQsdGhpcy5jZW50cmUpO3JldHVybiBlPT09LTE/dGhpczpudWxsIT09dGhpcy5zdWJub2RlW2VdP3RoaXMuc3Vibm9kZVtlXS5maW5kKHQpOnRoaXN9LGluc2VydDpmdW5jdGlvbih0KXtjLmlzVHJ1ZShudWxsPT09dGhpcy5pbnRlcnZhbHx8dGhpcy5pbnRlcnZhbC5jb250YWlucyh0LmludGVydmFsKSk7dmFyIGU9JGUuZ2V0U3Vibm9kZUluZGV4KHQuaW50ZXJ2YWwsdGhpcy5jZW50cmUpO2lmKHQubGV2ZWw9PT10aGlzLmxldmVsLTEpdGhpcy5zdWJub2RlW2VdPXQ7ZWxzZXt2YXIgbj10aGlzLmNyZWF0ZVN1Ym5vZGUoZSk7bi5pbnNlcnQodCksdGhpcy5zdWJub2RlW2VdPW59fSxpc1NlYXJjaE1hdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm92ZXJsYXBzKHRoaXMuaW50ZXJ2YWwpfSxnZXRTdWJub2RlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dGhpcy5zdWJub2RlW3RdJiYodGhpcy5zdWJub2RlW3RdPXRoaXMuY3JlYXRlU3Vibm9kZSh0KSksdGhpcy5zdWJub2RlW3RdfSxnZXROb2RlOmZ1bmN0aW9uKHQpe3ZhciBlPSRlLmdldFN1Ym5vZGVJbmRleCh0LHRoaXMuY2VudHJlKTtyZXR1cm4gZSE9PS0xP3RoaXMuZ2V0U3Vibm9kZShlKS5nZXROb2RlKHQpOnRoaXN9LGNyZWF0ZVN1Ym5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9MCxuPTA7c3dpdGNoKHQpe2Nhc2UgMDplPXRoaXMuaW50ZXJ2YWwuZ2V0TWluKCksbj10aGlzLmNlbnRyZTticmVhaztjYXNlIDE6ZT10aGlzLmNlbnRyZSxuPXRoaXMuaW50ZXJ2YWwuZ2V0TWF4KCl9cmV0dXJuIG5ldyBubihuZXcgdG4oZSxuKSx0aGlzLmxldmVsLTEpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBubn19KSxubi5jcmVhdGVOb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBlbih0KTtyZXR1cm4gbmV3IG5uKGUuZ2V0SW50ZXJ2YWwoKSxlLmdldExldmVsKCkpfSxubi5jcmVhdGVFeHBhbmRlZD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyB0bihlKTtudWxsIT09dCYmbi5leHBhbmRUb0luY2x1ZGUodC5pbnRlcnZhbCk7dmFyIGk9bm4uY3JlYXRlTm9kZShuKTtyZXR1cm4gbnVsbCE9PXQmJmkuaW5zZXJ0KHQpLGl9LFByKHJuLCRlKSxUcihybi5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbih0LGUpe3ZhciBuPSRlLmdldFN1Ym5vZGVJbmRleCh0LHJuLm9yaWdpbik7aWYobj09PS0xKXJldHVybiB0aGlzLmFkZChlKSxudWxsO3ZhciBpPXRoaXMuc3Vibm9kZVtuXTtpZihudWxsPT09aXx8IWkuZ2V0SW50ZXJ2YWwoKS5jb250YWlucyh0KSl7dmFyIHI9bm4uY3JlYXRlRXhwYW5kZWQoaSx0KTt0aGlzLnN1Ym5vZGVbbl09cn10aGlzLmluc2VydENvbnRhaW5lZCh0aGlzLnN1Ym5vZGVbbl0sdCxlKX0saXNTZWFyY2hNYXRjaDpmdW5jdGlvbih0KXtyZXR1cm4hMH0saW5zZXJ0Q29udGFpbmVkOmZ1bmN0aW9uKHQsZSxuKXtjLmlzVHJ1ZSh0LmdldEludGVydmFsKCkuY29udGFpbnMoZSkpO3ZhciBpPWRlLmlzWmVyb1dpZHRoKGUuZ2V0TWluKCksZS5nZXRNYXgoKSkscj1udWxsO3I9aT90LmZpbmQoZSk6dC5nZXROb2RlKGUpLHIuYWRkKG4pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBybn19KSxybi5vcmlnaW49MCxUcihvbi5wcm90b3R5cGUse3NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucm9vdD90aGlzLnJvb3Quc2l6ZSgpOjB9LGluc2VydDpmdW5jdGlvbih0LGUpe3RoaXMuY29sbGVjdFN0YXRzKHQpO3ZhciBuPW9uLmVuc3VyZUV4dGVudCh0LHRoaXMubWluRXh0ZW50KTt0aGlzLnJvb3QuaW5zZXJ0KG4sZSl9LHF1ZXJ5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5xdWVyeShuZXcgdG4odCx0KSl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB0bil7dmFyIGU9YXJndW1lbnRzWzBdLG49bmV3IF87cmV0dXJuIHRoaXMucXVlcnkoZSxuKSxufX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV07dGhpcy5yb290LmFkZEFsbEl0ZW1zRnJvbU92ZXJsYXBwaW5nKGkscil9fSxpdGVyYXRvcjpmdW5jdGlvbigpe3ZhciB0PW5ldyBfO3JldHVybiB0aGlzLnJvb3QuYWRkQWxsSXRlbXModCksdC5pdGVyYXRvcigpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt2YXIgbj1vbi5lbnN1cmVFeHRlbnQodCx0aGlzLm1pbkV4dGVudCk7cmV0dXJuIHRoaXMucm9vdC5yZW1vdmUobixlKX0sY29sbGVjdFN0YXRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0V2lkdGgoKTtlPHRoaXMubWluRXh0ZW50JiZlPjAmJih0aGlzLm1pbkV4dGVudD1lKX0sZGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucm9vdD90aGlzLnJvb3QuZGVwdGgoKTowfSxub2RlU2l6ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5yb290P3RoaXMucm9vdC5ub2RlU2l6ZSgpOjB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG9ufX0pLG9uLmVuc3VyZUV4dGVudD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWluKCksaT10LmdldE1heCgpO3JldHVybiBuIT09aT90OihuPT09aSYmKG4tPWUvMixpPW4rZS8yKSxuZXcgdG4obixpKSl9LFRyKGFuLnByb3RvdHlwZSx7Z2V0TGluZVNlZ21lbnQ6ZnVuY3Rpb24odCxlKXtlLnAwPXRoaXMucHRzW3RdLGUucDE9dGhpcy5wdHNbdCsxXX0sY29tcHV0ZVNlbGVjdDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLnB0c1tlXSxvPXRoaXMucHRzW25dO2lmKGkudGVtcEVudjEuaW5pdChyLG8pLG4tZT09MSlyZXR1cm4gaS5zZWxlY3QodGhpcyxlKSxudWxsO2lmKCF0LmludGVyc2VjdHMoaS50ZW1wRW52MSkpcmV0dXJuIG51bGw7dmFyIGE9TWF0aC50cnVuYygoZStuKS8yKTtlPGEmJnRoaXMuY29tcHV0ZVNlbGVjdCh0LGUsYSxpKSxhPG4mJnRoaXMuY29tcHV0ZVNlbGVjdCh0LGEsbixpKX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEFycmF5KHRoaXMuZW5kLXRoaXMuc3RhcnQrMSkuZmlsbChudWxsKSxlPTAsbj10aGlzLnN0YXJ0O248PXRoaXMuZW5kO24rKyl0W2UrK109dGhpcy5wdHNbbl07cmV0dXJuIHR9LGNvbXB1dGVPdmVybGFwczpmdW5jdGlvbih0LGUpe3RoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwodGhpcy5zdGFydCx0aGlzLmVuZCx0LHQuc3RhcnQsdC5lbmQsZSl9LHNldElkOmZ1bmN0aW9uKHQpe3RoaXMuaWQ9dH0sc2VsZWN0OmZ1bmN0aW9uKHQsZSl7dGhpcy5jb21wdXRlU2VsZWN0KHQsdGhpcy5zdGFydCx0aGlzLmVuZCxlKX0sZ2V0RW52ZWxvcGU6ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5lbnYpe3ZhciB0PXRoaXMucHRzW3RoaXMuc3RhcnRdLGU9dGhpcy5wdHNbdGhpcy5lbmRdO3RoaXMuZW52PW5ldyB4KHQsZSl9cmV0dXJuIHRoaXMuZW52fSxnZXRFbmRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZH0sZ2V0U3RhcnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0fSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dH0sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZH0sY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWw6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZhciBhPXRoaXMucHRzW3RdLHM9dGhpcy5wdHNbZV0sdT1uLnB0c1tpXSxsPW4ucHRzW3JdO2lmKGUtdD09MSYmci1pPT0xKXJldHVybiBvLm92ZXJsYXAodGhpcyx0LG4saSksbnVsbDtpZihvLnRlbXBFbnYxLmluaXQoYSxzKSxvLnRlbXBFbnYyLmluaXQodSxsKSwhby50ZW1wRW52MS5pbnRlcnNlY3RzKG8udGVtcEVudjIpKXJldHVybiBudWxsO3ZhciBjPU1hdGgudHJ1bmMoKHQrZSkvMiksaD1NYXRoLnRydW5jKChpK3IpLzIpO3Q8YyYmKGk8aCYmdGhpcy5jb21wdXRlT3ZlcmxhcHNJbnRlcm5hbCh0LGMsbixpLGgsbyksaDxyJiZ0aGlzLmNvbXB1dGVPdmVybGFwc0ludGVybmFsKHQsYyxuLGgscixvKSksYzxlJiYoaTxoJiZ0aGlzLmNvbXB1dGVPdmVybGFwc0ludGVybmFsKGMsZSxuLGksaCxvKSxoPHImJnRoaXMuY29tcHV0ZU92ZXJsYXBzSW50ZXJuYWwoYyxlLG4saCxyLG8pKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gYW59fSksVHIoc24ucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBzbn19KSxzbi5nZXRDaGFpblN0YXJ0SW5kaWNlcz1mdW5jdGlvbih0KXt2YXIgZT0wLG49bmV3IF87bi5hZGQobmV3IEkoZSkpO2Rve3ZhciBpPXNuLmZpbmRDaGFpbkVuZCh0LGUpO24uYWRkKG5ldyBJKGkpKSxlPWl9d2hpbGUoZTx0Lmxlbmd0aC0xKTtyZXR1cm4gc24udG9JbnRBcnJheShuKX0sc24uZmluZENoYWluRW5kPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWU7bjx0Lmxlbmd0aC0xJiZ0W25dLmVxdWFsczJEKHRbbisxXSk7KW4rKztpZihuPj10Lmxlbmd0aC0xKXJldHVybiB0Lmxlbmd0aC0xO2Zvcih2YXIgaT16ZS5xdWFkcmFudCh0W25dLHRbbisxXSkscj1lKzE7cjx0Lmxlbmd0aCYmKHRbci0xXS5lcXVhbHMyRCh0W3JdKXx8emUucXVhZHJhbnQodFtyLTFdLHRbcl0pPT09aSk7KXIrKztyZXR1cm4gci0xfSxzbi5nZXRDaGFpbnM9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBzbi5nZXRDaGFpbnModCxudWxsKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPW5ldyBfLHI9c24uZ2V0Q2hhaW5TdGFydEluZGljZXMoZSksbz0wO288ci5sZW5ndGgtMTtvKyspe3ZhciBhPW5ldyBhbihlLHJbb10scltvKzFdLG4pO2kuYWRkKGEpfXJldHVybiBpfX0sc24udG9JbnRBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPXQuZ2V0KG4pLmludFZhbHVlKCk7cmV0dXJuIGV9LFRyKHVuLnByb3RvdHlwZSx7aXNJbnNpZGU6ZnVuY3Rpb24odCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB1bn19KSxUcihsbi5wcm90b3R5cGUse3Rlc3RMaW5lU2VnbWVudDpmdW5jdGlvbih0LGUpe3ZhciBuPW51bGwsaT1udWxsLHI9bnVsbCxvPW51bGwsYT1lLnAwLHM9ZS5wMTtuPWEueC10LngsaT1hLnktdC55LHI9cy54LXQueCxvPXMueS10LnksKGk+MCYmbzw9MHx8bz4wJiZpPD0wKSYmMDxyZS5zaWduT2ZEZXQyeDIobixpLHIsbykvKG8taSkmJnRoaXMuY3Jvc3NpbmdzKyt9LGJ1aWxkSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLnRyZWU9bmV3IG9uO2Zvcih2YXIgdD1WLnJlbW92ZVJlcGVhdGVkUG9pbnRzKHRoaXMucmluZy5nZXRDb29yZGluYXRlcygpKSxlPXNuLmdldENoYWlucyh0KSxuPTA7bjxlLnNpemUoKTtuKyspe3ZhciBpPWUuZ2V0KG4pLHI9aS5nZXRFbnZlbG9wZSgpO3RoaXMuaW50ZXJ2YWwubWluPXIuZ2V0TWluWSgpLHRoaXMuaW50ZXJ2YWwubWF4PXIuZ2V0TWF4WSgpLHRoaXMudHJlZS5pbnNlcnQodGhpcy5pbnRlcnZhbCxpKX19LHRlc3RNb25vdG9uZUNoYWluOmZ1bmN0aW9uKHQsZSxuKXtuLnNlbGVjdCh0LGUpfSxpc0luc2lkZTpmdW5jdGlvbih0KXt0aGlzLmNyb3NzaW5ncz0wO3ZhciBlPW5ldyB4KGkuTkVHQVRJVkVfSU5GSU5JVFksaS5QT1NJVElWRV9JTkZJTklUWSx0LnksdC55KTt0aGlzLmludGVydmFsLm1pbj10LnksdGhpcy5pbnRlcnZhbC5tYXg9dC55O2Zvcih2YXIgbj10aGlzLnRyZWUucXVlcnkodGhpcy5pbnRlcnZhbCkscj1uZXcgY24odGhpcyx0KSxvPW4uaXRlcmF0b3IoKTtvLmhhc05leHQoKTspe3ZhciBhPW8ubmV4dCgpO3RoaXMudGVzdE1vbm90b25lQ2hhaW4oZSxyLGEpfXJldHVybiB0aGlzLmNyb3NzaW5ncyUyPT0xfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblt1bl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGxufX0pLFByKGNuLFFlKSxUcihjbi5wcm90b3R5cGUse3NlbGVjdDpmdW5jdGlvbigpe2lmKDEhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBRZS5wcm90b3R5cGUuc2VsZWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5tY3AudGVzdExpbmVTZWdtZW50KHRoaXMucCx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gY259fSksbG4uTUNTZWxlY3Rlcj1jbixUcihobi5wcm90b3R5cGUse2NvbXB1dGVJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSl7dGhpcy5tY2UuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbih0aGlzLmNoYWluSW5kZXgsdC5tY2UsdC5jaGFpbkluZGV4LGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBobn19KSxUcihmbi5wcm90b3R5cGUse2lzRGVsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZlbnRUeXBlPT09Zm4uREVMRVRFfSxzZXREZWxldGVFdmVudEluZGV4OmZ1bmN0aW9uKHQpe3RoaXMuZGVsZXRlRXZlbnRJbmRleD10fSxnZXRPYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmp9LGNvbXBhcmVUbzpmdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLnhWYWx1ZTxlLnhWYWx1ZT8tMTp0aGlzLnhWYWx1ZT5lLnhWYWx1ZT8xOnRoaXMuZXZlbnRUeXBlPGUuZXZlbnRUeXBlPy0xOnRoaXMuZXZlbnRUeXBlPmUuZXZlbnRUeXBlPzE6MH0sZ2V0SW5zZXJ0RXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnNlcnRFdmVudH0saXNJbnNlcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmVudFR5cGU9PT1mbi5JTlNFUlR9LGlzU2FtZUxhYmVsOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dGhpcy5sYWJlbCYmdGhpcy5sYWJlbD09PXQubGFiZWx9LGdldERlbGV0ZUV2ZW50SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWxldGVFdmVudEluZGV4fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZm59fSksZm4uSU5TRVJUPTEsZm4uREVMRVRFPTIsVHIoZG4ucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBkbn19KSxUcihwbi5wcm90b3R5cGUse2lzVHJpdmlhbEludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsbixpKXtpZih0PT09biYmMT09PXRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCkpe2lmKHBuLmlzQWRqYWNlbnRTZWdtZW50cyhlLGkpKXJldHVybiEwO2lmKHQuaXNDbG9zZWQoKSl7dmFyIHI9dC5nZXROdW1Qb2ludHMoKS0xO2lmKDA9PT1lJiZpPT09cnx8MD09PWkmJmU9PT1yKXJldHVybiEwfX1yZXR1cm4hMX0sZ2V0UHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wZXJJbnRlcnNlY3Rpb25Qb2ludH0sc2V0SXNEb25lSWZQcm9wZXJJbnQ6ZnVuY3Rpb24odCl7dGhpcy5pc0RvbmVXaGVuUHJvcGVySW50PXR9LGhhc1Byb3BlckludGVyaW9ySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzUHJvcGVySW50ZXJpb3J9LGlzQm91bmRhcnlQb2ludEludGVybmFsOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpLHI9aS5nZXRDb29yZGluYXRlKCk7aWYodC5pc0ludGVyc2VjdGlvbihyKSlyZXR1cm4hMH1yZXR1cm4hMX0saGFzUHJvcGVySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzUHJvcGVyfSxoYXNJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzSW50ZXJzZWN0aW9ufSxpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEb25lfSxpc0JvdW5kYXJ5UG9pbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4hKG51bGw9PT1lfHwhdGhpcy5pc0JvdW5kYXJ5UG9pbnRJbnRlcm5hbCh0LGVbMF0pJiYhdGhpcy5pc0JvdW5kYXJ5UG9pbnRJbnRlcm5hbCh0LGVbMV0pKX0sc2V0Qm91bmRhcnlOb2RlczpmdW5jdGlvbih0LGUpe3RoaXMuYmR5Tm9kZXM9bmV3IEFycmF5KDIpLmZpbGwobnVsbCksdGhpcy5iZHlOb2Rlc1swXT10LHRoaXMuYmR5Tm9kZXNbMV09ZX0sYWRkSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0LGUsbixpKXtpZih0PT09biYmZT09PWkpcmV0dXJuIG51bGw7dGhpcy5udW1UZXN0cysrO3ZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSxvPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLGE9bi5nZXRDb29yZGluYXRlcygpW2ldLHM9bi5nZXRDb29yZGluYXRlcygpW2krMV07dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIsbyxhLHMpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJih0aGlzLnJlY29yZElzb2xhdGVkJiYodC5zZXRJc29sYXRlZCghMSksbi5zZXRJc29sYXRlZCghMSkpLHRoaXMubnVtSW50ZXJzZWN0aW9ucysrLHRoaXMuaXNUcml2aWFsSW50ZXJzZWN0aW9uKHQsZSxuLGkpfHwodGhpcy5faGFzSW50ZXJzZWN0aW9uPSEwLCF0aGlzLmluY2x1ZGVQcm9wZXImJnRoaXMubGkuaXNQcm9wZXIoKXx8KHQuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmxpLGUsMCksbi5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksaSwxKSksdGhpcy5saS5pc1Byb3BlcigpJiYodGhpcy5wcm9wZXJJbnRlcnNlY3Rpb25Qb2ludD10aGlzLmxpLmdldEludGVyc2VjdGlvbigwKS5jb3B5KCksdGhpcy5oYXNQcm9wZXI9ITAsdGhpcy5pc0RvbmVXaGVuUHJvcGVySW50JiYodGhpcy5faXNEb25lPSEwKSx0aGlzLmlzQm91bmRhcnlQb2ludCh0aGlzLmxpLHRoaXMuYmR5Tm9kZXMpfHwodGhpcy5oYXNQcm9wZXJJbnRlcmlvcj0hMCkpKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHBufX0pLHBuLmlzQWRqYWNlbnRTZWdtZW50cz1mdW5jdGlvbih0LGUpe3JldHVybiAxPT09TWF0aC5hYnModC1lKX0sUHIoZ24sZG4pLFRyKGduLnByb3RvdHlwZSx7cHJlcGFyZUV2ZW50czpmdW5jdGlvbigpe0pyLnNvcnQodGhpcy5ldmVudHMpO2Zvcih2YXIgdD0wO3Q8dGhpcy5ldmVudHMuc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5ldmVudHMuZ2V0KHQpO2UuaXNEZWxldGUoKSYmZS5nZXRJbnNlcnRFdmVudCgpLnNldERlbGV0ZUV2ZW50SW5kZXgodCl9fSxjb21wdXRlSW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5uT3ZlcmxhcHM9MCx0aGlzLnByZXBhcmVFdmVudHMoKTtmb3IodmFyIGU9MDtlPHRoaXMuZXZlbnRzLnNpemUoKTtlKyspe3ZhciBuPXRoaXMuZXZlbnRzLmdldChlKTtpZihuLmlzSW5zZXJ0KCkmJnRoaXMucHJvY2Vzc092ZXJsYXBzKGUsbi5nZXREZWxldGVFdmVudEluZGV4KCksbix0KSx0LmlzRG9uZSgpKWJyZWFrfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKGFyZ3VtZW50c1syXWluc3RhbmNlb2YgcG4mJkxyKGFyZ3VtZW50c1swXSx2KSYmTHIoYXJndW1lbnRzWzFdLHYpKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl07dGhpcy5hZGRFZGdlcyhpLGkpLHRoaXMuYWRkRWRnZXMocixyKSx0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25zKG8pfWVsc2UgaWYoXCJib29sZWFuXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJkxyKGFyZ3VtZW50c1swXSx2KSYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBwbil7dmFyIGE9YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLHU9YXJndW1lbnRzWzJdO3U/dGhpcy5hZGRFZGdlcyhhLG51bGwpOnRoaXMuYWRkRWRnZXMoYSksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9ucyhzKX19LGFkZEVkZ2U6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5nZXRNb25vdG9uZUNoYWluRWRnZSgpLGk9bi5nZXRTdGFydEluZGV4ZXMoKSxyPTA7cjxpLmxlbmd0aC0xO3IrKyl7dmFyIG89bmV3IGhuKG4sciksYT1uZXcgZm4oZSxuLmdldE1pblgociksbyk7dGhpcy5ldmVudHMuYWRkKGEpLHRoaXMuZXZlbnRzLmFkZChuZXcgZm4obi5nZXRNYXhYKHIpLGEpKX19LHByb2Nlc3NPdmVybGFwczpmdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHI9bi5nZXRPYmplY3QoKSxvPXQ7bzxlO28rKyl7dmFyIGE9dGhpcy5ldmVudHMuZ2V0KG8pO2lmKGEuaXNJbnNlcnQoKSl7dmFyIHM9YS5nZXRPYmplY3QoKTtuLmlzU2FtZUxhYmVsKGEpfHwoci5jb21wdXRlSW50ZXJzZWN0aW9ucyhzLGkpLHRoaXMubk92ZXJsYXBzKyspfX19LGFkZEVkZ2VzOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuYWRkRWRnZShuLG4pfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxlPWkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuYWRkRWRnZShuLHIpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZ259fSksVHIodm4ucHJvdG90eXBlLHtnZXRNaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW59LGludGVyc2VjdHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4hKHRoaXMubWluPmV8fHRoaXMubWF4PHQpfSxnZXRNYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXh9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGVlLnRvTGluZVN0cmluZyhuZXcgaCh0aGlzLm1pbiwwKSxuZXcgaCh0aGlzLm1heCwwKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHZufX0pLFRyKG1uLnByb3RvdHlwZSx7Y29tcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQsaT1lLHI9KG4ubWluK24ubWF4KS8yLG89KGkubWluK2kubWF4KS8yO3JldHVybiByPG8/LTE6cj5vPzE6MH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bYV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG1ufX0pLHZuLk5vZGVDb21wYXJhdG9yPW1uLFByKHluLHZuKSxUcih5bi5wcm90b3R5cGUse3F1ZXJ5OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5pbnRlcnNlY3RzKHQsZSk/dm9pZCBuLnZpc2l0SXRlbSh0aGlzLml0ZW0pOm51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHlufX0pLFByKF9uLHZuKSxUcihfbi5wcm90b3R5cGUse2J1aWxkRXh0ZW50OmZ1bmN0aW9uKHQsZSl7dGhpcy5taW49TWF0aC5taW4odC5taW4sZS5taW4pLHRoaXMubWF4PU1hdGgubWF4KHQubWF4LGUubWF4KX0scXVlcnk6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmludGVyc2VjdHModCxlKT8obnVsbCE9PXRoaXMubm9kZTEmJnRoaXMubm9kZTEucXVlcnkodCxlLG4pLHZvaWQobnVsbCE9PXRoaXMubm9kZTImJnRoaXMubm9kZTIucXVlcnkodCxlLG4pKSk6bnVsbH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gX259fSksVHIoYm4ucHJvdG90eXBlLHtidWlsZFRyZWU6ZnVuY3Rpb24oKXtKci5zb3J0KHRoaXMubGVhdmVzLG5ldyBJbnRlcnZhbFJUcmVlTm9kZS5Ob2RlQ29tcGFyYXRvcik7Zm9yKHZhciB0PXRoaXMubGVhdmVzLGU9bnVsbCxuPW5ldyBfOzspe2lmKHRoaXMuYnVpbGRMZXZlbCh0LG4pLDE9PT1uLnNpemUoKSlyZXR1cm4gbi5nZXQoMCk7ZT10LHQ9bixuPWV9fSxpbnNlcnQ6ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPT10aGlzLnJvb3QpdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcIkluZGV4IGNhbm5vdCBiZSBhZGRlZCB0byBvbmNlIGl0IGhhcyBiZWVuIHF1ZXJpZWRcIik7dGhpcy5sZWF2ZXMuYWRkKG5ldyB5bih0LGUsbikpfSxxdWVyeTpmdW5jdGlvbih0LGUsbil7dGhpcy5pbml0KCksdGhpcy5yb290LnF1ZXJ5KHQsZSxuKX0sYnVpbGRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnJvb3Q/bnVsbDp2b2lkKHRoaXMucm9vdD10aGlzLmJ1aWxkVHJlZSgpKX0scHJpbnROb2RlOmZ1bmN0aW9uKHQpe0wub3V0LnByaW50bG4oZWUudG9MaW5lU3RyaW5nKG5ldyBoKHQubWluLHRoaXMubGV2ZWwpLG5ldyBoKHQubWF4LHRoaXMubGV2ZWwpKSl9LGluaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMucm9vdD9udWxsOnZvaWQgdGhpcy5idWlsZFJvb3QoKX0sYnVpbGRMZXZlbDpmdW5jdGlvbih0LGUpe3RoaXMubGV2ZWwrKyxlLmNsZWFyKCk7Zm9yKHZhciBuPTA7bjx0LnNpemUoKTtuKz0yKXt2YXIgaT10LmdldChuKTtpZihudWxsPT09KG4rMTx0LnNpemUoKT90LmdldChuKTpudWxsKSllLmFkZChpKTtlbHNle3ZhciByPW5ldyBfbih0LmdldChuKSx0LmdldChuKzEpKTtlLmFkZChyKX19fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBibn19KSxUcih4bi5wcm90b3R5cGUse2xvY2F0ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgb2UodCksbj1uZXcgd24oZSk7cmV0dXJuIHRoaXMuaW5kZXgucXVlcnkodC55LHQueSxuKSxlLmdldExvY2F0aW9uKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0JlXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4geG59fSksVHIod24ucHJvdG90eXBlLHt2aXNpdEl0ZW06ZnVuY3Rpb24odCl7dmFyIGU9dDt0aGlzLmNvdW50ZXIuY291bnRTZWdtZW50KGUuZ2V0Q29vcmRpbmF0ZSgwKSxlLmdldENvb3JkaW5hdGUoMSkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblt2ZV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHdufX0pLFRyKEVuLnByb3RvdHlwZSx7aW5pdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9T2UuZ2V0TGluZXModCksbj1lLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLmFkZExpbmUocil9fSxhZGRMaW5lOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8dC5sZW5ndGg7ZSsrKXt2YXIgbj1uZXcgc2UodFtlLTFdLHRbZV0pLGk9TWF0aC5taW4obi5wMC55LG4ucDEueSkscj1NYXRoLm1heChuLnAwLnksbi5wMS55KTt0aGlzLmluZGV4Lmluc2VydChpLHIsbil9fSxxdWVyeTpmdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1uZXcgbWU7cmV0dXJuIHRoaXMuaW5kZXgucXVlcnkodCxlLG4pLG4uZ2V0SXRlbXMoKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO3RoaXMuaW5kZXgucXVlcnkoaSxyLG8pfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRW59fSkseG4uU2VnbWVudFZpc2l0b3I9d24seG4uSW50ZXJ2YWxJbmRleGVkR2VvbWV0cnk9RW4sVHIoU24ucHJvdG90eXBlLHtnZXRTZWdtZW50SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdtZW50SW5kZXh9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZH0scHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludCh0aGlzLmNvb3JkKSx0LnByaW50KFwiIHNlZyAjID0gXCIrdGhpcy5zZWdtZW50SW5kZXgpLHQucHJpbnRsbihcIiBkaXN0ID0gXCIrdGhpcy5kaXN0KX0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuY29tcGFyZShlLnNlZ21lbnRJbmRleCxlLmRpc3QpfSxpc0VuZFBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dGhpcy5zZWdtZW50SW5kZXgmJjA9PT10aGlzLmRpc3R8fHRoaXMuc2VnbWVudEluZGV4PT09dH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZCtcIiBzZWcgIyA9IFwiK3RoaXMuc2VnbWVudEluZGV4K1wiIGRpc3QgPSBcIit0aGlzLmRpc3R9LGdldERpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzdH0sY29tcGFyZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNlZ21lbnRJbmRleDx0Py0xOnRoaXMuc2VnbWVudEluZGV4PnQ/MTp0aGlzLmRpc3Q8ZT8tMTp0aGlzLmRpc3Q+ZT8xOjB9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3JdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBTbn19KSxUcihNbi5wcm90b3R5cGUse3ByaW50OmZ1bmN0aW9uKHQpe3QucHJpbnRsbihcIkludGVyc2VjdGlvbnM6XCIpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWUubmV4dCgpLnByaW50KHQpfSxpdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVNYXAudmFsdWVzKCkuaXRlcmF0b3IoKX0sYWRkU3BsaXRFZGdlczpmdW5jdGlvbih0KXt0aGlzLmFkZEVuZHBvaW50cygpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCksbj1lLm5leHQoKTtlLmhhc05leHQoKTspe3ZhciBpPWUubmV4dCgpLHI9dGhpcy5jcmVhdGVTcGxpdEVkZ2UobixpKTt0LmFkZChyKSxuPWl9fSxhZGRFbmRwb2ludHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2UucHRzLmxlbmd0aC0xO3RoaXMuYWRkKHRoaXMuZWRnZS5wdHNbMF0sMCwwKSx0aGlzLmFkZCh0aGlzLmVkZ2UucHRzW3RdLHQsMCl9LGNyZWF0ZVNwbGl0RWRnZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuc2VnbWVudEluZGV4LXQuc2VnbWVudEluZGV4KzIsaT10aGlzLmVkZ2UucHRzW2Uuc2VnbWVudEluZGV4XSxyPWUuZGlzdD4wfHwhZS5jb29yZC5lcXVhbHMyRChpKTtyfHxuLS07dmFyIG89bmV3IEFycmF5KG4pLmZpbGwobnVsbCksYT0wO29bYSsrXT1uZXcgaCh0LmNvb3JkKTtmb3IodmFyIHM9dC5zZWdtZW50SW5kZXgrMTtzPD1lLnNlZ21lbnRJbmRleDtzKyspb1thKytdPXRoaXMuZWRnZS5wdHNbc107cmV0dXJuIHImJihvW2FdPWUuY29vcmQpLG5ldyBUbihvLG5ldyBrZSh0aGlzLmVkZ2UubGFiZWwpKX0sYWRkOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgU24odCxlLG4pLHI9dGhpcy5ub2RlTWFwLmdldChpKTtyZXR1cm4gbnVsbCE9PXI/cjoodGhpcy5ub2RlTWFwLnB1dChpLGkpLGkpfSxpc0ludGVyc2VjdGlvbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOylpZihlLm5leHQoKS5jb29yZC5lcXVhbHModCkpcmV0dXJuITA7cmV0dXJuITF9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE1ufX0pLFRyKENuLnByb3RvdHlwZSx7Z2V0Q2hhaW5TdGFydEluZGljZXM6ZnVuY3Rpb24odCl7dmFyIGU9MCxuPW5ldyBfO24uYWRkKG5ldyBJKGUpKTtkb3t2YXIgaT10aGlzLmZpbmRDaGFpbkVuZCh0LGUpO24uYWRkKG5ldyBJKGkpKSxlPWl9d2hpbGUoZTx0Lmxlbmd0aC0xKTtyZXR1cm4gQ24udG9JbnRBcnJheShuKX0sZmluZENoYWluRW5kOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXplLnF1YWRyYW50KHRbZV0sdFtlKzFdKSxpPWUrMTtpPHQubGVuZ3RoJiZ6ZS5xdWFkcmFudCh0W2ktMV0sdFtpXSk9PT1uOylpKys7cmV0dXJuIGktMX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQ259fSksQ24udG9JbnRBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPGUubGVuZ3RoO24rKyllW25dPXQuZ2V0KG4pLmludFZhbHVlKCk7cmV0dXJuIGV9LFRyKEluLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LGdldE1heFg6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3RdXS54LG49dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3QrMV1dLng7cmV0dXJuIGU+bj9lOm59LGdldE1pblg6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3RdXS54LG49dGhpcy5wdHNbdGhpcy5zdGFydEluZGV4W3QrMV1dLng7cmV0dXJuIGU8bj9lOm59LGNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW46ZnVuY3Rpb24oKXtpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3RoaXMuY29tcHV0ZUludGVyc2VjdHNGb3JDaGFpbih0aGlzLnN0YXJ0SW5kZXhbdF0sdGhpcy5zdGFydEluZGV4W3QrMV0sZSxlLnN0YXJ0SW5kZXhbbl0sZS5zdGFydEluZGV4W24rMV0saSl9ZWxzZSBpZig2PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdLHM9YXJndW1lbnRzWzNdLHU9YXJndW1lbnRzWzRdLGw9YXJndW1lbnRzWzVdLGM9dGhpcy5wdHNbcl0saD10aGlzLnB0c1tvXSxmPWEucHRzW3NdLGQ9YS5wdHNbdV07aWYoby1yPT0xJiZ1LXM9PTEpcmV0dXJuIGwuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmUscixhLmUscyksbnVsbDtpZih0aGlzLmVudjEuaW5pdChjLGgpLHRoaXMuZW52Mi5pbml0KGYsZCksIXRoaXMuZW52MS5pbnRlcnNlY3RzKHRoaXMuZW52MikpcmV0dXJuIG51bGw7dmFyIHA9TWF0aC50cnVuYygocitvKS8yKSxnPU1hdGgudHJ1bmMoKHMrdSkvMik7cjxwJiYoczxnJiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4ocixwLGEscyxnLGwpLGc8dSYmdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKHIscCxhLGcsdSxsKSkscDxvJiYoczxnJiZ0aGlzLmNvbXB1dGVJbnRlcnNlY3RzRm9yQ2hhaW4ocCxvLGEscyxnLGwpLGc8dSYmdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKHAsbyxhLGcsdSxsKSl9fSxnZXRTdGFydEluZGV4ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydEluZGV4fSxjb21wdXRlSW50ZXJzZWN0czpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy5zdGFydEluZGV4Lmxlbmd0aC0xO24rKylmb3IodmFyIGk9MDtpPHQuc3RhcnRJbmRleC5sZW5ndGgtMTtpKyspdGhpcy5jb21wdXRlSW50ZXJzZWN0c0ZvckNoYWluKG4sdCxpLGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBJbn19KSxUcihPbi5wcm90b3R5cGUse2dldERlcHRoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZGVwdGhbdF1bZV19LHNldERlcHRoOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLmRlcHRoW3RdW2VdPW59LGlzTnVsbDpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9MDt0PDI7dCsrKWZvcih2YXIgZT0wO2U8MztlKyspaWYodGhpcy5kZXB0aFt0XVtlXSE9PU9uLk5VTExfVkFMVUUpcmV0dXJuITE7cmV0dXJuITB9aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kZXB0aFtuXVsxXT09PU9uLk5VTExfVkFMVUV9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5kZXB0aFtpXVtyXT09PU9uLk5VTExfVkFMVUV9fSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PDI7dCsrKWlmKCF0aGlzLmlzTnVsbCh0KSl7dmFyIGU9dGhpcy5kZXB0aFt0XVsxXTt0aGlzLmRlcHRoW3RdWzJdPGUmJihlPXRoaXMuZGVwdGhbdF1bMl0pLGU8MCYmKGU9MCk7Zm9yKHZhciBuPTE7bjwzO24rKyl7dmFyIGk9MDt0aGlzLmRlcHRoW3RdW25dPmUmJihpPTEpLHRoaXMuZGVwdGhbdF1bbl09aX19fSxnZXREZWx0YTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kZXB0aFt0XVtBZS5SSUdIVF0tdGhpcy5kZXB0aFt0XVtBZS5MRUZUXX0sZ2V0TG9jYXRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kZXB0aFt0XVtlXTw9MD9TLkVYVEVSSU9SOlMuSU5URVJJT1J9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJBOiBcIit0aGlzLmRlcHRoWzBdWzFdK1wiLFwiK3RoaXMuZGVwdGhbMF1bMl0rXCIgQjogXCIrdGhpcy5kZXB0aFsxXVsxXStcIixcIit0aGlzLmRlcHRoWzFdWzJdfSxhZGQ6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPDI7ZSsrKWZvcih2YXIgbj0xO248MztuKyspe3ZhciBpPXQuZ2V0TG9jYXRpb24oZSxuKTtpIT09Uy5FWFRFUklPUiYmaSE9PVMuSU5URVJJT1J8fCh0aGlzLmlzTnVsbChlLG4pP3RoaXMuZGVwdGhbZV1bbl09T24uZGVwdGhBdExvY2F0aW9uKGkpOnRoaXMuZGVwdGhbZV1bbl0rPU9uLmRlcHRoQXRMb2NhdGlvbihpKSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO2E9PT1TLklOVEVSSU9SJiZ0aGlzLmRlcHRoW3JdW29dKyt9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPbn19KSxPbi5kZXB0aEF0TG9jYXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1TLkVYVEVSSU9SPzA6dD09PVMuSU5URVJJT1I/MTpPbi5OVUxMX1ZBTFVFfSxPbi5OVUxMX1ZBTFVFPS0xLFByKFRuLFZlKSxUcihUbi5wcm90b3R5cGUse2dldERlcHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVwdGh9LGdldENvbGxhcHNlZEVkZ2U6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgQXJyYXkoMikuZmlsbChudWxsKTtyZXR1cm4gdFswXT10aGlzLnB0c1swXSx0WzFdPXRoaXMucHRzWzFdLG5ldyBUbih0LGtlLnRvTGluZUxhYmVsKHRoaXMubGFiZWwpKX0saXNJc29sYXRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0lzb2xhdGVkfSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c30sc2V0SXNvbGF0ZWQ6ZnVuY3Rpb24odCl7dGhpcy5faXNJc29sYXRlZD10fSxzZXROYW1lOmZ1bmN0aW9uKHQpe3RoaXMubmFtZT10fSxlcXVhbHM6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgVG4pKXJldHVybiExO3ZhciBlPXQ7aWYodGhpcy5wdHMubGVuZ3RoIT09ZS5wdHMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0hMCxpPSEwLHI9dGhpcy5wdHMubGVuZ3RoLG89MDtvPHRoaXMucHRzLmxlbmd0aDtvKyspaWYodGhpcy5wdHNbb10uZXF1YWxzMkQoZS5wdHNbb10pfHwobj0hMSksdGhpcy5wdHNbb10uZXF1YWxzMkQoZS5wdHNbLS1yXSl8fChpPSExKSwhbiYmIWkpcmV0dXJuITE7cmV0dXJuITB9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5wdHMubGVuZ3RoPjA/dGhpcy5wdHNbMF06bnVsbDtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLnB0c1t0XX19LHByaW50OmZ1bmN0aW9uKHQpe3QucHJpbnQoXCJlZGdlIFwiK3RoaXMubmFtZStcIjogXCIpLHQucHJpbnQoXCJMSU5FU1RSSU5HIChcIik7Zm9yKHZhciBlPTA7ZTx0aGlzLnB0cy5sZW5ndGg7ZSsrKWU+MCYmdC5wcmludChcIixcIiksdC5wcmludCh0aGlzLnB0c1tlXS54K1wiIFwiK3RoaXMucHRzW2VdLnkpO3QucHJpbnQoXCIpICBcIit0aGlzLmxhYmVsK1wiIFwiK3RoaXMuZGVwdGhEZWx0YSl9LGNvbXB1dGVJTTpmdW5jdGlvbih0KXtUbi51cGRhdGVJTSh0aGlzLmxhYmVsLHQpfSxpc0NvbGxhcHNlZDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5sYWJlbC5pc0FyZWEoKSYmMz09PXRoaXMucHRzLmxlbmd0aCYmISF0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbMl0pfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0c1swXS5lcXVhbHModGhpcy5wdHNbdGhpcy5wdHMubGVuZ3RoLTFdKX0sZ2V0TWF4aW11bVNlZ21lbnRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGgtMX0sZ2V0RGVwdGhEZWx0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlcHRoRGVsdGF9LGdldE51bVBvaW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0cy5sZW5ndGh9LHByaW50UmV2ZXJzZTpmdW5jdGlvbih0KXt0LnByaW50KFwiZWRnZSBcIit0aGlzLm5hbWUrXCI6IFwiKTtmb3IodmFyIGU9dGhpcy5wdHMubGVuZ3RoLTE7ZT49MDtlLS0pdC5wcmludCh0aGlzLnB0c1tlXStcIiBcIik7dC5wcmludGxuKFwiXCIpfSxnZXRNb25vdG9uZUNoYWluRWRnZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5tY2UmJih0aGlzLm1jZT1uZXcgSW4odGhpcykpLHRoaXMubWNlfSxnZXRFbnZlbG9wZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmVudil7dGhpcy5lbnY9bmV3IHg7Zm9yKHZhciB0PTA7dDx0aGlzLnB0cy5sZW5ndGg7dCsrKXRoaXMuZW52LmV4cGFuZFRvSW5jbHVkZSh0aGlzLnB0c1t0XSl9cmV0dXJuIHRoaXMuZW52fSxhZGRJbnRlcnNlY3Rpb246ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bmV3IGgodC5nZXRJbnRlcnNlY3Rpb24oaSkpLG89ZSxhPXQuZ2V0RWRnZURpc3RhbmNlKG4saSkscz1vKzE7aWYoczx0aGlzLnB0cy5sZW5ndGgpe3ZhciB1PXRoaXMucHRzW3NdO3IuZXF1YWxzMkQodSkmJihvPXMsYT0wKX10aGlzLmVpTGlzdC5hZGQocixvLGEpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PW5ldyBDO3QuYXBwZW5kKFwiZWRnZSBcIit0aGlzLm5hbWUrXCI6IFwiKSx0LmFwcGVuZChcIkxJTkVTVFJJTkcgKFwiKTtmb3IodmFyIGU9MDtlPHRoaXMucHRzLmxlbmd0aDtlKyspZT4wJiZ0LmFwcGVuZChcIixcIiksdC5hcHBlbmQodGhpcy5wdHNbZV0ueCtcIiBcIit0aGlzLnB0c1tlXS55KTtyZXR1cm4gdC5hcHBlbmQoXCIpICBcIit0aGlzLmxhYmVsK1wiIFwiK3RoaXMuZGVwdGhEZWx0YSksdC50b1N0cmluZygpfSxpc1BvaW50d2lzZUVxdWFsOmZ1bmN0aW9uKHQpe2lmKHRoaXMucHRzLmxlbmd0aCE9PXQucHRzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMucHRzLmxlbmd0aDtlKyspaWYoIXRoaXMucHRzW2VdLmVxdWFsczJEKHQucHRzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sc2V0RGVwdGhEZWx0YTpmdW5jdGlvbih0KXt0aGlzLmRlcHRoRGVsdGE9dH0sZ2V0RWRnZUludGVyc2VjdGlvbkxpc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5laUxpc3R9LGFkZEludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT0wO2k8dC5nZXRJbnRlcnNlY3Rpb25OdW0oKTtpKyspdGhpcy5hZGRJbnRlcnNlY3Rpb24odCxlLG4saSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFRufX0pLFRuLnVwZGF0ZUlNPWZ1bmN0aW9uKCl7aWYoMiE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIFZlLnByb3RvdHlwZS51cGRhdGVJTS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO2Uuc2V0QXRMZWFzdElmVmFsaWQodC5nZXRMb2NhdGlvbigwLEFlLk9OKSx0LmdldExvY2F0aW9uKDEsQWUuT04pLDEpLHQuaXNBcmVhKCkmJihlLnNldEF0TGVhc3RJZlZhbGlkKHQuZ2V0TG9jYXRpb24oMCxBZS5MRUZUKSx0LmdldExvY2F0aW9uKDEsQWUuTEVGVCksMiksZS5zZXRBdExlYXN0SWZWYWxpZCh0LmdldExvY2F0aW9uKDAsQWUuUklHSFQpLHQuZ2V0TG9jYXRpb24oMSxBZS5SSUdIVCksMikpfSxQcihQbixKZSksVHIoUG4ucHJvdG90eXBlLHtpbnNlcnRCb3VuZGFyeVBvaW50OmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy5hZGROb2RlKGUpLGk9bi5nZXRMYWJlbCgpLHI9MSxvPVMuTk9ORTsobz1pLmdldExvY2F0aW9uKHQsQWUuT04pKT09PVMuQk9VTkRBUlkmJnIrKzt2YXIgYT1Qbi5kZXRlcm1pbmVCb3VuZGFyeSh0aGlzLmJvdW5kYXJ5Tm9kZVJ1bGUscik7aS5zZXRMb2NhdGlvbih0LGEpfSxjb21wdXRlU2VsZk5vZGVzOmZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5jb21wdXRlU2VsZk5vZGVzKHQsZSwhMSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXSxvPW5ldyBwbihuLCEwLCExKTtvLnNldElzRG9uZUlmUHJvcGVySW50KHIpO3ZhciBhPXRoaXMuY3JlYXRlRWRnZVNldEludGVyc2VjdG9yKCkscz10aGlzLnBhcmVudEdlb20gaW5zdGFuY2VvZiBJdHx8dGhpcy5wYXJlbnRHZW9tIGluc3RhbmNlb2YgTXR8fHRoaXMucGFyZW50R2VvbSBpbnN0YW5jZW9mIE90LHU9aXx8IXM7cmV0dXJuIGEuY29tcHV0ZUludGVyc2VjdGlvbnModGhpcy5lZGdlcyxvLHUpLHRoaXMuYWRkU2VsZkludGVyc2VjdGlvbk5vZGVzKHRoaXMuYXJnSW5kZXgpLG99fSxjb21wdXRlU3BsaXRFZGdlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5lZGdlcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyllLm5leHQoKS5laUxpc3QuYWRkU3BsaXRFZGdlcyh0KX0sY29tcHV0ZUVkZ2VJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgcG4oZSxuLCEwKTtyZXR1cm4gaS5zZXRCb3VuZGFyeU5vZGVzKHRoaXMuZ2V0Qm91bmRhcnlOb2RlcygpLHQuZ2V0Qm91bmRhcnlOb2RlcygpKSx0aGlzLmNyZWF0ZUVkZ2VTZXRJbnRlcnNlY3RvcigpLmNvbXB1dGVJbnRlcnNlY3Rpb25zKHRoaXMuZWRnZXMsdC5lZGdlcyxpKSxpfSxnZXRHZW9tZXRyeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudEdlb219LGdldEJvdW5kYXJ5Tm9kZVJ1bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3VuZGFyeU5vZGVSdWxlfSxoYXNUb29GZXdQb2ludHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzVG9vRmV3UG9pbnRzfSxhZGRQb2ludDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgRXQpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQuZ2V0Q29vcmRpbmF0ZSgpO3RoaXMuaW5zZXJ0UG9pbnQodGhpcy5hcmdJbmRleCxlLFMuSU5URVJJT1IpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgbj1hcmd1bWVudHNbMF07dGhpcy5pbnNlcnRQb2ludCh0aGlzLmFyZ0luZGV4LG4sUy5JTlRFUklPUil9fSxhZGRQb2x5Z29uOmZ1bmN0aW9uKHQpe3RoaXMuYWRkUG9seWdvblJpbmcodC5nZXRFeHRlcmlvclJpbmcoKSxTLkVYVEVSSU9SLFMuSU5URVJJT1IpO2Zvcih2YXIgZT0wO2U8dC5nZXROdW1JbnRlcmlvclJpbmcoKTtlKyspe3ZhciBuPXQuZ2V0SW50ZXJpb3JSaW5nTihlKTt0aGlzLmFkZFBvbHlnb25SaW5nKG4sUy5JTlRFUklPUixTLkVYVEVSSU9SKX19LGFkZEVkZ2U6ZnVuY3Rpb24odCl7dGhpcy5pbnNlcnRFZGdlKHQpO3ZhciBlPXQuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsZVswXSxTLkJPVU5EQVJZKSx0aGlzLmluc2VydFBvaW50KHRoaXMuYXJnSW5kZXgsZVtlLmxlbmd0aC0xXSxTLkJPVU5EQVJZKX0sYWRkTGluZVN0cmluZzpmdW5jdGlvbih0KXt2YXIgZT1WLnJlbW92ZVJlcGVhdGVkUG9pbnRzKHQuZ2V0Q29vcmRpbmF0ZXMoKSk7aWYoZS5sZW5ndGg8MilyZXR1cm4gdGhpcy5faGFzVG9vRmV3UG9pbnRzPSEwLHRoaXMuaW52YWxpZFBvaW50PWVbMF0sbnVsbDt2YXIgbj1uZXcgVG4oZSxuZXcga2UodGhpcy5hcmdJbmRleCxTLklOVEVSSU9SKSk7dGhpcy5saW5lRWRnZU1hcC5wdXQodCxuKSx0aGlzLmluc2VydEVkZ2UobiksYy5pc1RydWUoZS5sZW5ndGg+PTIsXCJmb3VuZCBMaW5lU3RyaW5nIHdpdGggc2luZ2xlIHBvaW50XCIpLHRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludCh0aGlzLmFyZ0luZGV4LGVbMF0pLHRoaXMuaW5zZXJ0Qm91bmRhcnlQb2ludCh0aGlzLmFyZ0luZGV4LGVbZS5sZW5ndGgtMV0pfSxnZXRJbnZhbGlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnR9LGdldEJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2V0Qm91bmRhcnlOb2RlcygpLGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MCxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO2VbbisrXT1yLmdldENvb3JkaW5hdGUoKS5jb3B5KCl9cmV0dXJuIGV9LGdldEJvdW5kYXJ5Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuYm91bmRhcnlOb2RlcyYmKHRoaXMuYm91bmRhcnlOb2Rlcz10aGlzLm5vZGVzLmdldEJvdW5kYXJ5Tm9kZXModGhpcy5hcmdJbmRleCkpLHRoaXMuYm91bmRhcnlOb2Rlc30sYWRkU2VsZkludGVyc2VjdGlvbk5vZGU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmlzQm91bmRhcnlOb2RlKHQsZSk/bnVsbDp2b2lkKG49PT1TLkJPVU5EQVJZJiZ0aGlzLnVzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU/dGhpcy5pbnNlcnRCb3VuZGFyeVBvaW50KHQsZSk6dGhpcy5pbnNlcnRQb2ludCh0LGUsbikpfSxhZGRQb2x5Z29uUmluZzpmdW5jdGlvbih0LGUsbil7aWYodC5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIGk9Vi5yZW1vdmVSZXBlYXRlZFBvaW50cyh0LmdldENvb3JkaW5hdGVzKCkpO2lmKGkubGVuZ3RoPDQpcmV0dXJuIHRoaXMuX2hhc1Rvb0Zld1BvaW50cz0hMCx0aGlzLmludmFsaWRQb2ludD1pWzBdLG51bGw7dmFyIHI9ZSxvPW47YWUuaXNDQ1coaSkmJihyPW4sbz1lKTt2YXIgYT1uZXcgVG4oaSxuZXcga2UodGhpcy5hcmdJbmRleCxTLkJPVU5EQVJZLHIsbykpO3RoaXMubGluZUVkZ2VNYXAucHV0KHQsYSksdGhpcy5pbnNlcnRFZGdlKGEpLHRoaXMuaW5zZXJ0UG9pbnQodGhpcy5hcmdJbmRleCxpWzBdLFMuQk9VTkRBUlkpfSxpbnNlcnRQb2ludDpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5ub2Rlcy5hZGROb2RlKGUpLHI9aS5nZXRMYWJlbCgpO251bGw9PT1yP2kubGFiZWw9bmV3IGtlKHQsbik6ci5zZXRMb2NhdGlvbih0LG4pfSxjcmVhdGVFZGdlU2V0SW50ZXJzZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGdufSxhZGRTZWxmSW50ZXJzZWN0aW9uTm9kZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZWRnZXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspZm9yKHZhciBuPWUubmV4dCgpLGk9bi5nZXRMYWJlbCgpLmdldExvY2F0aW9uKHQpLHI9bi5laUxpc3QuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpO3RoaXMuYWRkU2VsZkludGVyc2VjdGlvbk5vZGUodCxvLmNvb3JkLGkpfX0sYWRkOmZ1bmN0aW9uKCl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIEplLnByb3RvdHlwZS5hZGQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciB0PWFyZ3VtZW50c1swXTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gbnVsbDtpZih0IGluc3RhbmNlb2YgT3QmJih0aGlzLnVzZUJvdW5kYXJ5RGV0ZXJtaW5hdGlvblJ1bGU9ITEpLHQgaW5zdGFuY2VvZiBNdCl0aGlzLmFkZFBvbHlnb24odCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgeHQpdGhpcy5hZGRMaW5lU3RyaW5nKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIEV0KXRoaXMuYWRkUG9pbnQodCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgQ3QpdGhpcy5hZGRDb2xsZWN0aW9uKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGN0KXRoaXMuYWRkQ29sbGVjdGlvbih0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBPdCl0aGlzLmFkZENvbGxlY3Rpb24odCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBsdCkpdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKHQuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpO3RoaXMuYWRkQ29sbGVjdGlvbih0KX19LGFkZENvbGxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmdldE51bUdlb21ldHJpZXMoKTtlKyspe3ZhciBuPXQuZ2V0R2VvbWV0cnlOKGUpO3RoaXMuYWRkKG4pfX0sbG9jYXRlOmZ1bmN0aW9uKHQpe3JldHVybiBMcih0aGlzLnBhcmVudEdlb20sU3QpJiZ0aGlzLnBhcmVudEdlb20uZ2V0TnVtR2VvbWV0cmllcygpPjUwPyhudWxsPT09dGhpcy5hcmVhUHRMb2NhdG9yJiYodGhpcy5hcmVhUHRMb2NhdG9yPW5ldyB4bih0aGlzLnBhcmVudEdlb20pKSx0aGlzLmFyZWFQdExvY2F0b3IubG9jYXRlKHQpKTp0aGlzLnB0TG9jYXRvci5sb2NhdGUodCx0aGlzLnBhcmVudEdlb20pfSxmaW5kRWRnZTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubGluZUVkZ2VNYXAuZ2V0KHQpfXJldHVybiBKZS5wcm90b3R5cGUuZmluZEVkZ2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBQbn19KSxQbi5kZXRlcm1pbmVCb3VuZGFyeT1mdW5jdGlvbih0LGUpe3JldHVybiB0LmlzSW5Cb3VuZGFyeShlKT9TLkJPVU5EQVJZOlMuSU5URVJJT1J9LFRyKEFuLnByb3RvdHlwZSx7Y3JlYXRlRWRnZUVuZEZvck5leHQ6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bi5zZWdtZW50SW5kZXgrMTtpZihyPj10LmdldE51bVBvaW50cygpJiZudWxsPT09aSlyZXR1cm4gbnVsbDt2YXIgbz10LmdldENvb3JkaW5hdGUocik7bnVsbCE9PWkmJmkuc2VnbWVudEluZGV4PT09bi5zZWdtZW50SW5kZXgmJihvPWkuY29vcmQpO3ZhciBhPW5ldyBXZSh0LG4uY29vcmQsbyxuZXcga2UodC5nZXRMYWJlbCgpKSk7ZS5hZGQoYSl9LGNyZWF0ZUVkZ2VFbmRGb3JQcmV2OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPW4uc2VnbWVudEluZGV4O2lmKDA9PT1uLmRpc3Qpe2lmKDA9PT1yKXJldHVybiBudWxsO3ItLX12YXIgbz10LmdldENvb3JkaW5hdGUocik7bnVsbCE9PWkmJmkuc2VnbWVudEluZGV4Pj1yJiYobz1pLmNvb3JkKTt2YXIgYT1uZXcga2UodC5nZXRMYWJlbCgpKTthLmZsaXAoKTt2YXIgcz1uZXcgV2UodCxuLmNvb3JkLG8sYSk7ZS5hZGQocyl9LGNvbXB1dGVFZGdlRW5kczpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IF8sbj10O24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5jb21wdXRlRWRnZUVuZHMoaSxlKX1yZXR1cm4gZX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9ci5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpO2EuYWRkRW5kcG9pbnRzKCk7dmFyIHM9YS5pdGVyYXRvcigpLHU9bnVsbCxsPW51bGw7aWYoIXMuaGFzTmV4dCgpKXJldHVybiBudWxsO3ZhciBjPXMubmV4dCgpO2RvIHU9bCxsPWMsYz1udWxsLHMuaGFzTmV4dCgpJiYoYz1zLm5leHQoKSksbnVsbCE9PWwmJih0aGlzLmNyZWF0ZUVkZ2VFbmRGb3JQcmV2KHIsbyxsLHUpLHRoaXMuY3JlYXRlRWRnZUVuZEZvck5leHQocixvLGwsYykpO3doaWxlKG51bGwhPT1sKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEFufX0pLFByKExuLFdlKSxUcihMbi5wcm90b3R5cGUse2luc2VydDpmdW5jdGlvbih0KXt0aGlzLmVkZ2VFbmRzLmFkZCh0KX0scHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludGxuKFwiRWRnZUVuZEJ1bmRsZS0tPiBMYWJlbDogXCIrdGhpcy5sYWJlbCk7Zm9yKHZhciBlPXRoaXMuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspZS5uZXh0KCkucHJpbnQodCksdC5wcmludGxuKCl9LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZUVuZHMuaXRlcmF0b3IoKX0sZ2V0RWRnZUVuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlRW5kc30sY29tcHV0ZUxhYmVsT246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxpPSExLHI9dGhpcy5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCksYT1vLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCk7YT09PVMuQk9VTkRBUlkmJm4rKyxhPT09Uy5JTlRFUklPUiYmKGk9ITApfXZhciBhPVMuTk9ORTtpJiYoYT1TLklOVEVSSU9SKSxuPjAmJihhPVBuLmRldGVybWluZUJvdW5kYXJ5KGUsbikpLHRoaXMubGFiZWwuc2V0TG9jYXRpb24odCxhKX0sY29tcHV0ZUxhYmVsU2lkZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpLmdldExhYmVsKCkuaXNBcmVhKCkpe3ZhciByPWkuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0LGUpO2lmKHI9PT1TLklOVEVSSU9SKXJldHVybiB0aGlzLmxhYmVsLnNldExvY2F0aW9uKHQsZSxTLklOVEVSSU9SKSxudWxsO3I9PT1TLkVYVEVSSU9SJiZ0aGlzLmxhYmVsLnNldExvY2F0aW9uKHQsZSxTLkVYVEVSSU9SKX19fSxnZXRMYWJlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhYmVsfSxjb21wdXRlTGFiZWxTaWRlczpmdW5jdGlvbih0KXt0aGlzLmNvbXB1dGVMYWJlbFNpZGUodCxBZS5MRUZUKSx0aGlzLmNvbXB1dGVMYWJlbFNpZGUodCxBZS5SSUdIVCl9LHVwZGF0ZUlNOmZ1bmN0aW9uKHQpe1RuLnVwZGF0ZUlNKHRoaXMubGFiZWwsdCl9LGNvbXB1dGVMYWJlbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9ITEsbj10aGlzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KW4ubmV4dCgpLmdldExhYmVsKCkuaXNBcmVhKCkmJihlPSEwKTt0aGlzLmxhYmVsPWU/bmV3IGtlKFMuTk9ORSxTLk5PTkUsUy5OT05FKTpuZXcga2UoUy5OT05FKTtmb3IodmFyIGk9MDtpPDI7aSsrKXRoaXMuY29tcHV0ZUxhYmVsT24oaSx0KSxlJiZ0aGlzLmNvbXB1dGVMYWJlbFNpZGVzKGkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBMbn19KSxQcihObixVZSksVHIoTm4ucHJvdG90eXBlLHt1cGRhdGVJTTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyllLm5leHQoKS51cGRhdGVJTSh0KX0saW5zZXJ0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWRnZU1hcC5nZXQodCk7bnVsbD09PWU/KGU9bmV3IExuKHQpLHRoaXMuaW5zZXJ0RWRnZUVuZCh0LGUpKTplLmluc2VydCh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTm59fSksUHIoa24sWGUpLFRyKGtuLnByb3RvdHlwZSx7dXBkYXRlSU1Gcm9tRWRnZXM6ZnVuY3Rpb24odCl7dGhpcy5lZGdlcy51cGRhdGVJTSh0KX0sY29tcHV0ZUlNOmZ1bmN0aW9uKHQpe3Quc2V0QXRMZWFzdElmVmFsaWQodGhpcy5sYWJlbC5nZXRMb2NhdGlvbigwKSx0aGlzLmxhYmVsLmdldExvY2F0aW9uKDEpLDApfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBrbn19KSxQcihSbixIZSksVHIoUm4ucHJvdG90eXBlLHtjcmVhdGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcga24odCxuZXcgTm4pfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBSbn19KSxUcihEbi5wcm90b3R5cGUse2luc2VydEVkZ2VFbmRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLm5vZGVzLmFkZChuKX19LGdldE5vZGVJdGVyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzLml0ZXJhdG9yKCl9LGNvcHlOb2Rlc0FuZExhYmVsczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmdldE5vZGVJdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5ub2Rlcy5hZGROb2RlKGkuZ2V0Q29vcmRpbmF0ZSgpKS5zZXRMYWJlbChlLGkuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihlKSl9fSxidWlsZDpmdW5jdGlvbih0KXt0aGlzLmNvbXB1dGVJbnRlcnNlY3Rpb25Ob2Rlcyh0LDApLHRoaXMuY29weU5vZGVzQW5kTGFiZWxzKHQsMCk7dmFyIGU9bmV3IEFuLG49ZS5jb21wdXRlRWRnZUVuZHModC5nZXRFZGdlSXRlcmF0b3IoKSk7dGhpcy5pbnNlcnRFZGdlRW5kcyhuKX0sY29tcHV0ZUludGVyc2VjdGlvbk5vZGVzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZ2V0RWRnZUl0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KWZvcih2YXIgaT1uLm5leHQoKSxyPWkuZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbihlKSxvPWkuZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKS5pdGVyYXRvcigpO28uaGFzTmV4dCgpOyl7dmFyIGE9by5uZXh0KCkscz10aGlzLm5vZGVzLmFkZE5vZGUoYS5jb29yZCk7cj09PVMuQk9VTkRBUlk/cy5zZXRMYWJlbEJvdW5kYXJ5KGUpOnMuZ2V0TGFiZWwoKS5pc051bGwoZSkmJnMuc2V0TGFiZWwoZSxTLklOVEVSSU9SKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIERufX0pLFRyKEZuLnByb3RvdHlwZSx7aXNOb2RlRWRnZUFyZWFMYWJlbHNDb25zaXN0ZW50OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm9kZUdyYXBoLmdldE5vZGVJdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7aWYoIWUuZ2V0RWRnZXMoKS5pc0FyZWFMYWJlbHNDb25zaXN0ZW50KHRoaXMuZ2VvbUdyYXBoKSlyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnQ9ZS5nZXRDb29yZGluYXRlKCkuY29weSgpLCExfXJldHVybiEwfSxnZXRJbnZhbGlkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnR9LGhhc0R1cGxpY2F0ZVJpbmdzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubm9kZUdyYXBoLmdldE5vZGVJdGVyYXRvcigpO3QuaGFzTmV4dCgpOylmb3IodmFyIGU9dC5uZXh0KCksbj1lLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKGkuZ2V0RWRnZUVuZHMoKS5zaXplKCk+MSlyZXR1cm4gdGhpcy5pbnZhbGlkUG9pbnQ9aS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZSgwKSwhMH1yZXR1cm4hMX0saXNOb2RlQ29uc2lzdGVudEFyZWE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdlb21HcmFwaC5jb21wdXRlU2VsZk5vZGVzKHRoaXMubGksITAsITApO3JldHVybiB0Lmhhc1Byb3BlckludGVyc2VjdGlvbigpPyh0aGlzLmludmFsaWRQb2ludD10LmdldFByb3BlckludGVyc2VjdGlvblBvaW50KCksITEpOih0aGlzLm5vZGVHcmFwaC5idWlsZCh0aGlzLmdlb21HcmFwaCksdGhpcy5pc05vZGVFZGdlQXJlYUxhYmVsc0NvbnNpc3RlbnQoKSk7XG59LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEZufX0pLFRyKEJuLnByb3RvdHlwZSx7Z2V0Qm91bmRzOmZ1bmN0aW9uKCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBCbn19KSxUcihqbi5wcm90b3R5cGUse2dldEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3VuZHN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0JuLHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBqbn19KSxUcihVbi5wcm90b3R5cGUse3BvbGw6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLml0ZW1zLmdldCgxKTtyZXR1cm4gdGhpcy5pdGVtcy5zZXQoMSx0aGlzLml0ZW1zLmdldCh0aGlzLl9zaXplKSksdGhpcy5fc2l6ZS09MSx0aGlzLnJlb3JkZXIoMSksdH0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplfSxyZW9yZGVyOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dGhpcy5pdGVtcy5nZXQodCk7Mip0PD10aGlzLl9zaXplJiYoZT0yKnQsZSE9PXRoaXMuX3NpemUmJnRoaXMuaXRlbXMuZ2V0KGUrMSkuY29tcGFyZVRvKHRoaXMuaXRlbXMuZ2V0KGUpKTwwJiZlKyssdGhpcy5pdGVtcy5nZXQoZSkuY29tcGFyZVRvKG4pPDApO3Q9ZSl0aGlzLml0ZW1zLnNldCh0LHRoaXMuaXRlbXMuZ2V0KGUpKTt0aGlzLml0ZW1zLnNldCh0LG4pfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3NpemU9MCx0aGlzLml0ZW1zLmNsZWFyKCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuX3NpemV9LGFkZDpmdW5jdGlvbih0KXt0aGlzLml0ZW1zLmFkZChudWxsKSx0aGlzLl9zaXplKz0xO3ZhciBlPXRoaXMuX3NpemU7Zm9yKHRoaXMuaXRlbXMuc2V0KDAsdCk7dC5jb21wYXJlVG8odGhpcy5pdGVtcy5nZXQoTWF0aC50cnVuYyhlLzIpKSk8MDtlLz0yKXRoaXMuaXRlbXMuc2V0KGUsdGhpcy5pdGVtcy5nZXQoTWF0aC50cnVuYyhlLzIpKSk7dGhpcy5pdGVtcy5zZXQoZSx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVW59fSksVHIoem4ucHJvdG90eXBlLHtnZXRMZXZlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxldmVsfSxzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRCb3VuZGFibGVzLnNpemUoKX0sZ2V0Q2hpbGRCb3VuZGFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRCb3VuZGFibGVzfSxhZGRDaGlsZEJvdW5kYWJsZTpmdW5jdGlvbih0KXtjLmlzVHJ1ZShudWxsPT09dGhpcy5ib3VuZHMpLHRoaXMuY2hpbGRCb3VuZGFibGVzLmFkZCh0KX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkQm91bmRhYmxlcy5pc0VtcHR5KCl9LGdldEJvdW5kczpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5ib3VuZHMmJih0aGlzLmJvdW5kcz10aGlzLmNvbXB1dGVCb3VuZHMoKSksdGhpcy5ib3VuZHN9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0JuLHNdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB6bn19KSx6bi5zZXJpYWxWZXJzaW9uVUlEPTB4NWExZTU1ZWM0MTM2OTgwMCxUcihHbi5wcm90b3R5cGUse2V4cGFuZFRvUXVldWU6ZnVuY3Rpb24odCxlKXt2YXIgaT1Hbi5pc0NvbXBvc2l0ZSh0aGlzLmJvdW5kYWJsZTEpLHI9R24uaXNDb21wb3NpdGUodGhpcy5ib3VuZGFibGUyKTtpZihpJiZyKXJldHVybiBHbi5hcmVhKHRoaXMuYm91bmRhYmxlMSk+R24uYXJlYSh0aGlzLmJvdW5kYWJsZTIpPyh0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTEsdGhpcy5ib3VuZGFibGUyLHQsZSksbnVsbCk6KHRoaXMuZXhwYW5kKHRoaXMuYm91bmRhYmxlMix0aGlzLmJvdW5kYWJsZTEsdCxlKSxudWxsKTtpZihpKXJldHVybiB0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTEsdGhpcy5ib3VuZGFibGUyLHQsZSksbnVsbDtpZihyKXJldHVybiB0aGlzLmV4cGFuZCh0aGlzLmJvdW5kYWJsZTIsdGhpcy5ib3VuZGFibGUxLHQsZSksbnVsbDt0aHJvdyBuZXcgbihcIm5laXRoZXIgYm91bmRhYmxlIGlzIGNvbXBvc2l0ZVwiKX0saXNMZWF2ZXM6ZnVuY3Rpb24oKXtyZXR1cm4hKEduLmlzQ29tcG9zaXRlKHRoaXMuYm91bmRhYmxlMSl8fEduLmlzQ29tcG9zaXRlKHRoaXMuYm91bmRhYmxlMikpfSxjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gdGhpcy5fZGlzdGFuY2U8ZS5fZGlzdGFuY2U/LTE6dGhpcy5fZGlzdGFuY2U+ZS5fZGlzdGFuY2U/MTowfSxleHBhbmQ6ZnVuY3Rpb24odCxlLG4saSl7Zm9yKHZhciByPXQuZ2V0Q2hpbGRCb3VuZGFibGVzKCksbz1yLml0ZXJhdG9yKCk7by5oYXNOZXh0KCk7KXt2YXIgYT1vLm5leHQoKSxzPW5ldyBHbihhLGUsdGhpcy5pdGVtRGlzdGFuY2UpO3MuZ2V0RGlzdGFuY2UoKTxpJiZuLmFkZChzKX19LGdldEJvdW5kYWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/dGhpcy5ib3VuZGFibGUxOnRoaXMuYm91bmRhYmxlMn0sZ2V0RGlzdGFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdGFuY2V9LGRpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWF2ZXMoKT90aGlzLml0ZW1EaXN0YW5jZS5kaXN0YW5jZSh0aGlzLmJvdW5kYWJsZTEsdGhpcy5ib3VuZGFibGUyKTp0aGlzLmJvdW5kYWJsZTEuZ2V0Qm91bmRzKCkuZGlzdGFuY2UodGhpcy5ib3VuZGFibGUyLmdldEJvdW5kcygpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bcl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEdufX0pLEduLmFyZWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0Qm91bmRzKCkuZ2V0QXJlYSgpfSxHbi5pc0NvbXBvc2l0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHpufSxUcihWbi5wcm90b3R5cGUse2dldE5vZGVDYXBhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVDYXBhY2l0eX0sbGFzdE5vZGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0KHQuc2l6ZSgpLTEpfSxzaXplOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuaXNFbXB0eSgpPzA6KHRoaXMuYnVpbGQoKSx0aGlzLnNpemUodGhpcy5yb290KSk7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wLG49dC5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aSBpbnN0YW5jZW9mIHpuP2UrPXRoaXMuc2l6ZShpKTppIGluc3RhbmNlb2Ygam4mJihlKz0xKX1yZXR1cm4gZX19LHJlbW92ZUl0ZW06ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bnVsbCxpPXQuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO3IgaW5zdGFuY2VvZiBqbiYmci5nZXRJdGVtKCk9PT1lJiYobj1yKX1yZXR1cm4gbnVsbCE9PW4mJih0LmdldENoaWxkQm91bmRhYmxlcygpLnJlbW92ZShuKSwhMCl9LGl0ZW1zVHJlZTpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLmJ1aWxkKCk7dmFyIHQ9dGhpcy5pdGVtc1RyZWUodGhpcy5yb290KTtyZXR1cm4gbnVsbD09PXQ/bmV3IF86dH1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciBlPWFyZ3VtZW50c1swXSxuPW5ldyBfLGk9ZS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7aWYociBpbnN0YW5jZW9mIHpuKXt2YXIgbz10aGlzLml0ZW1zVHJlZShyKTtudWxsIT09byYmbi5hZGQobyl9ZWxzZSByIGluc3RhbmNlb2Ygam4/bi5hZGQoci5nZXRJdGVtKCkpOmMuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoKX1yZXR1cm4gbi5zaXplKCk8PTA/bnVsbDpufX0saW5zZXJ0OmZ1bmN0aW9uKHQsZSl7Yy5pc1RydWUoIXRoaXMuYnVpbHQsXCJDYW5ub3QgaW5zZXJ0IGl0ZW1zIGludG8gYW4gU1RSIHBhY2tlZCBSLXRyZWUgYWZ0ZXIgaXQgaGFzIGJlZW4gYnVpbHQuXCIpLHRoaXMuaXRlbUJvdW5kYWJsZXMuYWRkKG5ldyBqbih0LGUpKX0sYm91bmRhYmxlc0F0TGV2ZWw6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IF87cmV0dXJuIHRoaXMuYm91bmRhYmxlc0F0TGV2ZWwodCx0aGlzLnJvb3QsZSksZX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO2lmKGMuaXNUcnVlKG4+LTIpLGkuZ2V0TGV2ZWwoKT09PW4pcmV0dXJuIHIuYWRkKGkpLG51bGw7Zm9yKHZhciBvPWkuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXRlcmF0b3IoKTtvLmhhc05leHQoKTspe3ZhciBhPW8ubmV4dCgpO2EgaW5zdGFuY2VvZiB6bj90aGlzLmJvdW5kYWJsZXNBdExldmVsKG4sYSxyKTooYy5pc1RydWUoYSBpbnN0YW5jZW9mIGpuKSxuPT09LTEmJnIuYWRkKGEpKX1yZXR1cm4gbnVsbH19LHF1ZXJ5OmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmJ1aWxkKCk7dmFyIGU9bmV3IF87cmV0dXJuIHRoaXMuaXNFbXB0eSgpP2U6KHRoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyh0aGlzLnJvb3QuZ2V0Qm91bmRzKCksdCkmJnRoaXMucXVlcnkodCx0aGlzLnJvb3QsZSksZSl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXTtpZih0aGlzLmJ1aWxkKCksdGhpcy5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHRoaXMucm9vdC5nZXRCb3VuZHMoKSxuKSYmdGhpcy5xdWVyeShuLHRoaXMucm9vdCxpKX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKExyKGFyZ3VtZW50c1syXSx2ZSkmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgT2JqZWN0JiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIHpuKWZvcih2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl0scz1vLmdldENoaWxkQm91bmRhYmxlcygpLHU9MDt1PHMuc2l6ZSgpO3UrKyl7dmFyIGw9cy5nZXQodSk7dGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKGwuZ2V0Qm91bmRzKCkscikmJihsIGluc3RhbmNlb2Ygem4/dGhpcy5xdWVyeShyLGwsYSk6bCBpbnN0YW5jZW9mIGpuP2EudmlzaXRJdGVtKGwuZ2V0SXRlbSgpKTpjLnNob3VsZE5ldmVyUmVhY2hIZXJlKCkpfWVsc2UgaWYoTHIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB6bilmb3IodmFyIGg9YXJndW1lbnRzWzBdLGY9YXJndW1lbnRzWzFdLGQ9YXJndW1lbnRzWzJdLHM9Zi5nZXRDaGlsZEJvdW5kYWJsZXMoKSx1PTA7dTxzLnNpemUoKTt1Kyspe3ZhciBsPXMuZ2V0KHUpO3RoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyhsLmdldEJvdW5kcygpLGgpJiYobCBpbnN0YW5jZW9mIHpuP3RoaXMucXVlcnkoaCxsLGQpOmwgaW5zdGFuY2VvZiBqbj9kLmFkZChsLmdldEl0ZW0oKSk6Yy5zaG91bGROZXZlclJlYWNoSGVyZSgpKX19LGJ1aWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbHQ/bnVsbDoodGhpcy5yb290PXRoaXMuaXRlbUJvdW5kYWJsZXMuaXNFbXB0eSgpP3RoaXMuY3JlYXRlTm9kZSgwKTp0aGlzLmNyZWF0ZUhpZ2hlckxldmVscyh0aGlzLml0ZW1Cb3VuZGFibGVzLC0xKSx0aGlzLml0ZW1Cb3VuZGFibGVzPW51bGwsdGhpcy5idWlsdD0hMCx2b2lkIDApfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVpbGQoKSx0aGlzLnJvb3R9LHJlbW92ZTpmdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIHRoaXMuYnVpbGQoKSwhIXRoaXMuZ2V0SW50ZXJzZWN0c09wKCkuaW50ZXJzZWN0cyh0aGlzLnJvb3QuZ2V0Qm91bmRzKCksdCkmJnRoaXMucmVtb3ZlKHQsdGhpcy5yb290LGUpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1hcmd1bWVudHNbMl0sbz10aGlzLnJlbW92ZUl0ZW0oaSxyKTtpZihvKXJldHVybiEwO2Zvcih2YXIgYT1udWxsLHM9aS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO3MuaGFzTmV4dCgpOyl7dmFyIHU9cy5uZXh0KCk7aWYodGhpcy5nZXRJbnRlcnNlY3RzT3AoKS5pbnRlcnNlY3RzKHUuZ2V0Qm91bmRzKCksbikmJnUgaW5zdGFuY2VvZiB6biYmKG89dGhpcy5yZW1vdmUobix1LHIpKSl7YT11O2JyZWFrfX1yZXR1cm4gbnVsbCE9PWEmJmEuZ2V0Q2hpbGRCb3VuZGFibGVzKCkuaXNFbXB0eSgpJiZpLmdldENoaWxkQm91bmRhYmxlcygpLnJlbW92ZShhKSxvfX0sY3JlYXRlSGlnaGVyTGV2ZWxzOmZ1bmN0aW9uKHQsZSl7Yy5pc1RydWUoIXQuaXNFbXB0eSgpKTt2YXIgbj10aGlzLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXModCxlKzEpO3JldHVybiAxPT09bi5zaXplKCk/bi5nZXQoMCk6dGhpcy5jcmVhdGVIaWdoZXJMZXZlbHMobixlKzEpfSxkZXB0aDpmdW5jdGlvbigpe2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmlzRW1wdHkoKT8wOih0aGlzLmJ1aWxkKCksdGhpcy5kZXB0aCh0aGlzLnJvb3QpKTtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPTAsbj10LmdldENoaWxkQm91bmRhYmxlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpIGluc3RhbmNlb2Ygem4pe3ZhciByPXRoaXMuZGVwdGgoaSk7cj5lJiYoZT1yKX19cmV0dXJuIGUrMX19LGNyZWF0ZVBhcmVudEJvdW5kYWJsZXM6ZnVuY3Rpb24odCxlKXtjLmlzVHJ1ZSghdC5pc0VtcHR5KCkpO3ZhciBuPW5ldyBfO24uYWRkKHRoaXMuY3JlYXRlTm9kZShlKSk7dmFyIGk9bmV3IF8odCk7SnIuc29ydChpLHRoaXMuZ2V0Q29tcGFyYXRvcigpKTtmb3IodmFyIHI9aS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCk7dGhpcy5sYXN0Tm9kZShuKS5nZXRDaGlsZEJvdW5kYWJsZXMoKS5zaXplKCk9PT10aGlzLmdldE5vZGVDYXBhY2l0eSgpJiZuLmFkZCh0aGlzLmNyZWF0ZU5vZGUoZSkpLHRoaXMubGFzdE5vZGUobikuYWRkQ2hpbGRCb3VuZGFibGUobyl9cmV0dXJuIG59LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWlsdD90aGlzLnJvb3QuaXNFbXB0eSgpOnRoaXMuaXRlbUJvdW5kYWJsZXMuaXNFbXB0eSgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVm59fSksVm4uY29tcGFyZURvdWJsZXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD5lPzE6dDxlPy0xOjB9LFZuLkludGVyc2VjdHNPcD1YbixWbi5zZXJpYWxWZXJzaW9uVUlEPS0weDM1ZWY2NGM4MmQ0YzU0MDAsVm4uREVGQVVMVF9OT0RFX0NBUEFDSVRZPTEwLFRyKEhuLnByb3RvdHlwZSx7ZGlzdGFuY2U6ZnVuY3Rpb24odCxlKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEhufX0pLFByKHFuLFZuKSxUcihxbi5wcm90b3R5cGUse2NyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZXM6ZnVuY3Rpb24odCxlKXtjLmlzVHJ1ZSh0Lmxlbmd0aD4wKTtmb3IodmFyIG49bmV3IF8saT0wO2k8dC5sZW5ndGg7aSsrKW4uYWRkQWxsKHRoaXMuY3JlYXRlUGFyZW50Qm91bmRhYmxlc0Zyb21WZXJ0aWNhbFNsaWNlKHRbaV0sZSkpO3JldHVybiBufSxjcmVhdGVOb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgWW4odCl9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/Vm4ucHJvdG90eXBlLnNpemUuY2FsbCh0aGlzKTpWbi5wcm90b3R5cGUuc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGluc2VydDpmdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBWbi5wcm90b3R5cGUuaW5zZXJ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIHQuaXNOdWxsKCk/bnVsbDp2b2lkIFZuLnByb3RvdHlwZS5pbnNlcnQuY2FsbCh0aGlzLHQsZSl9LGdldEludGVyc2VjdHNPcDpmdW5jdGlvbigpe3JldHVybiBxbi5pbnRlcnNlY3RzT3B9LHZlcnRpY2FsU2xpY2VzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU1hdGgudHJ1bmMoTWF0aC5jZWlsKHQuc2l6ZSgpL2UpKSxpPW5ldyBBcnJheShlKS5maWxsKG51bGwpLHI9dC5pdGVyYXRvcigpLG89MDtvPGU7bysrKXtpW29dPW5ldyBfO2Zvcih2YXIgYT0wO3IuaGFzTmV4dCgpJiZhPG47KXt2YXIgcz1yLm5leHQoKTtpW29dLmFkZChzKSxhKyt9fXJldHVybiBpfSxxdWVyeTpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIFZuLnByb3RvdHlwZS5xdWVyeS5jYWxsKHRoaXMsdCl9aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXTtWbi5wcm90b3R5cGUucXVlcnkuY2FsbCh0aGlzLGUsbil9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aClpZihMcihhcmd1bWVudHNbMl0sdmUpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB6bil7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLG89YXJndW1lbnRzWzJdO1ZuLnByb3RvdHlwZS5xdWVyeS5jYWxsKHRoaXMsaSxyLG8pfWVsc2UgaWYoTHIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIE9iamVjdCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiB6bil7dmFyIGE9YXJndW1lbnRzWzBdLHM9YXJndW1lbnRzWzFdLHU9YXJndW1lbnRzWzJdO1ZuLnByb3RvdHlwZS5xdWVyeS5jYWxsKHRoaXMsYSxzLHUpfX0sZ2V0Q29tcGFyYXRvcjpmdW5jdGlvbigpe3JldHVybiBxbi55Q29tcGFyYXRvcn0sY3JlYXRlUGFyZW50Qm91bmRhYmxlc0Zyb21WZXJ0aWNhbFNsaWNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIFZuLnByb3RvdHlwZS5jcmVhdGVQYXJlbnRCb3VuZGFibGVzLmNhbGwodGhpcyx0LGUpfSxyZW1vdmU6ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiBWbi5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyx0LGUpfXJldHVybiBWbi5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/Vm4ucHJvdG90eXBlLmRlcHRoLmNhbGwodGhpcyk6Vm4ucHJvdG90eXBlLmRlcHRoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY3JlYXRlUGFyZW50Qm91bmRhYmxlczpmdW5jdGlvbih0LGUpe2MuaXNUcnVlKCF0LmlzRW1wdHkoKSk7dmFyIG49TWF0aC50cnVuYyhNYXRoLmNlaWwodC5zaXplKCkvdGhpcy5nZXROb2RlQ2FwYWNpdHkoKSkpLGk9bmV3IF8odCk7SnIuc29ydChpLHFuLnhDb21wYXJhdG9yKTt2YXIgcj10aGlzLnZlcnRpY2FsU2xpY2VzKGksTWF0aC50cnVuYyhNYXRoLmNlaWwoTWF0aC5zcXJ0KG4pKSkpO3JldHVybiB0aGlzLmNyZWF0ZVBhcmVudEJvdW5kYWJsZXNGcm9tVmVydGljYWxTbGljZXMocixlKX0sbmVhcmVzdE5laWdoYm91cjpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihMcihhcmd1bWVudHNbMF0sSG4pKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1uZXcgR24odGhpcy5nZXRSb290KCksdGhpcy5nZXRSb290KCksdCk7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cihlKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEduKXt2YXIgbj1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cihuLGkuUE9TSVRJVkVfSU5GSU5JVFkpfX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIHFuJiZMcihhcmd1bWVudHNbMV0sSG4pKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sZT1uZXcgR24odGhpcy5nZXRSb290KCksci5nZXRSb290KCksbyk7cmV0dXJuIHRoaXMubmVhcmVzdE5laWdoYm91cihlKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEduJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgYT1hcmd1bWVudHNbMF0scz1hcmd1bWVudHNbMV0sdT1zLGw9bnVsbCxjPW5ldyBVbjtmb3IoYy5hZGQoYSk7IWMuaXNFbXB0eSgpJiZ1PjA7KXt2YXIgaD1jLnBvbGwoKSxmPWguZ2V0RGlzdGFuY2UoKTtpZihmPj11KWJyZWFrO2guaXNMZWF2ZXMoKT8odT1mLGw9aCk6aC5leHBhbmRUb1F1ZXVlKGMsdSl9cmV0dXJuW2wuZ2V0Qm91bmRhYmxlKDApLmdldEl0ZW0oKSxsLmdldEJvdW5kYWJsZSgxKS5nZXRJdGVtKCldfX1lbHNlIGlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1hcmd1bWVudHNbMF0scD1hcmd1bWVudHNbMV0sZz1hcmd1bWVudHNbMl0sdj1uZXcgam4oZCxwKSxlPW5ldyBHbih0aGlzLmdldFJvb3QoKSx2LGcpO3JldHVybiB0aGlzLm5lYXJlc3ROZWlnaGJvdXIoZSlbMF19fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltnZSxzXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcW59fSkscW4uY2VudHJlWD1mdW5jdGlvbih0KXtyZXR1cm4gcW4uYXZnKHQuZ2V0TWluWCgpLHQuZ2V0TWF4WCgpKX0scW4uYXZnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQrZSkvMn0scW4uY2VudHJlWT1mdW5jdGlvbih0KXtyZXR1cm4gcW4uYXZnKHQuZ2V0TWluWSgpLHQuZ2V0TWF4WSgpKX0sUHIoWW4sem4pLFRyKFluLnByb3RvdHlwZSx7Y29tcHV0ZUJvdW5kczpmdW5jdGlvbigpe2Zvcih2YXIgdD1udWxsLGU9dGhpcy5nZXRDaGlsZEJvdW5kYWJsZXMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bnVsbD09PXQ/dD1uZXcgeChuLmdldEJvdW5kcygpKTp0LmV4cGFuZFRvSW5jbHVkZShuLmdldEJvdW5kcygpKX1yZXR1cm4gdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gWW59fSkscW4uU1RSdHJlZU5vZGU9WW4scW4uc2VyaWFsVmVyc2lvblVJRD0weDM5OTIwZjdkNWYyNjFlMCxxbi54Q29tcGFyYXRvcj17aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bYV19LGNvbXBhcmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gVm4uY29tcGFyZURvdWJsZXMocW4uY2VudHJlWCh0LmdldEJvdW5kcygpKSxxbi5jZW50cmVYKGUuZ2V0Qm91bmRzKCkpKX19LHFuLnlDb21wYXJhdG9yPXtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblthXX0sY29tcGFyZTpmdW5jdGlvbih0LGUpe3JldHVybiBWbi5jb21wYXJlRG91Ymxlcyhxbi5jZW50cmVZKHQuZ2V0Qm91bmRzKCkpLHFuLmNlbnRyZVkoZS5nZXRCb3VuZHMoKSkpfX0scW4uaW50ZXJzZWN0c09wPXtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltJbnRlcnNlY3RzT3BdfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW50ZXJzZWN0cyhlKX19LHFuLkRFRkFVTFRfTk9ERV9DQVBBQ0lUWT0xMCxUcihXbi5wcm90b3R5cGUse2J1aWxkSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLmluZGV4PW5ldyBxbjtmb3IodmFyIHQ9MDt0PHRoaXMucmluZ3Muc2l6ZSgpO3QrKyl7dmFyIGU9dGhpcy5yaW5ncy5nZXQodCksbj1lLmdldEVudmVsb3BlSW50ZXJuYWwoKTt0aGlzLmluZGV4Lmluc2VydChuLGUpfX0sZ2V0TmVzdGVkUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXN0ZWRQdH0saXNOb25OZXN0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmJ1aWxkSW5kZXgoKTtmb3IodmFyIHQ9MDt0PHRoaXMucmluZ3Muc2l6ZSgpO3QrKylmb3IodmFyIGU9dGhpcy5yaW5ncy5nZXQodCksbj1lLmdldENvb3JkaW5hdGVzKCksaT10aGlzLmluZGV4LnF1ZXJ5KGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSxyPTA7cjxpLnNpemUoKTtyKyspe3ZhciBvPWkuZ2V0KHIpLGE9by5nZXRDb29yZGluYXRlcygpO2lmKGUhPT1vJiZlLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKG8uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSl7dmFyIHM9Sm4uZmluZFB0Tm90Tm9kZShuLG8sdGhpcy5ncmFwaCk7aWYobnVsbCE9PXMpe3ZhciB1PWFlLmlzUG9pbnRJblJpbmcocyxhKTtpZih1KXJldHVybiB0aGlzLm5lc3RlZFB0PXMsITF9fX1yZXR1cm4hMH0sYWRkOmZ1bmN0aW9uKHQpe3RoaXMucmluZ3MuYWRkKHQpLHRoaXMudG90YWxFbnYuZXhwYW5kVG9JbmNsdWRlKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gV259fSksVHIoWm4ucHJvdG90eXBlLHtnZXRFcnJvclR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvclR5cGV9LGdldE1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gWm4uZXJyTXNnW3RoaXMuZXJyb3JUeXBlXX0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciB0PVwiXCI7cmV0dXJuIG51bGwhPT10aGlzLnB0JiYodD1cIiBhdCBvciBuZWFyIHBvaW50IFwiK3RoaXMucHQpLHRoaXMuZ2V0TWVzc2FnZSgpK3R9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFpufX0pLFpuLkVSUk9SPTAsWm4uUkVQRUFURURfUE9JTlQ9MSxabi5IT0xFX09VVFNJREVfU0hFTEw9Mixabi5ORVNURURfSE9MRVM9Myxabi5ESVNDT05ORUNURURfSU5URVJJT1I9NCxabi5TRUxGX0lOVEVSU0VDVElPTj01LFpuLlJJTkdfU0VMRl9JTlRFUlNFQ1RJT049Nixabi5ORVNURURfU0hFTExTPTcsWm4uRFVQTElDQVRFX1JJTkdTPTgsWm4uVE9PX0ZFV19QT0lOVFM9OSxabi5JTlZBTElEX0NPT1JESU5BVEU9MTAsWm4uUklOR19OT1RfQ0xPU0VEPTExLFpuLmVyck1zZz1bXCJUb3BvbG9neSBWYWxpZGF0aW9uIEVycm9yXCIsXCJSZXBlYXRlZCBQb2ludFwiLFwiSG9sZSBsaWVzIG91dHNpZGUgc2hlbGxcIixcIkhvbGVzIGFyZSBuZXN0ZWRcIixcIkludGVyaW9yIGlzIGRpc2Nvbm5lY3RlZFwiLFwiU2VsZi1pbnRlcnNlY3Rpb25cIixcIlJpbmcgU2VsZi1pbnRlcnNlY3Rpb25cIixcIk5lc3RlZCBzaGVsbHNcIixcIkR1cGxpY2F0ZSBSaW5nc1wiLFwiVG9vIGZldyBkaXN0aW5jdCBwb2ludHMgaW4gZ2VvbWV0cnkgY29tcG9uZW50XCIsXCJJbnZhbGlkIENvb3JkaW5hdGVcIixcIlJpbmcgaXMgbm90IGNsb3NlZFwiXSxUcihKbi5wcm90b3R5cGUse2NoZWNrSW52YWxpZENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIUpuLmlzVmFsaWQodFtlXSkpcmV0dXJuIHRoaXMudmFsaWRFcnI9bmV3IFpuKFpuLklOVkFMSURfQ09PUkRJTkFURSx0W2VdKSxudWxsfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBNdCl7dmFyIG49YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMobi5nZXRFeHRlcmlvclJpbmcoKS5nZXRDb29yZGluYXRlcygpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtmb3IodmFyIGU9MDtlPG4uZ2V0TnVtSW50ZXJpb3JSaW5nKCk7ZSsrKWlmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMobi5nZXRJbnRlcmlvclJpbmdOKGUpLmdldENvb3JkaW5hdGVzKCkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfX0sY2hlY2tIb2xlc05vdE5lc3RlZDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgV24oZSksaT0wO2k8dC5nZXROdW1JbnRlcmlvclJpbmcoKTtpKyspe3ZhciByPXQuZ2V0SW50ZXJpb3JSaW5nTihpKTtuLmFkZChyKX1uLmlzTm9uTmVzdGVkKCl8fCh0aGlzLnZhbGlkRXJyPW5ldyBabihabi5ORVNURURfSE9MRVMsbi5nZXROZXN0ZWRQb2ludCgpKSl9LGNoZWNrQ29uc2lzdGVudEFyZWE6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEZuKHQpO3JldHVybiBlLmlzTm9kZUNvbnNpc3RlbnRBcmVhKCk/dm9pZChlLmhhc0R1cGxpY2F0ZVJpbmdzKCkmJih0aGlzLnZhbGlkRXJyPW5ldyBabihabi5EVVBMSUNBVEVfUklOR1MsZS5nZXRJbnZhbGlkUG9pbnQoKSkpKToodGhpcy52YWxpZEVycj1uZXcgWm4oWm4uU0VMRl9JTlRFUlNFQ1RJT04sZS5nZXRJbnZhbGlkUG9pbnQoKSksbnVsbCl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja1ZhbGlkKHRoaXMucGFyZW50R2VvbWV0cnkpLG51bGw9PT10aGlzLnZhbGlkRXJyfSxjaGVja1NoZWxsSW5zaWRlSG9sZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRDb29yZGluYXRlcygpLHI9ZS5nZXRDb29yZGluYXRlcygpLG89Sm4uZmluZFB0Tm90Tm9kZShpLGUsbik7aWYobnVsbCE9PW8mJiFhZS5pc1BvaW50SW5SaW5nKG8scikpcmV0dXJuIG87dmFyIGE9Sm4uZmluZFB0Tm90Tm9kZShyLHQsbik7cmV0dXJuIG51bGwhPT1hP2FlLmlzUG9pbnRJblJpbmcoYSxpKT9hOm51bGw6KGMuc2hvdWxkTmV2ZXJSZWFjaEhlcmUoXCJwb2ludHMgaW4gc2hlbGwgYW5kIGhvbGUgYXBwZWFyIHRvIGJlIGVxdWFsXCIpLG51bGwpfSxjaGVja05vU2VsZkludGVyc2VjdGluZ1JpbmdzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldEVkZ2VJdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7aWYodGhpcy5jaGVja05vU2VsZkludGVyc2VjdGluZ1Jpbmcobi5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbH19LGNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBLZSh0KTtlLmlzSW50ZXJpb3JzQ29ubmVjdGVkKCl8fCh0aGlzLnZhbGlkRXJyPW5ldyBabihabi5ESVNDT05ORUNURURfSU5URVJJT1IsZS5nZXRDb29yZGluYXRlKCkpKX0sY2hlY2tOb1NlbGZJbnRlcnNlY3RpbmdSaW5nOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgcnQsbj0hMCxpPXQuaXRlcmF0b3IoKTtpLmhhc05leHQoKTspe3ZhciByPWkubmV4dCgpO2lmKG4pbj0hMTtlbHNle2lmKGUuY29udGFpbnMoci5jb29yZCkpcmV0dXJuIHRoaXMudmFsaWRFcnI9bmV3IFpuKFpuLlJJTkdfU0VMRl9JTlRFUlNFQ1RJT04sci5jb29yZCksbnVsbDtlLmFkZChyLmNvb3JkKX19fSxjaGVja0hvbGVzSW5TaGVsbDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmdldEV4dGVyaW9yUmluZygpLGk9bmV3IGxuKG4pLHI9MDtyPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7cisrKXt2YXIgbz10LmdldEludGVyaW9yUmluZ04ociksYT1Kbi5maW5kUHROb3ROb2RlKG8uZ2V0Q29vcmRpbmF0ZXMoKSxuLGUpO2lmKG51bGw9PT1hKXJldHVybiBudWxsO2lmKCFpLmlzSW5zaWRlKGEpKXJldHVybiB0aGlzLnZhbGlkRXJyPW5ldyBabihabi5IT0xFX09VVFNJREVfU0hFTEwsYSksbnVsbH19LGNoZWNrVG9vRmV3UG9pbnRzOmZ1bmN0aW9uKHQpe2lmKHQuaGFzVG9vRmV3UG9pbnRzKCkpcmV0dXJuIHRoaXMudmFsaWRFcnI9bmV3IFpuKFpuLlRPT19GRVdfUE9JTlRTLHQuZ2V0SW52YWxpZFBvaW50KCkpLG51bGx9LGdldFZhbGlkYXRpb25FcnJvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrVmFsaWQodGhpcy5wYXJlbnRHZW9tZXRyeSksdGhpcy52YWxpZEVycn0sY2hlY2tWYWxpZDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgRXQpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmNoZWNrSW52YWxpZENvb3JkaW5hdGVzKHQuZ2V0Q29vcmRpbmF0ZXMoKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEN0KXt2YXIgZT1hcmd1bWVudHNbMF07dGhpcy5jaGVja0ludmFsaWRDb29yZGluYXRlcyhlLmdldENvb3JkaW5hdGVzKCkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBJdCl7dmFyIG49YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMobi5nZXRDb29yZGluYXRlcygpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtpZih0aGlzLmNoZWNrQ2xvc2VkUmluZyhuKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt2YXIgaT1uZXcgUG4oMCxuKTtpZih0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKGkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO3ZhciByPW5ldyBpZTtpLmNvbXB1dGVTZWxmTm9kZXMociwhMCwhMCksdGhpcy5jaGVja05vU2VsZkludGVyc2VjdGluZ1JpbmdzKGkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiB4dCl7dmFyIG89YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMoby5nZXRDb29yZGluYXRlcygpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt2YXIgaT1uZXcgUG4oMCxvKTt0aGlzLmNoZWNrVG9vRmV3UG9pbnRzKGkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBNdCl7dmFyIGE9YXJndW1lbnRzWzBdO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMoYSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7aWYodGhpcy5jaGVja0Nsb3NlZFJpbmdzKGEpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO3ZhciBpPW5ldyBQbigwLGEpO2lmKHRoaXMuY2hlY2tUb29GZXdQb2ludHMoaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7aWYodGhpcy5jaGVja0NvbnNpc3RlbnRBcmVhKGkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO2lmKCF0aGlzLmlzU2VsZlRvdWNoaW5nUmluZ0Zvcm1pbmdIb2xlVmFsaWQmJih0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3MoaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpKXJldHVybiBudWxsO2lmKHRoaXMuY2hlY2tIb2xlc0luU2hlbGwoYSxpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDtpZih0aGlzLmNoZWNrSG9sZXNOb3ROZXN0ZWQoYSxpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt0aGlzLmNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzKGkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPdCl7Zm9yKHZhciBzPWFyZ3VtZW50c1swXSx1PTA7dTxzLmdldE51bUdlb21ldHJpZXMoKTt1Kyspe3ZhciBsPXMuZ2V0R2VvbWV0cnlOKHUpO2lmKHRoaXMuY2hlY2tJbnZhbGlkQ29vcmRpbmF0ZXMobCksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7aWYodGhpcy5jaGVja0Nsb3NlZFJpbmdzKGwpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfXZhciBpPW5ldyBQbigwLHMpO2lmKHRoaXMuY2hlY2tUb29GZXdQb2ludHMoaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7aWYodGhpcy5jaGVja0NvbnNpc3RlbnRBcmVhKGkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsO2lmKCF0aGlzLmlzU2VsZlRvdWNoaW5nUmluZ0Zvcm1pbmdIb2xlVmFsaWQmJih0aGlzLmNoZWNrTm9TZWxmSW50ZXJzZWN0aW5nUmluZ3MoaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpKXJldHVybiBudWxsO2Zvcih2YXIgdT0wO3U8cy5nZXROdW1HZW9tZXRyaWVzKCk7dSsrKXt2YXIgbD1zLmdldEdlb21ldHJ5Tih1KTtpZih0aGlzLmNoZWNrSG9sZXNJblNoZWxsKGwsaSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGx9Zm9yKHZhciB1PTA7dTxzLmdldE51bUdlb21ldHJpZXMoKTt1Kyspe3ZhciBsPXMuZ2V0R2VvbWV0cnlOKHUpO2lmKHRoaXMuY2hlY2tIb2xlc05vdE5lc3RlZChsLGkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfWlmKHRoaXMuY2hlY2tTaGVsbHNOb3ROZXN0ZWQocyxpKSxudWxsIT09dGhpcy52YWxpZEVycilyZXR1cm4gbnVsbDt0aGlzLmNoZWNrQ29ubmVjdGVkSW50ZXJpb3JzKGkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBsdClmb3IodmFyIGM9YXJndW1lbnRzWzBdLHU9MDt1PGMuZ2V0TnVtR2VvbWV0cmllcygpO3UrKyl7dmFyIGg9Yy5nZXRHZW9tZXRyeU4odSk7aWYodGhpcy5jaGVja1ZhbGlkKGgpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgZj1hcmd1bWVudHNbMF07aWYodGhpcy52YWxpZEVycj1udWxsLGYuaXNFbXB0eSgpKXJldHVybiBudWxsO2lmKGYgaW5zdGFuY2VvZiBFdCl0aGlzLmNoZWNrVmFsaWQoZik7ZWxzZSBpZihmIGluc3RhbmNlb2YgQ3QpdGhpcy5jaGVja1ZhbGlkKGYpO2Vsc2UgaWYoZiBpbnN0YW5jZW9mIEl0KXRoaXMuY2hlY2tWYWxpZChmKTtlbHNlIGlmKGYgaW5zdGFuY2VvZiB4dCl0aGlzLmNoZWNrVmFsaWQoZik7ZWxzZSBpZihmIGluc3RhbmNlb2YgTXQpdGhpcy5jaGVja1ZhbGlkKGYpO2Vsc2UgaWYoZiBpbnN0YW5jZW9mIE90KXRoaXMuY2hlY2tWYWxpZChmKTtlbHNle2lmKCEoZiBpbnN0YW5jZW9mIGx0KSl0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oZi5nZXRDbGFzcygpLmdldE5hbWUoKSk7dGhpcy5jaGVja1ZhbGlkKGYpfX19LHNldFNlbGZUb3VjaGluZ1JpbmdGb3JtaW5nSG9sZVZhbGlkOmZ1bmN0aW9uKHQpe3RoaXMuaXNTZWxmVG91Y2hpbmdSaW5nRm9ybWluZ0hvbGVWYWxpZD10fSxjaGVja1NoZWxsTm90TmVzdGVkOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldENvb3JkaW5hdGVzKCkscj1lLmdldEV4dGVyaW9yUmluZygpLG89ci5nZXRDb29yZGluYXRlcygpLGE9Sm4uZmluZFB0Tm90Tm9kZShpLHIsbik7aWYobnVsbD09PWEpcmV0dXJuIG51bGw7aWYoIWFlLmlzUG9pbnRJblJpbmcoYSxvKSlyZXR1cm4gbnVsbDtpZihlLmdldE51bUludGVyaW9yUmluZygpPD0wKXJldHVybiB0aGlzLnZhbGlkRXJyPW5ldyBabihabi5ORVNURURfU0hFTExTLGEpLG51bGw7Zm9yKHZhciBzPW51bGwsdT0wO3U8ZS5nZXROdW1JbnRlcmlvclJpbmcoKTt1Kyspe3ZhciBsPWUuZ2V0SW50ZXJpb3JSaW5nTih1KTtpZihudWxsPT09KHM9dGhpcy5jaGVja1NoZWxsSW5zaWRlSG9sZSh0LGwsbikpKXJldHVybiBudWxsfXRoaXMudmFsaWRFcnI9bmV3IFpuKFpuLk5FU1RFRF9TSEVMTFMscyl9LGNoZWNrQ2xvc2VkUmluZ3M6ZnVuY3Rpb24odCl7aWYodGhpcy5jaGVja0Nsb3NlZFJpbmcodC5nZXRFeHRlcmlvclJpbmcoKSksbnVsbCE9PXRoaXMudmFsaWRFcnIpcmV0dXJuIG51bGw7Zm9yKHZhciBlPTA7ZTx0LmdldE51bUludGVyaW9yUmluZygpO2UrKylpZih0aGlzLmNoZWNrQ2xvc2VkUmluZyh0LmdldEludGVyaW9yUmluZ04oZSkpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfSxjaGVja0Nsb3NlZFJpbmc6ZnVuY3Rpb24odCl7aWYoIXQuaXNDbG9zZWQoKSl7dmFyIGU9bnVsbDt0LmdldE51bVBvaW50cygpPj0xJiYoZT10LmdldENvb3JkaW5hdGVOKDApKSx0aGlzLnZhbGlkRXJyPW5ldyBabihabi5SSU5HX05PVF9DTE9TRUQsZSl9fSxjaGVja1NoZWxsc05vdE5lc3RlZDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dC5nZXROdW1HZW9tZXRyaWVzKCk7bisrKWZvcih2YXIgaT10LmdldEdlb21ldHJ5TihuKSxyPWkuZ2V0RXh0ZXJpb3JSaW5nKCksbz0wO288dC5nZXROdW1HZW9tZXRyaWVzKCk7bysrKWlmKG4hPT1vKXt2YXIgYT10LmdldEdlb21ldHJ5TihvKTtpZih0aGlzLmNoZWNrU2hlbGxOb3ROZXN0ZWQocixhLGUpLG51bGwhPT10aGlzLnZhbGlkRXJyKXJldHVybiBudWxsfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSm59fSksSm4uZmluZFB0Tm90Tm9kZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPW4uZmluZEVkZ2UoZSkscj1pLmdldEVkZ2VJbnRlcnNlY3Rpb25MaXN0KCksbz0wO288dC5sZW5ndGg7bysrKXt2YXIgYT10W29dO2lmKCFyLmlzSW50ZXJzZWN0aW9uKGEpKXJldHVybiBhfXJldHVybiBudWxsfSxKbi5pc1ZhbGlkPWZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXJldHVybiBuZXcgSm4oYXJndW1lbnRzWzBdKS5pc1ZhbGlkKCk7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIShpLmlzTmFOKHQueCl8fGkuaXNJbmZpbml0ZSh0LngpfHxpLmlzTmFOKHQueSl8fGkuaXNJbmZpbml0ZSh0LnkpKX19LFRyKEtuLnByb3RvdHlwZSx7dHJhbnNmb3JtUG9pbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvaW50KHRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSl9LHRyYW5zZm9ybVBvbHlnb246ZnVuY3Rpb24odCxlKXt2YXIgbj0hMCxpPXRoaXMudHJhbnNmb3JtTGluZWFyUmluZyh0LmdldEV4dGVyaW9yUmluZygpLHQpO251bGwhPT1pJiZpIGluc3RhbmNlb2YgSXQmJiFpLmlzRW1wdHkoKXx8KG49ITEpO2Zvcih2YXIgcj1uZXcgXyxvPTA7bzx0LmdldE51bUludGVyaW9yUmluZygpO28rKyl7dmFyIGE9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKHQuZ2V0SW50ZXJpb3JSaW5nTihvKSx0KTtudWxsPT09YXx8YS5pc0VtcHR5KCl8fChhIGluc3RhbmNlb2YgSXR8fChuPSExKSxyLmFkZChhKSl9aWYobilyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvbHlnb24oaSxyLnRvQXJyYXkoW10pKTt2YXIgcz1uZXcgXztyZXR1cm4gbnVsbCE9PWkmJnMuYWRkKGkpLHMuYWRkQWxsKHIpLHRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KHMpfSxjcmVhdGVDb29yZGluYXRlU2VxdWVuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmFjdG9yeS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHQpfSxnZXRJbnB1dEdlb21ldHJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXRHZW9tfSx0cmFuc2Zvcm1NdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IF8saT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj10aGlzLnRyYW5zZm9ybUxpbmVTdHJpbmcodC5nZXRHZW9tZXRyeU4oaSksdCk7bnVsbCE9PXImJihyLmlzRW1wdHkoKXx8bi5hZGQocikpfXJldHVybiB0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeShuKX0sdHJhbnNmb3JtQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb3B5KHQpfSx0cmFuc2Zvcm1MaW5lU3RyaW5nOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSl9LHRyYW5zZm9ybU11bHRpUG9pbnQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49bmV3IF8saT0wO2k8dC5nZXROdW1HZW9tZXRyaWVzKCk7aSsrKXt2YXIgcj10aGlzLnRyYW5zZm9ybVBvaW50KHQuZ2V0R2VvbWV0cnlOKGkpLHQpO251bGwhPT1yJiYoci5pc0VtcHR5KCl8fG4uYWRkKHIpKX1yZXR1cm4gdGhpcy5mYWN0b3J5LmJ1aWxkR2VvbWV0cnkobil9LHRyYW5zZm9ybU11bHRpUG9seWdvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1uZXcgXyxpPTA7aTx0LmdldE51bUdlb21ldHJpZXMoKTtpKyspe3ZhciByPXRoaXMudHJhbnNmb3JtUG9seWdvbih0LmdldEdlb21ldHJ5TihpKSx0KTtudWxsIT09ciYmKHIuaXNFbXB0eSgpfHxuLmFkZChyKSl9cmV0dXJuIHRoaXMuZmFjdG9yeS5idWlsZEdlb21ldHJ5KG4pfSxjb3B5OmZ1bmN0aW9uKHQpe3JldHVybiB0LmNvcHkoKX0sdHJhbnNmb3JtR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBfLGk9MDtpPHQuZ2V0TnVtR2VvbWV0cmllcygpO2krKyl7dmFyIHI9dGhpcy50cmFuc2Zvcm0odC5nZXRHZW9tZXRyeU4oaSkpO251bGwhPT1yJiYodGhpcy5wcnVuZUVtcHR5R2VvbWV0cnkmJnIuaXNFbXB0eSgpfHxuLmFkZChyKSl9cmV0dXJuIHRoaXMucHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlP3RoaXMuZmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24oJHQudG9HZW9tZXRyeUFycmF5KG4pKTp0aGlzLmZhY3RvcnkuYnVpbGRHZW9tZXRyeShuKX0sdHJhbnNmb3JtOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaW5wdXRHZW9tPXQsdGhpcy5mYWN0b3J5PXQuZ2V0RmFjdG9yeSgpLHQgaW5zdGFuY2VvZiBFdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1Qb2ludCh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBDdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1NdWx0aVBvaW50KHQsbnVsbCk7aWYodCBpbnN0YW5jZW9mIEl0KXJldHVybiB0aGlzLnRyYW5zZm9ybUxpbmVhclJpbmcodCxudWxsKTtpZih0IGluc3RhbmNlb2YgeHQpcmV0dXJuIHRoaXMudHJhbnNmb3JtTGluZVN0cmluZyh0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBjdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1NdWx0aUxpbmVTdHJpbmcodCxudWxsKTtpZih0IGluc3RhbmNlb2YgTXQpcmV0dXJuIHRoaXMudHJhbnNmb3JtUG9seWdvbih0LG51bGwpO2lmKHQgaW5zdGFuY2VvZiBPdClyZXR1cm4gdGhpcy50cmFuc2Zvcm1NdWx0aVBvbHlnb24odCxudWxsKTtpZih0IGluc3RhbmNlb2YgbHQpcmV0dXJuIHRoaXMudHJhbnNmb3JtR2VvbWV0cnlDb2xsZWN0aW9uKHQsbnVsbCk7dGhyb3cgbmV3IG4oXCJVbmtub3duIEdlb21ldHJ5IHN1YnR5cGU6IFwiK3QuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpfSx0cmFuc2Zvcm1MaW5lYXJSaW5nOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpO2lmKG51bGw9PT1uKXJldHVybiB0aGlzLmZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhudWxsKTt2YXIgaT1uLnNpemUoKTtyZXR1cm4gaT4wJiZpPDQmJiF0aGlzLnByZXNlcnZlVHlwZT90aGlzLmZhY3RvcnkuY3JlYXRlTGluZVN0cmluZyhuKTp0aGlzLmZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyhuKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gS259fSksVHIoUW4ucHJvdG90eXBlLHtzbmFwVmVydGljZXM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5faXNDbG9zZWQ/dC5zaXplKCktMTp0LnNpemUoKSxpPTA7aTxuO2krKyl7dmFyIHI9dC5nZXQoaSksbz10aGlzLmZpbmRTbmFwRm9yVmVydGV4KHIsZSk7bnVsbCE9PW8mJih0LnNldChpLG5ldyBoKG8pKSwwPT09aSYmdGhpcy5faXNDbG9zZWQmJnQuc2V0KHQuc2l6ZSgpLTEsbmV3IGgobykpKX19LGZpbmRTbmFwRm9yVmVydGV4OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe2lmKHQuZXF1YWxzMkQoZVtuXSkpcmV0dXJuIG51bGw7aWYodC5kaXN0YW5jZShlW25dKTx0aGlzLnNuYXBUb2xlcmFuY2UpcmV0dXJuIGVbbl19cmV0dXJuIG51bGx9LHNuYXBUbzpmdW5jdGlvbih0KXt2YXIgZT1uZXcgYih0aGlzLnNyY1B0cyk7cmV0dXJuIHRoaXMuc25hcFZlcnRpY2VzKGUsdCksdGhpcy5zbmFwU2VnbWVudHMoZSx0KSxlLnRvQ29vcmRpbmF0ZUFycmF5KCl9LHNuYXBTZWdtZW50czpmdW5jdGlvbih0LGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgbj1lLmxlbmd0aDtlWzBdLmVxdWFsczJEKGVbZS5sZW5ndGgtMV0pJiYobj1lLmxlbmd0aC0xKTtmb3IodmFyIGk9MDtpPG47aSsrKXt2YXIgcj1lW2ldLG89dGhpcy5maW5kU2VnbWVudEluZGV4VG9TbmFwKHIsdCk7bz49MCYmdC5hZGQobysxLG5ldyBoKHIpLCExKX19LGZpbmRTZWdtZW50SW5kZXhUb1NuYXA6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49aS5NQVhfVkFMVUUscj0tMSxvPTA7bzxlLnNpemUoKS0xO28rKyl7aWYodGhpcy5zZWcucDA9ZS5nZXQobyksdGhpcy5zZWcucDE9ZS5nZXQobysxKSx0aGlzLnNlZy5wMC5lcXVhbHMyRCh0KXx8dGhpcy5zZWcucDEuZXF1YWxzMkQodCkpe2lmKHRoaXMuYWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXMpY29udGludWU7cmV0dXJuLTF9dmFyIGE9dGhpcy5zZWcuZGlzdGFuY2UodCk7YTx0aGlzLnNuYXBUb2xlcmFuY2UmJmE8biYmKG49YSxyPW8pfXJldHVybiByfSxzZXRBbGxvd1NuYXBwaW5nVG9Tb3VyY2VWZXJ0aWNlczpmdW5jdGlvbih0KXt0aGlzLmFsbG93U25hcHBpbmdUb1NvdXJjZVZlcnRpY2VzPXR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFFufX0pLFFuLmlzQ2xvc2VkPWZ1bmN0aW9uKHQpe3JldHVybiEodC5sZW5ndGg8PTEpJiZ0WzBdLmVxdWFsczJEKHRbdC5sZW5ndGgtMV0pfSxUcigkbi5wcm90b3R5cGUse3NuYXBUbzpmdW5jdGlvbih0LGUpe3JldHVybiBuZXcgdGkoZSx0aGlzLmV4dHJhY3RUYXJnZXRDb29yZGluYXRlcyh0KSkudHJhbnNmb3JtKHRoaXMuc3JjR2VvbSl9LHNuYXBUb1NlbGY6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmV4dHJhY3RUYXJnZXRDb29yZGluYXRlcyh0aGlzLnNyY0dlb20pLGk9bmV3IHRpKHQsbiwhMCkscj1pLnRyYW5zZm9ybSh0aGlzLnNyY0dlb20pLG89cjtyZXR1cm4gZSYmTHIobyxTdCkmJihvPXIuYnVmZmVyKDApKSxvfSxjb21wdXRlU25hcFRvbGVyYW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wdXRlTWluaW11bVNlZ21lbnRMZW5ndGgodCkvMTB9LGV4dHJhY3RUYXJnZXRDb29yZGluYXRlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IHJ0LG49dC5nZXRDb29yZGluYXRlcygpLGk9MDtpPG4ubGVuZ3RoO2krKyllLmFkZChuW2ldKTtyZXR1cm4gZS50b0FycmF5KG5ldyBBcnJheSgwKS5maWxsKG51bGwpKX0sY29tcHV0ZU1pbmltdW1TZWdtZW50TGVuZ3RoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pLk1BWF9WQUxVRSxuPTA7bjx0Lmxlbmd0aC0xO24rKyl7dmFyIHI9dFtuXS5kaXN0YW5jZSh0W24rMV0pO3I8ZSYmKGU9cil9cmV0dXJuIGV9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuICRufX0pLCRuLnNuYXA9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW5ldyBBcnJheSgyKS5maWxsKG51bGwpLHI9bmV3ICRuKHQpO2lbMF09ci5zbmFwVG8oZSxuKTt2YXIgbz1uZXcgJG4oZSk7cmV0dXJuIGlbMV09by5zbmFwVG8oaVswXSxuKSxpfSwkbi5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2U9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9JG4uY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2UodCksbj10LmdldFByZWNpc2lvbk1vZGVsKCk7aWYobi5nZXRUeXBlKCk9PT1LdC5GSVhFRCl7dmFyIGk9MS9uLmdldFNjYWxlKCkqMi8xLjQxNTtpPmUmJihlPWkpfXJldHVybiBlfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV07cmV0dXJuIE1hdGgubWluKCRuLmNvbXB1dGVPdmVybGF5U25hcFRvbGVyYW5jZShyKSwkbi5jb21wdXRlT3ZlcmxheVNuYXBUb2xlcmFuY2UobykpfX0sJG4uY29tcHV0ZVNpemVCYXNlZFNuYXBUb2xlcmFuY2U9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRFbnZlbG9wZUludGVybmFsKCk7cmV0dXJuIE1hdGgubWluKGUuZ2V0SGVpZ2h0KCksZS5nZXRXaWR0aCgpKSokbi5TTkFQX1BSRUNJU0lPTl9GQUNUT1J9LCRuLnNuYXBUb1NlbGY9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgJG4odCkuc25hcFRvU2VsZihlLG4pfSwkbi5TTkFQX1BSRUNJU0lPTl9GQUNUT1I9MWUtOSxQcih0aSxLbiksVHIodGkucHJvdG90eXBlLHtzbmFwTGluZTpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBRbih0LHRoaXMuc25hcFRvbGVyYW5jZSk7cmV0dXJuIG4uc2V0QWxsb3dTbmFwcGluZ1RvU291cmNlVmVydGljZXModGhpcy5pc1NlbGZTbmFwKSxuLnNuYXBUbyhlKX0sdHJhbnNmb3JtQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnRvQ29vcmRpbmF0ZUFycmF5KCksaT10aGlzLnNuYXBMaW5lKG4sdGhpcy5zbmFwUHRzKTtyZXR1cm4gdGhpcy5mYWN0b3J5LmdldENvb3JkaW5hdGVTZXF1ZW5jZUZhY3RvcnkoKS5jcmVhdGUoaSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRpfX0pLFRyKGVpLnByb3RvdHlwZSx7Z2V0Q29tbW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGkubG9uZ0JpdHNUb0RvdWJsZSh0aGlzLmNvbW1vbkJpdHMpfSxhZGQ6ZnVuY3Rpb24odCl7dmFyIGU9aS5kb3VibGVUb0xvbmdCaXRzKHQpO3JldHVybiB0aGlzLmlzRmlyc3Q/KHRoaXMuY29tbW9uQml0cz1lLHRoaXMuY29tbW9uU2lnbkV4cD1laS5zaWduRXhwQml0cyh0aGlzLmNvbW1vbkJpdHMpLHRoaXMuaXNGaXJzdD0hMSxudWxsKTplaS5zaWduRXhwQml0cyhlKSE9PXRoaXMuY29tbW9uU2lnbkV4cD8odGhpcy5jb21tb25CaXRzPTAsbnVsbCk6KHRoaXMuY29tbW9uTWFudGlzc2FCaXRzQ291bnQ9ZWkubnVtQ29tbW9uTW9zdFNpZ01hbnRpc3NhQml0cyh0aGlzLmNvbW1vbkJpdHMsZSksdm9pZCh0aGlzLmNvbW1vbkJpdHM9ZWkuemVyb0xvd2VyQml0cyh0aGlzLmNvbW1vbkJpdHMsNjQtKDEyK3RoaXMuY29tbW9uTWFudGlzc2FCaXRzQ291bnQpKSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1pLmxvbmdCaXRzVG9Eb3VibGUodCksbj1Mb25nLnRvQmluYXJ5U3RyaW5nKHQpLHI9XCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwXCIrbixvPXIuc3Vic3RyaW5nKHIubGVuZ3RoLTY0KTtyZXR1cm4gby5zdWJzdHJpbmcoMCwxKStcIiAgXCIrby5zdWJzdHJpbmcoMSwxMikrXCIoZXhwKSBcIitvLnN1YnN0cmluZygxMikrXCIgWyBcIitlK1wiIF1cIn19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGVpfX0pLGVpLmdldEJpdD1mdW5jdGlvbih0LGUpe3JldHVybiAwIT0odCYxPDxlKT8xOjB9LGVpLnNpZ25FeHBCaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj41Mn0sZWkuemVyb0xvd2VyQml0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0Jn4oKDE8PGUpLTEpfSxlaS5udW1Db21tb25Nb3N0U2lnTWFudGlzc2FCaXRzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAsaT01MjtpPj0wO2ktLSl7aWYoZWkuZ2V0Qml0KHQsaSkhPT1laS5nZXRCaXQoZSxpKSlyZXR1cm4gbjtuKyt9cmV0dXJuIDUyfSxUcihuaS5wcm90b3R5cGUse2FkZENvbW1vbkJpdHM6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHJpKHRoaXMuY29tbW9uQ29vcmQpO3QuYXBwbHkoZSksdC5nZW9tZXRyeUNoYW5nZWQoKX0scmVtb3ZlQ29tbW9uQml0czpmdW5jdGlvbih0KXtpZigwPT09dGhpcy5jb21tb25Db29yZC54JiYwPT09dGhpcy5jb21tb25Db29yZC55KXJldHVybiB0O3ZhciBlPW5ldyBoKHRoaXMuY29tbW9uQ29vcmQpO2UueD0tZS54LGUueT0tZS55O3ZhciBuPW5ldyByaShlKTtyZXR1cm4gdC5hcHBseShuKSx0Lmdlb21ldHJ5Q2hhbmdlZCgpLHR9LGdldENvbW1vbkNvb3JkaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21tb25Db29yZH0sYWRkOmZ1bmN0aW9uKHQpe3QuYXBwbHkodGhpcy5jY0ZpbHRlciksdGhpcy5jb21tb25Db29yZD10aGlzLmNjRmlsdGVyLmdldENvbW1vbkNvb3JkaW5hdGUoKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbml9fSksVHIoaWkucHJvdG90eXBlLHtmaWx0ZXI6ZnVuY3Rpb24odCl7dGhpcy5jb21tb25CaXRzWC5hZGQodC54KSx0aGlzLmNvbW1vbkJpdHNZLmFkZCh0LnkpfSxnZXRDb21tb25Db29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBoKHRoaXMuY29tbW9uQml0c1guZ2V0Q29tbW9uKCksdGhpcy5jb21tb25CaXRzWS5nZXRDb21tb24oKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW0ZdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBpaX19KSxUcihyaS5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0T3JkaW5hdGUoZSwwKSt0aGlzLnRyYW5zLngsaT10LmdldE9yZGluYXRlKGUsMSkrdGhpcy50cmFucy55O3Quc2V0T3JkaW5hdGUoZSwwLG4pLHQuc2V0T3JkaW5hdGUoZSwxLGkpfSxpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saXNHZW9tZXRyeUNoYW5nZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bdXRdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiByaX19KSxuaS5Db21tb25Db29yZGluYXRlRmlsdGVyPWlpLG5pLlRyYW5zbGF0ZXI9cmksVHIob2kucHJvdG90eXBlLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBvaX19KSxvaS5vY3RhbnQ9ZnVuY3Rpb24oKXtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07aWYoMD09PXQmJjA9PT1lKXRocm93IG5ldyBuKFwiQ2Fubm90IGNvbXB1dGUgdGhlIG9jdGFudCBmb3IgcG9pbnQgKCBcIit0K1wiLCBcIitlK1wiIClcIik7dmFyIGk9TWF0aC5hYnModCkscj1NYXRoLmFicyhlKTtyZXR1cm4gdD49MD9lPj0wP2k+PXI/MDoxOmk+PXI/Nzo2OmU+PTA/aT49cj8zOjI6aT49cj80OjV9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIGgpe3ZhciBvPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXSxzPWEueC1vLngsdT1hLnktby55O2lmKDA9PT1zJiYwPT09dSl0aHJvdyBuZXcgbihcIkNhbm5vdCBjb21wdXRlIHRoZSBvY3RhbnQgZm9yIHR3byBpZGVudGljYWwgcG9pbnRzIFwiK28pO3JldHVybiBvaS5vY3RhbnQocyx1KX19LFRyKGFpLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXt9LHNpemU6ZnVuY3Rpb24oKXt9LGdldENvb3JkaW5hdGU6ZnVuY3Rpb24odCl7fSxpc0Nsb3NlZDpmdW5jdGlvbigpe30sc2V0RGF0YTpmdW5jdGlvbih0KXt9LGdldERhdGE6ZnVuY3Rpb24oKXt9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGFpfX0pLFRyKHNpLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RofSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB0c1t0XX0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzW3RoaXMucHRzLmxlbmd0aC0xXSl9LGdldFNlZ21lbnRPY3RhbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLnB0cy5sZW5ndGgtMT8tMTpvaS5vY3RhbnQodGhpcy5nZXRDb29yZGluYXRlKHQpLHRoaXMuZ2V0Q29vcmRpbmF0ZSh0KzEpKX0sc2V0RGF0YTpmdW5jdGlvbih0KXt0aGlzLmRhdGE9dH0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGVlLnRvTGluZVN0cmluZyhuZXcga3QodGhpcy5wdHMpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bYWldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBzaX19KSxUcih1aS5wcm90b3R5cGUse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHVpfX0pLHVpLnJlbGF0aXZlU2lnbj1mdW5jdGlvbih0LGUpe3JldHVybiB0PGU/LTE6dD5lPzE6MH0sdWkuY29tcGFyZT1mdW5jdGlvbih0LGUsbil7aWYoZS5lcXVhbHMyRChuKSlyZXR1cm4gMDt2YXIgaT11aS5yZWxhdGl2ZVNpZ24oZS54LG4ueCkscj11aS5yZWxhdGl2ZVNpZ24oZS55LG4ueSk7c3dpdGNoKHQpe2Nhc2UgMDpyZXR1cm4gdWkuY29tcGFyZVZhbHVlKGkscik7Y2FzZSAxOnJldHVybiB1aS5jb21wYXJlVmFsdWUocixpKTtjYXNlIDI6cmV0dXJuIHVpLmNvbXBhcmVWYWx1ZShyLC1pKTtjYXNlIDM6cmV0dXJuIHVpLmNvbXBhcmVWYWx1ZSgtaSxyKTtjYXNlIDQ6cmV0dXJuIHVpLmNvbXBhcmVWYWx1ZSgtaSwtcik7Y2FzZSA1OnJldHVybiB1aS5jb21wYXJlVmFsdWUoLXIsLWkpO2Nhc2UgNjpyZXR1cm4gdWkuY29tcGFyZVZhbHVlKC1yLGkpO2Nhc2UgNzpyZXR1cm4gdWkuY29tcGFyZVZhbHVlKGksLXIpfXJldHVybiBjLnNob3VsZE5ldmVyUmVhY2hIZXJlKFwiaW52YWxpZCBvY3RhbnQgdmFsdWVcIiksMH0sdWkuY29tcGFyZVZhbHVlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8MD8tMTp0PjA/MTplPDA/LTE6ZT4wPzE6MH0sVHIobGkucHJvdG90eXBlLHtnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmR9LHByaW50OmZ1bmN0aW9uKHQpe3QucHJpbnQodGhpcy5jb29yZCksdC5wcmludChcIiBzZWcgIyA9IFwiK3RoaXMuc2VnbWVudEluZGV4KX0sY29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuc2VnbWVudEluZGV4PGUuc2VnbWVudEluZGV4Py0xOnRoaXMuc2VnbWVudEluZGV4PmUuc2VnbWVudEluZGV4PzE6dGhpcy5jb29yZC5lcXVhbHMyRChlLmNvb3JkKT8wOnVpLmNvbXBhcmUodGhpcy5zZWdtZW50T2N0YW50LHRoaXMuY29vcmQsZS5jb29yZCl9LGlzRW5kUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10aGlzLnNlZ21lbnRJbmRleCYmIXRoaXMuX2lzSW50ZXJpb3J8fHRoaXMuc2VnbWVudEluZGV4PT09dH0saXNJbnRlcmlvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0ludGVyaW9yfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbGl9fSk7VHIoY2kucHJvdG90eXBlLHtnZXRTcGxpdENvb3JkaW5hdGVzOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGI7dGhpcy5hZGRFbmRwb2ludHMoKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpLG49ZS5uZXh0KCk7ZS5oYXNOZXh0KCk7KXt2YXIgaT1lLm5leHQoKTt0aGlzLmFkZEVkZ2VDb29yZGluYXRlcyhuLGksdCksbj1pfXJldHVybiB0LnRvQ29vcmRpbmF0ZUFycmF5KCl9LGFkZENvbGxhcHNlZE5vZGVzOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IF87dGhpcy5maW5kQ29sbGFwc2VzRnJvbUluc2VydGVkTm9kZXModCksdGhpcy5maW5kQ29sbGFwc2VzRnJvbUV4aXN0aW5nVmVydGljZXModCk7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLmludFZhbHVlKCk7dGhpcy5hZGQodGhpcy5lZGdlLmdldENvb3JkaW5hdGUobiksbil9fSxwcmludDpmdW5jdGlvbih0KXt0LnByaW50bG4oXCJJbnRlcnNlY3Rpb25zOlwiKTtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyllLm5leHQoKS5wcmludCh0KX0sZmluZENvbGxhcHNlc0Zyb21FeGlzdGluZ1ZlcnRpY2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlLnNpemUoKS0yO2UrKyl7dmFyIG49dGhpcy5lZGdlLmdldENvb3JkaW5hdGUoZSksaT0odGhpcy5lZGdlLmdldENvb3JkaW5hdGUoZSsxKSx0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShlKzIpKTtuLmVxdWFsczJEKGkpJiZ0LmFkZChuZXcgSShlKzEpKX19LGFkZEVkZ2VDb29yZGluYXRlczpmdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5zZWdtZW50SW5kZXgtdC5zZWdtZW50SW5kZXgrMixyPXRoaXMuZWRnZS5nZXRDb29yZGluYXRlKGUuc2VnbWVudEluZGV4KSxvPWUuaXNJbnRlcmlvcigpfHwhZS5jb29yZC5lcXVhbHMyRChyKTtvfHxpLS0sbi5hZGQobmV3IGgodC5jb29yZCksITEpO2Zvcih2YXIgYT10LnNlZ21lbnRJbmRleCsxO2E8PWUuc2VnbWVudEluZGV4O2ErKyluLmFkZCh0aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShhKSk7XG5vJiZuLmFkZChuZXcgaChlLmNvb3JkKSl9LGl0ZXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZU1hcC52YWx1ZXMoKS5pdGVyYXRvcigpfSxhZGRTcGxpdEVkZ2VzOmZ1bmN0aW9uKHQpe3RoaXMuYWRkRW5kcG9pbnRzKCksdGhpcy5hZGRDb2xsYXBzZWROb2RlcygpO2Zvcih2YXIgZT10aGlzLml0ZXJhdG9yKCksbj1lLm5leHQoKTtlLmhhc05leHQoKTspe3ZhciBpPWUubmV4dCgpLHI9dGhpcy5jcmVhdGVTcGxpdEVkZ2UobixpKTt0LmFkZChyKSxuPWl9fSxmaW5kQ29sbGFwc2VJbmRleDpmdW5jdGlvbih0LGUsbil7aWYoIXQuY29vcmQuZXF1YWxzMkQoZS5jb29yZCkpcmV0dXJuITE7dmFyIGk9ZS5zZWdtZW50SW5kZXgtdC5zZWdtZW50SW5kZXg7cmV0dXJuIGUuaXNJbnRlcmlvcigpfHxpLS0sMT09PWkmJihuWzBdPXQuc2VnbWVudEluZGV4KzEsITApfSxmaW5kQ29sbGFwc2VzRnJvbUluc2VydGVkTm9kZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSgxKS5maWxsKG51bGwpLG49dGhpcy5pdGVyYXRvcigpLGk9bi5uZXh0KCk7bi5oYXNOZXh0KCk7KXt2YXIgcj1uLm5leHQoKTt0aGlzLmZpbmRDb2xsYXBzZUluZGV4KGkscixlKSYmdC5hZGQobmV3IEkoZVswXSkpLGk9cn19LGdldEVkZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlfSxhZGRFbmRwb2ludHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2Uuc2l6ZSgpLTE7dGhpcy5hZGQodGhpcy5lZGdlLmdldENvb3JkaW5hdGUoMCksMCksdGhpcy5hZGQodGhpcy5lZGdlLmdldENvb3JkaW5hdGUodCksdCl9LGNyZWF0ZVNwbGl0RWRnZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuc2VnbWVudEluZGV4LXQuc2VnbWVudEluZGV4KzIsaT10aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShlLnNlZ21lbnRJbmRleCkscj1lLmlzSW50ZXJpb3IoKXx8IWUuY29vcmQuZXF1YWxzMkQoaSk7cnx8bi0tO3ZhciBvPW5ldyBBcnJheShuKS5maWxsKG51bGwpLGE9MDtvW2ErK109bmV3IGgodC5jb29yZCk7Zm9yKHZhciBzPXQuc2VnbWVudEluZGV4KzE7czw9ZS5zZWdtZW50SW5kZXg7cysrKW9bYSsrXT10aGlzLmVkZ2UuZ2V0Q29vcmRpbmF0ZShzKTtyZXR1cm4gciYmKG9bYV09bmV3IGgoZS5jb29yZCkpLG5ldyBkaShvLHRoaXMuZWRnZS5nZXREYXRhKCkpfSxhZGQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgbGkodGhpcy5lZGdlLHQsZSx0aGlzLmVkZ2UuZ2V0U2VnbWVudE9jdGFudChlKSksaT10aGlzLm5vZGVNYXAuZ2V0KG4pO3JldHVybiBudWxsIT09aT8oYy5pc1RydWUoaS5jb29yZC5lcXVhbHMyRCh0KSxcIkZvdW5kIGVxdWFsIG5vZGVzIHdpdGggZGlmZmVyZW50IGNvb3JkaW5hdGVzXCIpLGkpOih0aGlzLm5vZGVNYXAucHV0KG4sbiksbil9LGNoZWNrU3BsaXRFZGdlc0NvcnJlY3RuZXNzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWRnZS5nZXRDb29yZGluYXRlcygpLG49dC5nZXQoMCksaT1uLmdldENvb3JkaW5hdGUoMCk7aWYoIWkuZXF1YWxzMkQoZVswXSkpdGhyb3cgbmV3IHUoXCJiYWQgc3BsaXQgZWRnZSBzdGFydCBwb2ludCBhdCBcIitpKTt2YXIgcj10LmdldCh0LnNpemUoKS0xKSxvPXIuZ2V0Q29vcmRpbmF0ZXMoKSxhPW9bby5sZW5ndGgtMV07aWYoIWEuZXF1YWxzMkQoZVtlLmxlbmd0aC0xXSkpdGhyb3cgbmV3IHUoXCJiYWQgc3BsaXQgZWRnZSBlbmQgcG9pbnQgYXQgXCIrYSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGNpfX0pLFRyKGhpLnByb3RvdHlwZSx7bmV4dDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5jdXJyTm9kZT8odGhpcy5jdXJyTm9kZT10aGlzLm5leHROb2RlLHRoaXMuY3VyclNlZ0luZGV4PXRoaXMuY3Vyck5vZGUuc2VnbWVudEluZGV4LHRoaXMucmVhZE5leHROb2RlKCksdGhpcy5jdXJyTm9kZSk6bnVsbD09PXRoaXMubmV4dE5vZGU/bnVsbDp0aGlzLm5leHROb2RlLnNlZ21lbnRJbmRleD09PXRoaXMuY3Vyck5vZGUuc2VnbWVudEluZGV4Pyh0aGlzLmN1cnJOb2RlPXRoaXMubmV4dE5vZGUsdGhpcy5jdXJyU2VnSW5kZXg9dGhpcy5jdXJyTm9kZS5zZWdtZW50SW5kZXgsdGhpcy5yZWFkTmV4dE5vZGUoKSx0aGlzLmN1cnJOb2RlKToodGhpcy5uZXh0Tm9kZS5zZWdtZW50SW5kZXgsdGhpcy5jdXJyTm9kZS5zZWdtZW50SW5kZXgsbnVsbCl9LHJlbW92ZTpmdW5jdGlvbigpe3Rocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbih0aGlzLmdldENsYXNzKCkuZ2V0TmFtZSgpKX0saGFzTmV4dDpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5uZXh0Tm9kZX0scmVhZE5leHROb2RlOmZ1bmN0aW9uKCl7dGhpcy5ub2RlSXQuaGFzTmV4dCgpP3RoaXMubmV4dE5vZGU9dGhpcy5ub2RlSXQubmV4dCgpOnRoaXMubmV4dE5vZGU9bnVsbH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bZF19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGhpfX0pLFRyKGZpLnByb3RvdHlwZSx7YWRkSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblthaV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZpfX0pLFRyKGRpLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHN9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHMubGVuZ3RofSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnB0c1t0XX0saXNDbG9zZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHNbMF0uZXF1YWxzKHRoaXMucHRzW3RoaXMucHRzLmxlbmd0aC0xXSl9LGdldFNlZ21lbnRPY3RhbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLnB0cy5sZW5ndGgtMT8tMTp0aGlzLnNhZmVPY3RhbnQodGhpcy5nZXRDb29yZGluYXRlKHQpLHRoaXMuZ2V0Q29vcmRpbmF0ZSh0KzEpKX0sc2V0RGF0YTpmdW5jdGlvbih0KXt0aGlzLmRhdGE9dH0sc2FmZU9jdGFudDpmdW5jdGlvbih0LGUpe3JldHVybiB0LmVxdWFsczJEKGUpPzA6b2kub2N0YW50KHQsZSl9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxhZGRJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3RoaXMuYWRkSW50ZXJzZWN0aW9uTm9kZSh0LGUpfWVsc2UgaWYoND09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBuPWFyZ3VtZW50c1swXSxpPWFyZ3VtZW50c1sxXSxyPShhcmd1bWVudHNbMl0sYXJndW1lbnRzWzNdKSxvPW5ldyBoKG4uZ2V0SW50ZXJzZWN0aW9uKHIpKTt0aGlzLmFkZEludGVyc2VjdGlvbihvLGkpfX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZWUudG9MaW5lU3RyaW5nKG5ldyBrdCh0aGlzLnB0cykpfSxnZXROb2RlTGlzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVMaXN0fSxhZGRJbnRlcnNlY3Rpb25Ob2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZSxpPW4rMTtpZihpPHRoaXMucHRzLmxlbmd0aCl7dmFyIHI9dGhpcy5wdHNbaV07dC5lcXVhbHMyRChyKSYmKG49aSl9cmV0dXJuIHRoaXMubm9kZUxpc3QuYWRkKHQsbil9LGFkZEludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT0wO2k8dC5nZXRJbnRlcnNlY3Rpb25OdW0oKTtpKyspdGhpcy5hZGRJbnRlcnNlY3Rpb24odCxlLG4saSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW2ZpXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZGl9fSksZGkuZ2V0Tm9kZWRTdWJzdHJpbmdzPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBfO3JldHVybiBkaS5nZXROb2RlZFN1YnN0cmluZ3ModCxlKSxlfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV0scj1uLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKTtvLmdldE5vZGVMaXN0KCkuYWRkU3BsaXRFZGdlcyhpKX19LFRyKHBpLnByb3RvdHlwZSx7b3ZlcmxhcDpmdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV07ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3QuZ2V0TGluZVNlZ21lbnQoZSx0aGlzLm92ZXJsYXBTZWcxKSxuLmdldExpbmVTZWdtZW50KGksdGhpcy5vdmVybGFwU2VnMiksdGhpcy5vdmVybGFwKHRoaXMub3ZlcmxhcFNlZzEsdGhpcy5vdmVybGFwU2VnMil9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBwaX19KSxUcihnaS5wcm90b3R5cGUse2NvbXB1dGVOb2RlczpmdW5jdGlvbih0KXt9LGdldE5vZGVkU3Vic3RyaW5nczpmdW5jdGlvbigpe30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZ2l9fSksVHIodmkucHJvdG90eXBlLHtzZXRTZWdtZW50SW50ZXJzZWN0b3I6ZnVuY3Rpb24odCl7dGhpcy5zZWdJbnQ9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bZ2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB2aX19KSxQcihtaSx2aSksVHIobWkucHJvdG90eXBlLHtnZXRNb25vdG9uZUNoYWluczpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbm9DaGFpbnN9LGdldE5vZGVkU3Vic3RyaW5nczpmdW5jdGlvbigpe3JldHVybiBkaS5nZXROb2RlZFN1YnN0cmluZ3ModGhpcy5ub2RlZFNlZ1N0cmluZ3MpfSxnZXRJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fSxhZGQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXNuLmdldENoYWlucyh0LmdldENvb3JkaW5hdGVzKCksdCksbj1lLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLnNldElkKHRoaXMuaWRDb3VudGVyKyspLHRoaXMuaW5kZXguaW5zZXJ0KGkuZ2V0RW52ZWxvcGUoKSxpKSx0aGlzLm1vbm9DaGFpbnMuYWRkKGkpfX0sY29tcHV0ZU5vZGVzOmZ1bmN0aW9uKHQpe3RoaXMubm9kZWRTZWdTdHJpbmdzPXQ7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspdGhpcy5hZGQoZS5uZXh0KCkpO3RoaXMuaW50ZXJzZWN0Q2hhaW5zKCl9LGludGVyc2VjdENoYWluczpmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgeWkodGhpcy5zZWdJbnQpLGU9dGhpcy5tb25vQ2hhaW5zLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPXRoaXMuaW5kZXgucXVlcnkobi5nZXRFbnZlbG9wZSgpKSxyPWkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpO2lmKG8uZ2V0SWQoKT5uLmdldElkKCkmJihuLmNvbXB1dGVPdmVybGFwcyhvLHQpLHRoaXMubk92ZXJsYXBzKyspLHRoaXMuc2VnSW50LmlzRG9uZSgpKXJldHVybiBudWxsfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbWl9fSksUHIoeWkscGkpLFRyKHlpLnByb3RvdHlwZSx7b3ZlcmxhcDpmdW5jdGlvbigpe2lmKDQhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBwaS5wcm90b3R5cGUub3ZlcmxhcC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdLHI9dC5nZXRDb250ZXh0KCksbz1uLmdldENvbnRleHQoKTt0aGlzLnNpLnByb2Nlc3NJbnRlcnNlY3Rpb25zKHIsZSxvLGkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB5aX19KSxtaS5TZWdtZW50T3ZlcmxhcEFjdGlvbj15aSxUcihfaS5wcm90b3R5cGUse3Byb2Nlc3NJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSxuLGkpe30saXNEb25lOmZ1bmN0aW9uKCl7fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBfaX19KSxUcihiaS5wcm90b3R5cGUse2dldEludGVyaW9ySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb259LHNldENoZWNrRW5kU2VnbWVudHNPbmx5OmZ1bmN0aW9uKHQpe3RoaXMuaXNDaGVja0VuZFNlZ21lbnRzT25seT10fSxnZXRJbnRlcnNlY3Rpb25TZWdtZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludFNlZ21lbnRzfSxjb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyc2VjdGlvbkNvdW50fSxnZXRJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uc30sc2V0RmluZEFsbEludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCl7dGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucz10fSxzZXRLZWVwSW50ZXJzZWN0aW9uczpmdW5jdGlvbih0KXt0aGlzLmtlZXBJbnRlcnNlY3Rpb25zPXR9LHByb2Nlc3NJbnRlcnNlY3Rpb25zOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKCF0aGlzLmZpbmRBbGxJbnRlcnNlY3Rpb25zJiZ0aGlzLmhhc0ludGVyc2VjdGlvbigpKXJldHVybiBudWxsO2lmKHQ9PT1uJiZlPT09aSlyZXR1cm4gbnVsbDtpZih0aGlzLmlzQ2hlY2tFbmRTZWdtZW50c09ubHkmJiF0aGlzLmlzRW5kU2VnbWVudCh0LGUpJiYhdGhpcy5pc0VuZFNlZ21lbnQobixpKSlyZXR1cm4gbnVsbDt2YXIgcj10LmdldENvb3JkaW5hdGVzKClbZV0sbz10LmdldENvb3JkaW5hdGVzKClbZSsxXSxhPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpXSxzPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpKzFdO3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbihyLG8sYSxzKSx0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpJiZ0aGlzLmxpLmlzSW50ZXJpb3JJbnRlcnNlY3Rpb24oKSYmKHRoaXMuaW50U2VnbWVudHM9bmV3IEFycmF5KDQpLmZpbGwobnVsbCksdGhpcy5pbnRTZWdtZW50c1swXT1yLHRoaXMuaW50U2VnbWVudHNbMV09byx0aGlzLmludFNlZ21lbnRzWzJdPWEsdGhpcy5pbnRTZWdtZW50c1szXT1zLHRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb249dGhpcy5saS5nZXRJbnRlcnNlY3Rpb24oMCksdGhpcy5rZWVwSW50ZXJzZWN0aW9ucyYmdGhpcy5pbnRlcnNlY3Rpb25zLmFkZCh0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uKSx0aGlzLmludGVyc2VjdGlvbkNvdW50KyspfSxpc0VuZFNlZ21lbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PWV8fGU+PXQuc2l6ZSgpLTJ9LGhhc0ludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5pbnRlcmlvckludGVyc2VjdGlvbn0saXNEb25lOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZmluZEFsbEludGVyc2VjdGlvbnMmJm51bGwhPT10aGlzLmludGVyaW9ySW50ZXJzZWN0aW9ufSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltfaV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGJpfX0pLGJpLmNyZWF0ZUFsbEludGVyc2VjdGlvbnNGaW5kZXI9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGJpKHQpO3JldHVybiBlLnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zKCEwKSxlfSxiaS5jcmVhdGVBbnlJbnRlcnNlY3Rpb25GaW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBiaSh0KX0sYmkuY3JlYXRlSW50ZXJzZWN0aW9uQ291bnRlcj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgYmkodCk7cmV0dXJuIGUuc2V0RmluZEFsbEludGVyc2VjdGlvbnMoITApLGUuc2V0S2VlcEludGVyc2VjdGlvbnMoITEpLGV9LFRyKHhpLnByb3RvdHlwZSx7ZXhlY3V0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5zZWdJbnQ/bnVsbDp2b2lkIHRoaXMuY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnMoKX0sZ2V0SW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlZ0ludC5nZXRJbnRlcnNlY3Rpb25zKCl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leGVjdXRlKCksdGhpcy5faXNWYWxpZH0sc2V0RmluZEFsbEludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCl7dGhpcy5maW5kQWxsSW50ZXJzZWN0aW9ucz10fSxjaGVja0ludGVyaW9ySW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe3RoaXMuX2lzVmFsaWQ9ITAsdGhpcy5zZWdJbnQ9bmV3IGJpKHRoaXMubGkpLHRoaXMuc2VnSW50LnNldEZpbmRBbGxJbnRlcnNlY3Rpb25zKHRoaXMuZmluZEFsbEludGVyc2VjdGlvbnMpO3ZhciB0PW5ldyBtaTtpZih0LnNldFNlZ21lbnRJbnRlcnNlY3Rvcih0aGlzLnNlZ0ludCksdC5jb21wdXRlTm9kZXModGhpcy5zZWdTdHJpbmdzKSx0aGlzLnNlZ0ludC5oYXNJbnRlcnNlY3Rpb24oKSlyZXR1cm4gdGhpcy5faXNWYWxpZD0hMSxudWxsfSxjaGVja1ZhbGlkOmZ1bmN0aW9uKCl7aWYodGhpcy5leGVjdXRlKCksIXRoaXMuX2lzVmFsaWQpdGhyb3cgbmV3IExlKHRoaXMuZ2V0RXJyb3JNZXNzYWdlKCksdGhpcy5zZWdJbnQuZ2V0SW50ZXJpb3JJbnRlcnNlY3Rpb24oKSl9LGdldEVycm9yTWVzc2FnZTpmdW5jdGlvbigpe2lmKHRoaXMuX2lzVmFsaWQpcmV0dXJuXCJubyBpbnRlcnNlY3Rpb25zIGZvdW5kXCI7dmFyIHQ9dGhpcy5zZWdJbnQuZ2V0SW50ZXJzZWN0aW9uU2VnbWVudHMoKTtyZXR1cm5cImZvdW5kIG5vbi1ub2RlZCBpbnRlcnNlY3Rpb24gYmV0d2VlbiBcIitlZS50b0xpbmVTdHJpbmcodFswXSx0WzFdKStcIiBhbmQgXCIrZWUudG9MaW5lU3RyaW5nKHRbMl0sdFszXSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHhpfX0pLHhpLmNvbXB1dGVJbnRlcnNlY3Rpb25zPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB4aSh0KTtyZXR1cm4gZS5zZXRGaW5kQWxsSW50ZXJzZWN0aW9ucyghMCksZS5pc1ZhbGlkKCksZS5nZXRJbnRlcnNlY3Rpb25zKCl9LFRyKHdpLnByb3RvdHlwZSx7Y2hlY2tWYWxpZDpmdW5jdGlvbigpe3RoaXMubnYuY2hlY2tWYWxpZCgpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB3aX19KSx3aS50b1NlZ21lbnRTdHJpbmdzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgXyxuPXQuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2UuYWRkKG5ldyBzaShpLmdldENvb3JkaW5hdGVzKCksaSkpfXJldHVybiBlfSx3aS5jaGVja1ZhbGlkPWZ1bmN0aW9uKHQpe25ldyB3aSh0KS5jaGVja1ZhbGlkKCl9LFRyKEVpLnByb3RvdHlwZSx7c29ydFNoZWxsc0FuZEhvbGVzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCk7ci5pc0hvbGUoKT9uLmFkZChyKTplLmFkZChyKX19LGNvbXB1dGVQb2x5Z29uczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IF8sbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPWkudG9Qb2x5Z29uKHRoaXMuZ2VvbWV0cnlGYWN0b3J5KTtlLmFkZChyKX1yZXR1cm4gZX0scGxhY2VGcmVlSG9sZXM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aWYobnVsbD09PWkuZ2V0U2hlbGwoKSl7dmFyIHI9dGhpcy5maW5kRWRnZVJpbmdDb250YWluaW5nKGksdCk7aWYobnVsbD09PXIpdGhyb3cgbmV3IExlKFwidW5hYmxlIHRvIGFzc2lnbiBob2xlIHRvIGEgc2hlbGxcIixpLmdldENvb3JkaW5hdGUoMCkpO2kuc2V0U2hlbGwocil9fX0sYnVpbGRNaW5pbWFsRWRnZVJpbmdzOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9bmV3IF8scj10Lml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKTtpZihvLmdldE1heE5vZGVEZWdyZWUoKT4yKXtvLmxpbmtEaXJlY3RlZEVkZ2VzRm9yTWluaW1hbEVkZ2VSaW5ncygpO3ZhciBhPW8uYnVpbGRNaW5pbWFsUmluZ3MoKSxzPXRoaXMuZmluZFNoZWxsKGEpO251bGwhPT1zPyh0aGlzLnBsYWNlUG9seWdvbkhvbGVzKHMsYSksZS5hZGQocykpOm4uYWRkQWxsKGEpfWVsc2UgaS5hZGQobyl9cmV0dXJuIGl9LGNvbnRhaW5zUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuc2hlbGxMaXN0Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWlmKGUubmV4dCgpLmNvbnRhaW5zUG9pbnQodCkpcmV0dXJuITA7cmV0dXJuITF9LGJ1aWxkTWF4aW1hbEVkZ2VSaW5nczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IF8sbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpLmlzSW5SZXN1bHQoKSYmaS5nZXRMYWJlbCgpLmlzQXJlYSgpJiZudWxsPT09aS5nZXRFZGdlUmluZygpKXt2YXIgcj1uZXcgRmUoaSx0aGlzLmdlb21ldHJ5RmFjdG9yeSk7ZS5hZGQociksci5zZXRJblJlc3VsdCgpfX1yZXR1cm4gZX0scGxhY2VQb2x5Z29uSG9sZXM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aS5pc0hvbGUoKSYmaS5zZXRTaGVsbCh0KX19LGdldFBvbHlnb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tcHV0ZVBvbHlnb25zKHRoaXMuc2hlbGxMaXN0KX0sZmluZEVkZ2VSaW5nQ29udGFpbmluZzpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmdldExpbmVhclJpbmcoKSxpPW4uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLHI9bi5nZXRDb29yZGluYXRlTigwKSxvPW51bGwsYT1udWxsLHM9ZS5pdGVyYXRvcigpO3MuaGFzTmV4dCgpOyl7dmFyIHU9cy5uZXh0KCksbD11LmdldExpbmVhclJpbmcoKSxjPWwuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO251bGwhPT1vJiYoYT1vLmdldExpbmVhclJpbmcoKS5nZXRFbnZlbG9wZUludGVybmFsKCkpO3ZhciBoPSExO2MuY29udGFpbnMoaSkmJmFlLmlzUG9pbnRJblJpbmcocixsLmdldENvb3JkaW5hdGVzKCkpJiYoaD0hMCksaCYmKG51bGw9PT1vfHxhLmNvbnRhaW5zKGMpKSYmKG89dSl9cmV0dXJuIG99LGZpbmRTaGVsbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPW51bGwsaT10Lml0ZXJhdG9yKCk7aS5oYXNOZXh0KCk7KXt2YXIgcj1pLm5leHQoKTtyLmlzSG9sZSgpfHwobj1yLGUrKyl9cmV0dXJuIGMuaXNUcnVlKGU8PTEsXCJmb3VuZCB0d28gc2hlbGxzIGluIE1pbmltYWxFZGdlUmluZyBsaXN0XCIpLG59LGFkZDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07dGhpcy5hZGQodC5nZXRFZGdlRW5kcygpLHQuZ2V0Tm9kZXMoKSl9ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO0plLmxpbmtSZXN1bHREaXJlY3RlZEVkZ2VzKG4pO3ZhciBpPXRoaXMuYnVpbGRNYXhpbWFsRWRnZVJpbmdzKGUpLHI9bmV3IF8sbz10aGlzLmJ1aWxkTWluaW1hbEVkZ2VSaW5ncyhpLHRoaXMuc2hlbGxMaXN0LHIpO3RoaXMuc29ydFNoZWxsc0FuZEhvbGVzKG8sdGhpcy5zaGVsbExpc3QsciksdGhpcy5wbGFjZUZyZWVIb2xlcyh0aGlzLnNoZWxsTGlzdCxyKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEVpfX0pLFRyKFNpLnByb3RvdHlwZSx7Y29sbGVjdExpbmVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm9wLmdldEdyYXBoKCkuZ2V0RWRnZUVuZHMoKS5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5jb2xsZWN0TGluZUVkZ2Uobix0LHRoaXMubGluZUVkZ2VzTGlzdCksdGhpcy5jb2xsZWN0Qm91bmRhcnlUb3VjaEVkZ2Uobix0LHRoaXMubGluZUVkZ2VzTGlzdCl9fSxsYWJlbElzb2xhdGVkTGluZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucHRMb2NhdG9yLmxvY2F0ZSh0LmdldENvb3JkaW5hdGUoKSx0aGlzLm9wLmdldEFyZ0dlb21ldHJ5KGUpKTt0LmdldExhYmVsKCkuc2V0TG9jYXRpb24oZSxuKX0sYnVpbGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZmluZENvdmVyZWRMaW5lRWRnZXMoKSx0aGlzLmNvbGxlY3RMaW5lcyh0KSx0aGlzLmJ1aWxkTGluZXModCksdGhpcy5yZXN1bHRMaW5lTGlzdH0sY29sbGVjdExpbmVFZGdlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LmdldExhYmVsKCkscj10LmdldEVkZ2UoKTt0LmlzTGluZUVkZ2UoKSYmKHQuaXNWaXNpdGVkKCl8fCFUaS5pc1Jlc3VsdE9mT3AoaSxlKXx8ci5pc0NvdmVyZWQoKXx8KG4uYWRkKHIpLHQuc2V0VmlzaXRlZEVkZ2UoITApKSl9LGZpbmRDb3ZlcmVkTGluZUVkZ2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMub3AuZ2V0R3JhcGgoKS5nZXROb2RlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXQubmV4dCgpLmdldEVkZ2VzKCkuZmluZENvdmVyZWRMaW5lRWRnZXMoKTtmb3IodmFyIGU9dGhpcy5vcC5nZXRHcmFwaCgpLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRFZGdlKCk7aWYobi5pc0xpbmVFZGdlKCkmJiFpLmlzQ292ZXJlZFNldCgpKXt2YXIgcj10aGlzLm9wLmlzQ292ZXJlZEJ5QShuLmdldENvb3JkaW5hdGUoKSk7aS5zZXRDb3ZlcmVkKHIpfX19LGxhYmVsSXNvbGF0ZWRMaW5lczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT1uLmdldExhYmVsKCk7bi5pc0lzb2xhdGVkKCkmJihpLmlzTnVsbCgwKT90aGlzLmxhYmVsSXNvbGF0ZWRMaW5lKG4sMCk6dGhpcy5sYWJlbElzb2xhdGVkTGluZShuLDEpKX19LGJ1aWxkTGluZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMubGluZUVkZ2VzTGlzdC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT0obi5nZXRMYWJlbCgpLHRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcobi5nZXRDb29yZGluYXRlcygpKSk7dGhpcy5yZXN1bHRMaW5lTGlzdC5hZGQoaSksbi5zZXRJblJlc3VsdCghMCl9fSxjb2xsZWN0Qm91bmRhcnlUb3VjaEVkZ2U6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZ2V0TGFiZWwoKTtyZXR1cm4gdC5pc0xpbmVFZGdlKCk/bnVsbDp0LmlzVmlzaXRlZCgpP251bGw6dC5pc0ludGVyaW9yQXJlYUVkZ2UoKT9udWxsOnQuZ2V0RWRnZSgpLmlzSW5SZXN1bHQoKT9udWxsOihjLmlzVHJ1ZSghKHQuaXNJblJlc3VsdCgpfHx0LmdldFN5bSgpLmlzSW5SZXN1bHQoKSl8fCF0LmdldEVkZ2UoKS5pc0luUmVzdWx0KCkpLHZvaWQoVGkuaXNSZXN1bHRPZk9wKGksZSkmJmU9PT1UaS5JTlRFUlNFQ1RJT04mJihuLmFkZCh0LmdldEVkZ2UoKSksdC5zZXRWaXNpdGVkRWRnZSghMCkpKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFNpfX0pLFRyKE1pLnByb3RvdHlwZSx7ZmlsdGVyQ292ZXJlZE5vZGVUb1BvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Q29vcmRpbmF0ZSgpO2lmKCF0aGlzLm9wLmlzQ292ZXJlZEJ5TEEoZSkpe3ZhciBuPXRoaXMuZ2VvbWV0cnlGYWN0b3J5LmNyZWF0ZVBvaW50KGUpO3RoaXMucmVzdWx0UG9pbnRMaXN0LmFkZChuKX19LGV4dHJhY3ROb25Db3ZlcmVkUmVzdWx0Tm9kZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3AuZ2V0R3JhcGgoKS5nZXROb2RlcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTtpZighKG4uaXNJblJlc3VsdCgpfHxuLmlzSW5jaWRlbnRFZGdlSW5SZXN1bHQoKXx8MCE9PW4uZ2V0RWRnZXMoKS5nZXREZWdyZWUoKSYmdCE9PVRpLklOVEVSU0VDVElPTikpe3ZhciBpPW4uZ2V0TGFiZWwoKTtUaS5pc1Jlc3VsdE9mT3AoaSx0KSYmdGhpcy5maWx0ZXJDb3ZlcmVkTm9kZVRvUG9pbnQobil9fX0sYnVpbGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXh0cmFjdE5vbkNvdmVyZWRSZXN1bHROb2Rlcyh0KSx0aGlzLnJlc3VsdFBvaW50TGlzdH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gTWl9fSksVHIoQ2kucHJvdG90eXBlLHtnZXRBcmdHZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcmdbdF0uZ2V0R2VvbWV0cnkoKX0sc2V0Q29tcHV0YXRpb25QcmVjaXNpb246ZnVuY3Rpb24odCl7dGhpcy5yZXN1bHRQcmVjaXNpb25Nb2RlbD10LHRoaXMubGkuc2V0UHJlY2lzaW9uTW9kZWwodGhpcy5yZXN1bHRQcmVjaXNpb25Nb2RlbCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIENpfX0pLFRyKElpLnByb3RvdHlwZSx7Y29tcGFyZVRvOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuIElpLmNvbXBhcmVPcmllbnRlZCh0aGlzLnB0cyx0aGlzLl9vcmllbnRhdGlvbixlLnB0cyxlLl9vcmllbnRhdGlvbil9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3JdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBJaX19KSxJaS5vcmllbnRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gMT09PVYuaW5jcmVhc2luZ0RpcmVjdGlvbih0KX0sSWkuY29tcGFyZU9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuLGkpe2Zvcih2YXIgcj1lPzE6LTEsbz1pPzE6LTEsYT1lP3QubGVuZ3RoOi0xLHM9aT9uLmxlbmd0aDotMSx1PWU/MDp0Lmxlbmd0aC0xLGw9aT8wOm4ubGVuZ3RoLTE7Oyl7dmFyIGM9dFt1XS5jb21wYXJlVG8obltsXSk7aWYoMCE9PWMpcmV0dXJuIGM7dSs9cixsKz1vO3ZhciBoPXU9PT1hLGY9bD09PXM7aWYoaCYmIWYpcmV0dXJuLTE7aWYoIWgmJmYpcmV0dXJuIDE7aWYoaCYmZilyZXR1cm4gMH19LFRyKE9pLnByb3RvdHlwZSx7cHJpbnQ6ZnVuY3Rpb24odCl7dC5wcmludChcIk1VTFRJTElORVNUUklORyAoIFwiKTtmb3IodmFyIGU9MDtlPHRoaXMuZWRnZXMuc2l6ZSgpO2UrKyl7dmFyIG49dGhpcy5lZGdlcy5nZXQoZSk7ZT4wJiZ0LnByaW50KFwiLFwiKSx0LnByaW50KFwiKFwiKTtmb3IodmFyIGk9bi5nZXRDb29yZGluYXRlcygpLHI9MDtyPGkubGVuZ3RoO3IrKylyPjAmJnQucHJpbnQoXCIsXCIpLHQucHJpbnQoaVtyXS54K1wiIFwiK2lbcl0ueSk7dC5wcmludGxuKFwiKVwiKX10LnByaW50KFwiKSAgXCIpfSxhZGRBbGw6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspdGhpcy5hZGQoZS5uZXh0KCkpfSxmaW5kRWRnZUluZGV4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5lZGdlcy5zaXplKCk7ZSsrKWlmKHRoaXMuZWRnZXMuZ2V0KGUpLmVxdWFscyh0KSlyZXR1cm4gZTtyZXR1cm4tMX0saXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlcy5pdGVyYXRvcigpfSxnZXRFZGdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2VzfSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWRnZXMuZ2V0KHQpfSxmaW5kRXF1YWxFZGdlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBJaSh0LmdldENvb3JkaW5hdGVzKCkpO3JldHVybiB0aGlzLm9jYU1hcC5nZXQoZSl9LGFkZDpmdW5jdGlvbih0KXt0aGlzLmVkZ2VzLmFkZCh0KTt2YXIgZT1uZXcgSWkodC5nZXRDb29yZGluYXRlcygpKTt0aGlzLm9jYU1hcC5wdXQoZSx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gT2l9fSksUHIoVGksQ2kpLFRyKFRpLnByb3RvdHlwZSx7aW5zZXJ0VW5pcXVlRWRnZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmVkZ2VMaXN0LmZpbmRFcXVhbEVkZ2UodCk7aWYobnVsbCE9PWUpe3ZhciBuPWUuZ2V0TGFiZWwoKSxpPXQuZ2V0TGFiZWwoKTtlLmlzUG9pbnR3aXNlRXF1YWwodCl8fChpPW5ldyBrZSh0LmdldExhYmVsKCkpLGkuZmxpcCgpKTt2YXIgcj1lLmdldERlcHRoKCk7ci5pc051bGwoKSYmci5hZGQobiksci5hZGQoaSksbi5tZXJnZShpKX1lbHNlIHRoaXMuZWRnZUxpc3QuYWRkKHQpfSxnZXRHcmFwaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyYXBofSxjYW5jZWxEdXBsaWNhdGVSZXN1bHRFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdyYXBoLmdldEVkZ2VFbmRzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspe3ZhciBlPXQubmV4dCgpLG49ZS5nZXRTeW0oKTtlLmlzSW5SZXN1bHQoKSYmbi5pc0luUmVzdWx0KCkmJihlLnNldEluUmVzdWx0KCExKSxuLnNldEluUmVzdWx0KCExKSl9fSxpc0NvdmVyZWRCeUxBOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5pc0NvdmVyZWQodCx0aGlzLnJlc3VsdExpbmVMaXN0KXx8ISF0aGlzLmlzQ292ZXJlZCh0LHRoaXMucmVzdWx0UG9seUxpc3QpfSxjb21wdXRlR2VvbWV0cnk6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9bmV3IF87cmV0dXJuIHIuYWRkQWxsKHQpLHIuYWRkQWxsKGUpLHIuYWRkQWxsKG4pLHIuaXNFbXB0eSgpP1RpLmNyZWF0ZUVtcHR5UmVzdWx0KGksdGhpcy5hcmdbMF0uZ2V0R2VvbWV0cnkoKSx0aGlzLmFyZ1sxXS5nZXRHZW9tZXRyeSgpLHRoaXMuZ2VvbUZhY3QpOnRoaXMuZ2VvbUZhY3QuYnVpbGRHZW9tZXRyeShyKX0sbWVyZ2VTeW1MYWJlbHM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ncmFwaC5nZXROb2RlcygpLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXQubmV4dCgpLmdldEVkZ2VzKCkubWVyZ2VTeW1MYWJlbHMoKX0saXNDb3ZlcmVkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKHRoaXMucHRMb2NhdG9yLmxvY2F0ZSh0LGkpIT09Uy5FWFRFUklPUilyZXR1cm4hMH1yZXR1cm4hMX0scmVwbGFjZUNvbGxhcHNlZEVkZ2VzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBfLGU9dGhpcy5lZGdlTGlzdC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5pc0NvbGxhcHNlZCgpJiYoZS5yZW1vdmUoKSx0LmFkZChuLmdldENvbGxhcHNlZEVkZ2UoKSkpfXRoaXMuZWRnZUxpc3QuYWRkQWxsKHQpfSx1cGRhdGVOb2RlTGFiZWxsaW5nOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ3JhcGguZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCksbj1lLmdldEVkZ2VzKCkuZ2V0TGFiZWwoKTtlLmdldExhYmVsKCkubWVyZ2Uobil9fSxnZXRSZXN1bHRHZW9tZXRyeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb21wdXRlT3ZlcmxheSh0KSx0aGlzLnJlc3VsdEdlb219LGluc2VydFVuaXF1ZUVkZ2VzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLmluc2VydFVuaXF1ZUVkZ2Uobil9fSxjb21wdXRlT3ZlcmxheTpmdW5jdGlvbih0KXt0aGlzLmNvcHlQb2ludHMoMCksdGhpcy5jb3B5UG9pbnRzKDEpLHRoaXMuYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSwhMSksdGhpcy5hcmdbMV0uY29tcHV0ZVNlbGZOb2Rlcyh0aGlzLmxpLCExKSx0aGlzLmFyZ1swXS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnModGhpcy5hcmdbMV0sdGhpcy5saSwhMCk7dmFyIGU9bmV3IF87dGhpcy5hcmdbMF0uY29tcHV0ZVNwbGl0RWRnZXMoZSksdGhpcy5hcmdbMV0uY29tcHV0ZVNwbGl0RWRnZXMoZSksdGhpcy5pbnNlcnRVbmlxdWVFZGdlcyhlKSx0aGlzLmNvbXB1dGVMYWJlbHNGcm9tRGVwdGhzKCksdGhpcy5yZXBsYWNlQ29sbGFwc2VkRWRnZXMoKSx3aS5jaGVja1ZhbGlkKHRoaXMuZWRnZUxpc3QuZ2V0RWRnZXMoKSksdGhpcy5ncmFwaC5hZGRFZGdlcyh0aGlzLmVkZ2VMaXN0LmdldEVkZ2VzKCkpLHRoaXMuY29tcHV0ZUxhYmVsbGluZygpLHRoaXMubGFiZWxJbmNvbXBsZXRlTm9kZXMoKSx0aGlzLmZpbmRSZXN1bHRBcmVhRWRnZXModCksdGhpcy5jYW5jZWxEdXBsaWNhdGVSZXN1bHRFZGdlcygpO3ZhciBuPW5ldyBFaSh0aGlzLmdlb21GYWN0KTtuLmFkZCh0aGlzLmdyYXBoKSx0aGlzLnJlc3VsdFBvbHlMaXN0PW4uZ2V0UG9seWdvbnMoKTt2YXIgaT1uZXcgU2kodGhpcyx0aGlzLmdlb21GYWN0LHRoaXMucHRMb2NhdG9yKTt0aGlzLnJlc3VsdExpbmVMaXN0PWkuYnVpbGQodCk7dmFyIHI9bmV3IE1pKHRoaXMsdGhpcy5nZW9tRmFjdCx0aGlzLnB0TG9jYXRvcik7dGhpcy5yZXN1bHRQb2ludExpc3Q9ci5idWlsZCh0KSx0aGlzLnJlc3VsdEdlb209dGhpcy5jb21wdXRlR2VvbWV0cnkodGhpcy5yZXN1bHRQb2ludExpc3QsdGhpcy5yZXN1bHRMaW5lTGlzdCx0aGlzLnJlc3VsdFBvbHlMaXN0LHQpfSxsYWJlbEluY29tcGxldGVOb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5wdExvY2F0b3IubG9jYXRlKHQuZ2V0Q29vcmRpbmF0ZSgpLHRoaXMuYXJnW2VdLmdldEdlb21ldHJ5KCkpO3QuZ2V0TGFiZWwoKS5zZXRMb2NhdGlvbihlLG4pfSxjb3B5UG9pbnRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFyZ1t0XS5nZXROb2RlSXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO3RoaXMuZ3JhcGguYWRkTm9kZShuLmdldENvb3JkaW5hdGUoKSkuc2V0TGFiZWwodCxuLmdldExhYmVsKCkuZ2V0TG9jYXRpb24odCkpfX0sZmluZFJlc3VsdEFyZWFFZGdlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5ncmFwaC5nZXRFZGdlRW5kcygpLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKTtpLmlzQXJlYSgpJiYhbi5pc0ludGVyaW9yQXJlYUVkZ2UoKSYmVGkuaXNSZXN1bHRPZk9wKGkuZ2V0TG9jYXRpb24oMCxBZS5SSUdIVCksaS5nZXRMb2NhdGlvbigxLEFlLlJJR0hUKSx0KSYmbi5zZXRJblJlc3VsdCghMCl9fSxjb21wdXRlTGFiZWxzRnJvbURlcHRoczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmVkZ2VMaXN0Lml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0TGFiZWwoKSxpPWUuZ2V0RGVwdGgoKTtpZighaS5pc051bGwoKSl7aS5ub3JtYWxpemUoKTtmb3IodmFyIHI9MDtyPDI7cisrKW4uaXNOdWxsKHIpfHwhbi5pc0FyZWEoKXx8aS5pc051bGwocil8fCgwPT09aS5nZXREZWx0YShyKT9uLnRvTGluZShyKTooYy5pc1RydWUoIWkuaXNOdWxsKHIsQWUuTEVGVCksXCJkZXB0aCBvZiBMRUZUIHNpZGUgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkXCIpLG4uc2V0TG9jYXRpb24ocixBZS5MRUZULGkuZ2V0TG9jYXRpb24ocixBZS5MRUZUKSksYy5pc1RydWUoIWkuaXNOdWxsKHIsQWUuUklHSFQpLFwiZGVwdGggb2YgUklHSFQgc2lkZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWRcIiksbi5zZXRMb2NhdGlvbihyLEFlLlJJR0hULGkuZ2V0TG9jYXRpb24ocixBZS5SSUdIVCkpKSl9fX0sY29tcHV0ZUxhYmVsbGluZzpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTt0Lmhhc05leHQoKTspdC5uZXh0KCkuZ2V0RWRnZXMoKS5jb21wdXRlTGFiZWxsaW5nKHRoaXMuYXJnKTt0aGlzLm1lcmdlU3ltTGFiZWxzKCksdGhpcy51cGRhdGVOb2RlTGFiZWxsaW5nKCl9LGxhYmVsSW5jb21wbGV0ZU5vZGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmdyYXBoLmdldE5vZGVzKCkuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpLGk9bi5nZXRMYWJlbCgpO24uaXNJc29sYXRlZCgpJiYodCsrLGkuaXNOdWxsKDApP3RoaXMubGFiZWxJbmNvbXBsZXRlTm9kZShuLDApOnRoaXMubGFiZWxJbmNvbXBsZXRlTm9kZShuLDEpKSxuLmdldEVkZ2VzKCkudXBkYXRlTGFiZWxsaW5nKGkpfX0saXNDb3ZlcmVkQnlBOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5pc0NvdmVyZWQodCx0aGlzLnJlc3VsdFBvbHlMaXN0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVGl9fSksVGkub3ZlcmxheU9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IFRpKHQsZSkuZ2V0UmVzdWx0R2VvbWV0cnkobil9LFRpLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe2lmKHQuaXNFbXB0eSgpfHxlLmlzRW1wdHkoKSlyZXR1cm4gVGkuY3JlYXRlRW1wdHlSZXN1bHQoVGkuSU5URVJTRUNUSU9OLHQsZSx0LmdldEZhY3RvcnkoKSk7aWYodC5pc0dlb21ldHJ5Q29sbGVjdGlvbigpKXt2YXIgbj1lO3JldHVybiBQZS5tYXAodCx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bTWFwT3BdfSxtYXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW50ZXJzZWN0aW9uKG4pfX0pfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksQWkub3ZlcmxheU9wKHQsZSxUaS5JTlRFUlNFQ1RJT04pfSxUaS5zeW1EaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7aWYodC5pc0VtcHR5KCl8fGUuaXNFbXB0eSgpKXtpZih0LmlzRW1wdHkoKSYmZS5pc0VtcHR5KCkpcmV0dXJuIFRpLmNyZWF0ZUVtcHR5UmVzdWx0KFRpLlNZTURJRkZFUkVOQ0UsdCxlLHQuZ2V0RmFjdG9yeSgpKTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gZS5jb3B5KCk7aWYoZS5pc0VtcHR5KCkpcmV0dXJuIHQuY29weSgpfXJldHVybiB0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHQpLHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24oZSksQWkub3ZlcmxheU9wKHQsZSxUaS5TWU1ESUZGRVJFTkNFKX0sVGkucmVzdWx0RGltZW5zaW9uPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLmdldERpbWVuc2lvbigpLHI9bi5nZXREaW1lbnNpb24oKSxvPS0xO3N3aXRjaCh0KXtjYXNlIFRpLklOVEVSU0VDVElPTjpvPU1hdGgubWluKGkscik7YnJlYWs7Y2FzZSBUaS5VTklPTjpvPU1hdGgubWF4KGkscik7YnJlYWs7Y2FzZSBUaS5ESUZGRVJFTkNFOm89aTticmVhaztjYXNlIFRpLlNZTURJRkZFUkVOQ0U6bz1NYXRoLm1heChpLHIpfXJldHVybiBvfSxUaS5jcmVhdGVFbXB0eVJlc3VsdD1mdW5jdGlvbih0LGUsbixpKXt2YXIgcj1udWxsO3N3aXRjaChUaS5yZXN1bHREaW1lbnNpb24odCxlLG4pKXtjYXNlLTE6cj1pLmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbihuZXcgQXJyYXkoMCkuZmlsbChudWxsKSk7YnJlYWs7Y2FzZSAwOnI9aS5jcmVhdGVQb2ludCgpO2JyZWFrO2Nhc2UgMTpyPWkuY3JlYXRlTGluZVN0cmluZygpO2JyZWFrO2Nhc2UgMjpyPWkuY3JlYXRlUG9seWdvbigpfXJldHVybiByfSxUaS5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaXNFbXB0eSgpP1RpLmNyZWF0ZUVtcHR5UmVzdWx0KFRpLkRJRkZFUkVOQ0UsdCxlLHQuZ2V0RmFjdG9yeSgpKTplLmlzRW1wdHkoKT90LmNvcHkoKToodC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0KSx0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKGUpLEFpLm92ZXJsYXlPcCh0LGUsVGkuRElGRkVSRU5DRSkpfSxUaS5pc1Jlc3VsdE9mT3A9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49dC5nZXRMb2NhdGlvbigwKSxpPXQuZ2V0TG9jYXRpb24oMSk7cmV0dXJuIFRpLmlzUmVzdWx0T2ZPcChuLGksZSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXTtzd2l0Y2gocj09PVMuQk9VTkRBUlkmJihyPVMuSU5URVJJT1IpLG89PT1TLkJPVU5EQVJZJiYobz1TLklOVEVSSU9SKSxhKXtjYXNlIFRpLklOVEVSU0VDVElPTjpyZXR1cm4gcj09PVMuSU5URVJJT1ImJm89PT1TLklOVEVSSU9SO2Nhc2UgVGkuVU5JT046cmV0dXJuIHI9PT1TLklOVEVSSU9SfHxvPT09Uy5JTlRFUklPUjtjYXNlIFRpLkRJRkZFUkVOQ0U6cmV0dXJuIHI9PT1TLklOVEVSSU9SJiZvIT09Uy5JTlRFUklPUjtjYXNlIFRpLlNZTURJRkZFUkVOQ0U6cmV0dXJuIHI9PT1TLklOVEVSSU9SJiZvIT09Uy5JTlRFUklPUnx8ciE9PVMuSU5URVJJT1ImJm89PT1TLklOVEVSSU9SfXJldHVybiExfX0sVGkuSU5URVJTRUNUSU9OPTEsVGkuVU5JT049MixUaS5ESUZGRVJFTkNFPTMsVGkuU1lNRElGRkVSRU5DRT00LFRyKFBpLnByb3RvdHlwZSx7c2VsZlNuYXA6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyAkbih0KS5zbmFwVG8odCx0aGlzLnNuYXBUb2xlcmFuY2UpfSxyZW1vdmVDb21tb25CaXRzOmZ1bmN0aW9uKHQpe3RoaXMuY2JyPW5ldyBuaSx0aGlzLmNici5hZGQodFswXSksdGhpcy5jYnIuYWRkKHRbMV0pO3ZhciBlPW5ldyBBcnJheSgyKS5maWxsKG51bGwpO3JldHVybiBlWzBdPXRoaXMuY2JyLnJlbW92ZUNvbW1vbkJpdHModFswXS5jb3B5KCkpLGVbMV09dGhpcy5jYnIucmVtb3ZlQ29tbW9uQml0cyh0WzFdLmNvcHkoKSksZX0scHJlcGFyZVJlc3VsdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYnIuYWRkQ29tbW9uQml0cyh0KSx0fSxnZXRSZXN1bHRHZW9tZXRyeTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnNuYXAodGhpcy5nZW9tKSxuPVRpLm92ZXJsYXlPcChlWzBdLGVbMV0sdCk7cmV0dXJuIHRoaXMucHJlcGFyZVJlc3VsdChuKX0sY2hlY2tWYWxpZDpmdW5jdGlvbih0KXt0LmlzVmFsaWQoKXx8TC5vdXQucHJpbnRsbihcIlNuYXBwZWQgZ2VvbWV0cnkgaXMgaW52YWxpZFwiKX0sY29tcHV0ZVNuYXBUb2xlcmFuY2U6ZnVuY3Rpb24oKXt0aGlzLnNuYXBUb2xlcmFuY2U9JG4uY29tcHV0ZU92ZXJsYXlTbmFwVG9sZXJhbmNlKHRoaXMuZ2VvbVswXSx0aGlzLmdlb21bMV0pfSxzbmFwOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVtb3ZlQ29tbW9uQml0cyh0KTtyZXR1cm4gJG4uc25hcChlWzBdLGVbMV0sdGhpcy5zbmFwVG9sZXJhbmNlKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gUGl9fSksUGkub3ZlcmxheU9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IFBpKHQsZSkuZ2V0UmVzdWx0R2VvbWV0cnkobil9LFBpLnVuaW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFBpLm92ZXJsYXlPcCh0LGUsVGkuVU5JT04pfSxQaS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gUGkub3ZlcmxheU9wKHQsZSxUaS5JTlRFUlNFQ1RJT04pfSxQaS5zeW1EaWZmZXJlbmNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFBpLm92ZXJsYXlPcCh0LGUsVGkuU1lNRElGRkVSRU5DRSl9LFBpLmRpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUGkub3ZlcmxheU9wKHQsZSxUaS5ESUZGRVJFTkNFKX0sVHIoQWkucHJvdG90eXBlLHtnZXRSZXN1bHRHZW9tZXRyeTpmdW5jdGlvbih0KXt2YXIgZT1udWxsLG49ITEsaT1udWxsO3RyeXtlPVRpLm92ZXJsYXlPcCh0aGlzLmdlb21bMF0sdGhpcy5nZW9tWzFdLHQpLG49ITB9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgdSkpdGhyb3cgdDtpPXR9ZmluYWxseXt9aWYoIW4pdHJ5e2U9UGkub3ZlcmxheU9wKHRoaXMuZ2VvbVswXSx0aGlzLmdlb21bMV0sdCl9Y2F0Y2godCl7dGhyb3cgdCBpbnN0YW5jZW9mIHU/aTp0fWZpbmFsbHl7fXJldHVybiBlfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBBaX19KSxBaS5vdmVybGF5T3A9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgQWkodCxlKS5nZXRSZXN1bHRHZW9tZXRyeShuKX0sQWkudW5pb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gQWkub3ZlcmxheU9wKHQsZSxUaS5VTklPTil9LEFpLmludGVyc2VjdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiBBaS5vdmVybGF5T3AodCxlLFRpLklOVEVSU0VDVElPTil9LEFpLnN5bURpZmZlcmVuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQWkub3ZlcmxheU9wKHQsZSxUaS5TWU1ESUZGRVJFTkNFKX0sQWkuZGlmZmVyZW5jZT1mdW5jdGlvbih0LGUpe3JldHVybiBBaS5vdmVybGF5T3AodCxlLFRpLkRJRkZFUkVOQ0UpfSxUcihMaS5wcm90b3R5cGUse2FkZFBvbHlnb246ZnVuY3Rpb24odCl7aWYodC5pc0VtcHR5KCkpcmV0dXJuIG51bGw7dmFyIGU9bnVsbCxuPTAsaT10aGlzLmhvcml6b250YWxCaXNlY3Rvcih0KTtpZigwPT09aS5nZXRMZW5ndGgoKSluPTAsZT1pLmdldENvb3JkaW5hdGUoKTtlbHNle3ZhciByPUFpLm92ZXJsYXlPcChpLHQsVGkuSU5URVJTRUNUSU9OKSxvPXRoaXMud2lkZXN0R2VvbWV0cnkocik7bj1vLmdldEVudmVsb3BlSW50ZXJuYWwoKS5nZXRXaWR0aCgpLGU9TGkuY2VudHJlKG8uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKX0obnVsbD09PXRoaXMuaW50ZXJpb3JQb2ludHx8bj50aGlzLm1heFdpZHRoKSYmKHRoaXMuaW50ZXJpb3JQb2ludD1lLHRoaXMubWF4V2lkdGg9bil9LGdldEludGVyaW9yUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvclBvaW50fSx3aWRlc3RHZW9tZXRyeTpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgbHQpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0LmlzRW1wdHkoKSlyZXR1cm4gdDtmb3IodmFyIGU9dC5nZXRHZW9tZXRyeU4oMCksbj0xO248dC5nZXROdW1HZW9tZXRyaWVzKCk7bisrKXQuZ2V0R2VvbWV0cnlOKG4pLmdldEVudmVsb3BlSW50ZXJuYWwoKS5nZXRXaWR0aCgpPmUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmdldFdpZHRoKCkmJihlPXQuZ2V0R2VvbWV0cnlOKG4pKTtyZXR1cm4gZX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQpe3ZhciBpPWFyZ3VtZW50c1swXTtyZXR1cm4gaSBpbnN0YW5jZW9mIGx0P3RoaXMud2lkZXN0R2VvbWV0cnkoaSk6aX19LGhvcml6b250YWxCaXNlY3RvcjpmdW5jdGlvbih0KXt2YXIgZT10LmdldEVudmVsb3BlSW50ZXJuYWwoKSxuPU5pLmdldEJpc2VjdG9yWSh0KTtyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcoW25ldyBoKGUuZ2V0TWluWCgpLG4pLG5ldyBoKGUuZ2V0TWF4WCgpLG4pXSl9LGFkZDpmdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgTXQpdGhpcy5hZGRQb2x5Z29uKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGx0KWZvcih2YXIgZT10LG49MDtuPGUuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl0aGlzLmFkZChlLmdldEdlb21ldHJ5TihuKSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIExpfX0pLExpLmNlbnRyZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGgoTGkuYXZnKHQuZ2V0TWluWCgpLHQuZ2V0TWF4WCgpKSxMaS5hdmcodC5nZXRNaW5ZKCksdC5nZXRNYXhZKCkpKX0sTGkuYXZnPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQrZSkvMn0sVHIoTmkucHJvdG90eXBlLHt1cGRhdGVJbnRlcnZhbDpmdW5jdGlvbih0KXt0PD10aGlzLmNlbnRyZVk/dD50aGlzLmxvWSYmKHRoaXMubG9ZPXQpOnQ+dGhpcy5jZW50cmVZJiZ0PHRoaXMuaGlZJiYodGhpcy5oaVk9dCl9LGdldEJpc2VjdG9yWTpmdW5jdGlvbigpe3RoaXMucHJvY2Vzcyh0aGlzLnBvbHkuZ2V0RXh0ZXJpb3JSaW5nKCkpO2Zvcih2YXIgdD0wO3Q8dGhpcy5wb2x5LmdldE51bUludGVyaW9yUmluZygpO3QrKyl0aGlzLnByb2Nlc3ModGhpcy5wb2x5LmdldEludGVyaW9yUmluZ04odCkpO3JldHVybiBMaS5hdmcodGhpcy5oaVksdGhpcy5sb1kpfSxwcm9jZXNzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLG49MDtuPGUuc2l6ZSgpO24rKyl7dmFyIGk9ZS5nZXRZKG4pO3RoaXMudXBkYXRlSW50ZXJ2YWwoaSl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBOaX19KSxOaS5nZXRCaXNlY3Rvclk9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBOaSh0KS5nZXRCaXNlY3RvclkoKX0sTGkuU2FmZUJpc2VjdG9yRmluZGVyPU5pLFRyKGtpLnByb3RvdHlwZSx7ZXh0cmFjdEVsZW1lbnRzOmZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXQpcmV0dXJuIG51bGw7Zm9yKHZhciBuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXQuZ2V0R2VvbWV0cnlOKG4pO3RoaXMuc2tpcEVtcHR5JiZpLmlzRW1wdHkoKXx8ZS5hZGQoaSl9fSxjb21iaW5lOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBfLGU9dGhpcy5pbnB1dEdlb21zLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0aGlzLmV4dHJhY3RFbGVtZW50cyhuLHQpfXJldHVybiAwPT09dC5zaXplKCk/bnVsbCE9PXRoaXMuZ2VvbUZhY3Rvcnk/dGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk6bnVsbDp0aGlzLmdlb21GYWN0b3J5LmJ1aWxkR2VvbWV0cnkodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGtpfX0pLGtpLmNvbWJpbmU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IGtpKHQpO3JldHVybiBlLmNvbWJpbmUoKX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLGU9bmV3IGtpKGtpLmNyZWF0ZUxpc3QobixpKSk7cmV0dXJuIGUuY29tYmluZSgpfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl0sZT1uZXcga2koa2kuY3JlYXRlTGlzdChyLG8sYSkpO3JldHVybiBlLmNvbWJpbmUoKX19LGtpLmV4dHJhY3RGYWN0b3J5PWZ1bmN0aW9uKHQpe3JldHVybiB0LmlzRW1wdHkoKT9udWxsOnQuaXRlcmF0b3IoKS5uZXh0KCkuZ2V0RmFjdG9yeSgpfSxraS5jcmVhdGVMaXN0PWZ1bmN0aW9uKCl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPWFyZ3VtZW50c1sxXSxuPW5ldyBfO3JldHVybiBuLmFkZCh0KSxuLmFkZChlKSxufWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sbz1hcmd1bWVudHNbMl0sbj1uZXcgXztyZXR1cm4gbi5hZGQoaSksbi5hZGQociksbi5hZGQobyksbn19LFRyKFJpLnByb3RvdHlwZSx7dW5pb246ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEVlLGU9bmV3IHJ0LG49MDtuPHRoaXMucG9pbnRHZW9tLmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXRoaXMucG9pbnRHZW9tLmdldEdlb21ldHJ5TihuKSxyPWkuZ2V0Q29vcmRpbmF0ZSgpO3QubG9jYXRlKHIsdGhpcy5vdGhlckdlb20pPT09Uy5FWFRFUklPUiYmZS5hZGQocil9aWYoMD09PWUuc2l6ZSgpKXJldHVybiB0aGlzLm90aGVyR2VvbTt2YXIgbz1udWxsLGE9Vi50b0Nvb3JkaW5hdGVBcnJheShlKTtyZXR1cm4gbz0xPT09YS5sZW5ndGg/dGhpcy5nZW9tRmFjdC5jcmVhdGVQb2ludChhWzBdKTp0aGlzLmdlb21GYWN0LmNyZWF0ZU11bHRpUG9pbnRGcm9tQ29vcmRzKGEpLGtpLmNvbWJpbmUobyx0aGlzLm90aGVyR2VvbSl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFJpfX0pLFJpLnVuaW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBSaSh0LGUpLnVuaW9uKCl9LFRyKERpLnByb3RvdHlwZSx7ZmlsdGVyOmZ1bmN0aW9uKHQpe3RoaXMuc29ydEluZGV4IT09LTEmJnQuZ2V0U29ydEluZGV4KCkhPT10aGlzLnNvcnRJbmRleHx8dGhpcy5jb21wcy5hZGQodCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3N0XX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRGl9fSksRGkuZXh0cmFjdD1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV07cmV0dXJuIERpLmV4dHJhY3QodCxlLG5ldyBfKX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIG49YXJndW1lbnRzWzBdLGk9YXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO3JldHVybiBuLmdldFNvcnRJbmRleCgpPT09aT9yLmFkZChuKTpuIGluc3RhbmNlb2YgbHQmJm4uYXBwbHkobmV3IERpKGkscikpLHJ9fSxUcihGaS5wcm90b3R5cGUse3JlZHVjZVRvR2VvbWV0cmllczpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IF8sbj10Lml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKSxyPW51bGw7THIoaSx2KT9yPXRoaXMudW5pb25UcmVlKGkpOmkgaW5zdGFuY2VvZiBEJiYocj1pKSxlLmFkZChyKX1yZXR1cm4gZX0sZXh0cmFjdEJ5RW52ZWxvcGU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1uZXcgXyxyPTA7cjxlLmdldE51bUdlb21ldHJpZXMoKTtyKyspe3ZhciBvPWUuZ2V0R2VvbWV0cnlOKHIpO28uZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmludGVyc2VjdHModCk/aS5hZGQobyk6bi5hZGQobyl9cmV0dXJuIHRoaXMuZ2VvbUZhY3RvcnkuYnVpbGRHZW9tZXRyeShpKX0sdW5pb25PcHRpbWl6ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldEVudmVsb3BlSW50ZXJuYWwoKSxpPWUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO2lmKCFuLmludGVyc2VjdHMoaSkpcmV0dXJuIGtpLmNvbWJpbmUodCxlKTtpZih0LmdldE51bUdlb21ldHJpZXMoKTw9MSYmZS5nZXROdW1HZW9tZXRyaWVzKCk8PTEpcmV0dXJuIHRoaXMudW5pb25BY3R1YWwodCxlKTt2YXIgcj1uLmludGVyc2VjdGlvbihpKTtyZXR1cm4gdGhpcy51bmlvblVzaW5nRW52ZWxvcGVJbnRlcnNlY3Rpb24odCxlLHIpfSx1bmlvbjpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmlucHV0UG9seXMpdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihcInVuaW9uKCkgbWV0aG9kIGNhbm5vdCBiZSBjYWxsZWQgdHdpY2VcIik7aWYodGhpcy5pbnB1dFBvbHlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDt0aGlzLmdlb21GYWN0b3J5PXRoaXMuaW5wdXRQb2x5cy5pdGVyYXRvcigpLm5leHQoKS5nZXRGYWN0b3J5KCk7Zm9yKHZhciB0PW5ldyBxbihGaS5TVFJUUkVFX05PREVfQ0FQQUNJVFkpLGU9dGhpcy5pbnB1dFBvbHlzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KXt2YXIgbj1lLm5leHQoKTt0Lmluc2VydChuLmdldEVudmVsb3BlSW50ZXJuYWwoKSxuKX10aGlzLmlucHV0UG9seXM9bnVsbDt2YXIgaT10Lml0ZW1zVHJlZSgpO3JldHVybiB0aGlzLnVuaW9uVHJlZShpKX0sYmluYXJ5VW5pb246ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmJpbmFyeVVuaW9uKHQsMCx0LnNpemUoKSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTtpZihpLW48PTEpe3ZhciByPUZpLmdldEdlb21ldHJ5KGUsbik7cmV0dXJuIHRoaXMudW5pb25TYWZlKHIsbnVsbCl9aWYoaS1uPT0yKXJldHVybiB0aGlzLnVuaW9uU2FmZShGaS5nZXRHZW9tZXRyeShlLG4pLEZpLmdldEdlb21ldHJ5KGUsbisxKSk7dmFyIG89TWF0aC50cnVuYygoaStuKS8yKSxyPXRoaXMuYmluYXJ5VW5pb24oZSxuLG8pLGE9dGhpcy5iaW5hcnlVbmlvbihlLG8saSk7cmV0dXJuIHRoaXMudW5pb25TYWZlKHIsYSl9fSxyZXBlYXRlZFVuaW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7ZT1udWxsPT09ZT9pLmNvcHkoKTplLnVuaW9uKGkpfXJldHVybiBlfSx1bmlvblNhZmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09PXQmJm51bGw9PT1lP251bGw6bnVsbD09PXQ/ZS5jb3B5KCk6bnVsbD09PWU/dC5jb3B5KCk6dGhpcy51bmlvbk9wdGltaXplZCh0LGUpfSx1bmlvbkFjdHVhbDpmdW5jdGlvbih0LGUpe3JldHVybiBGaS5yZXN0cmljdFRvUG9seWdvbnModC51bmlvbihlKSl9LHVuaW9uVHJlZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnJlZHVjZVRvR2VvbWV0cmllcyh0KTtyZXR1cm4gdGhpcy5iaW5hcnlVbmlvbihlKX0sdW5pb25Vc2luZ0VudmVsb3BlSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgXyxyPXRoaXMuZXh0cmFjdEJ5RW52ZWxvcGUobix0LGkpLG89dGhpcy5leHRyYWN0QnlFbnZlbG9wZShuLGUsaSksYT10aGlzLnVuaW9uQWN0dWFsKHIsbyk7cmV0dXJuIGkuYWRkKGEpLGtpLmNvbWJpbmUoaSl9LGJ1ZmZlclVuaW9uOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXSxlPXQuZ2V0KDApLmdldEZhY3RvcnkoKSxuPWUuYnVpbGRHZW9tZXRyeSh0KSxpPW4uYnVmZmVyKDApO3JldHVybiBpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sZT1yLmdldEZhY3RvcnkoKSxuPWUuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKFtyLG9dKSxpPW4uYnVmZmVyKDApO3JldHVybiBpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gRml9fSksRmkucmVzdHJpY3RUb1BvbHlnb25zPWZ1bmN0aW9uKHQpe2lmKExyKHQsU3QpKXJldHVybiB0O3ZhciBlPVNlLmdldFBvbHlnb25zKHQpO3JldHVybiAxPT09ZS5zaXplKCk/ZS5nZXQoMCk6dC5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlQb2x5Z29uKCR0LnRvUG9seWdvbkFycmF5KGUpKX0sRmkuZ2V0R2VvbWV0cnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT49dC5zaXplKCk/bnVsbDp0LmdldChlKX0sRmkudW5pb249ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBGaSh0KS51bmlvbigpfSxGaS5TVFJUUkVFX05PREVfQ0FQQUNJVFk9NCxUcihCaS5wcm90b3R5cGUse3VuaW9uTm9PcHQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZW9tRmFjdC5jcmVhdGVQb2ludCgpO3JldHVybiBBaS5vdmVybGF5T3AodCxlLFRpLlVOSU9OKX0sdW5pb25XaXRoTnVsbDpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT09dCYmbnVsbD09PWU/bnVsbDpudWxsPT09ZT90Om51bGw9PT10P2U6dC51bmlvbihlKX0sZXh0cmFjdDpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxwKSlmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5leHRyYWN0KG4pfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgaT1hcmd1bWVudHNbMF07bnVsbD09PXRoaXMuZ2VvbUZhY3QmJih0aGlzLmdlb21GYWN0PWkuZ2V0RmFjdG9yeSgpKSxEaS5leHRyYWN0KGksRC5TT1JUSU5ERVhfUE9MWUdPTix0aGlzLnBvbHlnb25zKSxEaS5leHRyYWN0KGksRC5TT1JUSU5ERVhfTElORVNUUklORyx0aGlzLmxpbmVzKSxEaS5leHRyYWN0KGksRC5TT1JUSU5ERVhfUE9JTlQsdGhpcy5wb2ludHMpfX0sdW5pb246ZnVuY3Rpb24oKXtpZihudWxsPT09dGhpcy5nZW9tRmFjdClyZXR1cm4gbnVsbDt2YXIgdD1udWxsO2lmKHRoaXMucG9pbnRzLnNpemUoKT4wKXt2YXIgZT10aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkodGhpcy5wb2ludHMpO3Q9dGhpcy51bmlvbk5vT3B0KGUpfXZhciBuPW51bGw7aWYodGhpcy5saW5lcy5zaXplKCk+MCl7dmFyIGk9dGhpcy5nZW9tRmFjdC5idWlsZEdlb21ldHJ5KHRoaXMubGluZXMpO249dGhpcy51bmlvbk5vT3B0KGkpfXZhciByPW51bGw7dGhpcy5wb2x5Z29ucy5zaXplKCk+MCYmKHI9RmkudW5pb24odGhpcy5wb2x5Z29ucykpO3ZhciBvPXRoaXMudW5pb25XaXRoTnVsbChuLHIpLGE9bnVsbDtyZXR1cm4gYT1udWxsPT09dD9vOm51bGw9PT1vP3Q6UmkudW5pb24odCxvKSxudWxsPT09YT90aGlzLmdlb21GYWN0LmNyZWF0ZUdlb21ldHJ5Q29sbGVjdGlvbigpOmF9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEJpfX0pLEJpLnVuaW9uPWZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKExyKGFyZ3VtZW50c1swXSxwKSl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IEJpKHQpO3JldHVybiBlLnVuaW9uKCl9aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgbj1hcmd1bWVudHNbMF0sZT1uZXcgQmkobik7cmV0dXJuIGUudW5pb24oKX19ZWxzZSBpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGk9YXJndW1lbnRzWzBdLHI9YXJndW1lbnRzWzFdLGU9bmV3IEJpKGkscik7cmV0dXJuIGUudW5pb24oKX19LFRyKGppLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtcbnJldHVybiBqaX19KSxqaS51bmlvbj1mdW5jdGlvbih0LGUpe2lmKHQuaXNFbXB0eSgpfHxlLmlzRW1wdHkoKSl7aWYodC5pc0VtcHR5KCkmJmUuaXNFbXB0eSgpKXJldHVybiBUaS5jcmVhdGVFbXB0eVJlc3VsdChUaS5VTklPTix0LGUsdC5nZXRGYWN0b3J5KCkpO2lmKHQuaXNFbXB0eSgpKXJldHVybiBlLmNvcHkoKTtpZihlLmlzRW1wdHkoKSlyZXR1cm4gdC5jb3B5KCl9cmV0dXJuIHQuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksdC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbihlKSxBaS5vdmVybGF5T3AodCxlLFRpLlVOSU9OKX0sVHIoVWkucHJvdG90eXBlLHthZGRFbmRwb2ludHM6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0IGluc3RhbmNlb2YgeHQpdGhpcy5hZGRFbmRwb2ludHModC5nZXRDb29yZGluYXRlcygpKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBsdClmb3IodmFyIGU9dCxuPTA7bjxlLmdldE51bUdlb21ldHJpZXMoKTtuKyspdGhpcy5hZGRFbmRwb2ludHMoZS5nZXRHZW9tZXRyeU4obikpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBBcnJheSl7dmFyIGk9YXJndW1lbnRzWzBdO3RoaXMuYWRkKGlbMF0pLHRoaXMuYWRkKGlbaS5sZW5ndGgtMV0pfX0sZ2V0SW50ZXJpb3JQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9yUG9pbnR9LGFkZEludGVyaW9yOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgdD1hcmd1bWVudHNbMF07aWYodCBpbnN0YW5jZW9mIHh0KXRoaXMuYWRkSW50ZXJpb3IodC5nZXRDb29yZGluYXRlcygpKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBsdClmb3IodmFyIGU9dCxuPTA7bjxlLmdldE51bUdlb21ldHJpZXMoKTtuKyspdGhpcy5hZGRJbnRlcmlvcihlLmdldEdlb21ldHJ5TihuKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgaT1hcmd1bWVudHNbMF0sbj0xO248aS5sZW5ndGgtMTtuKyspdGhpcy5hZGQoaVtuXSl9LGFkZDpmdW5jdGlvbih0KXt2YXIgZT10LmRpc3RhbmNlKHRoaXMuY2VudHJvaWQpO2U8dGhpcy5taW5EaXN0YW5jZSYmKHRoaXMuaW50ZXJpb3JQb2ludD1uZXcgaCh0KSx0aGlzLm1pbkRpc3RhbmNlPWUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBVaX19KSxUcih6aS5wcm90b3R5cGUse2lzU2ltcGxlTXVsdGlQb2ludDpmdW5jdGlvbih0KXtpZih0LmlzRW1wdHkoKSlyZXR1cm4hMDtmb3IodmFyIGU9bmV3IHJ0LG49MDtuPHQuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl7dmFyIGk9dC5nZXRHZW9tZXRyeU4obikscj1pLmdldENvb3JkaW5hdGUoKTtpZihlLmNvbnRhaW5zKHIpKXJldHVybiB0aGlzLm5vblNpbXBsZUxvY2F0aW9uPXIsITE7ZS5hZGQocil9cmV0dXJuITB9LGlzU2ltcGxlUG9seWdvbmFsOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1PZS5nZXRMaW5lcyh0KSxuPWUuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2lmKCF0aGlzLmlzU2ltcGxlTGluZWFyR2VvbWV0cnkoaSkpcmV0dXJuITF9cmV0dXJuITB9LGhhc0Nsb3NlZEVuZHBvaW50SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgZXQsbj10LmdldEVkZ2VJdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCkscj0oaS5nZXRNYXhpbXVtU2VnbWVudEluZGV4KCksaS5pc0Nsb3NlZCgpKSxvPWkuZ2V0Q29vcmRpbmF0ZSgwKTt0aGlzLmFkZEVuZHBvaW50KGUsbyxyKTt2YXIgYT1pLmdldENvb3JkaW5hdGUoaS5nZXROdW1Qb2ludHMoKS0xKTt0aGlzLmFkZEVuZHBvaW50KGUsYSxyKX1mb3IodmFyIG49ZS52YWx1ZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIHM9bi5uZXh0KCk7aWYocy5pc0Nsb3NlZCYmMiE9PXMuZGVncmVlKXJldHVybiB0aGlzLm5vblNpbXBsZUxvY2F0aW9uPXMuZ2V0Q29vcmRpbmF0ZSgpLCEwfXJldHVybiExfSxnZXROb25TaW1wbGVMb2NhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vblNpbXBsZUxvY2F0aW9ufSxpc1NpbXBsZUxpbmVhckdlb21ldHJ5OmZ1bmN0aW9uKHQpe2lmKHQuaXNFbXB0eSgpKXJldHVybiEwO3ZhciBlPW5ldyBQbigwLHQpLG49bmV3IGllLGk9ZS5jb21wdXRlU2VsZk5vZGVzKG4sITApO3JldHVybiEoaS5oYXNJbnRlcnNlY3Rpb24oKSYmKGkuaGFzUHJvcGVySW50ZXJzZWN0aW9uKCk/KHRoaXMubm9uU2ltcGxlTG9jYXRpb249aS5nZXRQcm9wZXJJbnRlcnNlY3Rpb25Qb2ludCgpLDEpOnRoaXMuaGFzTm9uRW5kcG9pbnRJbnRlcnNlY3Rpb24oZSl8fHRoaXMuaXNDbG9zZWRFbmRwb2ludHNJbkludGVyaW9yJiZ0aGlzLmhhc0Nsb3NlZEVuZHBvaW50SW50ZXJzZWN0aW9uKGUpKSl9LGhhc05vbkVuZHBvaW50SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldEVkZ2VJdGVyYXRvcigpO2UuaGFzTmV4dCgpOylmb3IodmFyIG49ZS5uZXh0KCksaT1uLmdldE1heGltdW1TZWdtZW50SW5kZXgoKSxyPW4uZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCk7aWYoIW8uaXNFbmRQb2ludChpKSlyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1vLmdldENvb3JkaW5hdGUoKSwhMH1yZXR1cm4hMX0sYWRkRW5kcG9pbnQ6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZ2V0KGUpO251bGw9PT1pJiYoaT1uZXcgR2koZSksdC5wdXQoZSxpKSksaS5hZGRFbmRwb2ludChuKX0sY29tcHV0ZVNpbXBsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1udWxsLCEhdC5pc0VtcHR5KCl8fCh0IGluc3RhbmNlb2YgeHQ/dGhpcy5pc1NpbXBsZUxpbmVhckdlb21ldHJ5KHQpOnQgaW5zdGFuY2VvZiBjdD90aGlzLmlzU2ltcGxlTGluZWFyR2VvbWV0cnkodCk6dCBpbnN0YW5jZW9mIEN0P3RoaXMuaXNTaW1wbGVNdWx0aVBvaW50KHQpOkxyKHQsU3QpP3RoaXMuaXNTaW1wbGVQb2x5Z29uYWwodCk6ISh0IGluc3RhbmNlb2YgbHQpfHx0aGlzLmlzU2ltcGxlR2VvbWV0cnlDb2xsZWN0aW9uKHQpKX0saXNTaW1wbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub25TaW1wbGVMb2NhdGlvbj1udWxsLHRoaXMuY29tcHV0ZVNpbXBsZSh0aGlzLmlucHV0R2VvbSl9LGlzU2ltcGxlR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5nZXROdW1HZW9tZXRyaWVzKCk7ZSsrKXt2YXIgbj10LmdldEdlb21ldHJ5TihlKTtpZighdGhpcy5jb21wdXRlU2ltcGxlKG4pKXJldHVybiExfXJldHVybiEwfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB6aX19KSxUcihHaS5wcm90b3R5cGUse2FkZEVuZHBvaW50OmZ1bmN0aW9uKHQpe3RoaXMuZGVncmVlKyssdGhpcy5pc0Nsb3NlZHw9dH0sZ2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBHaX19KSx6aS5FbmRwb2ludEluZm89R2ksVHIoVmkucHJvdG90eXBlLHtnZXRFbmRDYXBTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuZENhcFN0eWxlfSxpc1NpbmdsZVNpZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU2luZ2xlU2lkZWR9LHNldFF1YWRyYW50U2VnbWVudHM6ZnVuY3Rpb24odCl7dGhpcy5xdWFkcmFudFNlZ21lbnRzPXQsMD09PXRoaXMucXVhZHJhbnRTZWdtZW50cyYmKHRoaXMuam9pblN0eWxlPVZpLkpPSU5fQkVWRUwpLHRoaXMucXVhZHJhbnRTZWdtZW50czwwJiYodGhpcy5qb2luU3R5bGU9VmkuSk9JTl9NSVRSRSx0aGlzLm1pdHJlTGltaXQ9TWF0aC5hYnModGhpcy5xdWFkcmFudFNlZ21lbnRzKSksdDw9MCYmKHRoaXMucXVhZHJhbnRTZWdtZW50cz0xKSx0aGlzLmpvaW5TdHlsZSE9PVZpLkpPSU5fUk9VTkQmJih0aGlzLnF1YWRyYW50U2VnbWVudHM9VmkuREVGQVVMVF9RVUFEUkFOVF9TRUdNRU5UUyl9LGdldEpvaW5TdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW5TdHlsZX0sc2V0Sm9pblN0eWxlOmZ1bmN0aW9uKHQpe3RoaXMuam9pblN0eWxlPXR9LHNldFNpbXBsaWZ5RmFjdG9yOmZ1bmN0aW9uKHQpe3RoaXMuc2ltcGxpZnlGYWN0b3I9dDwwPzA6dH0sZ2V0U2ltcGxpZnlGYWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaW1wbGlmeUZhY3Rvcn0sZ2V0UXVhZHJhbnRTZWdtZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YWRyYW50U2VnbWVudHN9LHNldEVuZENhcFN0eWxlOmZ1bmN0aW9uKHQpe3RoaXMuZW5kQ2FwU3R5bGU9dH0sZ2V0TWl0cmVMaW1pdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pdHJlTGltaXR9LHNldE1pdHJlTGltaXQ6ZnVuY3Rpb24odCl7dGhpcy5taXRyZUxpbWl0PXR9LHNldFNpbmdsZVNpZGVkOmZ1bmN0aW9uKHQpe3RoaXMuX2lzU2luZ2xlU2lkZWQ9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gVml9fSksVmkuYnVmZmVyRGlzdGFuY2VFcnJvcj1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLlBJLzIvdDtyZXR1cm4gMS1NYXRoLmNvcyhlLzIpfSxWaS5DQVBfUk9VTkQ9MSxWaS5DQVBfRkxBVD0yLFZpLkNBUF9TUVVBUkU9MyxWaS5KT0lOX1JPVU5EPTEsVmkuSk9JTl9NSVRSRT0yLFZpLkpPSU5fQkVWRUw9MyxWaS5ERUZBVUxUX1FVQURSQU5UX1NFR01FTlRTPTgsVmkuREVGQVVMVF9NSVRSRV9MSU1JVD01LFZpLkRFRkFVTFRfU0lNUExJRllfRkFDVE9SPS4wMSxYaS5wcm90b3R5cGU9bmV3IEVycm9yLFhpLnByb3RvdHlwZS5uYW1lPVwiRW1wdHlTdGFja0V4Y2VwdGlvblwiLEhpLnByb3RvdHlwZT1uZXcgdixIaS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5Xy5wdXNoKHQpLCEwfSxIaS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHQ8MHx8dD49dGhpcy5zaXplKCkpdGhyb3cgbmV3IEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247cmV0dXJuIHRoaXMuYXJyYXlfW3RdfSxIaS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcnJheV8ucHVzaCh0KSx0fSxIaS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKHQpe2lmKDA9PT10aGlzLmFycmF5Xy5sZW5ndGgpdGhyb3cgbmV3IFhpO3JldHVybiB0aGlzLmFycmF5Xy5wb3AoKX0sSGkucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5hcnJheV8ubGVuZ3RoKXRocm93IG5ldyBYaTtyZXR1cm4gdGhpcy5hcnJheV9bdGhpcy5hcnJheV8ubGVuZ3RoLTFdfSxIaS5wcm90b3R5cGUuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuYXJyYXlfLmxlbmd0aH0sSGkucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbXB0eSgpfSxIaS5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFycmF5Xy5pbmRleE9mKHQpfSxIaS5wcm90b3R5cGUuc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Xy5sZW5ndGh9LEhpLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxuPXRoaXMuYXJyYXlfLmxlbmd0aDtlPG47ZSsrKXQucHVzaCh0aGlzLmFycmF5X1tlXSk7cmV0dXJuIHR9LFRyKHFpLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkNvb3JkfSxnZXRSaWdodG1vc3RTaWRlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRSaWdodG1vc3RTaWRlT2ZTZWdtZW50KHQsZSk7cmV0dXJuIG48MCYmKG49dGhpcy5nZXRSaWdodG1vc3RTaWRlT2ZTZWdtZW50KHQsZS0xKSksbjwwJiYodGhpcy5taW5Db29yZD1udWxsLHRoaXMuY2hlY2tGb3JSaWdodG1vc3RDb29yZGluYXRlKHQpKSxufSxmaW5kUmlnaHRtb3N0RWRnZUF0VmVydGV4OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5taW5EZS5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKTtjLmlzVHJ1ZSh0aGlzLm1pbkluZGV4PjAmJnRoaXMubWluSW5kZXg8dC5sZW5ndGgsXCJyaWdodG1vc3QgcG9pbnQgZXhwZWN0ZWQgdG8gYmUgaW50ZXJpb3IgdmVydGV4IG9mIGVkZ2VcIik7dmFyIGU9dFt0aGlzLm1pbkluZGV4LTFdLG49dFt0aGlzLm1pbkluZGV4KzFdLGk9YWUuY29tcHV0ZU9yaWVudGF0aW9uKHRoaXMubWluQ29vcmQsbixlKSxyPSExO2UueTx0aGlzLm1pbkNvb3JkLnkmJm4ueTx0aGlzLm1pbkNvb3JkLnkmJmk9PT1hZS5DT1VOVEVSQ0xPQ0tXSVNFP3I9ITA6ZS55PnRoaXMubWluQ29vcmQueSYmbi55PnRoaXMubWluQ29vcmQueSYmaT09PWFlLkNMT0NLV0lTRSYmKHI9ITApLHImJih0aGlzLm1pbkluZGV4PXRoaXMubWluSW5kZXgtMSl9LGdldFJpZ2h0bW9zdFNpZGVPZlNlZ21lbnQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldEVkZ2UoKSxpPW4uZ2V0Q29vcmRpbmF0ZXMoKTtpZihlPDB8fGUrMT49aS5sZW5ndGgpcmV0dXJuLTE7aWYoaVtlXS55PT09aVtlKzFdLnkpcmV0dXJuLTE7dmFyIHI9QWUuTEVGVDtyZXR1cm4gaVtlXS55PGlbZSsxXS55JiYocj1BZS5SSUdIVCkscn0sZ2V0RWRnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWVudGVkRGV9LGNoZWNrRm9yUmlnaHRtb3N0Q29vcmRpbmF0ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRFZGdlKCkuZ2V0Q29vcmRpbmF0ZXMoKSxuPTA7bjxlLmxlbmd0aC0xO24rKykobnVsbD09PXRoaXMubWluQ29vcmR8fGVbbl0ueD50aGlzLm1pbkNvb3JkLngpJiYodGhpcy5taW5EZT10LHRoaXMubWluSW5kZXg9bix0aGlzLm1pbkNvb3JkPWVbbl0pfSxmaW5kUmlnaHRtb3N0RWRnZUF0Tm9kZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMubWluRGUuZ2V0Tm9kZSgpLGU9dC5nZXRFZGdlcygpO3RoaXMubWluRGU9ZS5nZXRSaWdodG1vc3RFZGdlKCksdGhpcy5taW5EZS5pc0ZvcndhcmQoKXx8KHRoaXMubWluRGU9dGhpcy5taW5EZS5nZXRTeW0oKSx0aGlzLm1pbkluZGV4PXRoaXMubWluRGUuZ2V0RWRnZSgpLmdldENvb3JkaW5hdGVzKCkubGVuZ3RoLTEpfSxmaW5kRWRnZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7bi5pc0ZvcndhcmQoKSYmdGhpcy5jaGVja0ZvclJpZ2h0bW9zdENvb3JkaW5hdGUobil9Yy5pc1RydWUoMCE9PXRoaXMubWluSW5kZXh8fHRoaXMubWluQ29vcmQuZXF1YWxzKHRoaXMubWluRGUuZ2V0Q29vcmRpbmF0ZSgpKSxcImluY29uc2lzdGVuY3kgaW4gcmlnaHRtb3N0IHByb2Nlc3NpbmdcIiksMD09PXRoaXMubWluSW5kZXg/dGhpcy5maW5kUmlnaHRtb3N0RWRnZUF0Tm9kZSgpOnRoaXMuZmluZFJpZ2h0bW9zdEVkZ2VBdFZlcnRleCgpLHRoaXMub3JpZW50ZWREZT10aGlzLm1pbkRlLHRoaXMuZ2V0UmlnaHRtb3N0U2lkZSh0aGlzLm1pbkRlLHRoaXMubWluSW5kZXgpPT09QWUuTEVGVCYmKHRoaXMub3JpZW50ZWREZT10aGlzLm1pbkRlLmdldFN5bSgpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gcWl9fSksWWkucHJvdG90eXBlLmFkZExhc3Q9ZnVuY3Rpb24odCl7dGhpcy5hcnJheV8ucHVzaCh0KX0sWWkucHJvdG90eXBlLnJlbW92ZUZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXJyYXlfLnNoaWZ0KCl9LFlpLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmFycmF5Xy5sZW5ndGh9LFRyKFdpLnByb3RvdHlwZSx7Y2xlYXJWaXNpdGVkRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5kaXJFZGdlTGlzdC5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl0Lm5leHQoKS5zZXRWaXNpdGVkKCExKX0sZ2V0UmlnaHRtb3N0Q29vcmRpbmF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJpZ2h0TW9zdENvb3JkfSxjb21wdXRlTm9kZURlcHRoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpZihpLmlzVmlzaXRlZCgpfHxpLmdldFN5bSgpLmlzVmlzaXRlZCgpKXtlPWk7YnJlYWt9fWlmKG51bGw9PT1lKXRocm93IG5ldyBMZShcInVuYWJsZSB0byBmaW5kIGVkZ2UgdG8gY29tcHV0ZSBkZXB0aHMgYXQgXCIrdC5nZXRDb29yZGluYXRlKCkpO3QuZ2V0RWRnZXMoKS5jb21wdXRlRGVwdGhzKGUpO2Zvcih2YXIgbj10LmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuc2V0VmlzaXRlZCghMCksdGhpcy5jb3B5U3ltRGVwdGhzKGkpfX0sY29tcHV0ZURlcHRoOmZ1bmN0aW9uKHQpe3RoaXMuY2xlYXJWaXNpdGVkRWRnZXMoKTt2YXIgZT10aGlzLmZpbmRlci5nZXRFZGdlKCk7ZS5nZXROb2RlKCksZS5nZXRMYWJlbCgpLGUuc2V0RWRnZURlcHRocyhBZS5SSUdIVCx0KSx0aGlzLmNvcHlTeW1EZXB0aHMoZSksdGhpcy5jb21wdXRlRGVwdGhzKGUpfSxjcmVhdGU6ZnVuY3Rpb24odCl7dGhpcy5hZGRSZWFjaGFibGUodCksdGhpcy5maW5kZXIuZmluZEVkZ2UodGhpcy5kaXJFZGdlTGlzdCksdGhpcy5yaWdodE1vc3RDb29yZD10aGlzLmZpbmRlci5nZXRDb29yZGluYXRlKCl9LGZpbmRSZXN1bHRFZGdlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRpckVkZ2VMaXN0Lml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKTtlLmdldERlcHRoKEFlLlJJR0hUKT49MSYmZS5nZXREZXB0aChBZS5MRUZUKTw9MCYmIWUuaXNJbnRlcmlvckFyZWFFZGdlKCkmJmUuc2V0SW5SZXN1bHQoITApfX0sY29tcHV0ZURlcHRoczpmdW5jdGlvbih0KXt2YXIgZT1uZXcgWixuPW5ldyBZaSxpPXQuZ2V0Tm9kZSgpO2ZvcihuLmFkZExhc3QoaSksZS5hZGQoaSksdC5zZXRWaXNpdGVkKCEwKTshbi5pc0VtcHR5KCk7KXt2YXIgcj1uLnJlbW92ZUZpcnN0KCk7ZS5hZGQociksdGhpcy5jb21wdXRlTm9kZURlcHRoKHIpO2Zvcih2YXIgbz1yLmdldEVkZ2VzKCkuaXRlcmF0b3IoKTtvLmhhc05leHQoKTspe3ZhciBhPW8ubmV4dCgpLHM9YS5nZXRTeW0oKTtpZighcy5pc1Zpc2l0ZWQoKSl7dmFyIHU9cy5nZXROb2RlKCk7ZS5jb250YWlucyh1KXx8KG4uYWRkTGFzdCh1KSxlLmFkZCh1KSl9fX19LGNvbXBhcmVUbzpmdW5jdGlvbih0KXt2YXIgZT10O3JldHVybiB0aGlzLnJpZ2h0TW9zdENvb3JkLng8ZS5yaWdodE1vc3RDb29yZC54Py0xOnRoaXMucmlnaHRNb3N0Q29vcmQueD5lLnJpZ2h0TW9zdENvb3JkLng/MTowfSxnZXRFbnZlbG9wZTpmdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLmVudil7Zm9yKHZhciB0PW5ldyB4LGU9dGhpcy5kaXJFZGdlTGlzdC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOylmb3IodmFyIG49ZS5uZXh0KCksaT1uLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpLHI9MDtyPGkubGVuZ3RoLTE7cisrKXQuZXhwYW5kVG9JbmNsdWRlKGlbcl0pO3RoaXMuZW52PXR9cmV0dXJuIHRoaXMuZW52fSxhZGRSZWFjaGFibGU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEhpO2ZvcihlLmFkZCh0KTshZS5lbXB0eSgpOyl7dmFyIG49ZS5wb3AoKTt0aGlzLmFkZChuLGUpfX0sY29weVN5bURlcHRoczpmdW5jdGlvbih0KXt2YXIgZT10LmdldFN5bSgpO2Uuc2V0RGVwdGgoQWUuTEVGVCx0LmdldERlcHRoKEFlLlJJR0hUKSksZS5zZXREZXB0aChBZS5SSUdIVCx0LmdldERlcHRoKEFlLkxFRlQpKX0sYWRkOmZ1bmN0aW9uKHQsZSl7dC5zZXRWaXNpdGVkKCEwKSx0aGlzLm5vZGVzLmFkZCh0KTtmb3IodmFyIG49dC5nZXRFZGdlcygpLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTt0aGlzLmRpckVkZ2VMaXN0LmFkZChpKTt2YXIgcj1pLmdldFN5bSgpLG89ci5nZXROb2RlKCk7by5pc1Zpc2l0ZWQoKXx8ZS5wdXNoKG8pfX0sZ2V0Tm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc30sZ2V0RGlyZWN0ZWRFZGdlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpckVkZ2VMaXN0fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gV2l9fSksVHIoWmkucHJvdG90eXBlLHtpc0RlbGV0YWJsZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLmlucHV0TGluZVt0XSxvPXRoaXMuaW5wdXRMaW5lW2VdLGE9dGhpcy5pbnB1dExpbmVbbl07cmV0dXJuISF0aGlzLmlzQ29uY2F2ZShyLG8sYSkmJiEhdGhpcy5pc1NoYWxsb3cocixvLGEsaSkmJnRoaXMuaXNTaGFsbG93U2FtcGxlZChyLG8sdCxuLGkpfSxkZWxldGVTaGFsbG93Q29uY2F2aXRpZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MSxlPSh0aGlzLmlucHV0TGluZS5sZW5ndGgsdGhpcy5maW5kTmV4dE5vbkRlbGV0ZWRJbmRleCh0KSksbj10aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KGUpLGk9ITE7bjx0aGlzLmlucHV0TGluZS5sZW5ndGg7KXt2YXIgcj0hMTt0aGlzLmlzRGVsZXRhYmxlKHQsZSxuLHRoaXMuZGlzdGFuY2VUb2wpJiYodGhpcy5pc0RlbGV0ZWRbZV09WmkuREVMRVRFLHI9ITAsaT0hMCksdD1yP246ZSxlPXRoaXMuZmluZE5leHROb25EZWxldGVkSW5kZXgodCksbj10aGlzLmZpbmROZXh0Tm9uRGVsZXRlZEluZGV4KGUpfXJldHVybiBpfSxpc1NoYWxsb3dDb25jYXZpdHk6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIGFlLmNvbXB1dGVPcmllbnRhdGlvbih0LGUsbik9PT10aGlzLmFuZ2xlT3JpZW50YXRpb24mJmFlLmRpc3RhbmNlUG9pbnRMaW5lKGUsdCxuKTxpfSxpc1NoYWxsb3dTYW1wbGVkOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89TWF0aC50cnVuYygoaS1uKS9aaS5OVU1fUFRTX1RPX0NIRUNLKTtvPD0wJiYobz0xKTtmb3IodmFyIGE9bjthPGk7YSs9bylpZighdGhpcy5pc1NoYWxsb3codCxlLHRoaXMuaW5wdXRMaW5lW2FdLHIpKXJldHVybiExO3JldHVybiEwfSxpc0NvbmNhdmU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBhZS5jb21wdXRlT3JpZW50YXRpb24odCxlLG4pPT09dGhpcy5hbmdsZU9yaWVudGF0aW9ufSxzaW1wbGlmeTpmdW5jdGlvbih0KXt0aGlzLmRpc3RhbmNlVG9sPU1hdGguYWJzKHQpLHQ8MCYmKHRoaXMuYW5nbGVPcmllbnRhdGlvbj1hZS5DTE9DS1dJU0UpLHRoaXMuaXNEZWxldGVkPW5ldyBBcnJheSh0aGlzLmlucHV0TGluZS5sZW5ndGgpLmZpbGwobnVsbCk7dmFyIGU9ITE7ZG8gZT10aGlzLmRlbGV0ZVNoYWxsb3dDb25jYXZpdGllcygpO3doaWxlKGUpO3JldHVybiB0aGlzLmNvbGxhcHNlTGluZSgpfSxmaW5kTmV4dE5vbkRlbGV0ZWRJbmRleDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCsxO2U8dGhpcy5pbnB1dExpbmUubGVuZ3RoJiZ0aGlzLmlzRGVsZXRlZFtlXT09PVppLkRFTEVURTspZSsrO3JldHVybiBlfSxpc1NoYWxsb3c6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIGFlLmRpc3RhbmNlUG9pbnRMaW5lKGUsdCxuKTxpfSxjb2xsYXBzZUxpbmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IGIsZT0wO2U8dGhpcy5pbnB1dExpbmUubGVuZ3RoO2UrKyl0aGlzLmlzRGVsZXRlZFtlXSE9PVppLkRFTEVURSYmdC5hZGQodGhpcy5pbnB1dExpbmVbZV0pO3JldHVybiB0LnRvQ29vcmRpbmF0ZUFycmF5KCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIFppfX0pLFppLnNpbXBsaWZ5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBaaSh0KS5zaW1wbGlmeShlKX0sWmkuSU5JVD0wLFppLkRFTEVURT0xLFppLktFRVA9MSxaaS5OVU1fUFRTX1RPX0NIRUNLPTEwLFRyKEppLnByb3RvdHlwZSx7Z2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdExpc3QudG9BcnJheShKaS5DT09SRElOQVRFX0FSUkFZX1RZUEUpfSxzZXRQcmVjaXNpb25Nb2RlbDpmdW5jdGlvbih0KXt0aGlzLnByZWNpc2lvbk1vZGVsPXR9LGFkZFB0OmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBoKHQpO3JldHVybiB0aGlzLnByZWNpc2lvbk1vZGVsLm1ha2VQcmVjaXNlKGUpLHRoaXMuaXNSZWR1bmRhbnQoZSk/bnVsbDp2b2lkIHRoaXMucHRMaXN0LmFkZChlKX0scmV2ZXJzZTpmdW5jdGlvbigpe30sYWRkUHRzOmZ1bmN0aW9uKHQsZSl7aWYoZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFkZFB0KHRbbl0pO2Vsc2UgZm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pdGhpcy5hZGRQdCh0W25dKX0saXNSZWR1bmRhbnQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wdExpc3Quc2l6ZSgpPDEpcmV0dXJuITE7dmFyIGU9dGhpcy5wdExpc3QuZ2V0KHRoaXMucHRMaXN0LnNpemUoKS0xKTtyZXR1cm4gdC5kaXN0YW5jZShlKTx0aGlzLm1pbmltaW1WZXJ0ZXhEaXN0YW5jZX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4obmV3ICR0KS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMuZ2V0Q29vcmRpbmF0ZXMoKSkudG9TdHJpbmcoKX0sY2xvc2VSaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5wdExpc3Quc2l6ZSgpPDEpcmV0dXJuIG51bGw7dmFyIHQ9bmV3IGgodGhpcy5wdExpc3QuZ2V0KDApKSxlPXRoaXMucHRMaXN0LmdldCh0aGlzLnB0TGlzdC5zaXplKCktMSk7cmV0dXJuIHRoaXMucHRMaXN0LnNpemUoKT49MiYmdGhpcy5wdExpc3QuZ2V0KHRoaXMucHRMaXN0LnNpemUoKS0yKSx0LmVxdWFscyhlKT9udWxsOnZvaWQgdGhpcy5wdExpc3QuYWRkKHQpfSxzZXRNaW5pbXVtVmVydGV4RGlzdGFuY2U6ZnVuY3Rpb24odCl7dGhpcy5taW5pbWltVmVydGV4RGlzdGFuY2U9dH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gSml9fSksSmkuQ09PUkRJTkFURV9BUlJBWV9UWVBFPW5ldyBBcnJheSgwKS5maWxsKG51bGwpLFRyKEtpLnByb3RvdHlwZSx7aW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gS2l9fSksS2kudG9EZWdyZWVzPWZ1bmN0aW9uKHQpe3JldHVybiAxODAqdC9NYXRoLlBJfSxLaS5ub3JtYWxpemU9ZnVuY3Rpb24odCl7Zm9yKDt0Pk1hdGguUEk7KXQtPUtpLlBJX1RJTUVTXzI7Zm9yKDt0PD0tTWF0aC5QSTspdCs9S2kuUElfVElNRVNfMjtyZXR1cm4gdH0sS2kuYW5nbGU9ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiBNYXRoLmF0YW4yKHQueSx0LngpfWlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZT1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHNbMV0saT1uLngtZS54LHI9bi55LWUueTtyZXR1cm4gTWF0aC5hdGFuMihyLGkpfX0sS2kuaXNBY3V0ZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC54LWUueCxyPXQueS1lLnk7cmV0dXJuIGkqKG4ueC1lLngpK3IqKG4ueS1lLnkpPjB9LEtpLmlzT2J0dXNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LngtZS54LHI9dC55LWUueTtyZXR1cm4gaSoobi54LWUueCkrcioobi55LWUueSk8MH0sS2kuaW50ZXJpb3JBbmdsZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9S2kuYW5nbGUoZSx0KSxyPUtpLmFuZ2xlKGUsbik7cmV0dXJuIE1hdGguYWJzKHItaSl9LEtpLm5vcm1hbGl6ZVBvc2l0aXZlPWZ1bmN0aW9uKHQpe2lmKHQ8MCl7Zm9yKDt0PDA7KXQrPUtpLlBJX1RJTUVTXzI7dD49S2kuUElfVElNRVNfMiYmKHQ9MCl9ZWxzZXtmb3IoO3Q+PUtpLlBJX1RJTUVTXzI7KXQtPUtpLlBJX1RJTUVTXzI7dDwwJiYodD0wKX1yZXR1cm4gdH0sS2kuYW5nbGVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1LaS5hbmdsZShlLHQpLHI9S2kuYW5nbGUoZSxuKTtyZXR1cm4gS2kuZGlmZihpLHIpfSxLaS5kaWZmPWZ1bmN0aW9uKHQsZSl7dmFyIG49bnVsbDtyZXR1cm4gbj10PGU/ZS10OnQtZSxuPk1hdGguUEkmJihuPTIqTWF0aC5QSS1uKSxufSxLaS50b1JhZGlhbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHQqTWF0aC5QSS8xODB9LEtpLmdldFR1cm49ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLnNpbihlLXQpO3JldHVybiBuPjA/S2kuQ09VTlRFUkNMT0NLV0lTRTpuPDA/S2kuQ0xPQ0tXSVNFOktpLk5PTkV9LEtpLmFuZ2xlQmV0d2Vlbk9yaWVudGVkPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1LaS5hbmdsZShlLHQpLHI9S2kuYW5nbGUoZSxuKSxvPXItaTtyZXR1cm4gbzw9LU1hdGguUEk/bytLaS5QSV9USU1FU18yOm8+TWF0aC5QST9vLUtpLlBJX1RJTUVTXzI6b30sS2kuUElfVElNRVNfMj0yKk1hdGguUEksS2kuUElfT1ZFUl8yPU1hdGguUEkvMixLaS5QSV9PVkVSXzQ9TWF0aC5QSS80LEtpLkNPVU5URVJDTE9DS1dJU0U9YWUuQ09VTlRFUkNMT0NLV0lTRSxLaS5DTE9DS1dJU0U9YWUuQ0xPQ0tXSVNFLEtpLk5PTkU9YWUuQ09MTElORUFSLFRyKFFpLnByb3RvdHlwZSx7YWRkTmV4dFNlZ21lbnQ6ZnVuY3Rpb24odCxlKXtpZih0aGlzLnMwPXRoaXMuczEsdGhpcy5zMT10aGlzLnMyLHRoaXMuczI9dCx0aGlzLnNlZzAuc2V0Q29vcmRpbmF0ZXModGhpcy5zMCx0aGlzLnMxKSx0aGlzLmNvbXB1dGVPZmZzZXRTZWdtZW50KHRoaXMuc2VnMCx0aGlzLnNpZGUsdGhpcy5kaXN0YW5jZSx0aGlzLm9mZnNldDApLHRoaXMuc2VnMS5zZXRDb29yZGluYXRlcyh0aGlzLnMxLHRoaXMuczIpLHRoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQodGhpcy5zZWcxLHRoaXMuc2lkZSx0aGlzLmRpc3RhbmNlLHRoaXMub2Zmc2V0MSksdGhpcy5zMS5lcXVhbHModGhpcy5zMikpcmV0dXJuIG51bGw7dmFyIG49YWUuY29tcHV0ZU9yaWVudGF0aW9uKHRoaXMuczAsdGhpcy5zMSx0aGlzLnMyKSxpPW49PT1hZS5DTE9DS1dJU0UmJnRoaXMuc2lkZT09PUFlLkxFRlR8fG49PT1hZS5DT1VOVEVSQ0xPQ0tXSVNFJiZ0aGlzLnNpZGU9PT1BZS5SSUdIVDswPT09bj90aGlzLmFkZENvbGxpbmVhcihlKTppP3RoaXMuYWRkT3V0c2lkZVR1cm4obixlKTp0aGlzLmFkZEluc2lkZVR1cm4obixlKX0sYWRkTGluZUVuZENhcDpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBzZSh0LGUpLGk9bmV3IHNlO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQobixBZS5MRUZULHRoaXMuZGlzdGFuY2UsaSk7dmFyIHI9bmV3IHNlO3RoaXMuY29tcHV0ZU9mZnNldFNlZ21lbnQobixBZS5SSUdIVCx0aGlzLmRpc3RhbmNlLHIpO3ZhciBvPWUueC10LngsYT1lLnktdC55LHM9TWF0aC5hdGFuMihhLG8pO3N3aXRjaCh0aGlzLmJ1ZlBhcmFtcy5nZXRFbmRDYXBTdHlsZSgpKXtjYXNlIFZpLkNBUF9ST1VORDp0aGlzLnNlZ0xpc3QuYWRkUHQoaS5wMSksdGhpcy5hZGRGaWxsZXRBcmMoZSxzK01hdGguUEkvMixzLU1hdGguUEkvMixhZS5DTE9DS1dJU0UsdGhpcy5kaXN0YW5jZSksdGhpcy5zZWdMaXN0LmFkZFB0KHIucDEpO2JyZWFrO2Nhc2UgVmkuQ0FQX0ZMQVQ6dGhpcy5zZWdMaXN0LmFkZFB0KGkucDEpLHRoaXMuc2VnTGlzdC5hZGRQdChyLnAxKTticmVhaztjYXNlIFZpLkNBUF9TUVVBUkU6dmFyIHU9bmV3IGg7dS54PU1hdGguYWJzKHRoaXMuZGlzdGFuY2UpKk1hdGguY29zKHMpLHUueT1NYXRoLmFicyh0aGlzLmRpc3RhbmNlKSpNYXRoLnNpbihzKTt2YXIgbD1uZXcgaChpLnAxLngrdS54LGkucDEueSt1LnkpLGM9bmV3IGgoci5wMS54K3UueCxyLnAxLnkrdS55KTt0aGlzLnNlZ0xpc3QuYWRkUHQobCksdGhpcy5zZWdMaXN0LmFkZFB0KGMpfX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWdMaXN0LmdldENvb3JkaW5hdGVzKCl9LGFkZE1pdHJlSm9pbjpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj0hMCxvPW51bGw7dHJ5e289Ti5pbnRlcnNlY3Rpb24oZS5wMCxlLnAxLG4ucDAsbi5wMSksKGk8PTA/MTpvLmRpc3RhbmNlKHQpL01hdGguYWJzKGkpKT50aGlzLmJ1ZlBhcmFtcy5nZXRNaXRyZUxpbWl0KCkmJihyPSExKX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiBFKSl0aHJvdyB0O289bmV3IGgoMCwwKSxyPSExfWZpbmFsbHl7fXI/dGhpcy5zZWdMaXN0LmFkZFB0KG8pOnRoaXMuYWRkTGltaXRlZE1pdHJlSm9pbihlLG4saSx0aGlzLmJ1ZlBhcmFtcy5nZXRNaXRyZUxpbWl0KCkpfSxhZGRGaWxsZXRDb3JuZXI6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz1lLngtdC54LGE9ZS55LXQueSxzPU1hdGguYXRhbjIoYSxvKSx1PW4ueC10LngsbD1uLnktdC55LGM9TWF0aC5hdGFuMihsLHUpO2k9PT1hZS5DTE9DS1dJU0U/czw9YyYmKHMrPTIqTWF0aC5QSSk6cz49YyYmKHMtPTIqTWF0aC5QSSksdGhpcy5zZWdMaXN0LmFkZFB0KGUpLHRoaXMuYWRkRmlsbGV0QXJjKHQscyxjLGksciksdGhpcy5zZWdMaXN0LmFkZFB0KG4pfSxhZGRPdXRzaWRlVHVybjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm9mZnNldDAucDEuZGlzdGFuY2UodGhpcy5vZmZzZXQxLnAwKTx0aGlzLmRpc3RhbmNlKlFpLk9GRlNFVF9TRUdNRU5UX1NFUEFSQVRJT05fRkFDVE9SPyh0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQwLnAxKSxudWxsKTp2b2lkKHRoaXMuYnVmUGFyYW1zLmdldEpvaW5TdHlsZSgpPT09VmkuSk9JTl9NSVRSRT90aGlzLmFkZE1pdHJlSm9pbih0aGlzLnMxLHRoaXMub2Zmc2V0MCx0aGlzLm9mZnNldDEsdGhpcy5kaXN0YW5jZSk6dGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1WaS5KT0lOX0JFVkVMP3RoaXMuYWRkQmV2ZWxKb2luKHRoaXMub2Zmc2V0MCx0aGlzLm9mZnNldDEpOihlJiZ0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQwLnAxKSx0aGlzLmFkZEZpbGxldENvcm5lcih0aGlzLnMxLHRoaXMub2Zmc2V0MC5wMSx0aGlzLm9mZnNldDEucDAsdCx0aGlzLmRpc3RhbmNlKSx0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKSkpfSxjcmVhdGVTcXVhcmU6ZnVuY3Rpb24odCl7dGhpcy5zZWdMaXN0LmFkZFB0KG5ldyBoKHQueCt0aGlzLmRpc3RhbmNlLHQueSt0aGlzLmRpc3RhbmNlKSksdGhpcy5zZWdMaXN0LmFkZFB0KG5ldyBoKHQueCt0aGlzLmRpc3RhbmNlLHQueS10aGlzLmRpc3RhbmNlKSksdGhpcy5zZWdMaXN0LmFkZFB0KG5ldyBoKHQueC10aGlzLmRpc3RhbmNlLHQueS10aGlzLmRpc3RhbmNlKSksdGhpcy5zZWdMaXN0LmFkZFB0KG5ldyBoKHQueC10aGlzLmRpc3RhbmNlLHQueSt0aGlzLmRpc3RhbmNlKSksdGhpcy5zZWdMaXN0LmNsb3NlUmluZygpfSxhZGRTZWdtZW50czpmdW5jdGlvbih0LGUpe3RoaXMuc2VnTGlzdC5hZGRQdHModCxlKX0sYWRkRmlyc3RTZWdtZW50OmZ1bmN0aW9uKCl7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MS5wMCl9LGFkZExhc3RTZWdtZW50OmZ1bmN0aW9uKCl7dGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MS5wMSl9LGluaXRTaWRlU2VnbWVudHM6ZnVuY3Rpb24odCxlLG4pe3RoaXMuczE9dCx0aGlzLnMyPWUsdGhpcy5zaWRlPW4sdGhpcy5zZWcxLnNldENvb3JkaW5hdGVzKHQsZSksdGhpcy5jb21wdXRlT2Zmc2V0U2VnbWVudCh0aGlzLnNlZzEsbix0aGlzLmRpc3RhbmNlLHRoaXMub2Zmc2V0MSl9LGFkZExpbWl0ZWRNaXRyZUpvaW46ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dGhpcy5zZWcwLnAxLG89S2kuYW5nbGUocix0aGlzLnNlZzAucDApLGE9KEtpLmFuZ2xlKHIsdGhpcy5zZWcxLnAxKSxLaS5hbmdsZUJldHdlZW5PcmllbnRlZCh0aGlzLnNlZzAucDAscix0aGlzLnNlZzEucDEpKSxzPWEvMix1PUtpLm5vcm1hbGl6ZShvK3MpLGw9S2kubm9ybWFsaXplKHUrTWF0aC5QSSksYz1pKm4sZj1jKk1hdGguYWJzKE1hdGguc2luKHMpKSxkPW4tZixwPXIueCtjKk1hdGguY29zKGwpLGc9ci55K2MqTWF0aC5zaW4obCksdj1uZXcgaChwLGcpLG09bmV3IHNlKHIsdikseT1tLnBvaW50QWxvbmdPZmZzZXQoMSxkKSxfPW0ucG9pbnRBbG9uZ09mZnNldCgxLC1kKTt0aGlzLnNpZGU9PT1BZS5MRUZUPyh0aGlzLnNlZ0xpc3QuYWRkUHQoeSksdGhpcy5zZWdMaXN0LmFkZFB0KF8pKToodGhpcy5zZWdMaXN0LmFkZFB0KF8pLHRoaXMuc2VnTGlzdC5hZGRQdCh5KSl9LGNvbXB1dGVPZmZzZXRTZWdtZW50OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWU9PT1BZS5MRUZUPzE6LTEsbz10LnAxLngtdC5wMC54LGE9dC5wMS55LXQucDAueSxzPU1hdGguc3FydChvKm8rYSphKSx1PXIqbipvL3MsbD1yKm4qYS9zO2kucDAueD10LnAwLngtbCxpLnAwLnk9dC5wMC55K3UsaS5wMS54PXQucDEueC1sLGkucDEueT10LnAxLnkrdX0sYWRkRmlsbGV0QXJjOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89aT09PWFlLkNMT0NLV0lTRT8tMToxLGE9TWF0aC5hYnMoZS1uKSxzPU1hdGgudHJ1bmMoYS90aGlzLmZpbGxldEFuZ2xlUXVhbnR1bSsuNSk7aWYoczwxKXJldHVybiBudWxsO3ZhciB1PW51bGwsbD1udWxsO3U9MCxsPWEvcztmb3IodmFyIGM9dSxmPW5ldyBoO2M8YTspe3ZhciBkPWUrbypjO2YueD10LngrcipNYXRoLmNvcyhkKSxmLnk9dC55K3IqTWF0aC5zaW4oZCksdGhpcy5zZWdMaXN0LmFkZFB0KGYpLGMrPWx9fSxhZGRJbnNpZGVUdXJuOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHRoaXMub2Zmc2V0MC5wMCx0aGlzLm9mZnNldDAucDEsdGhpcy5vZmZzZXQxLnAwLHRoaXMub2Zmc2V0MS5wMSksdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSl0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5saS5nZXRJbnRlcnNlY3Rpb24oMCkpO2Vsc2UgaWYodGhpcy5faGFzTmFycm93Q29uY2F2ZUFuZ2xlPSEwLHRoaXMub2Zmc2V0MC5wMS5kaXN0YW5jZSh0aGlzLm9mZnNldDEucDApPHRoaXMuZGlzdGFuY2UqUWkuSU5TSURFX1RVUk5fVkVSVEVYX1NOQVBfRElTVEFOQ0VfRkFDVE9SKXRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDAucDEpO2Vsc2V7aWYodGhpcy5zZWdMaXN0LmFkZFB0KHRoaXMub2Zmc2V0MC5wMSksdGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yPjApe3ZhciBuPW5ldyBoKCh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IqdGhpcy5vZmZzZXQwLnAxLngrdGhpcy5zMS54KS8odGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKzEpLCh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IqdGhpcy5vZmZzZXQwLnAxLnkrdGhpcy5zMS55KS8odGhpcy5jbG9zaW5nU2VnTGVuZ3RoRmFjdG9yKzEpKTt0aGlzLnNlZ0xpc3QuYWRkUHQobik7dmFyIGk9bmV3IGgoKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcip0aGlzLm9mZnNldDEucDAueCt0aGlzLnMxLngpLyh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IrMSksKHRoaXMuY2xvc2luZ1NlZ0xlbmd0aEZhY3Rvcip0aGlzLm9mZnNldDEucDAueSt0aGlzLnMxLnkpLyh0aGlzLmNsb3NpbmdTZWdMZW5ndGhGYWN0b3IrMSkpO3RoaXMuc2VnTGlzdC5hZGRQdChpKX1lbHNlIHRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLnMxKTt0aGlzLnNlZ0xpc3QuYWRkUHQodGhpcy5vZmZzZXQxLnAwKX19LGNyZWF0ZUNpcmNsZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgaCh0LngrdGhpcy5kaXN0YW5jZSx0LnkpO3RoaXMuc2VnTGlzdC5hZGRQdChlKSx0aGlzLmFkZEZpbGxldEFyYyh0LDAsMipNYXRoLlBJLC0xLHRoaXMuZGlzdGFuY2UpLHRoaXMuc2VnTGlzdC5jbG9zZVJpbmcoKX0sYWRkQmV2ZWxKb2luOmZ1bmN0aW9uKHQsZSl7dGhpcy5zZWdMaXN0LmFkZFB0KHQucDEpLHRoaXMuc2VnTGlzdC5hZGRQdChlLnAwKX0saW5pdDpmdW5jdGlvbih0KXt0aGlzLmRpc3RhbmNlPXQsdGhpcy5tYXhDdXJ2ZVNlZ21lbnRFcnJvcj10KigxLU1hdGguY29zKHRoaXMuZmlsbGV0QW5nbGVRdWFudHVtLzIpKSx0aGlzLnNlZ0xpc3Q9bmV3IEppLHRoaXMuc2VnTGlzdC5zZXRQcmVjaXNpb25Nb2RlbCh0aGlzLnByZWNpc2lvbk1vZGVsKSx0aGlzLnNlZ0xpc3Quc2V0TWluaW11bVZlcnRleERpc3RhbmNlKHQqUWkuQ1VSVkVfVkVSVEVYX1NOQVBfRElTVEFOQ0VfRkFDVE9SKX0sYWRkQ29sbGluZWFyOmZ1bmN0aW9uKHQpe3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0aGlzLnMwLHRoaXMuczEsdGhpcy5zMSx0aGlzLnMyKSx0aGlzLmxpLmdldEludGVyc2VjdGlvbk51bSgpPj0yJiYodGhpcy5idWZQYXJhbXMuZ2V0Sm9pblN0eWxlKCk9PT1WaS5KT0lOX0JFVkVMfHx0aGlzLmJ1ZlBhcmFtcy5nZXRKb2luU3R5bGUoKT09PVZpLkpPSU5fTUlUUkU/KHQmJnRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDAucDEpLHRoaXMuc2VnTGlzdC5hZGRQdCh0aGlzLm9mZnNldDEucDApKTp0aGlzLmFkZEZpbGxldENvcm5lcih0aGlzLnMxLHRoaXMub2Zmc2V0MC5wMSx0aGlzLm9mZnNldDEucDAsYWUuQ0xPQ0tXSVNFLHRoaXMuZGlzdGFuY2UpKX0sY2xvc2VSaW5nOmZ1bmN0aW9uKCl7dGhpcy5zZWdMaXN0LmNsb3NlUmluZygpfSxoYXNOYXJyb3dDb25jYXZlQW5nbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzTmFycm93Q29uY2F2ZUFuZ2xlfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBRaX19KSxRaS5PRkZTRVRfU0VHTUVOVF9TRVBBUkFUSU9OX0ZBQ1RPUj0uMDAxLFFpLklOU0lERV9UVVJOX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUj0uMDAxLFFpLkNVUlZFX1ZFUlRFWF9TTkFQX0RJU1RBTkNFX0ZBQ1RPUj0xZS02LFFpLk1BWF9DTE9TSU5HX1NFR19MRU5fRkFDVE9SPTgwLFRyKCRpLnByb3RvdHlwZSx7Z2V0T2Zmc2V0Q3VydmU6ZnVuY3Rpb24odCxlKXtpZih0aGlzLmRpc3RhbmNlPWUsMD09PWUpcmV0dXJuIG51bGw7dmFyIG49ZTwwLGk9TWF0aC5hYnMoZSkscj10aGlzLmdldFNlZ0dlbihpKTt0Lmxlbmd0aDw9MT90aGlzLmNvbXB1dGVQb2ludEN1cnZlKHRbMF0scik6dGhpcy5jb21wdXRlT2Zmc2V0Q3VydmUodCxuLHIpO3ZhciBvPXIuZ2V0Q29vcmRpbmF0ZXMoKTtyZXR1cm4gbiYmVi5yZXZlcnNlKG8pLG99LGNvbXB1dGVTaW5nbGVTaWRlZEJ1ZmZlckN1cnZlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnNpbXBsaWZ5VG9sZXJhbmNlKHRoaXMuZGlzdGFuY2UpO2lmKGUpe24uYWRkU2VnbWVudHModCwhMCk7dmFyIHI9Wmkuc2ltcGxpZnkodCwtaSksbz1yLmxlbmd0aC0xO24uaW5pdFNpZGVTZWdtZW50cyhyW29dLHJbby0xXSxBZS5MRUZUKSxuLmFkZEZpcnN0U2VnbWVudCgpO2Zvcih2YXIgYT1vLTI7YT49MDthLS0pbi5hZGROZXh0U2VnbWVudChyW2FdLCEwKX1lbHNle24uYWRkU2VnbWVudHModCwhMSk7dmFyIHM9Wmkuc2ltcGxpZnkodCxpKSx1PXMubGVuZ3RoLTE7bi5pbml0U2lkZVNlZ21lbnRzKHNbMF0sc1sxXSxBZS5MRUZUKSxuLmFkZEZpcnN0U2VnbWVudCgpO2Zvcih2YXIgYT0yO2E8PXU7YSsrKW4uYWRkTmV4dFNlZ21lbnQoc1thXSwhMCl9bi5hZGRMYXN0U2VnbWVudCgpLG4uY2xvc2VSaW5nKCl9LGNvbXB1dGVSaW5nQnVmZmVyQ3VydmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7ZT09PUFlLlJJR0hUJiYoaT0taSk7dmFyIHI9Wmkuc2ltcGxpZnkodCxpKSxvPXIubGVuZ3RoLTE7bi5pbml0U2lkZVNlZ21lbnRzKHJbby0xXSxyWzBdLGUpO2Zvcih2YXIgYT0xO2E8PW87YSsrKXt2YXIgcz0xIT09YTtuLmFkZE5leHRTZWdtZW50KHJbYV0scyl9bi5jbG9zZVJpbmcoKX0sY29tcHV0ZUxpbmVCdWZmZXJDdXJ2ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSksaT1aaS5zaW1wbGlmeSh0LG4pLHI9aS5sZW5ndGgtMTtlLmluaXRTaWRlU2VnbWVudHMoaVswXSxpWzFdLEFlLkxFRlQpO2Zvcih2YXIgbz0yO288PXI7bysrKWUuYWRkTmV4dFNlZ21lbnQoaVtvXSwhMCk7ZS5hZGRMYXN0U2VnbWVudCgpLGUuYWRkTGluZUVuZENhcChpW3ItMV0saVtyXSk7dmFyIGE9Wmkuc2ltcGxpZnkodCwtbikscz1hLmxlbmd0aC0xO2UuaW5pdFNpZGVTZWdtZW50cyhhW3NdLGFbcy0xXSxBZS5MRUZUKTtmb3IodmFyIG89cy0yO28+PTA7by0tKWUuYWRkTmV4dFNlZ21lbnQoYVtvXSwhMCk7ZS5hZGRMYXN0U2VnbWVudCgpLGUuYWRkTGluZUVuZENhcChhWzFdLGFbMF0pLGUuY2xvc2VSaW5nKCl9LGNvbXB1dGVQb2ludEN1cnZlOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHRoaXMuYnVmUGFyYW1zLmdldEVuZENhcFN0eWxlKCkpe2Nhc2UgVmkuQ0FQX1JPVU5EOmUuY3JlYXRlQ2lyY2xlKHQpO2JyZWFrO2Nhc2UgVmkuQ0FQX1NRVUFSRTplLmNyZWF0ZVNxdWFyZSh0KX19LGdldExpbmVDdXJ2ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuZGlzdGFuY2U9ZSxlPDAmJiF0aGlzLmJ1ZlBhcmFtcy5pc1NpbmdsZVNpZGVkKCkpcmV0dXJuIG51bGw7aWYoMD09PWUpcmV0dXJuIG51bGw7dmFyIG49TWF0aC5hYnMoZSksaT10aGlzLmdldFNlZ0dlbihuKTtpZih0Lmxlbmd0aDw9MSl0aGlzLmNvbXB1dGVQb2ludEN1cnZlKHRbMF0saSk7ZWxzZSBpZih0aGlzLmJ1ZlBhcmFtcy5pc1NpbmdsZVNpZGVkKCkpe3ZhciByPWU8MDt0aGlzLmNvbXB1dGVTaW5nbGVTaWRlZEJ1ZmZlckN1cnZlKHQscixpKX1lbHNlIHRoaXMuY29tcHV0ZUxpbmVCdWZmZXJDdXJ2ZSh0LGkpO3JldHVybiBpLmdldENvb3JkaW5hdGVzKCl9LGdldEJ1ZmZlclBhcmFtZXRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZQYXJhbXN9LHNpbXBsaWZ5VG9sZXJhbmNlOmZ1bmN0aW9uKHQpe3JldHVybiB0KnRoaXMuYnVmUGFyYW1zLmdldFNpbXBsaWZ5RmFjdG9yKCl9LGdldFJpbmdDdXJ2ZTpmdW5jdGlvbih0LGUsbil7aWYodGhpcy5kaXN0YW5jZT1uLHQubGVuZ3RoPD0yKXJldHVybiB0aGlzLmdldExpbmVDdXJ2ZSh0LG4pO2lmKDA9PT1uKXJldHVybiAkaS5jb3B5Q29vcmRpbmF0ZXModCk7dmFyIGk9dGhpcy5nZXRTZWdHZW4obik7cmV0dXJuIHRoaXMuY29tcHV0ZVJpbmdCdWZmZXJDdXJ2ZSh0LGUsaSksaS5nZXRDb29yZGluYXRlcygpfSxjb21wdXRlT2Zmc2V0Q3VydmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuc2ltcGxpZnlUb2xlcmFuY2UodGhpcy5kaXN0YW5jZSk7aWYoZSl7dmFyIHI9Wmkuc2ltcGxpZnkodCwtaSksbz1yLmxlbmd0aC0xO24uaW5pdFNpZGVTZWdtZW50cyhyW29dLHJbby0xXSxBZS5MRUZUKSxuLmFkZEZpcnN0U2VnbWVudCgpO2Zvcih2YXIgYT1vLTI7YT49MDthLS0pbi5hZGROZXh0U2VnbWVudChyW2FdLCEwKX1lbHNle3ZhciBzPVppLnNpbXBsaWZ5KHQsaSksdT1zLmxlbmd0aC0xO24uaW5pdFNpZGVTZWdtZW50cyhzWzBdLHNbMV0sQWUuTEVGVCksbi5hZGRGaXJzdFNlZ21lbnQoKTtmb3IodmFyIGE9MjthPD11O2ErKyluLmFkZE5leHRTZWdtZW50KHNbYV0sITApfW4uYWRkTGFzdFNlZ21lbnQoKX0sZ2V0U2VnR2VuOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUWkodGhpcy5wcmVjaXNpb25Nb2RlbCx0aGlzLmJ1ZlBhcmFtcyx0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gJGl9fSksJGkuY29weUNvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodC5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09bmV3IGgodFtuXSk7cmV0dXJuIGV9LFRyKHRyLnByb3RvdHlwZSx7ZmluZFN0YWJiZWRTZWdtZW50czpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9bmV3IF8sbj10aGlzLnN1YmdyYXBocy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCkscj1pLmdldEVudmVsb3BlKCk7dC55PHIuZ2V0TWluWSgpfHx0Lnk+ci5nZXRNYXhZKCl8fHRoaXMuZmluZFN0YWJiZWRTZWdtZW50cyh0LGkuZ2V0RGlyZWN0ZWRFZGdlcygpLGUpfXJldHVybiBlfWlmKDM9PT1hcmd1bWVudHMubGVuZ3RoKWlmKExyKGFyZ3VtZW50c1syXSx2KSYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBoJiZhcmd1bWVudHNbMV1pbnN0YW5jZW9mIFplKWZvcih2YXIgbz1hcmd1bWVudHNbMF0sYT1hcmd1bWVudHNbMV0scz1hcmd1bWVudHNbMl0sdT1hLmdldEVkZ2UoKS5nZXRDb29yZGluYXRlcygpLG49MDtuPHUubGVuZ3RoLTE7bisrKXt0aGlzLnNlZy5wMD11W25dLHRoaXMuc2VnLnAxPXVbbisxXSx0aGlzLnNlZy5wMC55PnRoaXMuc2VnLnAxLnkmJnRoaXMuc2VnLnJldmVyc2UoKTt2YXIgbD1NYXRoLm1heCh0aGlzLnNlZy5wMC54LHRoaXMuc2VnLnAxLngpO2lmKCEobDxvLnh8fHRoaXMuc2VnLmlzSG9yaXpvbnRhbCgpfHxvLnk8dGhpcy5zZWcucDAueXx8by55PnRoaXMuc2VnLnAxLnl8fGFlLmNvbXB1dGVPcmllbnRhdGlvbih0aGlzLnNlZy5wMCx0aGlzLnNlZy5wMSxvKT09PWFlLlJJR0hUKSl7dmFyIGM9YS5nZXREZXB0aChBZS5MRUZUKTt0aGlzLnNlZy5wMC5lcXVhbHModVtuXSl8fChjPWEuZ2V0RGVwdGgoQWUuUklHSFQpKTt2YXIgZj1uZXcgZXIodGhpcy5zZWcsYyk7cy5hZGQoZil9fWVsc2UgaWYoTHIoYXJndW1lbnRzWzJdLHYpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgmJkxyKGFyZ3VtZW50c1sxXSx2KSlmb3IodmFyIGQ9YXJndW1lbnRzWzBdLHA9YXJndW1lbnRzWzFdLGc9YXJndW1lbnRzWzJdLG49cC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIG09bi5uZXh0KCk7bS5pc0ZvcndhcmQoKSYmdGhpcy5maW5kU3RhYmJlZFNlZ21lbnRzKGQsbSxnKX19LGdldERlcHRoOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZFN0YWJiZWRTZWdtZW50cyh0KTtyZXR1cm4gMD09PWUuc2l6ZSgpPzA6SnIubWluKGUpLmxlZnREZXB0aH0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ9fSksVHIoZXIucHJvdG90eXBlLHtjb21wYXJlVG86ZnVuY3Rpb24odCl7dmFyIGU9dDtpZih0aGlzLnVwd2FyZFNlZy5taW5YKCk+PWUudXB3YXJkU2VnLm1heFgoKSlyZXR1cm4gMTtpZih0aGlzLnVwd2FyZFNlZy5tYXhYKCk8PWUudXB3YXJkU2VnLm1pblgoKSlyZXR1cm4tMTt2YXIgbj10aGlzLnVwd2FyZFNlZy5vcmllbnRhdGlvbkluZGV4KGUudXB3YXJkU2VnKTtyZXR1cm4gMCE9PW4/bjoobj0tMSplLnVwd2FyZFNlZy5vcmllbnRhdGlvbkluZGV4KHRoaXMudXB3YXJkU2VnKSwwIT09bj9uOnRoaXMudXB3YXJkU2VnLmNvbXBhcmVUbyhlLnVwd2FyZFNlZykpfSxjb21wYXJlWDpmdW5jdGlvbih0LGUpe3ZhciBuPXQucDAuY29tcGFyZVRvKGUucDApO3JldHVybiAwIT09bj9uOnQucDEuY29tcGFyZVRvKGUucDEpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVwd2FyZFNlZy50b1N0cmluZygpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltyXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZXJ9fSksdHIuRGVwdGhTZWdtZW50PWVyLFRyKG5yLnByb3RvdHlwZSx7YXJlYTpmdW5jdGlvbigpe3JldHVybiBuci5hcmVhKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0sc2lnbmVkQXJlYTpmdW5jdGlvbigpe3JldHVybiBuci5zaWduZWRBcmVhKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0saW50ZXJwb2xhdGVaOmZ1bmN0aW9uKHQpe2lmKG51bGw9PT10KXRocm93IG5ldyBuKFwiU3VwcGxpZWQgcG9pbnQgaXMgbnVsbC5cIik7cmV0dXJuIG5yLmludGVycG9sYXRlWih0LHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0sbG9uZ2VzdFNpZGVMZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gbnIubG9uZ2VzdFNpZGVMZW5ndGgodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxpc0FjdXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG5yLmlzQWN1dGUodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxjaXJjdW1jZW50cmU6ZnVuY3Rpb24oKXtyZXR1cm4gbnIuY2lyY3VtY2VudHJlKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0sYXJlYTNEOmZ1bmN0aW9uKCl7cmV0dXJuIG5yLmFyZWEzRCh0aGlzLnAwLHRoaXMucDEsdGhpcy5wMil9LGNlbnRyb2lkOmZ1bmN0aW9uKCl7cmV0dXJuIG5yLmNlbnRyb2lkKHRoaXMucDAsdGhpcy5wMSx0aGlzLnAyKX0saW5DZW50cmU6ZnVuY3Rpb24oKXtyZXR1cm4gbnIuaW5DZW50cmUodGhpcy5wMCx0aGlzLnAxLHRoaXMucDIpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBucn19KSxuci5hcmVhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gTWF0aC5hYnMoKChuLngtdC54KSooZS55LXQueSktKGUueC10LngpKihuLnktdC55KSkvMil9LG5yLnNpZ25lZEFyZWE9ZnVuY3Rpb24odCxlLG4pe3JldHVybigobi54LXQueCkqKGUueS10LnkpLShlLngtdC54KSoobi55LXQueSkpLzJ9LG5yLmRldD1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gdCppLWUqbn0sbnIuaW50ZXJwb2xhdGVaPWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWUueCxvPWUueSxhPW4ueC1yLHM9aS54LXIsdT1uLnktbyxsPWkueS1vLGM9YSpsLXMqdSxoPXQueC1yLGY9dC55LW8sZD0obCpoLXMqZikvYyxwPSgtdSpoK2EqZikvYztyZXR1cm4gZS56K2QqKG4uei1lLnopK3AqKGkuei1lLnopfSxuci5sb25nZXN0U2lkZUxlbmd0aD1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC5kaXN0YW5jZShlKSxyPWUuZGlzdGFuY2Uobiksbz1uLmRpc3RhbmNlKHQpLGE9aTtyZXR1cm4gcj5hJiYoYT1yKSxvPmEmJihhPW8pLGF9LG5yLmlzQWN1dGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiEhS2kuaXNBY3V0ZSh0LGUsbikmJiEhS2kuaXNBY3V0ZShlLG4sdCkmJiEhS2kuaXNBY3V0ZShuLHQsZSl9LG5yLmNpcmN1bWNlbnRyZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9bi54LHI9bi55LG89dC54LWksYT10LnktcixzPWUueC1pLHU9ZS55LXIsbD0yKm5yLmRldChvLGEscyx1KTtyZXR1cm4gbmV3IGgoaS1uci5kZXQoYSxvKm8rYSphLHUscypzK3UqdSkvbCxyK25yLmRldChvLG8qbythKmEscyxzKnMrdSp1KS9sKX0sbnIucGVycGVuZGljdWxhckJpc2VjdG9yPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZS54LXQueCxpPWUueS10Lnk7cmV0dXJuIG5ldyBOKG5ldyBOKHQueCtuLzIsdC55K2kvMiwxKSxuZXcgTih0LngtaStuLzIsdC55K24raS8yLDEpKX0sbnIuYW5nbGVCaXNlY3Rvcj1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5kaXN0YW5jZSh0KSxyPWUuZGlzdGFuY2Uobiksbz1pLyhpK3IpLGE9bi54LXQueCxzPW4ueS10Lnk7cmV0dXJuIG5ldyBoKHQueCtvKmEsdC55K28qcyl9LG5yLmFyZWEzRD1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS54LXQueCxyPWUueS10Lnksbz1lLnotdC56LGE9bi54LXQueCxzPW4ueS10LnksdT1uLnotdC56LGw9cip1LW8qcyxjPW8qYS1pKnUsaD1pKnMtciphLGY9bCpsK2MqYytoKmg7cmV0dXJuIE1hdGguc3FydChmKS8yfSxuci5jZW50cm9pZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBoKCh0LngrZS54K24ueCkvMywodC55K2UueStuLnkpLzMpfSxuci5pbkNlbnRyZT1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5kaXN0YW5jZShuKSxyPXQuZGlzdGFuY2Uobiksbz10LmRpc3RhbmNlKGUpLGE9aStyK287cmV0dXJuIG5ldyBoKChpKnQueCtyKmUueCtvKm4ueCkvYSwoaSp0LnkrciplLnkrbypuLnkpL2EpfSxUcihpci5wcm90b3R5cGUse2FkZFBvaW50OmZ1bmN0aW9uKHQpe2lmKHRoaXMuZGlzdGFuY2U8PTApcmV0dXJuIG51bGw7dmFyIGU9dC5nZXRDb29yZGluYXRlcygpLG49dGhpcy5jdXJ2ZUJ1aWxkZXIuZ2V0TGluZUN1cnZlKGUsdGhpcy5kaXN0YW5jZSk7dGhpcy5hZGRDdXJ2ZShuLFMuRVhURVJJT1IsUy5JTlRFUklPUil9LGFkZFBvbHlnb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kaXN0YW5jZSxuPUFlLkxFRlQ7dGhpcy5kaXN0YW5jZTwwJiYoZT0tdGhpcy5kaXN0YW5jZSxuPUFlLlJJR0hUKTt2YXIgaT10LmdldEV4dGVyaW9yUmluZygpLHI9Vi5yZW1vdmVSZXBlYXRlZFBvaW50cyhpLmdldENvb3JkaW5hdGVzKCkpO2lmKHRoaXMuZGlzdGFuY2U8MCYmdGhpcy5pc0Vyb2RlZENvbXBsZXRlbHkoaSx0aGlzLmRpc3RhbmNlKSlyZXR1cm4gbnVsbDtpZih0aGlzLmRpc3RhbmNlPD0wJiZyLmxlbmd0aDwzKXJldHVybiBudWxsO3RoaXMuYWRkUG9seWdvblJpbmcocixlLG4sUy5FWFRFUklPUixTLklOVEVSSU9SKTtmb3IodmFyIG89MDtvPHQuZ2V0TnVtSW50ZXJpb3JSaW5nKCk7bysrKXt2YXIgYT10LmdldEludGVyaW9yUmluZ04obykscz1WLnJlbW92ZVJlcGVhdGVkUG9pbnRzKGEuZ2V0Q29vcmRpbmF0ZXMoKSk7dGhpcy5kaXN0YW5jZT4wJiZ0aGlzLmlzRXJvZGVkQ29tcGxldGVseShhLC10aGlzLmRpc3RhbmNlKXx8dGhpcy5hZGRQb2x5Z29uUmluZyhzLGUsQWUub3Bwb3NpdGUobiksUy5JTlRFUklPUixTLkVYVEVSSU9SKX19LGlzVHJpYW5nbGVFcm9kZWRDb21wbGV0ZWx5OmZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IG5yKHRbMF0sdFsxXSx0WzJdKSxpPW4uaW5DZW50cmUoKTtyZXR1cm4gYWUuZGlzdGFuY2VQb2ludExpbmUoaSxuLnAwLG4ucDEpPE1hdGguYWJzKGUpfSxhZGRMaW5lU3RyaW5nOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZGlzdGFuY2U8PTAmJiF0aGlzLmN1cnZlQnVpbGRlci5nZXRCdWZmZXJQYXJhbWV0ZXJzKCkuaXNTaW5nbGVTaWRlZCgpKXJldHVybiBudWxsO3ZhciBlPVYucmVtb3ZlUmVwZWF0ZWRQb2ludHModC5nZXRDb29yZGluYXRlcygpKSxuPXRoaXMuY3VydmVCdWlsZGVyLmdldExpbmVDdXJ2ZShlLHRoaXMuZGlzdGFuY2UpO3RoaXMuYWRkQ3VydmUobixTLkVYVEVSSU9SLFMuSU5URVJJT1IpfSxhZGRDdXJ2ZTpmdW5jdGlvbih0LGUsbil7aWYobnVsbD09PXR8fHQubGVuZ3RoPDIpcmV0dXJuIG51bGw7dmFyIGk9bmV3IGRpKHQsbmV3IGtlKDAsUy5CT1VOREFSWSxlLG4pKTt0aGlzLmN1cnZlTGlzdC5hZGQoaSl9LGdldEN1cnZlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZCh0aGlzLmlucHV0R2VvbSksdGhpcy5jdXJ2ZUxpc3R9LGFkZFBvbHlnb25SaW5nOmZ1bmN0aW9uKHQsZSxuLGkscil7aWYoMD09PWUmJnQubGVuZ3RoPEl0Lk1JTklNVU1fVkFMSURfU0laRSlyZXR1cm4gbnVsbDt2YXIgbz1pLGE9cjt0Lmxlbmd0aD49SXQuTUlOSU1VTV9WQUxJRF9TSVpFJiZhZS5pc0NDVyh0KSYmKG89cixhPWksbj1BZS5vcHBvc2l0ZShuKSk7dmFyIHM9dGhpcy5jdXJ2ZUJ1aWxkZXIuZ2V0UmluZ0N1cnZlKHQsbixlKTt0aGlzLmFkZEN1cnZlKHMsbyxhKX0sYWRkOmZ1bmN0aW9uKHQpe2lmKHQuaXNFbXB0eSgpKXJldHVybiBudWxsO2lmKHQgaW5zdGFuY2VvZiBNdCl0aGlzLmFkZFBvbHlnb24odCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgeHQpdGhpcy5hZGRMaW5lU3RyaW5nKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIEV0KXRoaXMuYWRkUG9pbnQodCk7ZWxzZSBpZih0IGluc3RhbmNlb2YgQ3QpdGhpcy5hZGRDb2xsZWN0aW9uKHQpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGN0KXRoaXMuYWRkQ29sbGVjdGlvbih0KTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBPdCl0aGlzLmFkZENvbGxlY3Rpb24odCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBsdCkpdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKHQuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpO3RoaXMuYWRkQ29sbGVjdGlvbih0KX19LGlzRXJvZGVkQ29tcGxldGVseTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0Q29vcmRpbmF0ZXMoKTtpZihuLmxlbmd0aDw0KXJldHVybiBlPDA7aWYoND09PW4ubGVuZ3RoKXJldHVybiB0aGlzLmlzVHJpYW5nbGVFcm9kZWRDb21wbGV0ZWx5KG4sZSk7dmFyIGk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkscj1NYXRoLm1pbihpLmdldEhlaWdodCgpLGkuZ2V0V2lkdGgoKSk7cmV0dXJuIGU8MCYmMipNYXRoLmFicyhlKT5yfSxhZGRDb2xsZWN0aW9uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5nZXROdW1HZW9tZXRyaWVzKCk7ZSsrKXt2YXIgbj10LmdldEdlb21ldHJ5TihlKTt0aGlzLmFkZChuKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGlyfX0pLFRyKHJyLnByb3RvdHlwZSx7aXNUcml2aWFsSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKHQ9PT1uJiYxPT09dGhpcy5saS5nZXRJbnRlcnNlY3Rpb25OdW0oKSl7aWYocnIuaXNBZGphY2VudFNlZ21lbnRzKGUsaSkpcmV0dXJuITA7aWYodC5pc0Nsb3NlZCgpKXt2YXIgcj10LnNpemUoKS0xO2lmKDA9PT1lJiZpPT09cnx8MD09PWkmJmU9PT1yKXJldHVybiEwfX1yZXR1cm4hMX0sZ2V0UHJvcGVySW50ZXJzZWN0aW9uUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wZXJJbnRlcnNlY3Rpb25Qb2ludH0saGFzUHJvcGVySW50ZXJpb3JJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNQcm9wZXJJbnRlcmlvcn0sZ2V0TGluZUludGVyc2VjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGl9LGhhc1Byb3BlckludGVyc2VjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc1Byb3Blcn0scHJvY2Vzc0ludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJmU9PT1pKXJldHVybiBudWxsO3RoaXMubnVtVGVzdHMrKzt2YXIgcj10LmdldENvb3JkaW5hdGVzKClbZV0sbz10LmdldENvb3JkaW5hdGVzKClbZSsxXSxhPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpXSxzPW4uZ2V0Q29vcmRpbmF0ZXMoKVtpKzFdO3RoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbihyLG8sYSxzKSx0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpJiYodGhpcy5udW1JbnRlcnNlY3Rpb25zKyssdGhpcy5saS5pc0ludGVyaW9ySW50ZXJzZWN0aW9uKCkmJih0aGlzLm51bUludGVyaW9ySW50ZXJzZWN0aW9ucysrLHRoaXMuaGFzSW50ZXJpb3I9ITApLHRoaXMuaXNUcml2aWFsSW50ZXJzZWN0aW9uKHQsZSxuLGkpfHwodGhpcy5faGFzSW50ZXJzZWN0aW9uPSEwLHQuYWRkSW50ZXJzZWN0aW9ucyh0aGlzLmxpLGUsMCksbi5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksaSwxKSx0aGlzLmxpLmlzUHJvcGVyKCkmJih0aGlzLm51bVByb3BlckludGVyc2VjdGlvbnMrKyx0aGlzLmhhc1Byb3Blcj0hMCx0aGlzLmhhc1Byb3BlckludGVyaW9yPSEwKSkpfSxoYXNJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzSW50ZXJzZWN0aW9ufSxpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saGFzSW50ZXJpb3JJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcmlvcn0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bX2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBycn19KSxyci5pc0FkamFjZW50U2VnbWVudHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMT09PU1hdGguYWJzKHQtZSl9LFRyKG9yLnByb3RvdHlwZSx7c2V0V29ya2luZ1ByZWNpc2lvbk1vZGVsOmZ1bmN0aW9uKHQpe3RoaXMud29ya2luZ1ByZWNpc2lvbk1vZGVsPXR9LGluc2VydFVuaXF1ZUVkZ2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5lZGdlTGlzdC5maW5kRXF1YWxFZGdlKHQpO2lmKG51bGwhPT1lKXt2YXIgbj1lLmdldExhYmVsKCksaT10LmdldExhYmVsKCk7ZS5pc1BvaW50d2lzZUVxdWFsKHQpfHwoaT1uZXcga2UodC5nZXRMYWJlbCgpKSxpLmZsaXAoKSksbi5tZXJnZShpKTt2YXIgcj1vci5kZXB0aERlbHRhKGkpLG89ZS5nZXREZXB0aERlbHRhKCksYT1vK3I7ZS5zZXREZXB0aERlbHRhKGEpfWVsc2UgdGhpcy5lZGdlTGlzdC5hZGQodCksdC5zZXREZXB0aERlbHRhKG9yLmRlcHRoRGVsdGEodC5nZXRMYWJlbCgpKSl9LGJ1aWxkU3ViZ3JhcGhzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBfLGk9dC5pdGVyYXRvcigpO2kuaGFzTmV4dCgpOyl7dmFyIHI9aS5uZXh0KCksbz1yLmdldFJpZ2h0bW9zdENvb3JkaW5hdGUoKSxhPW5ldyB0cihuKSxzPWEuZ2V0RGVwdGgobyk7ci5jb21wdXRlRGVwdGgocyksci5maW5kUmVzdWx0RWRnZXMoKSxuLmFkZChyKSxlLmFkZChyLmdldERpcmVjdGVkRWRnZXMoKSxyLmdldE5vZGVzKCkpfX0sY3JlYXRlU3ViZ3JhcGhzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgXyxuPXQuZ2V0Tm9kZXMoKS5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7aWYoIWkuaXNWaXNpdGVkKCkpe3ZhciByPW5ldyBXaTtyLmNyZWF0ZShpKSxlLmFkZChyKX19cmV0dXJuIEpyLnNvcnQoZSxKci5yZXZlcnNlT3JkZXIoKSksXG5lfSxjcmVhdGVFbXB0eVJlc3VsdEdlb21ldHJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2VvbUZhY3QuY3JlYXRlUG9seWdvbigpfSxnZXROb2RlcjpmdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy53b3JraW5nTm9kZXIpcmV0dXJuIHRoaXMud29ya2luZ05vZGVyO3ZhciBlPW5ldyBtaSxuPW5ldyBpZTtyZXR1cm4gbi5zZXRQcmVjaXNpb25Nb2RlbCh0KSxlLnNldFNlZ21lbnRJbnRlcnNlY3RvcihuZXcgcnIobikpLGV9LGJ1ZmZlcjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMud29ya2luZ1ByZWNpc2lvbk1vZGVsO251bGw9PT1uJiYobj10LmdldFByZWNpc2lvbk1vZGVsKCkpLHRoaXMuZ2VvbUZhY3Q9dC5nZXRGYWN0b3J5KCk7dmFyIGk9bmV3ICRpKG4sdGhpcy5idWZQYXJhbXMpLHI9bmV3IGlyKHQsZSxpKSxvPXIuZ2V0Q3VydmVzKCk7aWYoby5zaXplKCk8PTApcmV0dXJuIHRoaXMuY3JlYXRlRW1wdHlSZXN1bHRHZW9tZXRyeSgpO3RoaXMuY29tcHV0ZU5vZGVkRWRnZXMobyxuKSx0aGlzLmdyYXBoPW5ldyBKZShuZXcgcWUpLHRoaXMuZ3JhcGguYWRkRWRnZXModGhpcy5lZGdlTGlzdC5nZXRFZGdlcygpKTt2YXIgYT10aGlzLmNyZWF0ZVN1YmdyYXBocyh0aGlzLmdyYXBoKSxzPW5ldyBFaSh0aGlzLmdlb21GYWN0KTt0aGlzLmJ1aWxkU3ViZ3JhcGhzKGEscyk7dmFyIHU9cy5nZXRQb2x5Z29ucygpO3JldHVybiB1LnNpemUoKTw9MD90aGlzLmNyZWF0ZUVtcHR5UmVzdWx0R2VvbWV0cnkoKTp0aGlzLmdlb21GYWN0LmJ1aWxkR2VvbWV0cnkodSl9LGNvbXB1dGVOb2RlZEVkZ2VzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXROb2RlcihlKTtuLmNvbXB1dGVOb2Rlcyh0KTtmb3IodmFyIGk9bi5nZXROb2RlZFN1YnN0cmluZ3MoKSxyPWkuaXRlcmF0b3IoKTtyLmhhc05leHQoKTspe3ZhciBvPXIubmV4dCgpLGE9by5nZXRDb29yZGluYXRlcygpO2lmKDIhPT1hLmxlbmd0aHx8IWFbMF0uZXF1YWxzMkQoYVsxXSkpe3ZhciBzPW8uZ2V0RGF0YSgpLHU9bmV3IFRuKG8uZ2V0Q29vcmRpbmF0ZXMoKSxuZXcga2UocykpO3RoaXMuaW5zZXJ0VW5pcXVlRWRnZSh1KX19fSxzZXROb2RlcjpmdW5jdGlvbih0KXt0aGlzLndvcmtpbmdOb2Rlcj10fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBvcn19KSxvci5kZXB0aERlbHRhPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0TG9jYXRpb24oMCxBZS5MRUZUKSxuPXQuZ2V0TG9jYXRpb24oMCxBZS5SSUdIVCk7cmV0dXJuIGU9PT1TLklOVEVSSU9SJiZuPT09Uy5FWFRFUklPUj8xOmU9PT1TLkVYVEVSSU9SJiZuPT09Uy5JTlRFUklPUj8tMTowfSxvci5jb252ZXJ0U2VnU3RyaW5ncz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3ICR0LG49bmV3IF87dC5oYXNOZXh0KCk7KXt2YXIgaT10Lm5leHQoKSxyPWUuY3JlYXRlTGluZVN0cmluZyhpLmdldENvb3JkaW5hdGVzKCkpO24uYWRkKHIpfXJldHVybiBlLmJ1aWxkR2VvbWV0cnkobil9LFRyKGFyLnByb3RvdHlwZSx7cmVzY2FsZTpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxwKSlmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5yZXNjYWxlKG4uZ2V0Q29vcmRpbmF0ZXMoKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEFycmF5KXt2YXIgaT1hcmd1bWVudHNbMF07Mj09PWkubGVuZ3RoJiYobmV3IGgoaVswXSksbmV3IGgoaVsxXSkpO2Zvcih2YXIgZT0wO2U8aS5sZW5ndGg7ZSsrKWlbZV0ueD1pW2VdLngvdGhpcy5zY2FsZUZhY3Rvcit0aGlzLm9mZnNldFgsaVtlXS55PWlbZV0ueS90aGlzLnNjYWxlRmFjdG9yK3RoaXMub2Zmc2V0WTsyPT09aS5sZW5ndGgmJmlbMF0uZXF1YWxzMkQoaVsxXSkmJkwub3V0LnByaW50bG4oaSl9fSxzY2FsZTpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxwKSl7Zm9yKHZhciB0PWFyZ3VtZW50c1swXSxlPW5ldyBfLG49dC5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7ZS5hZGQobmV3IGRpKHRoaXMuc2NhbGUoaS5nZXRDb29yZGluYXRlcygpKSxpLmdldERhdGEoKSkpfXJldHVybiBlfWlmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgQXJyYXkpe2Zvcih2YXIgcj1hcmd1bWVudHNbMF0sbz1uZXcgQXJyYXkoci5sZW5ndGgpLmZpbGwobnVsbCksbj0wO248ci5sZW5ndGg7bisrKW9bbl09bmV3IGgoTWF0aC5yb3VuZCgocltuXS54LXRoaXMub2Zmc2V0WCkqdGhpcy5zY2FsZUZhY3RvciksTWF0aC5yb3VuZCgocltuXS55LXRoaXMub2Zmc2V0WSkqdGhpcy5zY2FsZUZhY3RvcikscltuXS56KTtyZXR1cm4gVi5yZW1vdmVSZXBlYXRlZFBvaW50cyhvKX19LGlzSW50ZWdlclByZWNpc2lvbjpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5zY2FsZUZhY3Rvcn0sZ2V0Tm9kZWRTdWJzdHJpbmdzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ub2Rlci5nZXROb2RlZFN1YnN0cmluZ3MoKTtyZXR1cm4gdGhpcy5pc1NjYWxlZCYmdGhpcy5yZXNjYWxlKHQpLHR9LGNvbXB1dGVOb2RlczpmdW5jdGlvbih0KXt2YXIgZT10O3RoaXMuaXNTY2FsZWQmJihlPXRoaXMuc2NhbGUodCkpLHRoaXMubm9kZXIuY29tcHV0ZU5vZGVzKGUpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltnaV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGFyfX0pLFRyKHNyLnByb3RvdHlwZSx7Y2hlY2tFbmRQdFZlcnRleEludGVyc2VjdGlvbnM6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9dGhpcy5zZWdTdHJpbmdzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0Q29vcmRpbmF0ZXMoKTt0aGlzLmNoZWNrRW5kUHRWZXJ0ZXhJbnRlcnNlY3Rpb25zKG5bMF0sdGhpcy5zZWdTdHJpbmdzKSx0aGlzLmNoZWNrRW5kUHRWZXJ0ZXhJbnRlcnNlY3Rpb25zKG5bbi5sZW5ndGgtMV0sdGhpcy5zZWdTdHJpbmdzKX1lbHNlIGlmKDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaT1hcmd1bWVudHNbMF0scj1hcmd1bWVudHNbMV0sdD1yLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KWZvcih2YXIgZT10Lm5leHQoKSxuPWUuZ2V0Q29vcmRpbmF0ZXMoKSxvPTE7bzxuLmxlbmd0aC0xO28rKylpZihuW29dLmVxdWFscyhpKSl0aHJvdyBuZXcgdShcImZvdW5kIGVuZHB0L2ludGVyaW9yIHB0IGludGVyc2VjdGlvbiBhdCBpbmRleCBcIitvK1wiIDpwdCBcIitpKX0sY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnM6ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9dGhpcy5zZWdTdHJpbmdzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KWZvcih2YXIgZT10Lm5leHQoKSxuPXRoaXMuc2VnU3RyaW5ncy5pdGVyYXRvcigpO24uaGFzTmV4dCgpOyl7dmFyIGk9bi5uZXh0KCk7dGhpcy5jaGVja0ludGVyaW9ySW50ZXJzZWN0aW9ucyhlLGkpfWVsc2UgaWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPXIuZ2V0Q29vcmRpbmF0ZXMoKSxzPW8uZ2V0Q29vcmRpbmF0ZXMoKSxsPTA7bDxhLmxlbmd0aC0xO2wrKylmb3IodmFyIGM9MDtjPHMubGVuZ3RoLTE7YysrKXRoaXMuY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnMocixsLG8sYyk7ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGg9YXJndW1lbnRzWzBdLGY9YXJndW1lbnRzWzFdLGQ9YXJndW1lbnRzWzJdLHA9YXJndW1lbnRzWzNdO2lmKGg9PT1kJiZmPT09cClyZXR1cm4gbnVsbDt2YXIgZz1oLmdldENvb3JkaW5hdGVzKClbZl0sdj1oLmdldENvb3JkaW5hdGVzKClbZisxXSxtPWQuZ2V0Q29vcmRpbmF0ZXMoKVtwXSx5PWQuZ2V0Q29vcmRpbmF0ZXMoKVtwKzFdO2lmKHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbihnLHYsbSx5KSx0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpJiYodGhpcy5saS5pc1Byb3BlcigpfHx0aGlzLmhhc0ludGVyaW9ySW50ZXJzZWN0aW9uKHRoaXMubGksZyx2KXx8dGhpcy5oYXNJbnRlcmlvckludGVyc2VjdGlvbih0aGlzLmxpLG0seSkpKXRocm93IG5ldyB1KFwiZm91bmQgbm9uLW5vZGVkIGludGVyc2VjdGlvbiBhdCBcIitnK1wiLVwiK3YrXCIgYW5kIFwiK20rXCItXCIreSl9fSxjaGVja1ZhbGlkOmZ1bmN0aW9uKCl7dGhpcy5jaGVja0VuZFB0VmVydGV4SW50ZXJzZWN0aW9ucygpLHRoaXMuY2hlY2tJbnRlcmlvckludGVyc2VjdGlvbnMoKSx0aGlzLmNoZWNrQ29sbGFwc2VzKCl9LGNoZWNrQ29sbGFwc2VzOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciB0PXRoaXMuc2VnU3RyaW5ncy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl7dmFyIGU9dC5uZXh0KCk7dGhpcy5jaGVja0NvbGxhcHNlcyhlKX1lbHNlIGlmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgbj1hcmd1bWVudHNbMF0saT1uLmdldENvb3JkaW5hdGVzKCksdD0wO3Q8aS5sZW5ndGgtMjt0KyspdGhpcy5jaGVja0NvbGxhcHNlKGlbdF0saVt0KzFdLGlbdCsyXSl9LGhhc0ludGVyaW9ySW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9MDtpPHQuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7aSsrKXt2YXIgcj10LmdldEludGVyc2VjdGlvbihpKTtpZighci5lcXVhbHMoZSkmJiFyLmVxdWFscyhuKSlyZXR1cm4hMH1yZXR1cm4hMX0sY2hlY2tDb2xsYXBzZTpmdW5jdGlvbih0LGUsbil7aWYodC5lcXVhbHMobikpdGhyb3cgbmV3IHUoXCJmb3VuZCBub24tbm9kZWQgY29sbGFwc2UgYXQgXCIrc3IuZmFjdC5jcmVhdGVMaW5lU3RyaW5nKFt0LGUsbl0pKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gc3J9fSksc3IuZmFjdD1uZXcgJHQsVHIodXIucHJvdG90eXBlLHtpbnRlcnNlY3RzU2NhbGVkOmZ1bmN0aW9uKHQsZSl7dmFyIG49TWF0aC5taW4odC54LGUueCksaT1NYXRoLm1heCh0LngsZS54KSxyPU1hdGgubWluKHQueSxlLnkpLG89TWF0aC5tYXgodC55LGUueSksYT10aGlzLm1heHg8bnx8dGhpcy5taW54Pml8fHRoaXMubWF4eTxyfHx0aGlzLm1pbnk+bztpZihhKXJldHVybiExO3ZhciBzPXRoaXMuaW50ZXJzZWN0c1RvbGVyYW5jZVNxdWFyZSh0LGUpO3JldHVybiBjLmlzVHJ1ZSghKGEmJnMpLFwiRm91bmQgYmFkIGVudmVsb3BlIHRlc3RcIiksc30saW5pdENvcm5lcnM6ZnVuY3Rpb24odCl7dGhpcy5taW54PXQueC0uNSx0aGlzLm1heHg9dC54Ky41LHRoaXMubWlueT10LnktLjUsdGhpcy5tYXh5PXQueSsuNSx0aGlzLmNvcm5lclswXT1uZXcgaCh0aGlzLm1heHgsdGhpcy5tYXh5KSx0aGlzLmNvcm5lclsxXT1uZXcgaCh0aGlzLm1pbngsdGhpcy5tYXh5KSx0aGlzLmNvcm5lclsyXT1uZXcgaCh0aGlzLm1pbngsdGhpcy5taW55KSx0aGlzLmNvcm5lclszXT1uZXcgaCh0aGlzLm1heHgsdGhpcy5taW55KX0saW50ZXJzZWN0czpmdW5jdGlvbih0LGUpe3JldHVybiAxPT09dGhpcy5zY2FsZUZhY3Rvcj90aGlzLmludGVyc2VjdHNTY2FsZWQodCxlKToodGhpcy5jb3B5U2NhbGVkKHQsdGhpcy5wMFNjYWxlZCksdGhpcy5jb3B5U2NhbGVkKGUsdGhpcy5wMVNjYWxlZCksdGhpcy5pbnRlcnNlY3RzU2NhbGVkKHRoaXMucDBTY2FsZWQsdGhpcy5wMVNjYWxlZCkpfSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZCh0KnRoaXMuc2NhbGVGYWN0b3IpfSxnZXRDb29yZGluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxQdH0sY29weVNjYWxlZDpmdW5jdGlvbih0LGUpe2UueD10aGlzLnNjYWxlKHQueCksZS55PXRoaXMuc2NhbGUodC55KX0sZ2V0U2FmZUVudmVsb3BlOmZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuc2FmZUVudil7dmFyIHQ9dXIuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUi90aGlzLnNjYWxlRmFjdG9yO3RoaXMuc2FmZUVudj1uZXcgeCh0aGlzLm9yaWdpbmFsUHQueC10LHRoaXMub3JpZ2luYWxQdC54K3QsdGhpcy5vcmlnaW5hbFB0LnktdCx0aGlzLm9yaWdpbmFsUHQueSt0KX1yZXR1cm4gdGhpcy5zYWZlRW52fSxpbnRlcnNlY3RzUGl4ZWxDbG9zdXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMF0sdGhpcy5jb3JuZXJbMV0pLCEhKHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCl8fCh0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuY29ybmVyWzFdLHRoaXMuY29ybmVyWzJdKSx0aGlzLmxpLmhhc0ludGVyc2VjdGlvbigpfHwodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclsyXSx0aGlzLmNvcm5lclszXSksdGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKXx8KHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbM10sdGhpcy5jb3JuZXJbMF0pLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkpKSkpfSxpbnRlcnNlY3RzVG9sZXJhbmNlU3F1YXJlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ITEsaT0hMTtyZXR1cm4gdGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclswXSx0aGlzLmNvcm5lclsxXSksISEodGhpcy5saS5pc1Byb3BlcigpfHwodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmNvcm5lclsxXSx0aGlzLmNvcm5lclsyXSksdGhpcy5saS5pc1Byb3BlcigpfHwodGhpcy5saS5oYXNJbnRlcnNlY3Rpb24oKSYmKG49ITApLHRoaXMubGkuY29tcHV0ZUludGVyc2VjdGlvbih0LGUsdGhpcy5jb3JuZXJbMl0sdGhpcy5jb3JuZXJbM10pLHRoaXMubGkuaXNQcm9wZXIoKXx8KHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJihpPSEwKSx0aGlzLmxpLmNvbXB1dGVJbnRlcnNlY3Rpb24odCxlLHRoaXMuY29ybmVyWzNdLHRoaXMuY29ybmVyWzBdKSx0aGlzLmxpLmlzUHJvcGVyKCl8fG4mJml8fHQuZXF1YWxzKHRoaXMucHQpfHxlLmVxdWFscyh0aGlzLnB0KSkpKSl9LGFkZFNuYXBwZWROb2RlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRDb29yZGluYXRlKGUpLGk9dC5nZXRDb29yZGluYXRlKGUrMSk7cmV0dXJuISF0aGlzLmludGVyc2VjdHMobixpKSYmKHQuYWRkSW50ZXJzZWN0aW9uKHRoaXMuZ2V0Q29vcmRpbmF0ZSgpLGUpLCEwKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdXJ9fSksdXIuU0FGRV9FTlZfRVhQQU5TSU9OX0ZBQ1RPUj0uNzUsVHIobHIucHJvdG90eXBlLHtzbmFwOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5zbmFwKHQsbnVsbCwtMSl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBlPWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXSxyPWUuZ2V0U2FmZUVudmVsb3BlKCksbz1uZXcgY3IoZSxuLGkpO3JldHVybiB0aGlzLmluZGV4LnF1ZXJ5KHIse2ludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW3ZlXX0sdmlzaXRJdGVtOmZ1bmN0aW9uKHQpe3Quc2VsZWN0KHIsbyl9fSksby5pc05vZGVBZGRlZCgpfX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gbHJ9fSksUHIoY3IsUWUpLFRyKGNyLnByb3RvdHlwZSx7aXNOb2RlQWRkZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNOb2RlQWRkZWR9LHNlbGVjdDpmdW5jdGlvbigpe2lmKDIhPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBRZS5wcm90b3R5cGUuc2VsZWN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj10LmdldENvbnRleHQoKTtyZXR1cm4gbnVsbCE9PXRoaXMucGFyZW50RWRnZSYmbj09PXRoaXMucGFyZW50RWRnZSYmZT09PXRoaXMuaG90UGl4ZWxWZXJ0ZXhJbmRleD9udWxsOnZvaWQodGhpcy5faXNOb2RlQWRkZWQ9dGhpcy5ob3RQaXhlbC5hZGRTbmFwcGVkTm9kZShuLGUpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gY3J9fSksbHIuSG90UGl4ZWxTbmFwQWN0aW9uPWNyLFRyKGhyLnByb3RvdHlwZSx7cHJvY2Vzc0ludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlLG4saSl7aWYodD09PW4mJmU9PT1pKXJldHVybiBudWxsO3ZhciByPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlXSxvPXQuZ2V0Q29vcmRpbmF0ZXMoKVtlKzFdLGE9bi5nZXRDb29yZGluYXRlcygpW2ldLHM9bi5nZXRDb29yZGluYXRlcygpW2krMV07aWYodGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHIsbyxhLHMpLHRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCkmJnRoaXMubGkuaXNJbnRlcmlvckludGVyc2VjdGlvbigpKXtmb3IodmFyIHU9MDt1PHRoaXMubGkuZ2V0SW50ZXJzZWN0aW9uTnVtKCk7dSsrKXRoaXMuaW50ZXJpb3JJbnRlcnNlY3Rpb25zLmFkZCh0aGlzLmxpLmdldEludGVyc2VjdGlvbih1KSk7dC5hZGRJbnRlcnNlY3Rpb25zKHRoaXMubGksZSwwKSxuLmFkZEludGVyc2VjdGlvbnModGhpcy5saSxpLDEpfX0saXNEb25lOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGdldEludGVyaW9ySW50ZXJzZWN0aW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVyaW9ySW50ZXJzZWN0aW9uc30saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bX2ldfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBocn19KSxUcihmci5wcm90b3R5cGUse2NoZWNrQ29ycmVjdG5lc3M6ZnVuY3Rpb24odCl7dmFyIGU9ZGkuZ2V0Tm9kZWRTdWJzdHJpbmdzKHQpLG49bmV3IHNyKGUpO3RyeXtuLmNoZWNrVmFsaWQoKX1jYXRjaCh0KXtpZighKHQgaW5zdGFuY2VvZiB3KSl0aHJvdyB0O3QucHJpbnRTdGFja1RyYWNlKCl9ZmluYWxseXt9fSxnZXROb2RlZFN1YnN0cmluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gZGkuZ2V0Tm9kZWRTdWJzdHJpbmdzKHRoaXMubm9kZWRTZWdTdHJpbmdzKX0sc25hcFJvdW5kOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5maW5kSW50ZXJpb3JJbnRlcnNlY3Rpb25zKHQsZSk7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uU25hcHMobiksdGhpcy5jb21wdXRlVmVydGV4U25hcHModCl9LGZpbmRJbnRlcmlvckludGVyc2VjdGlvbnM6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgaHIoZSk7cmV0dXJuIHRoaXMubm9kZXIuc2V0U2VnbWVudEludGVyc2VjdG9yKG4pLHRoaXMubm9kZXIuY29tcHV0ZU5vZGVzKHQpLG4uZ2V0SW50ZXJpb3JJbnRlcnNlY3Rpb25zKCl9LGNvbXB1dGVWZXJ0ZXhTbmFwczpmdW5jdGlvbigpe2lmKExyKGFyZ3VtZW50c1swXSxwKSlmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5jb21wdXRlVmVydGV4U25hcHMobil9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGRpKWZvcih2YXIgaT1hcmd1bWVudHNbMF0scj1pLmdldENvb3JkaW5hdGVzKCksbz0wO288ci5sZW5ndGg7bysrKXt2YXIgYT1uZXcgdXIocltvXSx0aGlzLnNjYWxlRmFjdG9yLHRoaXMubGkpLHM9dGhpcy5wb2ludFNuYXBwZXIuc25hcChhLGksbyk7cyYmaS5hZGRJbnRlcnNlY3Rpb24ocltvXSxvKX19LGNvbXB1dGVOb2RlczpmdW5jdGlvbih0KXt0aGlzLm5vZGVkU2VnU3RyaW5ncz10LHRoaXMubm9kZXI9bmV3IG1pLHRoaXMucG9pbnRTbmFwcGVyPW5ldyBscih0aGlzLm5vZGVyLmdldEluZGV4KCkpLHRoaXMuc25hcFJvdW5kKHQsdGhpcy5saSl9LGNvbXB1dGVJbnRlcnNlY3Rpb25TbmFwczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCksaT1uZXcgdXIobix0aGlzLnNjYWxlRmFjdG9yLHRoaXMubGkpO3RoaXMucG9pbnRTbmFwcGVyLnNuYXAoaSl9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltnaV19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIGZyfX0pLFRyKGRyLnByb3RvdHlwZSx7YnVmZmVyRml4ZWRQcmVjaXNpb246ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGFyKG5ldyBmcihuZXcgS3QoMSkpLHQuZ2V0U2NhbGUoKSksbj1uZXcgb3IodGhpcy5idWZQYXJhbXMpO24uc2V0V29ya2luZ1ByZWNpc2lvbk1vZGVsKHQpLG4uc2V0Tm9kZXIoZSksdGhpcy5yZXN1bHRHZW9tZXRyeT1uLmJ1ZmZlcih0aGlzLmFyZ0dlb20sdGhpcy5kaXN0YW5jZSl9LGJ1ZmZlclJlZHVjZWRQcmVjaXNpb246ZnVuY3Rpb24oKXtpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHZhciB0PWRyLk1BWF9QUkVDSVNJT05fRElHSVRTO3Q+PTA7dC0tKXt0cnl7dGhpcy5idWZmZXJSZWR1Y2VkUHJlY2lzaW9uKHQpfWNhdGNoKHQpe2lmKCEodCBpbnN0YW5jZW9mIExlKSl0aHJvdyB0O3RoaXMuc2F2ZUV4Y2VwdGlvbj10fWZpbmFsbHl7fWlmKG51bGwhPT10aGlzLnJlc3VsdEdlb21ldHJ5KXJldHVybiBudWxsfXRocm93IHRoaXMuc2F2ZUV4Y2VwdGlvbn1pZigxPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49ZHIucHJlY2lzaW9uU2NhbGVGYWN0b3IodGhpcy5hcmdHZW9tLHRoaXMuZGlzdGFuY2UsZSksaT1uZXcgS3Qobik7dGhpcy5idWZmZXJGaXhlZFByZWNpc2lvbihpKX19LGNvbXB1dGVHZW9tZXRyeTpmdW5jdGlvbigpe2lmKHRoaXMuYnVmZmVyT3JpZ2luYWxQcmVjaXNpb24oKSxudWxsIT09dGhpcy5yZXN1bHRHZW9tZXRyeSlyZXR1cm4gbnVsbDt2YXIgdD10aGlzLmFyZ0dlb20uZ2V0RmFjdG9yeSgpLmdldFByZWNpc2lvbk1vZGVsKCk7dC5nZXRUeXBlKCk9PT1LdC5GSVhFRD90aGlzLmJ1ZmZlckZpeGVkUHJlY2lzaW9uKHQpOnRoaXMuYnVmZmVyUmVkdWNlZFByZWNpc2lvbigpfSxzZXRRdWFkcmFudFNlZ21lbnRzOmZ1bmN0aW9uKHQpe3RoaXMuYnVmUGFyYW1zLnNldFF1YWRyYW50U2VnbWVudHModCl9LGJ1ZmZlck9yaWdpbmFsUHJlY2lzaW9uOmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PW5ldyBvcih0aGlzLmJ1ZlBhcmFtcyk7dGhpcy5yZXN1bHRHZW9tZXRyeT10LmJ1ZmZlcih0aGlzLmFyZ0dlb20sdGhpcy5kaXN0YW5jZSl9Y2F0Y2godCl7aWYoISh0IGluc3RhbmNlb2YgdSkpdGhyb3cgdDt0aGlzLnNhdmVFeGNlcHRpb249dH1maW5hbGx5e319LGdldFJlc3VsdEdlb21ldHJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpc3RhbmNlPXQsdGhpcy5jb21wdXRlR2VvbWV0cnkoKSx0aGlzLnJlc3VsdEdlb21ldHJ5fSxzZXRFbmRDYXBTdHlsZTpmdW5jdGlvbih0KXt0aGlzLmJ1ZlBhcmFtcy5zZXRFbmRDYXBTdHlsZSh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gZHJ9fSksZHIuYnVmZmVyT3A9ZnVuY3Rpb24oKXtpZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdLG49bmV3IGRyKHQpLGk9bi5nZXRSZXN1bHRHZW9tZXRyeShlKTtyZXR1cm4gaX1pZigzPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoTnVtYmVyLmlzSW50ZWdlcihhcmd1bWVudHNbMl0pJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQmJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXSxzPW5ldyBkcihyKTtzLnNldFF1YWRyYW50U2VnbWVudHMoYSk7dmFyIGk9cy5nZXRSZXN1bHRHZW9tZXRyeShvKTtyZXR1cm4gaX1pZihhcmd1bWVudHNbMl1pbnN0YW5jZW9mIFZpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQmJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pe3ZhciB1PWFyZ3VtZW50c1swXSxsPWFyZ3VtZW50c1sxXSxjPWFyZ3VtZW50c1syXSxzPW5ldyBkcih1LGMpLGk9cy5nZXRSZXN1bHRHZW9tZXRyeShsKTtyZXR1cm4gaX19ZWxzZSBpZig0PT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGg9YXJndW1lbnRzWzBdLGY9YXJndW1lbnRzWzFdLGQ9YXJndW1lbnRzWzJdLHA9YXJndW1lbnRzWzNdLHM9bmV3IGRyKGgpO3Muc2V0UXVhZHJhbnRTZWdtZW50cyhkKSxzLnNldEVuZENhcFN0eWxlKHApO3ZhciBpPXMuZ2V0UmVzdWx0R2VvbWV0cnkoZik7cmV0dXJuIGl9fSxkci5wcmVjaXNpb25TY2FsZUZhY3Rvcj1mdW5jdGlvbih0LGUsbil7dmFyIGk9dC5nZXRFbnZlbG9wZUludGVybmFsKCkscj1NLm1heChNYXRoLmFicyhpLmdldE1heFgoKSksTWF0aC5hYnMoaS5nZXRNYXhZKCkpLE1hdGguYWJzKGkuZ2V0TWluWCgpKSxNYXRoLmFicyhpLmdldE1pblkoKSkpLG89ZT4wP2U6MCxhPXIrMipvLHM9TWF0aC50cnVuYyhNYXRoLmxvZyhhKS9NYXRoLmxvZygxMCkrMSksdT1uLXM7cmV0dXJuIE1hdGgucG93KDEwLHUpfSxkci5DQVBfUk9VTkQ9VmkuQ0FQX1JPVU5ELGRyLkNBUF9CVVRUPVZpLkNBUF9GTEFULGRyLkNBUF9GTEFUPVZpLkNBUF9GTEFULGRyLkNBUF9TUVVBUkU9VmkuQ0FQX1NRVUFSRSxkci5NQVhfUFJFQ0lTSU9OX0RJR0lUUz0xMixUcihwci5wcm90b3R5cGUse2ZpbHRlcjpmdW5jdGlvbih0KXt0aGlzLnRyZWVTZXQuY29udGFpbnModCl8fCh0aGlzLmxpc3QuYWRkKHQpLHRoaXMudHJlZVNldC5hZGQodCkpfSxnZXRDb29yZGluYXRlczpmdW5jdGlvbigpe3ZhciB0PW5ldyBBcnJheSh0aGlzLmxpc3Quc2l6ZSgpKS5maWxsKG51bGwpO3JldHVybiB0aGlzLmxpc3QudG9BcnJheSh0KX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bRl19LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHByfX0pLHByLmZpbHRlckNvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgcHIsbj0wO248dC5sZW5ndGg7bisrKWUuZmlsdGVyKHRbbl0pO3JldHVybiBlLmdldENvb3JkaW5hdGVzKCl9LFRyKGdyLnByb3RvdHlwZSx7cHJlU29ydDpmdW5jdGlvbih0KXtmb3IodmFyIGU9bnVsbCxuPTE7bjx0Lmxlbmd0aDtuKyspKHRbbl0ueTx0WzBdLnl8fHRbbl0ueT09PXRbMF0ueSYmdFtuXS54PHRbMF0ueCkmJihlPXRbMF0sdFswXT10W25dLHRbbl09ZSk7cmV0dXJuIG90LnNvcnQodCwxLHQubGVuZ3RoLG5ldyB2cih0WzBdKSksdH0sY29tcHV0ZU9jdFJpbmc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb21wdXRlT2N0UHRzKHQpLG49bmV3IGI7cmV0dXJuIG4uYWRkKGUsITEpLG4uc2l6ZSgpPDM/bnVsbDoobi5jbG9zZVJpbmcoKSxuLnRvQ29vcmRpbmF0ZUFycmF5KCkpfSxsaW5lT3JQb2x5Z29uOmZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5jbGVhblJpbmcodCksMz09PXQubGVuZ3RoKXJldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZUxpbmVTdHJpbmcoW3RbMF0sdFsxXV0pO3ZhciBlPXRoaXMuZ2VvbUZhY3RvcnkuY3JlYXRlTGluZWFyUmluZyh0KTtyZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVQb2x5Z29uKGUsbnVsbCl9LGNsZWFuUmluZzpmdW5jdGlvbih0KXtjLmVxdWFscyh0WzBdLHRbdC5sZW5ndGgtMV0pO2Zvcih2YXIgZT1uZXcgXyxuPW51bGwsaT0wO2k8PXQubGVuZ3RoLTI7aSsrKXt2YXIgcj10W2ldLG89dFtpKzFdO3IuZXF1YWxzKG8pfHxudWxsIT09biYmdGhpcy5pc0JldHdlZW4obixyLG8pfHwoZS5hZGQociksbj1yKX1lLmFkZCh0W3QubGVuZ3RoLTFdKTt2YXIgYT1uZXcgQXJyYXkoZS5zaXplKCkpLmZpbGwobnVsbCk7cmV0dXJuIGUudG9BcnJheShhKX0saXNCZXR3ZWVuOmZ1bmN0aW9uKHQsZSxuKXtpZigwIT09YWUuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKSlyZXR1cm4hMTtpZih0LnghPT1uLngpe2lmKHQueDw9ZS54JiZlLng8PW4ueClyZXR1cm4hMDtpZihuLng8PWUueCYmZS54PD10LngpcmV0dXJuITB9aWYodC55IT09bi55KXtpZih0Lnk8PWUueSYmZS55PD1uLnkpcmV0dXJuITA7aWYobi55PD1lLnkmJmUueTw9dC55KXJldHVybiEwfXJldHVybiExfSxyZWR1Y2U6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb21wdXRlT2N0UmluZyh0KTtpZihudWxsPT09ZSlyZXR1cm4gdDtmb3IodmFyIG49bmV3IHJ0LGk9MDtpPGUubGVuZ3RoO2krKyluLmFkZChlW2ldKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKylhZS5pc1BvaW50SW5SaW5nKHRbaV0sZSl8fG4uYWRkKHRbaV0pO3ZhciByPVYudG9Db29yZGluYXRlQXJyYXkobik7cmV0dXJuIHIubGVuZ3RoPDM/dGhpcy5wYWRBcnJheTMocik6cn0sZ2V0Q29udmV4SHVsbDpmdW5jdGlvbigpe2lmKDA9PT10aGlzLmlucHV0UHRzLmxlbmd0aClyZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24obnVsbCk7aWYoMT09PXRoaXMuaW5wdXRQdHMubGVuZ3RoKXJldHVybiB0aGlzLmdlb21GYWN0b3J5LmNyZWF0ZVBvaW50KHRoaXMuaW5wdXRQdHNbMF0pO2lmKDI9PT10aGlzLmlucHV0UHRzLmxlbmd0aClyZXR1cm4gdGhpcy5nZW9tRmFjdG9yeS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMuaW5wdXRQdHMpO3ZhciB0PXRoaXMuaW5wdXRQdHM7dGhpcy5pbnB1dFB0cy5sZW5ndGg+NTAmJih0PXRoaXMucmVkdWNlKHRoaXMuaW5wdXRQdHMpKTt2YXIgZT10aGlzLnByZVNvcnQodCksbj10aGlzLmdyYWhhbVNjYW4oZSksaT10aGlzLnRvQ29vcmRpbmF0ZUFycmF5KG4pO3JldHVybiB0aGlzLmxpbmVPclBvbHlnb24oaSl9LHBhZEFycmF5MzpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KDMpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKW48dC5sZW5ndGg/ZVtuXT10W25dOmVbbl09dFswXTtyZXR1cm4gZX0sY29tcHV0ZU9jdFB0czpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KDgpLmZpbGwobnVsbCksbj0wO248ZS5sZW5ndGg7bisrKWVbbl09dFswXTtmb3IodmFyIGk9MTtpPHQubGVuZ3RoO2krKyl0W2ldLng8ZVswXS54JiYoZVswXT10W2ldKSx0W2ldLngtdFtpXS55PGVbMV0ueC1lWzFdLnkmJihlWzFdPXRbaV0pLHRbaV0ueT5lWzJdLnkmJihlWzJdPXRbaV0pLHRbaV0ueCt0W2ldLnk+ZVszXS54K2VbM10ueSYmKGVbM109dFtpXSksdFtpXS54PmVbNF0ueCYmKGVbNF09dFtpXSksdFtpXS54LXRbaV0ueT5lWzVdLngtZVs1XS55JiYoZVs1XT10W2ldKSx0W2ldLnk8ZVs2XS55JiYoZVs2XT10W2ldKSx0W2ldLngrdFtpXS55PGVbN10ueCtlWzddLnkmJihlWzddPXRbaV0pO3JldHVybiBlfSx0b0Nvb3JkaW5hdGVBcnJheTpmdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQuc2l6ZSgpKS5maWxsKG51bGwpLG49MDtuPHQuc2l6ZSgpO24rKyl7dmFyIGk9dC5nZXQobik7ZVtuXT1pfXJldHVybiBlfSxncmFoYW1TY2FuOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGwsbj1uZXcgSGk7ZT1uLnB1c2godFswXSksZT1uLnB1c2godFsxXSksZT1uLnB1c2godFsyXSk7Zm9yKHZhciBpPTM7aTx0Lmxlbmd0aDtpKyspe2ZvcihlPW4ucG9wKCk7IW4uZW1wdHkoKSYmYWUuY29tcHV0ZU9yaWVudGF0aW9uKG4ucGVlaygpLGUsdFtpXSk+MDspZT1uLnBvcCgpO2U9bi5wdXNoKGUpLGU9bi5wdXNoKHRbaV0pfXJldHVybiBlPW4ucHVzaCh0WzBdKSxufSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBncn19KSxnci5leHRyYWN0Q29vcmRpbmF0ZXM9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHByO3JldHVybiB0LmFwcGx5KGUpLGUuZ2V0Q29vcmRpbmF0ZXMoKX0sVHIodnIucHJvdG90eXBlLHtjb21wYXJlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dCxpPWU7cmV0dXJuIHZyLnBvbGFyQ29tcGFyZSh0aGlzLm9yaWdpbixuLGkpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVyblthXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdnJ9fSksdnIucG9sYXJDb21wYXJlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1lLngtdC54LHI9ZS55LXQueSxvPW4ueC10LngsYT1uLnktdC55LHM9YWUuY29tcHV0ZU9yaWVudGF0aW9uKHQsZSxuKTtpZihzPT09YWUuQ09VTlRFUkNMT0NLV0lTRSlyZXR1cm4gMTtpZihzPT09YWUuQ0xPQ0tXSVNFKXJldHVybi0xO3ZhciB1PWkqaStyKnIsbD1vKm8rYSphO3JldHVybiB1PGw/LTE6dT5sPzE6MH0sZ3IuUmFkaWFsQ29tcGFyYXRvcj12cixUcihtci5wcm90b3R5cGUse2FkZFBvaW50OmZ1bmN0aW9uKHQpe3RoaXMucHRDb3VudCs9MSx0aGlzLnB0Q2VudFN1bS54Kz10LngsdGhpcy5wdENlbnRTdW0ueSs9dC55fSxzZXRCYXNlUG9pbnQ6ZnVuY3Rpb24odCl7bnVsbD09PXRoaXMuYXJlYUJhc2VQdCYmKHRoaXMuYXJlYUJhc2VQdD10KX0sYWRkTGluZVNlZ21lbnRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtuPHQubGVuZ3RoLTE7bisrKXt2YXIgaT10W25dLmRpc3RhbmNlKHRbbisxXSk7aWYoMCE9PWkpe2UrPWk7dmFyIHI9KHRbbl0ueCt0W24rMV0ueCkvMjt0aGlzLmxpbmVDZW50U3VtLngrPWkqcjt2YXIgbz0odFtuXS55K3RbbisxXS55KS8yO3RoaXMubGluZUNlbnRTdW0ueSs9aSpvfX10aGlzLnRvdGFsTGVuZ3RoKz1lLDA9PT1lJiZ0Lmxlbmd0aD4wJiZ0aGlzLmFkZFBvaW50KHRbMF0pfSxhZGRIb2xlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hZS5pc0NDVyh0KSxuPTA7bjx0Lmxlbmd0aC0xO24rKyl0aGlzLmFkZFRyaWFuZ2xlKHRoaXMuYXJlYUJhc2VQdCx0W25dLHRbbisxXSxlKTt0aGlzLmFkZExpbmVTZWdtZW50cyh0KX0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaDtpZihNYXRoLmFicyh0aGlzLmFyZWFzdW0yKT4wKXQueD10aGlzLmNnMy54LzMvdGhpcy5hcmVhc3VtMix0Lnk9dGhpcy5jZzMueS8zL3RoaXMuYXJlYXN1bTI7ZWxzZSBpZih0aGlzLnRvdGFsTGVuZ3RoPjApdC54PXRoaXMubGluZUNlbnRTdW0ueC90aGlzLnRvdGFsTGVuZ3RoLHQueT10aGlzLmxpbmVDZW50U3VtLnkvdGhpcy50b3RhbExlbmd0aDtlbHNle2lmKCEodGhpcy5wdENvdW50PjApKXJldHVybiBudWxsO3QueD10aGlzLnB0Q2VudFN1bS54L3RoaXMucHRDb3VudCx0Lnk9dGhpcy5wdENlbnRTdW0ueS90aGlzLnB0Q291bnR9cmV0dXJuIHR9LGFkZFNoZWxsOmZ1bmN0aW9uKHQpe3QubGVuZ3RoPjAmJnRoaXMuc2V0QmFzZVBvaW50KHRbMF0pO2Zvcih2YXIgZT0hYWUuaXNDQ1codCksbj0wO248dC5sZW5ndGgtMTtuKyspdGhpcy5hZGRUcmlhbmdsZSh0aGlzLmFyZWFCYXNlUHQsdFtuXSx0W24rMV0sZSk7dGhpcy5hZGRMaW5lU2VnbWVudHModCl9LGFkZFRyaWFuZ2xlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWk/MTotMTttci5jZW50cm9pZDModCxlLG4sdGhpcy50cmlhbmdsZUNlbnQzKTt2YXIgbz1tci5hcmVhMih0LGUsbik7dGhpcy5jZzMueCs9cipvKnRoaXMudHJpYW5nbGVDZW50My54LHRoaXMuY2czLnkrPXIqbyp0aGlzLnRyaWFuZ2xlQ2VudDMueSx0aGlzLmFyZWFzdW0yKz1yKm99LGFkZDpmdW5jdGlvbigpe2lmKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgTXQpe3ZhciB0PWFyZ3VtZW50c1swXTt0aGlzLmFkZFNoZWxsKHQuZ2V0RXh0ZXJpb3JSaW5nKCkuZ2V0Q29vcmRpbmF0ZXMoKSk7Zm9yKHZhciBlPTA7ZTx0LmdldE51bUludGVyaW9yUmluZygpO2UrKyl0aGlzLmFkZEhvbGUodC5nZXRJbnRlcmlvclJpbmdOKGUpLmdldENvb3JkaW5hdGVzKCkpfWVsc2UgaWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBEKXt2YXIgbj1hcmd1bWVudHNbMF07aWYobi5pc0VtcHR5KCkpcmV0dXJuIG51bGw7aWYobiBpbnN0YW5jZW9mIEV0KXRoaXMuYWRkUG9pbnQobi5nZXRDb29yZGluYXRlKCkpO2Vsc2UgaWYobiBpbnN0YW5jZW9mIHh0KXRoaXMuYWRkTGluZVNlZ21lbnRzKG4uZ2V0Q29vcmRpbmF0ZXMoKSk7ZWxzZSBpZihuIGluc3RhbmNlb2YgTXQpe3ZhciBpPW47dGhpcy5hZGQoaSl9ZWxzZSBpZihuIGluc3RhbmNlb2YgbHQpZm9yKHZhciByPW4sZT0wO2U8ci5nZXROdW1HZW9tZXRyaWVzKCk7ZSsrKXRoaXMuYWRkKHIuZ2V0R2VvbWV0cnlOKGUpKX19LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIG1yfX0pLG1yLmFyZWEyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oZS54LXQueCkqKG4ueS10LnkpLShuLngtdC54KSooZS55LXQueSl9LG1yLmNlbnRyb2lkMz1mdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gaS54PXQueCtlLngrbi54LGkueT10LnkrZS55K24ueSxudWxsfSxtci5nZXRDZW50cm9pZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG1yKHQpLmdldENlbnRyb2lkKCl9LFRyKHlyLnByb3RvdHlwZSx7aXNJbnRlcnNlY3RzOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNEaXNqb2ludCgpfSxpc0NvdmVyczpmdW5jdGlvbigpe3JldHVybih5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5JTlRFUklPUl0pfHx5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5CT1VOREFSWV0pfHx5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5JTlRFUklPUl0pfHx5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5CT1VOREFSWV0pKSYmdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl09PT1hdC5GQUxTRSYmdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5CT1VOREFSWV09PT1hdC5GQUxTRX0saXNDb3ZlcmVkQnk6ZnVuY3Rpb24oKXtyZXR1cm4oeXIuaXNUcnVlKHRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdKXx8eXIuaXNUcnVlKHRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuQk9VTkRBUlldKXx8eXIuaXNUcnVlKHRoaXMubWF0cml4W1MuQk9VTkRBUlldW1MuSU5URVJJT1JdKXx8eXIuaXNUcnVlKHRoaXMubWF0cml4W1MuQk9VTkRBUlldW1MuQk9VTkRBUlldKSkmJnRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuRVhURVJJT1JdPT09YXQuRkFMU0UmJnRoaXMubWF0cml4W1MuQk9VTkRBUlldW1MuRVhURVJJT1JdPT09YXQuRkFMU0V9LHNldDpmdW5jdGlvbigpe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0wO2U8dC5sZW5ndGg7ZSsrKXt2YXIgbj1NYXRoLnRydW5jKGUvMyksaT1lJTM7dGhpcy5tYXRyaXhbbl1baV09YXQudG9EaW1lbnNpb25WYWx1ZSh0LmNoYXJBdChlKSl9ZWxzZSBpZigzPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIHI9YXJndW1lbnRzWzBdLG89YXJndW1lbnRzWzFdLGE9YXJndW1lbnRzWzJdO3RoaXMubWF0cml4W3JdW29dPWF9fSxpc0NvbnRhaW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHlyLmlzVHJ1ZSh0aGlzLm1hdHJpeFtTLklOVEVSSU9SXVtTLklOVEVSSU9SXSkmJnRoaXMubWF0cml4W1MuRVhURVJJT1JdW1MuSU5URVJJT1JdPT09YXQuRkFMU0UmJnRoaXMubWF0cml4W1MuRVhURVJJT1JdW1MuQk9VTkRBUlldPT09YXQuRkFMU0V9LHNldEF0TGVhc3Q6ZnVuY3Rpb24oKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIHQ9YXJndW1lbnRzWzBdLGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIG49TWF0aC50cnVuYyhlLzMpLGk9ZSUzO3RoaXMuc2V0QXRMZWFzdChuLGksYXQudG9EaW1lbnNpb25WYWx1ZSh0LmNoYXJBdChlKSkpfWVsc2UgaWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciByPWFyZ3VtZW50c1swXSxvPWFyZ3VtZW50c1sxXSxhPWFyZ3VtZW50c1syXTt0aGlzLm1hdHJpeFtyXVtvXTxhJiYodGhpcy5tYXRyaXhbcl1bb109YSl9fSxzZXRBdExlYXN0SWZWYWxpZDpmdW5jdGlvbih0LGUsbil7dD49MCYmZT49MCYmdGhpcy5zZXRBdExlYXN0KHQsZSxuKX0saXNXaXRoaW46ZnVuY3Rpb24oKXtyZXR1cm4geXIuaXNUcnVlKHRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdKSYmdGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl09PT1hdC5GQUxTRSYmdGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5FWFRFUklPUl09PT1hdC5GQUxTRX0saXNUb3VjaGVzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+ZT90aGlzLmlzVG91Y2hlcyhlLHQpOih0PT09YXQuQSYmZT09PWF0LkF8fHQ9PT1hdC5MJiZlPT09YXQuTHx8dD09PWF0LkwmJmU9PT1hdC5BfHx0PT09YXQuUCYmZT09PWF0LkF8fHQ9PT1hdC5QJiZlPT09YXQuTCkmJnRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdPT09YXQuRkFMU0UmJih5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5CT1VOREFSWV0pfHx5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5JTlRFUklPUl0pfHx5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5CT1VOREFSWV0pKX0saXNPdmVybGFwczpmdW5jdGlvbih0LGUpe3JldHVybiB0PT09YXQuUCYmZT09PWF0LlB8fHQ9PT1hdC5BJiZlPT09YXQuQT95ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5JTlRFUklPUl0pJiZ5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl0pJiZ5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl0pOnQ9PT1hdC5MJiZlPT09YXQuTCYmMT09PXRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdJiZ5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl0pJiZ5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl0pfSxpc0VxdWFsczpmdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZSYmeXIuaXNUcnVlKHRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdKSYmdGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5FWFRFUklPUl09PT1hdC5GQUxTRSYmdGhpcy5tYXRyaXhbUy5CT1VOREFSWV1bUy5FWFRFUklPUl09PT1hdC5GQUxTRSYmdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl09PT1hdC5GQUxTRSYmdGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5CT1VOREFSWV09PT1hdC5GQUxTRX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IEMoXCIxMjM0NTY3ODlcIiksZT0wO2U8MztlKyspZm9yKHZhciBuPTA7bjwzO24rKyl0LnNldENoYXJBdCgzKmUrbixhdC50b0RpbWVuc2lvblN5bWJvbCh0aGlzLm1hdHJpeFtlXVtuXSkpO3JldHVybiB0LnRvU3RyaW5nKCl9LHNldEFsbDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPDM7ZSsrKWZvcih2YXIgbj0wO248MztuKyspdGhpcy5tYXRyaXhbZV1bbl09dH0sZ2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWF0cml4W3RdW2VdfSx0cmFuc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1hdHJpeFsxXVswXTtyZXR1cm4gdGhpcy5tYXRyaXhbMV1bMF09dGhpcy5tYXRyaXhbMF1bMV0sdGhpcy5tYXRyaXhbMF1bMV09dCx0PXRoaXMubWF0cml4WzJdWzBdLHRoaXMubWF0cml4WzJdWzBdPXRoaXMubWF0cml4WzBdWzJdLHRoaXMubWF0cml4WzBdWzJdPXQsdD10aGlzLm1hdHJpeFsyXVsxXSx0aGlzLm1hdHJpeFsyXVsxXT10aGlzLm1hdHJpeFsxXVsyXSx0aGlzLm1hdHJpeFsxXVsyXT10LHRoaXN9LG1hdGNoZXM6ZnVuY3Rpb24odCl7aWYoOSE9PXQubGVuZ3RoKXRocm93IG5ldyBuKFwiU2hvdWxkIGJlIGxlbmd0aCA5OiBcIit0KTtmb3IodmFyIGU9MDtlPDM7ZSsrKWZvcih2YXIgaT0wO2k8MztpKyspaWYoIXlyLm1hdGNoZXModGhpcy5tYXRyaXhbZV1baV0sdC5jaGFyQXQoMyplK2kpKSlyZXR1cm4hMTtyZXR1cm4hMH0sYWRkOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8MztlKyspZm9yKHZhciBuPTA7bjwzO24rKyl0aGlzLnNldEF0TGVhc3QoZSxuLHQuZ2V0KGUsbikpfSxpc0Rpc2pvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdPT09YXQuRkFMU0UmJnRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuQk9VTkRBUlldPT09YXQuRkFMU0UmJnRoaXMubWF0cml4W1MuQk9VTkRBUlldW1MuSU5URVJJT1JdPT09YXQuRkFMU0UmJnRoaXMubWF0cml4W1MuQk9VTkRBUlldW1MuQk9VTkRBUlldPT09YXQuRkFMU0V9LGlzQ3Jvc3NlczpmdW5jdGlvbih0LGUpe3JldHVybiB0PT09YXQuUCYmZT09PWF0Lkx8fHQ9PT1hdC5QJiZlPT09YXQuQXx8dD09PWF0LkwmJmU9PT1hdC5BP3lyLmlzVHJ1ZSh0aGlzLm1hdHJpeFtTLklOVEVSSU9SXVtTLklOVEVSSU9SXSkmJnlyLmlzVHJ1ZSh0aGlzLm1hdHJpeFtTLklOVEVSSU9SXVtTLkVYVEVSSU9SXSk6dD09PWF0LkwmJmU9PT1hdC5QfHx0PT09YXQuQSYmZT09PWF0LlB8fHQ9PT1hdC5BJiZlPT09YXQuTD95ci5pc1RydWUodGhpcy5tYXRyaXhbUy5JTlRFUklPUl1bUy5JTlRFUklPUl0pJiZ5ci5pc1RydWUodGhpcy5tYXRyaXhbUy5FWFRFUklPUl1bUy5JTlRFUklPUl0pOnQ9PT1hdC5MJiZlPT09YXQuTCYmMD09PXRoaXMubWF0cml4W1MuSU5URVJJT1JdW1MuSU5URVJJT1JdfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltvXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4geXJ9fSkseXIubWF0Y2hlcz1mdW5jdGlvbigpe2lmKE51bWJlci5pc0ludGVnZXIoYXJndW1lbnRzWzBdKSYmXCJzdHJpbmdcIj09dHlwZW9mIGFyZ3VtZW50c1sxXSl7dmFyIHQ9YXJndW1lbnRzWzBdLGU9YXJndW1lbnRzWzFdO3JldHVybiBlPT09YXQuU1lNX0RPTlRDQVJFfHxlPT09YXQuU1lNX1RSVUUmJih0Pj0wfHx0PT09YXQuVFJVRSl8fGU9PT1hdC5TWU1fRkFMU0UmJnQ9PT1hdC5GQUxTRXx8ZT09PWF0LlNZTV9QJiZ0PT09YXQuUHx8ZT09PWF0LlNZTV9MJiZ0PT09YXQuTHx8ZT09PWF0LlNZTV9BJiZ0PT09YXQuQX1pZihcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzFdKXt2YXIgbj1hcmd1bWVudHNbMF0saT1hcmd1bWVudHNbMV07cmV0dXJuIG5ldyB5cihuKS5tYXRjaGVzKGkpfX07eXIuaXNUcnVlPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj0wfHx0PT09YXQuVFJVRX0sVHIoX3IucHJvdG90eXBlLHtpbnNlcnRFZGdlRW5kczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5pdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5ub2Rlcy5hZGQobil9fSxjb21wdXRlUHJvcGVySW50ZXJzZWN0aW9uSU06ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmFyZ1swXS5nZXRHZW9tZXRyeSgpLmdldERpbWVuc2lvbigpLGk9dGhpcy5hcmdbMV0uZ2V0R2VvbWV0cnkoKS5nZXREaW1lbnNpb24oKSxyPXQuaGFzUHJvcGVySW50ZXJzZWN0aW9uKCksbz10Lmhhc1Byb3BlckludGVyaW9ySW50ZXJzZWN0aW9uKCk7Mj09PW4mJjI9PT1pP3ImJmUuc2V0QXRMZWFzdChcIjIxMjEwMTIxMlwiKToyPT09biYmMT09PWk/KHImJmUuc2V0QXRMZWFzdChcIkZGRjBGRkZGMlwiKSxvJiZlLnNldEF0TGVhc3QoXCIxRkZGRkYxRkZcIikpOjE9PT1uJiYyPT09aT8ociYmZS5zZXRBdExlYXN0KFwiRjBGRkZGRkYyXCIpLG8mJmUuc2V0QXRMZWFzdChcIjFGMUZGRkZGRlwiKSk6MT09PW4mJjE9PT1pJiZvJiZlLnNldEF0TGVhc3QoXCIwRkZGRkZGRkZcIil9LGxhYmVsSXNvbGF0ZWRFZGdlczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmFyZ1t0XS5nZXRFZGdlSXRlcmF0b3IoKTtuLmhhc05leHQoKTspe3ZhciBpPW4ubmV4dCgpO2kuaXNJc29sYXRlZCgpJiYodGhpcy5sYWJlbElzb2xhdGVkRWRnZShpLGUsdGhpcy5hcmdbZV0uZ2V0R2VvbWV0cnkoKSksdGhpcy5pc29sYXRlZEVkZ2VzLmFkZChpKSl9fSxsYWJlbElzb2xhdGVkRWRnZTpmdW5jdGlvbih0LGUsbil7aWYobi5nZXREaW1lbnNpb24oKT4wKXt2YXIgaT10aGlzLnB0TG9jYXRvci5sb2NhdGUodC5nZXRDb29yZGluYXRlKCksbik7dC5nZXRMYWJlbCgpLnNldEFsbExvY2F0aW9ucyhlLGkpfWVsc2UgdC5nZXRMYWJlbCgpLnNldEFsbExvY2F0aW9ucyhlLFMuRVhURVJJT1IpfSxjb21wdXRlSU06ZnVuY3Rpb24oKXt2YXIgdD1uZXcgeXI7aWYodC5zZXQoUy5FWFRFUklPUixTLkVYVEVSSU9SLDIpLCF0aGlzLmFyZ1swXS5nZXRHZW9tZXRyeSgpLmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKHRoaXMuYXJnWzFdLmdldEdlb21ldHJ5KCkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSlyZXR1cm4gdGhpcy5jb21wdXRlRGlzam9pbnRJTSh0KSx0O3RoaXMuYXJnWzBdLmNvbXB1dGVTZWxmTm9kZXModGhpcy5saSwhMSksdGhpcy5hcmdbMV0uY29tcHV0ZVNlbGZOb2Rlcyh0aGlzLmxpLCExKTt2YXIgZT10aGlzLmFyZ1swXS5jb21wdXRlRWRnZUludGVyc2VjdGlvbnModGhpcy5hcmdbMV0sdGhpcy5saSwhMSk7dGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uTm9kZXMoMCksdGhpcy5jb21wdXRlSW50ZXJzZWN0aW9uTm9kZXMoMSksdGhpcy5jb3B5Tm9kZXNBbmRMYWJlbHMoMCksdGhpcy5jb3B5Tm9kZXNBbmRMYWJlbHMoMSksdGhpcy5sYWJlbElzb2xhdGVkTm9kZXMoKSx0aGlzLmNvbXB1dGVQcm9wZXJJbnRlcnNlY3Rpb25JTShlLHQpO3ZhciBuPW5ldyBBbixpPW4uY29tcHV0ZUVkZ2VFbmRzKHRoaXMuYXJnWzBdLmdldEVkZ2VJdGVyYXRvcigpKTt0aGlzLmluc2VydEVkZ2VFbmRzKGkpO3ZhciByPW4uY29tcHV0ZUVkZ2VFbmRzKHRoaXMuYXJnWzFdLmdldEVkZ2VJdGVyYXRvcigpKTtyZXR1cm4gdGhpcy5pbnNlcnRFZGdlRW5kcyhyKSx0aGlzLmxhYmVsTm9kZUVkZ2VzKCksdGhpcy5sYWJlbElzb2xhdGVkRWRnZXMoMCwxKSx0aGlzLmxhYmVsSXNvbGF0ZWRFZGdlcygxLDApLHRoaXMudXBkYXRlSU0odCksdH0sbGFiZWxOb2RlRWRnZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ub2Rlcy5pdGVyYXRvcigpO3QuaGFzTmV4dCgpOyl0Lm5leHQoKS5nZXRFZGdlcygpLmNvbXB1dGVMYWJlbGxpbmcodGhpcy5hcmcpfSxjb3B5Tm9kZXNBbmRMYWJlbHM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuYXJnW3RdLmdldE5vZGVJdGVyYXRvcigpO2UuaGFzTmV4dCgpOyl7dmFyIG49ZS5uZXh0KCk7dGhpcy5ub2Rlcy5hZGROb2RlKG4uZ2V0Q29vcmRpbmF0ZSgpKS5zZXRMYWJlbCh0LG4uZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSl9fSxsYWJlbEludGVyc2VjdGlvbk5vZGVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmFyZ1t0XS5nZXRFZGdlSXRlcmF0b3IoKTtlLmhhc05leHQoKTspZm9yKHZhciBuPWUubmV4dCgpLGk9bi5nZXRMYWJlbCgpLmdldExvY2F0aW9uKHQpLHI9bi5nZXRFZGdlSW50ZXJzZWN0aW9uTGlzdCgpLml0ZXJhdG9yKCk7ci5oYXNOZXh0KCk7KXt2YXIgbz1yLm5leHQoKSxhPXRoaXMubm9kZXMuZmluZChvLmNvb3JkKTthLmdldExhYmVsKCkuaXNOdWxsKHQpJiYoaT09PVMuQk9VTkRBUlk/YS5zZXRMYWJlbEJvdW5kYXJ5KHQpOmEuc2V0TGFiZWwodCxTLklOVEVSSU9SKSl9fSxsYWJlbElzb2xhdGVkTm9kZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMucHRMb2NhdG9yLmxvY2F0ZSh0LmdldENvb3JkaW5hdGUoKSx0aGlzLmFyZ1tlXS5nZXRHZW9tZXRyeSgpKTt0LmdldExhYmVsKCkuc2V0QWxsTG9jYXRpb25zKGUsbil9LGNvbXB1dGVJbnRlcnNlY3Rpb25Ob2RlczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5hcmdbdF0uZ2V0RWRnZUl0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWZvcih2YXIgbj1lLm5leHQoKSxpPW4uZ2V0TGFiZWwoKS5nZXRMb2NhdGlvbih0KSxyPW4uZ2V0RWRnZUludGVyc2VjdGlvbkxpc3QoKS5pdGVyYXRvcigpO3IuaGFzTmV4dCgpOyl7dmFyIG89ci5uZXh0KCksYT10aGlzLm5vZGVzLmFkZE5vZGUoby5jb29yZCk7aT09PVMuQk9VTkRBUlk/YS5zZXRMYWJlbEJvdW5kYXJ5KHQpOmEuZ2V0TGFiZWwoKS5pc051bGwodCkmJmEuc2V0TGFiZWwodCxTLklOVEVSSU9SKX19LGxhYmVsSXNvbGF0ZWROb2RlczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vZGVzLml0ZXJhdG9yKCk7dC5oYXNOZXh0KCk7KXt2YXIgZT10Lm5leHQoKSxuPWUuZ2V0TGFiZWwoKTtjLmlzVHJ1ZShuLmdldEdlb21ldHJ5Q291bnQoKT4wLFwibm9kZSB3aXRoIGVtcHR5IGxhYmVsIGZvdW5kXCIpLGUuaXNJc29sYXRlZCgpJiYobi5pc051bGwoMCk/dGhpcy5sYWJlbElzb2xhdGVkTm9kZShlLDApOnRoaXMubGFiZWxJc29sYXRlZE5vZGUoZSwxKSl9fSx1cGRhdGVJTTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pc29sYXRlZEVkZ2VzLml0ZXJhdG9yKCk7ZS5oYXNOZXh0KCk7KWUubmV4dCgpLnVwZGF0ZUlNKHQpO2Zvcih2YXIgbj10aGlzLm5vZGVzLml0ZXJhdG9yKCk7bi5oYXNOZXh0KCk7KXt2YXIgaT1uLm5leHQoKTtpLnVwZGF0ZUlNKHQpLGkudXBkYXRlSU1Gcm9tRWRnZXModCl9fSxjb21wdXRlRGlzam9pbnRJTTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFyZ1swXS5nZXRHZW9tZXRyeSgpO2UuaXNFbXB0eSgpfHwodC5zZXQoUy5JTlRFUklPUixTLkVYVEVSSU9SLGUuZ2V0RGltZW5zaW9uKCkpLHQuc2V0KFMuQk9VTkRBUlksUy5FWFRFUklPUixlLmdldEJvdW5kYXJ5RGltZW5zaW9uKCkpKTt2YXIgbj10aGlzLmFyZ1sxXS5nZXRHZW9tZXRyeSgpO24uaXNFbXB0eSgpfHwodC5zZXQoUy5FWFRFUklPUixTLklOVEVSSU9SLG4uZ2V0RGltZW5zaW9uKCkpLHQuc2V0KFMuRVhURVJJT1IsUy5CT1VOREFSWSxuLmdldEJvdW5kYXJ5RGltZW5zaW9uKCkpKX0saW50ZXJmYWNlc186ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gX3J9fSksVHIoYnIucHJvdG90eXBlLHtpc0NvbnRhaW5lZEluQm91bmRhcnk6ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIE10KXJldHVybiExO2lmKHQgaW5zdGFuY2VvZiBFdClyZXR1cm4gdGhpcy5pc1BvaW50Q29udGFpbmVkSW5Cb3VuZGFyeSh0KTtpZih0IGluc3RhbmNlb2YgeHQpcmV0dXJuIHRoaXMuaXNMaW5lU3RyaW5nQ29udGFpbmVkSW5Cb3VuZGFyeSh0KTtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7aWYoIXRoaXMuaXNDb250YWluZWRJbkJvdW5kYXJ5KG4pKXJldHVybiExfXJldHVybiEwfSxpc0xpbmVTZWdtZW50Q29udGFpbmVkSW5Cb3VuZGFyeTpmdW5jdGlvbih0LGUpe2lmKHQuZXF1YWxzKGUpKXJldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KHQpO2lmKHQueD09PWUueCl7aWYodC54PT09dGhpcy5yZWN0RW52LmdldE1pblgoKXx8dC54PT09dGhpcy5yZWN0RW52LmdldE1heFgoKSlyZXR1cm4hMH1lbHNlIGlmKHQueT09PWUueSYmKHQueT09PXRoaXMucmVjdEVudi5nZXRNaW5ZKCl8fHQueT09PXRoaXMucmVjdEVudi5nZXRNYXhZKCkpKXJldHVybiEwO3JldHVybiExfSxpc0xpbmVTdHJpbmdDb250YWluZWRJbkJvdW5kYXJ5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLG49bmV3IGgsaT1uZXcgaCxyPTA7cjxlLnNpemUoKS0xO3IrKylpZihlLmdldENvb3JkaW5hdGUocixuKSxlLmdldENvb3JkaW5hdGUocisxLGkpLCF0aGlzLmlzTGluZVNlZ21lbnRDb250YWluZWRJbkJvdW5kYXJ5KG4saSkpcmV0dXJuITE7cmV0dXJuITB9LGlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5OmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBFdCl7dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmlzUG9pbnRDb250YWluZWRJbkJvdW5kYXJ5KHQuZ2V0Q29vcmRpbmF0ZSgpKX1pZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciBlPWFyZ3VtZW50c1swXTtyZXR1cm4gZS54PT09dGhpcy5yZWN0RW52LmdldE1pblgoKXx8ZS54PT09dGhpcy5yZWN0RW52LmdldE1heFgoKXx8ZS55PT09dGhpcy5yZWN0RW52LmdldE1pblkoKXx8ZS55PT09dGhpcy5yZWN0RW52LmdldE1heFkoKX19LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5yZWN0RW52LmNvbnRhaW5zKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSYmIXRoaXMuaXNDb250YWluZWRJbkJvdW5kYXJ5KHQpfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBicn19KSxici5jb250YWlucz1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgYnIodCkuY29udGFpbnMoZSl9LFRyKHhyLnByb3RvdHlwZSx7aW50ZXJzZWN0czpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyB4KHQsZSk7aWYoIXRoaXMucmVjdEVudi5pbnRlcnNlY3RzKG4pKXJldHVybiExO2lmKHRoaXMucmVjdEVudi5pbnRlcnNlY3RzKHQpKXJldHVybiEwO2lmKHRoaXMucmVjdEVudi5pbnRlcnNlY3RzKGUpKXJldHVybiEwO2lmKHQuY29tcGFyZVRvKGUpPjApe3ZhciBpPXQ7dD1lLGU9aX12YXIgcj0hMTtyZXR1cm4gZS55PnQueSYmKHI9ITApLHI/dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmRpYWdEb3duMCx0aGlzLmRpYWdEb3duMSk6dGhpcy5saS5jb21wdXRlSW50ZXJzZWN0aW9uKHQsZSx0aGlzLmRpYWdVcDAsdGhpcy5kaWFnVXAxKSwhIXRoaXMubGkuaGFzSW50ZXJzZWN0aW9uKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHhyfX0pLFRyKHdyLnByb3RvdHlwZSx7YXBwbHlUbzpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuZ2V0TnVtR2VvbWV0cmllcygpJiYhdGhpcy5faXNEb25lO2UrKyl7dmFyIG49dC5nZXRHZW9tZXRyeU4oZSk7aWYobiBpbnN0YW5jZW9mIGx0KXRoaXMuYXBwbHlUbyhuKTtlbHNlIGlmKHRoaXMudmlzaXQobiksdGhpcy5pc0RvbmUoKSlyZXR1cm4gdGhpcy5faXNEb25lPSEwLG51bGx9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiB3cn19KSxUcihFci5wcm90b3R5cGUse2ludGVyc2VjdHM6ZnVuY3Rpb24odCl7aWYoIXRoaXMucmVjdEVudi5pbnRlcnNlY3RzKHQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSlyZXR1cm4hMTt2YXIgZT1uZXcgU3IodGhpcy5yZWN0RW52KTtpZihlLmFwcGx5VG8odCksZS5pbnRlcnNlY3RzKCkpcmV0dXJuITA7dmFyIG49bmV3IE1yKHRoaXMucmVjdGFuZ2xlKTtpZihuLmFwcGx5VG8odCksbi5jb250YWluc1BvaW50KCkpcmV0dXJuITA7dmFyIGk9bmV3IENyKHRoaXMucmVjdGFuZ2xlKTtyZXR1cm4gaS5hcHBseVRvKHQpLCEhaS5pbnRlcnNlY3RzKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEVyfX0pLEVyLmludGVyc2VjdHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IEVyKHQpLmludGVyc2VjdHMoZSl9LFByKFNyLHdyKSxUcihTci5wcm90b3R5cGUse2lzRG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcnNlY3RzPT09ITB9LHZpc2l0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3JldHVybiB0aGlzLnJlY3RFbnYuaW50ZXJzZWN0cyhlKT90aGlzLnJlY3RFbnYuY29udGFpbnMoZSk/KHRoaXMuX2ludGVyc2VjdHM9ITAsbnVsbCk6ZS5nZXRNaW5YKCk+PXRoaXMucmVjdEVudi5nZXRNaW5YKCkmJmUuZ2V0TWF4WCgpPD10aGlzLnJlY3RFbnYuZ2V0TWF4WCgpPyh0aGlzLl9pbnRlcnNlY3RzPSEwLG51bGwpOmUuZ2V0TWluWSgpPj10aGlzLnJlY3RFbnYuZ2V0TWluWSgpJiZlLmdldE1heFkoKTw9dGhpcy5yZWN0RW52LmdldE1heFkoKT8odGhpcy5faW50ZXJzZWN0cz0hMCxudWxsKTp2b2lkIDA6bnVsbH0saW50ZXJzZWN0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcnNlY3RzfSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBTcn19KSxQcihNcix3ciksVHIoTXIucHJvdG90eXBlLHtpc0RvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbnNQb2ludD09PSEwfSx2aXNpdDpmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBNdCkpcmV0dXJuIG51bGw7dmFyIGU9dC5nZXRFbnZlbG9wZUludGVybmFsKCk7aWYoIXRoaXMucmVjdEVudi5pbnRlcnNlY3RzKGUpKXJldHVybiBudWxsO2Zvcih2YXIgbj1uZXcgaCxpPTA7aTw0O2krKylpZih0aGlzLnJlY3RTZXEuZ2V0Q29vcmRpbmF0ZShpLG4pLGUuY29udGFpbnMobikmJmplLmNvbnRhaW5zUG9pbnRJblBvbHlnb24obix0KSlyZXR1cm4gdGhpcy5fY29udGFpbnNQb2ludD0hMCxudWxsfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5zUG9pbnR9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIE1yfX0pLFByKENyLHdyKSxUcihDci5wcm90b3R5cGUse2ludGVyc2VjdHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNJbnRlcnNlY3Rpb259LGlzRG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0ludGVyc2VjdGlvbj09PSEwfSx2aXNpdDpmdW5jdGlvbih0KXt2YXIgZT10LmdldEVudmVsb3BlSW50ZXJuYWwoKTtpZighdGhpcy5yZWN0RW52LmludGVyc2VjdHMoZSkpcmV0dXJuIG51bGw7dmFyIG49T2UuZ2V0TGluZXModCk7dGhpcy5jaGVja0ludGVyc2VjdGlvbldpdGhMaW5lU3RyaW5ncyhuKX0sY2hlY2tJbnRlcnNlY3Rpb25XaXRoTGluZVN0cmluZ3M6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuaXRlcmF0b3IoKTtlLmhhc05leHQoKTspe3ZhciBuPWUubmV4dCgpO2lmKHRoaXMuY2hlY2tJbnRlcnNlY3Rpb25XaXRoU2VnbWVudHMobiksdGhpcy5oYXNJbnRlcnNlY3Rpb24pcmV0dXJuIG51bGx9fSxjaGVja0ludGVyc2VjdGlvbldpdGhTZWdtZW50czpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSxuPTE7bjxlLnNpemUoKTtuKyspaWYoZS5nZXRDb29yZGluYXRlKG4tMSx0aGlzLnAwKSxlLmdldENvb3JkaW5hdGUobix0aGlzLnAxKSx0aGlzLnJlY3RJbnRlcnNlY3Rvci5pbnRlcnNlY3RzKHRoaXMucDAsdGhpcy5wMSkpcmV0dXJuIHRoaXMuaGFzSW50ZXJzZWN0aW9uPSEwLG51bGx9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIENyfX0pLFByKElyLENpKSxUcihJci5wcm90b3R5cGUse2dldEludGVyc2VjdGlvbk1hdHJpeDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWxhdGUuY29tcHV0ZUlNKCl9LGludGVyZmFjZXNfOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldENsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIElyfX0pLElyLmNvdmVycz1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5nZXRFbnZlbG9wZUludGVybmFsKCkuY292ZXJzKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSYmKCEhdC5pc1JlY3RhbmdsZSgpfHxJci5yZWxhdGUodCxlKS5pc0NvdmVycygpKX0sSXIuaW50ZXJzZWN0cz1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhlLmdldEVudmVsb3BlSW50ZXJuYWwoKSkmJih0LmlzUmVjdGFuZ2xlKCk/RXIuaW50ZXJzZWN0cyh0LGUpOmUuaXNSZWN0YW5nbGUoKT9Fci5pbnRlcnNlY3RzKGUsdCk6SXIucmVsYXRlKHQsZSkuaXNJbnRlcnNlY3RzKCkpfSxJci50b3VjaGVzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSYmSXIucmVsYXRlKHQsZSkuaXNUb3VjaGVzKHQuZ2V0RGltZW5zaW9uKCksZS5nZXREaW1lbnNpb24oKSl9LElyLndpdGhpbj1mdW5jdGlvbih0LGUpe3JldHVybiBlLmNvbnRhaW5zKHQpfSxJci5jb3ZlcmVkQnk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gSXIuY292ZXJzKGUsdCl9LElyLnJlbGF0ZT1mdW5jdGlvbigpe2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV0sbj1uZXcgSXIodCxlKSxpPW4uZ2V0SW50ZXJzZWN0aW9uTWF0cml4KCk7cmV0dXJuIGl9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhcmd1bWVudHNbMl0mJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgRCYmYXJndW1lbnRzWzFdaW5zdGFuY2VvZiBEKXt2YXIgcj1hcmd1bWVudHNbMF0sbz1hcmd1bWVudHNbMV0sYT1hcmd1bWVudHNbMl07cmV0dXJuIElyLnJlbGF0ZVdpdGhDaGVjayhyLG8pLm1hdGNoZXMoYSl9aWYoTHIoYXJndW1lbnRzWzJdLEIpJiZhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQmJmFyZ3VtZW50c1sxXWluc3RhbmNlb2YgRCl7dmFyIHM9YXJndW1lbnRzWzBdLHU9YXJndW1lbnRzWzFdLGw9YXJndW1lbnRzWzJdLG49bmV3IElyKHMsdSxsKSxpPW4uZ2V0SW50ZXJzZWN0aW9uTWF0cml4KCk7XG5yZXR1cm4gaX19fSxJci5vdmVybGFwcz1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5nZXRFbnZlbG9wZUludGVybmFsKCkuaW50ZXJzZWN0cyhlLmdldEVudmVsb3BlSW50ZXJuYWwoKSkmJklyLnJlbGF0ZSh0LGUpLmlzT3ZlcmxhcHModC5nZXREaW1lbnNpb24oKSxlLmdldERpbWVuc2lvbigpKX0sSXIuZGlzam9pbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hdC5pbnRlcnNlY3RzKGUpfSxJci5yZWxhdGVXaXRoQ2hlY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0KSx0LmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKGUpLElyLnJlbGF0ZSh0LGUpfSxJci5jcm9zc2VzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5pbnRlcnNlY3RzKGUuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpKSYmSXIucmVsYXRlKHQsZSkuaXNDcm9zc2VzKHQuZ2V0RGltZW5zaW9uKCksZS5nZXREaW1lbnNpb24oKSl9LElyLmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0LmdldEVudmVsb3BlSW50ZXJuYWwoKS5jb250YWlucyhlLmdldEVudmVsb3BlSW50ZXJuYWwoKSkmJih0LmlzUmVjdGFuZ2xlKCk/YnIuY29udGFpbnModCxlKTpJci5yZWxhdGUodCxlKS5pc0NvbnRhaW5zKCkpfSxUcihPci5wcm90b3R5cGUse2dldEludGVyaW9yUG9pbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlcmlvclBvaW50fSxhZGQ6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEQpe3ZhciB0PWFyZ3VtZW50c1swXTtpZih0IGluc3RhbmNlb2YgRXQpdGhpcy5hZGQodC5nZXRDb29yZGluYXRlKCkpO2Vsc2UgaWYodCBpbnN0YW5jZW9mIGx0KWZvcih2YXIgZT10LG49MDtuPGUuZ2V0TnVtR2VvbWV0cmllcygpO24rKyl0aGlzLmFkZChlLmdldEdlb21ldHJ5TihuKSl9ZWxzZSBpZihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWkuZGlzdGFuY2UodGhpcy5jZW50cm9pZCk7cjx0aGlzLm1pbkRpc3RhbmNlJiYodGhpcy5pbnRlcmlvclBvaW50PW5ldyBoKGkpLHRoaXMubWluRGlzdGFuY2U9cil9fSxpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDbGFzczpmdW5jdGlvbigpe3JldHVybiBPcn19KSxUcihELnByb3RvdHlwZSx7ZXF1YWxzVG9wbzpmdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLmVxdWFscyh0LmdldEVudmVsb3BlSW50ZXJuYWwoKSkmJklyLnJlbGF0ZSh0aGlzLHQpLmlzRXF1YWxzKHRoaXMuZ2V0RGltZW5zaW9uKCksdC5nZXREaW1lbnNpb24oKSl9LHVuaW9uOmZ1bmN0aW9uKCl7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIEJpLnVuaW9uKHRoaXMpO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIGppLnVuaW9uKHRoaXMsdCl9fSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIEpuLmlzVmFsaWQodGhpcyl9LGludGVyc2VjdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmlzRW1wdHkoKXx8dC5pc0VtcHR5KCkpcmV0dXJuIFRpLmNyZWF0ZUVtcHR5UmVzdWx0KFRpLklOVEVSU0VDVElPTix0aGlzLHQsdGhpcy5mYWN0b3J5KTtpZih0aGlzLmlzR2VvbWV0cnlDb2xsZWN0aW9uKCkpe3ZhciBlPXQ7cmV0dXJuIFBlLm1hcCh0aGlzLHtpbnRlcmZhY2VzXzpmdW5jdGlvbigpe3JldHVybltNYXBPcF19LG1hcDpmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnRlcnNlY3Rpb24oZSl9fSl9cmV0dXJuIHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odGhpcyksdGhpcy5jaGVja05vdEdlb21ldHJ5Q29sbGVjdGlvbih0KSxBaS5vdmVybGF5T3AodGhpcyx0LFRpLklOVEVSU0VDVElPTil9LGNvdmVyczpmdW5jdGlvbih0KXtyZXR1cm4gSXIuY292ZXJzKHRoaXMsdCl9LGNvdmVyZWRCeTpmdW5jdGlvbih0KXtyZXR1cm4gSXIuY292ZXJlZEJ5KHRoaXMsdCl9LHRvdWNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuIElyLnRvdWNoZXModGhpcyx0KX0saW50ZXJzZWN0czpmdW5jdGlvbih0KXtyZXR1cm4gSXIuaW50ZXJzZWN0cyh0aGlzLHQpfSx3aXRoaW46ZnVuY3Rpb24odCl7cmV0dXJuIElyLndpdGhpbih0aGlzLHQpfSxvdmVybGFwczpmdW5jdGlvbih0KXtyZXR1cm4gSXIub3ZlcmxhcHModGhpcyx0KX0sZGlzam9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIElyLmRpc2pvaW50KHRoaXMsdCl9LGNyb3NzZXM6ZnVuY3Rpb24odCl7cmV0dXJuIElyLmNyb3NzZXModGhpcyx0KX0sYnVmZmVyOmZ1bmN0aW9uKCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciB0PWFyZ3VtZW50c1swXTtyZXR1cm4gZHIuYnVmZmVyT3AodGhpcyx0KX1pZigyPT09YXJndW1lbnRzLmxlbmd0aCl7dmFyIGU9YXJndW1lbnRzWzBdLG49YXJndW1lbnRzWzFdO3JldHVybiBkci5idWZmZXJPcCh0aGlzLGUsbil9aWYoMz09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBpPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXSxvPWFyZ3VtZW50c1syXTtyZXR1cm4gZHIuYnVmZmVyT3AodGhpcyxpLHIsbyl9fSxjb252ZXhIdWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBncih0aGlzKS5nZXRDb252ZXhIdWxsKCl9LHJlbGF0ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIElyLnJlbGF0ZS5hcHBseShJcixbdGhpc10uY29uY2F0KGUpKX0sZ2V0Q2VudHJvaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdGhpcy5mYWN0b3J5LmNyZWF0ZVBvaW50KCk7dmFyIHQ9bXIuZ2V0Q2VudHJvaWQodGhpcyk7cmV0dXJuIHRoaXMuY3JlYXRlUG9pbnRGcm9tSW50ZXJuYWxDb29yZCh0LHRoaXMpfSxnZXRJbnRlcmlvclBvaW50OmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuZmFjdG9yeS5jcmVhdGVQb2ludCgpO3ZhciB0PW51bGwsZT10aGlzLmdldERpbWVuc2lvbigpO2lmKDA9PT1lKXt2YXIgbj1uZXcgT3IodGhpcyk7dD1uLmdldEludGVyaW9yUG9pbnQoKX1lbHNlIGlmKDE9PT1lKXt2YXIgbj1uZXcgVWkodGhpcyk7dD1uLmdldEludGVyaW9yUG9pbnQoKX1lbHNle3ZhciBuPW5ldyBMaSh0aGlzKTt0PW4uZ2V0SW50ZXJpb3JQb2ludCgpfXJldHVybiB0aGlzLmNyZWF0ZVBvaW50RnJvbUludGVybmFsQ29vcmQodCx0aGlzKX0sc3ltRGlmZmVyZW5jZTpmdW5jdGlvbih0KXtpZih0aGlzLmlzRW1wdHkoKXx8dC5pc0VtcHR5KCkpe2lmKHRoaXMuaXNFbXB0eSgpJiZ0LmlzRW1wdHkoKSlyZXR1cm4gVGkuY3JlYXRlRW1wdHlSZXN1bHQoVGkuU1lNRElGRkVSRU5DRSx0aGlzLHQsdGhpcy5mYWN0b3J5KTtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gdC5jb3B5KCk7aWYodC5pc0VtcHR5KCkpcmV0dXJuIHRoaXMuY29weSgpfXJldHVybiB0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpLHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksQWkub3ZlcmxheU9wKHRoaXMsdCxUaS5TWU1ESUZGRVJFTkNFKX0sY3JlYXRlUG9pbnRGcm9tSW50ZXJuYWxDb29yZDpmdW5jdGlvbih0LGUpe3JldHVybiBlLmdldFByZWNpc2lvbk1vZGVsKCkubWFrZVByZWNpc2UodCksZS5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQodCl9LHRvVGV4dDpmdW5jdGlvbigpe3JldHVybihuZXcgZWUpLndyaXRlKHRoaXMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3RoaXMudG9UZXh0KCl9LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3JldHVybiBJci5jb250YWlucyh0aGlzLHQpfSxkaWZmZXJlbmNlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzRW1wdHkoKT9UaS5jcmVhdGVFbXB0eVJlc3VsdChUaS5ESUZGRVJFTkNFLHRoaXMsdCx0aGlzLmZhY3RvcnkpOnQuaXNFbXB0eSgpP3RoaXMuY29weSgpOih0aGlzLmNoZWNrTm90R2VvbWV0cnlDb2xsZWN0aW9uKHRoaXMpLHRoaXMuY2hlY2tOb3RHZW9tZXRyeUNvbGxlY3Rpb24odCksQWkub3ZlcmxheU9wKHRoaXMsdCxUaS5ESUZGRVJFTkNFKSl9LGlzU2ltcGxlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB6aSh0aGlzKS5pc1NpbXBsZSgpfSxpc1dpdGhpbkRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuISh0aGlzLmdldEVudmVsb3BlSW50ZXJuYWwoKS5kaXN0YW5jZSh0LmdldEVudmVsb3BlSW50ZXJuYWwoKSk+ZSkmJlRlLmlzV2l0aGluRGlzdGFuY2UodGhpcyx0LGUpfSxkaXN0YW5jZTpmdW5jdGlvbih0KXtyZXR1cm4gVGUuZGlzdGFuY2UodGhpcyx0KX0saXNFcXVpdmFsZW50Q2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0Q2xhc3MoKT09PXQuZ2V0Q2xhc3MoKX19KSx0LnZlcnNpb249XCIxLjQuMCAoMWJhNWY0ZSlcIix0Lmdlb209VnIsdC5pbmRleD1Icix0LmlvPVpyLHQub3BlcmF0aW9uPVFyLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGE9bigzOCkscz1pKGEpLHU9bigxMjApLGw9aSh1KSxjPW4oMTUpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cih0aGlzLHQpLHRoaXMuX2VtaXR0ZXI9bmV3IHMuZGVmYXVsdCx0aGlzLmlkPWwuZGVmYXVsdC5nZW5lcmF0ZSgpfXJldHVybiBvKHQsW3trZXk6XCJvblwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtpZihlLmxlbmd0aDwyKXJldHVybiB0aGlzO2Zvcih2YXIgaT1lLnBvcCgpLHI9ZSxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7dGhpcy5fZW1pdHRlci5vbih1LGkpfXJldHVybiB0aGlzfX0se2tleTpcIm9uY2VcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07aWYoZS5sZW5ndGg8MilyZXR1cm4gdGhpcztmb3IodmFyIGk9ZS5wb3AoKSxyPWUsbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgdT1zO3RoaXMuX2VtaXR0ZXIub25jZSh1LGkpfXJldHVybiB0aGlzfX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtpZihlLmxlbmd0aDwyKXJldHVybiB0aGlzO2Zvcih2YXIgaT1lLnBvcCgpLHI9ZSxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7dGhpcy5fZW1pdHRlci5vZmYodSxpKX1yZXR1cm4gdGhpc319LHtrZXk6XCJlbWl0XCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KG4+MT9uLTE6MCkscj0xO3I8bjtyKyspaVtyLTFdPWFyZ3VtZW50c1tyXTtyZXR1cm4oZT10aGlzLl9lbWl0dGVyKS5lbWl0LmFwcGx5KGUsW3RdLmNvbmNhdChpKSksdGhpc319LHtrZXk6XCJwbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQsZT0vQW5kcm9pZC9pLnRlc3QodCksbj0vQmxhY2tCZXJyeS9pLnRlc3QodCksaT0vSUVNb2JpbGUvaS50ZXN0KHQpLHI9L2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KHQpLG89ZXx8bnx8aXx8cjtyZXR1cm4gcj9jLlBsYXRmb3JtLmlPUzplP2MuUGxhdGZvcm0uQW5kcm9pZDpuP2MuUGxhdGZvcm0uQmxhY2tCZXJyeTppP2MuUGxhdGZvcm0uV2luZG93UGhvbmU6bz9jLlBsYXRmb3JtLm90aGVyOmMuUGxhdGZvcm0uUEN9fSx7a2V5OlwiZmlyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49QXJyYXkoZT4xP2UtMTowKSxpPTE7aTxlO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3JldHVybiB0aGlzLmVtaXQuYXBwbHkodGhpcyxbdF0uY29uY2F0KG4pKX19LHtrZXk6XCJsaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZW1pdHRlci5saXN0ZW5lcnModCl9fSx7a2V5OlwiaGFzTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2VtaXR0ZXIuaGFzTGlzdGVuZXJzKHQpfX0se2tleTpcImlkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faWQ9dH19XSksdH0oKTtlLmRlZmF1bHQ9aH0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9dm9pZCAwLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpfXJldHVybiBpKHQsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9wcm92aWRlci51cGRhdGUodCl9fSx7a2V5Olwib2ZOdW1iZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O3JldHVybih0PXRoaXMuX3Byb3ZpZGVyKS5vZk51bWJlci5hcHBseSh0LGFyZ3VtZW50cyl9fSx7a2V5Olwib2ZPYmplY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0O3JldHVybih0PXRoaXMuX3Byb3ZpZGVyKS5vZk9iamVjdC5hcHBseSh0LGFyZ3VtZW50cyl9fSx7a2V5OlwicHJvdmlkZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvdmlkZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wcm92aWRlcj10fX1dLFt7a2V5OlwiZ2V0SW5zdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiByfHwocj1uZXcgdCkscn19XSksdH0oKTtlLmRlZmF1bHQ9b30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuRE9NVXRpbHM9dm9pZCAwO3ZhciByPW4oNDcpLG89aShyKTtlLkRPTVV0aWxzPW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLG89big0KSxhPW5ldyBvLmdlb20uR2VvbWV0cnlGYWN0b3J5LHM9bmV3IG8uaW8uR2VvSlNPTlJlYWRlcihhKSx1PW5ldyBvLmlvLkdlb0pTT05Xcml0ZXIsbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtpKHRoaXMsdCl9cmV0dXJuIHIodCxudWxsLFt7a2V5OlwiZ2V0RmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSx7a2V5OlwiZ2V0R2VvUmVhZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gc319LHtrZXk6XCJnZXRHZW9Xcml0ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB1fX0se2tleTpcImdldExvbmdFZGdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtpZighdClyZXR1cm4gZTt2YXIgbj10LmdldEdlb21ldHJ5VHlwZSgpO2lmKFwiUG9seWdvblwiPT09bilmb3IodmFyIGk9dC5nZXRFeHRlcmlvclJpbmcoKSxyPWkuZ2V0Q29vcmRpbmF0ZXMoKSxhPTAscz0xO3M8ci5sZW5ndGg7cysrKXt2YXIgdT1uZXcgby5nZW9tLkxpbmVTZWdtZW50KHJbcy0xXSxyW3NdKSxsPXUuZ2V0TGVuZ3RoKCk7YTxsJiYoZT11LGE9bCl9cmV0dXJuIGV9fV0pLHR9KCk7ZS5kZWZhdWx0PWx9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlJlc3BvbnNlPWUuUmVxdWVzdD1lLkhlYWRlcnM9dm9pZCAwO3ZhciByPW4oNzcpLG89aShyKSxhPW4oMjApLHM9aShhKSx1PW4oNDApLGw9aSh1KSxjPW4oNDEpLGg9aShjKSxmPW4oNzgpLGQ9aShmKTtvLmRlZmF1bHQuaGVscGVyPXt0aW1lb3V0OmQuZGVmYXVsdH0sZS5kZWZhdWx0PW8uZGVmYXVsdCxlLkhlYWRlcnM9cy5kZWZhdWx0LGUuUmVxdWVzdD1sLmRlZmF1bHQsZS5SZXNwb25zZT1oLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKCl7cih0aGlzLG8pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMSksbz17dHlwZTpmdW5jdGlvbigpe3JldHVyblwiZGVmYXVsdFwifSxtYXJnaW46MH07ZS5kZWZhdWx0PWl9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9big1KSxjPWkobCksaD1uKDE5KSxmPWkoaCksZD1uKDMpLHA9big3KSxnPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKHIodGhpcyxlKSwhdCl0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sOiBJbnZhbGlkIG5hbWVcIik7dmFyIGk9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gaS5fb3B0aW9ucz1zKHtwb3NpdGlvbjpcImJvdHRvbWxlZnRcIn0sbiksaS5fbmFtZT10LGkuX2VsZW1lbnQ9aS5fb3B0aW9ucy5lbGVtZW50LGkuX2NvbnRhaW5lcj1udWxsLGkuX21hcD1udWxsLGkuX25lZWRBcHBlbmQ9ITAsaS5fZWxlbWVudCYmKGkuX25lZWRBcHBlbmQ9ITEpLGkuX29wdGlvbnMuY29udGFpbmVyJiZpLnNldENvbnRhaW5lcihuLmNvbnRhaW5lciksaX1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcInNldENvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jb250YWluZXI9KDAsZC5pc1N0cmluZykodCk/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk6dCx0aGlzfX0se2tleTpcImdldENvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn19LHtrZXk6XCJnZXRNYXBcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXB9fSx7a2V5OlwiYWRkVG9cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGYuZGVmYXVsdD90LmFkZERvbUNvbnRyb2wodGhpcyk6Y29uc29sZS53YXJuKFwiYWRkVG86IEludmFsaWQgbWFwXCIpLHRoaXN9fSx7a2V5OlwicmVtb3ZlRnJvbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0PT09dGhpcy5fbWFwJiZ0LnJlbW92ZURvbUNvbnRyb2wodGhpcyksdGhpc319LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXN9fSx7a2V5OlwiZGlzcGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwiYmxvY2tcIjtyZXR1cm4gdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5PXQsdGhpc319LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319LHtrZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0se2tleTpcIl9vbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX29wdGlvbnMucG9zaXRpb247aWYodGhpcy5lbWl0KFwiYWRkXCIsdGhpcyksdGhpcy5fbWFwPXQsdC5jb250cm9sRG9tJiYhdGhpcy5fY29udGFpbmVyKXt2YXIgbj10LmNvbnRyb2xDb3JuZXJzW2VdLGk9dm9pZCAwLHI9dm9pZCAwO2lmKG4paT1cIm5nci1jb250cm9sXCIscj1uO2Vsc2V7aWYoXCJjdXN0b21cIiE9PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb250cm9sIHBvc2l0aW9uXCIpO2k9XCJuZ3ItY3VzdG9tLWNvbnRyb2xcIixyPXQuY29udHJvbERvbX1wLkRPTVV0aWxzLmFkZENsYXNzKHRoaXMuX2VsZW1lbnQsaSksdGhpcy5zZXRDb250YWluZXIocil9cmV0dXJuIHRoaXMuX25lZWRBcHBlbmQmJihlLmluZGV4T2YoXCJib3R0b21cIikhPT0tMT90aGlzLl9jb250YWluZXIuaW5zZXJ0QmVmb3JlKHRoaXMuX2VsZW1lbnQsdGhpcy5fY29udGFpbmVyLmZpcnN0Q2hpbGQpOnRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KSksdGhpc319LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbWl0KFwicmVtb3ZlXCIsdGhpcyksdGhpcy5fbWFwPW51bGwsdGhpcy5fbmVlZEFwcGVuZCYmKHRoaXMuX2NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9lbGVtZW50KSx0aGlzLl9jb250YWluZXI9bnVsbCksdGhpc319LHtrZXk6XCJfcmVmb2N1c09uTWFwXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwJiZ0aGlzLl9tYXAudGFyZ2V0RG9tLmZvY3VzKCksdGhpc319LHtrZXk6XCJlbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnR9fV0pLGV9KGMuZGVmYXVsdCk7ZS5kZWZhdWx0PWd9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTtlLmRldlNlcnZlckhvc3Q9XCJodHRwOi8vbG9jYWxob3N0XCIsZS5ibHVlVmVyc2lvbj1cIjIuMFwiLGUuc3VwcG9ydFBhcnRpY2xlPSExLGUuZW5hYmxlUXVhZFRyZWU9ITEsZS5pc0Rldj0hMSxlLmlzUHJvZD0hMCxlLmlzTGl0ZT0hMSxlLnRvdWNoRW11bGF0b3I9ITF9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KX1yZXR1cm4gaSh0LG51bGwsW3trZXk6XCJwYXJzZUNvbG9yXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MTY3NzcyMTU7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/ZT1NYXRoLmZsb29yKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0P2U9cGFyc2VJbnQodCwxNik6Y29uc29sZS53YXJuKFwiVW5rbm93biBDb2xvclwiLHQpLGV9fSx7a2V5OlwiY29udmVyVG9TaGFycFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQ7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQmJihlPWUucmVwbGFjZShcIjB4XCIsXCIjXCIpKSxlfX0se2tleTpcInBhcnNlU3RyaW5nQ29sb3JcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0xNjc3NzIxNTtpZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gY29uc29sZS53YXJuKFwiSW52YWxpZCBTdHJpbmdcIiksZTt2YXIgbj0vXlxcIyhbQS1GYS1mMC05XSspJC8uZXhlYyh0KTtpZihuKXt2YXIgaT1uWzFdLHI9aS5sZW5ndGg7aWYoMz09PXIpe3ZhciBvPWkuY2hhckF0KDApK2kuY2hhckF0KDApK2kuY2hhckF0KDEpK2kuY2hhckF0KDEpK2kuY2hhckF0KDIpK2kuY2hhckF0KDIpO2U9cGFyc2VJbnQobywxNil9ZWxzZSA2PT09cj9lPXBhcnNlSW50KHQsMTYpOmNvbnNvbGUud2FybihcIlVua25vd24gQ29sb3JcIix0KX1lbHNlIGNvbnNvbGUud2FybihcIlVua25vd24gQ29sb3JcIix0KTtyZXR1cm4gZX19XSksdH0oKTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbihlLGkpey8qIVxuXHQgKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG5cdCAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG5cdCAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2Vcblx0ICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDQuMS4xXG5cdCAqL1xuIWZ1bmN0aW9uKGUsbil7dC5leHBvcnRzPW4oKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7dmFyIGU9dHlwZW9mIHQ7cmV0dXJuIG51bGwhPT10JiYoXCJvYmplY3RcIj09PWV8fFwiZnVuY3Rpb25cIj09PWUpfWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdH1mdW5jdGlvbiBvKHQpe1o9dH1mdW5jdGlvbiBhKHQpe0o9dH1mdW5jdGlvbiBzKCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUubmV4dFRpY2soZil9fWZ1bmN0aW9uIHUoKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgVz9mdW5jdGlvbigpe1coZil9OmgoKX1mdW5jdGlvbiBsKCl7dmFyIHQ9MCxlPW5ldyAkKGYpLG49ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7cmV0dXJuIGUub2JzZXJ2ZShuLHtjaGFyYWN0ZXJEYXRhOiEwfSksZnVuY3Rpb24oKXtuLmRhdGE9dD0rK3QlMn19ZnVuY3Rpb24gYygpe3ZhciB0PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gdC5wb3J0MS5vbm1lc3NhZ2U9ZixmdW5jdGlvbigpe3JldHVybiB0LnBvcnQyLnBvc3RNZXNzYWdlKDApfX1mdW5jdGlvbiBoKCl7dmFyIHQ9c2V0VGltZW91dDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdChmLDEpfX1mdW5jdGlvbiBmKCl7Zm9yKHZhciB0PTA7dDxZO3QrPTIpe3ZhciBlPW50W3RdLG49bnRbdCsxXTtlKG4pLG50W3RdPXZvaWQgMCxudFt0KzFdPXZvaWQgMH1ZPTB9ZnVuY3Rpb24gZCgpe3RyeXt2YXIgdD1uKDIxNik7cmV0dXJuIFc9dC5ydW5Pbkxvb3B8fHQucnVuT25Db250ZXh0LHUoKX1jYXRjaCh0KXtyZXR1cm4gaCgpfX1mdW5jdGlvbiBwKHQsZSl7dmFyIG49YXJndW1lbnRzLGk9dGhpcyxyPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHYpO3ZvaWQgMD09PXJbcnRdJiZSKHIpO3ZhciBvPWkuX3N0YXRlO3JldHVybiBvPyFmdW5jdGlvbigpe3ZhciB0PW5bby0xXTtKKGZ1bmN0aW9uKCl7cmV0dXJuIEwobyxyLHQsaS5fcmVzdWx0KX0pfSgpOk8oaSxyLHQsZSkscn1mdW5jdGlvbiBnKHQpe3ZhciBlPXRoaXM7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I9PT1lKXJldHVybiB0O3ZhciBuPW5ldyBlKHYpO3JldHVybiBTKG4sdCksbn1mdW5jdGlvbiB2KCl7fWZ1bmN0aW9uIG0oKXtyZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIil9ZnVuY3Rpb24geSgpe3JldHVybiBuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLlwiKX1mdW5jdGlvbiBfKHQpe3RyeXtyZXR1cm4gdC50aGVufWNhdGNoKHQpe3JldHVybiB1dC5lcnJvcj10LHV0fX1mdW5jdGlvbiBiKHQsZSxuLGkpe3RyeXt0LmNhbGwoZSxuLGkpfWNhdGNoKHQpe3JldHVybiB0fX1mdW5jdGlvbiB4KHQsZSxuKXtKKGZ1bmN0aW9uKHQpe3ZhciBpPSExLHI9YihuLGUsZnVuY3Rpb24obil7aXx8KGk9ITAsZSE9PW4/Uyh0LG4pOkModCxuKSl9LGZ1bmN0aW9uKGUpe2l8fChpPSEwLEkodCxlKSl9LFwiU2V0dGxlOiBcIisodC5fbGFiZWx8fFwiIHVua25vd24gcHJvbWlzZVwiKSk7IWkmJnImJihpPSEwLEkodCxyKSl9LHQpfWZ1bmN0aW9uIHcodCxlKXtlLl9zdGF0ZT09PWF0P0ModCxlLl9yZXN1bHQpOmUuX3N0YXRlPT09c3Q/SSh0LGUuX3Jlc3VsdCk6TyhlLHZvaWQgMCxmdW5jdGlvbihlKXtyZXR1cm4gUyh0LGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gSSh0LGUpfSl9ZnVuY3Rpb24gRSh0LGUsbil7ZS5jb25zdHJ1Y3Rvcj09PXQuY29uc3RydWN0b3ImJm49PT1wJiZlLmNvbnN0cnVjdG9yLnJlc29sdmU9PT1nP3codCxlKTpuPT09dXQ/KEkodCx1dC5lcnJvciksdXQuZXJyb3I9bnVsbCk6dm9pZCAwPT09bj9DKHQsZSk6cihuKT94KHQsZSxuKTpDKHQsZSl9ZnVuY3Rpb24gUyhlLG4pe2U9PT1uP0koZSxtKCkpOnQobik/RShlLG4sXyhuKSk6QyhlLG4pfWZ1bmN0aW9uIE0odCl7dC5fb25lcnJvciYmdC5fb25lcnJvcih0Ll9yZXN1bHQpLFQodCl9ZnVuY3Rpb24gQyh0LGUpe3QuX3N0YXRlPT09b3QmJih0Ll9yZXN1bHQ9ZSx0Ll9zdGF0ZT1hdCwwIT09dC5fc3Vic2NyaWJlcnMubGVuZ3RoJiZKKFQsdCkpfWZ1bmN0aW9uIEkodCxlKXt0Ll9zdGF0ZT09PW90JiYodC5fc3RhdGU9c3QsdC5fcmVzdWx0PWUsSihNLHQpKX1mdW5jdGlvbiBPKHQsZSxuLGkpe3ZhciByPXQuX3N1YnNjcmliZXJzLG89ci5sZW5ndGg7dC5fb25lcnJvcj1udWxsLHJbb109ZSxyW28rYXRdPW4scltvK3N0XT1pLDA9PT1vJiZ0Ll9zdGF0ZSYmSihULHQpfWZ1bmN0aW9uIFQodCl7dmFyIGU9dC5fc3Vic2NyaWJlcnMsbj10Ll9zdGF0ZTtpZigwIT09ZS5sZW5ndGgpe2Zvcih2YXIgaT12b2lkIDAscj12b2lkIDAsbz10Ll9yZXN1bHQsYT0wO2E8ZS5sZW5ndGg7YSs9MylpPWVbYV0scj1lW2Erbl0saT9MKG4saSxyLG8pOnIobyk7dC5fc3Vic2NyaWJlcnMubGVuZ3RoPTB9fWZ1bmN0aW9uIFAoKXt0aGlzLmVycm9yPW51bGx9ZnVuY3Rpb24gQSh0LGUpe3RyeXtyZXR1cm4gdChlKX1jYXRjaCh0KXtyZXR1cm4gbHQuZXJyb3I9dCxsdH19ZnVuY3Rpb24gTCh0LGUsbixpKXt2YXIgbz1yKG4pLGE9dm9pZCAwLHM9dm9pZCAwLHU9dm9pZCAwLGw9dm9pZCAwO2lmKG8pe2lmKGE9QShuLGkpLGE9PT1sdD8obD0hMCxzPWEuZXJyb3IsYS5lcnJvcj1udWxsKTp1PSEwLGU9PT1hKXJldHVybiB2b2lkIEkoZSx5KCkpfWVsc2UgYT1pLHU9ITA7ZS5fc3RhdGUhPT1vdHx8KG8mJnU/UyhlLGEpOmw/SShlLHMpOnQ9PT1hdD9DKGUsYSk6dD09PXN0JiZJKGUsYSkpfWZ1bmN0aW9uIE4odCxlKXt0cnl7ZShmdW5jdGlvbihlKXtTKHQsZSl9LGZ1bmN0aW9uKGUpe0kodCxlKX0pfWNhdGNoKGUpe0kodCxlKX19ZnVuY3Rpb24gaygpe3JldHVybiBjdCsrfWZ1bmN0aW9uIFIodCl7dFtydF09Y3QrKyx0Ll9zdGF0ZT12b2lkIDAsdC5fcmVzdWx0PXZvaWQgMCx0Ll9zdWJzY3JpYmVycz1bXX1mdW5jdGlvbiBEKHQsZSl7dGhpcy5faW5zdGFuY2VDb25zdHJ1Y3Rvcj10LHRoaXMucHJvbWlzZT1uZXcgdCh2KSx0aGlzLnByb21pc2VbcnRdfHxSKHRoaXMucHJvbWlzZSkscShlKT8odGhpcy5sZW5ndGg9ZS5sZW5ndGgsdGhpcy5fcmVtYWluaW5nPWUubGVuZ3RoLHRoaXMuX3Jlc3VsdD1uZXcgQXJyYXkodGhpcy5sZW5ndGgpLDA9PT10aGlzLmxlbmd0aD9DKHRoaXMucHJvbWlzZSx0aGlzLl9yZXN1bHQpOih0aGlzLmxlbmd0aD10aGlzLmxlbmd0aHx8MCx0aGlzLl9lbnVtZXJhdGUoZSksMD09PXRoaXMuX3JlbWFpbmluZyYmQyh0aGlzLnByb21pc2UsdGhpcy5fcmVzdWx0KSkpOkkodGhpcy5wcm9taXNlLEYoKSl9ZnVuY3Rpb24gRigpe3JldHVybiBuZXcgRXJyb3IoXCJBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXlcIil9ZnVuY3Rpb24gQih0KXtyZXR1cm4gbmV3IEQodGhpcyx0KS5wcm9taXNlfWZ1bmN0aW9uIGoodCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGUocSh0KT9mdW5jdGlvbihuLGkpe2Zvcih2YXIgcj10Lmxlbmd0aCxvPTA7bzxyO28rKyllLnJlc29sdmUodFtvXSkudGhlbihuLGkpfTpmdW5jdGlvbih0LGUpe3JldHVybiBlKG5ldyBUeXBlRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuXCIpKX0pfWZ1bmN0aW9uIFUodCl7dmFyIGU9dGhpcyxuPW5ldyBlKHYpO3JldHVybiBJKG4sdCksbn1mdW5jdGlvbiB6KCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3JcIil9ZnVuY3Rpb24gRygpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIil9ZnVuY3Rpb24gVih0KXt0aGlzW3J0XT1rKCksdGhpcy5fcmVzdWx0PXRoaXMuX3N0YXRlPXZvaWQgMCx0aGlzLl9zdWJzY3JpYmVycz1bXSx2IT09dCYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJnooKSx0aGlzIGluc3RhbmNlb2YgVj9OKHRoaXMsdCk6RygpKX1mdW5jdGlvbiBYKCl7dmFyIHQ9dm9pZCAwO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBpKXQ9aTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmKXQ9c2VsZjtlbHNlIHRyeXt0PUZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoXCJwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnRcIil9dmFyIGU9dC5Qcm9taXNlO2lmKGUpe3ZhciBuPW51bGw7dHJ5e249T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUucmVzb2x2ZSgpKX1jYXRjaCh0KXt9aWYoXCJbb2JqZWN0IFByb21pc2VdXCI9PT1uJiYhZS5jYXN0KXJldHVybn10LlByb21pc2U9Vn12YXIgSD12b2lkIDA7SD1BcnJheS5pc0FycmF5P0FycmF5LmlzQXJyYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfTt2YXIgcT1ILFk9MCxXPXZvaWQgMCxaPXZvaWQgMCxKPWZ1bmN0aW9uKHQsZSl7bnRbWV09dCxudFtZKzFdPWUsWSs9MiwyPT09WSYmKFo/WihmKTppdCgpKX0sSz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAsUT1LfHx7fSwkPVEuTXV0YXRpb25PYnNlcnZlcnx8US5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHR0PVwidW5kZWZpbmVkXCI9PXR5cGVvZiBzZWxmJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKGUpLGV0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGltcG9ydFNjcmlwdHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBNZXNzYWdlQ2hhbm5lbCxudD1uZXcgQXJyYXkoMWUzKSxpdD12b2lkIDA7aXQ9dHQ/cygpOiQ/bCgpOmV0P2MoKTp2b2lkIDA9PT1LP2QoKTpoKCk7dmFyIHJ0PU1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNiksb3Q9dm9pZCAwLGF0PTEsc3Q9Mix1dD1uZXcgUCxsdD1uZXcgUCxjdD0wO3JldHVybiBELnByb3RvdHlwZS5fZW51bWVyYXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO3RoaXMuX3N0YXRlPT09b3QmJmU8dC5sZW5ndGg7ZSsrKXRoaXMuX2VhY2hFbnRyeSh0W2VdLGUpfSxELnByb3RvdHlwZS5fZWFjaEVudHJ5PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcixpPW4ucmVzb2x2ZTtpZihpPT09Zyl7dmFyIHI9Xyh0KTtpZihyPT09cCYmdC5fc3RhdGUhPT1vdCl0aGlzLl9zZXR0bGVkQXQodC5fc3RhdGUsZSx0Ll9yZXN1bHQpO2Vsc2UgaWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygcil0aGlzLl9yZW1haW5pbmctLSx0aGlzLl9yZXN1bHRbZV09dDtlbHNlIGlmKG49PT1WKXt2YXIgbz1uZXcgbih2KTtFKG8sdCxyKSx0aGlzLl93aWxsU2V0dGxlQXQobyxlKX1lbHNlIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgbihmdW5jdGlvbihlKXtyZXR1cm4gZSh0KX0pLGUpfWVsc2UgdGhpcy5fd2lsbFNldHRsZUF0KGkodCksZSl9LEQucHJvdG90eXBlLl9zZXR0bGVkQXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMucHJvbWlzZTtpLl9zdGF0ZT09PW90JiYodGhpcy5fcmVtYWluaW5nLS0sdD09PXN0P0koaSxuKTp0aGlzLl9yZXN1bHRbZV09biksMD09PXRoaXMuX3JlbWFpbmluZyYmQyhpLHRoaXMuX3Jlc3VsdCl9LEQucHJvdG90eXBlLl93aWxsU2V0dGxlQXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO08odCx2b2lkIDAsZnVuY3Rpb24odCl7cmV0dXJuIG4uX3NldHRsZWRBdChhdCxlLHQpfSxmdW5jdGlvbih0KXtyZXR1cm4gbi5fc2V0dGxlZEF0KHN0LGUsdCl9KX0sVi5hbGw9QixWLnJhY2U9aixWLnJlc29sdmU9ZyxWLnJlamVjdD1VLFYuX3NldFNjaGVkdWxlcj1vLFYuX3NldEFzYXA9YSxWLl9hc2FwPUosVi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlYsdGhlbjpwLGNhdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4obnVsbCx0KX19LFYucG9seWZpbGw9WCxWLlByb21pc2U9VixWfSl9KS5jYWxsKGUsbig3MiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49e1NjcmVlbjoxLFdvcmxkOjIsV0dTODQ6M30saT17aU9TOjEsQW5kcm9pZDoyLEJsYWNrQmVycnk6MyxXaW5kb3dQaG9uZTo0LFBDOjUsb3RoZXI6MH07ZS5QbGF0Zm9ybT1pLGUuQ29vcmRUeXBlPW59LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLG89bigzKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpKHRoaXMsdCksdGhpcy5uYW1lPWUsdGhpcy5mZWF0dXJlcz1bXSx0aGlzLl9mZWF0dXJlTWFwPXt9fXJldHVybiByKHQsW3trZXk6XCJfc2V0RmVhdHVyZVBhcmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5wYXJlbnQ9dH0pLHRoaXN9fSx7a2V5OlwiZm9yRWFjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp0aGlzO3JldHVybigwLG8uaXNBcnJheSkodGhpcy5mZWF0dXJlcykmJnRoaXMuZmVhdHVyZXMuZm9yRWFjaCh0LGUpLHRoaXN9fSx7a2V5OlwiYWRkRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuaWQ7aWYoKDAsby5pc0JsYW5rKSh0LmlkKSlyZXR1cm4gY29uc29sZS53YXJuKFwiSW52YWxpZCBmZWF0dXJlXCIpLHRoaXM7aWYodGhpcy5fZmVhdHVyZU1hcFtlXSlyZXR1cm4gY29uc29sZS53YXJuKFwiRmVhdHVyZSBpcyBleGlzdGVkXCIpLHRoaXM7dmFyIG49dGhpcy5mZWF0dXJlcy5wdXNoKHQpO3JldHVybiB0LnBhcmVudD10aGlzLnBhcmVudCx0aGlzLl9mZWF0dXJlTWFwW3QuaWRdPW4tMSx0aGlzfX0se2tleTpcInVwZGF0ZUZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmlkLG49dGhpcy5fZmVhdHVyZU1hcFtlXTtyZXR1cm4gbj4tMSYmKHRoaXMuZmVhdHVyZXNbbl09dCx0LnBhcmVudD10aGlzLnBhcmVudCksdGhpc319LHtrZXk6XCJfcmVtb3ZlRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoZT4tMSl7dGhpcy5mZWF0dXJlc1tlXS5wYXJlbnQ9bnVsbCx0aGlzLmZlYXR1cmVzLnNwbGljZShlLDEpLGRlbGV0ZSB0aGlzLl9mZWF0dXJlTWFwW3RdO2Zvcih2YXIgbiBpbiB0aGlzLl9mZWF0dXJlTWFwKXRoaXMuX2ZlYXR1cmVNYXBbbl0+ZSYmKHRoaXMuX2ZlYXR1cmVNYW5bbl0tPTEpfXJldHVybiB0aGlzfX0se2tleTpcInJlbW92ZUZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZW1vdmVGZWF0dXJlQnlJZCh0LmlkKSx0aGlzfX0se2tleTpcInJlbW92ZUZlYXR1cmVCeUlkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmVhdHVyZU1hcFt0XTtyZXR1cm4gdGhpcy5fcmVtb3ZlRmVhdHVyZSh0LGUpLHRoaXN9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiYodC5pZCBpbiB0aGlzLl9mZWF0dXJlTWFwfHx0aGlzLl9mZWF0dXJlcy5pbmRleE9mKHQpIT09LTEpfX0se2tleTpcImdldEZlYXR1cmVCeUlkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmVhdHVyZU1hcFt0XTtyZXR1cm4gZT4tMT90aGlzLmZlYXR1cmVzW2VdOm51bGx9fSx7a2V5OlwiZ2V0RmVhdHVyZUNvdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmVhdHVyZXMubGVuZ3RofX0se2tleTpcImNvcHlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPW5ldyB0KHRoaXMubmFtZSksbj10aGlzLmZlYXR1cmVzO3JldHVybiBlLmZlYXR1cmVzPW4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvcHkoKX0pLGV9fSx7a2V5OlwibmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYW1lfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbmFtZT10fX0se2tleTpcImZlYXR1cmVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVzfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fc2V0RmVhdHVyZVBhcmVudChudWxsKSx0aGlzLl9mZWF0dXJlcz1bXSwoMCxvLmlzQXJyYXkpKHQpKXt0aGlzLl9mZWF0dXJlTWFwPXt9O2Zvcih2YXIgZSBpbiB0KXt2YXIgbj10W2VdOygwLG8uaXNCbGFuaykobi5pZCk/Y29uc29sZS53YXJuKFwiSW52YWxpZCBmZWF0dXJlXCIpOnRoaXMuX2ZlYXR1cmVNYXBbbi5pZF0/Y29uc29sZS53YXJuKFwiRmVhdHVyZSBpcyBleGlzdGVkXCIpOih0LnBhcmVudD10aGlzLnBhcmVudCx0aGlzLl9mZWF0dXJlTWFwW3QuaWRdPXRoaXMuX2ZlYXR1cmVzLnB1c2gobiktMSl9fX19LHtrZXk6XCJwYXJlbnRcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2V0RmVhdHVyZVBhcmVudCh0KSx0aGlzLl9wYXJlbnQ9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcmVudH19XSksdH0oKTtlLmRlZmF1bHQ9YX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNSksbD1pKHUpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbi5fc2NlbmVzPXt9LG4uaWQ9dCxuLl9zY2VuZU1hbmFnZXI9bnVsbCxuLnZpc2libGU9ITAsbn1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcIm9uQWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fc2NlbmVNYW5hZ2VyPXQ7Zm9yKHZhciBlIGluIHRoaXMuX3NjZW5lcyl0aGlzLl9zY2VuZU1hbmFnZXIuYWRkU2NlbmUodGhpcy5fc2NlbmVzW2VdKX19LHtrZXk6XCJvblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLl9zY2VuZXMpdGhpcy5fc2NlbmVNYW5hZ2VyLnJlbW92ZVNjZW5lKHRoaXMuX3NjZW5lc1tlXSk7dGhpcy5fc2NlbmVNYW5hZ2VyPW51bGx9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaWQmJiF0aGlzLmhhcyh0KSYmKHRoaXMuX3NjZW5lc1t0LmlkXT10LHRoaXMuX3NjZW5lTWFuYWdlciYmdGhpcy5fc2NlbmVNYW5hZ2VyLmFkZFNjZW5lKHQpKSx0aGlzfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhcyh0KSYmKGRlbGV0ZSB0aGlzLl9zY2VuZXNbdC5pZF0sdGhpcy5fc2NlbmVNYW5hZ2VyJiZ0aGlzLl9zY2VuZU1hbmFnZXIucmVtb3ZlU2NlbmUodCkpLHRoaXN9fSx7a2V5OlwiZ2V0QUFCQlwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIm1ha2VDb2xsaXNpb25cIix2YWx1ZTpmdW5jdGlvbih0KXt9fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtyZXR1cm4gdGhpcy5oYXModCkmJihlPXRoaXMuX3NjZW5lc1t0XSksZX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIXQmJih0IGluIHRoaXMuX3NjZW5lc3x8dC5pZCBpbiB0aGlzLl9zY2VuZXMpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy52aXNpYmxlKWZvcih2YXIgdCBpbiB0aGlzLl9zY2VuZXMpdGhpcy5fc2NlbmVzW3RdLnJlbmRlcigpfX0se2tleTpcInZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmlzaWJsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Zpc2libGU9dH19LHtrZXk6XCJvcmlnaW5TdHlsZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcmlnaW5TdHlsZT10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZ2luU3R5bGV9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIGEodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuQ0FUeXBlPWUuQ29sbGlzaW9uQW5pbWF0aW9uPXZvaWQgMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9big2KSxsPWkodSksYz1uKDMpLGg9bnVsbCxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2EodGhpcyx0KX1yZXR1cm4gcyh0LFt7a2V5OlwiaGFzQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuITF9fSx7a2V5OlwibWFrZUNvbGxpc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7fX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7fX1dKSx0fSgpLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBhKHRoaXMsZSkscih0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBvKGUsdCksZX0oZikscD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIGEodGhpcyxlKSxyKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIG8oZSx0KSxzKGUsW3trZXk6XCJoYXNBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hMTtpZih0LmNoaWxkcmVuLmxlbmd0aD4wKWZvcih2YXIgbj10LmNoaWxkcmVuLGk9QXJyYXkuaXNBcnJheShuKSxyPTAsbj1pP246bltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIG87aWYoaSl7aWYocj49bi5sZW5ndGgpYnJlYWs7bz1uW3IrK119ZWxzZXtpZihyPW4ubmV4dCgpLHIuZG9uZSlicmVhaztvPXIudmFsdWV9dmFyIGE9bztlPXRoaXMuaGFzQW5pbWF0aW9uKGEpO2JyZWFrfXJldHVybiB0aGlzLl9oYXNPcGFjaXR5KHQpfHxlfX0se2tleTpcIm1ha2VQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYodC5jaGlsZHJlbi5sZW5ndGg+MClmb3IodmFyIGk9dC5jaGlsZHJlbixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7dGhpcy5tYWtlUGFyYW1zKHMsZSxuKX10aGlzLl9oYXNPcGFjaXR5KHQpJiYodC5tYXRlcmlhbC5vcGFjaXR5PWUubnVtKX19LHtrZXk6XCJjb21wbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdmlzaWJsZVNjZW5lKHQsIWUpfX0se2tleTpcIm1ha2VDb2xsaXNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9nZXRPcGFjaXR5KHQpLHI9dm9pZCAwO3JldHVybiBlPyh0LnZpc2libGV8fChpPTApLHI9MCk6cj0oMCxjLmlzTnVtYmVyKSh0LmRlc3RPcGFjaXR5KT90LmRlc3RPcGFjaXR5OnQuY2hpbGRyZW5bMF0mJigwLGMuaXNOdW1iZXIpKHQuY2hpbGRyZW5bMF0uZGVzdE9wYWNpdHkpP3QuY2hpbGRyZW5bMF0uZGVzdE9wYWNpdHk6MSx0LnZpc2libGV8fGkhPT1yfHwodGhpcy5tYWtlUGFyYW1zKHQse251bTowfSxlKSxpPTApLGk9PT1yP251bGw6bC5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZOdW1iZXIoaSxyLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbihpLHIpe24ubWFrZVBhcmFtcyh0LHIsZSl9KS5vbihcInN0YXJ0XCIsZnVuY3Rpb24oKXtuLl92aXNpYmxlU2NlbmUodCwhMCl9KS5vbihcImNvbXBsZXRlXCIsZnVuY3Rpb24oKXtuLm1ha2VQYXJhbXModCx7bnVtOnJ9LGUpLG4uY29tcGxldGUodCxlKX0pLm9uKFwic3RvcFwiLGZ1bmN0aW9uKCl7bi5jb21wbGV0ZSh0LGUpfSkuc3RhcnQoKX19LHtrZXk6XCJyZXNldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuYW5pbWF0aW9uKGguRGVmYXVsdCl9fSx7a2V5OlwiX2dldE9wYWNpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LmNoaWxkcmVuLmxlbmd0aD4wKWZvcih2YXIgZT10LmNoaWxkcmVuLG49QXJyYXkuaXNBcnJheShlKSxpPTAsZT1uP2U6ZVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHI7aWYobil7aWYoaT49ZS5sZW5ndGgpYnJlYWs7cj1lW2krK119ZWxzZXtpZihpPWUubmV4dCgpLGkuZG9uZSlicmVhaztyPWkudmFsdWV9dmFyIG89cjtpZih0aGlzLl9oYXNPcGFjaXR5KG8pKXJldHVybiBvLm1hdGVyaWFsLm9wYWNpdHl9cmV0dXJuIHQubWF0ZXJpYWw/dC5tYXRlcmlhbC5vcGFjaXR5OjB9fSx7a2V5OlwiX3Zpc2libGVTY2VuZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodC5jaGlsZHJlbi5sZW5ndGg+MClmb3IodmFyIG49dC5jaGlsZHJlbixpPUFycmF5LmlzQXJyYXkobikscj0wLG49aT9uOm5bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBvO2lmKGkpe2lmKHI+PW4ubGVuZ3RoKWJyZWFrO289bltyKytdfWVsc2V7aWYocj1uLm5leHQoKSxyLmRvbmUpYnJlYWs7bz1yLnZhbHVlfXZhciBhPW87dGhpcy5fdmlzaWJsZVNjZW5lKGEsZSl9dC52aXNpYmxlPWV9fSx7a2V5OlwiX2hhc09wYWNpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5tYXRlcmlhbCYmKDAsYy5pc051bWJlcikodC5tYXRlcmlhbC5vcGFjaXR5KX19XSksZX0oZik7ZS5DQVR5cGU9aD17RGVmYXVsdDpuZXcgZCxPcGFjaXR5Om5ldyBwfSxlLkNvbGxpc2lvbkFuaW1hdGlvbj1mLGUuQ0FUeXBlPWh9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBhKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gcyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLGk9ITAscj0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBhLHM9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShpPShhPXMubmV4dCgpKS5kb25lKSYmKG4ucHVzaChhLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtpPSEwKTt9Y2F0Y2godCl7cj0hMCxvPXR9ZmluYWxseXt0cnl7IWkmJnMucmV0dXJuJiZzLnJldHVybigpfWZpbmFsbHl7aWYocil0aHJvdyBvfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKX19KCksbD1uKDEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxoPW4oNjgpLGY9aShoKSxkPW4oNSkscD1pKGQpLGc9bigyNSksdj1pKGcpLG09bigzMCkseT1pKG0pLF89bigxNzApLGI9aShfKSx4PW4oMTc1KSx3PWkoeCksRT1uKDYpLFM9aShFKSxNPW4oMzMpLEM9aShNKSxJPW4oMTEpLE89aShJKSxUPW4oMTgpLFA9big0NSksQT1pKFApLEw9big2OSksTj1uKDEyKSxrPW4oMyksUj1uKDE1KSxEPXtVbmluaXRpYWxpemVkOjAsSW5pdGlhbGl6ZWQ6MSxTdGFydDoyLExvb3A6MyxTdG9wOjQsRGVzdHJveTo1fSxGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O28odGhpcyxlKTt2YXIgaT1hKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBpLl9uYW1lPXQsaS5fbGF5ZXJzPXt9LGkuX2xheWVyc0luZGV4PVtdLGkuX3BsYW5hckdyYXBocz1bXSxpLl9kb21Db250cm9sPXt9LGkuX2Zsb29ySGVpZ2h0PTMwLGkuX29wdGlvbnM9bCh7c3R5bGVHZW5lcmF0b3I6bmV3IEMuZGVmYXVsdH0sbiksaS5zdHlsZUdlbmVyYXRvcj1pLl9vcHRpb25zLnN0eWxlR2VuZXJhdG9yLGkuX2NvbGxpc2lvblNjZW5lTWFuYWdlcj1uZXcgdy5kZWZhdWx0LGkuX3NjZW5lTWFuYWdlcj1uZXcgYi5kZWZhdWx0KGkpLGkucmVuZGVyTG9vcD1uZXcgTC5BbmltYXRpb25GcmFtZVJlbmRlckxvb3AsaS5fZnJhbWU9MCxpLl9mcmFtZUY9e30saS5fb3B0aW9ucy5nZW9tTWFwJiYoaS5fZ29lbU1hcD1pLl9vcHRpb25zLmdlb21NYXApLGkuX2JlZ2luRnJhbWU9aS5fYmVnaW5GcmFtZS5iaW5kKGkpLGkub24oXCJiZWdpbkRyYXdcIixpLl9iZWdpbkZyYW1lKSxpfXJldHVybiBzKGUsdCksYyhlLFt7a2V5OlwiX2JlZ2luRnJhbWVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2ZyYW1lRltlXTtpZihuJiZuLmxlbmd0aCl7dHJ5e2Zvcih2YXIgaT1uLHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtzKCl9fWNhdGNoKHQpe3Rocm93IGRlbGV0ZSB0aGlzLl9mcmFtZUZbZV0sdH1kZWxldGUgdGhpcy5fZnJhbWVGW2VdfX19LHtrZXk6XCJjaGFuZ2VNYXBWaWV3TGlmZUN5Y2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbGlmZUN5Y2xlIT09dCYmKHRoaXMuZW1pdChcImxpZmVDeWNsZUNoYW5nZVwiLHRoaXMsdGhpcy5fbGlmZUN5Y2xlLHQpLHRoaXMuX2xpZmVDeWNsZT10KX19LHtrZXk6XCJhZGREb21Db250cm9sXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISh0IGluc3RhbmNlb2YgTy5kZWZhdWx0KXx8dC5fbWFwfHx0Ll9uYW1lIGluIHRoaXMuX2RvbUNvbnRyb2w/KGNvbnNvbGUud2FybihcImFkZGluZyBjb250cm9sIGZhaWxlZFwiKSwhMSk6KHQuX29uQWRkKHRoaXMpLHRoaXMuX2RvbUNvbnRyb2xbdC5fbmFtZV09dCwhMCl9fSx7a2V5OlwicmVtb3ZlRG9tQ29udHJvbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7cmV0dXJuKGU9dCBpbnN0YW5jZW9mIE8uZGVmYXVsdCYmdC5fbmFtZSBpbiB0aGlzLl9kb21Db250cm9sJiZ0Ll9tYXA9PT10aGlzP3Q6dGhpcy5nZXREb21Db250cm9sKHQpKT8oZS5fb25SZW1vdmUodGhpcyksZGVsZXRlIHRoaXMuX2RvbUNvbnRyb2xbZS5fbmFtZV0sITApOihjb25zb2xlLndhcm4oXCJyZW1vdmluZyBjb250cm9sIGZhaWxlZFwiKSwhMSl9fSx7a2V5OlwiZ2V0RG9tQ29udHJvbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9kb21Db250cm9sW3RdfX0se2tleTpcImFkZE92ZXJsYXlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWU7aWYoIWUmJihuPXRoaXMuZ2V0TGF5ZXIodGhpcy5jdXJyZW50UGxhbmFyR3JhcGhJZHNbMF0pLCFuKSlmb3IodmFyIGkgaW4gdGhpcy5fbGF5ZXJzKXtuPXRoaXMuX2xheWVyc1tpXTticmVha310aGlzLmVtaXQoXCJhZGRPdmVybGF5XCIsdGhpcyxuLHQpfX0se2tleTpcInJlQXR0YWNoT3ZlcmxheVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0KFwicmVBdHRhY2hPdmVybGF5XCIsdGhpcyxlLHQpfX0se2tleTpcInJlbW92ZU92ZXJsYXlcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmxheWVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVPdmVybGF5XCIsdGhpcyx0LmxheWVyLHQpfX0se2tleTpcImFkZExheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodC5wYXJlbnQpcmV0dXJuIGNvbnNvbGUud2FybihcImFkZExheWVyOiBFeGlzdGVkIHBhcmVudFwiKSxudWxsO2lmKHRoaXMuaGFzTGF5ZXIodC5uYW1lKSlyZXR1cm4gY29uc29sZS53YXJuKFwiYWRkTGF5ZXI6IEV4aXN0ZWQgbGF5ZXJcIiksbnVsbDt2YXIgZT10aGlzLl9zY2VuZUdlbmVyYXRvci5nZW5lcmF0b3IodCx0aGlzKSxuPXRoaXMuX2xheWVyc0luZGV4LmluZGV4T2YodC5uYW1lKTtyZXR1cm4gZSYmdGhpcy5fc2NlbmVNYW5hZ2VyLmFkZChlKSx0LnBhcmVudD10aGlzLHRoaXMuX2xheWVyc1t0Lm5hbWVdPXQsbiE9PS0xJiZ0aGlzLl9sYXllcnNJbmRleC5zcGxpY2UobiwxKSx0aGlzLl9sYXllcnNJbmRleC5wdXNoKHQubmFtZSksdGhpcy5lbWl0KFwiYWRkTGF5ZXJcIix0aGlzLHQpLGV9fSx7a2V5OlwiZ2V0TGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGF5ZXJzW3RdfX0se2tleTpcImhhc0xheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLl9sYXllcnNbdF19fSx7a2V5OlwiZ2V0TGF5ZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHRoaXMuX2xheWVycyl7dmFyIGk9dGhpcy5fbGF5ZXJzW25dO2kgaW5zdGFuY2VvZiB5LmRlZmF1bHQ/aS5mb3JlYWNoKGZ1bmN0aW9uKG4saSl7bj09PXQmJmUucHVzaChpKX0pOmkubmFtZT09PXQmJmUucHVzaChpKX1yZXR1cm4gZX19LHtrZXk6XCJyZW1vdmVMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3NjZW5lR2VuZXJhdG9yLmZpbmQodCksbj10aGlzLl9sYXllcnNJbmRleC5pbmRleE9mKHQubmFtZSk7cmV0dXJuIGUmJnRoaXMuX3NjZW5lTWFuYWdlci5yZW1vdmUoZSksdC5wYXJlbnQ9bnVsbCxkZWxldGUgdGhpcy5fbGF5ZXJzW3QubmFtZV0sbiE9PS0xJiZ0aGlzLl9sYXllcnNJbmRleC5zcGxpY2UobiwxKSx0aGlzLmVtaXQoXCJyZW1vdmVMYXllclwiLHRoaXMsdCksdGhpc319LHtrZXk6XCJyZVNpemVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZW5naW5lLnJlU2l6ZSh0aGlzLHQsZSksdGhpcy5hY3RpdmVDYW1lcmEucmVTaXplKHQsZSksdGhpcy5lbWl0KFwicmVTaXplXCIsdGhpcyx0LGUpfX0se2tleTpcImRyYXdQbGFuYXJHcmFwaEV4dFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT1hcmd1bWVudHNbMl07aWYobi5ncmFkdWFsbHkpe3ZhciByPXt9O2wocix0LkFyZWEpLHQuQXJlYS5mZWF0dXJlcz1bXTt2YXIgbz1uZXcgTkdSLmRhdGEuUGxhbmFyR3JhcGgodCk7dGhpcy5kcmF3UGxhbmFyR3JhcGgobyxuKTt2YXIgYT1vLnBsYW5hckdyYXBoSWQscz10aGlzLmdldExheWVyKGEpLmdldExheWVyKFwiQXJlYVwiKSx1PXRoaXMuZ2V0TGF5ZXIoYSkuZ2V0TGF5ZXIoXCJBcmVhVGV4dFwiKSxjPVtdLGg9W107ci5mZWF0dXJlcy5tYXAoZnVuY3Rpb24odCl7dmFyIGU9cy5yZW5kZXJlci5nZXRTdHlsZSh0KSxuPW5ldyBOR1IuZGF0YS5GZWF0dXJlKE5HUi5nZW9tLkpUU1V0aWxzLmdldEdlb1JlYWRlcigpLnJlYWQodC5nZW9tZXRyeSksdC5wcm9wZXJ0aWVzKTtyZXR1cm4gYy5wdXNoKG4pLGgucHVzaChOR1IuZGF0YS5EYXRhVXRpbC5mdWNrWW91Qml0Y2gobixlLmhlaWdodCwhMCkpLG51bGx9KTt2YXIgZj1uLnBlckNvdW50fHwxMDAsZD1uLnBlclRpbWV8fDIwMCxwPTA7aWYoISgwLGsuaXNOdW1iZXIpKGYpfHxmPD0wKXRocm93IG5ldyBFcnJvcihcImRyYXdQbGFuYXJHcmFwaEV4dDogSW52YWxpZCBwZXJDb3VudFwiKTt2YXIgZz1NYXRoLmNlaWwoKGMubGVuZ3RoLTEpL2YpLHY9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihnPD1wKXJldHVybiBjbGVhckludGVydmFsKHYpLGkmJmkoKSx2b2lkKGUub25Mb2FkZWQmJmUub25Mb2FkZWQoKSk7dmFyIHQ9cCpmLG49Zz09PXArMT9jLmxlbmd0aDoocCsxKSpmO3ArKyxzLmFkZEZlYXR1cmVzKGMuc2xpY2UodCxuKSwhMSksdS5hZGRGZWF0dXJlcyhoLnNsaWNlKHQsbiksITEpLGUuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLnVwZGF0ZUNvbGxpc2lvbigpfSxkKX1lbHNle3ZhciBtPW5ldyBOR1IuZGF0YS5QbGFuYXJHcmFwaCh0KTt0aGlzLmRyYXdQbGFuYXJHcmFwaChtLG4pfX19LHtrZXk6XCJkcmF3TXVsdGlQbGFuYXJHcmFwaEV4dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49ZS5hZGRlZCxpPXZvaWQgMCE9PW4mJm4scj1lLnZpc2libGUsbz12b2lkIDA9PT1yfHxyLGE9ZS5hdXRvQXJlYVRleHRIZWlnaHQscz12b2lkIDAhPT1hJiZhLHU9ZS5ncmFkdWFsbHksbD12b2lkIDA9PT11fHx1O2l8fHRoaXMuY2xlYXIoKTt2YXIgYz10aGlzLl9jdXJQbGFuYXJHcmFwaHM/dGhpcy5fY3VyUGxhbmFyR3JhcGhzLmNvbmNhdCgpOltdO3RoaXMuX2N1clBsYW5hckdyYXBocz1bXTtmb3IodmFyIGg9dCxmPUFycmF5LmlzQXJyYXkoaCksZD0wLGg9Zj9oOmhbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBwO2lmKGYpe2lmKGQ+PWgubGVuZ3RoKWJyZWFrO3A9aFtkKytdfWVsc2V7aWYoZD1oLm5leHQoKSxkLmRvbmUpYnJlYWs7cD1kLnZhbHVlfXZhciBnPXA7dGhpcy5kcmF3UGxhbmFyR3JhcGhFeHQoZyx7Z3JhZHVhbGx5OmwsYWRkZWQ6ITAsdmlzaWJsZTpvLGF1dG9BcmVhVGV4dEhlaWdodDpzfSl9dGhpcy5fY2hhbmdlUGxhbmFyR3JhcGgodGhpcy5fY3VyUGxhbmFyR3JhcGhzLmNvbmNhdCgpLGMpfX0se2tleTpcImRyYXdQbGFuYXJHcmFwaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT1uLmFkZGVkLHI9dm9pZCAwIT09aSYmaSxvPW4udmlzaWJsZSxhPXZvaWQgMD09PW98fG8scz1uLmZpcmVFdmVudCxsPXZvaWQgMD09PXN8fHMsYz1uLmF1dG9BcmVhVGV4dEhlaWdodCxoPXZvaWQgMCE9PWMmJmMsZD1uZXcgeS5kZWZhdWx0KHQucGxhbmFyR3JhcGhJZCkscD10LmZlYXR1cmVzO2lmKHJ8fHRoaXMuY2xlYXIoKSx0aGlzLl9wbGFuYXJHcmFwaHMucHVzaCh0LnBsYW5hckdyYXBoSWQpLCF0aGlzLl9jb29yZGluYXRlU3lzdGVtfHwhcil7dmFyIGc9dGhpcy5fb3B0aW9ucyxtPWcuaW5pdFNrZXdBbmdsZSxfPWcuaW5pdFJvdGF0aW9uQW5nbGU7Zm9yKHZhciBiIGluIHApaWYoXCJGcmFtZVwiPT09Yil7dmFyIHg9cFtiXS5mZWF0dXJlc1swXS5nZW9tZXRyeS5nZXRFbnZlbG9wZUludGVybmFsKCksdz1beC5taW54LHgubWlueSx4Lm1heHgseC5tYXh5XSxFPWYuZGVmYXVsdC5nZXRFeHRlbnRDZW50ZXIodyksUz11KEUsMiksTT1TWzBdLEM9U1sxXTt0aGlzLl9jYW1lcmEuaW5pdFJlY3QodyksdGhpcy5fY29vcmRpbmF0ZVN5c3RlbT1uZXcgZi5kZWZhdWx0LHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0uc2V0T2Zmc2V0KFstTSwtQ10pfXRoaXMuYWN0aXZlQ29udHJvbCYmKCgwLGsuaXNOdW1iZXIpKG0pJiZ0aGlzLmFjdGl2ZUNvbnRyb2wuc2tld1RvKG0pLCgwLGsuaXNOdW1iZXIpKF8pJiZ0aGlzLmFjdGl2ZUNvbnRyb2wucm90YXRlVG8oMCwwLF8pKX1mb3IodmFyIEkgaW4gcCl7dmFyIE89cFtJXSxUPW5ldyB2LmRlZmF1bHQoSSx0aGlzLl9zdHlsZUdlbmVyYXRvcik7aWYoVC5jb29yZGluYXRlU3lzdGVtPXRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0sVC5mZWF0dXJlcz1PLGQuYWRkTGF5ZXIoVCksKE4uZW5hYmxlUXVhZFRyZWUmJlwiRnJhbWVcIj09PUl8fFwiQXJlYVwiPT09SSkmJihULmNsaWNrYWJsZT0hMCksXCJBcmVhXCI9PT1JKXt2YXIgUD1uZXcgdi5kZWZhdWx0KFwiQXJlYVRleHRcIix0aGlzLl9zdHlsZUdlbmVyYXRvcik7VC5yZW5kZXJlcnx8KFAuY29vcmRpbmF0ZVN5c3RlbT10aGlzLl9jb29yZGluYXRlU3lzdGVtKSxoP1AuZmVhdHVyZXM9QS5kZWZhdWx0LmtpY2tZb3VyQXNzKE8sVCx0aGlzLl9vcHRpb25zLmludGVyaW9yUG9pbnQpOlAuZmVhdHVyZXM9QS5kZWZhdWx0LmZlYXR1cmVDb2xsZWN0aW9uUG9seWdvbjJQb2ludChPLHRoaXMuX29wdGlvbnMuaW50ZXJpb3JQb2ludCksZC5hZGRMYXllcihQKX19dGhpcy5hZGRMYXllcihkKTt2YXIgTD1kLmdldExheWVyKFwiQXJlYVRleHRcIik7TC5jb29yZGluYXRlU3lzdGVtPXRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0sTCYmdGhpcy5fc2NlbmVNYW5hZ2VyLnNldFZpc2libGUoTCxudWxsLG51bGwsITEpLHRoaXMuX3NjZW5lTWFuYWdlci5zZXRWaXNpYmxlKGQsbnVsbCxudWxsLCExKSx0aGlzLm5leHQoMSxmdW5jdGlvbigpe2UuX3NjZW5lTWFuYWdlci5zZXRQb3NpdGlvbihkLG51bGwsbnVsbCwwLDAsZS5fcGxhbmFyR3JhcGhzLmluZGV4T2YodC5wbGFuYXJHcmFwaElkKSplLl9mbG9vckhlaWdodCksYSYmKGUuX3NjZW5lTWFuYWdlci5zZXRWaXNpYmxlKGQsbnVsbCxudWxsLCEwKSxlLmNvbGxpc2lvblNjZW5lTWFuYWdlci51cGRhdGVDb2xsaXNpb24oKSksTCYmZS5fc2NlbmVNYW5hZ2VyLnNldFZpc2libGUoTCxudWxsLG51bGwsITApfSksbCYmdGhpcy5fY2hhbmdlUGxhbmFyR3JhcGgodGhpcy5fY3VyUGxhbmFyR3JhcGhzP3RoaXMuX2N1clBsYW5hckdyYXBocy5jb25jYXQoW3QucGxhbmFyR3JhcGhJZF0pOlt0LnBsYW5hckdyYXBoSWRdLHRoaXMuX2N1clBsYW5hckdyYXBocz90aGlzLl9jdXJQbGFuYXJHcmFwaHMuY29uY2F0KCk6W10uY29uY2F0KHRoaXMucGxhbmFyR3JhcGgmJnRoaXMucGxhbmFyR3JhcGgucGxhbmFyR3JhcGhJZHx8W10pKSxyPyh0aGlzLl9jdXJQbGFuYXJHcmFwaHM9dGhpcy5fY3VyUGxhbmFyR3JhcGhzfHxbXSxhJiZ0aGlzLl9jdXJQbGFuYXJHcmFwaHMucHVzaCh0LnBsYW5hckdyYXBoSWQpKTp0aGlzLl9wbGFuYXJHcmFwaD10fX0se2tleTpcImRyYXdNdWx0aVBsYW5hckdyYXBoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W10sZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1lLmFkZGVkLGk9dm9pZCAwIT09biYmbixyPWUudmlzaWJsZSxvPXZvaWQgMD09PXJ8fHIsYT1lLmF1dG9BcmVhVGV4dEhlaWdodCxzPXZvaWQgMCE9PWEmJmE7aXx8dGhpcy5jbGVhcigpO3ZhciB1PXRoaXMuX2N1clBsYW5hckdyYXBocz90aGlzLl9jdXJQbGFuYXJHcmFwaHMuY29uY2F0KCk6W107dGhpcy5fY3VyUGxhbmFyR3JhcGhzPVtdO2Zvcih2YXIgbD10LGM9QXJyYXkuaXNBcnJheShsKSxoPTAsbD1jP2w6bFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGY7aWYoYyl7aWYoaD49bC5sZW5ndGgpYnJlYWs7Zj1sW2grK119ZWxzZXtpZihoPWwubmV4dCgpLGguZG9uZSlicmVhaztmPWgudmFsdWV9dmFyIGQ9Zjt0aGlzLmRyYXdQbGFuYXJHcmFwaChkLHthZGRlZDohMCx2aXNpYmxlOm8sYXV0b0FyZWFUZXh0SGVpZ2h0OnN9KX10aGlzLl9jaGFuZ2VQbGFuYXJHcmFwaCh0aGlzLl9jdXJQbGFuYXJHcmFwaHMuY29uY2F0KCksdSl9fSx7a2V5OlwiY2hhbmdlUGxhbmFyR3JhcGhJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCgwLGsuaXNBcnJheSkodCkpe2Zvcih2YXIgZT10aGlzLl9wbGFuYXJHcmFwaHMuY29uY2F0KCksbj1bXSxpPXQsbz1BcnJheS5pc0FycmF5KGkpLGE9MCxpPW8/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1pLmxlbmd0aClicmVhaztzPWlbYSsrXX1lbHNle2lmKGE9aS5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgdT1zLGw9dGhpcy5fbGF5ZXJzW3VdO2lmKGwpe3ZhciBjPWUuaW5kZXhPZih1KTtlLnNwbGljZShjLDEpLHRoaXMuc2NlbmVNYW5hZ2VyLnNldFBvc2l0aW9uKGwsbnVsbCxudWxsLDAsMCxuLmxlbmd0aCp0aGlzLl9mbG9vckhlaWdodCksbltuLmxlbmd0aF09dX19cmV0dXJuIG4ucHVzaC5hcHBseShuLHIoZSkpLHRoaXMuX3BsYW5hckdyYXBocz1uLCEwfXJldHVybiExfX0se2tleTpcInNob3dQbGFuYXJHcmFwaHNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxpPWFyZ3VtZW50c1syXTtpZighKDAsay5pc0FycmF5KSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJzaG93UGxhbmFyR3JhcGg6IEludmFsaWQgcGFyYW1ldGVyc1wiKTtmb3IodmFyIHI9dGhpcy5fcGxhbmFyR3JhcGhzLG89dGhpcy5zY2VuZU1hbmFnZXIsYT10aGlzLmNvbGxpc2lvblNjZW5lTWFuYWdlcixzPVtdLHU9MCxsPWZ1bmN0aW9uKCl7aWYoaCl7aWYoZj49Yy5sZW5ndGgpcmV0dXJuXCJicmVha1wiO2Q9Y1tmKytdfWVsc2V7aWYoZj1jLm5leHQoKSxmLmRvbmUpcmV0dXJuXCJicmVha1wiO2Q9Zi52YWx1ZX12YXIgbj1kLHI9ZS5fbGF5ZXJzW25dLGw9dm9pZCAwO3QuaW5kZXhPZihuKSE9PS0xPyhvLnNldFBvc2l0aW9uKHIsbnVsbCxudWxsLDAsMCx1KysqZS5fZmxvb3JIZWlnaHQsaSksby5zZXRWaXNpYmxlKHIsbnVsbCxudWxsLCEwKSxzLnB1c2gobiksbD0hMCk6KG8uc2V0VmlzaWJsZShyLG51bGwsbnVsbCwhMSksbD0hMSksci5mb3JlYWNoKGZ1bmN0aW9uKHQsZSl7YS5zZXRGZWF0dXJlTGF5ZXJFbmFibGUoZSxsKX0pfSxjPXIsaD1BcnJheS5pc0FycmF5KGMpLGY9MCxjPWg/YzpjW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgZCxwPWwoKTtpZihcImJyZWFrXCI9PT1wKWJyZWFrfXJldHVybiB0aGlzLl9jaGFuZ2VQbGFuYXJHcmFwaChzLHRoaXMuX2N1clBsYW5hckdyYXBocyksdGhpcy5fY3VyUGxhbmFyR3JhcGhzPXMsbiYmdGhpcy5uZXh0KDEsZnVuY3Rpb24oKXtlLmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24oVC5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKX0pLHV9fSx7a2V5OlwiX2NoYW5nZVBsYW5hckdyYXBoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJjaGFuZ2VQbGFuYXJHcmFwaFwiLHRoaXMsdC5jb25jYXQoKSxlLmNvbmNhdCgpKX19LHtrZXk6XCJyZW1vdmVQbGFuYXJHcmFwaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQucGxhbmFyR3JhcGhJZCxuPXRoaXMuX3BsYW5hckdyYXBocy5pbmRleE9mKGUpLGk9dGhpcy5nZXRMYXllcihlKTtuIT09LTEmJmkmJmkgaW5zdGFuY2VvZiB5LmRlZmF1bHQmJih0aGlzLnJlbW92ZUxheWVyKGkpLHRoaXMuX3BsYW5hckdyYXBocy5zcGxpY2UobiwxKSl9fSx7a2V5Olwic2VhcmNoRmVhdHVyZUJ5SWRcIix2YWx1ZTpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJzZWFyY2hGZWF0dXJlQnlJZCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIHNlYXJjaEZlYXR1cmVcIik7dmFyIGU9dGhpcy5fbGF5ZXJzO2Zvcih2YXIgbiBpbiBlKXt2YXIgaT1lW25dO2lmKGkgaW5zdGFuY2VvZiB5LmRlZmF1bHQpZm9yKHZhciByIGluIGkuX2xheWVycyl7dmFyIG89aS5fbGF5ZXJzW3JdLnNlYXJjaEJ5SWQodCk7aWYobylyZXR1cm4gb31lbHNle3ZhciBhPWkuc2VhcmNoQnlJZCh0KTtpZihhKXJldHVybiBhfX1yZXR1cm4gbnVsbH19LHtrZXk6XCJzZWFyY2hGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gdGhpcy5fbGF5ZXJzKXt2YXIgaT10aGlzLl9sYXllcnNbbl0scj1udWxsO2lmKGkgaW5zdGFuY2VvZiB5LmRlZmF1bHQ/cj1pLnNlYXJjaEZlYXR1cmUodCxlKTppLmlkPT09dCYmKHI9aS5zZWFyY2hCeUlkKGUpKSxyKXJldHVybiByfXJldHVybiBudWxsfX0se2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX2xpZmVDeWNsZSE9PUQuU3RhcnQmJnRoaXMuX2xpZmVDeWNsZSE9PUQuTG9vcCYmKHRoaXMuY2hhbmdlTWFwVmlld0xpZmVDeWNsZShELlN0YXJ0KSx0aGlzLl9yZW5kZXJMb29wLmxvb3AoZnVuY3Rpb24oZSl7dC5fbG9vcChlKX0pKX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNoYW5nZU1hcFZpZXdMaWZlQ3ljbGUoRC5TdG9wKSx0aGlzLl9yZW5kZXJMb29wLnN0b3AoKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY2xlYXIoKTt2YXIgZT1mdW5jdGlvbigpe3Quc3RvcCgpLHQuY2hhbmdlTWFwVmlld0xpZmVDeWNsZShELkRlc3Ryb3kpLHQuX2NvbGxpc2lvblNjZW5lTWFuYWdlci5jbGVhcigpLHQuX3NjZW5lTWFuYWdlci5kZXN0cm95KCksdC5fY29udHJvbC5kaXNwb3NlKCksdC5fY2FtZXJhLmRlc3Ryb3koKSx0Ll9nZXN0dXJlTWFuYWdlci5kZXN0cm95KCksdC5fY2FtZXJhPW51bGwsdC5fY29udHJvbD1udWxsLHQuX3BsYW5hckdyYXBoPW51bGwsdC5fY29udHJvbD1udWxsLHQuc2NlbmVHZW5lcmF0b3I9bnVsbCx0Ll9jb29yZGluYXRlU3lzdGVtPW51bGwsdC5fZW5naW5lPW51bGwsdC5fZ2VzdHVyZU1hbmFnZXI9bnVsbCx0Ll9sYXllcnM9bnVsbCx0Ll9sYXllcnNJbmRleD1udWxsLHQuX29wdGlvbnM9bnVsbCx0Ll9zdHlsZUdlbmVyYXRvcj1udWxsLHQuX2NvbGxpc2lvblNjZW5lTWFuYWdlcj1udWxsLHQuX3NjZW5lTWFuYWdlcj1udWxsLHQub2ZmKFwiYmVnaW5EcmF3XCIsdC5fYmVnaW5GcmFtZSl9O2UoKX19LHtrZXk6XCJuZXh0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10K3RoaXMuX2ZyYW1lO248dGhpcy5fZnJhbWV8fCh0aGlzLl9mcmFtZUZbbl18fCh0aGlzLl9mcmFtZUZbbl09W10pLHRoaXMuX2ZyYW1lRltuXS5wdXNoKGUpKX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2xheWVycyl0aGlzLnJlbW92ZUxheWVyKHRoaXMuX2xheWVyc1t0XSk7cmV0dXJuIHRoaXMuX3NjZW5lTWFuYWdlci5jbGVhck9jdHJlZSgpLHRoaXMuX2NvbGxpc2lvblNjZW5lTWFuYWdlci5jbGVhcigpLHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW09bnVsbCx0aGlzLl9wbGFuYXJHcmFwaHM9W10sdGhpcy5fY3VyUGxhbmFyR3JhcGhzPW51bGwsdGhpc319LHtrZXk6XCJzZWFyY2hPYmplY3RzQnlQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpSLkNvb3JkVHlwZS5TY3JlZW4sbz1bXSxhPVt0LGVdO3N3aXRjaChpKXtjYXNlIFIuQ29vcmRUeXBlLlNjcmVlbjppZih0aGlzLmFjdGl2ZUNhbWVyYSYmdGhpcy5fY29vcmRpbmF0ZVN5c3RlbSl7dmFyIHM9dGhpcy5hY3RpdmVDYW1lcmEudG9DYW1lcmFDb29yZGluYXRlKHQsZSwwKTthPXRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0ub2Zmc2V0KHMueCxzLnkpfWJyZWFrO2Nhc2UgUi5Db29yZFR5cGUuV29ybGQ6dGhpcy5fY29vcmRpbmF0ZVN5c3RlbSYmKGE9dGhpcy5fY29vcmRpbmF0ZVN5c3RlbS5vZmZzZXQodCxlKSk7YnJlYWs7Y2FzZSBSLkNvb3JkVHlwZS5XR1M4NDp9Zm9yKHZhciB1PWZ1bmN0aW9uKCl7aWYoYyl7aWYoaD49bC5sZW5ndGgpcmV0dXJuXCJicmVha1wiO2Y9bFtoKytdfWVsc2V7aWYoaD1sLm5leHQoKSxoLmRvbmUpcmV0dXJuXCJicmVha1wiO2Y9aC52YWx1ZX12YXIgdD1mLGU9bi5fbGF5ZXJzW3RdLGk9dm9pZCAwO2UgaW5zdGFuY2VvZiB5LmRlZmF1bHQ/ZS5mb3JlYWNoKGZ1bmN0aW9uKHQsZSl7aT1uLl9zZWFyY2hCeVBvaW50LmFwcGx5KG4sW2VdLmNvbmNhdChyKGEpKSksby5wdXNoLmFwcGx5KG8scihpKSl9KTooaT1uLl9zZWFyY2hCeVBvaW50LmFwcGx5KG4sW2VdLmNvbmNhdChyKGEpKSksby5wdXNoLmFwcGx5KG8scihpKSkpfSxsPXRoaXMuX2xheWVyc0luZGV4LGM9QXJyYXkuaXNBcnJheShsKSxoPTAsbD1jP2w6bFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGYsZD11KCk7aWYoXCJicmVha1wiPT09ZClicmVha31yZXR1cm4gb319LHtrZXk6XCJfc2VhcmNoQnlQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdC5jbGlja2FibGU/dC5zZWFyY2hCeVBvaW50KGUsbik6W119fSx7a2V5Olwic2VhcmNoRmVhdHVyZXNCeUNsaWVudFBvaW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5fZ2V0T2JqZWN0c0J5Q2xpbmV0KHQsZSksaT1bXSxyPW4sbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgdT1zLGw9dS5vYmplY3QsYz1sLl9sYXllcklkLGg9bC5fc2NlbmVJZCxmPXRoaXMuc2VhcmNoRmVhdHVyZShjLGgpO2YmJmkucHVzaChmKX1yZXR1cm4gaX19LHtrZXk6XCJzZWFyY2hPYmplY3RzQnlDbGllbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLl9nZXRPYmplY3RzQnlDbGluZXQodCxlKSxpPVtdLHI9bixvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXMsbD11Lm9iamVjdCxjPWwuX2xheWVySWQsaD1sLl9zY2VuZUlkLGY9dGhpcy5zZWFyY2hGZWF0dXJlKGMsaCk7ZiYmaS5wdXNoKHtmZWF0dXJlOmYscG9pbnQ6dS5wb2ludH0pfXJldHVybiBpfX0se2tleTpcIl9nZXRPYmplY3RzQnlDbGluZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPVtdO3JldHVybiB0aGlzLl9jYW1lcmE/XCJ0aHJlZVwiIT09dGhpcy5lbmdpbmUudHlwZSgpPyhjb25zb2xlLndhcm4oXCJJbnZhbGlkIEVuZ2luZVwiKSxuKTpuPXRoaXMuX3NjZW5lTWFuYWdlci5fc2VhcmNoT2JqZWN0c0luT2N0cmVlKHQvdGhpcy53aWR0aCoyLTEsMiotKGUvdGhpcy5oZWlnaHQpKzEpOihjb25zb2xlLndhcm4oXCJJbnZhbGlkIENhbWVyYVwiKSxuKX19LHtrZXk6XCJfbG9vcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2xpZmVDeWNsZSE9PUQuU3RvcCYmdGhpcy5fbGlmZUN5Y2xlIT09RC5EZXN0cm95JiYodGhpcy5jaGFuZ2VNYXBWaWV3TGlmZUN5Y2xlKEQuTG9vcCksUy5kZWZhdWx0LmdldEluc3RhbmNlKCkudXBkYXRlKHQpLHQmJih0aGlzLmVtaXQoXCJiZWdpbkRyYXdcIix0aGlzLHRoaXMuX2ZyYW1lLHQpLHRoaXMuX3NjZW5lTWFuYWdlciYmKHRoaXMuZW1pdChcImRyYXdpbmdcIix0aGlzLHRoaXMuX2ZyYW1lLHQpLHRoaXMuX3NjZW5lTWFuYWdlci5yZW5kZXIoKSksdGhpcy5lbWl0KFwiZW5kRHJhd1wiLHRoaXMsdGhpcy5fZnJhbWUrKyx0KSkpfX0se2tleTpcInBhcnRpY2xlRW5naW5lXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpY2xlRW5naW5lPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNsZUVuZ2luZX19LHtrZXk6XCJzY2VuZUdlbmVyYXRvclwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2VuZUdlbmVyYXRvcj10fX0se2tleTpcImdlc3R1cmVNYW5hZ2VyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlc3R1cmVNYW5hZ2VyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZ2VzdHVyZU1hbmFnZXI9dH19LHtrZXk6XCJhY3RpdmVDYW1lcmFcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2FtZXJhPXQsdGhpcy5fY2FtZXJhLm9uQWN0aXZlQ2FtZXJhKHRoaXMpLHRoaXMuX2NvbGxpc2lvblNjZW5lTWFuYWdlci5hY3RpdmVDYW1lcmE9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhbWVyYX19LHtrZXk6XCJhY3RpdmVDb250cm9sXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRyb2w9dCx0aGlzLl9jb250cm9sJiZ0aGlzLl9jb250cm9sLm9uQWN0aXZlQ29udHJvbCYmdGhpcy5fY29udHJvbC5vbkFjdGl2ZUNvbnRyb2wodGhpcyl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250cm9sfX0se2tleTpcIm5hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX19LHtrZXk6XCJlbmdpbmVcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZW5naW5lPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmV9fSx7a2V5OlwicmVuZGVyTG9vcFwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZW5kZXJMb29wPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJMb29wfX0se2tleTpcInNjZW5lTWFuYWdlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2VuZU1hbmFnZXJ9fSx7a2V5OlwiY29sbGlzaW9uU2NlbmVNYW5hZ2VyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbGxpc2lvblNjZW5lTWFuYWdlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbGxpc2lvblNjZW5lTWFuYWdlcj10fX0se2tleTpcImNvb3JkaW5hdGVTeXN0ZW1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZVN5c3RlbX19LHtrZXk6XCJoZWlnaHRcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faGVpZ2h0PXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHR9fSx7a2V5Olwid2lkdGhcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2lkdGg9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRofX0se2tleTpcIm1heERpc3RhbmNlXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21heERpc3RhbmNlPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhEaXN0YW5jZX19LHtrZXk6XCJtaW5EaXN0YW5jZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9taW5EaXN0YW5jZT10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluRGlzdGFuY2V9fSx7a2V5OlwiY3VycmVudFBsYW5hckdyYXBoSWRzXCIsc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcImN1cnJlbnRQbGFuYXJHcmFwaElkcyBpcyByZWFkb25seVwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1clBsYW5hckdyYXBocz90aGlzLl9jdXJQbGFuYXJHcmFwaHM6dGhpcy5fcGxhbmFyR3JhcGhzfX0se2tleTpcInBsYW5hckdyYXBoc1wiLHNldDpmdW5jdGlvbih0KXtjb25zb2xlLndhcm4oXCJwbGFuYXJncmFwaHMgaXMgcmVhZG9ubHlcIil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFuYXJHcmFwaHN9fSx7a2V5OlwiY29udGFpbmVyXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRhaW5lcj10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfX0se2tleTpcInRhcmdldERvbVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl90YXJnZXREb209dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldERvbX19LHtrZXk6XCJjb250cm9sRG9tXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRyb2xEb209dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xEb219fSx7a2V5Olwib3ZlcmxheURvbVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9vdmVybGF5RG9tPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdmVybGF5RG9tfX0se2tleTpcInN0eWxlR2VuZXJhdG9yXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0eWxlR2VuZXJhdG9yPXQ7XG59LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHlsZUdlbmVyYXRvcn19LHtrZXk6XCJmbG9vckhlaWdodFwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9mbG9vckhlaWdodD10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmxvb3JIZWlnaHR9fV0pLGV9KHAuZGVmYXVsdCk7ZS5kZWZhdWx0PUZ9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gaSh0KXt2YXIgZT10O2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0JiYoZT1TdHJpbmcodCkpLC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZVwiKTtyZXR1cm4gZX1mdW5jdGlvbiByKHQpe3ZhciBlPXQ7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihlPVN0cmluZyh0KSksZX1mdW5jdGlvbiBvKHQpe3ZhciBlPXtuZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dC5zaGlmdCgpO3JldHVybnt2YWx1ZTplLGRvbmU6XCJ1bmRlZmluZWRcIj09dHlwZW9mIGV9fX07cmV0dXJuIHMmJihlW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gZX0pLGV9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPVwiU3ltYm9sXCJpbiBzZWxmJiZcIml0ZXJhdG9yXCJpbiBTeW1ib2wsdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIGk9dGhpcztuKHRoaXMsdCksdGhpcy5tYXA9e30sZSBpbnN0YW5jZW9mIHQ/ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZSxuPXQudmFsdWU7cmV0dXJuIGkuYXBwZW5kKGUsbil9KTplJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kuYXBwZW5kKHQsZVt0XSl9KX1yZXR1cm4gYSh0LFt7a2V5OlwiYXBwZW5kXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1pKHQpLHI9dGhpcy5tYXBbbl07cnx8KHI9W10sdGhpcy5tYXBbbl09ciksci5wdXNoKGUpfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5tYXBbaSh0KV09W3IoZSldfX0se2tleTpcImRlbGV0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLm1hcFtpKHQpXX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1hcFtpKHQpXTtyZXR1cm4gZT9lWzBdOm51bGx9fSx7a2V5OlwiZ2V0QWxsXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFwW2kodCldfHxbXX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkoaSh0KSl9fSx7a2V5OlwiZm9yRWFjaFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihpKXtuLm1hcFtpXS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QuY2FsbChlLGkscixuKX0pfSl9fSx7a2V5Olwia2V5c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5wdXNoKGUpfSksbyh0KX19LHtrZXk6XCJ2YWx1ZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wdXNoKG4pfSksbyh0KX19LHtrZXk6XCJlbnRyaWVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucHVzaChbZSxuXSl9KSxvKHQpfX1dKSx0fSgpO3MmJih1LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPXUucHJvdG90eXBlLmVudHJpZXMpLGUuZGVmYXVsdD11fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9ZnVuY3Rpb24gdChlLG4saSxyKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO251bGwhPT1hJiZ0KGEsbixpLHIpfWVsc2UgaWYoXCJ2YWx1ZVwiaW4gbyYmby53cml0YWJsZSlvLnZhbHVlPWk7ZWxzZXt2YXIgcz1vLnNldDt2b2lkIDAhPT1zJiZzLmNhbGwocixpKX1yZXR1cm4gaX0sYz1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGg9bigxMTApLGY9cihoKSxkPW4oMikscD1pKGQpLGc9big5MCksdj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbixpLHIpe28odGhpcyxlKTt2YXIgcz1hKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcywtMikpO3JldHVybiBzLl9jYW1lcmE9bmV3IHAuUGVyc3BlY3RpdmVDYW1lcmEodCxuLGkscikscy5pZD1zLl9jYW1lcmEuaWQscy5fcXVhdGVybmlvbj1zLl9jYW1lcmEucXVhdGVybmlvbi5jbG9uZSgpLHMuX3JvdGF0aW9uPXMuX2NhbWVyYS5yb3RhdGlvbi5jbG9uZSgpLHMuX3RhcmdldDA9bmV3IHAuVmVjdG9yMyxzLl9vcmlnaW5EaXN0YW5jZT0xMDAsc31yZXR1cm4gcyhlLHQpLHUoZSxbe2tleTpcImFkZExpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtpZihcIlBvaW50XCI9PT10KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KG4+MT9uLTE6MCkscj0xO3I8bjtyKyspaVtyLTFdPWFyZ3VtZW50c1tyXTtlPW5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShwLlBvaW50TGlnaHQsW251bGxdLmNvbmNhdChpKSkpLHRoaXMuX2NhbWVyYS5hZGQoZSl9cmV0dXJuIGV9fSx7a2V5OlwicmVTaXplXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9jYW1lcmEuYXNwZWN0PXQvZSx0aGlzLl9jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NhbWVyYT1udWxsLHRoaXMuX3F1YXRlcm5pb249bnVsbCx0aGlzLl9yb3RhdGlvbj1udWxsfX0se2tleTpcImluaXRSZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOi42Njcsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06NjAsaT1uZXcgcC5WZWN0b3IzKDAsMCwwKTtpZih0aGlzLl9tYXBWaWV3JiY0PT09dC5sZW5ndGgpe3RoaXMuX2NhbWVyYS5xdWF0ZXJuaW9uLnNldCh0aGlzLl9xdWF0ZXJuaW9uLngsdGhpcy5fcXVhdGVybmlvbi55LHRoaXMuX3F1YXRlcm5pb24ueix0aGlzLl9xdWF0ZXJuaW9uLncpLHRoaXMuX2NhbWVyYS5yb3RhdGlvbi5zZXQodGhpcy5fcm90YXRpb24ueCx0aGlzLl9yb3RhdGlvbi55LHRoaXMuX3JvdGF0aW9uLnopLHRoaXMuX2NhbWVyYS5wb3NpdGlvbi5zZXRaKHRoaXMuX29yaWdpbkRpc3RhbmNlKTt2YXIgcj10WzBdLG89dFsxXSxhPXRbMl0scz10WzNdLHU9KHIrYSkvMixsPShzK28pLzIsYz1uZXcgcC5WZWN0b3IzKHItdSxvLWwsMSksaD1uZXcgcC5WZWN0b3IzKGEtdSxzLWwsMSksZj1NYXRoLnNxcnQoTWF0aC5wb3coaC54LWMueCwyKStNYXRoLnBvdyhoLnktYy55LDIpK01hdGgucG93KGguei1jLnosMikpLzI7dGhpcy5fbWFwQm91bmQ9bmV3IGcuRWxsaXB0aWNDeWxpbmRlcihpLGYsZiksdGhpcy5fY2FtZXJhLnVwZGF0ZU1hdHJpeCgpLHRoaXMuX2NhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO3ZhciBkPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKGMueCxjLnksYy56KSx2PXRoaXMudG9TY3JlZW5Db29yZGluYXRlKGgueCxoLnksaC56KSxtPSh2LngtZC54KS90aGlzLl9tYXBWaWV3LndpZHRoLHk9KGQueS12LnkpL3RoaXMuX21hcFZpZXcuaGVpZ2h0LF89TWF0aC5tYXgobSx5KTt0aGlzLl9vcmlnaW5EaXN0YW5jZT10aGlzLl9jYW1lcmEucG9zaXRpb24ueipfL2UsdGhpcy5fY2FtZXJhLnBvc2l0aW9uLnNldFoodGhpcy5fb3JpZ2luRGlzdGFuY2UpLHRoaXMuX2NhbWVyYS51cGRhdGVNYXRyaXgoKSx0aGlzLl9jYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKX1lbHNlIGlmKHRoaXMuX21hcFZpZXcmJjY9PT10Lmxlbmd0aCl7dGhpcy5fY2FtZXJhLnF1YXRlcm5pb24uc2V0KHRoaXMuX3F1YXRlcm5pb24ueCx0aGlzLl9xdWF0ZXJuaW9uLnksdGhpcy5fcXVhdGVybmlvbi56LHRoaXMuX3F1YXRlcm5pb24udyksdGhpcy5fY2FtZXJhLnJvdGF0aW9uLnNldCh0aGlzLl9yb3RhdGlvbi54LHRoaXMuX3JvdGF0aW9uLnksdGhpcy5fcm90YXRpb24ueiksdGhpcy5fY2FtZXJhLnBvc2l0aW9uLnNldFooMTAwKTt2YXIgYj0odFswXSt0WzNdKS8yLHg9KHRbMV0rdFs0XSkvMix3PSh0WzJdK3RbNV0pLzIsRT1uZXcgcC5WZWN0b3IzKHRbMF0tYix0WzFdLXgsdFsyXS13KSxTPW5ldyBwLlZlY3RvcjModFszXS1iLHRbNF0teCx0WzVdLXcpLE09TWF0aC5zcXJ0KE1hdGgucG93KFMueC1FLngsMikrTWF0aC5wb3coUy55LUUueSwyKStNYXRoLnBvdyhTLnotRS56LDIpKS8yO3RoaXMuX21hcEJvdW5kPW5ldyBnLkVsbGlwdGljQ3lsaW5kZXIoaSxNLE0pLHRoaXMuX2NhbWVyYS51cGRhdGVNYXRyaXgoKSx0aGlzLl9jYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTt2YXIgQz1uZXcgcC5WZWN0b3IzKHRoaXMuX2NhbWVyYS51cC55LC10aGlzLl9jYW1lcmEudXAueCwwKS5ub3JtYWxpemUoKSxJPW5ldyBwLk1hdHJpeDQ7SS5tYWtlUm90YXRpb25BeGlzKEMsbipNYXRoLlBJLzE4MCksdGhpcy5fY2FtZXJhLnBvc2l0aW9uLmFwcGx5TWF0cml4NChJKSx0aGlzLl9jYW1lcmEudXAuYXBwbHlNYXRyaXg0KEkpO3ZhciBPPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKEUueCxFLnksRS56KSxUPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKEUueCxTLnksRS56KSxQPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKFMueCxFLnksRS56KSxBPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKFMueCxTLnksRS56KSxMPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKEUueCxFLnksUy56KSxOPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKEUueCxTLnksUy56KSxrPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKFMueCxFLnksUy56KSxSPXRoaXMudG9TY3JlZW5Db29yZGluYXRlKFMueCxTLnksUy56KSxEPU1hdGgubWluKE8ueCxULngsUC54LEEueCxMLngsTi54LGsueCxSLngpLEY9TWF0aC5tYXgoTy54LFQueCxQLngsQS54LEwueCxOLngsay54LFIueCksQj1NYXRoLm1pbihPLnksVC55LFAueSxBLnksTC55LE4ueSxrLnksUi55KSxqPU1hdGgubWF4KE8ueSxULnksUC55LEEueSxMLnksTi55LGsueSxSLnkpLFU9KEYtRCkvdGhpcy5fbWFwVmlldy53aWR0aCx6PShqLUIpL3RoaXMuX21hcFZpZXcuaGVpZ2h0LEc9TWF0aC5tYXgoVSx6KTt0aGlzLl9jYW1lcmEucG9zaXRpb24uc2V0WCh0aGlzLl9jYW1lcmEucG9zaXRpb24ueCpHL2UpLHRoaXMuX2NhbWVyYS5wb3NpdGlvbi5zZXRZKHRoaXMuX2NhbWVyYS5wb3NpdGlvbi55KkcvZSksdGhpcy5fY2FtZXJhLnBvc2l0aW9uLnNldFoodGhpcy5fY2FtZXJhLnBvc2l0aW9uLnoqRy9lKSx0aGlzLl9jYW1lcmEudXBkYXRlTWF0cml4KCksdGhpcy5fY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCl9fX0se2tleTpcInRvU2NyZWVuQ29vcmRpbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT12b2lkIDA7aWYodGhpcy5fbWFwVmlldyl7dmFyIHI9bmV3IHAuVmVjdG9yMyh0LGUsbik7aT1yLnByb2plY3QodGhpcy5fY2FtZXJhKSxpLng9KGkueCsxKS8yKnRoaXMuX21hcFZpZXcud2lkdGgsaS55PS0oaS55LTEpLzIqdGhpcy5fbWFwVmlldy5oZWlnaHR9cmV0dXJuIGkuc2V0WigwKX19LHtrZXk6XCJ0b0NhbWVyYUNvb3JkaW5hdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dm9pZCAwO2lmKHRoaXMuX21hcFZpZXcpe3RoaXMuX2NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7dmFyIHI9bmV3IHAuVmVjdG9yMyh0L3RoaXMuX21hcFZpZXcud2lkdGgqMi0xLDIqLShlL3RoaXMuX21hcFZpZXcuaGVpZ2h0KSsxLG4pLG89KG5ldyBwLlZlY3RvcjMpLnNldEZyb21NYXRyaXhQb3NpdGlvbih0aGlzLl9jYW1lcmEubWF0cml4KTtpPXIudW5wcm9qZWN0KHRoaXMuX2NhbWVyYSk7dmFyIGE9aS5zdWIobykubm9ybWFsaXplKCkscz0tby56L2EuejtpPW8uY2xvbmUoKS5hZGQoYS5tdWx0aXBseVNjYWxhcihzKSl9dmFyIHU9KHRoaXMuX3RhcmdldC56LXRoaXMuX2NhbWVyYS5wb3NpdGlvbi56KS8oaS56LXRoaXMuX2NhbWVyYS5wb3NpdGlvbi56KSxsPXRoaXMuX2NhbWVyYS5wb3NpdGlvbi5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKDEtdSkuYWRkKGkubXVsdGlwbHlTY2FsYXIodSkpO3JldHVybiBsfX0se2tleTpcImdldE1ldGVyc1BlclBpeGVsXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwVmlldylyZXR1cm4gMDt2YXIgdD10aGlzLl9jYW1lcmEsZT1uZXcgcC5WZWN0b3IzKHRoaXMuX21hcFZpZXcud2lkdGgvMix0aGlzLl9tYXBWaWV3LmhlaWdodC8yLDApLG49dGhpcy50b0NhbWVyYUNvb3JkaW5hdGUoZS54LGUueSxlLnopLGk9bmV3IHAuVmVjdG9yMyxyPW5ldyBwLlZlY3RvcjMoMSwwLDApLG89dC5nZXRXb3JsZFF1YXRlcm5pb24oKSxhPW51bGwscz0wO3JldHVybiByLmFwcGx5UXVhdGVybmlvbihvKSxpLmNvcHkobikuYWRkKHIpLGE9dGhpcy50b1NjcmVlbkNvb3JkaW5hdGUoaS54LGkueSxpLnopLHM9ZS5kaXN0YW5jZVRvKGEpLDEvc319LHtrZXk6XCJyZW1vdmVMaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2NhbWVyYS5yZW1vdmUodCl9fSx7a2V5OlwibG9va0F0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl90YXJnZXQwLnNldChlLngsZS55LGUueiksdGhpcy5fY2FtZXJhLmxvb2tBdCh0aGlzLl90YXJnZXQwKX19LHtrZXk6XCJvcmlnaW5EaXN0YW5jZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmlnaW5EaXN0YW5jZX19LHtrZXk6XCJjYW1lcmFcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FtZXJhfX0se2tleTpcImJvdW5kXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcEJvdW5kfX0se2tleTpcInBvc2l0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9YyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJwb3NpdGlvblwiLHRoaXMpO3JldHVybiB0Lng9dGhpcy5fY2FtZXJhLnBvc2l0aW9uLngsdC55PXRoaXMuX2NhbWVyYS5wb3NpdGlvbi55LHQuej10aGlzLl9jYW1lcmEucG9zaXRpb24ueix0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2FtZXJhLnBvc2l0aW9uLnNldCh0LngsdC55LHQueiksdCBpbnN0YW5jZW9mIHAuVmVjdG9yMz8oYyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJwb3NpdGlvblwiLHRoaXMpLng9dC54LGMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicG9zaXRpb25cIix0aGlzKS55PXQueSxjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInBvc2l0aW9uXCIsdGhpcykuej10LnopOmwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicG9zaXRpb25cIix0LHRoaXMpfX0se2tleTpcInRhcmdldFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXR9LHNldDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgcC5WZWN0b3IzPyhjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInRhcmdldFwiLHRoaXMpLng9dC54LGMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwidGFyZ2V0XCIsdGhpcykueT10LnksYyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJ0YXJnZXRcIix0aGlzKS56PXQueik6bChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJ0YXJnZXRcIix0LHRoaXMpfX0se2tleTpcInVwXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9YyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJ1cFwiLHRoaXMpO3JldHVybiB0Lng9dGhpcy5fY2FtZXJhLnVwLngsdC55PXRoaXMuX2NhbWVyYS51cC55LHQuej10aGlzLl9jYW1lcmEudXAueix0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2FtZXJhLnVwLnNldCh0LngsdC55LHQueiksdCBpbnN0YW5jZW9mIHAuVmVjdG9yMz8oYyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJ1cFwiLHRoaXMpLng9dC54LGMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwidXBcIix0aGlzKS55PXQueSxjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInVwXCIsdGhpcykuej10LnopOmwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwidXBcIix0LHRoaXMpfX1dKSxlfShmLmRlZmF1bHQpO2UuZGVmYXVsdD12fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDExKSxoPWkoYyksZj1uKDcpLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyKHRoaXMsZSk7dmFyIG49byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdC5uYW1lP1widG9nZ2xlLVwiK3QubmFtZTpcInRvZ2dsZVwiLHMoe2Rpc2FibGVkOiExLHNlbGVjdGVkOiExLGlubmVySFRNTDpcIlwiLHBvc2l0aW9uOlwidG9wcmlnaHRcIn0sdCkpKTtuLl9lbGVtZW50JiZjb25zb2xlLndhcm4oXCJUb2dnbGVDb250cm9sOiBFbGVtZW50IHdpbGwgYmUgb3ZlcnJpZGVkXCIpO3ZhciBpPW4uX29wdGlvbnMuY2xhc3NOYW1lP1wiIFwiK24uX29wdGlvbnMuY2xhc3NOYW1lOlwiXCI7cmV0dXJuIG4uX2VsZW1lbnQ9Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJuZ3ItdG9nZ2xlIG5nci1jb250cm9sIG5nci1iYXJcIitpKSxuLl9idXR0b249Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiYVwiLFwiXCIsbi5fZWxlbWVudCksbi5fYnV0dG9uLmlubmVySFRNTD1uLl9vcHRpb25zLmlubmVySFRNTCxuLl9idXR0b24uaHJlZj1cIiNcIixuLl9kaXNhYmxlZD1uLl9vcHRpb25zLmRpc2FibGVkLG4uX3NlbGVjdGVkPW4uX29wdGlvbnMuc2VsZWN0ZWQsbi5fc2VsZWN0ZWQmJmYuRE9NVXRpbHMuYWRkQ2xhc3Mobi5fYnV0dG9uLFwic2VsZWN0ZWRcIiksbi5fZGlzYWJsZWQmJmYuRE9NVXRpbHMuYWRkQ2xhc3Mobi5fYnV0dG9uLFwiZGlzYWJsZWRcIiksbi5fb25DbGljaz1uLl9vbkNsaWNrLmJpbmQobiksbn1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcIl9vbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljaywhMSksdGhpc319LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfb25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2spLHRoaXN9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnRyaWdnZXIoKX19LHtrZXk6XCJ0cmlnZ2VyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO3RoaXMuX2Rpc2FibGVkfHwodGhpcy5fc2VsZWN0ZWQ/KGYuRE9NVXRpbHMucmVtb3ZlQ2xhc3ModGhpcy5fYnV0dG9uLFwic2VsZWN0ZWRcIiksdGhpcy5fc2VsZWN0ZWQ9ITEpOihmLkRPTVV0aWxzLmFkZENsYXNzKHRoaXMuX2J1dHRvbixcInNlbGVjdGVkXCIpLHRoaXMuX3NlbGVjdGVkPSEwKSx0JiZ0aGlzLmZpcmUoXCJ0b2dnbGVcIix7c2VsZWN0ZWQ6dGhpcy5fc2VsZWN0ZWQsdGFyZ2V0Q29udHJvbDp0aGlzfSkpfX0se2tleTpcImdldFNlbGVjdGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0ZWR9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzYWJsZWQ9ITAsdGhpc319LHtrZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRpc2FibGVkPSExLHRoaXN9fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlzYWJsZWQ9ISF0LHRoaXMuX2Rpc2FibGVkP2YuRE9NVXRpbHMuYWRkQ2xhc3ModGhpcy5fYnV0dG9uLFwiZGlzYWJsZWRcIik6Zi5ET01VdGlscy5yZW1vdmVDbGFzcyh0aGlzLl9idXR0b24sXCJkaXNhYmxlZFwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkfX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9bigxKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtpKHRoaXMsdCksdGhpcy5nZW9tZXRyeT1lLHRoaXMucHJvcGVydGllcz1uLHRoaXMuaWQ9dGhpcy5wcm9wZXJ0aWVzJiZ0aGlzLnByb3BlcnRpZXMuaWQsdGhpcy5oYXNPZmZzZXQ9ITAsdGhpcy5wcmlvcml0eT01fXJldHVybiBvKHQsW3trZXk6XCJjb3B5XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdlb21ldHJ5LmNvcHkoKSxuPXIoe30sdGhpcy5wcm9wZXJ0aWVzKSxpPW5ldyB0KGUsbik7cmV0dXJuIGkuaGFzT2Zmc2V0PXRoaXMuaGFzT2Zmc2V0LGl9fSx7a2V5OlwicHJpb3JpdHlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJpb3JpdHl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wcmlvcml0eT10fX0se2tleTpcImlkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faWQ9dH19LHtrZXk6XCJnZW9tZXRyeVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZW9tZXRyeX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2dlb21ldHJ5PXR9fSx7a2V5OlwicHJvcGVydGllc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcHJvcGVydGllcz10fX0se2tleTpcImhhc09mZnNldFwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9oYXNPZmZzZXQ9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc09mZnNldH19LHtrZXk6XCJwYXJlbnRcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFyZW50PXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJlbnR9fV0pLHR9KCk7ZS5kZWZhdWx0PWF9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHM9big4KSx1PWkocyksbD1uKDQpLGM9bigzKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KX1yZXR1cm4gYSh0LG51bGwsW3trZXk6XCJjcmVhdGVQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0P3UuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQobmV3KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGwuZ2VvbS5Db29yZGluYXRlLFtudWxsXS5jb25jYXQocih0KSkpKSk6bnVsbH19LHtrZXk6XCJjcmVhdGVQb2x5Z29uXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoKDAsYy5pc0FycmF5KSh0KSl7Zm9yKHZhciBlPVtdLG49dCxpPUFycmF5LmlzQXJyYXkobiksbz0wLG49aT9uOm5bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKGkpe2lmKG8+PW4ubGVuZ3RoKWJyZWFrO2E9bltvKytdfWVsc2V7aWYobz1uLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7aWYoKDAsYy5pc0FycmF5KShzKSl7dmFyIGg9bmV3KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGwuZ2VvbS5Db29yZGluYXRlLFtudWxsXS5jb25jYXQocihzKSkpKTtlLnB1c2goaCl9fWlmKGUubGVuZ3RoPj0zKXJldHVybiB1LmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvbHlnb24oZSl9cmV0dXJuIG51bGx9fSx7a2V5OlwiY3JlYXRlTGluZVN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCgwLGMuaXNBcnJheSkodCkpe2Zvcih2YXIgZT1bXSxuPXQsaT1BcnJheS5pc0FycmF5KG4pLG89MCxuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYTtpZihpKXtpZihvPj1uLmxlbmd0aClicmVhazthPW5bbysrXX1lbHNle2lmKG89bi5uZXh0KCksby5kb25lKWJyZWFrO2E9by52YWx1ZX12YXIgcz1hO2lmKCgwLGMuaXNBcnJheSkocykpe3ZhciBoPW5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShsLmdlb20uQ29vcmRpbmF0ZSxbbnVsbF0uY29uY2F0KHIocykpKSk7ZS5wdXNoKGgpfX1pZihlLmxlbmd0aD49MilyZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKGUpfXJldHVybiBudWxsfX0se2tleTpcImNyZWF0ZU11bHRpUG9pbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZigoMCxjLmlzQXJyYXkpKHQpKXtmb3IodmFyIGU9W10sbj10LGk9QXJyYXkuaXNBcnJheShuKSxvPTAsbj1pP246bltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYoaSl7aWYobz49bi5sZW5ndGgpYnJlYWs7YT1uW28rK119ZWxzZXtpZihvPW4ubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtpZigoMCxjLmlzQXJyYXkpKHMpKXt2YXIgaD1uZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkobC5nZW9tLkNvb3JkaW5hdGUsW251bGxdLmNvbmNhdChyKHMpKSkpO2UucHVzaChoKX19aWYoZS5sZW5ndGg+PTEpcmV0dXJuIHUuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlQb2ludChlKX1yZXR1cm4gbnVsbH19LHtrZXk6XCJjcmVhdGVNdWx0aVBvbHlnb25cIix2YWx1ZTpmdW5jdGlvbihlKXtpZigoMCxjLmlzQXJyYXkpKGUpKXtmb3IodmFyIG49W10saT1lLHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YSxsPXQuY3JlYXRlUG9seWdvbihzKTtsJiZuLnB1c2gobCl9aWYobi5sZW5ndGg+PTEpcmV0dXJuIHUuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlTXVsdGlQb2x5Z29uKG4pfXJldHVybiBudWxsfX0se2tleTpcImNyZWF0ZU11bHRpTGluZVN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCgwLGMuaXNBcnJheSkoZSkpe2Zvcih2YXIgbj1bXSxpPWUscj1BcnJheS5pc0FycmF5KGkpLG89MCxpPXI/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYTtpZihyKXtpZihvPj1pLmxlbmd0aClicmVhazthPWlbbysrXX1lbHNle2lmKG89aS5uZXh0KCksby5kb25lKWJyZWFrO2E9by52YWx1ZX12YXIgcz1hLGw9dC5jcmVhdGVQb2x5Z29uKHMpO2wmJm4ucHVzaChsKX1pZihuLmxlbmd0aD49MSlyZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcobil9cmV0dXJuIG51bGx9fV0pLHR9KCk7ZS5kZWZhdWx0PWh9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDI2KSxsPWkodSksYz1uKDE2KSxoPWkoYyksZj1uKDMzKSxkPWkoZikscD1uKDQpLGc9big4KSx2PWkoZyksbT1uKDEyNSkseT1pKG0pLF89bigxMiksYj1uKDMpLHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe3IodGhpcyxlKTt2YXIgaT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIGkuZmVhdHVyZXM9bmV3IGguZGVmYXVsdCh0KSxpLl9zdWJIZWlnaHQ9MWUtNSxpLl96SW5kZXg9aS5fc3ViSGVpZ2h0LG4gaW5zdGFuY2VvZiBkLmRlZmF1bHQ/aS5yZW5kZXJlcj1uLmdlbmVyYXRvcihpKTppLnJlbmRlcmVyPW4sXy5lbmFibGVRdWFkVHJlZSYmKGkuX3F1YWRUcmVlPW5ldyBwLmluZGV4LnF1YWR0cmVlLlF1YWR0cmVlKSxpLmNsaWNrYWJsZT0hMSxpLl9wYXJlbnQ9bnVsbCxpfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwidmlzaXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMucmVuZGVyZXImJnRoaXMuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihuKXtyZXR1cm4gdChuLGUucmVuZGVyZXIuZ2V0U3R5bGUobikpfSx0aGlzKX19LHtrZXk6XCJhZGRGZWF0dXJlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj0oMCxiLmlzQXJyYXkpKHQpLGk9bj90OnQuZmVhdHVyZXM7aWYoISgwLGIuaXNBcnJheSkoaSkpcmV0dXJuIGNvbnNvbGUud2FybihcIkludmFsaWQgRmVhdHVyZXNcIiksdGhpcztmb3IodmFyIHI9aSxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7dGhpcy5hZGRGZWF0dXJlKHUsZSl9cmV0dXJuIGV8fHRoaXMuZW1pdChcImFkZEZlYXR1cmVzXCIsdGhpcyxpKSx0aGlzfX0se2tleTpcImFkZEZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO3JldHVybiB0aGlzLl9hZGRGZWF0dXJlKHQsITAsZSl9fSx7a2V5OlwicmVtb3ZlRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9mZWF0dXJlcy5oYXModCkmJih0Lm9uUmVtb3ZlJiZ0Lm9uUmVtb3ZlKHRoaXMpLHRoaXMuX2ZlYXR1cmVzLnJlbW92ZUZlYXR1cmUodCksXy5lbmFibGVRdWFkVHJlZSYmdGhpcy5fcXVhZFRyZWUucmVtb3ZlKHQuZ2VvbWV0cnkuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpLHQpLHQucGFyZW50PW51bGwsdGhpcy5lbWl0KFwicmVtb3ZlRmVhdHVyZVwiLHRoaXMsdCkpLHRoaXN9fSx7a2V5OlwiY2xlYXJGZWF0dXJlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5mZWF0dXJlcyl7dmFyIHQ9dGhpcy5mZWF0dXJlcy5nZXRGZWF0dXJlQ291bnQoKTt0aGlzLmZlYXR1cmVzLnBhcmVudD1udWxsO2Zvcih2YXIgZT10O2U+PTA7ZS0tKXt2YXIgbj10aGlzLmZlYXR1cmVzLmZlYXR1cmVzW2VdO3RoaXMucmVtb3ZlRmVhdHVyZShuKX19cmV0dXJuIHRoaXN9fSx7a2V5Olwic2VhcmNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10saT10aGlzLl9mZWF0dXJlcy5mZWF0dXJlcyxyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWEsdT1zLnByb3BlcnRpZXM7dCBpbiB1JiZlPT09dVt0XSYmbi5wdXNoKHMpfXJldHVybiBufX0se2tleTpcInNlYXJjaEJ5UG9pbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKCFfLmVuYWJsZVF1YWRUcmVlKXJldHVybiBjb25zb2xlLndhcm4oXCJGZWF0dXJlTGF5ZXI6IHF1YWRUcmVlIGlzIGRpc2FibGVkXCIpLG51bGw7dmFyIG49W10saT1bdCxlXTtpZighdGhpcy5jbGlja2FibGUpcmV0dXJuIG47aWYodGhpcy5fY29vcmRpbmF0ZVN5c3RlbSl7dmFyIHI9dGhpcy5fY29vcmRpbmF0ZVN5c3RlbS5nZXRPZmZzZXQoKSxvPXJbMF0sYT1yWzFdO2lbMF0rPW8saVsxXSs9YX1pWzJdPWlbMF0rLjAxLGlbM109aVsxXSsuMDEsaVswXS09LjAxLGlbMV0tPS4wMTt2YXIgcz10aGlzLl9xdWFkVHJlZS5xdWVyeShuZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkocC5nZW9tLkVudmVsb3BlLFtudWxsXS5jb25jYXQoaSkpKSksdT1zLnNpemUoKTtpZih1PjApZm9yKHZhciBsPXYuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQobmV3IHAuZ2VvbS5Db29yZGluYXRlKGlbMF0rLjAxLGlbMV0rLjAxKSksYz1zLmFycmF5XyxoPUFycmF5LmlzQXJyYXkoYyksZj0wLGM9aD9jOmNbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBkO2lmKGgpe2lmKGY+PWMubGVuZ3RoKWJyZWFrO2Q9Y1tmKytdfWVsc2V7aWYoZj1jLm5leHQoKSxmLmRvbmUpYnJlYWs7ZD1mLnZhbHVlfXZhciBnPWQ7Zy5nZW9tZXRyeS5jb250YWlucyhsKSYmbi5wdXNoKGcpfXJldHVybiBufX0se2tleTpcInNlYXJjaEJ5SWRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZmVhdHVyZXMuZ2V0RmVhdHVyZUJ5SWQodCl9fSx7a2V5OlwiX2FkZEZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl07aWYodCYmIXRoaXMuX2ZlYXR1cmVzLmhhcyh0KSYmdGhpcy5yZW5kZXJlcil7aWYodC5vbkFkZCYmIXQub25BZGQodGhpcykpcmV0dXJuIHRoaXM7dGhpcy5fY29vcmRpbmF0ZVN5c3RlbSYmdGhpcy5fY29vcmRpbmF0ZVN5c3RlbS5nZXRPZmZzZXQoKSYmdC5oYXNPZmZzZXQmJnRoaXMuX29mZnNldCh0KSxlJiZ0aGlzLl9mZWF0dXJlcy5hZGRGZWF0dXJlKHQpLF8uZW5hYmxlUXVhZFRyZWUmJnRoaXMuX3F1YWRUcmVlLmluc2VydCh0Lmdlb21ldHJ5LmdldEVudmVsb3BlSW50ZXJuYWwoKSx0KSx0LnBhcmVudD10aGlzLG4mJnRoaXMuZW1pdChcImFkZEZlYXR1cmVcIix0aGlzLHQsdGhpcy5yZW5kZXJlci5nZXRTdHlsZSh0KSl9cmV0dXJuIHRoaXN9fSx7a2V5OlwiX29mZnNldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0mJnRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0uZ2V0T2Zmc2V0KCkmJnQuaGFzT2Zmc2V0KXt2YXIgZT10aGlzLl9jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpLG49ZVswXSxpPWVbMV0scj1uZXcgeS5kZWZhdWx0KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmNvb3JkaW5hdGVzLHI9QXJyYXkuaXNBcnJheShlKSxvPTAsZT1yP2U6ZVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49ZS5sZW5ndGgpYnJlYWs7YT1lW28rK119ZWxzZXtpZihvPWUubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtzLngrPW4scy55Kz1pfXJldHVybiB0fSk7dC5nZW9tZXRyeT1yLnRyYW5zZm9ybSh0Lmdlb21ldHJ5KSx0Lmdlb21ldHJ5LnpJbmRleD10aGlzLl96SW5kZXgsdGhpcy5fekluZGV4Kz10aGlzLl9zdWJIZWlnaHQsdC5oYXNPZmZzZXQ9ITF9cmV0dXJuIHRoaXN9fSx7a2V5OlwiY2xpY2thYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaWNrYWJsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NsaWNrYWJsZT10fX0se2tleTpcInJlbmRlcmVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmVuZGVyZXI9dH19LHtrZXk6XCJmZWF0dXJlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mZWF0dXJlc30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQuZmVhdHVyZXM7aWYoISgwLGIuaXNBcnJheSkoZSkpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiSW52YWxpZCBGZWF0dXJlc1wiKTt0aGlzLmNsZWFyRmVhdHVyZXMoKTtmb3IodmFyIG49ZSxpPUFycmF5LmlzQXJyYXkobikscj0wLG49aT9uOm5bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBvO2lmKGkpe2lmKHI+PW4ubGVuZ3RoKWJyZWFrO289bltyKytdfWVsc2V7aWYocj1uLm5leHQoKSxyLmRvbmUpYnJlYWs7bz1yLnZhbHVlfXZhciBhPW87dGhpcy5fYWRkRmVhdHVyZShhLCExKX10aGlzLl9mZWF0dXJlcz10fX0se2tleTpcImNvb3JkaW5hdGVTeXN0ZW1cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29vcmRpbmF0ZVN5c3RlbX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Nvb3JkaW5hdGVTeXN0ZW09dH19LHtrZXk6XCJwYXJlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFyZW50PXR9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PXh9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDUpLGw9aSh1KSxjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cih0aGlzLGUpO3ZhciBuPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4ubmFtZT10LG4uaGVpZ2h0PTAsbn1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcImhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oZWlnaHQ9dH19LHtrZXk6XCJuYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25hbWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9uYW1lPXR9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGE9bigyKSxzPWkoYSksdT0obmV3IHMuVmVjdG9yMygxLDAsMCksbmV3IHMuVmVjdG9yMygwLDEsMCksbmV3IHMuVmVjdG9yMygwLDAsMSksZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cih0aGlzLHQpfXJldHVybiBvKHQsbnVsbCxbe2tleTpcImdldFJlbENvb3JkXCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkscil7dmFyIG89dC5wcm9qZWN0T25WZWN0b3JTY2FsYXIoZSxuKSxhPXQucHJvamVjdE9uVmVjdG9yU2NhbGFyKGUsaSksdT10LnByb2plY3RPblZlY3RvclNjYWxhcihlLHIpO3JldHVybiBuZXcgcy5WZWN0b3IzKG8sYSx1KX19LHtrZXk6XCJnZXRSZWxDb29yZE9uUGxhbmVcIix2YWx1ZTpmdW5jdGlvbihlLG4saSl7dmFyIHI9dC5wcm9qZWN0T25WZWN0b3JTY2FsYXIoZSxuKSxvPXQucHJvamVjdE9uVmVjdG9yU2NhbGFyKGUsaSk7cmV0dXJuIG5ldyBzLlZlY3RvcjMocixvLDApfX0se2tleTpcImRpcmVjdGlvbmFsQWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuY2xvbmUoKSxyPWUuY2xvbmUoKTtyZXR1cm4gci5ub3JtYWxpemUoKSxpLngrPW4qci54LGkueSs9bipyLnksaS56Kz1uKnIueixpfX0se2tleTpcInByb2plY3RPblZlY3RvclNjYWxhclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZG90KGUpL2UubGVuZ3RoKCl9fSx7a2V5Olwic3ViVmVjdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm57eDplLngtdC54LHk6ZS55LXQueSx6OmUuei10Lnp8fDB9fX0se2tleTpcImdldEFuZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmdldFZlY3RvckRvdChlLG4pL3dpbmRvdy5NYXRoLnNxcnQodC5nZXRMZW5ndGhTcShlKSp0LmdldExlbmd0aFNxKG4pKTtyZXR1cm4gd2luZG93Lk1hdGguYWNvcyh0LmNsYW1wKGksLTEsMSkpfX0se2tleTpcImFuZ2xlVG9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT13aW5kb3cuTWF0aC5hdGFuMih0LnksdC54KTtyZXR1cm4gZTwwJiYoZSs9Mip3aW5kb3cuTWF0aC5QSSksZX19LHtrZXk6XCJnZXRWZWN0b3JEb3RcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LngqZS54K3QueSplLnkrdC56KmUuen19LHtrZXk6XCJnZXRMZW5ndGhTcVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LngqdC54K3QueSp0LnkrdC56KnQuen19LHtrZXk6XCJjbGFtcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gd2luZG93Lk1hdGgubWF4KGUsd2luZG93Lk1hdGgubWluKG4sdCkpfX1dKSx0fSgpKTtlLmRlZmF1bHQ9dX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNTEpLGw9aSh1KSxjPW4oMjkpLGg9aShjKSxmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuLGkpe3IodGhpcyxlKTt2YXIgYT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBhLl9jb25uZWN0aW9uPXQsaT8oYS5mcm9tPW5ldyBoLmRlZmF1bHQodC50byxuKSxhLnRvPW5ldyBoLmRlZmF1bHQodC5mcm9tLG4pKTooYS5mcm9tPW5ldyBoLmRlZmF1bHQodC5mcm9tLG4pLGEudG89bmV3IGguZGVmYXVsdCh0LnRvLG4pKSxhfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwiY29ubmVjdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0aW9ufX0se2tleTpcIndlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0aW9uLnJhbmt9fSx7a2V5OlwiYWx0aXR1ZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50by52ZXJ0ZXguYWx0aXR1ZGV9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PWZ9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkpe24odGhpcyx0KSx0aGlzLl92ZXJ0ZXg9ZSx0aGlzLl92ZXJ0ZXhMb2FkZXI9aSx0aGlzLm5lZWRDYWxjRXh0cmFQYXRoPSExLHRoaXMuZz0wLHRoaXMuaD0wfXJldHVybiBpKHQsW3trZXk6XCJmaW5kUGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wYXRocy5nZXQodC52ZXJ0ZXguaWQpfX0se2tleTpcIl9sb2FkUGF0aHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fcGF0aHN8fCh0aGlzLl9wYXRocz1uZXcgTWFwLHRoaXMuX3ZlcnRleExvYWRlci5sb2FkUGF0aHModGhpcy52ZXJ0ZXgsdGhpcy5uZWVkQ2FsY0V4dHJhUGF0aCkuZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9wYXRocy5zZXQoZS50by52ZXJ0ZXguaWQsZSl9KSl9fSx7a2V5OlwidG9TdHJpbmdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnRleC50b1N0cmluZygpfX0se2tleTpcImVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dHx8ISF0JiZ0aGlzLnZlcnRleC5lcXVhbHModC52ZXJ0ZXgpfX0se2tleTpcInBhcmVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJlbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXJlbnQ9dH19LHtrZXk6XCJ2ZXJ0ZXhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVydGV4fX0se2tleTpcInBhdGhzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRQYXRocygpLHRoaXMuX3BhdGhzLnZhbHVlcygpfX0se2tleTpcImdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2c9dH19LHtrZXk6XCJoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oPXR9fSx7a2V5OlwibmVlZENhbGNFeHRyYVBhdGhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmVlZENhbGNFeHRyYVBhdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9uZWVkQ2FsY0V4dHJhUGF0aD10fX1dLFt7a2V5OlwiY29tcGFyZVRvXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5nK3QuaC1lLmctZS5oPjA/LTE6MX19XSksdH0oKTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oMjYpLGw9aSh1KSxjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cih0aGlzLGUpO3ZhciBuPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gbi5fbGF5ZXJzPXt9LG59cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJhZGRMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmhhcyh0KSl7aWYodC5wYXJlbnQpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiYWRkTGF5ZXI6IEV4aXN0ZWQgcGFyZW50XCIpO3QucGFyZW50PXRoaXMsdGhpcy5fbGF5ZXJzW3QubmFtZV09dCx0aGlzLmVtaXQoXCJhZGRUb0dyb3VwXCIsdGhpcyx0KX19fSx7a2V5OlwicmVtb3ZlTGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmhhcyh0KSYmKHQucGFyZW50PW51bGwsZGVsZXRlIHRoaXMuX2xheWVyc1t0Lm5hbWVdLHRoaXMuZW1pdChcInJlbW92ZVRvR3JvdXBcIix0aGlzLHQpKX19LHtrZXk6XCJnZXRMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sYXllcnNbdF19fSx7a2V5OlwiZm9yZWFjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLl9sYXllcnMpdChlLHRoaXMuX2xheWVyc1tlXSl9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiZ0Lm5hbWUgaW4gdGhpcy5fbGF5ZXJzfX0se2tleTpcInNlYXJjaEZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0LG4pe2Zvcih2YXIgaSBpbiB0aGlzLl9sYXllcnMpe3ZhciByPXRoaXMuX2xheWVyc1tpXSxvPW51bGw7aWYociBpbnN0YW5jZW9mIGU/bz1yLnNlYXJjaEZlYXR1cmUodCxuKTpyLmlkPT09dCYmKG89ci5zZWFyY2hCeUlkKG4pKSxvKXJldHVybiBvfXJldHVybiBudWxsfX1dKSxlfShsLmRlZmF1bHQpO2UuZGVmYXVsdD1jfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9big1MSksbD1pKHUpLGM9bigyOSksaD1pKGMpLGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4saSl7cih0aGlzLGUpO3ZhciBhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7XG5yZXR1cm4gYS5fcGF0aD10LGEuX3JldmVyc2U9aSxpPyhhLmZyb209bmV3IGguZGVmYXVsdCh0LnRvLG4pLGEudG89bmV3IGguZGVmYXVsdCh0LmZyb20sbikpOihhLmZyb209bmV3IGguZGVmYXVsdCh0LmZyb20sbiksYS50bz1uZXcgaC5kZWZhdWx0KHQudG8sbikpLGF9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJwYXRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdGh9fSx7a2V5OlwicmV2ZXJzZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXZlcnNlfX0se2tleTpcIndlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXRoLnNoYXBlLmdldExlbmd0aCgpKih0aGlzLl9wYXRoLnJhbmsrMSl9fSx7a2V5OlwiYWx0aXR1ZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0aC5hbHRpdHVkZX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Zn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHM9big0OSksdT1pKHMpLGw9bigxNDApLGM9aShsKSxoPW4oNTIpLGY9aShoKSxkPW4oMTQzKSxwPWkoZCksZz1uKDE0Niksdj1pKGcpLG09big1NCkseT1pKG0pLF89bigyOCksYj1pKF8pLHg9big4KSx3PWkoeCksRT1uKDQpLFM9bigzKSxNPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBQcm9taXNlP24oMTQpLlByb21pc2U6UHJvbWlzZSxDPTEsST1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtyKHRoaXMsdCksdGhpcy5fZGF0YVNvdXJjZT1lLHRoaXMuX29wdGlvbnM9byh7fSxufHx7fSk7dmFyIGk9dGhpcy5fb3B0aW9ucyxhPWkudmVydGV4LHM9aS5wYXRoLHU9aS5jb25uZWN0aW9uLGw9aS5nLGg9aS5oO2lmKGEmJnMmJnUpe3ZhciBkPW5ldyB5LmRlZmF1bHQoYSxzLHUpO3RoaXMuX2FzdGFyPW5ldyBjLmRlZmF1bHQobHx8bmV3IGYuZGVmYXVsdCxofHxuZXcgcC5kZWZhdWx0LG5ldyB2LmRlZmF1bHQoZCkpLHRoaXMuX29mZkxpbmU9ITB9fXJldHVybiBhKHQsW3trZXk6XCJuYXZpZ2F0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29mZkxpbmU/bmV3IE0oZnVuY3Rpb24obixpKXt0cnl7dmFyIHI9dy5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludChuZXcgRS5nZW9tLkNvb3JkaW5hdGUodC5mcm9tX3gsdC5mcm9tX3kpKSxvPXcuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQobmV3IEUuZ2VvbS5Db29yZGluYXRlKHQudG9feCx0LnRvX3kpKSxhPWUuX2FzdGFyLmFzdGFyKHIsdC5mcm9tX3BsYW5hcl9ncmFwaCxvLHQudG9fcGxhbmFyX2dyYXBoLHQucGxhbmFyR3JhcGhJZExpc3R8fG51bGwpLHM9e30sdT1bXTtzLnR5cGU9XCJGZWF0dXJlQ29sbGVjdGlvblwiLHMuZmVhdHVyZXM9W107Zm9yKHZhciBsIGluIGEpe3ZhciBjPWFbbF0saD17fTtpZihjIGluc3RhbmNlb2YgYi5kZWZhdWx0KXUucHVzaChjKTtlbHNle2lmKGgudHlwZT1cIkZlYXR1cmVcIixoLnByb3BlcnRpZXM9e3BsYW5hcl9ncmFwaDpjLmZyb20udmVydGV4LnBsYW5hckdyYXBoSWQsaGFzVHJhbnNpdFBvaW50OiExLHBvaTpudWxsfSx1Lmxlbmd0aD4wKXt2YXIgZj1zLmZlYXR1cmVzLnBvcCgpO2YmJihmLnByb3BlcnRpZXMucG9pPXVbMF0uY29ubmVjdGlvbi5mcm9tTG9jYXRpb25JZCxzLmZlYXR1cmVzLnB1c2goZikpLGgucHJvcGVydGllcy5wb2k9dS5wb3AoKS5jb25uZWN0aW9uLnRvTG9jYXRpb25JZCx1PVtdfXZhciBkPWMucGF0aC5zaGFwZTtpZihjLnJldmVyc2Upe3ZhciBwPWQuZ2V0Q29vcmRpbmF0ZXMoKS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC54LG49dC55LGk9dC56O3JldHVybiBuZXcgRS5nZW9tLkNvb3JkaW5hdGUoZSxuLGkpfSk7cC5yZXZlcnNlKCksZD1uZXcgRS5nZW9tLkxpbmVTdHJpbmcody5kZWZhdWx0LmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHApLHcuZGVmYXVsdC5nZXRGYWN0b3J5KCkpfWguZ2VvbWV0cnk9dy5kZWZhdWx0LmdldEdlb1dyaXRlcigpLndyaXRlKGQpLHMuZmVhdHVyZXMucHVzaChoKX19ZS5fcmF3TmF2aWdhdGVzPXMsZS5fcGFyc2VOYXZpKHMpLG4oZS5fbmF2aWdhdGVzKX1jYXRjaCh0KXtpKHQpfX0pOnRoaXMuX2RhdGFTb3VyY2UucmVxdWVzdE5hdmlnYXRpb24odCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4oMCxTLmlzQm9vbGVhbikodCk/bnVsbDooZS5fcmF3TmF2aWdhdGVzPXQsZS5fcGFyc2VOYXZpKHQpLGUuX25hdmlnYXRlcyl9KX19LHtrZXk6XCJ0cmFuc2l0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fZGF0YVNvdXJjZS5yZXF1ZXN0VHJhbnNpdE5hdmlnYXRpb24odCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5fcGFyc2VOYXZpKHQpLGUuX25hdmlnYXRlc30pfX0se2tleTpcImdldE5hdmlnYXRlQnlQbGFuYXJHcmFwaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9uYXZpZ2F0ZXMmJnRoaXMuX25hdmlnYXRlc1t0XT90aGlzLl9uYXZpZ2F0ZXNbdF0uY29weSgpOm51bGx9fSx7a2V5OlwiZ2V0Q2xvc2VzdFBvaW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT13LmRlZmF1bHQuZ2V0RmFjdG9yeSgpLHI9aS5jcmVhdGVQb2ludChuZXcgRS5nZW9tLkNvb3JkaW5hdGUoZSxuKSksbz10aGlzLl9uYXZpZ2F0ZXNbdF0uZmVhdHVyZXMsYT1vLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZW9tZXRyeX0pLHM9aS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoYSksdT1uZXcgRS5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcChzLHIpLGw9dS5uZWFyZXN0UG9pbnRzKCk7cmV0dXJuIGwucG9wKCksbC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29weSgpfSl9fSx7a2V5OlwiX2dldERpc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0wO3JldHVybiBuPU1hdGguaHlwb3Q/TWF0aC5oeXBvdChlLngtdC54LGUueS10LnkpOk1hdGguc3FydChNYXRoLnBvdyhlLngtdC54LDIpK01hdGgucG93KGUueS10LnksMikpfX0se2tleTpcIl9nZXRBcnJheVBvaW50c0Rpc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZighdHx8IWUpcmV0dXJuIG51bGw7dmFyIG49bmV3IEUuZ2VvbS5Db29yZGluYXRlKHRbMF0sdFsxXSksaT1uZXcgRS5nZW9tLkNvb3JkaW5hdGUoZVswXSxlWzFdKTtyZXR1cm4gdGhpcy5fZ2V0RGlzdGFuY2UobixpKX19LHtrZXk6XCJnZXRXaG9sZURpc3RhbmNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kaXN0YW5jZXMsZT0wO2lmKHQpZm9yKHZhciBuIGluIHQpZm9yKHZhciBpPXRbbl0scj1pLG89QXJyYXkuaXNBcnJheShyKSxhPTAscj1vP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYobyl7aWYoYT49ci5sZW5ndGgpYnJlYWs7cz1yW2ErK119ZWxzZXtpZihhPXIubmV4dCgpLGEuZG9uZSlicmVhaztzPWEudmFsdWV9dmFyIHU9cztlKz11fXJldHVybiBlfX0se2tleTpcImdldERpc3RhbmNlc0J5UGxhbmFyR3JhcGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGlzdGFuY2VzP3RoaXMuX2Rpc3RhbmNlc1t0XTpudWxsfX0se2tleTpcImdldFBsYW5hckdyYXBoT3JkZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYXZpT3JkZXJ9fSx7a2V5OlwiZ2V0VHJhbnNpdEJ5UGxhbmFyR3JhcGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdHJhbnNpdD90aGlzLl90cmFuc2l0W3RdLmNvcHkoKTpudWxsfX0se2tleTpcImdldENvbm5lY3Rpb25JbmZvXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ubmVjdGlvbkluZm99fSx7a2V5OlwiZ2V0Q29ubmVjdGlvbkluZm9CeVBsYW5hckdyYXBoXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25JbmZvP3RoaXMuX2Nvbm5lY3Rpb25JbmZvW3RdOm51bGx9fSx7a2V5OlwiZ2V0UmF3RkNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYXdOYXZpZ2F0ZXN9fSx7a2V5OlwiX3BhcnNlTmF2aVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49e30saT10LmZlYXR1cmVzLHI9LTEsYT12b2lkIDAscz0wO3RoaXMuX25hdmlnYXRlcz17fSx0aGlzLl90cmFuc2l0PXt9LHRoaXMuX25hdmlPcmRlcj1bXSx0aGlzLl9jb25uZWN0aW9uSW5mbz17fSx0aGlzLl9kaXN0YW5jZXM9e307Zm9yKHZhciBsPWksYz1BcnJheS5pc0FycmF5KGwpLGg9MCxsPWM/bDpsW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgZjtpZihjKXtpZihoPj1sLmxlbmd0aClicmVhaztmPWxbaCsrXX1lbHNle2lmKGg9bC5uZXh0KCksaC5kb25lKWJyZWFrO2Y9aC52YWx1ZX12YXIgZD1mLHA9ZC5wcm9wZXJ0aWVzLGc9ZC5nZW9tZXRyeS5jb29yZGluYXRlcyx2PXAuaGFzVHJhbnNpdFBvaW50LG09cC5wb2kseT1wLnBsYW5hcl9ncmFwaCxfPXRoaXMuX25hdmlPcmRlclt0aGlzLl9uYXZpT3JkZXIubGVuZ3RoLTFdO2lmKF8hPT15JiYodGhpcy5fbmF2aU9yZGVyLnB1c2goeSksdGhpcy5fY29ubmVjdGlvbkluZm9beV09W10sdGhpcy5fZGlzdGFuY2VzW3ldPVtdLHRoaXMuX2Rpc3RhbmNlc1tfXSYmdGhpcy5fZGlzdGFuY2VzW19dLnB1c2gocykscz0wKSx5KXt2YXIgYj10aGlzLl9jcmVhdGVGcyh5LGUpO2E9dGhpcy5fY3JlYXRlRihiLGEseSxyLFwiTGluZVN0cmluZ1wiLG0pO2Zvcih2YXIgeD1nLHc9QXJyYXkuaXNBcnJheSh4KSxFPTAseD13P3g6eFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIFM7aWYodyl7aWYoRT49eC5sZW5ndGgpYnJlYWs7Uz14W0UrK119ZWxzZXtpZihFPXgubmV4dCgpLEUuZG9uZSlicmVhaztTPUUudmFsdWV9dmFyIE09UyxDPWEuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbYS5nZW9tZXRyeS5jb29yZGluYXRlcy5sZW5ndGgtMV0sST10aGlzLl9nZXRBcnJheVBvaW50c0Rpc3RhbmNlKEMsTSk7QyYmSTwuMDF8fChhLmdlb21ldHJ5LmNvb3JkaW5hdGVzLnB1c2goTS5jb25jYXQoKSkscys9SSl9fWlmKHYpe3ZhciBPPXRoaXMuX2NyZWF0ZUZzKHksbiksVD10aGlzLl9jcmVhdGVGKE8sbnVsbCx5LC0xLFwiUG9pbnRcIiksUD1nW2cubGVuZ3RoLTFdO2RlbGV0ZSBULnByb3BlcnRpZXMucG9pLFQuZ2VvbWV0cnkuY29vcmRpbmF0ZXMucHVzaChQLmNvbmNhdCgpKX1tJiZ0aGlzLl9jb25uZWN0aW9uSW5mb1t5XS5wdXNoKG8oe30scCkpLHI9eX10aGlzLl9kaXN0YW5jZXNbcl0ucHVzaChzKTtmb3IodmFyIEEgaW4gZSl0aGlzLl9uYXZpZ2F0ZXNbQV09dS5kZWZhdWx0LnBhcnNlKEEsZVtBXSk7Zm9yKHZhciBMIGluIG4pdGhpcy5fdHJhbnNpdFtMXT11LmRlZmF1bHQucGFyc2UoTCxuW0xdKX19LHtrZXk6XCJfY3JlYXRlRnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWVbdF07cmV0dXJuIG58fChuPXt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpbXX0sZVt0XT1uKSxufX0se2tleTpcIl9jcmVhdGVGXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZhciBhPWU7cmV0dXJuIG4hPT1pPyhhPXt0eXBlOlwiRmVhdHVyZVwiLHByb3BlcnRpZXM6e2lkOkMrKyxwb2k6W29dfSxnZW9tZXRyeTp7dHlwZTpyLGNvb3JkaW5hdGVzOltdfX0sdC5mZWF0dXJlcy5wdXNoKGEpKTphLnByb3BlcnRpZXMucG9pWzFdPW8sYX19XSksdH0oKTtlLmRlZmF1bHQ9SX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpfXJldHVybiBpKHQsW3trZXk6XCJnZW5lcmF0b3JcIix2YWx1ZTpmdW5jdGlvbih0KXtjb25zb2xlLmxvZyhcIlBsZWFzZSBzZXQgU3R5bGVHZW5lcmF0b3IgdG8gXCIrdC5uYW1lK1wiIExheWVyXCIpfX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCksdGhpcy5jbGllbnRYPXRoaXMuY2xpZW50WT10aGlzLnBhZ2VYPXRoaXMucGFnZVk9MH1yZXR1cm4gaSh0LFt7a2V5OlwiY2xpZW50WFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGllbnRYfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2xpZW50WD10fX0se2tleTpcImNsaWVudFlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xpZW50WX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NsaWVudFk9dH19LHtrZXk6XCJwYWdlWFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlWH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhZ2VYPXR9fSx7a2V5OlwicGFnZVlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZVl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlWT10fX0se2tleTpcInNjcmVlblhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NyZWVuWH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjcmVlblg9dH19LHtrZXk6XCJzY3JlZW5ZXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjcmVlbll9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY3JlZW5ZPXR9fSx7a2V5OlwiZGV0YWlsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RldGFpbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RldGFpbD10fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCksdGhpcy50b3VjaGVzPVtdLHRoaXMudHlwZT1cIm5vbmVcIix0aGlzLnJvdGF0ZT10aGlzLnNjYWxlPTB9cmV0dXJuIGkodCxbe2tleTpcInRvdWNoZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG91Y2hzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdG91Y2hzPXR9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdHlwZT10fX0se2tleTpcInJvdGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb3RhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yb3RhdGU9dH19LHtrZXk6XCJzY2FsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlPXR9fSx7a2V5OlwidGFyZ2V0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RhcmdldD10fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17bmFtZTpcIm5hZ3JhbmQtd2ViZ2xcIix2ZXJzaW9uOlwiMy4wLjBcIixkZXNjcmlwdGlvbjpcIlwiLG1haW46XCJpbmRleC5qc1wiLHNjcmlwdHM6e1wid2VicGFjay1kZXZcIjpcIndlYnBhY2stZGV2LXNlcnZlciAtLXBvcnQgODA4MCAtLWNvbmZpZyAuL3NjcmlwdHMvd2VicGFjay5jb25maWcuYmFiZWwuanMgLS1wcm9ncmVzcyAtLWRpc3BsYXktZXJyb3ItZGV0YWlsc1wiLFwid2VicGFjay1idWlsZFwiOlwiIHdlYnBhY2sgLS1wcm9ncmVzcyAtLWNvbmZpZyAuL3NjcmlwdHMvd2VicGFjay5jb25maWcuYmFiZWwuanNcIixzdGFydDpcIk5PREVfRU5WPWRldmVsb3BtZW50IEJVSUxEX0VOVj1zdGFuZGFyZCBucG0gcnVuIHdlYnBhY2stZGV2XCIsXCJidWlsZC1kZXZcIjpcIk5PREVfRU5WPWRldmVsb3BtZW50IEJVSUxEX0VOVj1zdGFuZGFyZCBucG0gcnVuIHdlYnBhY2stYnVpbGRcIixidWlsZDpcIk5PREVfRU5WPXByb2R1Y3Rpb24gQlVJTERfRU5WPXN0YW5kYXJkIG5wbSBydW4gd2VicGFjay1idWlsZFwiLFwiYnVpbGQtbGl0ZVwiOlwiTk9ERV9FTlY9cHJvZHVjdGlvbiBCVUlMRF9FTlY9bGl0ZSBucG0gcnVuIHdlYnBhY2stYnVpbGRcIixcInN0YXJ0OndpblwiOlwic2V0IE5PREVfRU5WPWRldmVsb3BtZW50JiYgc2V0IEJVSUxEX0VOVj1zdGFuZGFyZCYmIG5wbSBydW4gd2VicGFjay1kZXZcIixcImJ1aWxkOndpblwiOlwic2V0IE5PREVfRU5WPWRldmVsb3BtZW50JiYgc2V0IEJVSUxEX0VOVj1zdGFuZGFyZCYmIG5wbSBydW4gd2VicGFjay1idWlsZFwiLFwiYnVpbGQtbGl0ZTp3aW5cIjpcInNldCBOT0RFX0VOVj1kZXZlbG9wbWVudCYmIHNldCBCVUlMRF9FTlY9bGl0ZSYmIG5wbSBydW4gd2VicGFjay1idWlsZFwiLHByZWJ1aWxkOlwibnBtIHJ1biBjbGVhblwiLFwicHJlYnVpbGQ6d2luXCI6XCJucG0gcnVuIGNsZWFuXCIsY2xlYW46XCJyaW1yYWYgLi9idWlsZFwiLHRlc3Q6XCJtb2NoYSAuL3Rlc3QvKiovKi5zcGVjLmpzXCIsXCJidWlsZC1leGFtcGxlc1wiOlwibWV0YWxzbWl0aFwiLGpzZG9jOlwicmltcmFmIC4vZG9jcyAmJiBqc2RvYyBzcmMgbGliL3RocmVlLWV4dC9wbGFuZUxpbmUgbGliL3RocmVlLWV4dC90dWJlIC1SIHNyYy9SRUFETUUubWQgLXIgLWMgLi9jb25mLmpzb24gLWQgZG9jc1wifSxjb25maWc6e2NvbW1pdGl6ZW46e3BhdGg6XCJjei1jb252ZW50aW9uYWwtY2hhbmdlbG9nXCJ9fSxhdXRob3I6XCJQYWxtYXAuSW5jIDxzZGtAcGFsbWFwbHVzLmNvbT5cIixsaWNlbnNlOlwiVU5MSUNFTlNFRFwiLGRldkRlcGVuZGVuY2llczp7XCJiYWJlbC1jbGlcIjpcIl42LjEwLjFcIixcImJhYmVsLWVzbGludFwiOlwiXjYuMS4yXCIsXCJiYWJlbC1sb2FkZXJcIjpcIl42LjIuNFwiLFwiYmFiZWwtcHJlc2V0LWVzMjAxNVwiOlwiXjYuMjQuMFwiLFwiYmFiZWwtcHJlc2V0LXN0YWdlLTNcIjpcIl42LjExLjBcIixcImJhYmVsLXBsdWdpbi10cmFuc2Zvcm0tZXMyMDE1LWZvci1vZlwiOlwiXjYuMjMuMFwiLFwiYmFiZWwtcGx1Z2luLWVzNi1wcm9taXNlXCI6XCJeMS4xLjFcIixcImJhYmVsLXBsdWdpbi10cmFuc2Zvcm0tb2JqZWN0LXJlc3Qtc3ByZWFkXCI6XCJeNi4yMy4wXCIsXCJiYWJlbC1wb2x5ZmlsbFwiOlwiXjYuMjMuMFwiLFwiYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1jbGFzcy1wcm9wZXJ0aWVzXCI6XCJeNi4yMy4wXCIsY2hhaTpcIl4zLjUuMFwiLFwiY3NzLWxvYWRlclwiOlwiXjAuMjMuMVwiLFwiY3otY29udmVudGlvbmFsLWNoYW5nZWxvZ1wiOlwiXjEuMS42XCIsZGVidWc6XCJeMi42LjBcIixkb2NkYXNoOlwiXjAuNC4wXCIsXCJlczYtcHJvbWlzZVwiOlwiXjQuMC41XCIsZXNsaW50OlwiXjMuMy4xXCIsXCJlc2xpbnQtbG9hZGVyXCI6XCJeMS40LjFcIixcImVzbGludC1wbHVnaW4tZmxvdy12YXJzXCI6XCJeMC40LjBcIixcImV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblwiOlwiXjEuMC4xXCIsXCJmaWxlLWxvYWRlclwiOlwiXjAuOS4wXCIsaGFuZGxlYmFyczpcIl40LjAuMlwiLFwiaHRtbC1sb2FkZXJcIjpcIl4wLjQuM1wiLFwiaHRtbC13ZWJwYWNrLXBsdWdpblwiOlwiXjIuMjIuMFwiLFwiaW1hZ2Utd2VicGFjay1sb2FkZXJcIjpcIl4yLjAuMFwiLGpzZG9jOlwiXjMuNC4zXCIsXCJqc29uLWxvYWRlclwiOlwiXjAuNS40XCIsbWV0YWxzbWl0aDpcIl4yLjMuMFwiLFwibWV0YWxzbWl0aC1sYXlvdXRzXCI6XCIxLjguMFwiLG1vY2hhOlwiXjIuNS4zXCIsXCJwb3N0Y3NzLWxvYWRlclwiOlwiXjAuOS4xXCIsXCJwb3N0Y3NzLXB4dG9yZW1cIjpcIl40LjAuMVwiLHJpbXJhZjpcIl4yLjUuM1wiLFwic3R5bGUtbG9hZGVyXCI6XCJeMC4xMy4xXCIsXCJ1cmwtbG9hZGVyXCI6XCJeMC41LjdcIix3ZWJwYWNrOlwiXjEuMTMuMVwiLFwid2VicGFjay1kZXYtc2VydmVyXCI6XCJeMS4xNC4xXCIsXCJ3b3JrZXItbG9hZGVyXCI6XCJeMC43LjFcIn0sZGVwZW5kZW5jaWVzOntcIm9iamVjdC1hc3NpZ25cIjpcIl40LjEuMFwiLHJidXNoOlwiXjIuMC4xXCIsaGFtbWVyanM6XCJeMi4wLjhcIixcInN0cmluZy1oYXNoXCI6XCJeMS4xLjBcIixwcmlvcml0eXF1ZXVlanM6XCJeMS4wLjBcIixcInR3ZWVuLmpzXCI6XCJ+MTYuNi4wXCIsXCJwb2x5bGluZS1ub3JtYWxzXCI6XCJeMi4wLjBcIixcInRocmVlLWxpbmUtMmRcIjpcIl4xLjEuNlwiLFwiYXMtbnVtYmVyXCI6XCJeMS4wLjBcIixcIkBodWdoc2svZnVsbHRpbHRcIjpcIl4wLjcuMVwifX19LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KSx0aGlzLl9jYWxsYmFja3M9e319cmV0dXJuIGkodCxbe2tleTpcIm9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9jYWxsYmFja3M7cmV0dXJuIG5bdF09blt0XXx8W10sblt0XS5wdXNoKGUpLHRoaXN9fSx7a2V5Olwib25jZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPWZ1bmN0aW9uIGkoKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxvPUFycmF5KHIpLGE9MDthPHI7YSsrKW9bYV09YXJndW1lbnRzW2FdO24ub2ZmKHQsaSksZS5hcHBseShuLG8pfTtyZXR1cm4gaS5mbj1lLHRoaXMub24odCxpKSx0aGlzfX0se2tleTpcIm9mZlwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2FsbGJhY2tzO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KXJldHVybiBuPXt9LHRoaXM7dmFyIGk9blt0XTtpZighaSlyZXR1cm4gdGhpcztpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgZSlyZXR1cm4gZGVsZXRlIG5bdF0sdGhpcztmb3IodmFyIHI9MCxvPWkubGVuZ3RoO3I8bztyKyspe3ZhciBhPWlbcl07aWYoYT09PWV8fGEuZm49PT1lKXtpLnNwbGljZShyLDEpO2JyZWFrfX1yZXR1cm4gdGhpc319LHtrZXk6XCJlbWl0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY2FsbGJhY2tzW3RdLG49ZSYmZS5sZW5ndGg7aWYobil7Zm9yKHZhciBpPWFyZ3VtZW50cy5sZW5ndGgscj1BcnJheShpPjE/aS0xOjApLG89MTtvPGk7bysrKXJbby0xXT1hcmd1bWVudHNbb107Zm9yKHZhciBhPTA7YTxuO2ErKyllW2FdLmFwcGx5KHRoaXMscil9cmV0dXJuIHRoaXN9fSx7a2V5OlwibGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhbGxiYWNrc1t0XXx8W119fSx7a2V5OlwiaGFzTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmxpc3RlbmVycyh0KS5sZW5ndGh9fV0pLHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiByKHQpe3JldHVybiBuZXcgYyhmdW5jdGlvbihlLG4pe3Qub25sb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZSh0LnJlc3VsdCl9LHQub25lcnJvcj1mdW5jdGlvbigpe3JldHVybiBuKHQuZXJyb3IpfX0pfWZ1bmN0aW9uIG8odCl7dmFyIGU9bmV3IEZpbGVSZWFkZXI7cmV0dXJuIGUucmVhZEFzQXJyYXlCdWZmZXIodCkscihlKX1mdW5jdGlvbiBhKHQpe3ZhciBlPW5ldyBGaWxlUmVhZGVyO3JldHVybiBlLnJlYWRBc1RleHQodCkscihlKX1mdW5jdGlvbiBzKHQpe3ZhciBlPW5ldyBGb3JtRGF0YTtyZXR1cm4gdC50cmltKCkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24odCl7aWYodCl7dmFyIG49dC5zcGxpdChcIj1cIiksaT1uLnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csXCIgXCIpLHI9bi5qb2luKFwiPVwiKS5yZXBsYWNlKC9cXCsvZyxcIiBcIik7ZS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KGkpLGRlY29kZVVSSUNvbXBvbmVudChyKSl9fSksZX1mdW5jdGlvbiB1KHQpe3JldHVybiB0LmJvZHlVc2VkP2MucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJCb2R5IGxvY2tlZCB5ZXRcIikpOnZvaWQodC5ib2R5VXNlZD0hMCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxjPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBQcm9taXNlP24oMTQpLlByb21pc2U6UHJvbWlzZSxoPXtzdHJpbmc6XCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIixqc29uOlwiYXBwbGljYXRpb24vanNvblwiLHVybGVuY29kZWQ6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOFwifSxmPVwiRmlsZVJlYWRlclwiaW4gc2VsZiYmXCJCbG9iXCJpbiBzZWxmLGQ9XCJGb3JtRGF0YVwiaW4gc2VsZixwPVwiQXJyYXlCdWZmZXJcImluIHNlbGYsZz1cIlVSTFNlYXJjaFBhcmFtc1wiaW4gc2VsZix2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2kodGhpcyx0KSx0aGlzLmJvZHlVc2VkPSExfXJldHVybiBsKHQsW3trZXk6XCJfaW5pdEJvZHlcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9ib2R5SW5pdD10LFwic3RyaW5nXCI9PXR5cGVvZiB0KXRoaXMuX2JvZHlUZXh0PXQ7ZWxzZSBpZihmJiZCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpKXRoaXMuX2JvZHlCbG9iPXQ7ZWxzZSBpZihwJiZBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSk7ZWxzZSBpZihkJiZGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSl0aGlzLl9ib2R5Rm9ybURhdGE9dDtlbHNlIGlmKGcmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSl0aGlzLl9ib2R5VGV4dD10LnRvU3RyaW5nKCk7ZWxzZXtpZih0KXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGJvZHkgdHlwZVwiKTt0aGlzLl9ib2R5VGV4dD1cIlwifWlmKCF0aGlzLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1UeXBlXCIpKWlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXRyeXtKU09OLnBhcnNlKHQpLHRoaXMuaGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIixoLmpzb24pfWNhdGNoKHQpe3RoaXMuaGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIixoLnN0cmluZyl9ZWxzZSB0aGlzLl9ib2R5QmxvYiYmdGhpcy5fYm9keUJsb2IudHlwZT90aGlzLmhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsdGhpcy5fYm9keUJsb2IudHlwZSk6ZyYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpJiZ0aGlzLmhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsaC51cmxlbmNvZGVkKX19LHtrZXk6XCJibG9iXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD11KHRoaXMpO2lmKHQpcmV0dXJuIHQ7aWYoZil7aWYodGhpcy5fYm9keUJsb2IpcmV0dXJuIGMucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYik7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcihcImNvdWxkIG5vdCByZWFkIGZvcm1EYXRhIGJvZHkgYXMgYmxvYlwiKTtyZXR1cm4gYy5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKX19fSx7a2V5OlwiYXJyYXlCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJsb2IoKS50aGVuKG8pfX0se2tleTpcImZvcm1EYXRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihkKXJldHVybiB0aGlzLnRleHQoKS50aGVuKHMpfX0se2tleTpcImpzb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpfX0se2tleTpcInRleHRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXUodGhpcyk7aWYodClyZXR1cm4gdDtpZihmKXtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gYSh0aGlzLl9ib2R5QmxvYik7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcihcImNvdWxkIG5vdCByZWFkIGZvcm1EYXRhIGJvZHkgYXMgdGV4dFwiKX1yZXR1cm4gYy5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KX19XSksdH0oKTtlLmRlZmF1bHQ9dn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gcyh0KXt2YXIgZT10LnRvVXBwZXJDYXNlKCk7aWYoZy5pbmRleE9mKGUpIT09LTEpcmV0dXJuIGU7dGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBtZXRob2QgbmFtZVwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgdT1uKDEpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxjPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0saD1uKDM5KSxmPWkoaCksZD1uKDIwKSxwPWkoZCksZz1bXCJERUxFVEVcIixcIkdFVFwiLFwiSEVBRFwiLFwiT1BUSU9OU1wiLFwiUE9TVFwiLFwiUFVUXCJdLHY9e21vZGU6XCJjb3JzXCIsbWV0aG9kOlwiR0VUXCIsY3JlZGllbnRpYWxzOlwib21pdFwifSxtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuKXtyKHRoaXMsZSk7dmFyIGk9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKSxhPXUoe30sdixuKSxsPW4uYm9keTtpZihlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpKXtpZih0LmJvZHlVc2VkKXRocm93IG5ldyBUeXBlRXJyb3IoXCJCb2R5IGFscmVhZHkgbG9ja2VkXCIpO2x8fChsPXQuYm9keSx0LmJvZHlVc2VkPSEwKSxhLmhlYWRlcnN8fChpLmhlYWRlcnM9bmV3IHAuZGVmYXVsdCh0LmhlYWRlcnMpKSxpLnVybD10LnVybCxpLm1vZGU9dC5tb2RlLGkubWV0aG9kPXQubWV0aG9kLGkuY3JlZGllbnRpYWxzPXQuY3JlZGllbnRpYWxzfWVsc2UgaS51cmw9dDtpZihpLm1ldGhvZD1zKGEubWV0aG9kfHxpLm1ldGhvZCksIWEuaGVhZGVycyYmaS5oZWFkZXJzfHwoaS5oZWFkZXJzPW5ldyBwLmRlZmF1bHQoYS5oZWFkZXJzKSksaS5tb2RlPWEubW9kZXx8aS5tb2RlLGkuY3JlZGllbnRpYWxzPWEuY3JlZGllbnRpYWxzfHxpLmNyZWRpZW50aWFscyxpLnJlZmVycmVyPW51bGwsKFwiR0VUXCI9PT1pLm1ldGhvZHx8XCJIRUFEXCI9PT1pLm1ldGhvZCkmJmwpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzXCIpO3JldHVybiBjKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9pbml0Qm9keVwiLGkpLmNhbGwoaSxsKSxpfXJldHVybiBhKGUsdCksbChlLFt7a2V5OlwiY2xvbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzKX19XSksZX0oZi5kZWZhdWx0KTtlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sbD1uKDM5KSxjPWkobCksaD1uKDIwKSxmPWkoaCksZD1bMzAxLDMwMiwzMDMsMzA3LDMwOF0scD17c3RhdHVzOjIwMCxzdGF0dXNUZXh0OlwiT0tcIixib2R5Om51bGwsdHlwZTpcImRlZmF1bHRcIn0sZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpwO3IodGhpcyxlKTt2YXIgaT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO2lmKG4uc3RhdHVzPDIwMHx8bi5zdGF0dXM+PTU5OSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcmVzcG9uc2Ugc3RhdHVzIGNvZGVcIik7dmFyIGE9bi5zdGF0dXMscz1uLnN0YXR1c1RleHQsbD1uLmhlYWRlcnMsYz1uLnVybDtyZXR1cm4gaS5zdGF0dXM9YSxpLm9rPWE+PTIwMCYmaS5zdGF0dXM8MzAwLGkuc3RhdHVzVGV4dD1zLGkuaGVhZGVycz1sIGluc3RhbmNlb2YgZi5kZWZhdWx0P2w6bmV3IGYuZGVmYXVsdChsKSxpLnVybD1jLHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX2luaXRCb2R5XCIsaSkuY2FsbChpLHQpLGl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zdGF0dXMsbj10aGlzLnN0YXR1c1RleHQsaT10aGlzLmhlYWRlcnMscj10aGlzLnVybDtyZXR1cm4gbmV3IGUodGhpcyx7c3RhdHVzOnQsc3RhdHVzVGV4dDpuLGhlYWRlcnM6bmV3IGYuZGVmYXVsdChpKSx1cmw6cn0pfX1dLFt7a2V5OlwiZXJyb3JcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBlKG51bGwse3N0YXR1czowLHN0YXR1c1RleHQ6XCJcIn0pO3JldHVybiB0LnR5cGU9XCJlcnJvclwiLHR9fSx7a2V5OlwicmVkaXJlY3RcIix2YWx1ZTpmdW5jdGlvbih0LG4pe2lmKGQuaW5kZXhPZihuKT09PS0xKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCByZWRpcmVjdCBzdGF0dXMgY29kZVwiKTtyZXR1cm4gbmV3IGUobnVsbCx7c3RhdHVzOm4saGVhZGVyczp7bG9jYXRpb246dH19KX19XSksZX0oYy5kZWZhdWx0KTtlLmRlZmF1bHQ9Z30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oMiksbz1pKHIpO2UuZGVmYXVsdD17Y2VudGVyOm5ldyBvLlZlY3RvcjIoMCwwKSxsZWZ0Om5ldyBvLlZlY3RvcjIoMSwwKSx0b3BMZWZ0Om5ldyBvLlZlY3RvcjIoMSwtMSksdG9wUmlnaHQ6bmV3IG8uVmVjdG9yMigtMSwtMSkscmlnaHQ6bmV3IG8uVmVjdG9yMigtMSwwKSxib3R0b21MZWZ0Om5ldyBvLlZlY3RvcjIoMSwxKSxib3R0b21SaWdodDpuZXcgby5WZWN0b3IyKC0xLDEpfX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9bigxKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbD1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGM9bigxMSksaD1pKGMpLGY9big3KSxkPW4oMykscD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3IodGhpcyxlKTt2YXIgbj10Lm5hbWU/XCJmbG9vci1cIit0Lm5hbWU6XCJmbG9vclwiLGk9dC5jbGFzc05hbWU/XCIgXCIrdC5jbGFzc05hbWU6XCJcIixhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLG4scyh7cG9zaXRpb246XCJib3R0b21yaWdodFwifSx0KSkpO3JldHVybiBhLl9lbGVtZW50JiZjb25zb2xlLndhcm4oXCJGbG9vckNvbnRyb2w6IEVsZW1lbnQgd2lsbCBiZSBvdmVycmlkZWRcIiksYS5mbG9vck1hcD17fSxhLmRlZmF1bHRGbG9vcj1udWxsLGEuX2VsZW1lbnQ9Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJuZ3ItZmxvb3Itc3dpdGNoZXIgbmdyLWJhclwiK2kpLGEuX29uSXRlbUNsaWNrPWEuX29uSXRlbUNsaWNrLmJpbmQoYSksYX1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcIl9vbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLl9zZXRGbG9vckxpc3QoKSx0aGlzLl9zZXRDdXJyZW50Rmxvb3IoKSx0aGlzfX0se2tleTpcInNldEZsb29yTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZsb29yTGlzdD10LHRoaXMuX3NldEZsb29yTGlzdCgpLHRoaXN9fSx7a2V5OlwiX29uSXRlbUNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLGYuRE9NVXRpbHMuaGFzQ2xhc3ModC50YXJnZXQsXCJuZ3ItZGlzYWJsZWRcIik/dGhpczoodGhpcy5maXJlKFwiY2hhbmdlXCIse2Zyb206dGhpcy5jdXJyZW50Rmxvb3IsdG86dC50YXJnZXQuZmxvb3IsdGFyZ2V0Q29udHJvbDp0aGlzfSksdGhpcyl9fSx7a2V5OlwiX3NldEZsb29yTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwJiZ0aGlzLmZsb29yTGlzdCl7Zm9yKHRoaXMuZmxvb3JNYXA9e307dGhpcy5fZWxlbWVudC5maXJzdENoaWxkOyl0aGlzLl9lbGVtZW50LmZpcnN0Q2hpbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25JdGVtQ2xpY2spLHRoaXMuX2VsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fZWxlbWVudC5maXJzdENoaWxkKTtmb3IodmFyIHQ9dGhpcy5mbG9vckxpc3QsZT1BcnJheS5pc0FycmF5KHQpLG49MCx0PWU/dDp0W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaTtpZihlKXtpZihuPj10Lmxlbmd0aClicmVhaztpPXRbbisrXX1lbHNle2lmKG49dC5uZXh0KCksbi5kb25lKWJyZWFrO2k9bi52YWx1ZX12YXIgcj1pLG89Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiYVwiLFwiXCIsdGhpcy5fZWxlbWVudCk7by5pbm5lckhUTUw9ci5hZGRyZXNzLG8uaHJlZj1cIiNcIixvLmZsb29yPXIuaWQsby5hbHRpdHVkZT1yLmFsdGl0dWRlLG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25JdGVtQ2xpY2spLHRoaXMuZmxvb3JNYXBbci5pZF09b319cmV0dXJuIHRoaXN9fSx7a2V5OlwiZ2V0Q3VycmVudEZsb29yXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50Rmxvb3J9fSx7a2V5OlwiX2Rpc2FibGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZsb29yTWFwW3RdO2UmJmYuRE9NVXRpbHMuYWRkQ2xhc3MoZSxcIm5nci1kaXNhYmxlZFwiKX19LHtrZXk6XCJfZW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5mbG9vck1hcFt0XTtlJiZmLkRPTVV0aWxzLnJlbW92ZUNsYXNzKGUsXCJuZ3ItZGlzYWJsZWRcIil9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCgwLGQuaXNCbGFuaykodCkpZm9yKHZhciBlIGluIHRoaXMuZmxvb3JNYXApdGhpcy5fZGlzYWJsZShlKTtlbHNlIHRoaXMuX2Rpc2FibGUodCk7cmV0dXJuIHRoaXN9fSx7a2V5OlwiZW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoKDAsZC5pc0JsYW5rKSh0KSlmb3IodmFyIGUgaW4gdGhpcy5mbG9vck1hcCl0aGlzLl9lbmFibGUoZSk7ZWxzZSB0aGlzLl9lbmFibGUodCk7cmV0dXJuIHRoaXN9fSx7a2V5OlwiaGFuZGxlQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoKDAsZC5pc0JsYW5rKShlKSlyZXR1cm4gdGhpczt2YXIgaT1bXTtpZigoMCxkLmlzQmxhbmspKHQpKWZvcih2YXIgciBpbiB0aGlzLmZsb29yTWFwKWkucHVzaChyKTtlbHNlKDAsZC5pc0FycmF5KSh0KSYmKGk9dCk7Zm9yKHZhciBvPWksYT1BcnJheS5pc0FycmF5KG8pLHM9MCxvPWE/bzpvW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgdTtpZihhKXtpZihzPj1vLmxlbmd0aClicmVhazt1PW9bcysrXX1lbHNle2lmKHM9by5uZXh0KCkscy5kb25lKWJyZWFrO3U9cy52YWx1ZX12YXIgbD11LGM9dGhpcy5mbG9vck1hcFtsXTtjJiZuKGMsZSl9cmV0dXJuIHRoaXN9fSx7a2V5OlwiYWRkQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmhhbmRsZUNsYXNzKHQsZSxmLkRPTVV0aWxzLmFkZENsYXNzKX19LHtrZXk6XCJyZW1vdmVDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaGFuZGxlQ2xhc3ModCxlLGYuRE9NVXRpbHMucmVtb3ZlQ2xhc3MpfX0se2tleTpcInNldEN1cnJlbnRGbG9vclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3VycmVudEZsb29yPXQsdGhpcy5fc2V0Q3VycmVudEZsb29yKCksKDAsZC5pc0Z1bmN0aW9uKShlKSYmZSh0KSx0aGlzfX0se2tleTpcIl9zZXRDdXJyZW50Rmxvb3JcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9tYXB8fCF0aGlzLl9lbGVtZW50KXJldHVybiB0aGlzO3ZhciB0PXRoaXMuZmxvb3JNYXBbdGhpcy5jdXJyZW50Rmxvb3JdO2lmKHQpe2Zvcih2YXIgZSBpbiB0aGlzLmZsb29yTWFwKXt2YXIgbj10aGlzLmZsb29yTWFwW2VdO2YuRE9NVXRpbHMucmVtb3ZlQ2xhc3MobixcInNlbGVjdGVkXCIpfWYuRE9NVXRpbHMuYWRkQ2xhc3ModCxcInNlbGVjdGVkXCIpfXJldHVybiB0aGlzfX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1wfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5EaW1lbnNpb25Db250cm9sPWUuVG9nZ2xlQ29udHJvbD1lLk11bHRpRmxvb3JDb250cm9sPWUuRmFjaWxpdHlDb250cm9sPWUuWm9vbUNvbnRyb2w9ZS5TbGlkZXJDb250cm9sPWUuU2NhbGVDb250cm9sPWUuRmxvb3JDb250cm9sPWUuQ29udHJvbD1lLkNvbXBhc3NDb250cm9sPXZvaWQgMDt2YXIgcj1uKDExMyksbz1pKHIpLGE9bigxMSkscz1pKGEpLHU9big0MyksbD1pKHUpLGM9bigxMTcpLGg9aShjKSxmPW4oMTE4KSxkPWkoZikscD1uKDExOSksZz1pKHApLHY9bigxMTUpLG09aSh2KSx5PW4oMTE2KSxfPWkoeSksYj1uKDIyKSx4PWkoYiksdz1uKDExNCksRT1pKHcpO2UuQ29tcGFzc0NvbnRyb2w9by5kZWZhdWx0LGUuQ29udHJvbD1zLmRlZmF1bHQsZS5GbG9vckNvbnRyb2w9bC5kZWZhdWx0LGUuU2NhbGVDb250cm9sPWguZGVmYXVsdCxlLlNsaWRlckNvbnRyb2w9ZC5kZWZhdWx0LGUuWm9vbUNvbnRyb2w9Zy5kZWZhdWx0LGUuRmFjaWxpdHlDb250cm9sPW0uZGVmYXVsdCxlLk11bHRpRmxvb3JDb250cm9sPV8uZGVmYXVsdCxlLlRvZ2dsZUNvbnRyb2w9eC5kZWZhdWx0LGUuRGltZW5zaW9uQ29udHJvbD1FLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGE9bigyMykscz1pKGEpLHU9bigxNiksbD1pKHUpLGM9bigyNiksaD1pKGMpLGY9bigyNyksZD1pKGYpLHA9big0KSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3IodGhpcyx0KX1yZXR1cm4gbyh0LG51bGwsW3trZXk6XCJmZWF0dXJlUG9seWdvbjJQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYoISh0IGluc3RhbmNlb2Ygcy5kZWZhdWx0KSlyZXR1cm4gY29uc29sZS53YXJuKFwiSW52YWxpZCBGZWF0dXJlXCIpLG51bGw7dmFyIG49dC5nZW9tZXRyeS5nZXRHZW9tZXRyeVR5cGUoKTtpZihcIlBvbHlnb25cIiE9PW4mJlwiTXVsdGlQb2x5Z29uXCIhPT1uKXJldHVybiBjb25zb2xlLndhcm4oXCJJbnZhbGlkIEdlb21ldHJ5XCIpLG51bGw7dmFyIGk9e30scj10Lmdlb21ldHJ5O2lmKGUpcj1yLmdldEludGVyaW9yUG9pbnQoKTtlbHNle3ZhciBvPXIuZ2V0RW52ZWxvcGVJbnRlcm5hbCgpO3I9ci5mYWN0b3J5LmNyZWF0ZVBvaW50KG5ldyBwLmdlb20uQ29vcmRpbmF0ZShvLm1pbngrKG8ubWF4eC1vLm1pbngpLzIsby5taW55KyhvLm1heHktby5taW55KS8yLDApKX1mb3IodmFyIGEgaW4gdC5wcm9wZXJ0aWVzKWlbYV09dC5wcm9wZXJ0aWVzW2FdO3JldHVybiBuZXcgcy5kZWZhdWx0KHIsaSl9fSx7a2V5OlwiZmVhdHVyZUNvbGxlY3Rpb25Qb2x5Z29uMlBvaW50XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZighKGUgaW5zdGFuY2VvZiBsLmRlZmF1bHQpKXJldHVybiBjb25zb2xlLndhcm4oXCJJbnZhbGlkIEZlYXR1cmVDb2xsZWN0aW9uXCIpLG51bGw7Zm9yKHZhciBpPW5ldyBsLmRlZmF1bHQoZS5uYW1lKSxyPVtdLG89dm9pZCAwLGE9dm9pZCAwLHM9ZS5mZWF0dXJlcyx1PUFycmF5LmlzQXJyYXkocyksYz0wLHM9dT9zOnNbU3ltYm9sLml0ZXJhdG9yXSgpOzspe2lmKHUpe2lmKGM+PXMubGVuZ3RoKWJyZWFrO289c1tjKytdfWVsc2V7aWYoYz1zLm5leHQoKSxjLmRvbmUpYnJlYWs7bz1jLnZhbHVlfWE9dC5mZWF0dXJlUG9seWdvbjJQb2ludChvLG4pLGEmJnIucHVzaChhKX1yZXR1cm4gaS5mZWF0dXJlcz1yLGl9fSx7a2V5OlwiZnVja1lvdUJpdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdO2lmKCEodCBpbnN0YW5jZW9mIHMuZGVmYXVsdCkpcmV0dXJuIGNvbnNvbGUud2FybihcImZfX2sgb2ZmXCIpLG51bGw7dmFyIGk9dC5nZW9tZXRyeS5nZXRHZW9tZXRyeVR5cGUoKSxyPXt9LG89dC5nZW9tZXRyeTtpZihcIlBvbHlnb25cIiE9PWkmJlwiTXVsdGlQb2x5Z29uXCIhPT1pKXJldHVybiBjb25zb2xlLndhcm4oXCJmX19rIG9mZlwiKSxudWxsO2lmKG4pe289by5nZXRJbnRlcmlvclBvaW50KCk7dmFyIGE9by5nZXRDb29yZGluYXRlKCk7YS56PWV8fDB9ZWxzZXt2YXIgdT1vLmdldEVudmVsb3BlSW50ZXJuYWwoKTtvPW8uZmFjdG9yeS5jcmVhdGVQb2ludChuZXcgcC5nZW9tLkNvb3JkaW5hdGUodS5taW54Kyh1Lm1heHgtdS5taW54KS8yLHUubWlueSsodS5tYXh5LXUubWlueSkvMixlfHwwKSl9Zm9yKHZhciBsIGluIHQucHJvcGVydGllcylyW2xdPXQucHJvcGVydGllc1tsXTtyZXR1cm4gbmV3IHMuZGVmYXVsdChvLHIpfX0se2tleTpcImtpY2tZb3VyQXNzXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXt2YXIgaT0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdO2lmKCEoZSBpbnN0YW5jZW9mIGwuZGVmYXVsdCYmbiBpbnN0YW5jZW9mIGguZGVmYXVsdCkpcmV0dXJuIGNvbnNvbGUud2FybihcImZfX2sgb2ZmXCIpLG51bGw7dmFyIHI9bmV3IGwuZGVmYXVsdChuLmZlYXR1cmVzLm5hbWUpLG89W107cmV0dXJuIG4udmlzaXQoZnVuY3Rpb24obixyKXt2YXIgYT1lLmdldEZlYXR1cmVCeUlkKG4uaWQpLHM9dC5mdWNrWW91Qml0Y2goYSxyLmhlaWdodCxpKTtzJiZvLnB1c2gocyl9KSxyLmZlYXR1cmVzPW8scn19LHtrZXk6XCJnZXRIaWdodExpZ2h0T2Zmc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtpZighKHQgaW5zdGFuY2VvZiBBcnJheSYmZSBpbnN0YW5jZW9mIEFycmF5JiZ0Lmxlbmd0aD4wJiZlLmxlbmd0aD4wKSlyZXR1cm4gbjtmb3IodmFyIGk9ZSxyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHMpcmV0dXJuIG59Zm9yKHZhciB1PXQsbD1BcnJheS5pc0FycmF5KHUpLGM9MCx1PWw/dTp1W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaDtpZihsKXtpZihjPj11Lmxlbmd0aClicmVhaztoPXVbYysrXX1lbHNle2lmKGM9dS5uZXh0KCksYy5kb25lKWJyZWFrO2g9Yy52YWx1ZX12YXIgZj1oO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBmKXJldHVybiBuO3ZhciBkPVtdO24ucHVzaChkKTtmb3IodmFyIHA9ZSxnPUFycmF5LmlzQXJyYXkocCksdj0wLHA9Zz9wOnBbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBtO2lmKGcpe2lmKHY+PXAubGVuZ3RoKWJyZWFrO209cFt2KytdfWVsc2V7aWYodj1wLm5leHQoKSx2LmRvbmUpYnJlYWs7bT12LnZhbHVlfWZvcih2YXIgeT1tLF89MCxiPTA7Xz49MDspXz1mLmluZGV4T2YoeSxiKSxiPV8reS5sZW5ndGgsXz49MCYmZC5wdXNoKF8sYil9fXJldHVybiBufX0se2tleTpcImdldE1hcEFuZ2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9MDtpZih0JiZ0LmFuZ2xlX2xpbmUpe3ZhciBuPXQuYW5nbGVfbGluZSxpPW5ldyBwLmdlb20uQ29vcmRpbmF0ZSgwLDEsMCkscj1uZXcgcC5nZW9tLkNvb3JkaW5hdGUobi5jb29yZGluYXRlc1sxXVswXS1uLmNvb3JkaW5hdGVzWzBdWzBdLG4uY29vcmRpbmF0ZXNbMV1bMV0tbi5jb29yZGluYXRlc1swXVsxXSwwKTtlPWQuZGVmYXVsdC5nZXRBbmdsZShpLHIpLGUqPTE4MC93aW5kb3cuTWF0aC5QSX1yZXR1cm4gZX19XSksdH0oKTtlLmRlZmF1bHQ9Z30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUGxhbmFyR3JhcGg9ZS5GZWF0dXJlQ29sbGVjdGlvbj1lLkZlYXR1cmU9ZS5EYXRhVXRpbD1lLkRhdGFTb3VyY2U9dm9pZCAwO3ZhciByPW4oMTIxKSxvPWkociksYT1uKDQ1KSxzPWkoYSksdT1uKDIzKSxsPWkodSksYz1uKDE2KSxoPWkoYyksZj1uKDEyMiksZD1pKGYpO2UuRGF0YVNvdXJjZT1vLmRlZmF1bHQsZS5EYXRhVXRpbD1zLmRlZmF1bHQsZS5GZWF0dXJlPWwuZGVmYXVsdCxlLkZlYXR1cmVDb2xsZWN0aW9uPWguZGVmYXVsdCxlLlBsYW5hckdyYXBoPWQuZGVmYXVsdH0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj17fSxpPWZ1bmN0aW9uKHQpe25bdC50eXBlXT0hMH0scj1mdW5jdGlvbih0KXt2YXIgZT1uW3QudHlwZV07cmV0dXJuIG5bdC50eXBlXT0hMSxlfSxvPWZ1bmN0aW9uKHQpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB0LmNsYXNzTmFtZS5iYXNlVmFsP3QuY2xhc3NOYW1lOnQuY2xhc3NOYW1lLmJhc2VWYWx9LGE9ZnVuY3Rpb24odCxlKXtcInVuZGVmaW5lZFwiPT10eXBlb2YgdC5jbGFzc05hbWUuYmFzZVZhbD90LmNsYXNzTmFtZT1lOnQuY2xhc3NOYW1lLmJhc2VWYWw9ZX0scz1mdW5jdGlvbih0LGUsbil7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtyZXR1cm4gaS5jbGFzc05hbWU9ZSxuJiZuLmFwcGVuZENoaWxkKGkpLGl9LHU9ZnVuY3Rpb24odCxlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5jbGFzc0xpc3QpcmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKGUpO3ZhciBuPW8odCk7cmV0dXJuIG4ubGVuZ3RoPjAmJm5ldyBSZWdFeHAoXCIoXnxcXFxccylcIitlK1wiKFxcXFxzfCQpXCIpLnRlc3Qobil9LGw9ZnVuY3Rpb24odCxlKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgdC5jbGFzc0xpc3QpZm9yKHZhciBuPWUudHJpbSgpLnNwbGl0KC9cXHMrLyksaT1uLHI9QXJyYXkuaXNBcnJheShpKSxzPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGw7aWYocil7aWYocz49aS5sZW5ndGgpYnJlYWs7bD1pW3MrK119ZWxzZXtpZihzPWkubmV4dCgpLHMuZG9uZSlicmVhaztsPXMudmFsdWV9dmFyIGM9bDt0LmNsYXNzTGlzdC5hZGQoYyl9ZWxzZSBpZighdSh0LGUpKXt2YXIgaD1vKHQpO2EodCxcIlwiKyhoP2g6XCIgXCIpK2UpfX0sYz1mdW5jdGlvbih0LGUpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmNsYXNzTGlzdCl0LmNsYXNzTGlzdC5yZW1vdmUoZSk7ZWxzZXt2YXIgbj1vKHQpO249KFwiIFwiK24rXCIgXCIpLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIikudHJpbSgpLGEodCxuKX19LGg9ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24/dC5zdG9wUHJvcGFnYXRpb24oKTp0LmNhbmNlbEJ1YmJsZSgpLHIodCl9LGY9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWgsbj1kb2N1bWVudC5vbnRvdWNoc3RhcnQ/W1widG91Y2hzdGFydFwiLFwibW91c2Vkb3duXCJdOltcIm1vdXNlZG93blwiXSxyPW4sbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgdT1zO3QuYWRkRXZlbnRMaXN0ZW5lcih1LGUpfXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsaSksdC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixlKX0sZD1mdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0P3QucHJldmVudERlZmF1bHQoKTp0LnJldHVyblZhbHVlPSExfSxwPWZ1bmN0aW9uKHQpe2QodCksaCh0KX07ZS5jcmVhdGVFbGVtZW50PXMsZS5oYXNDbGFzcz11LGUuYWRkQ2xhc3M9bCxlLnJlbW92ZUNsYXNzPWMsZS5zdG9wUHJvcGFnYXRpb249aCxlLmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uPWYsZS5wcmV2ZW50RGVmYXVsdD1kLGUuc3RvcD1wfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7XG5jb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbD1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGM9bigxMjMpLGg9cihjKSxmPW4oMiksZD1pKGYpLHA9big4OCksZz0ocihwKSxuKDk0KSksdj1yKGcpLG09big2MCkseT1yKG0pLF89bigxNzQpLGI9cihfKSx4PW4oMTY2KSx3PW4oMTY3KSxFPW4oMTExKSxTPXIoRSksTT1uKDYpLEM9cihNKSxJPW4oMTA4KSxPPXIoSSksVD1uKDE4NCksUD1yKFQpLEE9bigxODUpLEw9cihBKSxOPW4oMTg2KSxrPXIoTiksUj1uKDcpLEQ9big2OSksRj1uKDEyKSxCPW4oMyksaj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7byh0aGlzLGUpO3ZhciB0PWEodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3JlbmRlcmVycz17fSx0Ll9kb21SZW5kZXJlcnJzPXt9LEMuZGVmYXVsdC5nZXRJbnN0YW5jZSgpLnByb3ZpZGVyPW5ldyBPLmRlZmF1bHQsdH1yZXR1cm4gcyhlLHQpLHUoZSxbe2tleTpcIl9jcmVhdGVDb3JuZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1cIm5nci1cIixvPVwiXCIrdCtlLGE9XCJcIityK3QrXCIgXCIrcitlO2lbb109Ui5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsYSxuKX19LHtrZXk6XCJfY3JlYXRDb250cm9sQ29udGFpbmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1SLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcIm5nci1jb250cm9sLWNvbnRhaW5lclwiKSxlPXt9O3JldHVybiB0aGlzLl9jcmVhdGVDb3JuZXIoXCJ0b3BcIixcImxlZnRcIix0LGUpLHRoaXMuX2NyZWF0ZUNvcm5lcihcInRvcFwiLFwicmlnaHRcIix0LGUpLHRoaXMuX2NyZWF0ZUNvcm5lcihcImJvdHRvbVwiLFwibGVmdFwiLHQsZSksdGhpcy5fY3JlYXRlQ29ybmVyKFwiYm90dG9tXCIsXCJyaWdodFwiLHQsZSkse2NvbnRhaW5lcjp0LGNvcm5lcnM6ZX19fSx7a2V5OlwiaW5pdE1hcFZpZXdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT1sKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImluaXRNYXBWaWV3XCIsdGhpcykuY2FsbCh0aGlzLHQsbik7aWYoaSYmdCl7dmFyIHI9bnVsbDtpZigoMCxCLmlzU3RyaW5nKSh0Lm5hbWUpPyhyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQubmFtZSkscnx8KHI9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0Lm5hbWUpKSk6dC5uYW1lIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJihyPXQubmFtZSksIXIpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtYXBWaWV3IGNvbnRhaW5lclwiKTt2YXIgbz1uLmRldmljZVBpeGVsUmF0aW8sYT12b2lkIDA9PT1vP3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvOm8scz1uLndpZHRoLHU9dm9pZCAwPT09cz9yLmNsaWVudFdpZHRoOnMsYz1uLmhlaWdodCxoPXZvaWQgMD09PWM/ci5jbGllbnRIZWlnaHQ6YyxmPW4uY2xlYXJDb2xvcixwPXZvaWQgMD09PWY/MTQ0MDg2Njc6ZixnPW4uYXV0b0NsZWFyLG09dm9pZCAwPT09Z3x8ZyxfPW4uZnBzLEU9bi5jbGVhckltYWdlLE09bmV3IGIuZGVmYXVsdCxDPW5ldyBkLldlYkdMUmVuZGVyZXIoe2FudGlhbGlhczohMCxwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6bSxhbHBoYTohMCxTcHJpdGVQbHVnaW46di5kZWZhdWx0fSksST1uZXcgZC5DU1MyRFJlbmRlcmVyLE89dGhpcy5fY3JlYXRDb250cm9sQ29udGFpbmVyKCksVD1PLmNvbnRhaW5lcixBPU8uY29ybmVycyxOPW5ldyBQLmRlZmF1bHQsaj10LmFjdGl2ZUNhbWVyYTtpZih0LmNoYW5nZU1hcFZpZXdMaWZlQ3ljbGUoMCksdC53aWR0aD11LHQuaGVpZ2h0PWgsdC5lbmdpbmU9dGhpcyx0LnNjZW5lR2VuZXJhdG9yPU0sQy5hdXRvQ2xlYXI9IW0sQy5zZXRQaXhlbFJhdGlvKGEpLEMuc2V0U2l6ZSh1LGgpLEkuc2V0U2l6ZSh1LGgpLHRoaXMuX3JlbmRlcmVyc1t0Lm5hbWVdPUMsdGhpcy5fZG9tUmVuZGVyZXJyc1t0Lm5hbWVdPUksXyYmXz4wJiZfPDYwP3QucmVuZGVyTG9vcD1uZXcgRC5Mb2NrRlBTUmVuZGVyTG9vcCh7ZnBzOm4uZnBzfSk6dC5yZW5kZXJMb29wPW5ldyBELkFuaW1hdGlvbkZyYW1lUmVuZGVyTG9vcCx0LmNvbnRhaW5lcj1yLHQudGFyZ2V0RG9tPUMuZG9tRWxlbWVudCx0LmNvbnRyb2xEb209VCx0LmNvbnRyb2xDb3JuZXJzPUEsdC5fb3ZlcmxheURvbT1JLmRvbUVsZW1lbnQsUi5ET01VdGlscy5hZGRDbGFzcyhDLmRvbUVsZW1lbnQsXCJuZ3ItdGFyZ2V0XCIpLFIuRE9NVXRpbHMuYWRkQ2xhc3ModC5fb3ZlcmxheURvbSxcIm5nci1vdmVybGF5LWNvbnRhaW5lclwiKSxyLmFwcGVuZENoaWxkKFQpLHIuYXBwZW5kQ2hpbGQoQy5kb21FbGVtZW50KSxyLmFwcGVuZENoaWxkKHQuX292ZXJsYXlEb20pLEU/KEMuc2V0Q2xlYXJDb2xvcigwLDApLFIuRE9NVXRpbHMuYWRkQ2xhc3ModC50YXJnZXREb20sXCJjbGVhci1pbWFnZVwiKSx0LnRhcmdldERvbS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9XCJ1cmwoXCIrRStcIilcIik6Qy5zZXRDbGVhckNvbG9yKHApLE4uaW5pdCh0KSxOLmFkZEdlc3R1cmUobmV3IEwuZGVmYXVsdCksTi5hZGRHZXN0dXJlKG5ldyBrLmRlZmF1bHQpLHQuZ2VzdHVyZU1hbmFnZXI9TixqKXt2YXIgVT1uZXcgUy5kZWZhdWx0KGosdCk7aWYoTS5fdGhyZWVOb2RlLmFkZChqKSx0LmFjdGl2ZUNvbnRyb2w9VSxqLmNhbWVyYS5hc3BlY3Q9dS9oLGouY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSxGLnN1cHBvcnRQYXJ0aWNsZSl7dmFyIHo9bmV3IHkuZGVmYXVsdCxHPW5ldyB3LlBhcnRpY2xlTm9kZSh3LlBhcnRpY2xlTm9kZUlkKTt0LnBhcnRpY2xlRW5naW5lPXosTS5fdGhyZWVOb2RlLmFkZChHKX12YXIgVj1uZXcgeC5PdmVybGF5Tm9kZSh4Lk92ZXJsYXlOb2RlSWQpO1YuYWRkKGopLHQuc2NlbmVNYW5hZ2VyLmFkZChWKX10LmNoYW5nZU1hcFZpZXdMaWZlQ3ljbGUoMSl9cmV0dXJuIGl9fSx7a2V5OlwicmVTaXplXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuZ2V0UmVuZGVyZXIodCkscj10aGlzLmdldERvbVJlbmRlcmVyKHQpO2kuc2V0U2l6ZShlLG4pLHIuc2V0U2l6ZShlLG4pLHQud2lkdGg9ZSx0LmhlaWdodD1ufX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicmVtb3ZlXCIsdGhpcykuY2FsbCh0aGlzLHQpO2lmKG4pe3ZhciBpPXRoaXMuX3JlbmRlcmVyc1t0Lm5hbWVdO3QuZGVzdHJveSgpLGkuZGlzcG9zZSgpLHRoaXMuX2VtcHR5KHQuY29udGFpbmVyKSxkZWxldGUgdGhpcy5fcmVuZGVyZXJzW3QubmFtZV0sZGVsZXRlIHRoaXMuX2RvbVJlbmRlcmVycnNbdC5uYW1lXX1yZXR1cm4gbn19LHtrZXk6XCJnZXRSZW5kZXJlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZW5kZXJlcnNbdC5uYW1lXX19LHtrZXk6XCJnZXRSZW5kZXJJbmZvXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmVuZGVyZXJzW3QubmFtZV0uaW5mbyxuPWUucmVuZGVyLGk9bi5mYWNlcyxyPW4ucG9pbnRzLG89bi52ZXJ0aWNlcyxhPW4uY2FsbHMscz1lLm1lbW9yeS5nZW9tZXRyaWVzO3JldHVybntmYWNlczppLHBvaW50czpyLHZlcnRpY2VzOm8sY2FsbHM6YSxnZW9tZXRyaWVzOnN9fX0se2tleTpcImdldERvbVJlbmRlcmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RvbVJlbmRlcmVycnNbdC5uYW1lXX19LHtrZXk6XCJ0eXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cInRocmVlXCJ9fSx7a2V5OlwiX2VtcHR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKDt0Lmxhc3RDaGlsZDspdC5yZW1vdmVDaGlsZCh0Lmxhc3RDaGlsZCl9fV0pLGV9KGguZGVmYXVsdCk7ZS5kZWZhdWx0PWp9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDgpLGw9aSh1KSxjPW4oNCksaD1uKDE2KSxmPWkoaCksZD1uKDIzKSxwPWkoZCksZz1uKDMpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7byh0aGlzLHQpfXJldHVybiBzKHQsbnVsbCxbe2tleTpcInBhcnNlXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtyZXR1cm4oMCxnLmlzU3RyaW5nKShuKT90LnBhcnNlQnlTdHIoZSxuKTpcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBuP1widW5kZWZpbmVkXCI6YShuKSk/dC5wYXJzZUJ5T2JqKGUsbik6bnVsbH19LHtrZXk6XCJwYXJzZUJ5U3RyXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5wYXJzZUJ5T2JqKGUsSlNPTi5wYXJzZShuKSl9fSx7a2V5OlwicGFyc2VCeU9ialwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW5ldyBmLmRlZmF1bHQodCksaT1lLmZlYXR1cmVzLHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtuLmFkZEZlYXR1cmUobmV3IHAuZGVmYXVsdChsLmRlZmF1bHQuZ2V0R2VvUmVhZGVyKCkucmVhZChzLmdlb21ldHJ5KSxzLnByb3BlcnRpZXMpKX1yZXR1cm4gbn19LHtrZXk6XCJwYXJzZUxpbmVTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjLmdlb20uQ29vcmRpbmF0ZSxbbnVsbF0uY29uY2F0KHIodCkpKSl9KSxvPWwuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhpKSxhPW5ldyBmLmRlZmF1bHQodCk7cmV0dXJuIGEuYWRkRmVhdHVyZShuZXcgcC5kZWZhdWx0KG8sbikpLGF9fSx7a2V5OlwicGFyc2VQb2ludHNcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPW5ldyBmLmRlZmF1bHQodCksbz1lLGE9QXJyYXkuaXNBcnJheShvKSxzPTAsbz1hP286b1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHU7aWYoYSl7aWYocz49by5sZW5ndGgpYnJlYWs7dT1vW3MrK119ZWxzZXtpZihzPW8ubmV4dCgpLHMuZG9uZSlicmVhazt1PXMudmFsdWV9dmFyIGg9dSxkPW5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShjLmdlb20uQ29vcmRpbmF0ZSxbbnVsbF0uY29uY2F0KHIoaCkpKSksZz1sLmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVQb2ludChkKTtuJiZuLmlkJiZuLmlkKyssaS5hZGRGZWF0dXJlKG5ldyBwLmRlZmF1bHQoZyxuKSl9cmV0dXJuIGl9fV0pLHR9KCk7ZS5kZWZhdWx0PXZ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlNCTG9jYXRpb25Qcm92aWRlcj1lLkxvY2F0aW9uU3RhdHVzPWUuTG9jYXRpb25UeXBlPWUuV2lGaUxvY2F0aW9uTWFuYWdlcj1lLkJsZVdvcmtlck1hbmFnZXI9ZS5CbHVldG9vdGhMb2NhdGlvbk1hbmFnZXI9dm9pZCAwO3ZhciByPW4oMTMzKSxvPWkociksYT1uKDEzMikscz1pKGEpLHU9bigxMzYpLGw9bigxMzUpLGM9aShsKTtlLkJsdWV0b290aExvY2F0aW9uTWFuYWdlcj1vLmRlZmF1bHQsZS5CbGVXb3JrZXJNYW5hZ2VyPXMuZGVmYXVsdCxlLldpRmlMb2NhdGlvbk1hbmFnZXI9dS5XaUZpTG9jYXRpb25NYW5hZ2VyLGUuTG9jYXRpb25UeXBlPXUuTG9jYXRpb25UeXBlLGUuTG9jYXRpb25TdGF0dXM9dS5Mb2NhdGlvblN0YXR1cyxlLlNCTG9jYXRpb25Qcm92aWRlcj1jLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KX1yZXR1cm4gaSh0LFt7a2V5Olwid2VpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7fX0se2tleTpcImFsdGl0dWRlXCIsZ2V0OmZ1bmN0aW9uKCl7fX0se2tleTpcImZyb21cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnJvbX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Zyb209dH19LHtrZXk6XCJ0b1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RvPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDE0NCksbD1pKHUpLGM9bigzMSksaD1pKGMpLGY9bigyOCksZD1pKGYpLHA9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiByKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwiZ1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihlIGluc3RhbmNlb2YgaC5kZWZhdWx0KXJldHVybiBlLndlaWdodDtpZihlIGluc3RhbmNlb2YgZC5kZWZhdWx0KXtpZigwPT09bilyZXR1cm4gMWU0O2lmKG4+Mil7dmFyIGk9ZS5jb25uZWN0aW9uLmNhdGVnb3J5SWQ/ZS5jb25uZWN0aW9uLmNhdGVnb3J5SWQudG9TdHJpbmcoKTpudWxsO2lmKC8yNDA5WzItOV0wMDAvLnRlc3QoaSl8fDEzMTY0ZTM9PT1lLmNvbm5lY3Rpb24uY2F0ZWdvcnlJZClyZXR1cm4gMWU0fWVsc2V7dmFyIHI9ZS5jb25uZWN0aW9uLmNhdGVnb3J5SWQ/ZS5jb25uZWN0aW9uLmNhdGVnb3J5SWQudG9TdHJpbmcoKTpudWxsO2lmKC8yNDA5WzctOV0wMDAvLnRlc3Qocil8fDEzMTY0ZTM9PT1lLmNvbm5lY3Rpb24uY2F0ZWdvcnlJZClyZXR1cm4gMWU0O2lmKDI0MDkxZTM9PT1lLmNvbm5lY3Rpb24uY2F0ZWdvcnlJZHx8MjQwOTJlMz09PWUuY29ubmVjdGlvbi5jYXRlZ29yeUlkKXt2YXIgbz10LnBhcmVudC5maW5kUGF0aCh0KTtyZXR1cm4gbyBpbnN0YW5jZW9mIGQuZGVmYXVsdCYmKDI0MDkxZTM9PT1vLmNvbm5lY3Rpb24uY2F0ZWdvcnlJZHx8MjQwOTJlMz09PWUuY29ubmVjdGlvbi5jYXRlZ29yeUlkKT8zMDoxOTB9fXJldHVybiA2MH1yZXR1cm4gMH19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9cH0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsaSxyLG8sYSxzLHUpe24odGhpcyx0KSx0aGlzLm1hcElkPWUsdGhpcy5yYW5rPWksdGhpcy5kaXJlY3Rpb249cix0aGlzLnNoYXBlPW8sdGhpcy5wbGFuYXJHcmFwaElkPWEsdGhpcy5wYXRoSWQ9cyx0aGlzLmFsdGl0dWRlPXV9cmV0dXJuIGkodCxbe2tleTpcInRvU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMzEqdGhpcy5pZCt0aGlzLnBsYW5hckdyYXBoSWR9fSx7a2V5OlwiZXF1YWxzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PT10fHwhIXQmJih0aGlzLmlkPT09dC5pZCYmdGhpcy5wbGFuYXJHcmFwaElkPT09dC5wbGFuYXJHcmFwaElkKX19LHtrZXk6XCJpZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lkPXR9fSx7a2V5OlwibWFwSWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwSWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYXBJZD10fX0se2tleTpcInJhbmtcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFua30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Jhbms9dH19LHtrZXk6XCJkaXJlY3Rpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlyZWN0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlyZWN0aW9uPXR9fSx7a2V5Olwic2hhcGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFwZT10fX0se2tleTpcImZyb21cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZnJvbX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Zyb209dH19LHtrZXk6XCJ0b1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RvPXR9fSx7a2V5OlwicGxhbmFyR3JhcGhJZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFuYXJHcmFwaElkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxhbmFyR3JhcGhJZD10fX0se2tleTpcInBhdGhJZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXRoSWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXRoSWQ9dH19LHtrZXk6XCJhbHRpdHVkZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHRpdHVkZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FsdGl0dWRlPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGE9big1NSkscz1pKGEpLHU9big1MyksbD1pKHUpLGM9bigxNDEpLGg9aShjKSxmPW4oOCksZD1pKGYpLHA9big0KSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4saSl7aWYocih0aGlzLHQpLCFlfHwhbnx8IWkpdGhyb3cgbmV3IEVycm9yKFwiUGF0aFNlcnZpY2U6IEludmFsaWQgaW5wdXRcIik7dmFyIG89XCJzdHJpbmdcIj09dHlwZW9mIGU/SlNPTi5wYXJzZShlKTplLGE9XCJzdHJpbmdcIj09dHlwZW9mIG4/SlNPTi5wYXJzZShuKTpuLHU9XCJzdHJpbmdcIj09dHlwZW9mIGk/SlNPTi5wYXJzZShpKTppLGM9bmV3IHAuaW8uR2VvSlNPTlJlYWRlcihkLmRlZmF1bHQuZ2V0RmFjdG9yeSgpKTt0aGlzLl92ZXJ0ZXhlcz17fSx0aGlzLl9wYXRocz17fSx0aGlzLl9wYXRoc01hcHBpbmc9e30sdGhpcy5fY29ubmVjdGlvbnM9e30sdGhpcy5fY29ubmVjdGlvbnNNYXBwaW5nPXt9LHRoaXMuX3F1YWR0cmVlTWFwcGluZz17fTtmb3IodmFyIGY9byxnPUFycmF5LmlzQXJyYXkoZiksdj0wLGY9Zz9mOmZbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBtO2lmKGcpe2lmKHY+PWYubGVuZ3RoKWJyZWFrO209Zlt2KytdfWVsc2V7aWYodj1mLm5leHQoKSx2LmRvbmUpYnJlYWs7bT12LnZhbHVlfXZhciB5PW0sXz1uZXcgcy5kZWZhdWx0KHkubWFwSWQsYy5yZWFkKHkuc2hhcGUpLHkucGxhbmFyR3JhcGhJZCx5LmFsdGl0dWRlKTtfLmlkPXkuaWQsXy52aXJ0dWFsPXkudmlydHVhbCx0aGlzLl92ZXJ0ZXhlc1t5LmlkXT1ffWZvcih2YXIgYiBpbiBhKXt2YXIgeD1hW2JdO3RoaXMuX3BhdGhzW2JdPXt9LHRoaXMuX3BhdGhzTWFwcGluZ1tiXT17fSx0aGlzLl9xdWFkdHJlZU1hcHBpbmdbYl09bmV3IHAuaW5kZXgucXVhZHRyZWUuUXVhZHRyZWU7Zm9yKHZhciB3IGluIHgpe3ZhciBFPXhbd107dGhpcy5fcGF0aHNNYXBwaW5nW2JdW3ddPVtdO2Zvcih2YXIgUz1FLE09QXJyYXkuaXNBcnJheShTKSxDPTAsUz1NP1M6U1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIEk7aWYoTSl7aWYoQz49Uy5sZW5ndGgpYnJlYWs7ST1TW0MrK119ZWxzZXtpZihDPVMubmV4dCgpLEMuZG9uZSlicmVhaztJPUMudmFsdWV9dmFyIE89STtpZighdGhpcy5fcGF0aHNbYl1bTy5pZF0pe3ZhciBUPW5ldyBsLmRlZmF1bHQoTy5tYXBJZCxPLnJhbmssTy5kaXJlY3Rpb24sYy5yZWFkKE8uc2hhcGUpLE8ucGxhbmFyR3JhcGhJZCxPLnBhdGhJZCxPLmFsdGl0dWRlKTtULmlkPU8uaWQsVC5mcm9tPXRoaXMuX3ZlcnRleGVzW08uZnJvbV0sVC50bz10aGlzLl92ZXJ0ZXhlc1tPLnRvXSx0aGlzLl9wYXRoc1tiXVtPLmlkXT1ULHRoaXMuX3F1YWR0cmVlTWFwcGluZ1tiXS5pbnNlcnQoVC5zaGFwZS5nZXRFbnZlbG9wZUludGVybmFsKCksVCl9dGhpcy5fcGF0aHNNYXBwaW5nW2JdW3ddLnB1c2godGhpcy5fcGF0aHNbYl1bTy5pZF0pfX19Zm9yKHZhciBQIGluIHUpe3ZhciBBPXVbUF07dGhpcy5fY29ubmVjdGlvbnNbUF09e30sdGhpcy5fY29ubmVjdGlvbnNNYXBwaW5nW1BdPXt9O2Zvcih2YXIgTCBpbiBBKXt2YXIgTj1BW0xdO3RoaXMuX2Nvbm5lY3Rpb25zTWFwcGluZ1tQXVtMXT1bXTtmb3IodmFyIGs9TixSPUFycmF5LmlzQXJyYXkoayksRD0wLGs9Uj9rOmtbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBGO2lmKFIpe2lmKEQ+PWsubGVuZ3RoKWJyZWFrO0Y9a1tEKytdfWVsc2V7aWYoRD1rLm5leHQoKSxELmRvbmUpYnJlYWs7Rj1ELnZhbHVlfXZhciBCPUY7aWYoIXRoaXMuX2Nvbm5lY3Rpb25zW1BdW0IuaWRdKXt2YXIgaj1uZXcgaC5kZWZhdWx0KEIubWFwSWQsQi5kaXJlY3Rpb24sQi5yYW5rLEIuZnJvbUxvY2F0aW9uSWQsQi50b0xvY2F0aW9uSWQpO2ouaWQ9Qi5pZCxqLmZyb209dGhpcy5fdmVydGV4ZXNbQi5mcm9tXSxqLnRvPXRoaXMuX3ZlcnRleGVzW0IudG9dLGouY2F0ZWdvcnlJZD1CLmNhdGVnb3J5SWQsdGhpcy5fY29ubmVjdGlvbnNbUF1bQi5pZF09an10aGlzLl9jb25uZWN0aW9uc01hcHBpbmdbUF1bTF0ucHVzaCh0aGlzLl9jb25uZWN0aW9uc1tQXVtCLmlkXSl9fX19cmV0dXJuIG8odCxbe2tleTpcInF1ZXJ5UXVhZFRyZWVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcXVhZHRyZWVNYXBwaW5nW3RdfX0se2tleTpcInF1ZXJ5UGF0aHNCeVZlcnRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3BhdGhzTWFwcGluZ1t0LnBsYW5hckdyYXBoSWRdO3JldHVybiBlJiZlW3QuaWRdP2VbdC5pZF06W119fSx7a2V5OlwicXVlcnlDb25uZWN0aW9uc0J5VmVydGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY29ubmVjdGlvbnNNYXBwaW5nW3QucGxhbmFyR3JhcGhJZF07cmV0dXJuIGUmJmVbdC5pZF0/ZVt0LmlkXTpbXX19LHtrZXk6XCJxdWVyeUFsbFBhdGhGcm9tSW5kZXhcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9xdWFkdHJlZU1hcHBpbmdbdF07cmV0dXJuIGU/ZS5xdWVyeUFsbCgpOltdfX1dKSx0fSgpO2UuZGVmYXVsdD1nfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxpLHIsbyl7bih0aGlzLHQpLHRoaXMubWFwSWQ9ZSx0aGlzLnNoYXBlPWksdGhpcy5wbGFuYXJHcmFwaElkPXIsdGhpcy5hbHRpdHVkZT1vfXJldHVybiBpKHQsW3trZXk6XCJ0b1N0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIDMxKnRoaXMuaWQrdGhpcy5wbGFuYXJHcmFwaElkfX0se2tleTpcImVxdWFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT09dHx8ISF0JiYodGhpcy5pZD09PXQuaWQmJnRoaXMucGxhbmFyR3JhcGhJZD09PXQucGxhbmFyR3JhcGhJZCl9fSx7a2V5OlwiaWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pZD10fX0se2tleTpcIm1hcElkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcElkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWFwSWQ9dH19LHtrZXk6XCJzaGFwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYXBlPXR9fSx7a2V5OlwicGxhbmFyR3JhcGhJZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFuYXJHcmFwaElkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxhbmFyR3JhcGhJZD10fX0se2tleTpcInZpcnR1YWxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmlydHVhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZpcnR1YWw9dH19LHtrZXk6XCJhbHRpdHVkZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHRpdHVkZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FsdGl0dWRlPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHM9bigxNTYpLHU9cihzKSxsPW4oMTQ4KSxjPXIobCksaD1uKDE0OSksZj1yKGgpLGQ9bigyKSxwPWkoZCksZz1uKDQpLHY9big2KSxtPXIodikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e25lZWRBdWRpbzohMSxhdXRvcGxheTohMSxlbmRUaHJlc2hvbGQ6OH0scj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e2F1dG9Nb3ZlOiExfSxhPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTp7YXV0b1B1bGxUb0VuZDohMSxwdWxsVGhyZXNob2xkOjV9O28odGhpcyx0KSx0aGlzLl9tYXBWaWV3PWUsdGhpcy5fbmF2aWdhdGVNYW5hZ2VyPW4sdGhpcy5fbWVzc2FnZU9wdGlvbnM9aSx0aGlzLl9jYW1lcmFPcHRpb25zPXIsdGhpcy5fbG9jYXRpb25PcHRpb25zPWEsdGhpcy5fdHJpZ2dlcj1uZXcgdS5kZWZhdWx0KG5ldyBjLmRlZmF1bHQsaS5uZWVkQXVkaW8pLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZT1uZXcgZi5kZWZhdWx0LHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS50cmlnZ2VyPXRoaXMuX3RyaWdnZXIsdGhpcy5faXNBcnJpdmVkPSExLHRoaXMuX29uU2VnbWVudENoYW5nZT10aGlzLl9vblNlZ21lbnRDaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGUub24oXCJvblNlZ21lbnRDaGFuZ2VcIix0aGlzLl9vblNlZ21lbnRDaGFuZ2UpLHRoaXMuX29uTG9jYXRpb25DaGFuZ2U9dGhpcy5fb25Mb2NhdGlvbkNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5vbihcIm9uTG9jYXRpb25DaGFuZ2VcIix0aGlzLl9vbkxvY2F0aW9uQ2hhbmdlKSx0aGlzLl9vbkFycml2ZVNlZ0VuZD10aGlzLl9vbkFycml2ZVNlZ0VuZC5iaW5kKHRoaXMpLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5vbihcIm9uQXJyaXZlU2VnRW5kXCIsdGhpcy5fb25BcnJpdmVTZWdFbmQpLHRoaXMuX2NydFBsYW5hckdyYXBoSWQ9bnVsbCx0aGlzLl9vblNlZ0NoYW5nZUNhbGxiYWNrPW51bGwsdGhpcy5fb25Mb2NDaGFuZ2VDYWxsYmFjaz1udWxsfXJldHVybiBhKHQsW3trZXk6XCJjbGVhckZlYXR1cmVDb2xsZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyLmF1ZGlvRWxtdC5wYXVzZSgpLHRoaXMuX3RyaWdnZXIuX3NlZ21lbnRzPVtdLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5yZXNldCgpLHRoaXMuX2NydFBsYW5hckdyYXBoSWQ9bnVsbCx0aGlzLl9pc0Fycml2ZWQ9ITF9fSx7a2V5OlwiYWRkU2VnbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90cmlnZ2VyLmFkZFNlZ21lbnQodCksdGhpc319LHtrZXk6XCJyZW1vdmVTZWdtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RyaWdnZXIucmVtb3ZlU2VnbWVudCh0KSx0aGlzfX0se2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGUuc3RhcnQodCxlKX19LHtrZXk6XCJpc1lhd2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0oYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOnRoaXMuX2NydFBsYW5hckdyYXBoSWQsIShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSk7cmV0dXJuIGk/dGhpcy5jcnRPZmZzZXRMb2NhdGlvbi5kaXN0YW5jZShuZXcgZy5nZW9tLkNvb3JkaW5hdGUodCxlKSk+bjp0aGlzLmNydExvY2F0aW9uLmRpc3RhbmNlKG5ldyBnLmdlb20uQ29vcmRpbmF0ZSh0LGUpKT5ufX0se2tleTpcImZpbmROZWFyZXN0U2VnbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxvPXRoaXMuX21hcFZpZXcuY29vcmRpbmF0ZVN5c3RlbS5nZXRPZmZzZXQoKSxhPW51bGw7dGhpcy5fY3J0UGxhbmFyR3JhcGhJZD1uLGk/KGE9bmV3IGcuZ2VvbS5Db29yZGluYXRlKHQsZSksciYmKGEueC09b1swXSxhLnktPW9bMV0pKTphPXRoaXMuX25hdmlnYXRlTWFuYWdlci5nZXRDbG9zZXN0UG9pbnRzKG4sdCxlKVswXTt2YXIgcz10aGlzLl9sb2NhdGlvbk9wdGlvbnMsdT1zLmF1dG9QdWxsVG9FbmQsbD1zLnB1bGxUaHJlc2hvbGQ7cmV0dXJuIHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5maW5kTmVhcmVzdFNlZ21lbnQoYS54LGEueSxuLHUsbCl9fSx7a2V5OlwicmV0dXJuTmVhcmVzdFNlZ21lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxyPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0sbz10aGlzLl9tYXBWaWV3LmNvb3JkaW5hdGVTeXN0ZW0uZ2V0T2Zmc2V0KCksYT1uZXcgZy5nZW9tLkNvb3JkaW5hdGUodCxlKTtyZXR1cm4gaT8oYT1uZXcgZy5nZW9tLkNvb3JkaW5hdGUodCxlKSxyJiYoYS54LT1vWzBdLGEueS09b1sxXSkpOmE9dGhpcy5fbmF2aWdhdGVNYW5hZ2VyLmdldENsb3Nlc3RQb2ludHMobix0LGUpWzBdLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5yZXR1cm5OZWFyZXN0U2VnbWVudChhLngsYS55LG4pfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5yZXNldCgpLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5vZmYoXCJvblNlZ21lbnRDaGFuZ2VcIix0aGlzLl9vblNlZ21lbnRDaGFuZ2UpLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5vZmYoXCJvbkxvY2F0aW9uQ2hhbmdlXCIsdGhpcy5fb25Mb2NhdGlvbkNoYW5nZSksdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLm9mZihcIm9uQXJyaXZlU2VnRW5kXCIsdGhpcy5fb25BcnJpdmVTZWdFbmQpLHRoaXMuX21hcFZpZXc9bnVsbCx0aGlzLl9uYXZpZ2F0ZU1hbmFnZXI9bnVsbCx0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyLmF1ZGlvRWxtdC5wYXVzZSgpLHRoaXMuX3RyaWdnZXIuX2F1ZGlvUHJvdmlkZXIuYXVkaW9FbG10LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fdHJpZ2dlci5fYXVkaW9Qcm92aWRlci5hdWRpb0VsbXQpLHRoaXMuX3RyaWdnZXI9bnVsbCx0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGU9bnVsbCx0aGlzLl9tZXNzYWdlT3B0aW9ucz1udWxsLHRoaXMuX2NydFBsYW5hckdyYXBoSWQ9bnVsbCx0aGlzLl9pc0Fycml2ZWQ9ITEsdGhpcy5fb25TZWdDaGFuZ2VDYWxsYmFjaz1udWxsLHRoaXMuX29uTG9jQ2hhbmdlQ2FsbGJhY2s9bnVsbH19LHtrZXk6XCJtb3ZlVG9TZWdtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5jcnRPZmZzZXRMb2NhdGlvbixlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp0aGlzLmNydFNlZ21lbnQsbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9dGhpcyxyPShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106bnVsbCwhKGFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdKXx8YXJndW1lbnRzWzRdKSxvPXRoaXMuX21hcFZpZXcuYWN0aXZlQ29udHJvbC50YXJnZXQsYT1vLngscz1vLnk7bS5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZOdW1iZXIoMSwwLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbihlLG4pe3ZhciBvPW4ubnVtO2kuX21hcFZpZXcuYWN0aXZlQ29udHJvbC56b29tQnlGb2NhbExlbmd0aCg1MCksaS5fbWFwVmlldy5hY3RpdmVDb250cm9sLm1vdmVUb1BvaW50KGEqbysoMS1vKSp0LngscypvKygxLW8pKnQueSxudWxsLCEwLHIsITEpfSkub24oXCJzdGFydFwiLGZ1bmN0aW9uKCl7fSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7aWYobil7dmFyIG89ZS5zcG90LmxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZSgpLGE9ZS5zcG90Lm5leHRMaW5lU3BvdD9lLnNwb3QubmV4dExpbmVTcG90LmxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZSgpOmUuc3BvdC5saW5lU3RyaW5nLnBvaW50cy5jb29yZGluYXRlc1sxXSxzPW5ldyBwLlZlY3RvcjMoYS54LW8ueCxhLnktby55LDApLHU9aS5fbWFwVmlldy5hY3RpdmVDb250cm9sLmdldFJvdGF0ZSgpLGw9LShpLl9tYXBWaWV3LmFjdGl2ZUNvbnRyb2wuX2dldEFuZ2xlKHMpLTI3MCk7dS1sPC0xODA/dSs9MzYwOnUtbD4xODAmJihsKz0zNjApLG0uZGVmYXVsdC5nZXRJbnN0YW5jZSgpLm9mTnVtYmVyKHUsbCw1MDApLm9uKFwidXBkYXRlXCIsZnVuY3Rpb24oZSxuKXtpLl9tYXBWaWV3LmFjdGl2ZUNvbnRyb2wubW92ZVRvUG9pbnQodC54LHQueSxudWxsLCEwLCEwLCExKSxpLl9tYXBWaWV3LmFjdGl2ZUNvbnRyb2wuem9vbUJ5Rm9jYWxMZW5ndGgoNTApLGkuX21hcFZpZXcuYWN0aXZlQ29udHJvbC5yb3RhdGVUbyh0LngsdC55LG4ubnVtLCEwLHIpfSkub24oXCJzdGFydFwiLGZ1bmN0aW9uKCl7fSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7fSkuc3RhcnQoKX19KS5zdGFydCgpfX0se2tleTpcImRpc3RhbmNlVG9FbmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmNydE9mZnNldExvY2F0aW9uLngsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5jcnRPZmZzZXRMb2NhdGlvbi55LG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnRoaXMuX2NydFBsYW5hckdyYXBoSWQsaT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XTtpZigwPT09dGhpcy5fdHJpZ2dlci5fc2VnbWVudHMubGVuZ3RoKXJldHVybi0xO3ZhciBvPXRoaXMucmV0dXJuTmVhcmVzdFNlZ21lbnQodCxlLG4saSxyKTtpZighby5zZWdtZW50KXJldHVybi0xO3ZhciBhPXRoaXMuX3RyaWdnZXIuX3NlZ21lbnRzW28uaW5kZXhdLHM9bmV3IGcuZ2VvbS5Db29yZGluYXRlKHQsZSk7aWYocil7dmFyIHU9dGhpcy5fbWFwVmlldy5jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpO3MueC09dVswXSxzLnktPXVbMV19cmV0dXJuIGEuc3RhdGUuZGlzdGFuY2VUb0VuZC1hLnNwb3QubGluZVN0cmluZy5nZXRDb29yZGluYXRlKCkuZGlzdGFuY2Uocyl9fSx7a2V5OlwiZ2V0Q29ubmVjdGlvbkluZm9cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmNydE9mZnNldExvY2F0aW9uLngsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5jcnRPZmZzZXRMb2NhdGlvbi55LG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnRoaXMuX2NydFBsYW5hckdyYXBoSWQsaT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XTtpZigwPT09dGhpcy5fdHJpZ2dlci5fc2VnbWVudHMubGVuZ3RoKXJldHVybiBudWxsO3ZhciBvPXRoaXMucmV0dXJuTmVhcmVzdFNlZ21lbnQodCxlLG4saSxyKTtpZighby5zZWdtZW50KXJldHVybiBudWxsO3ZhciBhPXRoaXMuX3RyaWdnZXIuX3NlZ21lbnRzW28uaW5kZXhdLHM9bmV3IGcuZ2VvbS5Db29yZGluYXRlKHQsZSk7aWYocil7dmFyIHU9dGhpcy5fbWFwVmlldy5jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpO3MueC09dVswXSxzLnktPXVbMV19dmFyIGw9YS5zdGF0ZS5kaXN0YW5jZVRvQ29ubmVjdGlvbi1hLnNwb3QubGluZVN0cmluZy5nZXRDb29yZGluYXRlKCkuZGlzdGFuY2Uocyk7aWYoIWwpcmV0dXJuIG51bGw7Zm9yKHZhciBjPXZvaWQgMCxoPXZvaWQgMCxmPW8uaW5kZXg7YTspe2lmKGEuc3RhdGUmJmEuc3RhdGUudGFyZ2V0Rmxvb3Ipe2M9YS5zdGF0ZS50YXJnZXRGbG9vcixoPWEuc3RhdGUuaXNVcDticmVha31mKyssYT10aGlzLl90cmlnZ2VyLl9zZWdtZW50c1tmXX1yZXR1cm57Y29ubmVjdGlvbkRpc3Q6bCx0YXJnZXRGbG9vcjpjLGlzVXA6aCxpbmRleDpmfX19LHtrZXk6XCJkaXN0YW5jZVRvU2VnbWVudEVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuY3J0T2Zmc2V0TG9jYXRpb24ueCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp0aGlzLmNydE9mZnNldExvY2F0aW9uLnksbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dGhpcy5fY3J0UGxhbmFyR3JhcGhJZCxpPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scj0hKGFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdKXx8YXJndW1lbnRzWzRdO3JldHVybiAwPT09dGhpcy5fdHJpZ2dlci5fc2VnbWVudHMubGVuZ3RoP251bGw6dGhpcy5fdHJpZ2dlci5fc2VnbWVudHNbdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLmN1cnJlbnRJbmRleCsxXT90aGlzLmRpc3RhbmNlVG9FbmQodCxlLG4saSxyKS10aGlzLl90cmlnZ2VyLl9zZWdtZW50c1t0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGUuY3VycmVudEluZGV4KzFdLnN0YXRlLmRpc3RhbmNlVG9FbmQ6dGhpcy5kaXN0YW5jZVRvRW5kKHQsZSxuLGkscil9fSx7a2V5OlwiZGlzdGFuY2VUb1NlZ21lbnRTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuY3J0T2Zmc2V0TG9jYXRpb24ueCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp0aGlzLmNydE9mZnNldExvY2F0aW9uLnksbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06dGhpcy5fY3J0UGxhbmFyR3JhcGhJZCxpPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scj0hKGFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdKXx8YXJndW1lbnRzWzRdO3JldHVybiAwPT09dGhpcy5fdHJpZ2dlci5fc2VnbWVudHMubGVuZ3RoP251bGw6dGhpcy5fdHJpZ2dlci5fc2VnbWVudHNbdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLmN1cnJlbnRJbmRleF0uc3RhdGUuZGlzdGFuY2VUb0VuZC10aGlzLmRpc3RhbmNlVG9FbmQodCxlLG4saSxyKX19LHtrZXk6XCJnZXRNZXNzYWdlSW5OYXZpXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO2lmKDA9PT10aGlzLl90cmlnZ2VyLl9zZWdtZW50cy5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5fdHJpZ2dlci5fc2VnbWVudHNbdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLmN1cnJlbnRJbmRleF0sbj10aGlzLmNydExvY2F0aW9uO2lmKCFuKXJldHVybiBudWxsO2lmKCF0aGlzLl9jcnRQbGFuYXJHcmFwaElkKXJldHVybiB0fHx0aGlzLnBsYXlNZXNzYWdlKFwi5byA5aeL5a+86Iiq77yMXCIrZS5nZXRNZXNzYWdlSW5OYXZpKDAsdCkpLGUuZ2V0TWVzc2FnZUluTmF2aSgwLCEwKTt2YXIgaT10aGlzLmdldENvbm5lY3Rpb25JbmZvKCk7aWYoaSYmaS5jb25uZWN0aW9uRGlzdDwxMClyZXR1cm4gdGhpcy5zZWdtZW50c1tpLmluZGV4XS5nZXRNZXNzYWdlSW5OYXZpKDFlNSx0KTtpZih0aGlzLmRpc3RhbmNlVG9FbmQoKTx0aGlzLl9tZXNzYWdlT3B0aW9ucy5lbmRUaHJlc2hvbGQpcmV0dXJuIHRoaXMuX21lc3NhZ2VPcHRpb25zLmVuZE1lc3NhZ2U/dGhpcy5wbGF5TWVzc2FnZSh0aGlzLl9tZXNzYWdlT3B0aW9ucy5lbmRNZXNzYWdlKTp0aGlzLnNlZ21lbnRzW3RoaXMuc2VnbWVudHMubGVuZ3RoLTFdLmdldE1lc3NhZ2VJbk5hdmkoMWU1LHQpO3ZhciByPWUuc3RhdGUuZGlzdGFuY2VUb0VuZC10aGlzLmRpc3RhbmNlVG9FbmQobi54LG4ueSx0aGlzLl9jcnRQbGFuYXJHcmFwaElkLCEwLCExKTtyZXR1cm4gZS5nZXRNZXNzYWdlSW5OYXZpKHIsdCl9fSx7a2V5OlwiZ2V0TWVzc2FnZUluTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRoaXMuc2VnbWVudHMmJnRoaXMuc2VnbWVudHMuZm9yRWFjaChmdW5jdGlvbihlKXt0LnB1c2goZS5nZXRNZXNzYWdlSW5MaXN0KCkpfSksdH19LHtrZXk6XCJwbGF5TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyJiZ0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyLnBsYXlNZXNzYWdlKHQpLHR9fSx7a2V5OlwicGF1c2VNZXNzYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyJiZ0aGlzLl90cmlnZ2VyLl9hdWRpb1Byb3ZpZGVyLmF1ZGlvRWxtdC5wYXVzZSgpfX0se2tleTpcIl9vbkxvY2F0aW9uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fY2FtZXJhT3B0aW9ucy5hdXRvTW92ZSYmdGhpcy5tb3ZlVG9TZWdtZW50KCksdGhpcy5fb25Mb2NDaGFuZ2VDYWxsYmFjayYmdGhpcy5fb25Mb2NDaGFuZ2VDYWxsYmFjayh0KSx0aGlzLmRpc3RhbmNlVG9FbmQoKTw9dGhpcy5fbWVzc2FnZU9wdGlvbnMuZW5kVGhyZXNob2xkJiZ0aGlzLmRpc3RhbmNlVG9FbmQoKT49MCYmdGhpcy5fbWVzc2FnZU9wdGlvbnMubmVlZEF1ZGlvJiZ0aGlzLl9tZXNzYWdlT3B0aW9ucy5hdXRvcGxheSYmKHRoaXMuZ2V0TWVzc2FnZUluTmF2aSh0aGlzLl9pc0Fycml2ZWQpLHRoaXMuX2lzQXJyaXZlZD0hMCl9fSx7a2V5OlwiX29uU2VnbWVudENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX21lc3NhZ2VPcHRpb25zLm5lZWRBdWRpbyYmdGhpcy5fbWVzc2FnZU9wdGlvbnMuYXV0b3BsYXkmJnRoaXMuZ2V0TWVzc2FnZUluTmF2aSh0aGlzLl9pc0Fycml2ZWQpLHRoaXMuX29uU2VnQ2hhbmdlQ2FsbGJhY2smJnRoaXMuX29uU2VnQ2hhbmdlQ2FsbGJhY2sodCl9fSx7a2V5OlwiX29uQXJyaXZlU2VnRW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9tZXNzYWdlT3B0aW9ucy5uZWVkQXVkaW8mJnRoaXMuX21lc3NhZ2VPcHRpb25zLmF1dG9wbGF5fX0se2tleTpcImZlYXR1cmVDb2xsZWN0aW9uXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RyaWdnZXIudHJpZ2dlcih0KSx0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGUucmVzZXQoKSx0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGUuX2NlbnRlcj10aGlzLmNydFNlZ21lbnQuc3BvdC5saW5lU3RyaW5nLmdldENvb3JkaW5hdGUoKXx8bnVsbCx0aGlzLl9jcnRQbGFuYXJHcmFwaElkPW51bGwsdGhpcy5faXNBcnJpdmVkPSExLHRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5fY2hhbmdlU2VnbWVudCh0aGlzLmNydFNlZ21lbnQsdGhpcy5jcnRMb2NhdGlvbil9fSx7a2V5OlwidHJpZ2dlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmlnZ2VyfX0se2tleTpcImR5bmFtaWNOYXZpZ2F0aW9uUnVsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9keW5hbWljTmF2aWdhdGlvblJ1bGV9fSx7a2V5Olwic2VnbWVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHJpZ2dlci5fc2VnbWVudHN9fSx7a2V5OlwiY3J0TG9jYXRpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLmNlbnRlcn19LHtrZXk6XCJjcnRPZmZzZXRMb2NhdGlvblwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5jZW50ZXIuY29weSgpLGU9dGhpcy5fbWFwVmlldy5jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpO3JldHVybiB0LngrPWVbMF0sdC55Kz1lWzFdLHR9fSx7a2V5OlwiY3J0SW5kZXhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHluYW1pY05hdmlnYXRpb25SdWxlLmN1cnJlbnRJbmRleH19LHtrZXk6XCJjcnRTZWdtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyaWdnZXIuX3NlZ21lbnRzW3RoaXMuX2R5bmFtaWNOYXZpZ2F0aW9uUnVsZS5jdXJyZW50SW5kZXhdfHxudWxsfX0se2tleTpcImNydFBsYW5hckdyYXBoSWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3J0UGxhbmFyR3JhcGhJZH19LHtrZXk6XCJvblNlZ21lbnRDaGFuZ2VcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb25TZWdDaGFuZ2VDYWxsYmFjaz10fX0se2tleTpcIm9uTG9jYXRpb25DaGFuZ2VcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb25Mb2NDaGFuZ2VDYWxsYmFjaz10fX1dKSx0fSgpO2UuZGVmYXVsdD15fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCl9cmV0dXJuIGkodCxbe2tleTpcIm1hdGVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbH19XSksdH0oKTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9bigxKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbD1uKDUpLGM9aShsKSxoPW4oNCksZj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsbil7cih0aGlzLGUpO3ZhciBpPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIGkudGFyZ2V0RG9tPXQsaS5fb3B0aW9ucz1zKHt9LG4pLGkuX29wdGlvbnMuZGVmYXVsdERpc3BsYXl8fChpLl9vcHRpb25zLmRlZmF1bHREaXNwbGF5PWkudGFyZ2V0RG9tJiZpLnRhcmdldERvbS5zdHlsZS5kaXNwbGF5P2kudGFyZ2V0RG9tLnN0eWxlLmRpc3BsYXk6XCJpbmxpbmVcIiksaS5fcG9zaXRpb249bmV3IGguZ2VvbS5Db29yZGluYXRlKDAsMCwwKSxpfXJldHVybiBhKGUsdCksdShlLFt7a2V5OlwiYXR0YWNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbGF5ZXI9dH19LHtrZXk6XCJkZXRhY2hcIix2YWx1ZTpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5fbGF5ZXJ9fSx7a2V5OlwibGF5ZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF5ZXJ9fSx7a2V5OlwiY29vcmRpbmF0ZVN5c3RlbVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb29yZGluYXRlU3lzdGVtfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29vcmRpbmF0ZVN5c3RlbT10fX0se2tleTpcInRhcmdldERvbVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb219LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb209dCx0aGlzLmVtaXQoXCJ2YWx1ZUNoYW5nZVwiLHRoaXMsXCJ0YXJnZXREb21cIix0KX19LHtrZXk6XCJwb3NpdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQueCxuPXQueTtpZih0aGlzLmNvb3JkaW5hdGVTeXN0ZW0pe3ZhciBpPXRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW0uZ2V0T2Zmc2V0KCk7ZSs9aVswXSxuKz1pWzFdfXRoaXMuX3Bvc2l0aW9uLng9ZSx0aGlzLl9wb3NpdGlvbi55PW4sdGhpcy5fcG9zaXRpb24uej10LnosdGhpcy5lbWl0KFwidmFsdWVDaGFuZ2VcIix0aGlzLFwicG9zaXRpb25cIix0aGlzLl9wb3NpdGlvbil9fV0pLGV9KGMuZGVmYXVsdCk7ZS5kZWZhdWx0PWZ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLkljb25PdmVybGF5PWUuT3ZlcmxheT12b2lkIDA7dmFyIHI9big1OCksbz1pKHIpLGE9bigxNTgpLHM9aShhKTtlLk92ZXJsYXk9by5kZWZhdWx0LGUuSWNvbk92ZXJsYXk9cy5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9big1KSxsPWkodSksYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpO3ZhciB0PW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3BhcnRpY2xlR3JvdXBzPXt9LHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJhZGRQYXJ0aWNsZUdyb3VwXCIsdmFsdWU6ZnVuY3Rpb24odCl7IXQmJnRoaXMuaGFzKHQpfHwodGhpcy5fcGFydGljbGVHcm91cHNbdC5pZF09dCx0aGlzLmVtaXQoXCJhZGRQYXJ0aWNsZUdyb3VwXCIsdCkpfX0se2tleTpcInJlbW92ZVBhcnRpY2xlR3JvdXBcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmhhcyh0KSYmKGRlbGV0ZSB0aGlzLl9wYXJ0aWNsZUdyb3Vwc1t0LmlkXSx0aGlzLmVtaXQoXCJyZW1vdmVQYXJ0aWNsZUdyb3VwXCIsdCkpfX0se2tleTpcImhhc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmdC5pZCBpbiB0aGlzLl9wYXJ0aWNsZUdyb3Vwc319LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fcGFydGljbGVHcm91cHMpdGhpcy5yZW1vdmVQYXJ0aWNsZUdyb3VwKHRoaXMuX3BhcnRpY2xlR3JvdXBzW3RdKX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpfXJldHVybiBpKHQsW3trZXk6XCJnZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsfX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LGMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHtcbnZhbHVlOiEwfSk7dmFyIG89bigxKSxhPW4oMTApLHM9aShhKSx1PW4oMTMpLGw9aSh1KSxjPXtmb250OlwiMjBweCBBcmlhbFwiLGZpZWxkOm51bGwsb3V0bGluZVdpZHRoOm51bGwsc2hhZG93Qmx1cjpudWxsLGFuY2hvcjpbLjUsLjVdLGFuY2hvckF1dG86ITEsYW5jaG9yU3R5bGU6bnVsbCxvcHRUZXh0UmVjdDohMSx0eXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJBbm5vdGF0aW9uXCJ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJjb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb2xvcj1sLmRlZmF1bHQuY29udmVyVG9TaGFycCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJvdXRsaW5lQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dGxpbmVDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dGxpbmVDb2xvcj1sLmRlZmF1bHQuY29udmVyVG9TaGFycCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJzaGFkb3dDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhZG93Q29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFkb3dDb2xvcj1sLmRlZmF1bHQuY29udmVyVG9TaGFycCh0KX19KSxlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIoKXtvKHRoaXMsbmV3IHMuZGVmYXVsdCx1KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLGE9bigxMCkscz1pKGEpLHU9e2FuY2hvcjpbLjUsLjVdLGZpZWxkOm51bGwsc2VydmVyVXJsOm51bGwsaGVpZ2h0Om51bGwsd2lkdGg6bnVsbCx0ZXh0dXJlOm51bGwscGxhbmU6bnVsbCx0eXBlOmZ1bmN0aW9uKCl7cmV0dXJuXCJJY29uXCJ9fTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sdT1uKDEpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxjPW4oMzMpLGg9aShjKSxmPW4oNjIpLGQ9aShmKSxwPW4oNjMpLGc9aShwKSx2PW4oNjcpLG09aSh2KSx5PW4oNjYpLF89aSh5KSxiPW4oMTc5KSx4PWkoYiksdz1uKDE4MCksRT1pKHcpLFM9big2NSksTT1pKFMpLEM9bigxNjIpLEk9aShDKSxPPW4oMTYzKSxUPWkoTyksUD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuLl9zdHlsZUpzb249dCxufXJldHVybiBhKGUsdCksbChlLFt7a2V5OlwiZ2VuZXJhdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0aGlzLl9zdHlsZUpzb24uZGVmYXVsdCYmdCYmdGhpcy5fc3R5bGVKc29uLmRlZmF1bHRbdC5uYW1lXSkpcmV0dXJuIGNvbnNvbGUud2FybihcIkludmFsaWQgSnNvbiBvciBMYXllclwiKSxudWxsO3ZhciBlPXRoaXMuX3N0eWxlSnNvbi5kZWZhdWx0W3QubmFtZV0sbj1udWxsO2lmKHQuaGVpZ2h0PWUuaGVpZ2h0fHwwLGUucmVuZGVyZXImJlwic2ltcGxlXCI9PT1lLnJlbmRlcmVyLnR5cGUpbj1uZXcgSS5kZWZhdWx0LG4uc3R5bGU9dGhpcy5fZ2VuZXJhdG9yKGUucmVuZGVyZXIuc3R5bGUpO2Vsc2UgaWYoZS5yZW5kZXJlciYmXCJ1bmlxdWVcIj09PWUucmVuZGVyZXIudHlwZSl7bj1uZXcgVC5kZWZhdWx0LG4uZGVmYXVsdFN0eWxlPXRoaXMuX2dlbmVyYXRvcihlLnJlbmRlcmVyLmRlZmF1bHQpO2Zvcih2YXIgaT1lLnJlbmRlcmVyLmtleXMscj1BcnJheS5pc0FycmF5KGkpLG89MCxpPXI/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYTtpZihyKXtpZihvPj1pLmxlbmd0aClicmVhazthPWlbbysrXX1lbHNle2lmKG89aS5uZXh0KCksby5kb25lKWJyZWFrO2E9by52YWx1ZX12YXIgcz1hO24uYWRkS2V5KHMpfWZvcih2YXIgdSBpbiBlLnJlbmRlcmVyLnN0eWxlcyluLmFkZFN0eWxlKHUsdGhpcy5fZ2VuZXJhdG9yKGUucmVuZGVyZXIuc3R5bGVzW3VdLG4uZGVmYXVsdFN0eWxlKSl9ZWxzZSBjb25zb2xlLndhcm4oXCJJbnZhbGlkIFJlbmRlcmVyIFR5cGVcIik7cmV0dXJuIG59fSx7a2V5OlwiX2luaXRpYWxzVG9DYXBpdGFsc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoLyhcXHcpLyxmdW5jdGlvbih0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSl9fSx7a2V5OlwiX3BhcnNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdJiZhcmd1bWVudHNbM107biYmdShlLG4pO2Zvcih2YXIgciBpbiB0KWlmKFwidHlwZVwiIT09cil7dmFyIG89dFtyXTtpZihpJiZ0aGlzLl9oYXNTdHlsZShvKSl7dmFyIGE9biYmbltyXXx8e307aWYobz10aGlzLl9nZW5lcmF0b3IobyxhKSxlW3JdKXt2YXIgcz1lW3JdLGw9dGhpcy5fZ2VuZXJhdG9yKHt0eXBlOm8udHlwZSgpfSk7bz11KGwscyxvKX19ZVtyXT1vfX19LHtrZXk6XCJfZ2VuZXJhdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnR5cGUsaT12b2lkIDA7c3dpdGNoKG4pe2Nhc2VcIlBvbHlnb25cIjppPW5ldyBtLmRlZmF1bHQsdGhpcy5fcGFyc2UodCxpLGUpO2Zvcih2YXIgciBpbiB0LmZhY2UpaVtyXT10LmZhY2Vbcl07Zm9yKHZhciBvIGluIHQub3V0bGluZSl7dmFyIGE9XCJvdXRsaW5lXCIrdGhpcy5faW5pdGlhbHNUb0NhcGl0YWxzKG8pO2lbYV09dC5vdXRsaW5lW29dfWJyZWFrO2Nhc2VcIkFubm90YXRpb25cIjppPW5ldyBkLmRlZmF1bHQsdGhpcy5fcGFyc2UodCxpLGUsITApO2JyZWFrO2Nhc2VcIkljb25cIjppPW5ldyBnLmRlZmF1bHQsdGhpcy5fcGFyc2UodCxpLGUpO2JyZWFrO2Nhc2VcIkxpbmVTdHJpbmdcIjppPW5ldyBfLmRlZmF1bHQsdGhpcy5fcGFyc2UodCxpLGUpO2JyZWFrO2Nhc2VcIkxpZ2h0XCI6aT1uZXcgTS5kZWZhdWx0LHRoaXMuX3BhcnNlKHQsaSxlKTticmVhaztjYXNlXCJNb2RlbFwiOmk9bmV3IHguZGVmYXVsdCx0aGlzLl9wYXJzZSh0LGksZSk7YnJlYWs7Y2FzZVwiU3BoZXJlXCI6aT1uZXcgRS5kZWZhdWx0LHRoaXMuX3BhcnNlKHQsaSxlKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIkludmFsaWQgU3R5bGUgVHlwZVwiKX1yZXR1cm4gaX19LHtrZXk6XCJfaGFzU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6cyh0KSkmJiEhdCYmXCJ0eXBlXCJpbiB0fX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1QfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LGMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1uKDEwKSxzPWkoYSksdT1uKDEzKSxsPWkodSksYz17aW50ZW5zaXR5OjEsbGlnaHRUeXBlOlwiSGVtaXNwaGVyZUxpZ2h0XCIsdHlwZTpmdW5jdGlvbigpe3JldHVyblwiTGlnaHRcIn19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbG9yPWwuZGVmYXVsdC5wYXJzZUNvbG9yKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcIm9wdGlvbnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcHRpb25zPW8oe30sdCksdC5ncm91ZENvbG9yJiYodGhpcy5fb3B0aW9ucy5ncm91ZENvbG9yPWwuZGVmYXVsdC5wYXJzZUNvbG9yKHQuZ3JvdWRDb2xvcikpfX0pLGUuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LGMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1uKDEwKSxzPWkoYSksdT1uKDEzKSxsPWkodSksYz17dHlwZTpmdW5jdGlvbigpe3JldHVyblwiTGluZVN0cmluZ1wifX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiY29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29sb3I9bC5kZWZhdWx0LnBhcnNlQ29sb3IodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiZGFzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGFzaH0sc2V0OmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBBcnJheSYmdC5sZW5ndGg+MSYmKHRoaXMuX2Rhc2g9W3RbMF0sdFsxXV0pfX0pLGUuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LGMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1uKDEwKSxzPWkoYSksdT1uKDEzKSxsPWkodSksYz17dGV4dHVyZTpudWxsLGhlaWdodDowLHo6MCxwb2x5Z29uTWVyZ2U6ITEsb3V0bGluZU1lcmdlOiEwLG91dGxpbmVCbGVuZGluZzohMCxjbGlja2FibGU6ITAsdHlwZTpmdW5jdGlvbigpe3JldHVyblwiUG9seWdvblwifX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiY29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29sb3I9bC5kZWZhdWx0LnBhcnNlQ29sb3IodCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwib3V0bGluZUNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdXRsaW5lQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vdXRsaW5lQ29sb3I9bC5kZWZhdWx0LnBhcnNlQ29sb3IodCl9fSksZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLG89bigzKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2kodGhpcyx0KX1yZXR1cm4gcih0LFt7a2V5Olwib2Zmc2V0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm5bdC10aGlzLl9vZmZzZXRbMF0sZS10aGlzLl9vZmZzZXRbMV1dfX0se2tleTpcInNldE9mZnNldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybigwLG8uaXNBcnJheSkodCkmJjI9PT10Lmxlbmd0aD8odGhpcy5fb2Zmc2V0PXQsdGhpcyk6KGNvbnNvbGUud2FybihcIkludmFsaWQgT2Zmc2V0XCIpLHRoaXMpfX0se2tleTpcImdldE9mZnNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29mZnNldH19XSxbe2tleTpcImdldEV4dGVudENlbnRlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0sbj10WzFdLGk9dFsyXSxyPXRbM107cmV0dXJuWyhlK2kpLzIsKG4rcikvMl19fV0pLHR9KCk7ZS5kZWZhdWx0PWF9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3IodGhpcyx0KSx0aGlzLl9ydW5uaW5nPSExfXJldHVybiBhKHQsW3trZXk6XCJsb29wXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fcnVubmluZ3x8KHRoaXMuX3J1bm5pbmc9ITAsdGhpcy5fb25Mb29wKHQpKX19LHtrZXk6XCJoYXNSdW5uaW5nXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVubmluZ319LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9ydW5uaW5nPSExfX0se2tleTpcIl9vbkxvb3BcIix2YWx1ZTpmdW5jdGlvbih0KXt9fV0pLHR9KCksdT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxuKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGkoZSx0KSxhKGUsW3trZXk6XCJfb25Mb29wXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWZ1bmN0aW9uIG4oaSl7ZS5fcnVubmluZyYmKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobiksdChpKSl9O3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobil9fV0pLGV9KHMpLGw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxpPXQuZnBzLG89dm9pZCAwPT09aT82MDppO3IodGhpcyxlKTt2YXIgYT1uKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBhLl9mcHM9byxhLl9pbnRlcnZhbD1udWxsLGF9cmV0dXJuIGkoZSx0KSxhKGUsW3trZXk6XCJfb25Mb29wXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWZ1bmN0aW9uKCl7ZS5fcnVubmluZyYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0KX07dGhpcy5faW50ZXJ2YWw9c2V0SW50ZXJ2YWwobiwxZTMvdGhpcy5fZnBzKX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pbnRlcnZhbCYmY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCksbyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJzdG9wXCIsdGhpcykuY2FsbCh0aGlzKX19XSksZX0ocyk7ZS5SZW5kZXJMb29wPXMsZS5BbmltYXRpb25GcmFtZVJlbmRlckxvb3A9dSxlLkxvY2tGUFNSZW5kZXJMb29wPWx9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KX1yZXR1cm4gaSh0LFt7a2V5Olwib25BZGRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9nZXN0dXJlTWFuYWdlcj10fX0se2tleTpcIm9uUmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9nZXN0dXJlTWFuYWdlcj1udWxsfX0se2tleTpcInByb3ZpZGVyRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleTpcInR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwibm9uZVwifX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7dGhpcy5fY29tcGFyYXRvcj10fHxuLkRFRkFVTFRfQ09NUEFSQVRPUix0aGlzLl9lbGVtZW50cz1bXX10LmV4cG9ydHM9bixuLkRFRkFVTFRfQ09NUEFSQVRPUj1mdW5jdGlvbih0LGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZcIm51bWJlclwiPT10eXBlb2YgZT90LWU6KHQ9dC50b1N0cmluZygpLGU9ZS50b1N0cmluZygpLHQ9PWU/MDp0PmU/MTotMSl9LG4ucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2l6ZSgpfSxuLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0VtcHR5KCkpdGhyb3cgbmV3IEVycm9yKFwiUHJpb3JpdHlRdWV1ZSBpcyBlbXB0eVwiKTtyZXR1cm4gdGhpcy5fZWxlbWVudHNbMF19LG4ucHJvdG90eXBlLmRlcT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGVlaygpLGU9dGhpcy5fZWxlbWVudHMucG9wKCksbj10aGlzLnNpemUoKTtpZigwPT09bilyZXR1cm4gdDt0aGlzLl9lbGVtZW50c1swXT1lO2Zvcih2YXIgaT0wO2k8bjspe3ZhciByPWksbz0yKmkrMSxhPTIqaSsyO2lmKG88biYmdGhpcy5fY29tcGFyZShvLHIpPj0wJiYocj1vKSxhPG4mJnRoaXMuX2NvbXBhcmUoYSxyKT49MCYmKHI9YSkscj09PWkpYnJlYWs7dGhpcy5fc3dhcChyLGkpLGk9cn1yZXR1cm4gdH0sbi5wcm90b3R5cGUuZW5xPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9lbGVtZW50cy5wdXNoKHQpLG49ZS0xO24+MDspe3ZhciBpPU1hdGguZmxvb3IoKG4tMSkvMik7aWYodGhpcy5fY29tcGFyZShuLGkpPD0wKWJyZWFrO3RoaXMuX3N3YXAoaSxuKSxuPWl9cmV0dXJuIGV9LG4ucHJvdG90eXBlLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudHMubGVuZ3RofSxuLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9lbGVtZW50cy5mb3JFYWNoKHQpfSxuLnByb3RvdHlwZS5fY29tcGFyZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jb21wYXJhdG9yKHRoaXMuX2VsZW1lbnRzW3RdLHRoaXMuX2VsZW1lbnRzW2VdKX0sbi5wcm90b3R5cGUuX3N3YXA9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9lbGVtZW50c1t0XTt0aGlzLl9lbGVtZW50c1t0XT10aGlzLl9lbGVtZW50c1tlXSx0aGlzLl9lbGVtZW50c1tlXT1ufX0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKCl7dGhyb3cgbmV3IEVycm9yKFwic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZFwiKX1mdW5jdGlvbiBpKCl7dGhyb3cgbmV3IEVycm9yKFwiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIHIodCl7aWYoYz09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQodCwwKTtpZigoYz09PW58fCFjKSYmc2V0VGltZW91dClyZXR1cm4gYz1zZXRUaW1lb3V0LHNldFRpbWVvdXQodCwwKTt0cnl7cmV0dXJuIGModCwwKX1jYXRjaChlKXt0cnl7cmV0dXJuIGMuY2FsbChudWxsLHQsMCl9Y2F0Y2goZSl7cmV0dXJuIGMuY2FsbCh0aGlzLHQsMCl9fX1mdW5jdGlvbiBvKHQpe2lmKGg9PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dCh0KTtpZigoaD09PWl8fCFoKSYmY2xlYXJUaW1lb3V0KXJldHVybiBoPWNsZWFyVGltZW91dCxjbGVhclRpbWVvdXQodCk7dHJ5e3JldHVybiBoKHQpfWNhdGNoKGUpe3RyeXtyZXR1cm4gaC5jYWxsKG51bGwsdCl9Y2F0Y2goZSl7cmV0dXJuIGguY2FsbCh0aGlzLHQpfX19ZnVuY3Rpb24gYSgpe2cmJmQmJihnPSExLGQubGVuZ3RoP3A9ZC5jb25jYXQocCk6dj0tMSxwLmxlbmd0aCYmcygpKX1mdW5jdGlvbiBzKCl7aWYoIWcpe3ZhciB0PXIoYSk7Zz0hMDtmb3IodmFyIGU9cC5sZW5ndGg7ZTspe2ZvcihkPXAscD1bXTsrK3Y8ZTspZCYmZFt2XS5ydW4oKTt2PS0xLGU9cC5sZW5ndGh9ZD1udWxsLGc9ITEsbyh0KX19ZnVuY3Rpb24gdSh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lfWZ1bmN0aW9uIGwoKXt9dmFyIGMsaCxmPXQuZXhwb3J0cz17fTshZnVuY3Rpb24oKXt0cnl7Yz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6bn1jYXRjaCh0KXtjPW59dHJ5e2g9XCJmdW5jdGlvblwiPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDppfWNhdGNoKHQpe2g9aX19KCk7dmFyIGQscD1bXSxnPSExLHY9LTE7Zi5uZXh0VGljaz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyllW24tMV09YXJndW1lbnRzW25dO3AucHVzaChuZXcgdSh0LGUpKSwxIT09cC5sZW5ndGh8fGd8fHIocyl9LHUucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LGYudGl0bGU9XCJicm93c2VyXCIsZi5icm93c2VyPSEwLGYuZW52PXt9LGYuYXJndj1bXSxmLnZlcnNpb249XCJcIixmLnZlcnNpb25zPXt9LGYub249bCxmLmFkZExpc3RlbmVyPWwsZi5vbmNlPWwsZi5vZmY9bCxmLnJlbW92ZUxpc3RlbmVyPWwsZi5yZW1vdmVBbGxMaXN0ZW5lcnM9bCxmLmVtaXQ9bCxmLnByZXBlbmRMaXN0ZW5lcj1sLGYucHJlcGVuZE9uY2VMaXN0ZW5lcj1sLGYubGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybltdfSxmLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LGYuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LGYuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSxmLnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjsoZnVuY3Rpb24obil7dmFyIG89b3x8ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm57Z2V0QWxsOmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3Q9W119LGFkZDpmdW5jdGlvbihlKXt0LnB1c2goZSl9LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgbj10LmluZGV4T2YoZSk7biE9PS0xJiZ0LnNwbGljZShuLDEpfSx1cGRhdGU6ZnVuY3Rpb24oZSxuKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuITE7dmFyIGk9MDtmb3IoZT12b2lkIDAhPT1lP2U6by5ub3coKTtpPHQubGVuZ3RoOyl0W2ldLnVwZGF0ZShlKXx8bj9pKys6dC5zcGxpY2UoaSwxKTtyZXR1cm4hMH19fSgpO1widW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBuP28ubm93PWZ1bmN0aW9uKCl7dmFyIHQ9bi5ocnRpbWUoKTtyZXR1cm4gMWUzKnRbMF0rdFsxXS8xZTZ9OlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJnZvaWQgMCE9PXdpbmRvdy5wZXJmb3JtYW5jZSYmdm9pZCAwIT09d2luZG93LnBlcmZvcm1hbmNlLm5vdz9vLm5vdz13aW5kb3cucGVyZm9ybWFuY2Uubm93LmJpbmQod2luZG93LnBlcmZvcm1hbmNlKTp2b2lkIDAhPT1EYXRlLm5vdz9vLm5vdz1EYXRlLm5vdzpvLm5vdz1mdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxvLlR3ZWVuPWZ1bmN0aW9uKHQpe3ZhciBlLG49dCxpPXt9LHI9e30sYT17fSxzPTFlMyx1PTAsbD0hMSxjPSExLGg9ITEsZj0wLGQ9bnVsbCxwPW8uRWFzaW5nLkxpbmVhci5Ob25lLGc9by5JbnRlcnBvbGF0aW9uLkxpbmVhcix2PVtdLG09bnVsbCx5PSExLF89bnVsbCxiPW51bGwseD1udWxsO3RoaXMudG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gcj10LHZvaWQgMCE9PWUmJihzPWUpLHRoaXN9LHRoaXMuc3RhcnQ9ZnVuY3Rpb24odCl7by5hZGQodGhpcyksYz0hMCx5PSExLGQ9dm9pZCAwIT09dD90Om8ubm93KCksZCs9Zjtmb3IodmFyIGUgaW4gcil7aWYocltlXWluc3RhbmNlb2YgQXJyYXkpe2lmKDA9PT1yW2VdLmxlbmd0aCljb250aW51ZTtyW2VdPVtuW2VdXS5jb25jYXQocltlXSl9dm9pZCAwIT09bltlXSYmKGlbZV09bltlXSxpW2VdaW5zdGFuY2VvZiBBcnJheT09ITEmJihpW2VdKj0xKSxhW2VdPWlbZV18fDApfXJldHVybiB0aGlzfSx0aGlzLnN0b3A9ZnVuY3Rpb24oKXtyZXR1cm4gYz8oby5yZW1vdmUodGhpcyksYz0hMSxudWxsIT09eCYmeC5jYWxsKG4sbiksdGhpcy5zdG9wQ2hhaW5lZFR3ZWVucygpLHRoaXMpOnRoaXN9LHRoaXMuZW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlKGQrcyksdGhpc30sdGhpcy5zdG9wQ2hhaW5lZFR3ZWVucz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9di5sZW5ndGg7dDxlO3QrKyl2W3RdLnN0b3AoKX0sdGhpcy5kZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gZj10LHRoaXN9LHRoaXMucmVwZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB1PXQsdGhpc30sdGhpcy5yZXBlYXREZWxheT1mdW5jdGlvbih0KXtyZXR1cm4gZT10LHRoaXN9LHRoaXMueW95bz1mdW5jdGlvbih0KXtyZXR1cm4gbD10LHRoaXN9LHRoaXMuZWFzaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBwPXQsdGhpc30sdGhpcy5pbnRlcnBvbGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBnPXQsdGhpc30sdGhpcy5jaGFpbj1mdW5jdGlvbigpe3JldHVybiB2PWFyZ3VtZW50cyx0aGlzfSx0aGlzLm9uU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG09dCx0aGlzfSx0aGlzLm9uVXBkYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBfPXQsdGhpc30sdGhpcy5vbkNvbXBsZXRlPWZ1bmN0aW9uKHQpe3JldHVybiBiPXQsdGhpc30sdGhpcy5vblN0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHg9dCx0aGlzfSx0aGlzLnVwZGF0ZT1mdW5jdGlvbih0KXt2YXIgbyxjLHg7aWYodDxkKXJldHVybiEwO3k9PT0hMSYmKG51bGwhPT1tJiZtLmNhbGwobixuKSx5PSEwKSxjPSh0LWQpL3MsYz1jPjE/MTpjLHg9cChjKTtmb3IobyBpbiByKWlmKHZvaWQgMCE9PWlbb10pe3ZhciB3PWlbb118fDAsRT1yW29dO0UgaW5zdGFuY2VvZiBBcnJheT9uW29dPWcoRSx4KTooXCJzdHJpbmdcIj09dHlwZW9mIEUmJihFPVwiK1wiPT09RS5jaGFyQXQoMCl8fFwiLVwiPT09RS5jaGFyQXQoMCk/dytwYXJzZUZsb2F0KEUpOnBhcnNlRmxvYXQoRSkpLFwibnVtYmVyXCI9PXR5cGVvZiBFJiYobltvXT13KyhFLXcpKngpKX1pZihudWxsIT09XyYmXy5jYWxsKG4seCksMT09PWMpe2lmKHU+MCl7aXNGaW5pdGUodSkmJnUtLTtmb3IobyBpbiBhKXtpZihcInN0cmluZ1wiPT10eXBlb2YgcltvXSYmKGFbb109YVtvXStwYXJzZUZsb2F0KHJbb10pKSxsKXt2YXIgUz1hW29dO2Fbb109cltvXSxyW29dPVN9aVtvXT1hW29dfXJldHVybiBsJiYoaD0haCksZD12b2lkIDAhPT1lP3QrZTp0K2YsITB9bnVsbCE9PWImJmIuY2FsbChuLG4pO2Zvcih2YXIgTT0wLEM9di5sZW5ndGg7TTxDO00rKyl2W01dLnN0YXJ0KGQrcyk7cmV0dXJuITF9cmV0dXJuITB9fSxvLkVhc2luZz17TGluZWFyOntOb25lOmZ1bmN0aW9uKHQpe3JldHVybiB0fX0sUXVhZHJhdGljOntJbjpmdW5jdGlvbih0KXtyZXR1cm4gdCp0fSxPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqKDItdCl9LEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy41KnQqdDotLjUqKC0tdCoodC0yKS0xKX19LEN1YmljOntJbjpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnR9LE91dDpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCp0KzF9LEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy41KnQqdCp0Oi41KigodC09MikqdCp0KzIpfX0sUXVhcnRpYzp7SW46ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnR9LE91dDpmdW5jdGlvbih0KXtyZXR1cm4gMS0gLS10KnQqdCp0fSxJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4odCo9Mik8MT8uNSp0KnQqdCp0Oi0uNSooKHQtPTIpKnQqdCp0LTIpfX0sUXVpbnRpYzp7SW46ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnQqdH0sT3V0OmZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQqdCp0KzF9LEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy41KnQqdCp0KnQqdDouNSooKHQtPTIpKnQqdCp0KnQrMil9fSxTaW51c29pZGFsOntJbjpmdW5jdGlvbih0KXtyZXR1cm4gMS1NYXRoLmNvcyh0Kk1hdGguUEkvMil9LE91dDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCpNYXRoLlBJLzIpfSxJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4uNSooMS1NYXRoLmNvcyhNYXRoLlBJKnQpKX19LEV4cG9uZW50aWFsOntJbjpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDpNYXRoLnBvdygxMDI0LHQtMSl9LE91dDpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQ/MToxLU1hdGgucG93KDIsLTEwKnQpfSxJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOih0Kj0yKTwxPy41Kk1hdGgucG93KDEwMjQsdC0xKTouNSooLU1hdGgucG93KDIsLTEwKih0LTEpKSsyKX19LENpcmN1bGFyOntJbjpmdW5jdGlvbih0KXtyZXR1cm4gMS1NYXRoLnNxcnQoMS10KnQpfSxPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc3FydCgxLSAtLXQqdCl9LEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy0uNSooTWF0aC5zcXJ0KDEtdCp0KS0xKTouNSooTWF0aC5zcXJ0KDEtKHQtPTIpKnQpKzEpfX0sRWxhc3RpYzp7SW46ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6MT09PXQ/MTotTWF0aC5wb3coMiwxMCoodC0xKSkqTWF0aC5zaW4oNSoodC0xLjEpKk1hdGguUEkpfSxPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6MT09PXQ/MTpNYXRoLnBvdygyLC0xMCp0KSpNYXRoLnNpbig1Kih0LS4xKSpNYXRoLlBJKSsxfSxJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOih0Kj0yLHQ8MT8tLjUqTWF0aC5wb3coMiwxMCoodC0xKSkqTWF0aC5zaW4oNSoodC0xLjEpKk1hdGguUEkpOi41Kk1hdGgucG93KDIsLTEwKih0LTEpKSpNYXRoLnNpbig1Kih0LTEuMSkqTWF0aC5QSSkrMSl9fSxCYWNrOntJbjpmdW5jdGlvbih0KXt2YXIgZT0xLjcwMTU4O3JldHVybiB0KnQqKChlKzEpKnQtZSl9LE91dDpmdW5jdGlvbih0KXt2YXIgZT0xLjcwMTU4O3JldHVybi0tdCp0KigoZSsxKSp0K2UpKzF9LEluT3V0OmZ1bmN0aW9uKHQpe3ZhciBlPTIuNTk0OTA5NTtyZXR1cm4odCo9Mik8MT8uNSoodCp0KigoZSsxKSp0LWUpKTouNSooKHQtPTIpKnQqKChlKzEpKnQrZSkrMil9fSxCb3VuY2U6e0luOmZ1bmN0aW9uKHQpe3JldHVybiAxLW8uRWFzaW5nLkJvdW5jZS5PdXQoMS10KX0sT3V0OmZ1bmN0aW9uKHQpe3JldHVybiB0PDEvMi43NT83LjU2MjUqdCp0OnQ8Mi8yLjc1PzcuNTYyNSoodC09MS41LzIuNzUpKnQrLjc1OnQ8Mi41LzIuNzU/Ny41NjI1Kih0LT0yLjI1LzIuNzUpKnQrLjkzNzU6Ny41NjI1Kih0LT0yLjYyNS8yLjc1KSp0Ky45ODQzNzV9LEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybiB0PC41Py41Km8uRWFzaW5nLkJvdW5jZS5JbigyKnQpOi41Km8uRWFzaW5nLkJvdW5jZS5PdXQoMip0LTEpKy41fX19LG8uSW50ZXJwb2xhdGlvbj17TGluZWFyOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5sZW5ndGgtMSxpPW4qZSxyPU1hdGguZmxvb3IoaSksYT1vLkludGVycG9sYXRpb24uVXRpbHMuTGluZWFyO3JldHVybiBlPDA/YSh0WzBdLHRbMV0saSk6ZT4xP2EodFtuXSx0W24tMV0sbi1pKTphKHRbcl0sdFtyKzE+bj9uOnIrMV0saS1yKX0sQmV6aWVyOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aC0xLHI9TWF0aC5wb3csYT1vLkludGVycG9sYXRpb24uVXRpbHMuQmVybnN0ZWluLHM9MDtzPD1pO3MrKyluKz1yKDEtZSxpLXMpKnIoZSxzKSp0W3NdKmEoaSxzKTtyZXR1cm4gbn0sQ2F0bXVsbFJvbTpmdW5jdGlvbih0LGUpe3ZhciBuPXQubGVuZ3RoLTEsaT1uKmUscj1NYXRoLmZsb29yKGkpLGE9by5JbnRlcnBvbGF0aW9uLlV0aWxzLkNhdG11bGxSb207cmV0dXJuIHRbMF09PT10W25dPyhlPDAmJihyPU1hdGguZmxvb3IoaT1uKigxK2UpKSksYSh0WyhyLTErbiklbl0sdFtyXSx0WyhyKzEpJW5dLHRbKHIrMiklbl0saS1yKSk6ZTwwP3RbMF0tKGEodFswXSx0WzBdLHRbMV0sdFsxXSwtaSktdFswXSk6ZT4xP3Rbbl0tKGEodFtuXSx0W25dLHRbbi0xXSx0W24tMV0saS1uKS10W25dKTphKHRbcj9yLTE6MF0sdFtyXSx0W248cisxP246cisxXSx0W248cisyP246cisyXSxpLXIpfSxVdGlsczp7TGluZWFyOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oZS10KSpuK3R9LEJlcm5zdGVpbjpmdW5jdGlvbih0LGUpe3ZhciBuPW8uSW50ZXJwb2xhdGlvbi5VdGlscy5GYWN0b3JpYWw7cmV0dXJuIG4odCkvbihlKS9uKHQtZSl9LEZhY3RvcmlhbDpmdW5jdGlvbigpe3ZhciB0PVsxXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49MTtpZih0W2VdKXJldHVybiB0W2VdO2Zvcih2YXIgaT1lO2k+MTtpLS0pbio9aTtyZXR1cm4gdFtlXT1uLG59fSgpLENhdG11bGxSb206ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz0uNSoobi10KSxhPS41KihpLWUpLHM9cipyLHU9cipzO3JldHVybigyKmUtMipuK28rYSkqdSsoLTMqZSszKm4tMipvLWEpKnMrbypyK2V9fX0sZnVuY3Rpb24obil7aT1bXSxyPWZ1bmN0aW9uKCl7cmV0dXJuIG99LmFwcGx5KGUsaSksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKX0odGhpcyl9KS5jYWxsKGUsbig3MikpfSxmdW5jdGlvbih0LGUpeyFmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiB0PSt0LDA9PT10fHxpc05hTih0KT90OnQ+MD8xOi0xfWZ1bmN0aW9uIG4odCl7dmFyIGU9bmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXt2YXIgaT1mdW5jdGlvbihyKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dCYmdC5kYXRhP2UoKTpyPj0yMD9uKCk6aSgrK3IpfSw1MCl9O2koMCl9KTtyZXR1cm4gZX1mdW5jdGlvbiBpKCl7cD1kPyh0LnNjcmVlbi5vcmllbnRhdGlvbi5hbmdsZXx8MCkqbDoodC5vcmllbnRhdGlvbnx8MCkqbH1mdW5jdGlvbiByKHQpe2gub3JpZW50YXRpb24uZGF0YT10O2Zvcih2YXIgZSBpbiBoLm9yaWVudGF0aW9uLmNhbGxiYWNrcyloLm9yaWVudGF0aW9uLmNhbGxiYWNrc1tlXS5jYWxsKHRoaXMpfWZ1bmN0aW9uIG8odCl7aC5tb3Rpb24uZGF0YT10O2Zvcih2YXIgZSBpbiBoLm1vdGlvbi5jYWxsYmFja3MpaC5tb3Rpb24uY2FsbGJhY2tzW2VdLmNhbGwodGhpcyl9aWYodm9pZCAwPT09dC5GVUxMVElMVHx8bnVsbD09PXQuRlVMTFRJTFQpe3ZhciBhPU1hdGguUEkscz1hLzIsdT0yKmEsbD1hLzE4MCxjPTE4MC9hLGg9e29yaWVudGF0aW9uOnthY3RpdmU6ITEsY2FsbGJhY2tzOltdLGRhdGE6dm9pZCAwfSxtb3Rpb246e2FjdGl2ZTohMSxjYWxsYmFja3M6W10sZGF0YTp2b2lkIDB9fSxmPSExLGQ9ISghdC5zY3JlZW58fCF0LnNjcmVlbi5vcmllbnRhdGlvbnx8dm9pZCAwPT09dC5zY3JlZW4ub3JpZW50YXRpb24uYW5nbGV8fG51bGw9PT10LnNjcmVlbi5vcmllbnRhdGlvbi5hbmdsZSkscD0oZD90LnNjcmVlbi5vcmllbnRhdGlvbi5hbmdsZTp0Lm9yaWVudGF0aW9ufHwwKSpsLGc9cyx2PWEsbT11LzMseT0tcyxfPXt9O18udmVyc2lvbj1cIjAuNS4zXCIsXy5nZXREZXZpY2VPcmllbnRhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgUHJvbWlzZShmdW5jdGlvbihlLGkpe3ZhciByPW5ldyBfLkRldmljZU9yaWVudGF0aW9uKHQpO3Iuc3RhcnQoKTt2YXIgbz1uZXcgbihoLm9yaWVudGF0aW9uKTtvLnRoZW4oZnVuY3Rpb24oKXtlKHIpfSkuY2F0Y2goZnVuY3Rpb24oKXtyLnN0b3AoKSxpKFwiRGV2aWNlT3JpZW50YXRpb24gaXMgbm90IHN1cHBvcnRlZFwiKX0pfSk7cmV0dXJuIGV9LF8uZ2V0RGV2aWNlTW90aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsaSl7dmFyIHI9bmV3IF8uRGV2aWNlTW90aW9uKHQpO3Iuc3RhcnQoKTt2YXIgbz1uZXcgbihoLm1vdGlvbik7by50aGVuKGZ1bmN0aW9uKCl7ZShyKX0pLmNhdGNoKGZ1bmN0aW9uKCl7ci5zdG9wKCksaShcIkRldmljZU1vdGlvbiBpcyBub3Qgc3VwcG9ydGVkXCIpfSl9KTtyZXR1cm4gZX0sXy5RdWF0ZXJuaW9uPWZ1bmN0aW9uKHQsbixpLHIpe3ZhciBvO3RoaXMuc2V0PWZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMueD10fHwwLHRoaXMueT1lfHwwLHRoaXMuej1ufHwwLHRoaXMudz1pfHwxfSx0aGlzLmNvcHk9ZnVuY3Rpb24odCl7dGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXMuej10LnosdGhpcy53PXQud30sdGhpcy5zZXRGcm9tRXVsZXI9ZnVuY3Rpb24oKXt2YXIgdCxlLG4saSxyLG8sYSxzLHUsYyxoLGY7cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBkPWR8fHt9LG49KGQuYWxwaGF8fDApKmwsdD0oZC5iZXRhfHwwKSpsLGU9KGQuZ2FtbWF8fDApKmwsbz1uLzIsaT10LzIscj1lLzIsYT1NYXRoLmNvcyhpKSxzPU1hdGguY29zKHIpLHU9TWF0aC5jb3MobyksYz1NYXRoLnNpbihpKSxoPU1hdGguc2luKHIpLGY9TWF0aC5zaW4obyksdGhpcy5zZXQoYypzKnUtYSpoKmYsYSpoKnUrYypzKmYsYSpzKmYrYypoKnUsYSpzKnUtYypoKmYpLHRoaXMubm9ybWFsaXplKCksdGhpc319KCksdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXg9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQ9bi5lbGVtZW50cyx0aGlzLnNldCguNSpNYXRoLnNxcnQoMSt0WzBdLXRbNF0tdFs4XSkqZSh0WzddLXRbNV0pLC41Kk1hdGguc3FydCgxLXRbMF0rdFs0XS10WzhdKSplKHRbMl0tdFs2XSksLjUqTWF0aC5zcXJ0KDEtdFswXS10WzRdK3RbOF0pKmUodFszXS10WzFdKSwuNSpNYXRoLnNxcnQoMSt0WzBdK3RbNF0rdFs4XSkpLHRoaXN9fSgpLHRoaXMubXVsdGlwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIG89Xy5RdWF0ZXJuaW9uLnByb3RvdHlwZS5tdWx0aXBseVF1YXRlcm5pb25zKHRoaXMsdCksdGhpcy5jb3B5KG8pLHRoaXN9LHRoaXMucm90YXRlWD1mdW5jdGlvbih0KXtyZXR1cm4gbz1fLlF1YXRlcm5pb24ucHJvdG90eXBlLnJvdGF0ZUJ5QXhpc0FuZ2xlKHRoaXMsWzEsMCwwXSx0KSx0aGlzLmNvcHkobyksdGhpc30sdGhpcy5yb3RhdGVZPWZ1bmN0aW9uKHQpe3JldHVybiBvPV8uUXVhdGVybmlvbi5wcm90b3R5cGUucm90YXRlQnlBeGlzQW5nbGUodGhpcyxbMCwxLDBdLHQpLHRoaXMuY29weShvKSx0aGlzfSx0aGlzLnJvdGF0ZVo9ZnVuY3Rpb24odCl7cmV0dXJuIG89Xy5RdWF0ZXJuaW9uLnByb3RvdHlwZS5yb3RhdGVCeUF4aXNBbmdsZSh0aGlzLFswLDAsMV0sdCksdGhpcy5jb3B5KG8pLHRoaXN9LHRoaXMubm9ybWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuIF8uUXVhdGVybmlvbi5wcm90b3R5cGUubm9ybWFsaXplKHRoaXMpfSx0aGlzLnNldCh0LG4saSxyKX0sXy5RdWF0ZXJuaW9uLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Xy5RdWF0ZXJuaW9uLG11bHRpcGx5UXVhdGVybmlvbnM6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgXy5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciBpPWUueCxyPWUueSxvPWUueixhPWUudyxzPW4ueCx1PW4ueSxsPW4ueixjPW4udztyZXR1cm4gdC5zZXQoaSpjK2EqcytyKmwtbyp1LHIqYythKnUrbypzLWkqbCxvKmMrYSpsK2kqdS1yKnMsYSpjLWkqcy1yKnUtbypsKSx0fX0oKSxub3JtYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5zcXJ0KHQueCp0LngrdC55KnQueSt0LnoqdC56K3Qudyp0LncpO3JldHVybiAwPT09ZT8odC54PTAsdC55PTAsdC56PTAsdC53PTEpOihlPTEvZSx0LngqPWUsdC55Kj1lLHQueio9ZSx0LncqPWUpLHR9LHJvdGF0ZUJ5QXhpc0FuZ2xlOmZ1bmN0aW9uKCl7dmFyIHQsZSxuPW5ldyBfLlF1YXRlcm5pb24saT1uZXcgXy5RdWF0ZXJuaW9uO3JldHVybiBmdW5jdGlvbihyLG8sYSl7cmV0dXJuIHQ9KGF8fDApLzIsZT1NYXRoLnNpbih0KSxpLnNldCgob1swXXx8MCkqZSwob1sxXXx8MCkqZSwob1syXXx8MCkqZSxNYXRoLmNvcyh0KSksbj1fLlF1YXRlcm5pb24ucHJvdG90eXBlLm11bHRpcGx5UXVhdGVybmlvbnMocixpKSxfLlF1YXRlcm5pb24ucHJvdG90eXBlLm5vcm1hbGl6ZShuKX19KCl9LF8uUm90YXRpb25NYXRyaXg9ZnVuY3Rpb24odCxlLG4saSxyLG8sYSxzLHUpe3ZhciBjO3RoaXMuZWxlbWVudHM9bmV3IEZsb2F0MzJBcnJheSg5KSx0aGlzLmlkZW50aXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0KDEsMCwwLDAsMSwwLDAsMCwxKSx0aGlzfSx0aGlzLnNldD1mdW5jdGlvbih0LGUsbixpLHIsbyxhLHMsdSl7dGhpcy5lbGVtZW50c1swXT10fHwxLHRoaXMuZWxlbWVudHNbMV09ZXx8MCx0aGlzLmVsZW1lbnRzWzJdPW58fDAsdGhpcy5lbGVtZW50c1szXT1pfHwwLHRoaXMuZWxlbWVudHNbNF09cnx8MSx0aGlzLmVsZW1lbnRzWzVdPW98fDAsdGhpcy5lbGVtZW50c1s2XT1hfHwwLHRoaXMuZWxlbWVudHNbN109c3x8MCx0aGlzLmVsZW1lbnRzWzhdPXV8fDF9LHRoaXMuY29weT1mdW5jdGlvbih0KXt0aGlzLmVsZW1lbnRzWzBdPXQuZWxlbWVudHNbMF0sdGhpcy5lbGVtZW50c1sxXT10LmVsZW1lbnRzWzFdLHRoaXMuZWxlbWVudHNbMl09dC5lbGVtZW50c1syXSx0aGlzLmVsZW1lbnRzWzNdPXQuZWxlbWVudHNbM10sdGhpcy5lbGVtZW50c1s0XT10LmVsZW1lbnRzWzRdLHRoaXMuZWxlbWVudHNbNV09dC5lbGVtZW50c1s1XSx0aGlzLmVsZW1lbnRzWzZdPXQuZWxlbWVudHNbNl0sdGhpcy5lbGVtZW50c1s3XT10LmVsZW1lbnRzWzddLHRoaXMuZWxlbWVudHNbOF09dC5lbGVtZW50c1s4XX0sdGhpcy5zZXRGcm9tRXVsZXI9ZnVuY3Rpb24oKXt2YXIgdCxlLG4saSxyLG8sYSxzLHU7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBjPWN8fHt9LG49KGMuYWxwaGF8fDApKmwsdD0oYy5iZXRhfHwwKSpsLGU9KGMuZ2FtbWF8fDApKmwsaT1NYXRoLmNvcyh0KSxyPU1hdGguY29zKGUpLG89TWF0aC5jb3MobiksYT1NYXRoLnNpbih0KSxzPU1hdGguc2luKGUpLHU9TWF0aC5zaW4obiksdGhpcy5zZXQobypyLXUqYSpzLC1pKnUscip1KmErbypzLHIqdStvKmEqcyxvKmksdSpzLW8qciphLC1pKnMsYSxpKnIpLHRoaXMubm9ybWFsaXplKCksdGhpc319KCksdGhpcy5zZXRGcm9tUXVhdGVybmlvbj1mdW5jdGlvbigpe3ZhciB0LGUsbixpO3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gdD1yLncqci53LGU9ci54KnIueCxuPXIueSpyLnksaT1yLnoqci56LHRoaXMuc2V0KHQrZS1uLWksMiooci54KnIueS1yLncqci56KSwyKihyLngqci56K3IudypyLnkpLDIqKHIueCpyLnkrci53KnIueiksdC1lK24taSwyKihyLnkqci56LXIudypyLngpLDIqKHIueCpyLnotci53KnIueSksMiooci55KnIueityLncqci54KSx0LWUtbitpKSx0aGlzfX0oKSx0aGlzLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBjPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLm11bHRpcGx5TWF0cmljZXModGhpcyx0KSx0aGlzLmNvcHkoYyksdGhpc30sdGhpcy5yb3RhdGVYPWZ1bmN0aW9uKHQpe3JldHVybiBjPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLnJvdGF0ZUJ5QXhpc0FuZ2xlKHRoaXMsWzEsMCwwXSx0KSx0aGlzLmNvcHkoYyksdGhpc30sdGhpcy5yb3RhdGVZPWZ1bmN0aW9uKHQpe3JldHVybiBjPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLnJvdGF0ZUJ5QXhpc0FuZ2xlKHRoaXMsWzAsMSwwXSx0KSx0aGlzLmNvcHkoYyksdGhpc30sdGhpcy5yb3RhdGVaPWZ1bmN0aW9uKHQpe3JldHVybiBjPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLnJvdGF0ZUJ5QXhpc0FuZ2xlKHRoaXMsWzAsMCwxXSx0KSx0aGlzLmNvcHkoYyksdGhpc30sdGhpcy5ub3JtYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4gXy5Sb3RhdGlvbk1hdHJpeC5wcm90b3R5cGUubm9ybWFsaXplKHRoaXMpfSx0aGlzLnNldCh0LGUsbixpLHIsbyxhLHMsdSl9LF8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfLlJvdGF0aW9uTWF0cml4LG11bHRpcGx5TWF0cmljZXM6ZnVuY3Rpb24oKXt2YXIgdCxlLG49bmV3IF8uUm90YXRpb25NYXRyaXg7cmV0dXJuIGZ1bmN0aW9uKGkscil7cmV0dXJuIHQ9aS5lbGVtZW50cyxlPXIuZWxlbWVudHMsbi5zZXQodFswXSplWzBdK3RbMV0qZVszXSt0WzJdKmVbNl0sdFswXSplWzFdK3RbMV0qZVs0XSt0WzJdKmVbN10sdFswXSplWzJdK3RbMV0qZVs1XSt0WzJdKmVbOF0sdFszXSplWzBdK3RbNF0qZVszXSt0WzVdKmVbNl0sdFszXSplWzFdK3RbNF0qZVs0XSt0WzVdKmVbN10sdFszXSplWzJdK3RbNF0qZVs1XSt0WzVdKmVbOF0sdFs2XSplWzBdK3RbN10qZVszXSt0WzhdKmVbNl0sdFs2XSplWzFdK3RbN10qZVs0XSt0WzhdKmVbN10sdFs2XSplWzJdK3RbN10qZVs1XSt0WzhdKmVbOF0pLG59fSgpLG5vcm1hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10LmVsZW1lbnRzLG49ZVswXSplWzRdKmVbOF0tZVswXSplWzVdKmVbN10tZVsxXSplWzNdKmVbOF0rZVsxXSplWzVdKmVbNl0rZVsyXSplWzNdKmVbN10tZVsyXSplWzRdKmVbNl07cmV0dXJuIGVbMF0vPW4sZVsxXS89bixlWzJdLz1uLGVbM10vPW4sZVs0XS89bixlWzVdLz1uLGVbNl0vPW4sZVs3XS89bixlWzhdLz1uLHQuZWxlbWVudHM9ZSx0fSxyb3RhdGVCeUF4aXNBbmdsZTpmdW5jdGlvbigpe3ZhciB0LGUsbj1uZXcgXy5Sb3RhdGlvbk1hdHJpeCxpPW5ldyBfLlJvdGF0aW9uTWF0cml4LHI9ITE7cmV0dXJuIGZ1bmN0aW9uKG8sYSxzKXtyZXR1cm4gaS5pZGVudGl0eSgpLHI9ITEsdD1NYXRoLnNpbihzKSxlPU1hdGguY29zKHMpLDE9PT1hWzBdJiYwPT09YVsxXSYmMD09PWFbMl0/KHI9ITAsaS5lbGVtZW50c1s0XT1lLGkuZWxlbWVudHNbNV09LXQsaS5lbGVtZW50c1s3XT10LGkuZWxlbWVudHNbOF09ZSk6MT09PWFbMV0mJjA9PT1hWzBdJiYwPT09YVsyXT8ocj0hMCxpLmVsZW1lbnRzWzBdPWUsaS5lbGVtZW50c1syXT10LGkuZWxlbWVudHNbNl09LXQsaS5lbGVtZW50c1s4XT1lKToxPT09YVsyXSYmMD09PWFbMF0mJjA9PT1hWzFdJiYocj0hMCxpLmVsZW1lbnRzWzBdPWUsaS5lbGVtZW50c1sxXT0tdCxpLmVsZW1lbnRzWzNdPXQsaS5lbGVtZW50c1s0XT1lKSxyPyhuPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLm11bHRpcGx5TWF0cmljZXMobyxpKSxuPV8uUm90YXRpb25NYXRyaXgucHJvdG90eXBlLm5vcm1hbGl6ZShuKSk6bj1vLG59fSgpfSxfLkV1bGVyPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnNldD1mdW5jdGlvbih0LGUsbil7dGhpcy5hbHBoYT10fHwwLHRoaXMuYmV0YT1lfHwwLHRoaXMuZ2FtbWE9bnx8MH0sdGhpcy5jb3B5PWZ1bmN0aW9uKHQpe3RoaXMuYWxwaGE9dC5hbHBoYSx0aGlzLmJldGE9dC5iZXRhLHRoaXMuZ2FtbWE9dC5nYW1tYX0sdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXg9ZnVuY3Rpb24oKXt2YXIgdCxlLG4saTtyZXR1cm4gZnVuY3Rpb24ocil7dD1yLmVsZW1lbnRzLHRbOF0+MD8oZT1NYXRoLmF0YW4yKC10WzFdLHRbNF0pLG49TWF0aC5hc2luKHRbN10pLGk9TWF0aC5hdGFuMigtdFs2XSx0WzhdKSk6dFs4XTwwPyhlPU1hdGguYXRhbjIodFsxXSwtdFs0XSksbj0tTWF0aC5hc2luKHRbN10pLG4rPW4+PTA/LWE6YSxpPU1hdGguYXRhbjIodFs2XSwtdFs4XSkpOnRbNl0+MD8oZT1NYXRoLmF0YW4yKC10WzFdLHRbNF0pLG49TWF0aC5hc2luKHRbN10pLGk9LXMpOnRbNl08MD8oZT1NYXRoLmF0YW4yKHRbMV0sLXRbNF0pLG49LU1hdGguYXNpbih0WzddKSxuKz1uPj0wPy1hOmEsaT0tcyk6KGU9TWF0aC5hdGFuMih0WzNdLHRbMF0pLG49dFs3XT4wP3M6LXMsaT0wKSxlPDAmJihlKz11KSxlKj1jLG4qPWMsaSo9Yyx0aGlzLnNldChlLG4saSl9fSgpLHRoaXMuc2V0RnJvbVF1YXRlcm5pb249ZnVuY3Rpb24oKXt2YXIgdCxlLG47cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciByPWkudyppLncsbz1pLngqaS54LGw9aS55KmkueSxoPWkueippLnosZj1yK28rbCtoLGQ9aS53KmkueCtpLnkqaS56LHA9MWUtNjtpZihkPiguNS1wKSpmKXQ9MipNYXRoLmF0YW4yKGkueSxpLncpLGU9cyxuPTA7ZWxzZSBpZihkPCgtLjUrcCkqZil0PS0yKk1hdGguYXRhbjIoaS55LGkudyksZT0tcyxuPTA7ZWxzZXt2YXIgZz1yLW8rbC1oLHY9MiooaS53Kmkuei1pLngqaS55KSxtPXItby1sK2gseT0yKihpLncqaS55LWkueCppLnopO20+MD8odD1NYXRoLmF0YW4yKHYsZyksZT1NYXRoLmFzaW4oMipkL2YpLG49TWF0aC5hdGFuMih5LG0pKToodD1NYXRoLmF0YW4yKC12LC1nKSxlPS1NYXRoLmFzaW4oMipkL2YpLGUrPWU8MD9hOi1hLG49TWF0aC5hdGFuMigteSwtbSkpfXQ8MCYmKHQrPXUpLHQqPWMsZSo9YyxuKj1jLHRoaXMuc2V0KHQsZSxuKX19KCksdGhpcy5yb3RhdGVYPWZ1bmN0aW9uKHQpe3JldHVybiBfLkV1bGVyLnByb3RvdHlwZS5yb3RhdGVCeUF4aXNBbmdsZSh0aGlzLFsxLDAsMF0sdCksdGhpc30sdGhpcy5yb3RhdGVZPWZ1bmN0aW9uKHQpe3JldHVybiBfLkV1bGVyLnByb3RvdHlwZS5yb3RhdGVCeUF4aXNBbmdsZSh0aGlzLFswLDEsMF0sdCksdGhpc30sdGhpcy5yb3RhdGVaPWZ1bmN0aW9uKHQpe3JldHVybiBfLkV1bGVyLnByb3RvdHlwZS5yb3RhdGVCeUF4aXNBbmdsZSh0aGlzLFswLDAsMV0sdCksdGhpc30sdGhpcy5zZXQodCxlLG4pfSxfLkV1bGVyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Xy5FdWxlcixyb3RhdGVCeUF4aXNBbmdsZTpmdW5jdGlvbigpe3ZhciB0PW5ldyBfLlJvdGF0aW9uTWF0cml4O3JldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIHQuc2V0RnJvbUV1bGVyKGUpLHQ9Xy5Sb3RhdGlvbk1hdHJpeC5wcm90b3R5cGUucm90YXRlQnlBeGlzQW5nbGUodCxuLGkpLGUuc2V0RnJvbVJvdGF0aW9uTWF0cml4KHQpLGV9fSgpfSxfLkRldmljZU9yaWVudGF0aW9uPWZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucz1lfHx7fTt2YXIgbj0wLGk9MjAwLHI9MCxvPTEwO2lmKHRoaXMuYWxwaGFPZmZzZXRTY3JlZW49MCx0aGlzLmFscGhhT2Zmc2V0RGV2aWNlPXZvaWQgMCxcImdhbWVcIj09PXRoaXMub3B0aW9ucy50eXBlKXt2YXIgYT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9PWUuYWxwaGEmJih0aGlzLmFscGhhT2Zmc2V0RGV2aWNlPW5ldyBfLkV1bGVyKGUuYWxwaGEsMCwwKSx0aGlzLmFscGhhT2Zmc2V0RGV2aWNlLnJvdGF0ZVooLXApLCsrcj49byk/dm9pZCB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLGEsITEpOnZvaWQoKytuPj1pJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLGEsITEpKX0uYmluZCh0aGlzKTt0LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLGEsITEpfWVsc2UgaWYoXCJ3b3JsZFwiPT09dGhpcy5vcHRpb25zLnR5cGUpe3ZhciBzPWZ1bmN0aW9uKGUpe3JldHVybiBlLmFic29sdXRlIT09ITAmJnZvaWQgMCE9PWUud2Via2l0Q29tcGFzc0FjY3VyYWN5JiZudWxsIT09ZS53ZWJraXRDb21wYXNzQWNjdXJhY3kmJitlLndlYmtpdENvbXBhc3NBY2N1cmFjeT49MCYmK2Uud2Via2l0Q29tcGFzc0FjY3VyYWN5PDUwJiYodGhpcy5hbHBoYU9mZnNldERldmljZT1uZXcgXy5FdWxlcihlLndlYmtpdENvbXBhc3NIZWFkaW5nLDAsMCksdGhpcy5hbHBoYU9mZnNldERldmljZS5yb3RhdGVaKHApLHRoaXMuYWxwaGFPZmZzZXRTY3JlZW49cCwrK3I+PW8pP3ZvaWQgdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIixzLCExKTp2b2lkKCsrbj49aSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIixzLCExKSl9LmJpbmQodGhpcyk7dC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlb3JpZW50YXRpb25cIixzLCExKX19LF8uRGV2aWNlT3JpZW50YXRpb24ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfLkRldmljZU9yaWVudGF0aW9uLHN0YXJ0OmZ1bmN0aW9uKGUpe2UmJlwiW29iamVjdCBGdW5jdGlvbl1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpJiZoLm9yaWVudGF0aW9uLmNhbGxiYWNrcy5wdXNoKGUpLGZ8fChkP3Quc2NyZWVuLm9yaWVudGF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIixpLCExKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLGksITEpKSxoLm9yaWVudGF0aW9uLmFjdGl2ZXx8KHQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZW9yaWVudGF0aW9uXCIsciwhMSksaC5vcmllbnRhdGlvbi5hY3RpdmU9ITApfSxzdG9wOmZ1bmN0aW9uKCl7aC5vcmllbnRhdGlvbi5hY3RpdmUmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkZXZpY2VvcmllbnRhdGlvblwiLHIsITEpLGgub3JpZW50YXRpb24uYWN0aXZlPSExKX0sbGlzdGVuOmZ1bmN0aW9uKHQpe3RoaXMuc3RhcnQodCl9LGdldEZpeGVkRnJhbWVRdWF0ZXJuaW9uOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IF8uRXVsZXIsZT1uZXcgXy5Sb3RhdGlvbk1hdHJpeCxuPW5ldyBfLlF1YXRlcm5pb247cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9aC5vcmllbnRhdGlvbi5kYXRhfHx7YWxwaGE6MCxiZXRhOjAsZ2FtbWE6MH0scj1pLmFscGhhO3JldHVybiB0aGlzLmFscGhhT2Zmc2V0RGV2aWNlJiYoZS5zZXRGcm9tRXVsZXIodGhpcy5hbHBoYU9mZnNldERldmljZSksZS5yb3RhdGVaKC10aGlzLmFscGhhT2Zmc2V0U2NyZWVuKSx0LnNldEZyb21Sb3RhdGlvbk1hdHJpeChlKSx0LmFscGhhPDAmJih0LmFscGhhKz0zNjApLHQuYWxwaGElPTM2MCxyLT10LmFscGhhKSx0LnNldChyLGkuYmV0YSxpLmdhbW1hKSxuLnNldEZyb21FdWxlcih0KSxufX0oKSxnZXRTY3JlZW5BZGp1c3RlZFF1YXRlcm5pb246ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdD10aGlzLmdldEZpeGVkRnJhbWVRdWF0ZXJuaW9uKCksdC5yb3RhdGVaKC1wKSx0fX0oKSxnZXRGaXhlZEZyYW1lTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IF8uRXVsZXIsZT1uZXcgXy5Sb3RhdGlvbk1hdHJpeDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1oLm9yaWVudGF0aW9uLmRhdGF8fHthbHBoYTowLGJldGE6MCxnYW1tYTowfSxpPW4uYWxwaGE7cmV0dXJuIHRoaXMuYWxwaGFPZmZzZXREZXZpY2UmJihlLnNldEZyb21FdWxlcih0aGlzLmFscGhhT2Zmc2V0RGV2aWNlKSxlLnJvdGF0ZVooLXRoaXMuYWxwaGFPZmZzZXRTY3JlZW4pLHQuc2V0RnJvbVJvdGF0aW9uTWF0cml4KGUpLHQuYWxwaGE8MCYmKHQuYWxwaGErPTM2MCksdC5hbHBoYSU9MzYwLGktPXQuYWxwaGEpLHQuc2V0KGksbi5iZXRhLG4uZ2FtbWEpLGUuc2V0RnJvbUV1bGVyKHQpLGV9fSgpLGdldFNjcmVlbkFkanVzdGVkTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQ9dGhpcy5nZXRGaXhlZEZyYW1lTWF0cml4KCksdC5yb3RhdGVaKC1wKSx0fX0oKSxnZXRGaXhlZEZyYW1lRXVsZXI6ZnVuY3Rpb24oKXt2YXIgdCxlPW5ldyBfLkV1bGVyO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0PXRoaXMuZ2V0Rml4ZWRGcmFtZU1hdHJpeCgpLGUuc2V0RnJvbVJvdGF0aW9uTWF0cml4KHQpLGV9fSgpLGdldFNjcmVlbkFkanVzdGVkRXVsZXI6ZnVuY3Rpb24oKXt2YXIgdCxlPW5ldyBfLkV1bGVyO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0PXRoaXMuZ2V0U2NyZWVuQWRqdXN0ZWRNYXRyaXgoKSxlLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0KSxlfX0oKSxpc0Fic29sdXRlOmZ1bmN0aW9uKCl7cmV0dXJuISghaC5vcmllbnRhdGlvbi5kYXRhfHxoLm9yaWVudGF0aW9uLmRhdGEuYWJzb2x1dGUhPT0hMCl9LGdldExhc3RSYXdFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gaC5vcmllbnRhdGlvbi5kYXRhfHx7fX0sQUxQSEE6XCJhbHBoYVwiLEJFVEE6XCJiZXRhXCIsR0FNTUE6XCJnYW1tYVwifSxfLkRldmljZU1vdGlvbj1mdW5jdGlvbih0KXt0aGlzLm9wdGlvbnM9dHx8e319LF8uRGV2aWNlTW90aW9uLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Xy5EZXZpY2VNb3Rpb24sc3RhcnQ6ZnVuY3Rpb24oZSl7ZSYmXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkmJmgubW90aW9uLmNhbGxiYWNrcy5wdXNoKGUpLGZ8fChkP3Quc2NyZWVuLm9yaWVudGF0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIixpLCExKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLGksITEpKSxoLm1vdGlvbi5hY3RpdmV8fCh0LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2Vtb3Rpb25cIixvLCExKSxoLm1vdGlvbi5hY3RpdmU9ITApfSxzdG9wOmZ1bmN0aW9uKCl7aC5tb3Rpb24uYWN0aXZlJiYodC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlbW90aW9uXCIsbywhMSksaC5tb3Rpb24uYWN0aXZlPSExKX0sbGlzdGVuOmZ1bmN0aW9uKHQpe3RoaXMuc3RhcnQodCl9LGdldFNjcmVlbkFkanVzdGVkQWNjZWxlcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9aC5tb3Rpb24uZGF0YSYmaC5tb3Rpb24uZGF0YS5hY2NlbGVyYXRpb24/aC5tb3Rpb24uZGF0YS5hY2NlbGVyYXRpb246e3g6MCx5OjAsejowfSxlPXt9O3N3aXRjaChwKXtjYXNlIGc6ZS54PS10LnksZS55PXQueDticmVhaztjYXNlIHY6ZS54PS10LngsZS55PS10Lnk7YnJlYWs7Y2FzZSBtOmNhc2UgeTplLng9dC55LGUueT0tdC54O2JyZWFrO2RlZmF1bHQ6ZS54PXQueCxlLnk9dC55fXJldHVybiBlLno9dC56LGV9LGdldFNjcmVlbkFkanVzdGVkQWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eTpmdW5jdGlvbigpe3ZhciB0PWgubW90aW9uLmRhdGEmJmgubW90aW9uLmRhdGEuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eT9oLm1vdGlvbi5kYXRhLmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk6e3g6MCx5OjAsejowfSxlPXt9O3N3aXRjaChwKXtjYXNlIGc6ZS54PS10LnksZS55PXQueDticmVhaztjYXNlIHY6ZS54PS10LngsZS55PS10Lnk7YnJlYWs7Y2FzZSBtOmNhc2UgeTplLng9dC55LGUueT0tdC54O2JyZWFrO2RlZmF1bHQ6ZS54PXQueCxlLnk9dC55fXJldHVybiBlLno9dC56LGV9LGdldFNjcmVlbkFkanVzdGVkUm90YXRpb25SYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9aC5tb3Rpb24uZGF0YSYmaC5tb3Rpb24uZGF0YS5yb3RhdGlvblJhdGU/aC5tb3Rpb24uZGF0YS5yb3RhdGlvblJhdGU6e2FscGhhOjAsYmV0YTowLGdhbW1hOjB9LGU9e307c3dpdGNoKHApe2Nhc2UgZzplLmJldGE9LXQuZ2FtbWEsZS5nYW1tYT10LmJldGE7YnJlYWs7Y2FzZSB2OmUuYmV0YT0tdC5iZXRhLGUuZ2FtbWE9LXQuZ2FtbWE7YnJlYWs7Y2FzZSBtOmNhc2UgeTplLmJldGE9dC5nYW1tYSxlLmdhbW1hPS10LmJldGE7YnJlYWs7ZGVmYXVsdDplLmJldGE9dC5iZXRhLGUuZ2FtbWE9dC5nYW1tYX1yZXR1cm4gZS5hbHBoYT10LmFscGhhLGV9LGdldExhc3RSYXdFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gaC5tb3Rpb24uZGF0YXx8e319fSx0LkZVTExUSUxUPV99fSh3aW5kb3cpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q6XCJudW1iZXJcIj09dHlwZW9mIGU/ZTowfX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfXZhciByLG8sYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxzPW4oMiksdT1pKHMpLGw9e2Rpc3RyaWJ1dGlvbnM6e0JPWDoxLFNQSEVSRToyLERJU0M6M30sdmFsdWVPdmVyTGlmZXRpbWVMZW5ndGg6NH07cj1sLG89XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yLmNhbGwoZSxuLGUsdCk6ciwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpLGwuVHlwZWRBcnJheUhlbHBlcj1mdW5jdGlvbih0LGUsbixpKXtcInVzZSBzdHJpY3RcIjtcbnRoaXMuY29tcG9uZW50U2l6ZT1ufHwxLHRoaXMuc2l6ZT1lfHwxLHRoaXMuVHlwZWRBcnJheUNvbnN0cnVjdG9yPXR8fEZsb2F0MzJBcnJheSx0aGlzLmFycmF5PW5ldyB0KGUqdGhpcy5jb21wb25lbnRTaXplKSx0aGlzLmluZGV4T2Zmc2V0PWl8fDB9LGwuVHlwZWRBcnJheUhlbHBlci5jb25zdHJ1Y3Rvcj1sLlR5cGVkQXJyYXlIZWxwZXIsbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRTaXplPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49dGhpcy5hcnJheS5sZW5ndGg7cmV0dXJuIGV8fCh0Kj10aGlzLmNvbXBvbmVudFNpemUpLHQ8bj90aGlzLnNocmluayh0KTp0Pm4/dGhpcy5ncm93KHQpOnZvaWQgY29uc29sZS5pbmZvKFwiVHlwZWRBcnJheSBpcyBhbHJlYWR5IG9mIHNpemU6XCIsdCtcIi5cIixcIldpbGwgbm90IHJlc2l6ZS5cIil9LGwuVHlwZWRBcnJheUhlbHBlci5wcm90b3R5cGUuc2hyaW5rPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3JldHVybiB0aGlzLmFycmF5PXRoaXMuYXJyYXkuc3ViYXJyYXkoMCx0KSx0aGlzLnNpemU9dCx0aGlzfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLmdyb3c9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcy5hcnJheSxuPW5ldyB0aGlzLlR5cGVkQXJyYXlDb25zdHJ1Y3Rvcih0KTtyZXR1cm4gbi5zZXQoZSksdGhpcy5hcnJheT1uLHRoaXMuc2l6ZT10LHRoaXN9LGwuVHlwZWRBcnJheUhlbHBlci5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dCo9dGhpcy5jb21wb25lbnRTaXplLGUqPXRoaXMuY29tcG9uZW50U2l6ZTtmb3IodmFyIG49W10saT10aGlzLmFycmF5LHI9aS5sZW5ndGgsbz0wO288cjsrK28pKG88dHx8bz49ZSkmJm4ucHVzaChpW29dKTtyZXR1cm4gdGhpcy5zZXRGcm9tQXJyYXkoMCxuKSx0aGlzfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLnNldEZyb21BcnJheT1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBuPWUubGVuZ3RoLGk9dCtuO3JldHVybiBpPnRoaXMuYXJyYXkubGVuZ3RoP3RoaXMuZ3JvdyhpKTppPHRoaXMuYXJyYXkubGVuZ3RoJiZ0aGlzLnNocmluayhpKSx0aGlzLmFycmF5LnNldChlLHRoaXMuaW5kZXhPZmZzZXQrdCksdGhpc30sbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRWZWMyPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHRoaXMuc2V0VmVjMkNvbXBvbmVudHModCxlLngsZS55KX0sbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRWZWMyQ29tcG9uZW50cz1mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcy5hcnJheSxyPXRoaXMuaW5kZXhPZmZzZXQrdCp0aGlzLmNvbXBvbmVudFNpemU7cmV0dXJuIGlbcl09ZSxpW3IrMV09bix0aGlzfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLnNldFZlYzM9ZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5zZXRWZWMzQ29tcG9uZW50cyh0LGUueCxlLnksZS56KX0sbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRWZWMzQ29tcG9uZW50cz1mdW5jdGlvbih0LGUsbixpKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10aGlzLmFycmF5LG89dGhpcy5pbmRleE9mZnNldCt0KnRoaXMuY29tcG9uZW50U2l6ZTtyZXR1cm4gcltvXT1lLHJbbysxXT1uLHJbbysyXT1pLHRoaXN9LGwuVHlwZWRBcnJheUhlbHBlci5wcm90b3R5cGUuc2V0VmVjND1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3JldHVybiB0aGlzLnNldFZlYzRDb21wb25lbnRzKHQsZS54LGUueSxlLnosZS53KX0sbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRWZWM0Q29tcG9uZW50cz1mdW5jdGlvbih0LGUsbixpLHIpe1widXNlIHN0cmljdFwiO3ZhciBvPXRoaXMuYXJyYXksYT10aGlzLmluZGV4T2Zmc2V0K3QqdGhpcy5jb21wb25lbnRTaXplO3JldHVybiBvW2FdPWUsb1thKzFdPW4sb1thKzJdPWksb1thKzNdPXIsdGhpc30sbC5UeXBlZEFycmF5SGVscGVyLnByb3RvdHlwZS5zZXRNYXQzPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHRoaXMuc2V0RnJvbUFycmF5KHRoaXMuaW5kZXhPZmZzZXQrdCp0aGlzLmNvbXBvbmVudFNpemUsZS5lbGVtZW50cyl9LGwuVHlwZWRBcnJheUhlbHBlci5wcm90b3R5cGUuc2V0TWF0ND1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3JldHVybiB0aGlzLnNldEZyb21BcnJheSh0aGlzLmluZGV4T2Zmc2V0K3QqdGhpcy5jb21wb25lbnRTaXplLGUuZWxlbWVudHMpfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHRoaXMuc2V0VmVjM0NvbXBvbmVudHModCxlLnIsZS5nLGUuYil9LGwuVHlwZWRBcnJheUhlbHBlci5wcm90b3R5cGUuc2V0TnVtYmVyPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHRoaXMuYXJyYXlbdGhpcy5pbmRleE9mZnNldCt0KnRoaXMuY29tcG9uZW50U2l6ZV09ZSx0aGlzfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLmdldFZhbHVlQXRJbmRleD1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5hcnJheVt0aGlzLmluZGV4T2Zmc2V0K3RdfSxsLlR5cGVkQXJyYXlIZWxwZXIucHJvdG90eXBlLmdldENvbXBvbmVudFZhbHVlQXRJbmRleD1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5hcnJheS5zdWJhcnJheSh0aGlzLmluZGV4T2Zmc2V0K3QqdGhpcy5jb21wb25lbnRTaXplKX0sbC5TaGFkZXJBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3ZhciBpPWwuU2hhZGVyQXR0cmlidXRlLnR5cGVTaXplTWFwO3RoaXMudHlwZT1cInN0cmluZ1wiPT10eXBlb2YgdCYmaS5oYXNPd25Qcm9wZXJ0eSh0KT90OlwiZlwiLHRoaXMuY29tcG9uZW50U2l6ZT1pW3RoaXMudHlwZV0sdGhpcy5hcnJheVR5cGU9bnx8RmxvYXQzMkFycmF5LHRoaXMudHlwZWRBcnJheT1udWxsLHRoaXMuYnVmZmVyQXR0cmlidXRlPW51bGwsdGhpcy5keW5hbWljQnVmZmVyPSEhZSx0aGlzLnVwZGF0ZU1pbj0wLHRoaXMudXBkYXRlTWF4PTB9LGwuU2hhZGVyQXR0cmlidXRlLmNvbnN0cnVjdG9yPWwuU2hhZGVyQXR0cmlidXRlLGwuU2hhZGVyQXR0cmlidXRlLnR5cGVTaXplTWFwPXtmOjEsdjI6Mix2MzozLHY0OjQsYzozLG0zOjksbTQ6MTZ9LGwuU2hhZGVyQXR0cmlidXRlLnByb3RvdHlwZS5zZXRVcGRhdGVSYW5nZT1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3RoaXMudXBkYXRlTWluPU1hdGgubWluKHQqdGhpcy5jb21wb25lbnRTaXplLHRoaXMudXBkYXRlTWluKnRoaXMuY29tcG9uZW50U2l6ZSksdGhpcy51cGRhdGVNYXg9TWF0aC5tYXgoZSp0aGlzLmNvbXBvbmVudFNpemUsdGhpcy51cGRhdGVNYXgqdGhpcy5jb21wb25lbnRTaXplKX0sbC5TaGFkZXJBdHRyaWJ1dGUucHJvdG90eXBlLmZsYWdVcGRhdGU9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzLmJ1ZmZlckF0dHJpYnV0ZSxlPXQudXBkYXRlUmFuZ2U7ZS5vZmZzZXQ9dGhpcy51cGRhdGVNaW4sZS5jb3VudD1NYXRoLm1pbih0aGlzLnVwZGF0ZU1heC10aGlzLnVwZGF0ZU1pbit0aGlzLmNvbXBvbmVudFNpemUsdGhpcy50eXBlZEFycmF5LmFycmF5Lmxlbmd0aCksdC5uZWVkc1VwZGF0ZT0hMH0sbC5TaGFkZXJBdHRyaWJ1dGUucHJvdG90eXBlLnJlc2V0VXBkYXRlUmFuZ2U9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt0aGlzLnVwZGF0ZU1pbj0wLHRoaXMudXBkYXRlTWF4PTB9LGwuU2hhZGVyQXR0cmlidXRlLnByb3RvdHlwZS5yZXNldER5bmFtaWM9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt0aGlzLmJ1ZmZlckF0dHJpYnV0ZS5keW5hbWljPXRoaXMuZHluYW1pY0J1ZmZlcn0sbC5TaGFkZXJBdHRyaWJ1dGUucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3RoaXMudHlwZWRBcnJheS5zcGxpY2UodCxlKSx0aGlzLmZvcmNlVXBkYXRlQWxsKCl9LGwuU2hhZGVyQXR0cmlidXRlLnByb3RvdHlwZS5mb3JjZVVwZGF0ZUFsbD1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3RoaXMuYnVmZmVyQXR0cmlidXRlLmFycmF5PXRoaXMudHlwZWRBcnJheS5hcnJheSx0aGlzLmJ1ZmZlckF0dHJpYnV0ZS51cGRhdGVSYW5nZS5vZmZzZXQ9MCx0aGlzLmJ1ZmZlckF0dHJpYnV0ZS51cGRhdGVSYW5nZS5jb3VudD0tMSx0aGlzLmJ1ZmZlckF0dHJpYnV0ZS5keW5hbWljPSExLHRoaXMuYnVmZmVyQXR0cmlidXRlLm5lZWRzVXBkYXRlPSEwfSxsLlNoYWRlckF0dHJpYnV0ZS5wcm90b3R5cGUuX2Vuc3VyZVR5cGVkQXJyYXk9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7bnVsbCE9PXRoaXMudHlwZWRBcnJheSYmdGhpcy50eXBlZEFycmF5LnNpemU9PT10KnRoaXMuY29tcG9uZW50U2l6ZXx8KG51bGwhPT10aGlzLnR5cGVkQXJyYXkmJnRoaXMudHlwZWRBcnJheS5zaXplIT09dD90aGlzLnR5cGVkQXJyYXkuc2V0U2l6ZSh0KTpudWxsPT09dGhpcy50eXBlZEFycmF5JiYodGhpcy50eXBlZEFycmF5PW5ldyBsLlR5cGVkQXJyYXlIZWxwZXIodGhpcy5hcnJheVR5cGUsdCx0aGlzLmNvbXBvbmVudFNpemUpKSl9LGwuU2hhZGVyQXR0cmlidXRlLnByb3RvdHlwZS5fY3JlYXRlQnVmZmVyQXR0cmlidXRlPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3JldHVybiB0aGlzLl9lbnN1cmVUeXBlZEFycmF5KHQpLG51bGwhPT10aGlzLmJ1ZmZlckF0dHJpYnV0ZT8odGhpcy5idWZmZXJBdHRyaWJ1dGUuYXJyYXk9dGhpcy50eXBlZEFycmF5LmFycmF5LHBhcnNlRmxvYXQodS5SRVZJU0lPTik+PTgxJiYodGhpcy5idWZmZXJBdHRyaWJ1dGUuY291bnQ9dGhpcy5idWZmZXJBdHRyaWJ1dGUuYXJyYXkubGVuZ3RoL3RoaXMuYnVmZmVyQXR0cmlidXRlLml0ZW1TaXplKSx2b2lkKHRoaXMuYnVmZmVyQXR0cmlidXRlLm5lZWRzVXBkYXRlPSEwKSk6KHRoaXMuYnVmZmVyQXR0cmlidXRlPW5ldyB1LkJ1ZmZlckF0dHJpYnV0ZSh0aGlzLnR5cGVkQXJyYXkuYXJyYXksdGhpcy5jb21wb25lbnRTaXplKSx2b2lkKHRoaXMuYnVmZmVyQXR0cmlidXRlLmR5bmFtaWM9dGhpcy5keW5hbWljQnVmZmVyKSl9LGwuU2hhZGVyQXR0cmlidXRlLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gbnVsbD09PXRoaXMudHlwZWRBcnJheT8wOnRoaXMudHlwZWRBcnJheS5hcnJheS5sZW5ndGh9LGwuc2hhZGVyQ2h1bmtzPXtkZWZpbmVzOltcIiNkZWZpbmUgUEFDS0VEX0NPTE9SX1NJWkUgMjU2LjBcIixcIiNkZWZpbmUgUEFDS0VEX0NPTE9SX0RJVklTT1IgMjU1LjBcIl0uam9pbihcIlxcblwiKSx1bmlmb3JtczpbXCJ1bmlmb3JtIGZsb2F0IGRlbHRhVGltZTtcIixcInVuaWZvcm0gZmxvYXQgcnVuVGltZTtcIixcInVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XCIsXCJ1bmlmb3JtIHZlYzQgdGV4dHVyZUFuaW1hdGlvbjtcIixcInVuaWZvcm0gZmxvYXQgc2NhbGU7XCJdLmpvaW4oXCJcXG5cIiksYXR0cmlidXRlczpbXCJhdHRyaWJ1dGUgdmVjNCBhY2NlbGVyYXRpb247XCIsXCJhdHRyaWJ1dGUgdmVjMyB2ZWxvY2l0eTtcIixcImF0dHJpYnV0ZSB2ZWM0IHJvdGF0aW9uO1wiLFwiYXR0cmlidXRlIHZlYzMgcm90YXRpb25DZW50ZXI7XCIsXCJhdHRyaWJ1dGUgdmVjNCBwYXJhbXM7XCIsXCJhdHRyaWJ1dGUgdmVjNCBzaXplO1wiLFwiYXR0cmlidXRlIHZlYzQgYW5nbGU7XCIsXCJhdHRyaWJ1dGUgdmVjNCBjb2xvcjtcIixcImF0dHJpYnV0ZSB2ZWM0IG9wYWNpdHk7XCJdLmpvaW4oXCJcXG5cIiksdmFyeWluZ3M6W1widmFyeWluZyB2ZWM0IHZDb2xvcjtcIixcIiNpZmRlZiBTSE9VTERfUk9UQVRFX1RFWFRVUkVcIixcIiAgICB2YXJ5aW5nIGZsb2F0IHZBbmdsZTtcIixcIiNlbmRpZlwiLFwiI2lmZGVmIFNIT1VMRF9DQUxDVUxBVEVfU1BSSVRFXCIsXCIgICAgdmFyeWluZyB2ZWM0IHZTcHJpdGVTaGVldDtcIixcIiNlbmRpZlwiXS5qb2luKFwiXFxuXCIpLGJyYW5jaEF2b2lkYW5jZUZ1bmN0aW9uczpbXCJmbG9hdCB3aGVuX2d0KGZsb2F0IHgsIGZsb2F0IHkpIHtcIixcIiAgICByZXR1cm4gbWF4KHNpZ24oeCAtIHkpLCAwLjApO1wiLFwifVwiLFwiZmxvYXQgd2hlbl9sdChmbG9hdCB4LCBmbG9hdCB5KSB7XCIsXCIgICAgcmV0dXJuIG1pbiggbWF4KDEuMCAtIHNpZ24oeCAtIHkpLCAwLjApLCAxLjAgKTtcIixcIn1cIixcImZsb2F0IHdoZW5fZXEoIGZsb2F0IHgsIGZsb2F0IHkgKSB7XCIsXCIgICAgcmV0dXJuIDEuMCAtIGFicyggc2lnbiggeCAtIHkgKSApO1wiLFwifVwiLFwiZmxvYXQgd2hlbl9nZShmbG9hdCB4LCBmbG9hdCB5KSB7XCIsXCIgIHJldHVybiAxLjAgLSB3aGVuX2x0KHgsIHkpO1wiLFwifVwiLFwiZmxvYXQgd2hlbl9sZShmbG9hdCB4LCBmbG9hdCB5KSB7XCIsXCIgIHJldHVybiAxLjAgLSB3aGVuX2d0KHgsIHkpO1wiLFwifVwiLFwiZmxvYXQgYW5kKGZsb2F0IGEsIGZsb2F0IGIpIHtcIixcIiAgICByZXR1cm4gYSAqIGI7XCIsXCJ9XCIsXCJmbG9hdCBvcihmbG9hdCBhLCBmbG9hdCBiKSB7XCIsXCIgICAgcmV0dXJuIG1pbihhICsgYiwgMS4wKTtcIixcIn1cIl0uam9pbihcIlxcblwiKSx1bnBhY2tDb2xvcjpbXCJ2ZWMzIHVucGFja0NvbG9yKCBpbiBmbG9hdCBoZXggKSB7XCIsXCIgICB2ZWMzIGMgPSB2ZWMzKCAwLjAgKTtcIixcIiAgIGZsb2F0IHIgPSBtb2QoIChoZXggLyBQQUNLRURfQ09MT1JfU0laRSAvIFBBQ0tFRF9DT0xPUl9TSVpFKSwgUEFDS0VEX0NPTE9SX1NJWkUgKTtcIixcIiAgIGZsb2F0IGcgPSBtb2QoIChoZXggLyBQQUNLRURfQ09MT1JfU0laRSksIFBBQ0tFRF9DT0xPUl9TSVpFICk7XCIsXCIgICBmbG9hdCBiID0gbW9kKCBoZXgsIFBBQ0tFRF9DT0xPUl9TSVpFICk7XCIsXCIgICBjLnIgPSByIC8gUEFDS0VEX0NPTE9SX0RJVklTT1I7XCIsXCIgICBjLmcgPSBnIC8gUEFDS0VEX0NPTE9SX0RJVklTT1I7XCIsXCIgICBjLmIgPSBiIC8gUEFDS0VEX0NPTE9SX0RJVklTT1I7XCIsXCIgICByZXR1cm4gYztcIixcIn1cIl0uam9pbihcIlxcblwiKSx1bnBhY2tSb3RhdGlvbkF4aXM6W1widmVjMyB1bnBhY2tSb3RhdGlvbkF4aXMoIGluIGZsb2F0IGhleCApIHtcIixcIiAgIHZlYzMgYyA9IHZlYzMoIDAuMCApO1wiLFwiICAgZmxvYXQgciA9IG1vZCggKGhleCAvIFBBQ0tFRF9DT0xPUl9TSVpFIC8gUEFDS0VEX0NPTE9SX1NJWkUpLCBQQUNLRURfQ09MT1JfU0laRSApO1wiLFwiICAgZmxvYXQgZyA9IG1vZCggKGhleCAvIFBBQ0tFRF9DT0xPUl9TSVpFKSwgUEFDS0VEX0NPTE9SX1NJWkUgKTtcIixcIiAgIGZsb2F0IGIgPSBtb2QoIGhleCwgUEFDS0VEX0NPTE9SX1NJWkUgKTtcIixcIiAgIGMuciA9IHIgLyBQQUNLRURfQ09MT1JfRElWSVNPUjtcIixcIiAgIGMuZyA9IGcgLyBQQUNLRURfQ09MT1JfRElWSVNPUjtcIixcIiAgIGMuYiA9IGIgLyBQQUNLRURfQ09MT1JfRElWSVNPUjtcIixcIiAgIGMgKj0gdmVjMyggMi4wICk7XCIsXCIgICBjIC09IHZlYzMoIDEuMCApO1wiLFwiICAgcmV0dXJuIGM7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZmxvYXRPdmVyTGlmZXRpbWU6W1wiZmxvYXQgZ2V0RmxvYXRPdmVyTGlmZXRpbWUoIGluIGZsb2F0IHBvc2l0aW9uSW5UaW1lLCBpbiB2ZWM0IGF0dHIgKSB7XCIsXCIgICAgaGlnaHAgZmxvYXQgdmFsdWUgPSAwLjA7XCIsXCIgICAgZmxvYXQgZGVsdGFBZ2UgPSBwb3NpdGlvbkluVGltZSAqIGZsb2F0KCBWQUxVRV9PVkVSX0xJRkVUSU1FX0xFTkdUSCAtIDEgKTtcIixcIiAgICBmbG9hdCBmSW5kZXggPSAwLjA7XCIsXCIgICAgZmxvYXQgc2hvdWxkQXBwbHlWYWx1ZSA9IDAuMDtcIixcIiAgICB2YWx1ZSArPSBhdHRyWyAwIF0gKiB3aGVuX2VxKCBkZWx0YUFnZSwgMC4wICk7XCIsXCJcIixcIiAgICBmb3IoIGludCBpID0gMDsgaSA8IFZBTFVFX09WRVJfTElGRVRJTUVfTEVOR1RIIC0gMTsgKytpICkge1wiLFwiICAgICAgIGZJbmRleCA9IGZsb2F0KCBpICk7XCIsXCIgICAgICAgc2hvdWxkQXBwbHlWYWx1ZSA9IGFuZCggd2hlbl9ndCggZGVsdGFBZ2UsIGZJbmRleCApLCB3aGVuX2xlKCBkZWx0YUFnZSwgZkluZGV4ICsgMS4wICkgKTtcIixcIiAgICAgICB2YWx1ZSArPSBzaG91bGRBcHBseVZhbHVlICogbWl4KCBhdHRyWyBpIF0sIGF0dHJbIGkgKyAxIF0sIGRlbHRhQWdlIC0gZkluZGV4ICk7XCIsXCIgICAgfVwiLFwiXCIsXCIgICAgcmV0dXJuIHZhbHVlO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGNvbG9yT3ZlckxpZmV0aW1lOltcInZlYzMgZ2V0Q29sb3JPdmVyTGlmZXRpbWUoIGluIGZsb2F0IHBvc2l0aW9uSW5UaW1lLCBpbiB2ZWMzIGNvbG9yMSwgaW4gdmVjMyBjb2xvcjIsIGluIHZlYzMgY29sb3IzLCBpbiB2ZWMzIGNvbG9yNCApIHtcIixcIiAgICB2ZWMzIHZhbHVlID0gdmVjMyggMC4wICk7XCIsXCIgICAgdmFsdWUueCA9IGdldEZsb2F0T3ZlckxpZmV0aW1lKCBwb3NpdGlvbkluVGltZSwgdmVjNCggY29sb3IxLngsIGNvbG9yMi54LCBjb2xvcjMueCwgY29sb3I0LnggKSApO1wiLFwiICAgIHZhbHVlLnkgPSBnZXRGbG9hdE92ZXJMaWZldGltZSggcG9zaXRpb25JblRpbWUsIHZlYzQoIGNvbG9yMS55LCBjb2xvcjIueSwgY29sb3IzLnksIGNvbG9yNC55ICkgKTtcIixcIiAgICB2YWx1ZS56ID0gZ2V0RmxvYXRPdmVyTGlmZXRpbWUoIHBvc2l0aW9uSW5UaW1lLCB2ZWM0KCBjb2xvcjEueiwgY29sb3IyLnosIGNvbG9yMy56LCBjb2xvcjQueiApICk7XCIsXCIgICAgcmV0dXJuIHZhbHVlO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHBhcmFtRmV0Y2hpbmdGdW5jdGlvbnM6W1wiZmxvYXQgZ2V0QWxpdmUoKSB7XCIsXCIgICByZXR1cm4gcGFyYW1zLng7XCIsXCJ9XCIsXCJmbG9hdCBnZXRBZ2UoKSB7XCIsXCIgICByZXR1cm4gcGFyYW1zLnk7XCIsXCJ9XCIsXCJmbG9hdCBnZXRNYXhBZ2UoKSB7XCIsXCIgICByZXR1cm4gcGFyYW1zLno7XCIsXCJ9XCIsXCJmbG9hdCBnZXRXaWdnbGUoKSB7XCIsXCIgICByZXR1cm4gcGFyYW1zLnc7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIiksZm9yY2VGZXRjaGluZ0Z1bmN0aW9uczpbXCJ2ZWM0IGdldFBvc2l0aW9uKCBpbiBmbG9hdCBhZ2UgKSB7XCIsXCIgICByZXR1cm4gbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1wiLFwifVwiLFwidmVjMyBnZXRWZWxvY2l0eSggaW4gZmxvYXQgYWdlICkge1wiLFwiICAgcmV0dXJuIHZlbG9jaXR5ICogYWdlO1wiLFwifVwiLFwidmVjMyBnZXRBY2NlbGVyYXRpb24oIGluIGZsb2F0IGFnZSApIHtcIixcIiAgIHJldHVybiBhY2NlbGVyYXRpb24ueHl6ICogYWdlO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHJvdGF0aW9uRnVuY3Rpb25zOltcIiNpZmRlZiBTSE9VTERfUk9UQVRFX1BBUlRJQ0xFU1wiLFwiICAgbWF0NCBnZXRSb3RhdGlvbk1hdHJpeCggaW4gdmVjMyBheGlzLCBpbiBmbG9hdCBhbmdsZSkge1wiLFwiICAgICAgIGF4aXMgPSBub3JtYWxpemUoYXhpcyk7XCIsXCIgICAgICAgZmxvYXQgcyA9IHNpbihhbmdsZSk7XCIsXCIgICAgICAgZmxvYXQgYyA9IGNvcyhhbmdsZSk7XCIsXCIgICAgICAgZmxvYXQgb2MgPSAxLjAgLSBjO1wiLFwiXCIsXCIgICAgICAgcmV0dXJuIG1hdDQob2MgKiBheGlzLnggKiBheGlzLnggKyBjLCAgICAgICAgICAgb2MgKiBheGlzLnggKiBheGlzLnkgLSBheGlzLnogKiBzLCAgb2MgKiBheGlzLnogKiBheGlzLnggKyBheGlzLnkgKiBzLCAgMC4wLFwiLFwiICAgICAgICAgICAgICAgICAgIG9jICogYXhpcy54ICogYXhpcy55ICsgYXhpcy56ICogcywgIG9jICogYXhpcy55ICogYXhpcy55ICsgYywgICAgICAgICAgIG9jICogYXhpcy55ICogYXhpcy56IC0gYXhpcy54ICogcywgIDAuMCxcIixcIiAgICAgICAgICAgICAgICAgICBvYyAqIGF4aXMueiAqIGF4aXMueCAtIGF4aXMueSAqIHMsICBvYyAqIGF4aXMueSAqIGF4aXMueiArIGF4aXMueCAqIHMsICBvYyAqIGF4aXMueiAqIGF4aXMueiArIGMsICAgICAgICAgICAwLjAsXCIsXCIgICAgICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMS4wKTtcIixcIiAgIH1cIixcIlwiLFwiICAgdmVjMyBnZXRSb3RhdGlvbiggaW4gdmVjMyBwb3MsIGluIGZsb2F0IHBvc2l0aW9uSW5UaW1lICkge1wiLFwiICAgICAgaWYoIHJvdGF0aW9uLnkgPT0gMC4wICkge1wiLFwiICAgICAgICAgICByZXR1cm4gcG9zO1wiLFwiICAgICAgfVwiLFwiXCIsXCIgICAgICB2ZWMzIGF4aXMgPSB1bnBhY2tSb3RhdGlvbkF4aXMoIHJvdGF0aW9uLnggKTtcIixcIiAgICAgIHZlYzMgY2VudGVyID0gcm90YXRpb25DZW50ZXI7XCIsXCIgICAgICB2ZWMzIHRyYW5zbGF0ZWQ7XCIsXCIgICAgICBtYXQ0IHJvdGF0aW9uTWF0cml4O1wiLFwiICAgICAgZmxvYXQgYW5nbGUgPSAwLjA7XCIsXCIgICAgICBhbmdsZSArPSB3aGVuX2VxKCByb3RhdGlvbi56LCAwLjAgKSAqIHJvdGF0aW9uLnk7XCIsXCIgICAgICBhbmdsZSArPSB3aGVuX2d0KCByb3RhdGlvbi56LCAwLjAgKSAqIG1peCggMC4wLCByb3RhdGlvbi55LCBwb3NpdGlvbkluVGltZSApO1wiLFwiICAgICAgdHJhbnNsYXRlZCA9IHJvdGF0aW9uQ2VudGVyIC0gcG9zO1wiLFwiICAgICAgcm90YXRpb25NYXRyaXggPSBnZXRSb3RhdGlvbk1hdHJpeCggYXhpcywgYW5nbGUgKTtcIixcIiAgICAgIHJldHVybiBjZW50ZXIgLSB2ZWMzKCByb3RhdGlvbk1hdHJpeCAqIHZlYzQoIHRyYW5zbGF0ZWQsIDAuMCApICk7XCIsXCIgICB9XCIsXCIjZW5kaWZcIl0uam9pbihcIlxcblwiKSxyb3RhdGVUZXh0dXJlOltcIiAgICB2ZWMyIHZVdiA9IHZlYzIoIGdsX1BvaW50Q29vcmQueCwgMS4wIC0gZ2xfUG9pbnRDb29yZC55ICk7XCIsXCJcIixcIiAgICAjaWZkZWYgU0hPVUxEX1JPVEFURV9URVhUVVJFXCIsXCIgICAgICAgZmxvYXQgeCA9IGdsX1BvaW50Q29vcmQueCAtIDAuNTtcIixcIiAgICAgICBmbG9hdCB5ID0gMS4wIC0gZ2xfUG9pbnRDb29yZC55IC0gMC41O1wiLFwiICAgICAgIGZsb2F0IGMgPSBjb3MoIC12QW5nbGUgKTtcIixcIiAgICAgICBmbG9hdCBzID0gc2luKCAtdkFuZ2xlICk7XCIsXCIgICAgICAgdlV2ID0gdmVjMiggYyAqIHggKyBzICogeSArIDAuNSwgYyAqIHkgLSBzICogeCArIDAuNSApO1wiLFwiICAgICNlbmRpZlwiLFwiXCIsXCIgICAgI2lmZGVmIFNIT1VMRF9DQUxDVUxBVEVfU1BSSVRFXCIsXCIgICAgICAgIGZsb2F0IGZyYW1lc1ggPSB2U3ByaXRlU2hlZXQueDtcIixcIiAgICAgICAgZmxvYXQgZnJhbWVzWSA9IHZTcHJpdGVTaGVldC55O1wiLFwiICAgICAgICBmbG9hdCBjb2x1bW5Ob3JtID0gdlNwcml0ZVNoZWV0Lno7XCIsXCIgICAgICAgIGZsb2F0IHJvd05vcm0gPSB2U3ByaXRlU2hlZXQudztcIixcIiAgICAgICAgdlV2LnggPSBnbF9Qb2ludENvb3JkLnggKiBmcmFtZXNYICsgY29sdW1uTm9ybTtcIixcIiAgICAgICAgdlV2LnkgPSAxLjAgLSAoZ2xfUG9pbnRDb29yZC55ICogZnJhbWVzWSArIHJvd05vcm0pO1wiLFwiICAgICNlbmRpZlwiLFwiXCIsXCIgICAgdmVjNCByb3RhdGVkVGV4dHVyZSA9IHRleHR1cmUyRCggdGV4dHVyZSwgdlV2ICk7XCJdLmpvaW4oXCJcXG5cIil9LGwuc2hhZGVycz17dmVydGV4OltsLnNoYWRlckNodW5rcy5kZWZpbmVzLGwuc2hhZGVyQ2h1bmtzLnVuaWZvcm1zLGwuc2hhZGVyQ2h1bmtzLmF0dHJpYnV0ZXMsbC5zaGFkZXJDaHVua3MudmFyeWluZ3MsdS5TaGFkZXJDaHVuay5jb21tb24sdS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleCx1LlNoYWRlckNodW5rLmZvZ19wYXJzX3ZlcnRleCxsLnNoYWRlckNodW5rcy5icmFuY2hBdm9pZGFuY2VGdW5jdGlvbnMsbC5zaGFkZXJDaHVua3MudW5wYWNrQ29sb3IsbC5zaGFkZXJDaHVua3MudW5wYWNrUm90YXRpb25BeGlzLGwuc2hhZGVyQ2h1bmtzLmZsb2F0T3ZlckxpZmV0aW1lLGwuc2hhZGVyQ2h1bmtzLmNvbG9yT3ZlckxpZmV0aW1lLGwuc2hhZGVyQ2h1bmtzLnBhcmFtRmV0Y2hpbmdGdW5jdGlvbnMsbC5zaGFkZXJDaHVua3MuZm9yY2VGZXRjaGluZ0Z1bmN0aW9ucyxsLnNoYWRlckNodW5rcy5yb3RhdGlvbkZ1bmN0aW9ucyxcInZvaWQgbWFpbigpIHtcIixcIiAgICBoaWdocCBmbG9hdCBhZ2UgPSBnZXRBZ2UoKTtcIixcIiAgICBoaWdocCBmbG9hdCBhbGl2ZSA9IGdldEFsaXZlKCk7XCIsXCIgICAgaGlnaHAgZmxvYXQgbWF4QWdlID0gZ2V0TWF4QWdlKCk7XCIsXCIgICAgaGlnaHAgZmxvYXQgcG9zaXRpb25JblRpbWUgPSAoYWdlIC8gbWF4QWdlKTtcIixcIiAgICBoaWdocCBmbG9hdCBpc0FsaXZlID0gd2hlbl9ndCggYWxpdmUsIDAuMCApO1wiLFwiICAgICNpZmRlZiBTSE9VTERfV0lHR0xFX1BBUlRJQ0xFU1wiLFwiICAgICAgICBmbG9hdCB3aWdnbGVBbW91bnQgPSBwb3NpdGlvbkluVGltZSAqIGdldFdpZ2dsZSgpO1wiLFwiICAgICAgICBmbG9hdCB3aWdnbGVTaW4gPSBpc0FsaXZlICogc2luKCB3aWdnbGVBbW91bnQgKTtcIixcIiAgICAgICAgZmxvYXQgd2lnZ2xlQ29zID0gaXNBbGl2ZSAqIGNvcyggd2lnZ2xlQW1vdW50ICk7XCIsXCIgICAgI2VuZGlmXCIsXCIgICAgdmVjMyB2ZWwgPSBnZXRWZWxvY2l0eSggYWdlICk7XCIsXCIgICAgdmVjMyBhY2NlbCA9IGdldEFjY2VsZXJhdGlvbiggYWdlICk7XCIsXCIgICAgdmVjMyBmb3JjZSA9IHZlYzMoIDAuMCApO1wiLFwiICAgIHZlYzMgcG9zID0gdmVjMyggcG9zaXRpb24gKTtcIixcIiAgICBmbG9hdCBkcmFnID0gMS4wIC0gKHBvc2l0aW9uSW5UaW1lICogMC41KSAqIGFjY2VsZXJhdGlvbi53O1wiLFwiICAgIGZvcmNlICs9IHZlbDtcIixcIiAgICBmb3JjZSAqPSBkcmFnO1wiLFwiICAgIGZvcmNlICs9IGFjY2VsICogYWdlO1wiLFwiICAgIHBvcyArPSBmb3JjZTtcIixcIiAgICAjaWZkZWYgU0hPVUxEX1dJR0dMRV9QQVJUSUNMRVNcIixcIiAgICAgICAgcG9zLnggKz0gd2lnZ2xlU2luO1wiLFwiICAgICAgICBwb3MueSArPSB3aWdnbGVDb3M7XCIsXCIgICAgICAgIHBvcy56ICs9IHdpZ2dsZVNpbjtcIixcIiAgICAjZW5kaWZcIixcIiAgICAjaWZkZWYgU0hPVUxEX1JPVEFURV9QQVJUSUNMRVNcIixcIiAgICAgICAgcG9zID0gZ2V0Um90YXRpb24oIHBvcywgcG9zaXRpb25JblRpbWUgKTtcIixcIiAgICAjZW5kaWZcIixcIiAgICB2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3MsIDEuMCApO1wiLFwiICAgIGhpZ2hwIGZsb2F0IHBvaW50U2l6ZSA9IGdldEZsb2F0T3ZlckxpZmV0aW1lKCBwb3NpdGlvbkluVGltZSwgc2l6ZSApICogaXNBbGl2ZTtcIixcIiAgICAjaWZkZWYgSEFTX1BFUlNQRUNUSVZFXCIsXCIgICAgICAgIGZsb2F0IHBlcnNwZWN0aXZlID0gc2NhbGUgLyBsZW5ndGgoIG12UG9zaXRpb24ueHl6ICk7XCIsXCIgICAgI2Vsc2VcIixcIiAgICAgICAgZmxvYXQgcGVyc3BlY3RpdmUgPSAxLjA7XCIsXCIgICAgI2VuZGlmXCIsXCIgICAgZmxvYXQgcG9pbnRTaXplUGVyc3BlY3RpdmUgPSBwb2ludFNpemUgKiBwZXJzcGVjdGl2ZTtcIixcIiAgICAjaWZkZWYgQ09MT1JJWkVcIixcIiAgICAgICB2ZWMzIGMgPSBpc0FsaXZlICogZ2V0Q29sb3JPdmVyTGlmZXRpbWUoXCIsXCIgICAgICAgICAgIHBvc2l0aW9uSW5UaW1lLFwiLFwiICAgICAgICAgICB1bnBhY2tDb2xvciggY29sb3IueCApLFwiLFwiICAgICAgICAgICB1bnBhY2tDb2xvciggY29sb3IueSApLFwiLFwiICAgICAgICAgICB1bnBhY2tDb2xvciggY29sb3IueiApLFwiLFwiICAgICAgICAgICB1bnBhY2tDb2xvciggY29sb3IudyApXCIsXCIgICAgICAgKTtcIixcIiAgICAjZWxzZVwiLFwiICAgICAgIHZlYzMgYyA9IHZlYzMoMS4wKTtcIixcIiAgICAjZW5kaWZcIixcIiAgICBmbG9hdCBvID0gaXNBbGl2ZSAqIGdldEZsb2F0T3ZlckxpZmV0aW1lKCBwb3NpdGlvbkluVGltZSwgb3BhY2l0eSApO1wiLFwiICAgIHZDb2xvciA9IHZlYzQoIGMsIG8gKTtcIixcIiAgICAjaWZkZWYgU0hPVUxEX1JPVEFURV9URVhUVVJFXCIsXCIgICAgICAgIHZBbmdsZSA9IGlzQWxpdmUgKiBnZXRGbG9hdE92ZXJMaWZldGltZSggcG9zaXRpb25JblRpbWUsIGFuZ2xlICk7XCIsXCIgICAgI2VuZGlmXCIsXCIgICAgI2lmZGVmIFNIT1VMRF9DQUxDVUxBVEVfU1BSSVRFXCIsXCIgICAgICAgIGZsb2F0IGZyYW1lc1ggPSB0ZXh0dXJlQW5pbWF0aW9uLng7XCIsXCIgICAgICAgIGZsb2F0IGZyYW1lc1kgPSB0ZXh0dXJlQW5pbWF0aW9uLnk7XCIsXCIgICAgICAgIGZsb2F0IGxvb3BDb3VudCA9IHRleHR1cmVBbmltYXRpb24udztcIixcIiAgICAgICAgZmxvYXQgdG90YWxGcmFtZXMgPSB0ZXh0dXJlQW5pbWF0aW9uLno7XCIsXCIgICAgICAgIGZsb2F0IGZyYW1lTnVtYmVyID0gbW9kKCAocG9zaXRpb25JblRpbWUgKiBsb29wQ291bnQpICogdG90YWxGcmFtZXMsIHRvdGFsRnJhbWVzICk7XCIsXCIgICAgICAgIGZsb2F0IGNvbHVtbiA9IGZsb29yKG1vZCggZnJhbWVOdW1iZXIsIGZyYW1lc1ggKSk7XCIsXCIgICAgICAgIGZsb2F0IHJvdyA9IGZsb29yKCAoZnJhbWVOdW1iZXIgLSBjb2x1bW4pIC8gZnJhbWVzWCApO1wiLFwiICAgICAgICBmbG9hdCBjb2x1bW5Ob3JtID0gY29sdW1uIC8gZnJhbWVzWDtcIixcIiAgICAgICAgZmxvYXQgcm93Tm9ybSA9IHJvdyAvIGZyYW1lc1k7XCIsXCIgICAgICAgIHZTcHJpdGVTaGVldC54ID0gMS4wIC8gZnJhbWVzWDtcIixcIiAgICAgICAgdlNwcml0ZVNoZWV0LnkgPSAxLjAgLyBmcmFtZXNZO1wiLFwiICAgICAgICB2U3ByaXRlU2hlZXQueiA9IGNvbHVtbk5vcm07XCIsXCIgICAgICAgIHZTcHJpdGVTaGVldC53ID0gcm93Tm9ybTtcIixcIiAgICAjZW5kaWZcIixcIiAgICBnbF9Qb2ludFNpemUgPSBwb2ludFNpemVQZXJzcGVjdGl2ZTtcIixcIiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtdlBvc2l0aW9uO1wiLHUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfdmVydGV4LHUuU2hhZGVyQ2h1bmsuZm9nX3ZlcnRleCxcIn1cIl0uam9pbihcIlxcblwiKSxmcmFnbWVudDpbbC5zaGFkZXJDaHVua3MudW5pZm9ybXMsdS5TaGFkZXJDaHVuay5jb21tb24sdS5TaGFkZXJDaHVuay5mb2dfcGFyc19mcmFnbWVudCx1LlNoYWRlckNodW5rLmxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQsbC5zaGFkZXJDaHVua3MudmFyeWluZ3MsbC5zaGFkZXJDaHVua3MuYnJhbmNoQXZvaWRhbmNlRnVuY3Rpb25zLFwidm9pZCBtYWluKCkge1wiLFwiICAgIHZlYzMgb3V0Z29pbmdMaWdodCA9IHZDb2xvci54eXo7XCIsXCIgICAgXCIsXCIgICAgI2lmZGVmIEFMUEhBVEVTVFwiLFwiICAgICAgIGlmICggdkNvbG9yLncgPCBmbG9hdChBTFBIQVRFU1QpICkgZGlzY2FyZDtcIixcIiAgICAjZW5kaWZcIixsLnNoYWRlckNodW5rcy5yb3RhdGVUZXh0dXJlLHUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfZnJhZ21lbnQsXCIgICAgb3V0Z29pbmdMaWdodCA9IHZDb2xvci54eXogKiByb3RhdGVkVGV4dHVyZS54eXo7XCIsXCIgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCggb3V0Z29pbmdMaWdodC54eXosIHJvdGF0ZWRUZXh0dXJlLncgKiB2Q29sb3IudyApO1wiLHUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LFwifVwiXS5qb2luKFwiXFxuXCIpfSxsLnV0aWxzPXt0eXBlczp7Qk9PTEVBTjpcImJvb2xlYW5cIixTVFJJTkc6XCJzdHJpbmdcIixOVU1CRVI6XCJudW1iZXJcIixPQkpFQ1Q6XCJvYmplY3RcIn0sZW5zdXJlVHlwZWRBcmc6ZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3JldHVybihcInVuZGVmaW5lZFwiPT10eXBlb2YgdD9cInVuZGVmaW5lZFwiOmEodCkpPT09ZT90Om59LGVuc3VyZUFycmF5VHlwZWRBcmc6ZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgaT10Lmxlbmd0aC0xO2k+PTA7LS1pKWlmKGEodFtpXSkhPT1lKXJldHVybiBuO3JldHVybiB0fXJldHVybiB0aGlzLmVuc3VyZVR5cGVkQXJnKHQsZSxuKX0sZW5zdXJlSW5zdGFuY2VPZjpmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHZvaWQgMCE9PWUmJnQgaW5zdGFuY2VvZiBlP3Q6bn0sZW5zdXJlQXJyYXlJbnN0YW5jZU9mOmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGk9dC5sZW5ndGgtMTtpPj0wOy0taSlpZih2b2lkIDAhPT1lJiZ0W2ldaW5zdGFuY2VvZiBlPT0hMSlyZXR1cm4gbjtyZXR1cm4gdH1yZXR1cm4gdGhpcy5lbnN1cmVJbnN0YW5jZU9mKHQsZSxuKX0sZW5zdXJlVmFsdWVPdmVyTGlmZXRpbWVDb21wbGlhbmNlOmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtlPWV8fDMsbj1ufHwzLEFycmF5LmlzQXJyYXkodC5fdmFsdWUpPT09ITEmJih0Ll92YWx1ZT1bdC5fdmFsdWVdKSxBcnJheS5pc0FycmF5KHQuX3NwcmVhZCk9PT0hMSYmKHQuX3NwcmVhZD1bdC5fc3ByZWFkXSk7dmFyIGk9dGhpcy5jbGFtcCh0Ll92YWx1ZS5sZW5ndGgsZSxuKSxyPXRoaXMuY2xhbXAodC5fc3ByZWFkLmxlbmd0aCxlLG4pLG89TWF0aC5tYXgoaSxyKTt0Ll92YWx1ZS5sZW5ndGghPT1vJiYodC5fdmFsdWU9dGhpcy5pbnRlcnBvbGF0ZUFycmF5KHQuX3ZhbHVlLG8pKSx0Ll9zcHJlYWQubGVuZ3RoIT09byYmKHQuX3NwcmVhZD10aGlzLmludGVycG9sYXRlQXJyYXkodC5fc3ByZWFkLG8pKX0saW50ZXJwb2xhdGVBcnJheTpmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Zvcih2YXIgbj10Lmxlbmd0aCxpPVtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0WzBdLmNsb25lP3RbMF0uY2xvbmUoKTp0WzBdXSxyPShuLTEpLyhlLTEpLG89MTtvPGUtMTsrK28pe3ZhciBhPW8qcixzPU1hdGguZmxvb3IoYSksdT1NYXRoLmNlaWwoYSksbD1hLXM7aVtvXT10aGlzLmxlcnBUeXBlQWdub3N0aWModFtzXSx0W3VdLGwpfXJldHVybiBpLnB1c2goXCJmdW5jdGlvblwiPT10eXBlb2YgdFtuLTFdLmNsb25lP3Rbbi0xXS5jbG9uZSgpOnRbbi0xXSksaX0sY2xhbXA6ZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO3JldHVybiBNYXRoLm1heChlLE1hdGgubWluKHQsbikpfSx6ZXJvVG9FcHNpbG9uOmZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49MWUtNSxpPXQ7cmV0dXJuIGk9ZT9NYXRoLnJhbmRvbSgpKm4qMTA6bix0PDAmJnQ+LW4mJihpPS1pKSxpfSxsZXJwVHlwZUFnbm9zdGljOmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaSxyPXRoaXMudHlwZXM7cmV0dXJuKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0P1widW5kZWZpbmVkXCI6YSh0KSk9PT1yLk5VTUJFUiYmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlP1widW5kZWZpbmVkXCI6YShlKSk9PT1yLk5VTUJFUj90KyhlLXQpKm46dCBpbnN0YW5jZW9mIHUuVmVjdG9yMiYmZSBpbnN0YW5jZW9mIHUuVmVjdG9yMj8oaT10LmNsb25lKCksaS54PXRoaXMubGVycCh0LngsZS54LG4pLGkueT10aGlzLmxlcnAodC55LGUueSxuKSxpKTp0IGluc3RhbmNlb2YgdS5WZWN0b3IzJiZlIGluc3RhbmNlb2YgdS5WZWN0b3IzPyhpPXQuY2xvbmUoKSxpLng9dGhpcy5sZXJwKHQueCxlLngsbiksaS55PXRoaXMubGVycCh0LnksZS55LG4pLGkuej10aGlzLmxlcnAodC56LGUueixuKSxpKTp0IGluc3RhbmNlb2YgdS5WZWN0b3I0JiZlIGluc3RhbmNlb2YgdS5WZWN0b3I0PyhpPXQuY2xvbmUoKSxpLng9dGhpcy5sZXJwKHQueCxlLngsbiksaS55PXRoaXMubGVycCh0LnksZS55LG4pLGkuej10aGlzLmxlcnAodC56LGUueixuKSxpLnc9dGhpcy5sZXJwKHQudyxlLncsbiksaSk6dCBpbnN0YW5jZW9mIHUuQ29sb3ImJmUgaW5zdGFuY2VvZiB1LkNvbG9yPyhpPXQuY2xvbmUoKSxpLnI9dGhpcy5sZXJwKHQucixlLnIsbiksaS5nPXRoaXMubGVycCh0LmcsZS5nLG4pLGkuYj10aGlzLmxlcnAodC5iLGUuYixuKSxpKTp2b2lkIGNvbnNvbGUud2FybihcIkludmFsaWQgYXJndW1lbnQgdHlwZXMsIG9yIGFyZ3VtZW50IHR5cGVzIGRvIG5vdCBtYXRjaDpcIix0LGUpfSxsZXJwOmZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdCsoZS10KSpufSxyb3VuZFRvTmVhcmVzdE11bHRpcGxlOmZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG49MDtyZXR1cm4gMD09PWU/dDoobj1NYXRoLmFicyh0KSVlLDA9PT1uP3Q6dDwwPy0oTWF0aC5hYnModCktbik6dCtlLW4pfSxhcnJheVZhbHVlc0FyZUVxdWFsOmZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGgtMTsrK2UpaWYodFtlXSE9PXRbZSsxXSlyZXR1cm4hMTtyZXR1cm4hMH0scmFuZG9tRmxvYXQ6ZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdCtlKihNYXRoLnJhbmRvbSgpLS41KX0scmFuZG9tVmVjdG9yMzpmdW5jdGlvbih0LGUsbixpLHIpe1widXNlIHN0cmljdFwiO3ZhciBvPW4ueCsoTWF0aC5yYW5kb20oKSppLngtLjUqaS54KSxhPW4ueSsoTWF0aC5yYW5kb20oKSppLnktLjUqaS55KSxzPW4ueisoTWF0aC5yYW5kb20oKSppLnotLjUqaS56KTtyJiYobz0uNSotci54K3RoaXMucm91bmRUb05lYXJlc3RNdWx0aXBsZShvLHIueCksYT0uNSotci55K3RoaXMucm91bmRUb05lYXJlc3RNdWx0aXBsZShhLHIueSkscz0uNSotci56K3RoaXMucm91bmRUb05lYXJlc3RNdWx0aXBsZShzLHIueikpLHQudHlwZWRBcnJheS5zZXRWZWMzQ29tcG9uZW50cyhlLG8sYSxzKX0scmFuZG9tQ29sb3I6ZnVuY3Rpb24odCxlLG4saSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9bi5yK01hdGgucmFuZG9tKCkqaS54LG89bi5nK01hdGgucmFuZG9tKCkqaS55LGE9bi5iK01hdGgucmFuZG9tKCkqaS56O3I9dGhpcy5jbGFtcChyLDAsMSksbz10aGlzLmNsYW1wKG8sMCwxKSxhPXRoaXMuY2xhbXAoYSwwLDEpLHQudHlwZWRBcnJheS5zZXRWZWMzQ29tcG9uZW50cyhlLHIsbyxhKX0scmFuZG9tQ29sb3JBc0hleDpmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PW5ldyB1LkNvbG9yO3JldHVybiBmdW5jdGlvbihlLG4saSxyKXtmb3IodmFyIG89aS5sZW5ndGgsYT1bXSxzPTA7czxvOysrcyl7dmFyIHU9cltzXTt0LmNvcHkoaVtzXSksdC5yKz1NYXRoLnJhbmRvbSgpKnUueC0uNSp1LngsdC5nKz1NYXRoLnJhbmRvbSgpKnUueS0uNSp1LnksdC5iKz1NYXRoLnJhbmRvbSgpKnUuei0uNSp1LnosdC5yPXRoaXMuY2xhbXAodC5yLDAsMSksdC5nPXRoaXMuY2xhbXAodC5nLDAsMSksdC5iPXRoaXMuY2xhbXAodC5iLDAsMSksYS5wdXNoKHQuZ2V0SGV4KCkpfWUudHlwZWRBcnJheS5zZXRWZWM0Q29tcG9uZW50cyhuLGFbMF0sYVsxXSxhWzJdLGFbM10pfX0oKSxyYW5kb21WZWN0b3IzT25TcGhlcmU6ZnVuY3Rpb24odCxlLG4saSxyLG8sYSxzKXtcInVzZSBzdHJpY3RcIjt2YXIgdT0yKk1hdGgucmFuZG9tKCktMSxsPTYuMjgzMipNYXRoLnJhbmRvbSgpLGM9TWF0aC5zcXJ0KDEtdSp1KSxoPXRoaXMucmFuZG9tRmxvYXQoaSxyKSxmPTAsZD0wLHA9MDthJiYoaD1NYXRoLnJvdW5kKGgvYSkqYSksZj1jKk1hdGguY29zKGwpKmgsZD1jKk1hdGguc2luKGwpKmgscD11KmgsZio9by54LGQqPW8ueSxwKj1vLnosZis9bi54LGQrPW4ueSxwKz1uLnosdC50eXBlZEFycmF5LnNldFZlYzNDb21wb25lbnRzKGUsZixkLHApfSxzZWVkZWRSYW5kb206ZnVuY3Rpb24odCl7dmFyIGU9MWU0Kk1hdGguc2luKHQpO3JldHVybiBlLSgwfGUpfSxyYW5kb21WZWN0b3IzT25EaXNjOmZ1bmN0aW9uKHQsZSxuLGkscixvLGEpe1widXNlIHN0cmljdFwiO3ZhciBzPTYuMjgzMipNYXRoLnJhbmRvbSgpLHU9TWF0aC5hYnModGhpcy5yYW5kb21GbG9hdChpLHIpKSxsPTAsYz0wLGg9MDthJiYodT1NYXRoLnJvdW5kKHUvYSkqYSksbD1NYXRoLmNvcyhzKSp1LGM9TWF0aC5zaW4ocykqdSxsKj1vLngsYyo9by55LGwrPW4ueCxjKz1uLnksaCs9bi56LHQudHlwZWRBcnJheS5zZXRWZWMzQ29tcG9uZW50cyhlLGwsYyxoKX0scmFuZG9tRGlyZWN0aW9uVmVjdG9yM09uU3BoZXJlOmZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9bmV3IHUuVmVjdG9yMztyZXR1cm4gZnVuY3Rpb24oZSxuLGkscixvLGEscyx1KXt0LmNvcHkoYSksdC54LT1pLHQueS09cix0LnotPW8sdC5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcigtdGhpcy5yYW5kb21GbG9hdChzLHUpKSxlLnR5cGVkQXJyYXkuc2V0VmVjM0NvbXBvbmVudHMobix0LngsdC55LHQueil9fSgpLHJhbmRvbURpcmVjdGlvblZlY3RvcjNPbkRpc2M6ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD1uZXcgdS5WZWN0b3IzO3JldHVybiBmdW5jdGlvbihlLG4saSxyLG8sYSxzLHUpe3QuY29weShhKSx0LngtPWksdC55LT1yLHQuei09byx0Lm5vcm1hbGl6ZSgpLm11bHRpcGx5U2NhbGFyKC10aGlzLnJhbmRvbUZsb2F0KHMsdSkpLGUudHlwZWRBcnJheS5zZXRWZWMzQ29tcG9uZW50cyhuLHQueCx0LnksMCl9fSgpLGdldFBhY2tlZFJvdGF0aW9uQXhpczpmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0PW5ldyB1LlZlY3RvcjMsZT1uZXcgdS5WZWN0b3IzLG49bmV3IHUuQ29sb3IsaT1uZXcgdS5WZWN0b3IzKDEsMSwxKTtyZXR1cm4gZnVuY3Rpb24ocixvKXtyZXR1cm4gdC5jb3B5KHIpLm5vcm1hbGl6ZSgpLGUuY29weShvKS5ub3JtYWxpemUoKSx0LngrPS41Ki1vLngrTWF0aC5yYW5kb20oKSpvLngsdC55Kz0uNSotby55K01hdGgucmFuZG9tKCkqby55LHQueis9LjUqLW8ueitNYXRoLnJhbmRvbSgpKm8ueix0Lm5vcm1hbGl6ZSgpLmFkZChpKS5tdWx0aXBseVNjYWxhciguNSksbi5zZXRSR0IodC54LHQueSx0LnopLG4uZ2V0SGV4KCl9fSgpfSxsLkdyb3VwPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPWwudXRpbHMsbj1lLnR5cGVzO3Q9ZS5lbnN1cmVUeXBlZEFyZyh0LG4uT0JKRUNULHt9KSx0LnRleHR1cmU9ZS5lbnN1cmVUeXBlZEFyZyh0LnRleHR1cmUsbi5PQkpFQ1Qse30pLHRoaXMudXVpZD11Lk1hdGguZ2VuZXJhdGVVVUlEKCksdGhpcy5maXhlZFRpbWVTdGVwPWUuZW5zdXJlVHlwZWRBcmcodC5maXhlZFRpbWVTdGVwLG4uTlVNQkVSLC4wMTYpLHRoaXMudGV4dHVyZT1lLmVuc3VyZUluc3RhbmNlT2YodC50ZXh0dXJlLnZhbHVlLHUuVGV4dHVyZSxudWxsKSx0aGlzLnRleHR1cmVGcmFtZXM9ZS5lbnN1cmVJbnN0YW5jZU9mKHQudGV4dHVyZS5mcmFtZXMsdS5WZWN0b3IyLG5ldyB1LlZlY3RvcjIoMSwxKSksdGhpcy50ZXh0dXJlRnJhbWVDb3VudD1lLmVuc3VyZVR5cGVkQXJnKHQudGV4dHVyZS5mcmFtZUNvdW50LG4uTlVNQkVSLHRoaXMudGV4dHVyZUZyYW1lcy54KnRoaXMudGV4dHVyZUZyYW1lcy55KSx0aGlzLnRleHR1cmVMb29wPWUuZW5zdXJlVHlwZWRBcmcodC50ZXh0dXJlLmxvb3Asbi5OVU1CRVIsMSksdGhpcy50ZXh0dXJlRnJhbWVzLm1heChuZXcgdS5WZWN0b3IyKDEsMSkpLHRoaXMuaGFzUGVyc3BlY3RpdmU9ZS5lbnN1cmVUeXBlZEFyZyh0Lmhhc1BlcnNwZWN0aXZlLG4uQk9PTEVBTiwhMCksdGhpcy5jb2xvcml6ZT1lLmVuc3VyZVR5cGVkQXJnKHQuY29sb3JpemUsbi5CT09MRUFOLCEwKSx0aGlzLm1heFBhcnRpY2xlQ291bnQ9ZS5lbnN1cmVUeXBlZEFyZyh0Lm1heFBhcnRpY2xlQ291bnQsbi5OVU1CRVIsbnVsbCksdGhpcy5ibGVuZGluZz1lLmVuc3VyZVR5cGVkQXJnKHQuYmxlbmRpbmcsbi5OVU1CRVIsdS5BZGRpdGl2ZUJsZW5kaW5nKSx0aGlzLnRyYW5zcGFyZW50PWUuZW5zdXJlVHlwZWRBcmcodC50cmFuc3BhcmVudCxuLkJPT0xFQU4sITApLHRoaXMuYWxwaGFUZXN0PXBhcnNlRmxvYXQoZS5lbnN1cmVUeXBlZEFyZyh0LmFscGhhVGVzdCxuLk5VTUJFUiwwKSksdGhpcy5kZXB0aFdyaXRlPWUuZW5zdXJlVHlwZWRBcmcodC5kZXB0aFdyaXRlLG4uQk9PTEVBTiwhMSksdGhpcy5kZXB0aFRlc3Q9ZS5lbnN1cmVUeXBlZEFyZyh0LmRlcHRoVGVzdCxuLkJPT0xFQU4sITApLHRoaXMuZm9nPWUuZW5zdXJlVHlwZWRBcmcodC5mb2csbi5CT09MRUFOLCEwKSx0aGlzLnNjYWxlPWUuZW5zdXJlVHlwZWRBcmcodC5zY2FsZSxuLk5VTUJFUiwzMDApLHRoaXMuZW1pdHRlcnM9W10sdGhpcy5lbWl0dGVySURzPVtdLHRoaXMuX3Bvb2w9W10sdGhpcy5fcG9vbENyZWF0aW9uU2V0dGluZ3M9bnVsbCx0aGlzLl9jcmVhdGVOZXdXaGVuUG9vbEVtcHR5PTAsdGhpcy5fYXR0cmlidXRlc05lZWRSZWZyZXNoPSExLHRoaXMuX2F0dHJpYnV0ZXNOZWVkRHluYW1pY1Jlc2V0PSExLHRoaXMucGFydGljbGVDb3VudD0wLHRoaXMudW5pZm9ybXM9e3RleHR1cmU6e3R5cGU6XCJ0XCIsdmFsdWU6dGhpcy50ZXh0dXJlfSx0ZXh0dXJlQW5pbWF0aW9uOnt0eXBlOlwidjRcIix2YWx1ZTpuZXcgdS5WZWN0b3I0KHRoaXMudGV4dHVyZUZyYW1lcy54LHRoaXMudGV4dHVyZUZyYW1lcy55LHRoaXMudGV4dHVyZUZyYW1lQ291bnQsTWF0aC5tYXgoTWF0aC5hYnModGhpcy50ZXh0dXJlTG9vcCksMSkpfSxmb2dDb2xvcjp7dHlwZTpcImNcIix2YWx1ZTpudWxsfSxmb2dOZWFyOnt0eXBlOlwiZlwiLHZhbHVlOjEwfSxmb2dGYXI6e3R5cGU6XCJmXCIsdmFsdWU6MjAwfSxmb2dEZW5zaXR5Ont0eXBlOlwiZlwiLHZhbHVlOi41fSxkZWx0YVRpbWU6e3R5cGU6XCJmXCIsdmFsdWU6MH0scnVuVGltZTp7dHlwZTpcImZcIix2YWx1ZTowfSxzY2FsZTp7dHlwZTpcImZcIix2YWx1ZTp0aGlzLnNjYWxlfX0sdGhpcy5kZWZpbmVzPXtIQVNfUEVSU1BFQ1RJVkU6dGhpcy5oYXNQZXJzcGVjdGl2ZSxDT0xPUklaRTp0aGlzLmNvbG9yaXplLFZBTFVFX09WRVJfTElGRVRJTUVfTEVOR1RIOmwudmFsdWVPdmVyTGlmZXRpbWVMZW5ndGgsU0hPVUxEX1JPVEFURV9URVhUVVJFOiExLFNIT1VMRF9ST1RBVEVfUEFSVElDTEVTOiExLFNIT1VMRF9XSUdHTEVfUEFSVElDTEVTOiExLFNIT1VMRF9DQUxDVUxBVEVfU1BSSVRFOnRoaXMudGV4dHVyZUZyYW1lcy54PjF8fHRoaXMudGV4dHVyZUZyYW1lcy55PjF9LHRoaXMuYXR0cmlidXRlcz17cG9zaXRpb246bmV3IGwuU2hhZGVyQXR0cmlidXRlKFwidjNcIiwhMCksYWNjZWxlcmF0aW9uOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInY0XCIsITApLHZlbG9jaXR5Om5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInYzXCIsITApLHJvdGF0aW9uOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInY0XCIsITApLHJvdGF0aW9uQ2VudGVyOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInYzXCIsITApLHBhcmFtczpuZXcgbC5TaGFkZXJBdHRyaWJ1dGUoXCJ2NFwiLCEwKSxzaXplOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInY0XCIsITApLGFuZ2xlOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInY0XCIsITApLGNvbG9yOm5ldyBsLlNoYWRlckF0dHJpYnV0ZShcInY0XCIsITApLG9wYWNpdHk6bmV3IGwuU2hhZGVyQXR0cmlidXRlKFwidjRcIiwhMCl9LHRoaXMuYXR0cmlidXRlS2V5cz1PYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpLHRoaXMuYXR0cmlidXRlQ291bnQ9dGhpcy5hdHRyaWJ1dGVLZXlzLmxlbmd0aCx0aGlzLm1hdGVyaWFsPW5ldyB1LlNoYWRlck1hdGVyaWFsKHt1bmlmb3Jtczp0aGlzLnVuaWZvcm1zLHZlcnRleFNoYWRlcjpsLnNoYWRlcnMudmVydGV4LGZyYWdtZW50U2hhZGVyOmwuc2hhZGVycy5mcmFnbWVudCxibGVuZGluZzp0aGlzLmJsZW5kaW5nLHRyYW5zcGFyZW50OnRoaXMudHJhbnNwYXJlbnQsYWxwaGFUZXN0OnRoaXMuYWxwaGFUZXN0LGRlcHRoV3JpdGU6dGhpcy5kZXB0aFdyaXRlLGRlcHRoVGVzdDp0aGlzLmRlcHRoVGVzdCxkZWZpbmVzOnRoaXMuZGVmaW5lcyxmb2c6dGhpcy5mb2d9KSx0aGlzLmdlb21ldHJ5PW5ldyB1LkJ1ZmZlckdlb21ldHJ5LHRoaXMubWVzaD1uZXcgdS5Qb2ludHModGhpcy5nZW9tZXRyeSx0aGlzLm1hdGVyaWFsKSxudWxsPT09dGhpcy5tYXhQYXJ0aWNsZUNvdW50JiZjb25zb2xlLndhcm4oXCJTUEUuR3JvdXA6IE5vIG1heFBhcnRpY2xlQ291bnQgc3BlY2lmaWVkLiBBZGRpbmcgZW1pdHRlcnMgYWZ0ZXIgcmVuZGVyaW5nIHdpbGwgcHJvYmFibHkgY2F1c2UgZXJyb3JzLlwiKX0sbC5Hcm91cC5jb25zdHJ1Y3Rvcj1sLkdyb3VwLGwuR3JvdXAucHJvdG90eXBlLl91cGRhdGVEZWZpbmVzPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQsZT10aGlzLmVtaXR0ZXJzLG49ZS5sZW5ndGgtMSxpPXRoaXMuZGVmaW5lcztmb3IobjtuPj0wOy0tbil0PWVbbl0saS5TSE9VTERfQ0FMQ1VMQVRFX1NQUklURXx8KGkuU0hPVUxEX1JPVEFURV9URVhUVVJFPWkuU0hPVUxEX1JPVEFURV9URVhUVVJFfHwhIU1hdGgubWF4KE1hdGgubWF4LmFwcGx5KG51bGwsdC5hbmdsZS52YWx1ZSksTWF0aC5tYXguYXBwbHkobnVsbCx0LmFuZ2xlLnNwcmVhZCkpKSxpLlNIT1VMRF9ST1RBVEVfUEFSVElDTEVTPWkuU0hPVUxEX1JPVEFURV9QQVJUSUNMRVN8fCEhTWF0aC5tYXgodC5yb3RhdGlvbi5hbmdsZSx0LnJvdGF0aW9uLmFuZ2xlU3ByZWFkKSxpLlNIT1VMRF9XSUdHTEVfUEFSVElDTEVTPWkuU0hPVUxEX1dJR0dMRV9QQVJUSUNMRVN8fCEhTWF0aC5tYXgodC53aWdnbGUudmFsdWUsdC53aWdnbGUuc3ByZWFkKTt0aGlzLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwfSxsLkdyb3VwLnByb3RvdHlwZS5fYXBwbHlBdHRyaWJ1dGVzVG9HZW9tZXRyeT1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3ZhciB0LGUsbj10aGlzLmF0dHJpYnV0ZXMsaT10aGlzLmdlb21ldHJ5LHI9aS5hdHRyaWJ1dGVzO2Zvcih2YXIgbyBpbiBuKW4uaGFzT3duUHJvcGVydHkobykmJih0PW5bb10sZT1yW29dLGU/ZS5hcnJheT10LnR5cGVkQXJyYXkuYXJyYXk6aS5hZGRBdHRyaWJ1dGUobyx0LmJ1ZmZlckF0dHJpYnV0ZSksdC5idWZmZXJBdHRyaWJ1dGUubmVlZHNVcGRhdGU9ITApO3RoaXMuZ2VvbWV0cnkuc2V0RHJhd1JhbmdlKDAsdGhpcy5wYXJ0aWNsZUNvdW50KX0sbC5Hcm91cC5wcm90b3R5cGUuYWRkRW1pdHRlcj1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtpZih0IGluc3RhbmNlb2YgbC5FbWl0dGVyPT0hMSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiYGVtaXR0ZXJgIGFyZ3VtZW50IG11c3QgYmUgaW5zdGFuY2Ugb2YgU1BFLkVtaXR0ZXIuIFdhcyBwcm92aWRlZCB3aXRoOlwiLHQpO2lmKHRoaXMuZW1pdHRlcklEcy5pbmRleE9mKHQudXVpZCk+LTEpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIkVtaXR0ZXIgYWxyZWFkeSBleGlzdHMgaW4gdGhpcyBncm91cC4gV2lsbCBub3QgYWRkIGFnYWluLlwiKTtpZihudWxsIT09dC5ncm91cClyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiRW1pdHRlciBhbHJlYWR5IGJlbG9uZ3MgdG8gYW5vdGhlciBncm91cC4gV2lsbCBub3QgYWRkIHRvIHJlcXVlc3RlZCBncm91cC5cIik7dmFyIGU9dGhpcy5hdHRyaWJ1dGVzLG49dGhpcy5wYXJ0aWNsZUNvdW50LGk9bit0LnBhcnRpY2xlQ291bnQ7dGhpcy5wYXJ0aWNsZUNvdW50PWksbnVsbCE9PXRoaXMubWF4UGFydGljbGVDb3VudCYmdGhpcy5wYXJ0aWNsZUNvdW50PnRoaXMubWF4UGFydGljbGVDb3VudCYmY29uc29sZS53YXJuKFwiU1BFLkdyb3VwOiBtYXhQYXJ0aWNsZUNvdW50IGV4Y2VlZGVkLiBSZXF1ZXN0aW5nXCIsdGhpcy5wYXJ0aWNsZUNvdW50LFwicGFydGljbGVzLCBjYW4gc3VwcG9ydCBvbmx5XCIsdGhpcy5tYXhQYXJ0aWNsZUNvdW50KSx0Ll9jYWxjdWxhdGVQUFNWYWx1ZSh0Lm1heEFnZS5fdmFsdWUrdC5tYXhBZ2UuX3NwcmVhZCksdC5fc2V0QnVmZmVyVXBkYXRlUmFuZ2VzKHRoaXMuYXR0cmlidXRlS2V5cyksdC5fc2V0QXR0cmlidXRlT2Zmc2V0KG4pLHQuZ3JvdXA9dGhpcyx0LmF0dHJpYnV0ZXM9dGhpcy5hdHRyaWJ1dGVzO2Zvcih2YXIgciBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJmVbcl0uX2NyZWF0ZUJ1ZmZlckF0dHJpYnV0ZShudWxsIT09dGhpcy5tYXhQYXJ0aWNsZUNvdW50P3RoaXMubWF4UGFydGljbGVDb3VudDp0aGlzLnBhcnRpY2xlQ291bnQpO2Zvcih2YXIgbz1uO288aTsrK28pdC5fYXNzaWduUG9zaXRpb25WYWx1ZShvKSx0Ll9hc3NpZ25Gb3JjZVZhbHVlKG8sXCJ2ZWxvY2l0eVwiKSx0Ll9hc3NpZ25Gb3JjZVZhbHVlKG8sXCJhY2NlbGVyYXRpb25cIiksdC5fYXNzaWduQWJzTGlmZXRpbWVWYWx1ZShvLFwib3BhY2l0eVwiKSx0Ll9hc3NpZ25BYnNMaWZldGltZVZhbHVlKG8sXCJzaXplXCIpLHQuX2Fzc2lnbkFuZ2xlVmFsdWUobyksdC5fYXNzaWduUm90YXRpb25WYWx1ZShvKSx0Ll9hc3NpZ25QYXJhbXNWYWx1ZShvKSx0Ll9hc3NpZ25Db2xvclZhbHVlKG8pO3JldHVybiB0aGlzLl9hcHBseUF0dHJpYnV0ZXNUb0dlb21ldHJ5KCksdGhpcy5lbWl0dGVycy5wdXNoKHQpLHRoaXMuZW1pdHRlcklEcy5wdXNoKHQudXVpZCksdGhpcy5fdXBkYXRlRGVmaW5lcyh0KSx0aGlzLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLHRoaXMuZ2VvbWV0cnkubmVlZHNVcGRhdGU9ITAsdGhpcy5fYXR0cmlidXRlc05lZWRSZWZyZXNoPSEwLHRoaXN9LGwuR3JvdXAucHJvdG90eXBlLnJlbW92ZUVtaXR0ZXI9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcy5lbWl0dGVySURzLmluZGV4T2YodC51dWlkKTtpZih0IGluc3RhbmNlb2YgbC5FbWl0dGVyPT0hMSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiYGVtaXR0ZXJgIGFyZ3VtZW50IG11c3QgYmUgaW5zdGFuY2Ugb2YgU1BFLkVtaXR0ZXIuIFdhcyBwcm92aWRlZCB3aXRoOlwiLHQpO2lmKGU9PT0tMSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiRW1pdHRlciBkb2VzIG5vdCBleGlzdCBpbiB0aGlzIGdyb3VwLiBXaWxsIG5vdCByZW1vdmUuXCIpO2Zvcih2YXIgbj10LmF0dHJpYnV0ZU9mZnNldCxpPW4rdC5wYXJ0aWNsZUNvdW50LHI9dGhpcy5hdHRyaWJ1dGVzLnBhcmFtcy50eXBlZEFycmF5LG89bjtvPGk7KytvKXIuYXJyYXlbNCpvXT0wLHIuYXJyYXlbNCpvKzFdPTA7dGhpcy5lbWl0dGVycy5zcGxpY2UoZSwxKSx0aGlzLmVtaXR0ZXJJRHMuc3BsaWNlKGUsMSk7Zm9yKHZhciBhIGluIHRoaXMuYXR0cmlidXRlcyl0aGlzLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoYSkmJnRoaXMuYXR0cmlidXRlc1thXS5zcGxpY2UobixpKTt0aGlzLnBhcnRpY2xlQ291bnQtPXQucGFydGljbGVDb3VudCx0Ll9vblJlbW92ZSgpLHRoaXMuX2F0dHJpYnV0ZXNOZWVkUmVmcmVzaD0hMH0sbC5Hcm91cC5wcm90b3R5cGUuZ2V0RnJvbVBvb2w9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzLl9wb29sLGU9dGhpcy5fY3JlYXRlTmV3V2hlblBvb2xFbXB0eTtpZih0Lmxlbmd0aClyZXR1cm4gdC5wb3AoKTtpZihlKXt2YXIgbj1uZXcgbC5FbWl0dGVyKHRoaXMuX3Bvb2xDcmVhdGlvblNldHRpbmdzKTtyZXR1cm4gdGhpcy5hZGRFbWl0dGVyKG4pLG59cmV0dXJuIG51bGx9LGwuR3JvdXAucHJvdG90eXBlLnJlbGVhc2VJbnRvUG9vbD1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdCBpbnN0YW5jZW9mIGwuRW1pdHRlcj09ITE/dm9pZCBjb25zb2xlLmVycm9yKFwiQXJndW1lbnQgaXMgbm90IGluc3RhbmNlb2YgU1BFLkVtaXR0ZXI6XCIsdCk6KHQucmVzZXQoKSx0aGlzLl9wb29sLnVuc2hpZnQodCksdGhpcyl9LGwuR3JvdXAucHJvdG90eXBlLmdldFBvb2w9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5fcG9vbH0sbC5Hcm91cC5wcm90b3R5cGUuYWRkUG9vbD1mdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk7dGhpcy5fcG9vbENyZWF0aW9uU2V0dGluZ3M9ZSx0aGlzLl9jcmVhdGVOZXdXaGVuUG9vbEVtcHR5PSEhbjtmb3IodmFyIHI9MDtyPHQ7KytyKWk9QXJyYXkuaXNBcnJheShlKT9uZXcgbC5FbWl0dGVyKGVbcl0pOm5ldyBsLkVtaXR0ZXIoZSksdGhpcy5hZGRFbWl0dGVyKGkpLHRoaXMucmVsZWFzZUludG9Qb29sKGkpO3JldHVybiB0aGlzfSxsLkdyb3VwLnByb3RvdHlwZS5fdHJpZ2dlclNpbmdsZUVtaXR0ZXI9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9dGhpcy5nZXRGcm9tUG9vbCgpLG49dGhpcztyZXR1cm4gbnVsbD09PWU/dm9pZCBjb25zb2xlLmxvZyhcIlNQRS5Hcm91cCBwb29sIHJhbiBvdXQuXCIpOih0IGluc3RhbmNlb2YgdS5WZWN0b3IzJiYoZS5wb3NpdGlvbi52YWx1ZS5jb3B5KHQpLGUucG9zaXRpb24udmFsdWU9ZS5wb3NpdGlvbi52YWx1ZSksZS5lbmFibGUoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5kaXNhYmxlKCksbi5yZWxlYXNlSW50b1Bvb2woZSl9LDFlMypNYXRoLm1heChlLmR1cmF0aW9uLGUubWF4QWdlLnZhbHVlK2UubWF4QWdlLnNwcmVhZCkpLHRoaXMpfSxsLkdyb3VwLnByb3RvdHlwZS50cmlnZ2VyUG9vbEVtaXR0ZXI9ZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmdD4xKWZvcih2YXIgbj0wO248dDsrK24pdGhpcy5fdHJpZ2dlclNpbmdsZUVtaXR0ZXIoZSk7ZWxzZSB0aGlzLl90cmlnZ2VyU2luZ2xlRW1pdHRlcihlKTtyZXR1cm4gdGhpc30sbC5Hcm91cC5wcm90b3R5cGUuX3VwZGF0ZVVuaWZvcm1zPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3RoaXMudW5pZm9ybXMucnVuVGltZS52YWx1ZSs9dCx0aGlzLnVuaWZvcm1zLmRlbHRhVGltZS52YWx1ZT10fSxsLkdyb3VwLnByb3RvdHlwZS5fcmVzZXRCdWZmZXJSYW5nZXM9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdD10aGlzLmF0dHJpYnV0ZUtleXMsZT10aGlzLmF0dHJpYnV0ZUNvdW50LTEsbj10aGlzLmF0dHJpYnV0ZXM7Zm9yKGU7ZT49MDstLWUpblt0W2VdXS5yZXNldFVwZGF0ZVJhbmdlKCl9LGwuR3JvdXAucHJvdG90eXBlLl91cGRhdGVCdWZmZXJzPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlLG4saSxyPXRoaXMuYXR0cmlidXRlS2V5cyxvPXRoaXMuYXR0cmlidXRlQ291bnQtMSxhPXRoaXMuYXR0cmlidXRlcyxzPXQuYnVmZmVyVXBkYXRlUmFuZ2VzO2ZvcihvO28+PTA7LS1vKWU9cltvXSxuPXNbZV0saT1hW2VdLGkuc2V0VXBkYXRlUmFuZ2Uobi5taW4sbi5tYXgpLGkuZmxhZ1VwZGF0ZSgpfSxsLkdyb3VwLnByb3RvdHlwZS50aWNrPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlLG49dGhpcy5lbWl0dGVycyxpPW4ubGVuZ3RoLHI9dHx8dGhpcy5maXhlZFRpbWVTdGVwLG89dGhpcy5hdHRyaWJ1dGVLZXlzLGE9dGhpcy5hdHRyaWJ1dGVzO2lmKHRoaXMuX3VwZGF0ZVVuaWZvcm1zKHIpLHRoaXMuX3Jlc2V0QnVmZmVyUmFuZ2VzKCksMCE9PWl8fHRoaXMuX2F0dHJpYnV0ZXNOZWVkUmVmcmVzaCE9PSExfHx0aGlzLl9hdHRyaWJ1dGVzTmVlZER5bmFtaWNSZXNldCE9PSExKXtmb3IodmFyIHMsZT0wO2U8aTsrK2Upcz1uW2VdLHMudGljayhyKSx0aGlzLl91cGRhdGVCdWZmZXJzKHMpO2lmKHRoaXMuX2F0dHJpYnV0ZXNOZWVkRHluYW1pY1Jlc2V0PT09ITApe2ZvcihlPXRoaXMuYXR0cmlidXRlQ291bnQtMTtlPj0wOy0tZSlhW29bZV1dLnJlc2V0RHluYW1pYygpO3RoaXMuX2F0dHJpYnV0ZXNOZWVkRHluYW1pY1Jlc2V0PSExfWlmKHRoaXMuX2F0dHJpYnV0ZXNOZWVkUmVmcmVzaD09PSEwKXtmb3IoZT10aGlzLmF0dHJpYnV0ZUNvdW50LTE7ZT49MDstLWUpYVtvW2VdXS5mb3JjZVVwZGF0ZUFsbCgpO3RoaXMuX2F0dHJpYnV0ZXNOZWVkUmVmcmVzaD0hMSx0aGlzLl9hdHRyaWJ1dGVzTmVlZER5bmFtaWNSZXNldD0hMH19fSxsLkdyb3VwLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7cmV0dXJuIHRoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpLHRoaXMubWF0ZXJpYWwuZGlzcG9zZSgpLHRoaXN9LGwuRW1pdHRlcj1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT1sLnV0aWxzLG49ZS50eXBlcyxpPWwudmFsdWVPdmVyTGlmZXRpbWVMZW5ndGg7dD1lLmVuc3VyZVR5cGVkQXJnKHQsbi5PQkpFQ1Qse30pLHQucG9zaXRpb249ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLG4uT0JKRUNULHt9KSx0LnZlbG9jaXR5PWUuZW5zdXJlVHlwZWRBcmcodC52ZWxvY2l0eSxuLk9CSkVDVCx7fSksdC5hY2NlbGVyYXRpb249ZS5lbnN1cmVUeXBlZEFyZyh0LmFjY2VsZXJhdGlvbixuLk9CSkVDVCx7fSksdC5yYWRpdXM9ZS5lbnN1cmVUeXBlZEFyZyh0LnJhZGl1cyxuLk9CSkVDVCx7fSksdC5kcmFnPWUuZW5zdXJlVHlwZWRBcmcodC5kcmFnLG4uT0JKRUNULHt9KSx0LnJvdGF0aW9uPWUuZW5zdXJlVHlwZWRBcmcodC5yb3RhdGlvbixuLk9CSkVDVCx7fSksdC5jb2xvcj1lLmVuc3VyZVR5cGVkQXJnKHQuY29sb3Isbi5PQkpFQ1Qse30pLHQub3BhY2l0eT1lLmVuc3VyZVR5cGVkQXJnKHQub3BhY2l0eSxuLk9CSkVDVCx7fSksdC5zaXplPWUuZW5zdXJlVHlwZWRBcmcodC5zaXplLG4uT0JKRUNULHt9KSx0LmFuZ2xlPWUuZW5zdXJlVHlwZWRBcmcodC5hbmdsZSxuLk9CSkVDVCx7fSksdC53aWdnbGU9ZS5lbnN1cmVUeXBlZEFyZyh0LndpZ2dsZSxuLk9CSkVDVCx7fSksdC5tYXhBZ2U9ZS5lbnN1cmVUeXBlZEFyZyh0Lm1heEFnZSxuLk9CSkVDVCx7fSksdC5vblBhcnRpY2xlU3Bhd24mJmNvbnNvbGUud2FybihcIm9uUGFydGljbGVTcGF3biBoYXMgYmVlbiByZW1vdmVkLiBQbGVhc2Ugc2V0IHByb3BlcnRpZXMgZGlyZWN0bHkgdG8gYWx0ZXIgdmFsdWVzIGF0IHJ1bnRpbWUuXCIpLHRoaXMudXVpZD11Lk1hdGguZ2VuZXJhdGVVVUlEKCksdGhpcy50eXBlPWUuZW5zdXJlVHlwZWRBcmcodC50eXBlLG4uTlVNQkVSLGwuZGlzdHJpYnV0aW9ucy5CT1gpLHRoaXMucG9zaXRpb249e192YWx1ZTplLmVuc3VyZUluc3RhbmNlT2YodC5wb3NpdGlvbi52YWx1ZSx1LlZlY3RvcjMsbmV3IHUuVmVjdG9yMyksX3NwcmVhZDplLmVuc3VyZUluc3RhbmNlT2YodC5wb3NpdGlvbi5zcHJlYWQsdS5WZWN0b3IzLG5ldyB1LlZlY3RvcjMpLF9zcHJlYWRDbGFtcDplLmVuc3VyZUluc3RhbmNlT2YodC5wb3NpdGlvbi5zcHJlYWRDbGFtcCx1LlZlY3RvcjMsbmV3IHUuVmVjdG9yMyksX2Rpc3RyaWJ1dGlvbjplLmVuc3VyZVR5cGVkQXJnKHQucG9zaXRpb24uZGlzdHJpYnV0aW9uLG4uTlVNQkVSLHRoaXMudHlwZSksX3JhbmRvbWlzZTplLmVuc3VyZVR5cGVkQXJnKHQucG9zaXRpb24ucmFuZG9taXNlLG4uQk9PTEVBTiwhMSksX3JhZGl1czplLmVuc3VyZVR5cGVkQXJnKHQucG9zaXRpb24ucmFkaXVzLG4uTlVNQkVSLDEwKSxfcmFkaXVzU2NhbGU6ZS5lbnN1cmVJbnN0YW5jZU9mKHQucG9zaXRpb24ucmFkaXVzU2NhbGUsdS5WZWN0b3IzLG5ldyB1LlZlY3RvcjMoMSwxLDEpKSxfZGlzdHJpYnV0aW9uQ2xhbXA6ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLmRpc3RyaWJ1dGlvbkNsYW1wLG4uTlVNQkVSLDApfSx0aGlzLnZlbG9jaXR5PXtfdmFsdWU6ZS5lbnN1cmVJbnN0YW5jZU9mKHQudmVsb2NpdHkudmFsdWUsdS5WZWN0b3IzLG5ldyB1LlZlY3RvcjMpLF9zcHJlYWQ6ZS5lbnN1cmVJbnN0YW5jZU9mKHQudmVsb2NpdHkuc3ByZWFkLHUuVmVjdG9yMyxuZXcgdS5WZWN0b3IzKSxfZGlzdHJpYnV0aW9uOmUuZW5zdXJlVHlwZWRBcmcodC52ZWxvY2l0eS5kaXN0cmlidXRpb24sbi5OVU1CRVIsdGhpcy50eXBlKSxfcmFuZG9taXNlOmUuZW5zdXJlVHlwZWRBcmcodC5wb3NpdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKX0sdGhpcy5hY2NlbGVyYXRpb249e192YWx1ZTplLmVuc3VyZUluc3RhbmNlT2YodC5hY2NlbGVyYXRpb24udmFsdWUsdS5WZWN0b3IzLG5ldyB1LlZlY3RvcjMpLF9zcHJlYWQ6ZS5lbnN1cmVJbnN0YW5jZU9mKHQuYWNjZWxlcmF0aW9uLnNwcmVhZCx1LlZlY3RvcjMsbmV3IHUuVmVjdG9yMyksX2Rpc3RyaWJ1dGlvbjplLmVuc3VyZVR5cGVkQXJnKHQuYWNjZWxlcmF0aW9uLmRpc3RyaWJ1dGlvbixuLk5VTUJFUix0aGlzLnR5cGUpLF9yYW5kb21pc2U6ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpfSx0aGlzLmRyYWc9e192YWx1ZTplLmVuc3VyZVR5cGVkQXJnKHQuZHJhZy52YWx1ZSxuLk5VTUJFUiwwKSxfc3ByZWFkOmUuZW5zdXJlVHlwZWRBcmcodC5kcmFnLnNwcmVhZCxuLk5VTUJFUiwwKSxfcmFuZG9taXNlOmUuZW5zdXJlVHlwZWRBcmcodC5wb3NpdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKX0sdGhpcy53aWdnbGU9e192YWx1ZTplLmVuc3VyZVR5cGVkQXJnKHQud2lnZ2xlLnZhbHVlLG4uTlVNQkVSLDApLF9zcHJlYWQ6ZS5lbnN1cmVUeXBlZEFyZyh0LndpZ2dsZS5zcHJlYWQsbi5OVU1CRVIsMCl9LHRoaXMucm90YXRpb249e19heGlzOmUuZW5zdXJlSW5zdGFuY2VPZih0LnJvdGF0aW9uLmF4aXMsdS5WZWN0b3IzLG5ldyB1LlZlY3RvcjMoMCwxLDApKSxfYXhpc1NwcmVhZDplLmVuc3VyZUluc3RhbmNlT2YodC5yb3RhdGlvbi5heGlzU3ByZWFkLHUuVmVjdG9yMyxuZXcgdS5WZWN0b3IzKSxfYW5nbGU6ZS5lbnN1cmVUeXBlZEFyZyh0LnJvdGF0aW9uLmFuZ2xlLG4uTlVNQkVSLDApLF9hbmdsZVNwcmVhZDplLmVuc3VyZVR5cGVkQXJnKHQucm90YXRpb24uYW5nbGVTcHJlYWQsbi5OVU1CRVIsMCksX3N0YXRpYzplLmVuc3VyZVR5cGVkQXJnKHQucm90YXRpb24uc3RhdGljLG4uQk9PTEVBTiwhMSksX2NlbnRlcjplLmVuc3VyZUluc3RhbmNlT2YodC5yb3RhdGlvbi5jZW50ZXIsdS5WZWN0b3IzLHRoaXMucG9zaXRpb24uX3ZhbHVlLmNsb25lKCkpLF9yYW5kb21pc2U6ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpfSx0aGlzLm1heEFnZT17X3ZhbHVlOmUuZW5zdXJlVHlwZWRBcmcodC5tYXhBZ2UudmFsdWUsbi5OVU1CRVIsMiksXG5fc3ByZWFkOmUuZW5zdXJlVHlwZWRBcmcodC5tYXhBZ2Uuc3ByZWFkLG4uTlVNQkVSLDApfSx0aGlzLmNvbG9yPXtfdmFsdWU6ZS5lbnN1cmVBcnJheUluc3RhbmNlT2YodC5jb2xvci52YWx1ZSx1LkNvbG9yLG5ldyB1LkNvbG9yKSxfc3ByZWFkOmUuZW5zdXJlQXJyYXlJbnN0YW5jZU9mKHQuY29sb3Iuc3ByZWFkLHUuVmVjdG9yMyxuZXcgdS5WZWN0b3IzKSxfcmFuZG9taXNlOmUuZW5zdXJlVHlwZWRBcmcodC5wb3NpdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKX0sdGhpcy5vcGFjaXR5PXtfdmFsdWU6ZS5lbnN1cmVBcnJheVR5cGVkQXJnKHQub3BhY2l0eS52YWx1ZSxuLk5VTUJFUiwxKSxfc3ByZWFkOmUuZW5zdXJlQXJyYXlUeXBlZEFyZyh0Lm9wYWNpdHkuc3ByZWFkLG4uTlVNQkVSLDApLF9yYW5kb21pc2U6ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpfSx0aGlzLnNpemU9e192YWx1ZTplLmVuc3VyZUFycmF5VHlwZWRBcmcodC5zaXplLnZhbHVlLG4uTlVNQkVSLDEpLF9zcHJlYWQ6ZS5lbnN1cmVBcnJheVR5cGVkQXJnKHQuc2l6ZS5zcHJlYWQsbi5OVU1CRVIsMCksX3JhbmRvbWlzZTplLmVuc3VyZVR5cGVkQXJnKHQucG9zaXRpb24ucmFuZG9taXNlLG4uQk9PTEVBTiwhMSl9LHRoaXMuYW5nbGU9e192YWx1ZTplLmVuc3VyZUFycmF5VHlwZWRBcmcodC5hbmdsZS52YWx1ZSxuLk5VTUJFUiwwKSxfc3ByZWFkOmUuZW5zdXJlQXJyYXlUeXBlZEFyZyh0LmFuZ2xlLnNwcmVhZCxuLk5VTUJFUiwwKSxfcmFuZG9taXNlOmUuZW5zdXJlVHlwZWRBcmcodC5wb3NpdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKX0sdGhpcy5wYXJ0aWNsZUNvdW50PWUuZW5zdXJlVHlwZWRBcmcodC5wYXJ0aWNsZUNvdW50LG4uTlVNQkVSLDEwMCksdGhpcy5kdXJhdGlvbj1lLmVuc3VyZVR5cGVkQXJnKHQuZHVyYXRpb24sbi5OVU1CRVIsbnVsbCksdGhpcy5pc1N0YXRpYz1lLmVuc3VyZVR5cGVkQXJnKHQuaXNTdGF0aWMsbi5CT09MRUFOLCExKSx0aGlzLmFjdGl2ZU11bHRpcGxpZXI9ZS5lbnN1cmVUeXBlZEFyZyh0LmFjdGl2ZU11bHRpcGxpZXIsbi5OVU1CRVIsMSksdGhpcy5kaXJlY3Rpb249ZS5lbnN1cmVUeXBlZEFyZyh0LmRpcmVjdGlvbixuLk5VTUJFUiwxKSx0aGlzLmFsaXZlPWUuZW5zdXJlVHlwZWRBcmcodC5hbGl2ZSxuLkJPT0xFQU4sITApLHRoaXMucGFydGljbGVzUGVyU2Vjb25kPTAsdGhpcy5hY3RpdmF0aW9uSW5kZXg9MCx0aGlzLmF0dHJpYnV0ZU9mZnNldD0wLHRoaXMuYXR0cmlidXRlRW5kPTAsdGhpcy5hZ2U9MCx0aGlzLmFjdGl2ZVBhcnRpY2xlQ291bnQ9MCx0aGlzLmdyb3VwPW51bGwsdGhpcy5hdHRyaWJ1dGVzPW51bGwsdGhpcy5wYXJhbXNBcnJheT1udWxsLHRoaXMucmVzZXRGbGFncz17cG9zaXRpb246ZS5lbnN1cmVUeXBlZEFyZyh0LnBvc2l0aW9uLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpfHxlLmVuc3VyZVR5cGVkQXJnKHQucmFkaXVzLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpLHZlbG9jaXR5OmUuZW5zdXJlVHlwZWRBcmcodC52ZWxvY2l0eS5yYW5kb21pc2Usbi5CT09MRUFOLCExKSxhY2NlbGVyYXRpb246ZS5lbnN1cmVUeXBlZEFyZyh0LmFjY2VsZXJhdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKXx8ZS5lbnN1cmVUeXBlZEFyZyh0LmRyYWcucmFuZG9taXNlLG4uQk9PTEVBTiwhMSkscm90YXRpb246ZS5lbnN1cmVUeXBlZEFyZyh0LnJvdGF0aW9uLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpLHJvdGF0aW9uQ2VudGVyOmUuZW5zdXJlVHlwZWRBcmcodC5yb3RhdGlvbi5yYW5kb21pc2Usbi5CT09MRUFOLCExKSxzaXplOmUuZW5zdXJlVHlwZWRBcmcodC5zaXplLnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpLGNvbG9yOmUuZW5zdXJlVHlwZWRBcmcodC5jb2xvci5yYW5kb21pc2Usbi5CT09MRUFOLCExKSxvcGFjaXR5OmUuZW5zdXJlVHlwZWRBcmcodC5vcGFjaXR5LnJhbmRvbWlzZSxuLkJPT0xFQU4sITEpLGFuZ2xlOmUuZW5zdXJlVHlwZWRBcmcodC5hbmdsZS5yYW5kb21pc2Usbi5CT09MRUFOLCExKX0sdGhpcy51cGRhdGVGbGFncz17fSx0aGlzLnVwZGF0ZUNvdW50cz17fSx0aGlzLnVwZGF0ZU1hcD17bWF4QWdlOlwicGFyYW1zXCIscG9zaXRpb246XCJwb3NpdGlvblwiLHZlbG9jaXR5OlwidmVsb2NpdHlcIixhY2NlbGVyYXRpb246XCJhY2NlbGVyYXRpb25cIixkcmFnOlwiYWNjZWxlcmF0aW9uXCIsd2lnZ2xlOlwicGFyYW1zXCIscm90YXRpb246XCJyb3RhdGlvblwiLHNpemU6XCJzaXplXCIsY29sb3I6XCJjb2xvclwiLG9wYWNpdHk6XCJvcGFjaXR5XCIsYW5nbGU6XCJhbmdsZVwifTtmb3IodmFyIHIgaW4gdGhpcy51cGRhdGVNYXApdGhpcy51cGRhdGVNYXAuaGFzT3duUHJvcGVydHkocikmJih0aGlzLnVwZGF0ZUNvdW50c1t0aGlzLnVwZGF0ZU1hcFtyXV09MCx0aGlzLnVwZGF0ZUZsYWdzW3RoaXMudXBkYXRlTWFwW3JdXT0hMSx0aGlzLl9jcmVhdGVHZXR0ZXJTZXR0ZXJzKHRoaXNbcl0scikpO3RoaXMuYnVmZmVyVXBkYXRlUmFuZ2VzPXt9LHRoaXMuYXR0cmlidXRlS2V5cz1udWxsLHRoaXMuYXR0cmlidXRlQ291bnQ9MCxlLmVuc3VyZVZhbHVlT3ZlckxpZmV0aW1lQ29tcGxpYW5jZSh0aGlzLmNvbG9yLGksaSksZS5lbnN1cmVWYWx1ZU92ZXJMaWZldGltZUNvbXBsaWFuY2UodGhpcy5vcGFjaXR5LGksaSksZS5lbnN1cmVWYWx1ZU92ZXJMaWZldGltZUNvbXBsaWFuY2UodGhpcy5zaXplLGksaSksZS5lbnN1cmVWYWx1ZU92ZXJMaWZldGltZUNvbXBsaWFuY2UodGhpcy5hbmdsZSxpLGkpfSxsLkVtaXR0ZXIuY29uc3RydWN0b3I9bC5FbWl0dGVyLGwuRW1pdHRlci5wcm90b3R5cGUuX2NyZWF0ZUdldHRlclNldHRlcnM9ZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzO2Zvcih2YXIgaSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoaSkpe3ZhciByPWkucmVwbGFjZShcIl9cIixcIlwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHtnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbdF19fShpKSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGkpe3ZhciByPW4udXBkYXRlTWFwW2VdLG89dGhpc1t0XSxhPWwudmFsdWVPdmVyTGlmZXRpbWVMZW5ndGg7XCJfcm90YXRpb25DZW50ZXJcIj09PXQ/KG4udXBkYXRlRmxhZ3Mucm90YXRpb25DZW50ZXI9ITAsbi51cGRhdGVDb3VudHMucm90YXRpb25DZW50ZXI9MCk6XCJfcmFuZG9taXNlXCI9PT10P24ucmVzZXRGbGFnc1tyXT1pOihuLnVwZGF0ZUZsYWdzW3JdPSEwLG4udXBkYXRlQ291bnRzW3JdPTApLG4uZ3JvdXAuX3VwZGF0ZURlZmluZXMoKSx0aGlzW3RdPWksQXJyYXkuaXNBcnJheShvKSYmbC51dGlscy5lbnN1cmVWYWx1ZU92ZXJMaWZldGltZUNvbXBsaWFuY2UobltlXSxhLGEpfX0oaSl9KX19LGwuRW1pdHRlci5wcm90b3R5cGUuX3NldEJ1ZmZlclVwZGF0ZVJhbmdlcz1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt0aGlzLmF0dHJpYnV0ZUtleXM9dCx0aGlzLmF0dHJpYnV0ZUNvdW50PXQubGVuZ3RoO2Zvcih2YXIgZT10aGlzLmF0dHJpYnV0ZUNvdW50LTE7ZT49MDstLWUpdGhpcy5idWZmZXJVcGRhdGVSYW5nZXNbdFtlXV09e21pbjpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5ORUdBVElWRV9JTkZJTklUWX19LGwuRW1pdHRlci5wcm90b3R5cGUuX2NhbGN1bGF0ZVBQU1ZhbHVlPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBlPXRoaXMucGFydGljbGVDb3VudDt0aGlzLmR1cmF0aW9uP3RoaXMucGFydGljbGVzUGVyU2Vjb25kPWUvKHQ8dGhpcy5kdXJhdGlvbj90OnRoaXMuZHVyYXRpb24pOnRoaXMucGFydGljbGVzUGVyU2Vjb25kPWUvdH0sbC5FbWl0dGVyLnByb3RvdHlwZS5fc2V0QXR0cmlidXRlT2Zmc2V0PWZ1bmN0aW9uKHQpe3RoaXMuYXR0cmlidXRlT2Zmc2V0PXQsdGhpcy5hY3RpdmF0aW9uSW5kZXg9dCx0aGlzLmFjdGl2YXRpb25FbmQ9dCt0aGlzLnBhcnRpY2xlQ291bnR9LGwuRW1pdHRlci5wcm90b3R5cGUuX2Fzc2lnblZhbHVlPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7c3dpdGNoKHQpe2Nhc2VcInBvc2l0aW9uXCI6dGhpcy5fYXNzaWduUG9zaXRpb25WYWx1ZShlKTticmVhaztjYXNlXCJ2ZWxvY2l0eVwiOmNhc2VcImFjY2VsZXJhdGlvblwiOnRoaXMuX2Fzc2lnbkZvcmNlVmFsdWUoZSx0KTticmVhaztjYXNlXCJzaXplXCI6Y2FzZVwib3BhY2l0eVwiOnRoaXMuX2Fzc2lnbkFic0xpZmV0aW1lVmFsdWUoZSx0KTticmVhaztjYXNlXCJhbmdsZVwiOnRoaXMuX2Fzc2lnbkFuZ2xlVmFsdWUoZSk7YnJlYWs7Y2FzZVwicGFyYW1zXCI6dGhpcy5fYXNzaWduUGFyYW1zVmFsdWUoZSk7YnJlYWs7Y2FzZVwicm90YXRpb25cIjp0aGlzLl9hc3NpZ25Sb3RhdGlvblZhbHVlKGUpO2JyZWFrO2Nhc2VcImNvbG9yXCI6dGhpcy5fYXNzaWduQ29sb3JWYWx1ZShlKX19LGwuRW1pdHRlci5wcm90b3R5cGUuX2Fzc2lnblBvc2l0aW9uVmFsdWU9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9bC5kaXN0cmlidXRpb25zLG49bC51dGlscyxpPXRoaXMucG9zaXRpb24scj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24sbz1pLl92YWx1ZSxhPWkuX3NwcmVhZCxzPWkuX2Rpc3RyaWJ1dGlvbjtzd2l0Y2gocyl7Y2FzZSBlLkJPWDpuLnJhbmRvbVZlY3RvcjMocix0LG8sYSxpLl9zcHJlYWRDbGFtcCk7YnJlYWs7Y2FzZSBlLlNQSEVSRTpuLnJhbmRvbVZlY3RvcjNPblNwaGVyZShyLHQsbyxpLl9yYWRpdXMsaS5fc3ByZWFkLngsaS5fcmFkaXVzU2NhbGUsaS5fc3ByZWFkQ2xhbXAueCxpLl9kaXN0cmlidXRpb25DbGFtcHx8dGhpcy5wYXJ0aWNsZUNvdW50KTticmVhaztjYXNlIGUuRElTQzpuLnJhbmRvbVZlY3RvcjNPbkRpc2Mocix0LG8saS5fcmFkaXVzLGkuX3NwcmVhZC54LGkuX3JhZGl1c1NjYWxlLGkuX3NwcmVhZENsYW1wLngpfX0sbC5FbWl0dGVyLnByb3RvdHlwZS5fYXNzaWduRm9yY2VWYWx1ZT1mdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO3ZhciBuLGkscixvLGEscz1sLmRpc3RyaWJ1dGlvbnMsdT1sLnV0aWxzLGM9dGhpc1tlXSxoPWMuX3ZhbHVlLGY9Yy5fc3ByZWFkLGQ9Yy5fZGlzdHJpYnV0aW9uO3N3aXRjaChkKXtjYXNlIHMuQk9YOnUucmFuZG9tVmVjdG9yMyh0aGlzLmF0dHJpYnV0ZXNbZV0sdCxoLGYpO2JyZWFrO2Nhc2Ugcy5TUEhFUkU6bj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24udHlwZWRBcnJheS5hcnJheSxhPTMqdCxpPW5bYV0scj1uW2ErMV0sbz1uW2ErMl0sdS5yYW5kb21EaXJlY3Rpb25WZWN0b3IzT25TcGhlcmUodGhpcy5hdHRyaWJ1dGVzW2VdLHQsaSxyLG8sdGhpcy5wb3NpdGlvbi5fdmFsdWUsYy5fdmFsdWUueCxjLl9zcHJlYWQueCk7YnJlYWs7Y2FzZSBzLkRJU0M6bj10aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24udHlwZWRBcnJheS5hcnJheSxhPTMqdCxpPW5bYV0scj1uW2ErMV0sbz1uW2ErMl0sdS5yYW5kb21EaXJlY3Rpb25WZWN0b3IzT25EaXNjKHRoaXMuYXR0cmlidXRlc1tlXSx0LGkscixvLHRoaXMucG9zaXRpb24uX3ZhbHVlLGMuX3ZhbHVlLngsYy5fc3ByZWFkLngpfWlmKFwiYWNjZWxlcmF0aW9uXCI9PT1lKXt2YXIgcD11LmNsYW1wKHUucmFuZG9tRmxvYXQodGhpcy5kcmFnLl92YWx1ZSx0aGlzLmRyYWcuX3NwcmVhZCksMCwxKTt0aGlzLmF0dHJpYnV0ZXMuYWNjZWxlcmF0aW9uLnR5cGVkQXJyYXkuYXJyYXlbNCp0KzNdPXB9fSxsLkVtaXR0ZXIucHJvdG90eXBlLl9hc3NpZ25BYnNMaWZldGltZVZhbHVlPWZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4saT10aGlzLmF0dHJpYnV0ZXNbZV0udHlwZWRBcnJheSxyPXRoaXNbZV0sbz1sLnV0aWxzO28uYXJyYXlWYWx1ZXNBcmVFcXVhbChyLl92YWx1ZSkmJm8uYXJyYXlWYWx1ZXNBcmVFcXVhbChyLl9zcHJlYWQpPyhuPU1hdGguYWJzKG8ucmFuZG9tRmxvYXQoci5fdmFsdWVbMF0sci5fc3ByZWFkWzBdKSksaS5zZXRWZWM0Q29tcG9uZW50cyh0LG4sbixuLG4pKTppLnNldFZlYzRDb21wb25lbnRzKHQsTWF0aC5hYnMoby5yYW5kb21GbG9hdChyLl92YWx1ZVswXSxyLl9zcHJlYWRbMF0pKSxNYXRoLmFicyhvLnJhbmRvbUZsb2F0KHIuX3ZhbHVlWzFdLHIuX3NwcmVhZFsxXSkpLE1hdGguYWJzKG8ucmFuZG9tRmxvYXQoci5fdmFsdWVbMl0sci5fc3ByZWFkWzJdKSksTWF0aC5hYnMoby5yYW5kb21GbG9hdChyLl92YWx1ZVszXSxyLl9zcHJlYWRbM10pKSl9LGwuRW1pdHRlci5wcm90b3R5cGUuX2Fzc2lnbkFuZ2xlVmFsdWU9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsbj10aGlzLmF0dHJpYnV0ZXMuYW5nbGUudHlwZWRBcnJheSxpPXRoaXMuYW5nbGUscj1sLnV0aWxzO3IuYXJyYXlWYWx1ZXNBcmVFcXVhbChpLl92YWx1ZSkmJnIuYXJyYXlWYWx1ZXNBcmVFcXVhbChpLl9zcHJlYWQpPyhlPXIucmFuZG9tRmxvYXQoaS5fdmFsdWVbMF0saS5fc3ByZWFkWzBdKSxuLnNldFZlYzRDb21wb25lbnRzKHQsZSxlLGUsZSkpOm4uc2V0VmVjNENvbXBvbmVudHModCxyLnJhbmRvbUZsb2F0KGkuX3ZhbHVlWzBdLGkuX3NwcmVhZFswXSksci5yYW5kb21GbG9hdChpLl92YWx1ZVsxXSxpLl9zcHJlYWRbMV0pLHIucmFuZG9tRmxvYXQoaS5fdmFsdWVbMl0saS5fc3ByZWFkWzJdKSxyLnJhbmRvbUZsb2F0KGkuX3ZhbHVlWzNdLGkuX3NwcmVhZFszXSkpfSxsLkVtaXR0ZXIucHJvdG90eXBlLl9hc3NpZ25QYXJhbXNWYWx1ZT1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt0aGlzLmF0dHJpYnV0ZXMucGFyYW1zLnR5cGVkQXJyYXkuc2V0VmVjNENvbXBvbmVudHModCx0aGlzLmlzU3RhdGljPzE6MCwwLE1hdGguYWJzKGwudXRpbHMucmFuZG9tRmxvYXQodGhpcy5tYXhBZ2UuX3ZhbHVlLHRoaXMubWF4QWdlLl9zcHJlYWQpKSxsLnV0aWxzLnJhbmRvbUZsb2F0KHRoaXMud2lnZ2xlLl92YWx1ZSx0aGlzLndpZ2dsZS5fc3ByZWFkKSl9LGwuRW1pdHRlci5wcm90b3R5cGUuX2Fzc2lnblJvdGF0aW9uVmFsdWU9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dGhpcy5hdHRyaWJ1dGVzLnJvdGF0aW9uLnR5cGVkQXJyYXkuc2V0VmVjM0NvbXBvbmVudHModCxsLnV0aWxzLmdldFBhY2tlZFJvdGF0aW9uQXhpcyh0aGlzLnJvdGF0aW9uLl9heGlzLHRoaXMucm90YXRpb24uX2F4aXNTcHJlYWQpLGwudXRpbHMucmFuZG9tRmxvYXQodGhpcy5yb3RhdGlvbi5fYW5nbGUsdGhpcy5yb3RhdGlvbi5fYW5nbGVTcHJlYWQpLHRoaXMucm90YXRpb24uX3N0YXRpYz8wOjEpLHRoaXMuYXR0cmlidXRlcy5yb3RhdGlvbkNlbnRlci50eXBlZEFycmF5LnNldFZlYzModCx0aGlzLnJvdGF0aW9uLl9jZW50ZXIpfSxsLkVtaXR0ZXIucHJvdG90eXBlLl9hc3NpZ25Db2xvclZhbHVlPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2wudXRpbHMucmFuZG9tQ29sb3JBc0hleCh0aGlzLmF0dHJpYnV0ZXMuY29sb3IsdCx0aGlzLmNvbG9yLl92YWx1ZSx0aGlzLmNvbG9yLl9zcHJlYWQpfSxsLkVtaXR0ZXIucHJvdG90eXBlLl9yZXNldFBhcnRpY2xlPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Zvcih2YXIgZSxuLGk9dGhpcy5yZXNldEZsYWdzLHI9dGhpcy51cGRhdGVGbGFncyxvPXRoaXMudXBkYXRlQ291bnRzLGE9dGhpcy5hdHRyaWJ1dGVLZXlzLHM9dGhpcy5hdHRyaWJ1dGVDb3VudC0xO3M+PTA7LS1zKWU9YVtzXSxuPXJbZV0saVtlXSE9PSEwJiZuIT09ITB8fCh0aGlzLl9hc3NpZ25WYWx1ZShlLHQpLHRoaXMuX3VwZGF0ZUF0dHJpYnV0ZVVwZGF0ZVJhbmdlKGUsdCksbj09PSEwJiZvW2VdPT09dGhpcy5wYXJ0aWNsZUNvdW50PyhyW2VdPSExLG9bZV09MCk6MT09biYmKytvW2VdKX0sbC5FbWl0dGVyLnByb3RvdHlwZS5fdXBkYXRlQXR0cmlidXRlVXBkYXRlUmFuZ2U9ZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjt2YXIgbj10aGlzLmJ1ZmZlclVwZGF0ZVJhbmdlc1t0XTtuLm1pbj1NYXRoLm1pbihlLG4ubWluKSxuLm1heD1NYXRoLm1heChlLG4ubWF4KX0sbC5FbWl0dGVyLnByb3RvdHlwZS5fcmVzZXRCdWZmZXJSYW5nZXM9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgdCxlPXRoaXMuYnVmZmVyVXBkYXRlUmFuZ2VzLG49dGhpcy5idWZmZXJVcGRhdGVLZXlzLGk9dGhpcy5idWZmZXJVcGRhdGVDb3VudC0xO2ZvcihpO2k+PTA7LS1pKXQ9bltpXSxlW3RdLm1pbj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksZVt0XS5tYXg9TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZfSxsLkVtaXR0ZXIucHJvdG90eXBlLl9vblJlbW92ZT1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3RoaXMucGFydGljbGVzUGVyU2Vjb25kPTAsdGhpcy5hdHRyaWJ1dGVPZmZzZXQ9MCx0aGlzLmFjdGl2YXRpb25JbmRleD0wLHRoaXMuYWN0aXZlUGFydGljbGVDb3VudD0wLHRoaXMuZ3JvdXA9bnVsbCx0aGlzLmF0dHJpYnV0ZXM9bnVsbCx0aGlzLnBhcmFtc0FycmF5PW51bGwsdGhpcy5hZ2U9MH0sbC5FbWl0dGVyLnByb3RvdHlwZS5fZGVjcmVtZW50UGFydGljbGVDb3VudD1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiOy0tdGhpcy5hY3RpdmVQYXJ0aWNsZUNvdW50fSxsLkVtaXR0ZXIucHJvdG90eXBlLl9pbmNyZW1lbnRQYXJ0aWNsZUNvdW50PWZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7Kyt0aGlzLmFjdGl2ZVBhcnRpY2xlQ291bnR9LGwuRW1pdHRlci5wcm90b3R5cGUuX2NoZWNrUGFydGljbGVBZ2VzPWZ1bmN0aW9uKHQsZSxuLGkpe1widXNlIHN0cmljdFwiO2Zvcih2YXIgcixvLGEscyx1PWUtMTt1Pj10Oy0tdSlyPTQqdSxzPW5bcl0sMCE9PXMmJihhPW5bcisxXSxvPW5bcisyXSwxPT09dGhpcy5kaXJlY3Rpb24/KGErPWksYT49byYmKGE9MCxzPTAsdGhpcy5fZGVjcmVtZW50UGFydGljbGVDb3VudCgpKSk6KGEtPWksYTw9MCYmKGE9byxzPTAsdGhpcy5fZGVjcmVtZW50UGFydGljbGVDb3VudCgpKSksbltyXT1zLG5bcisxXT1hLHRoaXMuX3VwZGF0ZUF0dHJpYnV0ZVVwZGF0ZVJhbmdlKFwicGFyYW1zXCIsdSkpfSxsLkVtaXR0ZXIucHJvdG90eXBlLl9hY3RpdmF0ZVBhcnRpY2xlcz1mdW5jdGlvbih0LGUsbixpKXtcInVzZSBzdHJpY3RcIjtmb3IodmFyIHIsbyxhPXRoaXMuZGlyZWN0aW9uLHM9dDtzPGU7KytzKXI9NCpzLDAhPW5bcl0mJjEhPT10aGlzLnBhcnRpY2xlQ291bnR8fCh0aGlzLl9pbmNyZW1lbnRQYXJ0aWNsZUNvdW50KCksbltyXT0xLHRoaXMuX3Jlc2V0UGFydGljbGUocyksbz1pKihzLXQpLG5bcisxXT1hPT09LTE/bltyKzJdLW86byx0aGlzLl91cGRhdGVBdHRyaWJ1dGVVcGRhdGVSYW5nZShcInBhcmFtc1wiLHMpKX0sbC5FbWl0dGVyLnByb3RvdHlwZS50aWNrPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2lmKCF0aGlzLmlzU3RhdGljKXtudWxsPT09dGhpcy5wYXJhbXNBcnJheSYmKHRoaXMucGFyYW1zQXJyYXk9dGhpcy5hdHRyaWJ1dGVzLnBhcmFtcy50eXBlZEFycmF5LmFycmF5KTt2YXIgZT10aGlzLmF0dHJpYnV0ZU9mZnNldCxuPWUrdGhpcy5wYXJ0aWNsZUNvdW50LGk9dGhpcy5wYXJhbXNBcnJheSxyPXRoaXMucGFydGljbGVzUGVyU2Vjb25kKnRoaXMuYWN0aXZlTXVsdGlwbGllcip0LG89dGhpcy5hY3RpdmF0aW9uSW5kZXg7aWYodGhpcy5fcmVzZXRCdWZmZXJSYW5nZXMoKSx0aGlzLl9jaGVja1BhcnRpY2xlQWdlcyhlLG4saSx0KSx0aGlzLmFsaXZlPT09ITEpcmV0dXJuIHZvaWQodGhpcy5hZ2U9MCk7aWYobnVsbCE9PXRoaXMuZHVyYXRpb24mJnRoaXMuYWdlPnRoaXMuZHVyYXRpb24pcmV0dXJuIHRoaXMuYWxpdmU9ITEsdm9pZCh0aGlzLmFnZT0wKTt2YXIgYT0xPT09dGhpcy5wYXJ0aWNsZUNvdW50P286MHxvLHM9TWF0aC5taW4oYStyLHRoaXMuYWN0aXZhdGlvbkVuZCksdT1zLXRoaXMuYWN0aXZhdGlvbkluZGV4fDAsbD11PjA/dC91OjA7dGhpcy5fYWN0aXZhdGVQYXJ0aWNsZXMoYSxzLGksbCksdGhpcy5hY3RpdmF0aW9uSW5kZXgrPXIsdGhpcy5hY3RpdmF0aW9uSW5kZXg+biYmKHRoaXMuYWN0aXZhdGlvbkluZGV4PWUpLHRoaXMuYWdlKz10fX0sbC5FbWl0dGVyLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtpZih0aGlzLmFnZT0wLHRoaXMuYWxpdmU9ITEsdD09PSEwKXtmb3IodmFyIGUsbj10aGlzLmF0dHJpYnV0ZU9mZnNldCxpPW4rdGhpcy5wYXJ0aWNsZUNvdW50LHI9dGhpcy5wYXJhbXNBcnJheSxvPXRoaXMuYXR0cmlidXRlcy5wYXJhbXMuYnVmZmVyQXR0cmlidXRlLGE9aS0xO2E+PW47LS1hKWU9NCphLHJbZV09MCxyW2UrMV09MDtvLnVwZGF0ZVJhbmdlLm9mZnNldD0wLG8udXBkYXRlUmFuZ2UuY291bnQ9LTEsby5uZWVkc1VwZGF0ZT0hMH1yZXR1cm4gdGhpc30sbC5FbWl0dGVyLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5hbGl2ZT0hMCx0aGlzfSxsLkVtaXR0ZXIucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gdGhpcy5hbGl2ZT0hMSx0aGlzfSxsLkVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe1widXNlIHN0cmljdFwiO3JldHVybiBudWxsIT09dGhpcy5ncm91cD90aGlzLmdyb3VwLnJlbW92ZUVtaXR0ZXIodGhpcyk6Y29uc29sZS5lcnJvcihcIkVtaXR0ZXIgZG9lcyBub3QgYmVsb25nIHRvIGEgZ3JvdXAsIGNhbm5vdCByZW1vdmUuXCIpLHRoaXN9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0KXt2YXIgZT1uZXcgYy5kZWZhdWx0LG49dC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS50cmltKCkuc3BsaXQoXCJcXG5cIik7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj10LnRyaW0oKS5zcGxpdChcIjpcIiksaT1uLnNoaWZ0KCkudHJpbSgpLHI9bi5qb2luKFwiOlwiKS50cmltKCk7aSYmMCE9PWkubGVuZ3RoJiZlLmFwcGVuZChpLHIpfSksZX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uKDQwKSxhPWkobykscz1uKDQxKSx1PWkocyksbD1uKDIwKSxjPWkobCksaD1cInVuZGVmaW5lZFwiPT10eXBlb2YgUHJvbWlzZT9uKDE0KS5Qcm9taXNlOlByb21pc2UsZj1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gbmV3IGgoZnVuY3Rpb24oaSxvKXtmdW5jdGlvbiBzKCl7cmV0dXJuXCJyZXNwb25zZVVSTFwiaW4gbj9uLnJlc3BvbnNlVVJMOi9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KG4uZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpP24uZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLVJlcXVlc3QtVVJMXCIpOm51bGx9dmFyIGw9dm9pZCAwO2w9YS5kZWZhdWx0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHQpJiYhZT90Om5ldyBhLmRlZmF1bHQodCxlKSxuLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PW4uc3RhdHVzLGU9bi5zdGF0dXNUZXh0LG89e3N0YXR1czp0LHN0YXR1c1RleHQ6ZSxoZWFkZXJzOnIobiksdXJsOnMoKX0sYT1cInJlc3BvbnNlXCJpbiBuP24ucmVzcG9uc2U6bi5yZXNwb25zZVRleHQ7aShuZXcgdS5kZWZhdWx0KGEsbykpfSxuLm9uZXJyb3I9ZnVuY3Rpb24oKXtvKG5ldyBUeXBlRXJyb3IoXCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkXCIpKX0sbi5vcGVuKGwubWV0aG9kLGwudXJsLCEwKSxcImluY2x1ZGVcIj09PWwuY3JlZGllbnRpYWxzJiYobi53aXRoQ3JlZGllbnRpYWxzPSEwKSxsLmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3JldHVybiBuLnNldFJlcXVlc3RIZWFkZXIodCxlKX0pLG4uc2VuZChsLl9ib2R5SW5pdD9sLl9ib2R5SW5pdDpudWxsKX0pfTtlLmRlZmF1bHQ9Zn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBQcm9taXNlP24oMTQpLlByb21pc2U6UHJvbWlzZSxyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaShmdW5jdGlvbihlKXtyZXR1cm4gc2V0VGltZW91dChlLHQpfSl9LG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gaS5yYWNlKFt0LHIoZSkudGhlbihmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIlJlcXVlc3QgVGltZW91dCBhZnRlciBcIitlK1wiIG1zXCIpfSldKX07by53YWl0PXIsZS5kZWZhdWx0PW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDIxMyk7dC5leHBvcnRzPWZ1bmN0aW9uIHQoZSl7ZnVuY3Rpb24gbih0KXt2YXIgZT10b1N0cmluZy5jYWxsKHQpO2lmKHZvaWQgMD09PWdbZV0pcmV0dXJuITE7dmFyIG49aShcIlwiK3QpO2lmKHZvaWQgMD09PWdbZV1bbl0pcmV0dXJuITE7Zm9yKHZhciByPWdbZV1bbl0sbz0wO288ci5sZW5ndGg7KytvKWlmKHRoaXMuZkVxdWFscyYmdGhpcy5mRXF1YWxzKHJbb10sdCl8fHJbb109PT10KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHIodCl7dmFyIGU9dG9TdHJpbmcuY2FsbCh0KTt2b2lkIDA9PT1nW2VdJiYoZ1tlXT1PYmplY3QuY3JlYXRlKG51bGwpKTt2YXIgbj1pKFwiXCIrdCk7aWYodm9pZCAwPT09Z1tlXVtuXSlyZXR1cm4gZ1tlXVtuXT1bdF0scCsrLCEwO2Zvcih2YXIgcj0wLG89LTEsYT1nW2VdW25dO3I8YS5sZW5ndGg7KytyKXtpZih0aGlzLmZFcXVhbHMmJnRoaXMuZkVxdWFscyhhW3JdLHQpfHxhW3JdPT09dClyZXR1cm4hMTt2b2lkIDA9PT1hW3JdJiYobz1yKX1yZXR1cm4gbz49MD9hW29dPXQ6YS5wdXNoKHQpLHArKywhMH1mdW5jdGlvbiBvKHQpe3ZhciBlPXRvU3RyaW5nLmNhbGwodCk7aWYodm9pZCAwPT09Z1tlXSlyZXR1cm4hMTt2YXIgbj1pKFwiXCIrdCk7aWYodm9pZCAwPT09Z1tlXVtuXSlyZXR1cm4hMTtmb3IodmFyIHI9Z1tlXVtuXSxvPTA7bzxyLmxlbmd0aDsrK28paWYodGhpcy5mRXF1YWxzJiZ0aGlzLmZFcXVhbHMocltvXSx0KXx8cltvXT09PXQpcmV0dXJuIHJbb109dm9pZCAwLHAtLSwhMDtyZXR1cm4hMX1mdW5jdGlvbiBhKCl7dmFyIHQsZT1bXSxuPU9iamVjdC5rZXlzKGcpO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24obil7dD1PYmplY3Qua2V5cyhnW25dKSx0LmZvckVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciBpPWdbbl1bdF0scj0wO3I8aS5sZW5ndGg7KytyKWUucHVzaChpW3JdKX0pfSksZX1mdW5jdGlvbiBzKHQpe2lmKHA8MSlyZXR1cm4hMDtpZih0Lmxlbmd0aDwxKXJldHVybiExO3ZhciBlPWEoKTtmb3IodmFyIG4gaW4gZSlpZighdC5jb250YWlucyhlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB1KHQpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4hMDtpZih0aGlzLmxlbmd0aDx0Lmxlbmd0aClyZXR1cm4hMTt2YXIgZT10LnRvQXJyYXkoKTtmb3IodmFyIGkgaW4gZSlpZighbihlW2ldKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBsKHQpe3ZhciBlPXQudG9BcnJheSgpO2UuZm9yRWFjaChmdW5jdGlvbih0KXtyKHQpfSl9ZnVuY3Rpb24gYyh0KXtpZihwIT09dC5sZW5ndGgpcmV0dXJuITE7dmFyIGU9dC50b0FycmF5KCk7Zm9yKHZhciBpIGluIGUpaWYoIW4oZVtpXSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gaCh0KXtpZigwIT09cClmb3IodmFyIGU9YSgpLG49MDtuPGUubGVuZ3RoOysrbil0LmNvbnRhaW5zKGVbbl0pfHxvKGVbbl0pfWlmKCEodGhpcyBpbnN0YW5jZW9mIHQpKXtmb3IodmFyIGY9bmV3IHQsZD0wO2Q8YXJndW1lbnRzLmxlbmd0aDsrK2QpZi5hZGQoYXJndW1lbnRzW2RdKTtyZXR1cm4gZn12YXIgcD0wLGc9T2JqZWN0LmNyZWF0ZShudWxsKTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcH19KTt2YXIgdj10aGlzO1tdLmZvckVhY2guY2FsbChhcmd1bWVudHMsZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdD92LmZFcXVhbHM9ZTpyKHQpfSksdGhpcy5jb250YWlucz1uLHRoaXMuZXF1YWxzPWMsdGhpcy5hZGQ9cix0aGlzLnJlbW92ZT1vLHRoaXMudG9BcnJheT1hLHRoaXMuaXNTdWJTZXRPZj1zLHRoaXMuaXNTdXBlclNldE9mPXUsdGhpcy51bmlvbldpdGg9bCx0aGlzLmludGVyc2VjdFdpdGg9aH19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5yZXBsYWNlKC9cXC8rJC8sXCJcIikrXCIvXCIrZS5yZXBsYWNlKC9eXFwvKy8sXCJcIil9O2UuZGVmYXVsdD1ufSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBuPWZ1bmN0aW9uKHQpe3JldHVybi9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh0KX07ZS5kZWZhdWx0PW59LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1uKDMpLHI9ZnVuY3Rpb24odCl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0KS5yZXBsYWNlKC8lNDAvZ2ksXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTIwL2csXCIrXCIpLnJlcGxhY2UoLyU1Qi9naSxcIltcIikucmVwbGFjZSgvJTVEL2dpLFwiXVwiKX0sbz1mdW5jdGlvbih0KXt2YXIgZT1bXTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgbz10W25dOygwLGkuaXNQcmVzZW50KShvKSYmZS5wdXNoKHIobikrXCI9XCIrcihvKSl9KSxlLmpvaW4oXCImXCIpfTtlLmRlZmF1bHQ9b30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oODQpLG89aShyKTtlLmRlZmF1bHQ9by5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0KWUuaW5kZXhPZihpKT49MHx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsaSkmJihuW2ldPXRbaV0pO3JldHVybiBufWZ1bmN0aW9uIG8odCxlLG4pe3ZhciBpPWEodCxlLG4pLHU9aS5lbmRwb2ludCxsPXIoaSxbXCJlbmRwb2ludFwiXSksYz0oMCxoLmRlZmF1bHQpKHUsbCkudGhlbihzKTtyZXR1cm4gYihjLG8uZGVmYXVsdHMudGltZW91dCkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIHkucmVqZWN0KHQpfSl9ZnVuY3Rpb24gYSh0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1hcmd1bWVudHNbMl0saT12b2lkIDA7aT0oMCxtLmRlZmF1bHQpKHQpP3Q6KDAsZy5kZWZhdWx0KShvLmRlZmF1bHRzLmJhc2VVUkwsdCk7dmFyIHI9e21ldGhvZDpuLGVuZHBvaW50OmksaGVhZGVyczp4KCl9O3JldHVybiByPWwoe30scixlKSxlLmpzb24mJihyLmhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLThcIixyLmJvZHk9SlNPTi5zdHJpbmdpZnkoZS5qc29uKSksZS5mb3JtJiYoci5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIixyLmJvZHk9KDAsZC5kZWZhdWx0KShlLmZvcm0pKSxlLmJvZHkmJihyLmJvZHk9ZS5ib2R5KSxlLnBhcmFtcyYmKGkrPVwiP1wiKygwLGQuZGVmYXVsdCkobCh7fSxlLnBhcmFtcyxvLmRlZmF1bHRzLnBhcmFtcykpLHIuZW5kcG9pbnQ9aSkscn1mdW5jdGlvbiBzKHQpe3JldHVybiBuZXcgeShmdW5jdGlvbihlLG4pe3ZhciBpPVsyMDQsMjA1XTtpZihpLmluZGV4T2YodC5zdGF0dXMpIT09LTEpcmV0dXJuIGUodC5vayk7aWYodC5vayl7dmFyIHI9dC5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKTtyLmluZGV4T2YoXCJhcHBsaWNhdGlvbi9qc29uXCIpIT09LTEmJmUodC5qc29uKCkpLGUodCl9dmFyIG89bmV3IEVycm9yKHQuc3RhdHVzVGV4dCk7dHJ5e3QuY2xvbmUoKS5qc29uKCkudGhlbihmdW5jdGlvbihlKXtvLmJvZHk9ZSxvLnJlc3BvbnNlPXQsbihvKX0pfWNhdGNoKGUpe28ucmVzcG9uc2U9dCxuKG8pfX0pfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB1PW4oMSksbD11fHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBpIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJih0W2ldPW5baV0pfXJldHVybiB0fSxjPW4oOSksaD1pKGMpLGY9big4MiksZD1pKGYpLHA9big4MCksZz1pKHApLHY9big4MSksbT1pKHYpLHk9XCJ1bmRlZmluZWRcIj09dHlwZW9mIFByb21pc2U/bigxNCkuUHJvbWlzZTpQcm9taXNlLF89ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB5KGZ1bmN0aW9uKGUpe3JldHVybiBzZXRUaW1lb3V0KGUsdCl9KX0sYj1mdW5jdGlvbih0LGUpe3JldHVybiB5LnJhY2UoW3QsXyhlKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEVycm9yKFwi572R57uc6L+e5o6l6LaF5pe2XCIpO3Rocm93IHQuc3RhdHVzQ29kZT00MDgsdH0pXSl9O28uZGVmYXVsdHM9e2Jhc2VVUkw6XCJodHRwczovL2FwaS5pcGFsbWFwLmNvbVwiLHRpbWVvdXQ6MWU0LGhlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIn0scGFyYW1zOnt9fTt2YXIgeD1mdW5jdGlvbigpe3ZhciB0PWwoe30sby5kZWZhdWx0cy5oZWFkZXJzKTtyZXR1cm4gby5kZWZhdWx0cy5qd3QmJih0LkF1dGhvcml6YXRpb249XCJCZWFyZXIgXCIrby5kZWZhdWx0cy5qd3QpLHR9O28uZ2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8odCxlLFwiR0VUXCIpfSxvLmhlYWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LGUsXCJIRUFEXCIpfSxvLm9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LGUsXCJPUFRJT05TXCIpfSxvLnBvc3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LGUsXCJQT1NUXCIpfSxvLnB1dD1mdW5jdGlvbih0LGUpe3JldHVybiBvKHQsZSxcIlBVVFwiKX0sby5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LGUsXCJERUxFVEVcIil9LG8uZGVsPW8uZGVsZXRlLGUuZGVmYXVsdD1vfSxmdW5jdGlvbih0LGUsbil7dmFyIGkscjsoZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSh0KXtzd2l0Y2godGhpcy5jbGVhcigpLGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpicmVhaztjYXNlIDE6dGhpcy5jb3B5KHQpO2JyZWFrO2RlZmF1bHQ6dSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHModCl7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLG49ZS5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpO3JldHVyblwiZG9td2luZG93XCIhPT1ufHx0P246dCtcIlwifWZ1bmN0aW9uIHUodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rPTIpdC5zZXQoZVtuXSxlW24rMV0pfWZ1bmN0aW9uIGwodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXN9fWZ1bmN0aW9uIGModCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITF9KX1mdW5jdGlvbiBoKHQsZSl7dGhpcy54PXQsdGhpcy55PWV9ZnVuY3Rpb24gZih0LGUpe3RoaXMuZmlyc3RQb2ludD10LHRoaXMuc2Vjb25kUG9pbnQ9ZX1mdW5jdGlvbiBkKHQsZSl7dGhpcy5zY29wZT10LHRoaXMuaW50ZXJjZXB0PWV9ZnVuY3Rpb24gcCh0LGUpe3RoaXMuZmlyc3RMaW5lPXQsdGhpcy5zZWNvbmRMaW5lPWV9ZnVuY3Rpb24gZyh0LGUpe3RoaXMuY2VudGVyPXQsdGhpcy5yYWRpdXM9ZX1mdW5jdGlvbiB2KHQsZSl7dGhpcy5maXJzdENpcmNsZT10LHRoaXMuc2Vjb25kQ2lyY2xlPWV9ZnVuY3Rpb24gbSh0LGUsbixpLHIsbyxhLHMsdSxsLGMpe3RoaXMuYmVhY29uSWQ9dCx0aGlzLm1hcElkPWUsdGhpcy5zY2VuZUlkPW4sdGhpcy5mbG9vcklkPWksdGhpcy51dWlkPXIsdGhpcy5tYWpvcj1vLHRoaXMubWlub3I9YSx0aGlzLng9cyx0aGlzLnk9dSx0aGlzLmF0dGVuPWwsdGhpcy5sb3NzQ29lPWN9ZnVuY3Rpb24geSh0LGUsbixpKXt0aGlzLnV1aWQ9dCx0aGlzLm1ham9yPWUsdGhpcy5taW5vcj1uLHRoaXMuZGlzdGFuY2U9aX1mdW5jdGlvbiBfKCl7fWZ1bmN0aW9uIGIodCl7cmV0dXJuIHRoaXMucnNzaUJvdW5kYXJ5PXQmJnQucnNzaUJvdW5kYXJ5P3QucnNzaUJvdW5kYXJ5OjEwLHRoaXMuZGlzdEJvdW5kYXJ5PXQmJnQuZGlzdEJvdW5kYXJ5P3QuZGlzdEJvdW5kYXJ5OjYsdGhpc31mdW5jdGlvbiB4KCl7fXZhciB3PWEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjphLGdldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhW3RoaXMuaGFzaCh0KV07cmV0dXJuIGUmJmVbMV19LHB1dDpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuaGFzaCh0KTtuIGluIHRoaXMuX2RhdGF8fHRoaXMuX2NvdW50KyssdGhpcy5fZGF0YVtuXT1bdCxlXX0sbXVsdGk6ZnVuY3Rpb24oKXt1KHRoaXMsYXJndW1lbnRzKX0sY29weTpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdC5fZGF0YSllIGluIHRoaXMuX2RhdGF8fHRoaXMuX2NvdW50KyssdGhpcy5fZGF0YVtlXT10Ll9kYXRhW2VdfSxjb250YWluc0tleTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmhhc2godCksbj1lIGluIHRoaXMuX2RhdGE7cmV0dXJuIG59LHNlYXJjaDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fZGF0YSlpZih0aGlzLl9kYXRhW2VdWzFdPT09dClyZXR1cm4gdGhpcy5fZGF0YVtlXVswXTtyZXR1cm4gbnVsbH0scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaGFzaCh0KTtlIGluIHRoaXMuX2RhdGEmJih0aGlzLl9jb3VudC0tLGRlbGV0ZSB0aGlzLl9kYXRhW2VdKX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiAwPT10aGlzLl9jb3VudH0sa2V5QXJyYXk6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7dC5wdXNoKG4pfSksdH0sdmFsdWVzOmZ1bmN0aW9uIHQoKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QucHVzaChlKX0pLHR9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY291bnR9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT17fSx0aGlzLl9jb3VudD0wfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgYSh0aGlzKX0saGFzaDpmdW5jdGlvbih0KXtzd2l0Y2gocyh0KSl7Y2FzZVwidW5kZWZpbmVkXCI6Y2FzZVwibnVsbFwiOmNhc2VcImJvb2xlYW5cIjpjYXNlXCJudW1iZXJcIjpjYXNlXCJyZWdleHBcIjpyZXR1cm4gdCtcIlwiO2Nhc2VcImRhdGVcIjpyZXR1cm5cIuKZo1wiK3QuZ2V0VGltZSgpO2Nhc2VcInN0cmluZ1wiOnJldHVyblwi4pmgXCIrdDtjYXNlXCJhcnJheVwiOmZvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZVtuXT10aGlzLmhhc2godFtuXSk7cmV0dXJuXCLimaVcIitlLmpvaW4oXCLigZ5cIik7ZGVmYXVsdDpyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eShcIl9obXVpZF9cIil8fCh0Ll9obXVpZF89KythLnVpZCxjKHQsXCJfaG11aWRfXCIpKSxcIuKZplwiK3QuX2htdWlkX319LGZvckVhY2g6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gdGhpcy5fZGF0YSl7dmFyIGk9dGhpcy5fZGF0YVtuXTt0LmNhbGwoZXx8dGhpcyxpWzFdLGlbMF0pfX19O2EudWlkPTA7Zm9yKHZhciBFIGluIHcpaWYoXCJjb25zdHJ1Y3RvclwiIT09RSYmdy5oYXNPd25Qcm9wZXJ0eShFKSl7dmFyIFM9d1tFXTtTLnRvU3RyaW5nKCkuaW5kZXhPZihcInJldHVybiBcIik9PT0tMSYmKHdbRV09bChTKSl9aC5wcm90b3R5cGUuc2V0UG9pbnQ9ZnVuY3Rpb24odCxlKXt0aGlzLng9dCx0aGlzLnk9ZX0sZi5wcm90b3R5cGUuc2V0UG9pbnRzPWZ1bmN0aW9uKHQsZSl7dGhpcy5maXJzdFBvaW50PXQsdGhpcy5zZWNvbmRQb2ludD1lfSxmLnByb3RvdHlwZS5nZXRSZWxhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmlyc3RQb2ludC54PT10aGlzLnNlY29uZFBvaW50Lng/MTA6MjAsZT10aGlzLmZpcnN0UG9pbnQueT09dGhpcy5zZWNvbmRQb2ludC55PzE6MixuPXQrZSxpPTA7c3dpdGNoKG4pe2Nhc2UgMTE6aT0xO2JyZWFrO2Nhc2UgMTI6aT0yO2JyZWFrO2Nhc2UgMjE6aT0zO2JyZWFrO2Nhc2UgMjI6aT00fXJldHVybiBpfSxmLnByb3RvdHlwZS5nZXREaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQoKHRoaXMuZmlyc3RQb2ludC54LXRoaXMuc2Vjb25kUG9pbnQueCkqKHRoaXMuZmlyc3RQb2ludC54LXRoaXMuc2Vjb25kUG9pbnQueCkrKHRoaXMuZmlyc3RQb2ludC55LXRoaXMuc2Vjb25kUG9pbnQueSkqKHRoaXMuZmlyc3RQb2ludC55LXRoaXMuc2Vjb25kUG9pbnQueSkpfSxkLnByb3RvdHlwZS5zZXRMaW5lPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY29wZT10LHRoaXMuaW50ZXJjZXB0PWV9LGQucHJvdG90eXBlLmxpbmVHZW5lcmF0ZUJ5VHdvUG9pbnRzPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY29wZT0odC55LWUueSkvKHQueC1lLngpLHRoaXMuaW50ZXJjZXB0PXQueS10aGlzLnNjb3BlKnQueH0sZC5wcm90b3R5cGUubGluZUdlbmVyYXRlQnlQb2ludFNjb3BlPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY29wZT1lLHRoaXMuaW50ZXJjZXB0PXQueS1lKnQueH0scC5wcm90b3R5cGUuc2V0TGluZXM9ZnVuY3Rpb24odCxlKXt0aGlzLmZpcnN0TGluZT10LHRoaXMuc2Vjb25kTGluZT1lfSxwLnByb3RvdHlwZS5nZXRSZWxhdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZmlyc3RMaW5lLnNjb3BlPT10aGlzLnNlY29uZExpbmUuc2NvcGU/MTA6MjAsZT10aGlzLmZpcnN0TGluZS5pbnRlcmNlcHQ9PXRoaXMuc2Vjb25kTGluZS5pbnRlcmNlcHQ/MToyLG49dCtlLGk9MDtzd2l0Y2gobil7Y2FzZSAxMTppPTE7YnJlYWs7Y2FzZSAxMjppPTI7YnJlYWs7Y2FzZSAyMTppPTM7YnJlYWs7Y2FzZSAyMjppPTR9cmV0dXJuIGl9LHAucHJvdG90eXBlLmluc2VjdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0UmVsYXRpb24oKSxlPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3N3aXRjaCh0KXtjYXNlIDM6ZS5zZXRQb2ludCgwLHRoaXMuZmlyc3RMaW5lLmludGVyY2VwdCk7YnJlYWs7Y2FzZSA0OnZhciBuPSh0aGlzLnNlY29uZExpbmUuaW50ZXJjZXB0LXRoaXMuZmlyc3RMaW5lLmludGVyY2VwdCkvKHRoaXMuZmlyc3RMaW5lLnNjb3BlLXRoaXMuc2Vjb25kTGluZS5zY29wZSksaT10aGlzLmZpcnN0TGluZS5zY29wZSpuK3RoaXMuZmlyc3RMaW5lLmludGVyY2VwdDtlLnNldFBvaW50KG4saSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhcIm5vIGNyb3NzUG9pbnQgYmV0d2VlbiBsaW5lc1wiKX1yZXR1cm4gZX0sZy5wcm90b3R5cGUuc2V0Q2lyY2xlPWZ1bmN0aW9uKHQsZSl7dGhpcy5jZW50ZXI9dCx0aGlzLnJhZGl1cz1lfSx2LnByb3RvdHlwZS5zZXRDaXJjbGVzPWZ1bmN0aW9uKHQsZSl7dGhpcy5maXJzdENpcmNsZT10LHRoaXMuc2Vjb25kQ2lyY2xlPWV9LHYucHJvdG90eXBlLmdldFJlbGF0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5maXJzdENpcmNsZS5jZW50ZXI9PXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlcj8xOjIsZT10aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cz09dGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzPzEwOjIwLG49dCtlLGk9MDtzd2l0Y2gobil7Y2FzZSAxMTppPTE7YnJlYWs7Y2FzZSAxMjppPTI7YnJlYWs7Y2FzZSAyMTppPTM7YnJlYWs7Y2FzZSAyMjppPTR9cmV0dXJuIGl9LHYucHJvdG90eXBlLmluc2VjdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksZT0wO2U8MjtlKyspdFtlXT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKTt2YXIgbj1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTtuLnNldFBvaW50cyh0aGlzLmZpcnN0Q2lyY2xlLmNlbnRlcix0aGlzLnNlY29uZENpcmNsZS5jZW50ZXIpO3ZhciBpPW4uZ2V0UmVsYXRpb24oKTtyZXR1cm4gdD10aGlzLmxvY2F0aW9uT3B0aW9uKGkpfSx2LnByb3RvdHlwZS5sb2NhdGlvbk9wdGlvbj1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSAxOnJldHVybiB0aGlzLkNlbnRlclhZRXF1YWwoKTtjYXNlIDI6cmV0dXJuIHRoaXMuQ2VudGVyWEVxdWFsKCk7Y2FzZSAzOnJldHVybiB0aGlzLkNlbnRlcllFcXVhbCgpO2Nhc2UgNDpyZXR1cm4gdGhpcy5DZW50ZXJOb0VxdWFsKCk7ZGVmYXVsdDpyZXR1cm4gMX19LHYucHJvdG90eXBlLkNlbnRlclhZRXF1YWw9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJ0aGUgY2VudGVycyBvZiB0aGUgY2lyY2xlIGFyZSB0aGUgc2FtZSFcIik7Zm9yKHZhciB0PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxlPTA7ZTwyO2UrKyl0W2VdPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3JldHVybiB0WzBdPUMsdFsxXT1DLHR9LHYucHJvdG90eXBlLkNlbnRlclhFcXVhbD1mdW5jdGlvbigpe2Zvcih2YXIgdD1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksZT0wO2U8MjtlKyspdFtlXT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKTt2YXIgbj0wLGk9TWF0aC5hYnModGhpcy5maXJzdENpcmNsZS5jZW50ZXIueS10aGlzLnNlY29uZENpcmNsZS5jZW50ZXIueSk7cmV0dXJuIHRoaXMuZmlyc3RDaXJjbGUuY2VudGVyLnk8dGhpcy5zZWNvbmRDaXJjbGUuY2VudGVyLnk/KG49KE1hdGgucG93KGksMikrTWF0aC5wb3codGhpcy5maXJzdENpcmNsZS5yYWRpdXMsMiktTWF0aC5wb3codGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzLDIpKS8oMip0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cyppKSx0WzBdLnk9dGhpcy5maXJzdENpcmNsZS5jZW50ZXIueSt0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cypuLHRbMV0ueT10WzBdLnksdFswXS54PXRoaXMuZmlyc3RDaXJjbGUuY2VudGVyLngrdGhpcy5maXJzdENpcmNsZS5yYWRpdXMqTWF0aC5zcXJ0KDEtTWF0aC5wb3cobiwyKSksdFsxXS54PXRoaXMuZmlyc3RDaXJjbGUuY2VudGVyLngtdGhpcy5maXJzdENpcmNsZS5yYWRpdXMqTWF0aC5zcXJ0KDEtTWF0aC5wb3cobiwyKSkpOihuPShNYXRoLnBvdyhpLDIpK01hdGgucG93KHRoaXMuc2Vjb25kQ2lyY2xlLnJhZGl1cywyKS1NYXRoLnBvdyh0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cywyKSkvKDIqdGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzKmkpLHRbMF0ueT10aGlzLnNlY29uZENpcmNsZS5jZW50ZXIueSt0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMqbix0WzFdLnk9dFswXS55LHRbMF0ueD10aGlzLnNlY29uZENpcmNsZS5jZW50ZXIueCt0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMqTWF0aC5zcXJ0KDEtTWF0aC5wb3cobiwyKSksdFsxXS54PXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlci54LXRoaXMuc2Vjb25kQ2lyY2xlLnJhZGl1cypNYXRoLnNxcnQoMS1NYXRoLnBvdyhuLDIpKSksdH0sdi5wcm90b3R5cGUuQ2VudGVyWUVxdWFsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxlPTA7ZTwzO2UrKyl0W2VdPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3ZhciBuPTAsaT1NYXRoLmFicyh0aGlzLmZpcnN0Q2lyY2xlLmNlbnRlci54LXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlci54KTtyZXR1cm4gdGhpcy5maXJzdENpcmNsZS5jZW50ZXIueDx0aGlzLnNlY29uZENpcmNsZS5jZW50ZXIueD8obj0oTWF0aC5wb3coaSwyKStNYXRoLnBvdyh0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cywyKS1NYXRoLnBvdyh0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMsMikpLygyKnRoaXMuZmlyc3RDaXJjbGUucmFkaXVzKmkpLHRbMF0ueD10aGlzLmZpcnN0Q2lyY2xlLmNlbnRlci54K3RoaXMuZmlyc3RDaXJjbGUucmFkaXVzKm4sdFsxXS54PXRbMF0ueCx0WzBdLnk9dGhpcy5maXJzdENpcmNsZS5jZW50ZXIueSt0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cypNYXRoLnNxcnQoMS1NYXRoLnBvdyhuLDIpKSx0WzFdLnk9dGhpcy5maXJzdENpcmNsZS5jZW50ZXIueS10aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cypNYXRoLnNxcnQoMS1NYXRoLnBvdyhuLDIpKSk6KG49KE1hdGgucG93KGksMikrTWF0aC5wb3codGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzLDIpLU1hdGgucG93KHRoaXMuZmlyc3RDaXJjbGUucmFkaXVzLDIpKS8oMip0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMqaSksdFswXS54PXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlci54K3RoaXMuc2Vjb25kQ2lyY2xlLnJhZGl1cypuLHRbMV0ueD10WzBdLngsdFswXS55PXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlci55K3RoaXMuc2Vjb25kQ2lyY2xlLnJhZGl1cypNYXRoLnNxcnQoMS1NYXRoLnBvdyhuLDIpKSx0WzFdLnk9dGhpcy5zZWNvbmRDaXJjbGUuY2VudGVyLnktdGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzKk1hdGguc3FydCgxLU1hdGgucG93KG4sMikpKSx0fSx2LnByb3RvdHlwZS5DZW50ZXJOb0VxdWFsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxlPTA7ZTwyO2UrKyl0W2VdPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3ZhciBuLGkscixvLGEscyx1PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxsPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxjPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxkPU9iamVjdC5jcmVhdGUoXy5wcm90b3R5cGUpO2ZvcihlPTA7ZTwzO2UrKyljW2VdPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO3JldHVybiBjWzBdLnNldFBvaW50cyh0aGlzLmZpcnN0Q2lyY2xlLmNlbnRlcix0aGlzLnNlY29uZENpcmNsZS5jZW50ZXIpLG49Mip0aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cyoodGhpcy5maXJzdENpcmNsZS5jZW50ZXIueC10aGlzLnNlY29uZENpcmNsZS5jZW50ZXIueCksaT0yKnRoaXMuZmlyc3RDaXJjbGUucmFkaXVzKih0aGlzLmZpcnN0Q2lyY2xlLmNlbnRlci55LXRoaXMuc2Vjb25kQ2lyY2xlLmNlbnRlci55KSxyPXRoaXMuc2Vjb25kQ2lyY2xlLnJhZGl1cyp0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMtdGhpcy5maXJzdENpcmNsZS5yYWRpdXMqdGhpcy5maXJzdENpcmNsZS5yYWRpdXMtY1swXS5nZXREaXN0YW5jZSgpKmNbMF0uZ2V0RGlzdGFuY2UoKSxvPW4qbitpKmksYT0tMipuKnIscz1yKnItaSppLHVbMF09KE1hdGguc3FydChhKmEtNCpvKnMpLWEpLygyKm8pLHVbMV09KC1NYXRoLnNxcnQoYSphLTQqbypzKS1hKS8oMipvKSxsWzBdPU1hdGguc3FydCgxLXVbMF0qdVswXSksbFsxXT1NYXRoLnNxcnQoMS11WzFdKnVbMV0pLHRbMF0ueD10aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cyp1WzBdK3RoaXMuZmlyc3RDaXJjbGUuY2VudGVyLngsdFsxXS54PXRoaXMuZmlyc3RDaXJjbGUucmFkaXVzKnVbMV0rdGhpcy5maXJzdENpcmNsZS5jZW50ZXIueCx0WzBdLnk9dGhpcy5maXJzdENpcmNsZS5yYWRpdXMqbFswXSt0aGlzLmZpcnN0Q2lyY2xlLmNlbnRlci55LHRbMV0ueT10aGlzLmZpcnN0Q2lyY2xlLnJhZGl1cypsWzFdK3RoaXMuZmlyc3RDaXJjbGUuY2VudGVyLnksY1sxXS5zZXRQb2ludHModFswXSx0aGlzLnNlY29uZENpcmNsZS5jZW50ZXIpLGNbMl0uc2V0UG9pbnRzKHRbMV0sdGhpcy5zZWNvbmRDaXJjbGUuY2VudGVyKSxkLnZhckVxdWFscyhjWzFdLmdldERpc3RhbmNlKCksdGhpcy5zZWNvbmRDaXJjbGUucmFkaXVzKXx8KHRbMF0ueT10aGlzLmZpcnN0Q2lyY2xlLmNlbnRlci55LXRoaXMuZmlyc3RDaXJjbGUucmFkaXVzKmxbMF0pLGQudmFyRXF1YWxzKGNbMl0uZ2V0RGlzdGFuY2UoKSx0aGlzLnNlY29uZENpcmNsZS5yYWRpdXMpfHwodFsxXS55PXRoaXMuZmlyc3RDaXJjbGUuY2VudGVyLnktdGhpcy5maXJzdENpcmNsZS5yYWRpdXMqbFsxXSksZC52YXJFcXVhbHModFswXS55LHRbMV0ueSkmJmQudmFyRXF1YWxzKHRbMF0ueCx0WzFdLngpJiYodFswXS55PjA/dFsxXS55PS10WzFdLnk6dFswXS55PS10WzBdLnkpLHR9LF8ucHJvdG90eXBlLnZhckVxdWFscz1mdW5jdGlvbih0LGUpe3ZhciBuPS4wMDE7cmV0dXJuIHQuY29uc3RydWN0b3I9PU51bWJlciYmZS5jb25zdHJ1Y3Rvcj09TnVtYmVyP01hdGguYWJzKHQtZSk8bjooY29uc29sZS5sb2coXCJ0eXBlIGVycm9yIVwiKSwtMSl9LF8ucHJvdG90eXBlLnNvcnRSdWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQtZX0sXy5wcm90b3R5cGUuY2FsY0Rpc3RCeVJzc2k9ZnVuY3Rpb24odCxlLG4pe3ZhciBpPU1hdGguYWJzKHQpLHI9TWF0aC5hYnMoZSksbz0oaS1yKS8oMTAqbik7cmV0dXJuIE1hdGgucG93KDEwLG8pfSxiLnByb3RvdHlwZS5zZXRCb3VuZGFyaWVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJzc2lCb3VuZGFyeT10JiZ0LnJzc2lCb3VuZGFyeT90LnJzc2lCb3VuZGFyeTp0aGlzLnJzc2lCb3VuZGFyeT90aGlzLnJzc2lCb3VuZGFyeToxMCx0aGlzLmRpc3RCb3VuZGFyeT10JiZ0LmRpc3RCb3VuZGFyeT90LmRpc3RCb3VuZGFyeTp0aGlzLmRpc3RCb3VuZGFyeT90aGlzLmRpc3RCb3VuZGFyeTo2LHRoaXN9LGIucHJvdG90eXBlLnJzc2lGaWx0ZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdDwwJiZ0PmUtdGhpcy5yc3NpQm91bmRhcnl9LGIucHJvdG90eXBlLmRpc3RhbmNlRmlsdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PjAmJnQ8dGhpcy5kaXN0Qm91bmRhcnl9LGIucHJvdG90eXBlLmxvY2F0aW9uRmlsdGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKSxyPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLG89NDtuLng9KHRbMF0ueCt0WzFdLngrdFsyXS54KS8zLG4ueT0odFswXS55K3RbMV0ueSt0WzJdLnkpLzMsaS5zZXRQb2ludHMobixlKTt2YXIgYT1pLmdldERpc3RhbmNlKCk7cmV0dXJuIGE+bz8oci54PW4ueCsoZS54LW4ueCkqKG8vYSksci55PW4ueSsoZS55LW4ueSkqKG8vYSkscik6ZX0sYi5wcm90b3R5cGUuaGlzdG9yeUxvY2F0aW9uRmlsdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpLG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSk7ZS5zZXRQb2ludHModCxJKTt2YXIgaT0yLHI9ZS5nZXREaXN0YW5jZSgpO3JldHVybiByPD1pfHwwPT1JLngmJjA9PUkueT8oST10LHQpOihuLng9SS54KyhJLngtdC54KSooaS9yKSxuLnk9SS55KyhJLnktdC55KSooaS9yKSxJPW4sbil9LHgucHJvdG90eXBlLnBhcnNlSW5mbz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIEpTT04ucGFyc2UodCl9Y2F0Y2godCl7cmV0dXJuIHR9fSx4LnByb3RvdHlwZS5zdHJpbmdpZnlJbmZvPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9Y2F0Y2godCl7cmV0dXJuIHR9fTt2YXIgTT17QkVBQ09OX1VTRV9OVU06XCIzXCIsRElTX0E6XCIwXCIsRElTX0I6XCIxXCIsRElTX0M6XCIyXCJ9LEM9bmV3IGgoLTFlMywtMWUzKSxJPW5ldyBoKDAsMCksTz1mdW5jdGlvbih0LGUpe3RoaXMuQmVhY29uc0NmZz10LHRoaXMuYmxlQ29uZmlnPWUsdGhpcy5ibGVMb2NhdGlvbkluZm89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cmV0dXJuIHZvaWQgMD09biYmKG49bmV3IGUpLG59ZnVuY3Rpb24gZSgpe3JldHVybiBlLmluc3RhbmNlPXt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpbe3R5cGU6XCJGZWF0dXJlXCIscHJvcGVydGllczp7Zmxvb3JfaWQ6MH0sZ2VvbWV0cnk6e3R5cGU6XCJQb2ludFwiLGNvb3JkaW5hdGVzOlswLDBdfX1dfSxlLmluc3RhbmNlfXZhciBuO3JldHVybntnZXRJbnN0YW5jZTp0fX0oKSx0aGlzLmJsZUxvY2F0aW9uSW5mb0luc3RhbmNlPXRoaXMuYmxlTG9jYXRpb25JbmZvLmdldEluc3RhbmNlKCksdGhpcy5ibGVMb2NhdGlvblN0cmF0ZWd5PWZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByO3N3aXRjaCh0KXtjYXNlIDE6cj1cImJlYWNvbk51bUVxdWFsT25lXCI7YnJlYWs7Y2FzZSAyOnI9XCJiZWFjb25OdW1FcXVhbFR3b1wiO2JyZWFrO2Nhc2UgMzpyPVwiYmVhY29uTnVtRXF1YWxUaHJlZVwiO2JyZWFrO2RlZmF1bHQ6cj1cImJlYWNvbk51bU1vcmVUaGFuVGhyZWVcIn12YXIgbz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksbz0wO288TS5CRUFDT05fVVNFX05VTTtvKyspcltvXT1PYmplY3QuY3JlYXRlKGYucHJvdG90eXBlKTtyWzBdLnNldFBvaW50cyh0WzBdLHRbMV0pLHJbMV0uc2V0UG9pbnRzKHRbMF0sdFsyXSksclsyXS5zZXRQb2ludHModFsxXSx0WzJdKSxuWzBdPXJbMF0uZ2V0RGlzdGFuY2UoKSxuWzFdPXJbMV0uZ2V0RGlzdGFuY2UoKSxuWzJdPXJbMl0uZ2V0RGlzdGFuY2UoKSxpWzBdPWVbTS5ESVNfQV0rZVtNLkRJU19CXSxpWzFdPWVbTS5ESVNfQV0rZVtNLkRJU19DXSxpWzJdPWVbTS5ESVNfQl0rZVtNLkRJU19DXSxpWzNdPU1hdGguYWJzKGVbTS5ESVNfQV0tZVtNLkRJU19CXSksaVs0XT1NYXRoLmFicyhbTS5ESVNfQV0tZVtNLkRJU19DXSksaVs1XT1NYXRoLmFicyhlW00uRElTX0JdLWVbTS5ESVNfQ10pO3ZhciBhLHM9KG5bMF0+aVswXT8zMDA6blswXTxpWzNdPzEwMDoyMDAsblsxXT5pWzFdPzMwOm5bMV08aVs0XT8xMDoyMCxuWzJdPmlbMl0/MzpuWzJdPGlbNV0/MToyLDMzMyk7c3dpdGNoKHMpe2Nhc2UgMzMzOmE9XCJhbGxEZXZpYXRpb25cIixjb25zb2xlLmluZm8oXCJDMC1DMSBDMC1DMiBDMS1DMlwiKTticmVhaztjYXNlIDIyMjphPVwiZGlzV2VpZ2h0QWxnXCIsY29uc29sZS5pbmZvKFwiQzArQzEgQzArQzIgQzErQzJcIik7YnJlYWs7Y2FzZSAyMzM6YT1cIkNpclR3b0RldmlhdGlvblwiLGNvbnNvbGUuaW5mbyhcIkMwK0MxIEMwLUMyIEMxLUMyXCIpO2JyZWFrO2Nhc2UgMzIzOmE9XCJDaXJPbmVEZXZpYXRpb25cIixjb25zb2xlLmluZm8oXCJDMC1DMSBDMCtDMiBDMS1DMlwiKTticmVhaztjYXNlIDMzMjphPVwiQ2lyWmVyb0RldmlhdGlvblwiLGNvbnNvbGUuaW5mbyhcIkMwLUMxIEMwLUMyIEMxK0MyXCIpO2JyZWFrO2Nhc2UgMjIxOmNhc2UgMjIzOmE9XCJDaXJPbmVUd29EZXZpYXRpb25cIixjb25zb2xlLmluZm8oXCJDMCtDMSBDMCtDMiBDMS0mQzJcIik7YnJlYWs7Y2FzZSAyMTI6Y2FzZSAyMzI6YT1cIkNpclplcm9Ud29EZXZpYXRpb25cIixjb25zb2xlLmluZm8oXCJDMCtDMSBDMC0mQzIgQzErQzJcIik7YnJlYWs7Y2FzZSAxMjI6Y2FzZSAzMjI6YT1cIkNpclplcm9PbmVEZXZpYXRpb25cIixjb25zb2xlLmluZm8oXCJDMC0mQzEgQzArQzIgQzErQzJcIik7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhcIm5vIFJlc3VsdCFcIil9dmFyIHU9e2FsbERldmlhdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksaT0wLHI9MCxvPTAsYT0wO2E8MzsrK2EpaSs9MS9lW2FdO2Zvcih2YXIgcz0wO3M8MzsrK3MpbltzXT0xL2Vbc10vaTtmb3IodmFyIHU9T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksbD0wO2w8MzsrK2wpcis9bltsXSp0W2xdLngsbys9bltsXSp0W2xdLnk7cmV0dXJuIHUuc2V0UG9pbnQocixvKSx1fSxkaXNXZWlnaHRBbGc6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscz0wO3M8TS5CRUFDT05fVVNFX05VTTtzKyspaVtzXT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxyW3NdPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpO2lbMF0uc2V0Q2lyY2xlKHRbMF0sZVtNLkRJU19BXSksaVsxXS5zZXRDaXJjbGUodFsxXSxlW00uRElTX0JdKSxpWzJdLnNldENpcmNsZSh0WzJdLGVbTS5ESVNfQ10pLHJbMF0uc2V0Q2lyY2xlcyhpWzBdLGlbMV0pLHJbMV0uc2V0Q2lyY2xlcyhpWzBdLGlbMl0pLHJbMl0uc2V0Q2lyY2xlcyhpWzFdLGlbMl0pLGFbMF09clswXS5pbnNlY3QoKSxhWzFdPXJbMV0uaW5zZWN0KCksYVsyXT1yWzJdLmluc2VjdCgpO3ZhciB1PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKTtmb3Iocz0wO3M8MipOdW1iZXIoTS5CRUFDT05fVVNFX05VTSk7cysrKXVbc109T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7cmV0dXJuIHVbMF0uc2V0UG9pbnRzKGFbMF1bMF0sdFsyXSksdVsxXS5zZXRQb2ludHMoYVswXVsxXSx0WzJdKSx1WzJdLnNldFBvaW50cyhhWzFdWzBdLHRbMV0pLHVbM10uc2V0UG9pbnRzKGFbMV1bMV0sdFsxXSksdVs0XS5zZXRQb2ludHMoYVsyXVswXSx0WzBdKSx1WzVdLnNldFBvaW50cyhhWzJdWzFdLHRbMF0pLHVbMF0uZ2V0RGlzdGFuY2UoKTx1WzFdLmdldERpc3RhbmNlKCk/b1swXT1hWzBdWzBdOm9bMF09YVswXVsxXSx1WzJdLmdldERpc3RhbmNlKCk8dVszXS5nZXREaXN0YW5jZSgpP29bMV09YVsxXVswXTpvWzFdPWFbMV1bMV0sdVs0XS5nZXREaXN0YW5jZSgpPHVbNV0uZ2V0RGlzdGFuY2UoKT9vWzJdPWFbMl1bMF06b1syXT1hWzJdWzFdLG4ueD0ob1swXS54LyhlW00uRElTX0FdKmVbTS5ESVNfQV0pK29bMV0ueC8oZVtNLkRJU19CXSplW00uRElTX0JdKStvWzJdLngvKGVbTS5ESVNfQ10qZVtNLkRJU19DXSkpLygxLyhlW00uRElTX0FdKmVbTS5ESVNfQV0pKzEvKGVbTS5ESVNfQl0qZVtNLkRJU19CXSkrMS8oZVtNLkRJU19DXSplW00uRElTX0NdKSksbi55PShvWzBdLnkvKGVbTS5ESVNfQV0qZVtNLkRJU19BXSkrb1sxXS55LyhlW00uRElTX0JdKmVbTS5ESVNfQl0pK29bMl0ueS8oZVtNLkRJU19DXSplW00uRElTX0NdKSkvKDEvKGVbTS5ESVNfQV0qZVtNLkRJU19BXSkrMS8oZVtNLkRJU19CXSplW00uRElTX0JdKSsxLyhlW00uRElTX0NdKmVbTS5ESVNfQ10pKSxufSxDaXJaZXJvRGV2aWF0aW9uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGk9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLHI9T2JqZWN0LmNyZWF0ZSh2LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT0wO2E8MjthKyspaVthXT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxvW2FdPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO2lbMF0uc2V0Q2lyY2xlKHRbMV0sZVsxXSksaVsxXS5zZXRDaXJjbGUodFsyXSxlWzJdKSxyLnNldENpcmNsZXMoaVswXSxpWzFdKTt2YXIgcz1yLmluc2VjdCgpO3JldHVybiBvWzBdLnNldFBvaW50cyhzWzBdLHRbMF0pLG9bMV0uc2V0UG9pbnRzKHNbMV0sdFswXSksbj1vWzBdLmdldERpc3RhbmNlKCk8b1sxXS5nZXREaXN0YW5jZSgpP3NbMF06c1sxXX0sQ2lyT25lRGV2aWF0aW9uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGk9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLHI9T2JqZWN0LmNyZWF0ZSh2LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT0wO2E8MjthKyspaVthXT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxvW2FdPU9iamVjdC5jcmVhdGUoZi5wcm90b3R5cGUpO2lbMF0uc2V0Q2lyY2xlKHRbMF0sZVswXSksaVsxXS5zZXRDaXJjbGUodFsyXSxlWzJdKSxyLnNldENpcmNsZXMoaVswXSxpWzFdKTt2YXIgcz1yLmluc2VjdCgpO3JldHVybiBvWzBdLnNldFBvaW50cyhzWzBdLHRbMV0pLG9bMV0uc2V0UG9pbnRzKHNbMV0sdFsxXSksbj1vWzBdLmdldERpc3RhbmNlKCk8b1sxXS5nZXREaXN0YW5jZSgpP3NbMF06c1sxXX0sQ2lyVHdvRGV2aWF0aW9uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLGk9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLHI9T2JqZWN0LmNyZWF0ZSh2LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT0wO2E8MjthKyspaVthXT1PYmplY3QuY3JlYXRlKGcucHJvdG90eXBlKSxcbm9bYV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7aVswXS5zZXRDaXJjbGUodFswXSxlWzBdKSxpWzFdLnNldENpcmNsZSh0WzFdLGVbMV0pLHIuc2V0Q2lyY2xlcyhpWzBdLGlbMV0pO3ZhciBzPXIuaW5zZWN0KCk7cmV0dXJuIG9bMF0uc2V0UG9pbnRzKHNbMF0sdFsyXSksb1sxXS5zZXRQb2ludHMoc1sxXSx0WzJdKSxuPW9bMF0uZ2V0RGlzdGFuY2UoKTxvWzFdLmdldERpc3RhbmNlKCk/c1swXTpzWzFdfSxDaXJPbmVUd29EZXZpYXRpb246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksdT0wO3U8Mjt1KyspaVt1XT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSxvW3VdPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLGFbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDM7dSsrKXJbdV09T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDQ7dSsrKXNbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7cmV0dXJuIHJbMF0uc2V0Q2lyY2xlKHRbMF0sZVswXSksclsxXS5zZXRDaXJjbGUodFsxXSxlWzFdKSxyWzJdLnNldENpcmNsZSh0WzJdLGVbMl0pLG9bMF0uc2V0Q2lyY2xlcyhyWzBdLHJbMV0pLG9bMV0uc2V0Q2lyY2xlcyhyWzBdLHJbMl0pLGFbMF09b1swXS5pbnNlY3QoKSxhWzFdPW9bMV0uaW5zZWN0KCksc1swXS5zZXRQb2ludHMoYVswXVswXSx0WzJdKSxzWzFdLnNldFBvaW50cyhhWzBdWzFdLHRbMl0pLHNbMl0uc2V0UG9pbnRzKGFbMV1bMF0sdFsxXSksc1szXS5zZXRQb2ludHMoYVsxXVsxXSx0WzFdKSxzWzBdLmdldERpc3RhbmNlKCk8c1sxXS5nZXREaXN0YW5jZSgpP2lbMF09YVswXVswXTppWzBdPWFbMF1bMV0sc1syXS5nZXREaXN0YW5jZSgpPHNbM10uZ2V0RGlzdGFuY2UoKT9pWzFdPWFbMV1bMF06aVsxXT1hWzFdWzFdLG4uc2V0UG9pbnQoKGlbMF0ueCtpWzFdLngpLzIsKGlbMF0ueStpWzFdLnkpLzIpLG59LENpclplcm9Ud29EZXZpYXRpb246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksdT0wO3U8Mjt1KyspaVt1XT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSxvW3VdPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLGFbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDM7dSsrKXJbdV09T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDQ7dSsrKXNbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7cmV0dXJuIHJbMF0uc2V0Q2lyY2xlKHRbMF0sZVswXSksclsxXS5zZXRDaXJjbGUodFsxXSxlWzFdKSxyWzJdLnNldENpcmNsZSh0WzJdLGVbMl0pLG9bMF0uc2V0Q2lyY2xlcyhyWzBdLHJbMV0pLG9bMV0uc2V0Q2lyY2xlcyhyWzFdLHJbMl0pLGFbMF09b1swXS5pbnNlY3QoKSxhWzFdPW9bMV0uaW5zZWN0KCksc1swXS5zZXRQb2ludHMoYVswXVswXSx0WzJdKSxzWzFdLnNldFBvaW50cyhhWzBdWzFdLHRbMl0pLHNbMl0uc2V0UG9pbnRzKGFbMV1bMF0sdFswXSksc1szXS5zZXRQb2ludHMoYVsxXVsxXSx0WzBdKSxzWzBdLmdldERpc3RhbmNlKCk8c1sxXS5nZXREaXN0YW5jZSgpP2lbMF09YVswXVswXTppWzBdPWFbMF1bMV0sc1syXS5nZXREaXN0YW5jZSgpPHNbM10uZ2V0RGlzdGFuY2UoKT9pWzFdPWFbMV1bMF06aVsxXT1hWzFdWzFdLG4uc2V0UG9pbnQoKGlbMF0ueCtpWzFdLngpLzIsKGlbMF0ueStpWzFdLnkpLzIpLG59LENpclplcm9PbmVEZXZpYXRpb246ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSksaT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscj1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksbz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksYT1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSkscz1PYmplY3QuY3JlYXRlKEFycmF5LnByb3RvdHlwZSksdT0wO3U8Mjt1KyspaVt1XT1PYmplY3QuY3JlYXRlKGgucHJvdG90eXBlKSxvW3VdPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLGFbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDM7dSsrKXJbdV09T2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSk7Zm9yKHU9MDt1PDQ7dSsrKXNbdV09T2JqZWN0LmNyZWF0ZShmLnByb3RvdHlwZSk7cmV0dXJuIHJbMF0uc2V0Q2lyY2xlKHRbMF0sZVswXSksclsxXS5zZXRDaXJjbGUodFsxXSxlWzFdKSxyWzJdLnNldENpcmNsZSh0WzJdLGVbMl0pLG9bMF0uc2V0Q2lyY2xlcyhyWzBdLHJbMl0pLG9bMV0uc2V0Q2lyY2xlcyhyWzFdLHJbMl0pLGFbMF09b1swXS5pbnNlY3QoKSxhWzFdPW9bMV0uaW5zZWN0KCksc1swXS5zZXRQb2ludHMoYVswXVswXSx0WzFdKSxzWzFdLnNldFBvaW50cyhhWzBdWzFdLHRbMV0pLHNbMl0uc2V0UG9pbnRzKGFbMV1bMF0sdFswXSksc1szXS5zZXRQb2ludHMoYVsxXVsxXSx0WzBdKSxzWzBdLmdldERpc3RhbmNlKCk8c1sxXS5nZXREaXN0YW5jZSgpP2lbMF09YVswXVswXTppWzBdPWFbMF1bMV0sc1syXS5nZXREaXN0YW5jZSgpPHNbM10uZ2V0RGlzdGFuY2UoKT9pWzFdPWFbMV1bMF06aVsxXT1hWzFdWzFdLG4uc2V0UG9pbnQoKGlbMF0ueCtpWzFdLngpLzIsKGlbMF0ueStpWzFdLnkpLzIpLG59fSxsPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpLGM9dVthXSh0LGUpO3JldHVybiBsLmxvY2F0aW9uRmlsdGVyKHQsYyl9LGE9e2JlYWNvbk51bUVxdWFsT25lOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpLG89dC5rZXlBcnJheSgpWzBdO3Iuc2V0UG9pbnQoZS5nZXQobykueCxlLmdldChvKS55KSxpPXQuZ2V0KG8pLmRpc3RhbmNlLG4uZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mbG9vcl9pZD1lLmdldChvKS5mbG9vcklkLG4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF09ZS5nZXQobykueCxuLmZlYXR1cmVzWzBdLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdPWUuZ2V0KG8pLnl9LGJlYWNvbk51bUVxdWFsVHdvOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkscj0yLG89T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLGE9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLHM9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLHU9T2JqZWN0LmNyZWF0ZShBcnJheS5wcm90b3R5cGUpLGw9MCxjPTAsZj0wLGQ9MDtkPHI7ZCsrKW9bZF09T2JqZWN0LmNyZWF0ZShoLnByb3RvdHlwZSk7dmFyIHA9dC5rZXlBcnJheSgpO2ZvcihkPTA7ZDxyO2QrKylzW2RdPXBbZF0sYVtkXT1OdW1iZXIodC5nZXQoc1tkXSkuZGlzdGFuY2UpLG9bZF0uc2V0UG9pbnQoZS5nZXQoc1tkXSkueCxlLmdldChzW2RdKS55KTtmb3IoaT1hW00uRElTX0FdPGFbTS5ESVNfQl0/MDoxLGQ9MDtkPHI7KytkKWwrPTEvYVtkXTtmb3IoZD0wO2Q8cjsrK2QpdVtkXT0xL2FbZF0vbDtmb3IoZD0wO2Q8cjsrK2QpYys9dVtkXSpvW2RdLngsZis9dVtkXSpvW2RdLnk7bi5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLmZsb29yX2lkPWUuZ2V0KHNbaV0pLmZsb29ySWQsbi5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXT1jLG4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV09Zn0sYmVhY29uTnVtRXF1YWxUaHJlZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpLHI9MyxhPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxzPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSx1PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxsPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxjPW5ldyBBcnJheSgzKSxmPTFlMyxkPTA7ZDxyO2QrKylhW2RdPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3ZhciBwPXQua2V5QXJyYXkoKTtmb3IoZD0wO2Q8cjtkKyspdVtkXT1wW2RdLHNbZF09TnVtYmVyKHQuZ2V0KHVbZF0pLmRpc3RhbmNlKSxhW2RdLnNldFBvaW50KGUuZ2V0KHVbZF0pLngsZS5nZXQodVtkXSkueSksbFtkXT1OdW1iZXIodC5nZXQodVtkXSkuZGlzdGFuY2UpLGNbZF09ZS5nZXQodVtkXSkuZmxvb3JJZCxmPmxbZF0mJihmPWxbZF0saT1lLmdldCh1W2RdKS5mbG9vcklkKTt2YXIgZz1vKGEscyk7Yy5zb3J0KF8uc29ydFJ1bGUpLHMuc29ydChfLnNvcnRSdWxlKSxzWzBdIT1zWzFdP24uZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mbG9vcl9pZD1pOm4uZmVhdHVyZXNbMF0ucHJvcGVydGllcy5mbG9vcl9pZD1mbG9vckFycmF5VG9Vc2VbKE51bWJlcihNLkJFQUNPTl9VU0VfTlVNKSsxKS8yLTFdLG4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF09Zy54LG4uZmVhdHVyZXNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV09Zy55fSxiZWFjb25OdW1Nb3JlVGhhblRocmVlOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkscj10LnNpemUoKSxhPW5ldyBBcnJheShyKSxzPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSx1PU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxsPU9iamVjdC5jcmVhdGUoQXJyYXkucHJvdG90eXBlKSxjPW5ldyBBcnJheSgzKSxmPTFlMyxkPTA7ZDxNLkJFQUNPTl9VU0VfTlVNO2QrKylzW2RdPU9iamVjdC5jcmVhdGUoaC5wcm90b3R5cGUpO3ZhciBwPXQua2V5QXJyYXkoKTtmb3IoZD0wO2Q8cjtkKyspYVtkXT1OdW1iZXIodC5nZXQocFtkXSkuZGlzdGFuY2UpO2ZvcihhLnNvcnQoXy5zb3J0UnVsZSksZD0wO2Q8TS5CRUFDT05fVVNFX05VTTtkKyspZm9yKHZhciBnPTA7Zzx0LnNpemUoKTtnKyspe3ZhciB2PXQuZ2V0KHBbZ10pO2lmKHYmJnYuZGlzdGFuY2UmJnYuZGlzdGFuY2U9PWFbZF0pe3VbZF09cFtnXSxzW2RdLnNldFBvaW50KGUuZ2V0KHVbZF0pLngsZS5nZXQodVtkXSkueSksbFtkXT1OdW1iZXIodC5nZXQodVtkXSkuZGlzdGFuY2UpLGNbZF09ZS5nZXQodVtkXSkuZmxvb3JJZCxmPmxbZF0mJihmPWxbZF0saT1lLmdldCh1W2RdKS5mbG9vcklkKTticmVha319dmFyIG09byhzLGwpO2Muc29ydChfLnNvcnRSdWxlKSxsLnNvcnQoXy5zb3J0UnVsZSksbFswXSE9bFsxXT9uLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuZmxvb3JfaWQ9aTpuLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMuZmxvb3JfaWQ9Y1soTnVtYmVyKE0uQkVBQ09OX1VTRV9OVU0pKzEpLzItMV0sbi5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1swXT1tLngsbi5mZWF0dXJlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlc1sxXT1tLnl9fTthW3JdKGUsbixpKX19O08ucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCl7dGhpcy5CZWFjb25zQ2ZnPXR9LE8ucHJvdG90eXBlLmxvY2F0ZT1mdW5jdGlvbih0KXt2YXIgZSxuLGkscixvLHM9T2JqZWN0LmNyZWF0ZShfLnByb3RvdHlwZSksdT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlKSxsPW5ldyBhLGM9bmV3IGE7aWYodS5zZXRCb3VuZGFyaWVzKHRoaXMuYmxlQ29uZmlnKSxpPXRoaXMuQmVhY29uc0NmZyxlPXQscj1pLmxlbmd0aCxuPWUubGVuZ3RoLDA9PXIpcmV0dXJuIGNvbnNvbGUud2FybihcImJlYWNvbnNDZmcgaXMgZW1wdHkhXCIpLHRoaXMuYmxlTG9jYXRpb25JbmZvSW5zdGFuY2U7Zm9yKHZhciBoPTA7aDxyO2grKyl7dmFyIGYsZDtcImF0dGVuXCJpbiBpW2hdJiZcImxvc3NDb2VcImluIGlbaF0/KGY9aVtoXS5hdHRlbixkPWlbaF0ubG9zc0NvZSk6KGY9LTU5LGQ9Mik7dmFyIHA9bmV3IG0oaVtoXS5iZWFjb25JZCxpW2hdLm1hcElkLGlbaF0uc2NlbmVJZCxpW2hdLmZsb29ySWQsaVtoXS51dWlkLGlbaF0ubWFqb3IsaVtoXS5taW5vcixOdW1iZXIoaVtoXS5nZW9tLngpLE51bWJlcihpW2hdLmdlb20ueSksZixkKSxnPW5ldyBTdHJpbmcoaVtoXS51dWlkK2lbaF0ubWFqb3IraVtoXS5taW5vcik7bC5wdXQoZyxwKX1pZihsLmlzRW1wdHkoKSlyZXR1cm4gY29uc29sZS5sb2coXCJCZWFjb25DZmdOdW0gPSAwXCIpLHRoaXMuYmxlTG9jYXRpb25JbmZvSW5zdGFuY2U7aWYoMD09bilyZXR1cm4gY29uc29sZS53YXJuKFwiYmVhY29ucyBpcyBlbXB0eSFcIiksdGhpcy5ibGVMb2NhdGlvbkluZm9JbnN0YW5jZTtmb3IoaD0wO2g8bjtoKyspe3ZhciB2PW5ldyBTdHJpbmcoZVtoXS51dWlkK2VbaF0ubWFqb3IrZVtoXS5taW5vcik7aWYobC5jb250YWluc0tleSh2KSl7dmFyIHg9MDtpZihcImRpc3RhbmNlXCJpbiBlW2hdP3UuZGlzdGFuY2VGaWx0ZXIoZVtoXS5kaXN0YW5jZSkmJih4PWVbaF0uZGlzdGFuY2UpOnUucnNzaUZpbHRlcihOdW1iZXIoZVtoXS5yc3NpKSxsLmdldCh2KS5hdHRlbikmJih4PXMuY2FsY0Rpc3RCeVJzc2koTnVtYmVyKGVbaF0ucnNzaSksbC5nZXQodikuYXR0ZW4sbC5nZXQodikubG9zc0NvZSkpLHgpe3ZhciB3PW5ldyB5KGVbaF0udXVpZCxlW2hdLm1ham9yLGVbaF0ubWlub3IseCk7Yy5wdXQodix3KX19fXJldHVybiBjLmlzRW1wdHkoKT8oY29uc29sZS53YXJuKFwiQmVhY29uTnVtID0gMFwiKSx0aGlzLmJsZUxvY2F0aW9uSW5mb0luc3RhbmNlKToobz1jLnNpemUoKSxsLmlzRW1wdHkoKXx8Yy5pc0VtcHR5KCk/KGNvbnNvbGUud2FybihcImJlYWNvbnNDZmdNYXAgb3IgYmVhY29uc01hcCBpcyBlbXB0eSFcIiksdGhpcy5ibGVMb2NhdGlvbkluZm9JbnN0YW5jZSk6KHRoaXMuYmxlTG9jYXRpb25TdHJhdGVneShvLGMsbCx0aGlzLmJsZUxvY2F0aW9uSW5mb0luc3RhbmNlKSxjLmNsZWFyKCksbC5jbGVhcigpLHRoaXMuYmxlTG9jYXRpb25JbmZvSW5zdGFuY2UpKX0sTy5wcm90b3R5cGUuZ2V0QmxlTG9jYXRpb25JbmZvPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LmNyZWF0ZSh4LnByb3RvdHlwZSk7cmV0dXJuIHQuc3RyaW5naWZ5SW5mbyh0aGlzLmJsZUxvY2F0aW9uSW5mb0luc3RhbmNlKX0sXCJvYmplY3RcIj09PW8odCkmJlwib2JqZWN0XCI9PT1vKHQuZXhwb3J0cyk/dC5leHBvcnRzPU86KGk9TyxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5jYWxsKGUsbixlLHQpOmksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKSl9KCl9KS5jYWxsKGUsbigzNykodCkpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPWxbZV07aWYoIW4pe3ZhciBpPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KTtyLmFwcGVuZENoaWxkKG8pLHIuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImZvbnQ6XCIrZStcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjBcIiksaS5hcHBlbmRDaGlsZChyKSxuPXIub2Zmc2V0SGVpZ2h0LGxbZV09bixpLnJlbW92ZUNoaWxkKHIpfXJldHVybiBufU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscz1uKDIpLHU9aShzKSxsPXt9LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cih0aGlzLHQpLHRoaXMudGV4dFdpZHRoPW51bGwsdGhpcy50ZXh0SGVpZ2h0PW51bGwsdGhpcy5jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx0aGlzLmN0eD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIil9cmV0dXJuIGEodCxbe2tleTpcImRyYXdUZXh0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5vcHRUZXh0UmVjdD90aGlzLmRyYXdUZXh0T3B0KHQsZSk6dGhpcy5kcmF3VGV4dFJlY3QodCxlKX19LHtrZXk6XCJkcmF3VGV4dE9wdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jYW52YXMsaT10aGlzLmN0eDtpLmZvbnQ9ZS5mb250O3ZhciByPU1hdGguY2VpbCh0aGlzLmN0eC5tZWFzdXJlVGV4dCh0KS53aWR0aCksYT1vKHQsaS5mb250KSxzPXIrKGUubGluZVdpZHRoPzIqZS5saW5lV2lkdGg6MCkrMzAsbD1hKzMwLGM9MDtlLmxpbmVXaWR0aCYmKGM9MiplLmxpbmVXaWR0aCk7dmFyIGg9MCxmPTAsZD1jK3IscD1jLzIrYTtyZXR1cm4gcz1kLWgsbD1wLWYsdGhpcy50ZXh0V2lkdGg9cyx0aGlzLnRleHRIZWlnaHQ9bCxuLndpZHRoPXUuTWF0aC5uZXh0UG93ZXJPZlR3byhzKSxuLmhlaWdodD11Lk1hdGgubmV4dFBvd2VyT2ZUd28obCksaS5mb250PWUuZm9udCxpLnRleHRBbGlnbj1cImxlZnRcIixpLnRleHRCYXNlbGluZT1cInRvcFwiLGUubGluZVdpZHRoJiZlLnN0cm9rZVN0eWxlJiYoaS5zdHJva2VTdHlsZT1lLnN0cm9rZVN0eWxlLGkubGluZVdpZHRoPWUubGluZVdpZHRoLGkuc3Ryb2tlVGV4dCh0LGMsYykpLGkuc2hhZG93Q29sb3I9ZS5zaGFkb3dDb2xvcj9lLnNoYWRvd0NvbG9yOmkuc2hhZG93Q29sb3IsaS5zaGFkb3dCbHVyPWUuc2hhZG93Qmx1cj9lLnNoYWRvd0JsdXI6aS5zaGFkb3dDb2xvcixpLmZpbGxTdHlsZT1lLmZpbGxTdHlsZSxpLmZpbGxUZXh0KHQsYyxjKSx0aGlzLmNhbnZhc319LHtrZXk6XCJkcmF3VGV4dFJlY3RcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY2FudmFzLGk9dGhpcy5jdHg7aS5mb250PWUuZm9udDt2YXIgcj1NYXRoLmNlaWwodGhpcy5jdHgubWVhc3VyZVRleHQodCkud2lkdGgpLGE9byh0LGkuZm9udCkscz1yKyhlLmxpbmVXaWR0aD8yKmUubGluZVdpZHRoOjApKzMwLGw9YSszMDtuLndpZHRoPXMsbi5oZWlnaHQ9bCxpLmNsZWFyUmVjdCgwLDAsdGhpcy5jYW52YXMud2lkdGgsdGhpcy5jYW52YXMuaGVpZ2h0KTt2YXIgYz0wO2UubGluZVdpZHRoJiYoYz0yKmUubGluZVdpZHRoKSxpLmZvbnQ9ZS5mb250LGkudGV4dEFsaWduPVwibGVmdFwiLGkudGV4dEJhc2VsaW5lPVwidG9wXCIsZS5saW5lV2lkdGgmJmUuc3Ryb2tlU3R5bGUmJihpLnN0cm9rZVN0eWxlPWUuc3Ryb2tlU3R5bGUsaS5saW5lV2lkdGg9ZS5saW5lV2lkdGgsaS5zdHJva2VUZXh0KHQsYyxjKSksaS5zaGFkb3dDb2xvcj1lLnNoYWRvd0NvbG9yP2Uuc2hhZG93Q29sb3I6aS5zaGFkb3dDb2xvcixpLnNoYWRvd0JsdXI9ZS5zaGFkb3dCbHVyP2Uuc2hhZG93Qmx1cjppLnNoYWRvd0NvbG9yLGkuZmlsbFN0eWxlPWUuZmlsbFN0eWxlLGkuZmlsbFRleHQodCxjLGMpO3ZhciBoPWkuZ2V0SW1hZ2VEYXRhKDAsMCxzLGwpLGY9MCxkPTAscD0wLGc9MCx2PXZvaWQgMCxtPXZvaWQgMCx5PXZvaWQgMCxfPWguZGF0YTtmb3IobT1jO20+MDstLW0pe2Zvcih5PTA7eTxoLmhlaWdodCYmKHY9NCooeSpoLndpZHRoK20pKzMsIV9bdl0pOysreSk7aWYoIV9bdl0pe2Y9bSsxO2JyZWFrfX1mb3IobT1jO20+MDstLW0pe2Zvcih5PWY7eTxoLndpZHRoJiYodj00KihtKmgud2lkdGgreSkrMywhX1t2XSk7Kyt5KTtpZighX1t2XSl7ZD1tKzE7YnJlYWt9fXZhciBiPWMtZix4PWMtZDtmb3IobT1hLXg7bTxoLmhlaWdodDsrK20pe2Zvcih5PWY7eTxoLndpZHRoJiYodj00KihtKmgud2lkdGgreSkrMywhX1t2XSk7Kyt5KTtpZighX1t2XSl7Zz1tLTE7YnJlYWt9fWZvcihtPXItYjttPGgud2lkdGg7KyttKXtmb3IoeT1kO3k8PWcmJih2PTQqKHkqaC53aWR0aCttKSszLCFfW3ZdKTsrK3kpO2lmKCFfW3ZdKXtwPW0tMTticmVha319cmV0dXJuIHM9cC1mLGw9Zy1kLGg9aS5nZXRJbWFnZURhdGEoZixkLHMsbCksdGhpcy50ZXh0V2lkdGg9cyx0aGlzLnRleHRIZWlnaHQ9bCxuLndpZHRoPXUuTWF0aC5uZXh0UG93ZXJPZlR3byhzKSxuLmhlaWdodD11Lk1hdGgubmV4dFBvd2VyT2ZUd28obCksaS5wdXRJbWFnZURhdGEoaCwwLDAsMCwwLHRoaXMudGV4dFdpZHRoLHRoaXMudGV4dEhlaWdodCksdGhpcy5jYW52YXN9fSx7a2V5Olwid2lkdGhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMud2lkdGh9fSx7a2V5OlwiaGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodH19XSksdH0oKTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHU9bigxKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYz1uKDIpLGg9cihjKSxmPW4oNDIpLGQ9aShmKSxwPW4oODYpLGc9aShwKSx2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJcIixuPWFyZ3VtZW50c1sxXTtvKHRoaXMsZSk7dmFyIGk9YSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gaS5fb3B0aW9ucz11KHtmb250OlwiMzBweCBBcmlhbFwiLGZpbGxTdHlsZTpcIiNGRkZGRkZcIixkZXB0aFRlc3Q6ITEsYW50aWFsaWFzOiEwLGFsaWduOmQuZGVmYXVsdC5jZW50ZXIsb3B0VGV4dFJlY3Q6ITF9LG58fHt9KSxpLmNhbnZhcz1uZXcgZy5kZWZhdWx0LGkudGV4dD10LGl9cmV0dXJuIHMoZSx0KSxsKGUsW3trZXk6XCJyYXljYXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4odD10aGlzLnNwcml0ZSkucmF5Y2FzdC5hcHBseSh0LGFyZ3VtZW50cyl9fSx7a2V5OlwidXBkYXRlVGV4dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jYW52YXMmJih0aGlzLmNhbnZhcy5kcmF3VGV4dCh0aGlzLl90ZXh0LHRoaXMuX29wdGlvbnMpLHRoaXMuY2xlYW5VcCgpLHRoaXMudGV4dHVyZT1uZXcgaC5UZXh0dXJlKHRoaXMuY2FudmFzLmNhbnZhcyksdGhpcy50ZXh0dXJlLm5lZWRzVXBkYXRlPSEwLHRoaXMuYXBwbHlBbnRpQWxpYXMoKSx0aGlzLm1hdGVyaWFsP3RoaXMubWF0ZXJpYWwubWFwPXRoaXMudGV4dHVyZTp0aGlzLm1hdGVyaWFsPW5ldyBoLlNwcml0ZU1hdGVyaWFsKHttYXA6dGhpcy50ZXh0dXJlLGRlcHRoVGVzdDp0aGlzLl9vcHRpb25zLmRlcHRoVGVzdCxhbHBoYVRlc3Q6LjAxfSksdGhpcy50ZXh0dXJlLm9mZnNldC54PTAsdGhpcy50ZXh0dXJlLm9mZnNldC55PTEtdGhpcy5jYW52YXMudGV4dEhlaWdodC90aGlzLmNhbnZhcy5oZWlnaHQsdGhpcy50ZXh0dXJlLnJlcGVhdC54PXRoaXMuY2FudmFzLnRleHRXaWR0aC90aGlzLmNhbnZhcy53aWR0aCx0aGlzLnRleHR1cmUucmVwZWF0Lnk9dGhpcy5jYW52YXMudGV4dEhlaWdodC90aGlzLmNhbnZhcy5oZWlnaHQsdGhpcy5zcHJpdGV8fCh0aGlzLnNwcml0ZT1uZXcgaC5TcHJpdGUodGhpcy5tYXRlcmlhbCksdGhpcy5nZW9tZXRyeT10aGlzLnNwcml0ZS5nZW9tZXRyeSx0aGlzLmFkZCh0aGlzLnNwcml0ZSkpLHRoaXMuc3ByaXRlLnNjYWxlLnNldCh0aGlzLmNhbnZhcy50ZXh0V2lkdGgvMix0aGlzLmNhbnZhcy50ZXh0SGVpZ2h0LzIsMCksdGhpcy5zcHJpdGUucG9zaXRpb24ueD10aGlzLmNhbnZhcy50ZXh0V2lkdGgvMip0aGlzLl9vcHRpb25zLmFsaWduLngsdGhpcy5zcHJpdGUucG9zaXRpb24ueT10aGlzLmNhbnZhcy50ZXh0SGVpZ2h0LzIqdGhpcy5fb3B0aW9ucy5hbGlnbi55KX19LHtrZXk6XCJjbGVhblVwXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRleHR1cmUmJnRoaXMudGV4dHVyZS5kaXNwb3NlKCl9fSx7a2V5OlwiYXBwbHlBbnRpQWxpYXNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29wdGlvbnMuYW50aWFsaWFzPT09ITE/KHRoaXMudGV4dHVyZS5tYWdGaWx0ZXI9aC5MaW5lYXJGaWx0ZXIsdGhpcy50ZXh0dXJlLm1pbkZpbHRlcj1oLkxpbmVhckZpbHRlcik6KHRoaXMudGV4dHVyZS5tYWdGaWx0ZXI9aC5MaW5lYXJGaWx0ZXIsdGhpcy50ZXh0dXJlLm1pbkZpbHRlcj1oLkxpbmVhckZpbHRlcil9fSx7a2V5OlwiZ2V0QUFCQlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBoLlZlY3RvcjMoMCwwLDApLG49dGhpcy5tYXJnaW58fDAsaT10aGlzLnNwcml0ZS5zY2FsZSxyPWkueC8yLG89aS55LzIsYT1bXSxzPXRoaXMuc3ByaXRlLm1hdHJpeFdvcmxkO2Uuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKHMpLGU9dC50b1NjcmVlbkNvb3JkaW5hdGUoZS54LGUueSxlLnopO3ZhciB1PXRoaXMuc3ByaXRlLm1hdGVyaWFsLmFuY2hvcixsPTAsYz0wO3JldHVybiB1JiYobD1yLWkueCp1WzBdLGM9by1pLnkqdVsxXSxlLnNldFgoZS54K2wpLGUuc2V0WShlLnkrYykpLGEucHVzaChlLngtci1uKSxhLnB1c2goZS55LW8tbiksYS5wdXNoKDApLGEucHVzaChlLngrcituKSxhLnB1c2goZS55K28rbiksYS5wdXNoKDApLGF9fSx7a2V5OlwibWFrZUNvbGxpc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSF0LG49dGhpcy5kZXN0T3BhY2l0eT90aGlzLmRlc3RPcGFjaXR5OjE7dGhpcy52aXNpYmxlPWUsdGhpcy5tYXRlcmlhbC5vcGFjaXR5PW47Zm9yKHZhciBpPXRoaXMuY2hpbGRyZW4scj1BcnJheS5pc0FycmF5KGkpLG89MCxpPXI/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYTtpZihyKXtpZihvPj1pLmxlbmd0aClicmVhazthPWlbbysrXX1lbHNle2lmKG89aS5uZXh0KCksby5kb25lKWJyZWFrO2E9by52YWx1ZX12YXIgcz1hO3MudmlzaWJsZT1lfXJldHVybiB0aGlzfX0se2tleTpcIndpZHRoXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLnRleHRXaWR0aH19LHtrZXk6XCJoZWlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMudGV4dEhlaWdodH19LHtrZXk6XCJ0ZXh0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90ZXh0IT09dCYmKHRoaXMuX3RleHQ9dCx0aGlzLnVwZGF0ZVRleHQoKSl9fSx7a2V5OlwiZm9udFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zLmZvbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcHRpb25zLmZvbnQhPT10JiYodGhpcy5fb3B0aW9ucy5mb250PXQsdGhpcy51cGRhdGVUZXh0KCkpfX0se2tleTpcImZpbGxTdHlsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zLmZpbGxTdHlsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnMuZmlsbFN0eWxlIT09dCYmKHRoaXMuX29wdGlvbnMuZmlsbFN0eWxlPXQsdGhpcy51cGRhdGVUZXh0KCkpfX1dKSxlfShoLk9iamVjdDNEKTtlLmRlZmF1bHQ9dn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfXZhciByPW4oMiksbz1pKHIpO28uQ1NTMkRPYmplY3Q9ZnVuY3Rpb24odCl7by5PYmplY3QzRC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudD10LHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5lbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJhbGxcIix0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJyZW1vdmVkXCIsZnVuY3Rpb24odCl7bnVsbCE9PXRoaXMuZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpfSl9LG8uQ1NTMkRPYmplY3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5PYmplY3QzRC5wcm90b3R5cGUpLG8uQ1NTMkRPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPW8uQ1NTMkRPYmplY3Qsby5DU1MyRFJlbmRlcmVyPWZ1bmN0aW9uKCl7Y29uc29sZS5sb2coXCJUSFJFRS5DU1MyRFJlbmRlcmVyXCIsby5SRVZJU0lPTik7dmFyIHQsZSxuLGkscj1uZXcgby5WZWN0b3IzLGE9bmV3IG8uTWF0cml4NCxzPW5ldyBvLk1hdHJpeDQsdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Uuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIix0aGlzLmRvbUVsZW1lbnQ9dSx0aGlzLnNldFNpemU9ZnVuY3Rpb24ocixvKXt0PXIsZT1vLG49dC8yLGk9ZS8yLHUuc3R5bGUud2lkdGg9citcInB4XCIsdS5zdHlsZS5oZWlnaHQ9bytcInB4XCJ9O3ZhciBsPWZ1bmN0aW9uIHQoZSxhKXtpZihlIGluc3RhbmNlb2Ygby5DU1MyRE9iamVjdCl7ci5zZXRGcm9tTWF0cml4UG9zaXRpb24oZS5tYXRyaXhXb3JsZCksci5hcHBseU1hdHJpeDQocyk7dmFyIGw9ZS5lbGVtZW50LGM9XCJ0cmFuc2xhdGUoLTUwJSwtNTAlKSB0cmFuc2xhdGUoXCIrKHIueCpuK24pK1wicHgsXCIrKC1yLnkqaStpKStcInB4KVwiO2wuc3R5bGUuV2Via2l0VHJhbnNmb3JtPWMsbC5zdHlsZS5Nb3pUcmFuc2Zvcm09YyxsLnN0eWxlLm9UcmFuc2Zvcm09YyxsLnN0eWxlLnRyYW5zZm9ybT1jLGwucGFyZW50Tm9kZSE9PXUmJnUuYXBwZW5kQ2hpbGQobCl9Zm9yKHZhciBoPTAsZj1lLmNoaWxkcmVuLmxlbmd0aDtoPGY7aCsrKXQoZS5jaGlsZHJlbltoXSxhKX07dGhpcy5yZW5kZXI9ZnVuY3Rpb24odCxlKXt0LnVwZGF0ZU1hdHJpeFdvcmxkKCksbnVsbD09PWUucGFyZW50JiZlLnVwZGF0ZU1hdHJpeFdvcmxkKCksZS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShlLm1hdHJpeFdvcmxkKSxhLmNvcHkoZS5tYXRyaXhXb3JsZEludmVyc2UuZ2V0SW52ZXJzZShlLm1hdHJpeFdvcmxkKSkscy5tdWx0aXBseU1hdHJpY2VzKGUucHJvamVjdGlvbk1hdHJpeCxhKSxsKHQsZSl9fX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfXZhciByPW4oMiksbz1pKHIpO28uQ29sbGFkYUxvYWRlcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxuLGkscil7dmFyIG89MDtpZihkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiYmZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQpe3ZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdDthLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1hLnJlYWR5U3RhdGU/MD09PWEuc3RhdHVzfHwyMDA9PT1hLnN0YXR1cz9hLnJlc3BvbnNlPyhqdD1uLGUoYS5yZXNwb25zZSx2b2lkIDAsdCkpOnI/cih7dHlwZTpcImVycm9yXCIsdXJsOnR9KTpjb25zb2xlLmVycm9yKFwiQ29sbGFkYUxvYWRlcjogRW1wdHkgb3Igbm9uLWV4aXN0aW5nIGZpbGUgKFwiK3QrXCIpXCIpOnI/cih7dHlwZTpcImVycm9yXCIsdXJsOnR9KTpjb25zb2xlLmVycm9yKFwiQ29sbGFkYUxvYWRlcjogQ291bGRuJ3QgbG9hZCBcXFwiXCIrdCsnXCIgKCcrYS5zdGF0dXMrXCIpXCIpOjM9PT1hLnJlYWR5U3RhdGUmJmkmJigwPT09byYmKG89YS5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtTGVuZ3RoXCIpKSxpKHt0b3RhbDpvLGxvYWRlZDphLnJlc3BvbnNlVGV4dC5sZW5ndGh9KSl9LGEub3BlbihcIkdFVFwiLHQsITApLGEuc2VuZChudWxsKX1lbHNlIGFsZXJ0KFwiRG9uJ3Qga25vdyBob3cgdG8gcGFyc2UgWE1MIVwiKX1mdW5jdGlvbiBlKHQsZSxuKXtpZihGdD0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQsXCJ0ZXh0L3htbFwiKSxlPWV8fGp0LHZvaWQgMCE9PW4pe3ZhciBsPW4uc3BsaXQoXCIvXCIpO2wucG9wKCksa3Q9KGwubGVuZ3RoPDE/XCIuXCI6bC5qb2luKFwiL1wiKSkrXCIvXCJ9aSgpLHh0KCksenQ9cihcImxpYnJhcnlfaW1hZ2VzIGltYWdlXCIsSSxcImltYWdlXCIpLEh0PXIoXCJsaWJyYXJ5X21hdGVyaWFscyBtYXRlcmlhbFwiLFksXCJtYXRlcmlhbFwiKSxxdD1yKFwibGlicmFyeV9lZmZlY3RzIGVmZmVjdFwiLFEsXCJlZmZlY3RcIiksWHQ9cihcImxpYnJhcnlfZ2VvbWV0cmllcyBnZW9tZXRyeVwiLEYsXCJnZW9tZXRyeVwiKSxZdD1yKFwibGlicmFyeV9jYW1lcmFzIGNhbWVyYVwiLHJ0LFwiY2FtZXJhXCIpLFd0PXIoXCJsaWJyYXJ5X2xpZ2h0cyBsaWdodFwiLGF0LFwibGlnaHRcIiksVnQ9cihcImxpYnJhcnlfY29udHJvbGxlcnMgY29udHJvbGxlclwiLE8sXCJjb250cm9sbGVyXCIpLEd0PXIoXCJsaWJyYXJ5X2FuaW1hdGlvbnMgYW5pbWF0aW9uXCIsdHQsXCJhbmltYXRpb25cIiksTHQ9cihcImxpYnJhcnlfdmlzdWFsX3NjZW5lcyB2aXN1YWxfc2NlbmVcIixBLFwidmlzdWFsX3NjZW5lXCIpLE50PXIoXCJsaWJyYXJ5X2tpbmVtYXRpY3NfbW9kZWxzIGtpbmVtYXRpY3NfbW9kZWxcIix1dCxcImtpbmVtYXRpY3NfbW9kZWxcIiksUnQ9W10sRHQ9W10sT3Q9YSgpLEJ0PW5ldyBvLkdyb3VwO2Zvcih2YXIgYz0wO2M8T3Qubm9kZXMubGVuZ3RoO2MrKylCdC5hZGQoeShPdC5ub2Rlc1tjXSkpO0J0LnNjYWxlLm11bHRpcGx5U2NhbGFyKEt0KSx1KCksVHQ9cygpLG0oKTt2YXIgaD17c2NlbmU6QnQsbW9ycGhzOlJ0LHNraW5zOkR0LGFuaW1hdGlvbnM6UHQsa2luZW1hdGljczpBdCxkYWU6e2ltYWdlczp6dCxtYXRlcmlhbHM6SHQsY2FtZXJhczpZdCxsaWdodHM6V3QsZWZmZWN0czpxdCxnZW9tZXRyaWVzOlh0LGNvbnRyb2xsZXJzOlZ0LGFuaW1hdGlvbnM6R3QsdmlzdWFsU2NlbmVzOkx0LHZpc3VhbFNjZW5lOk90LHNjZW5lOk90LGtpbmVtYXRpY3NNb2RlbHM6TnQsa2luZW1hdGljc01vZGVsOlR0fX07cmV0dXJuIGUmJmUoaCksaH1mdW5jdGlvbiBuKHQpe1p0PXR9ZnVuY3Rpb24gaSgpe3ZhciB0PUZ0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJhc3NldFwiKSxlPXRbMF07aWYoZSYmZS5jaGlsZE5vZGVzKWZvcih2YXIgbj0wO248ZS5jaGlsZE5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPWUuY2hpbGROb2Rlc1tuXTtzd2l0Y2goaS5ub2RlTmFtZSl7Y2FzZVwidW5pdFwiOnZhciByPWkuZ2V0QXR0cmlidXRlKFwibWV0ZXJcIik7ciYmKEt0PXBhcnNlRmxvYXQocikpO2JyZWFrO2Nhc2VcInVwX2F4aXNcIjpRdD1pLnRleHRDb250ZW50LmNoYXJBdCgwKX19fWZ1bmN0aW9uIHIodCxlLG4pe2Zvcih2YXIgaT1GdC5xdWVyeVNlbGVjdG9yQWxsKHQpLHI9e30sbz0wLGE9aS5sZW5ndGgscz0wO3M8YTtzKyspe3ZhciB1PWlbc10sbD0obmV3IGUpLnBhcnNlKHUpO2wuaWQmJjAhPT1sLmlkLmxlbmd0aHx8KGwuaWQ9bitvKyspLHJbbC5pZF09bH1yZXR1cm4gcn1mdW5jdGlvbiBhKCl7dmFyIHQ9RnQucXVlcnlTZWxlY3RvckFsbChcInNjZW5lIGluc3RhbmNlX3Zpc3VhbF9zY2VuZVwiKVswXTtpZih0KXt2YXIgZT10LmdldEF0dHJpYnV0ZShcInVybFwiKS5yZXBsYWNlKC9eIy8sXCJcIik7cmV0dXJuIEx0W2UubGVuZ3RoPjA/ZTpcInZpc3VhbF9zY2VuZTBcIl19cmV0dXJuIG51bGx9ZnVuY3Rpb24gcygpe3ZhciB0PUZ0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnN0YW5jZV9raW5lbWF0aWNzX21vZGVsXCIpWzBdO2lmKHQpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKFwidXJsXCIpLnJlcGxhY2UoL14jLyxcIlwiKTtyZXR1cm4gTnRbZS5sZW5ndGg+MD9lOlwia2luZW1hdGljc19tb2RlbDBcIl19cmV0dXJuIG51bGx9ZnVuY3Rpb24gdSgpe1B0PVtdLGwoQnQpfWZ1bmN0aW9uIGwodCl7dmFyIGU9T3QuZ2V0Q2hpbGRCeUlkKHQuY29sbGFkYUlkLCEwKSxuPW51bGw7aWYoZSYmZS5rZXlzKXtuPXtmcHM6NjAsaGllcmFyY2h5Olt7bm9kZTplLGtleXM6ZS5rZXlzLHNpZHM6ZS5zaWRzfV0sbm9kZTp0LG5hbWU6XCJhbmltYXRpb25fXCIrdC5uYW1lLGxlbmd0aDowfSxQdC5wdXNoKG4pO2Zvcih2YXIgaT0wLHI9ZS5rZXlzLmxlbmd0aDtpPHI7aSsrKW4ubGVuZ3RoPU1hdGgubWF4KG4ubGVuZ3RoLGUua2V5c1tpXS50aW1lKX1lbHNlIG49e2hpZXJhcmNoeTpbe2tleXM6W10sc2lkczpbXX1dfTtmb3IodmFyIGk9MCxyPXQuY2hpbGRyZW4ubGVuZ3RoO2k8cjtpKyspZm9yKHZhciBvPWwodC5jaGlsZHJlbltpXSksYT0wLHM9by5oaWVyYXJjaHkubGVuZ3RoO2E8czthKyspbi5oaWVyYXJjaHkucHVzaCh7a2V5czpbXSxzaWRzOltdfSk7cmV0dXJuIG59ZnVuY3Rpb24gYygpe3ZhciB0LGU9MWU2LG49LWUsaT0wO2Zvcih2YXIgciBpbiBHdCl7dmFyIG89R3Rbcl07dD10fHxvLmlkO2Zvcih2YXIgYT0wO2E8by5zYW1wbGVyLmxlbmd0aDthKyspe3ZhciBzPW8uc2FtcGxlclthXTtzLmNyZWF0ZSgpLGU9TWF0aC5taW4oZSxzLnN0YXJ0VGltZSksbj1NYXRoLm1heChuLHMuZW5kVGltZSksaT1NYXRoLm1heChpLHMuaW5wdXQubGVuZ3RoKX19cmV0dXJue3N0YXJ0OmUsZW5kOm4sZnJhbWVzOmksSUQ6dH19ZnVuY3Rpb24gaCh0LGUpe3ZhciBuPWUgaW5zdGFuY2VvZiBrP1Z0W2UudXJsXTplO2lmKCFufHwhbi5tb3JwaClyZXR1cm4gdm9pZCBjb25zb2xlLmxvZyhcImNvdWxkIG5vdCBmaW5kIG1vcnBoIGNvbnRyb2xsZXIhXCIpO2Zvcih2YXIgaT1uLm1vcnBoLHI9MDtyPGkudGFyZ2V0cy5sZW5ndGg7cisrKXt2YXIgbz1pLnRhcmdldHNbcl0sYT1YdFtvXTtpZihhLm1lc2gmJmEubWVzaC5wcmltaXRpdmVzJiZhLm1lc2gucHJpbWl0aXZlcy5sZW5ndGgpe3ZhciBzPWEubWVzaC5wcmltaXRpdmVzWzBdLmdlb21ldHJ5O3MudmVydGljZXMubGVuZ3RoPT09dC52ZXJ0aWNlcy5sZW5ndGgmJnQubW9ycGhUYXJnZXRzLnB1c2goe25hbWU6XCJ0YXJnZXRfMVwiLHZlcnRpY2VzOnMudmVydGljZXN9KX19dC5tb3JwaFRhcmdldHMucHVzaCh7bmFtZTpcInRhcmdldF9aXCIsdmVydGljZXM6dC52ZXJ0aWNlc30pfWZ1bmN0aW9uIGYodCxlLG4saSl7aWYodC53b3JsZD10LndvcmxkfHxuZXcgby5NYXRyaXg0LHQubG9jYWx3b3JsZD10LmxvY2Fsd29ybGR8fG5ldyBvLk1hdHJpeDQsdC53b3JsZC5jb3B5KHQubWF0cml4KSx0LmxvY2Fsd29ybGQuY29weSh0Lm1hdHJpeCksdC5jaGFubmVscyYmdC5jaGFubmVscy5sZW5ndGgpe3ZhciByPXQuY2hhbm5lbHNbMF0sYT1yLnNhbXBsZXIub3V0cHV0W25dO2EgaW5zdGFuY2VvZiBvLk1hdHJpeDQmJih0LndvcmxkLmNvcHkoYSksdC5sb2NhbHdvcmxkLmNvcHkoYSksMD09PW4mJnQubWF0cml4LmNvcHkoYSkpfWkmJnQud29ybGQubXVsdGlwbHlNYXRyaWNlcyhpLHQud29ybGQpLGUucHVzaCh0KTtmb3IodmFyIHM9MDtzPHQubm9kZXMubGVuZ3RoO3MrKylmKHQubm9kZXNbc10sZSxuLHQud29ybGQpfWZ1bmN0aW9uIGQodCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXSxyPS0xO2lmKFwiSk9JTlRcIj09aS50eXBlKXtmb3IodmFyIGE9MDthPGUuam9pbnRzLmxlbmd0aDthKyspaWYoaS5zaWQ9PT1lLmpvaW50c1thXSl7cj1hO2JyZWFrfWlmKHI+PTApe3ZhciBzPWUuaW52QmluZE1hdHJpY2VzW3JdO2kuaW52QmluZE1hdHJpeD1zLGkuc2tpbm5pbmdNYXRyaXg9bmV3IG8uTWF0cml4NCxpLnNraW5uaW5nTWF0cml4Lm11bHRpcGx5TWF0cmljZXMoaS53b3JsZCxzKSxpLmFuaW1hdHJpeD1uZXcgby5NYXRyaXg0LGkuYW5pbWF0cml4LmNvcHkoaS5sb2NhbHdvcmxkKSxpLndlaWdodHM9W107Zm9yKHZhciBhPTA7YTxlLndlaWdodHMubGVuZ3RoO2ErKylmb3IodmFyIHU9MDt1PGUud2VpZ2h0c1thXS5sZW5ndGg7dSsrKXt2YXIgbD1lLndlaWdodHNbYV1bdV07bC5qb2ludD09PXImJmkud2VpZ2h0cy5wdXNoKGwpfX1lbHNlIGNvbnNvbGUud2FybihcIkNvbGxhZGFMb2FkZXI6IENvdWxkIG5vdCBmaW5kIGpvaW50ICdcIitpLnNpZCtcIicuXCIpLGkuc2tpbm5pbmdNYXRyaXg9bmV3IG8uTWF0cml4NCxpLndlaWdodHM9W119fX1mdW5jdGlvbiBwKHQpe3ZhciBlPVtdLG49ZnVuY3Rpb24gdChlLG4saSl7dmFyIHI9e307ci5uYW1lPW4uc2lkLHIucGFyZW50PWUsci5tYXRyaXg9bi5tYXRyaXg7dmFyIGE9W25ldyBvLlZlY3RvcjMsbmV3IG8uUXVhdGVybmlvbixuZXcgby5WZWN0b3IzXTtyLm1hdHJpeC5kZWNvbXBvc2UoYVswXSxhWzFdLGFbMl0pLHIucG9zPVthWzBdLngsYVswXS55LGFbMF0uel0sci5zY2w9W2FbMl0ueCxhWzJdLnksYVsyXS56XSxyLnJvdHE9W2FbMV0ueCxhWzFdLnksYVsxXS56LGFbMV0ud10saS5wdXNoKHIpO2Zvcih2YXIgcyBpbiBuLm5vZGVzKXQobi5zaWQsbi5ub2Rlc1tzXSxpKX07cmV0dXJuIG4oLTEsdCxlKSxlfWZ1bmN0aW9uIGcodCxlLG4pe3ZhciBpPVtdO2YoZSxpLC0xKSxkKGksbi5za2luKTtmb3IodmFyIHI9bmV3IG8uVmVjdG9yMyxhPVtdLHM9MDtzPHQudmVydGljZXMubGVuZ3RoO3MrKylhLnB1c2gobmV3IG8uVmVjdG9yMyk7Zm9yKHM9MDtzPGkubGVuZ3RoO3MrKylpZihcIkpPSU5UXCI9PWlbc10udHlwZSlmb3IodmFyIHU9MDt1PGlbc10ud2VpZ2h0cy5sZW5ndGg7dSsrKXt2YXIgbD1pW3NdLndlaWdodHNbdV0sYz1sLmluZGV4LGg9bC53ZWlnaHQscD10LnZlcnRpY2VzW2NdLGc9YVtjXTtyLng9cC54LHIueT1wLnksci56PXAueixyLmFwcGx5TWF0cml4NChpW3NdLnNraW5uaW5nTWF0cml4KSxnLngrPXIueCpoLGcueSs9ci55KmgsZy56Kz1yLnoqaH1mb3IodmFyIHM9MDtzPHQudmVydGljZXMubGVuZ3RoO3MrKyl0LnZlcnRpY2VzW3NdPWFbc119ZnVuY3Rpb24gdih0LGUsbil7dmFyIGk9VnRbZS51cmxdO2lmKG49dm9pZCAwIT09bj9uOjQwLCFpfHwhaS5za2luKXJldHVybiB2b2lkIGNvbnNvbGUubG9nKFwiQ29sbGFkYUxvYWRlcjogQ291bGQgbm90IGZpbmQgc2tpbiBjb250cm9sbGVyLlwiKTtpZighZS5za2VsZXRvbnx8IWUuc2tlbGV0b24ubGVuZ3RoKXJldHVybiB2b2lkIGNvbnNvbGUubG9nKFwiQ29sbGFkYUxvYWRlcjogQ291bGQgbm90IGZpbmQgdGhlIHNrZWxldG9uIGZvciB0aGUgc2tpbi4gXCIpO2Zvcih2YXIgcj1jKCksYT1PdC5nZXRDaGlsZEJ5SWQoZS5za2VsZXRvblswXSwhMCl8fE90LmdldENoaWxkQnlTaWQoZS5za2VsZXRvblswXSwhMCkscz1wKGEpLHU9aS5za2luLmpvaW50cyxsPVtdLGg9MDtoPHUubGVuZ3RoO2grKylmb3IodmFyIHY9MDt2PHMubGVuZ3RoO3YrKylzW3ZdLm5hbWU9PT11W2hdJiYobFtoXT1zW3ZdKTtmb3IodmFyIGg9MDtoPGwubGVuZ3RoO2grKylmb3IodmFyIHY9MDt2PGwubGVuZ3RoO3YrKylsW2hdLnBhcmVudD09PWxbdl0ubmFtZSYmKGxbaF0ucGFyZW50PXYpO3ZhciBoLHYsbTtuZXcgby5WZWN0b3IzO2ZvcihoPTA7aDx0LnZlcnRpY2VzLmxlbmd0aDtoKyspdC52ZXJ0aWNlc1toXS5hcHBseU1hdHJpeDQoaS5za2luLmJpbmRTaGFwZU1hdHJpeCk7Zm9yKHZhciB5PVtdLF89W10sYj1pLnNraW4ud2VpZ2h0cyxoPTA7aDxiLmxlbmd0aDtoKyspe3ZhciB4PW5ldyBvLlZlY3RvcjQoYltoXVswXT9iW2hdWzBdLmpvaW50OjAsYltoXVsxXT9iW2hdWzFdLmpvaW50OjAsYltoXVsyXT9iW2hdWzJdLmpvaW50OjAsYltoXVszXT9iW2hdWzNdLmpvaW50OjApLG09bmV3IG8uVmVjdG9yNChiW2hdWzBdP2JbaF1bMF0ud2VpZ2h0OjAsYltoXVsxXT9iW2hdWzFdLndlaWdodDowLGJbaF1bMl0/YltoXVsyXS53ZWlnaHQ6MCxiW2hdWzNdP2JbaF1bM10ud2VpZ2h0OjApO3kucHVzaCh4KSxfLnB1c2gobSl9dC5za2luSW5kaWNlcz15LHQuc2tpbldlaWdodHM9Xyx0LmJvbmVzPWw7Zm9yKHZhciB3PXtuYW1lOnIuSUQsZnBzOjMwLGxlbmd0aDpyLmZyYW1lcy8zMCxoaWVyYXJjaHk6W119LHY9MDt2PGwubGVuZ3RoO3YrKyl3LmhpZXJhcmNoeS5wdXNoKHtwYXJlbnQ6bFt2XS5wYXJlbnQsbmFtZTpsW3ZdLm5hbWUsa2V5czpbXX0pO2Zvcihjb25zb2xlLmxvZyhcIkNvbGxhZGFMb2FkZXI6XCIsci5JRCtcIiBoYXMgXCIrbC5sZW5ndGgrXCIgYm9uZXMuXCIpLGcodCxhLGkpLG49MDtuPHIuZnJhbWVzO24rKyl7dmFyIEU9W107ZihhLEUsbiksZChFLGkuc2tpbik7Zm9yKHZhciBoPTA7aDxFLmxlbmd0aDtoKyspZm9yKHZhciB2PTA7djx3LmhpZXJhcmNoeS5sZW5ndGg7disrKWlmKHcuaGllcmFyY2h5W3ZdLm5hbWU9PT1FW2hdLnNpZCl7dmFyIFM9e307Uy50aW1lPW4vMzAsUy5tYXRyaXg9RVtoXS5hbmltYXRyaXgsMD09PW4mJihFW2hdLm1hdHJpeD1TLm1hdHJpeCk7dmFyIE09W25ldyBvLlZlY3RvcjMsbmV3IG8uUXVhdGVybmlvbixuZXcgby5WZWN0b3IzXTtTLm1hdHJpeC5kZWNvbXBvc2UoTVswXSxNWzFdLE1bMl0pLFMucG9zPVtNWzBdLngsTVswXS55LE1bMF0uel0sUy5zY2w9W01bMl0ueCxNWzJdLnksTVsyXS56XSxTLnJvdD1NWzFdLHcuaGllcmFyY2h5W3ZdLmtleXMucHVzaChTKX10LmFuaW1hdGlvbj13fX1mdW5jdGlvbiBtKCl7aWYoVHQmJjA9PT1UdC5qb2ludHMubGVuZ3RoKXJldHVybiB2b2lkKEF0PXZvaWQgMCk7dmFyIHQ9e30sZT1mdW5jdGlvbihlLG4pe3ZhciBpPW4uZ2V0QXR0cmlidXRlKFwiaWRcIikscj1PdC5nZXRDaGlsZEJ5SWQoaSwhMCksbz1UdC5qb2ludHNbZV07QnQudHJhdmVyc2UoZnVuY3Rpb24obil7bi5jb2xsYWRhSWQ9PWkmJih0W2VdPXtub2RlOm4sdHJhbnNmb3JtczpyLnRyYW5zZm9ybXMsam9pbnQ6byxwb3NpdGlvbjpvLnplcm9Qb3NpdGlvbn0pfSl9O0F0PXtqb2ludHM6VHQmJlR0LmpvaW50cyxnZXRKb2ludFZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRbZV07cmV0dXJuIG4/bi5wb3NpdGlvbjp2b2lkIGNvbnNvbGUubG9nKFwiZ2V0Sm9pbnRWYWx1ZTogam9pbnQgXCIrZStcIiBkb2Vzbid0IGV4aXN0XCIpfSxzZXRKb2ludFZhbHVlOmZ1bmN0aW9uKGUsbil7dmFyIHI9dFtlXTtpZihyKXt2YXIgYT1yLmpvaW50O2lmKG4+YS5saW1pdHMubWF4fHxuPGEubGltaXRzLm1pbiljb25zb2xlLmxvZyhcInNldEpvaW50VmFsdWU6IGpvaW50IFwiK2UrXCIgdmFsdWUgXCIrbitcIiBvdXRzaWRlIG9mIGxpbWl0cyAobWluOiBcIithLmxpbWl0cy5taW4rXCIsIG1heDogXCIrYS5saW1pdHMubWF4K1wiKVwiKTtlbHNlIGlmKGEuc3RhdGljKWNvbnNvbGUubG9nKFwic2V0Sm9pbnRWYWx1ZTogam9pbnQgXCIrZStcIiBpcyBzdGF0aWNcIik7ZWxzZXt2YXIgcz1yLm5vZGUsdT1hLmF4aXMsbD1yLnRyYW5zZm9ybXMsYz1uZXcgby5NYXRyaXg0O2ZvcihpPTA7aTxsLmxlbmd0aDtpKyspe3ZhciBoPWxbaV07aWYoaC5zaWQmJmguc2lkLmluZGV4T2YoXCJqb2ludFwiK2UpIT09LTEpc3dpdGNoKGEudHlwZSl7Y2FzZVwicmV2b2x1dGVcIjpjLm11bHRpcGx5KGYubWFrZVJvdGF0aW9uQXhpcyh1LG8uTWF0aC5kZWdUb1JhZChuKSkpO2JyZWFrO2Nhc2VcInByaXNtYXRpY1wiOmMubXVsdGlwbHkoZi5tYWtlVHJhbnNsYXRpb24odS54Km4sdS55Km4sdS56Km4pKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcInNldEpvaW50VmFsdWU6IHVua25vd24gam9pbnQgdHlwZTogXCIrYS50eXBlKX1lbHNle3ZhciBmPW5ldyBvLk1hdHJpeDQ7c3dpdGNoKGgudHlwZSl7Y2FzZVwibWF0cml4XCI6Yy5tdWx0aXBseShoLm9iaik7YnJlYWs7Y2FzZVwidHJhbnNsYXRlXCI6Yy5tdWx0aXBseShmLm1ha2VUcmFuc2xhdGlvbihoLm9iai54LGgub2JqLnksaC5vYmoueikpO2JyZWFrO2Nhc2VcInJvdGF0ZVwiOmMubXVsdGlwbHkoZi5tYWtlUm90YXRpb25BeGlzKGgub2JqLGguYW5nbGUpKX19fXZhciBkPWMuZWxlbWVudHMscD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkKSxnPVtwWzBdLHBbNF0scFs4XSxwWzEyXSxwWzFdLHBbNV0scFs5XSxwWzEzXSxwWzJdLHBbNl0scFsxMF0scFsxNF0scFszXSxwWzddLHBbMTFdLHBbMTVdXTtzLm1hdHJpeC5zZXQuYXBwbHkocy5tYXRyaXgsZykscy5tYXRyaXguZGVjb21wb3NlKHMucG9zaXRpb24scy5xdWF0ZXJuaW9uLHMuc2NhbGUpfX1lbHNlIGNvbnNvbGUubG9nKFwic2V0Sm9pbnRWYWx1ZTogam9pbnQgXCIrZStcIiBkb2Vzbid0IGV4aXN0XCIpfX07dmFyIG49RnQucXVlcnlTZWxlY3RvcihcInNjZW5lIGluc3RhbmNlX2tpbmVtYXRpY3Nfc2NlbmVcIik7aWYobilmb3IodmFyIGk9MDtpPG4uY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgcj1uLmNoaWxkTm9kZXNbaV07aWYoMT09ci5ub2RlVHlwZSlzd2l0Y2goci5ub2RlTmFtZSl7Y2FzZVwiYmluZF9qb2ludF9heGlzXCI6dmFyIGE9ci5nZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIikuc3BsaXQoXCIvXCIpLnBvcCgpLHM9ci5xdWVyeVNlbGVjdG9yKFwiYXhpcyBwYXJhbVwiKS50ZXh0Q29udGVudCx1PXBhcnNlSW50KHMuc3BsaXQoXCJqb2ludFwiKS5wb3AoKS5zcGxpdChcIi5cIilbMF0pLGw9RnQucXVlcnlTZWxlY3RvcignW3NpZD1cIicrYSsnXCJdJyk7aWYobCl7dmFyIGM9bC5wYXJlbnRFbGVtZW50O2UodSxjKX19fX1mdW5jdGlvbiB5KHQsZSl7dmFyIG4saSxyLGEscz1uZXcgby5PYmplY3QzRCx1PSExO2ZvcihyPTA7cjx0LmNvbnRyb2xsZXJzLmxlbmd0aDtyKyspe3ZhciBsPVZ0W3QuY29udHJvbGxlcnNbcl0udXJsXTtzd2l0Y2gobC50eXBlKXtjYXNlXCJza2luXCI6aWYoWHRbbC5za2luLnNvdXJjZV0pe3ZhciBjPW5ldyBEO2MudXJsPWwuc2tpbi5zb3VyY2UsYy5pbnN0YW5jZV9tYXRlcmlhbD10LmNvbnRyb2xsZXJzW3JdLmluc3RhbmNlX21hdGVyaWFsLHQuZ2VvbWV0cmllcy5wdXNoKGMpLHU9ITAsbj10LmNvbnRyb2xsZXJzW3JdfWVsc2UgaWYoVnRbbC5za2luLnNvdXJjZV0pe3ZhciBmPVZ0W2wuc2tpbi5zb3VyY2VdO2lmKGk9ZixmLm1vcnBoJiZYdFtmLm1vcnBoLnNvdXJjZV0pe3ZhciBjPW5ldyBEO2MudXJsPWYubW9ycGguc291cmNlLGMuaW5zdGFuY2VfbWF0ZXJpYWw9dC5jb250cm9sbGVyc1tyXS5pbnN0YW5jZV9tYXRlcmlhbCx0Lmdlb21ldHJpZXMucHVzaChjKX19YnJlYWs7Y2FzZVwibW9ycGhcIjppZihYdFtsLm1vcnBoLnNvdXJjZV0pe3ZhciBjPW5ldyBEO2MudXJsPWwubW9ycGguc291cmNlLGMuaW5zdGFuY2VfbWF0ZXJpYWw9dC5jb250cm9sbGVyc1tyXS5pbnN0YW5jZV9tYXRlcmlhbCx0Lmdlb21ldHJpZXMucHVzaChjKSxpPXQuY29udHJvbGxlcnNbcl19Y29uc29sZS5sb2coXCJDb2xsYWRhTG9hZGVyOiBNb3JwaC1jb250cm9sbGVyIHBhcnRpYWxseSBzdXBwb3J0ZWQuXCIpfX12YXIgZD17fTtmb3Iocj0wO3I8dC5nZW9tZXRyaWVzLmxlbmd0aDtyKyspe3ZhciBwLGc9dC5nZW9tZXRyaWVzW3JdLG09Zy5pbnN0YW5jZV9tYXRlcmlhbCxfPVh0W2cudXJsXSxiPXt9LHg9W10sdz0wO2lmKF8pe2lmKCFfLm1lc2h8fCFfLm1lc2gucHJpbWl0aXZlcyljb250aW51ZTtpZigwPT09cy5uYW1lLmxlbmd0aCYmKHMubmFtZT1fLmlkKSxtKWZvcihhPTA7YTxtLmxlbmd0aDthKyspe3ZhciBFPW1bYV0sUz1IdFtFLnRhcmdldF0sTT1TLmluc3RhbmNlX2VmZmVjdC51cmwsQz1xdFtNXS5zaGFkZXIsST1DLm1hdGVyaWFsO2lmKF8uZG91YmxlU2lkZWQpe2lmKCEoRS5zeW1ib2wgaW4gZCkpe3ZhciBPPUkuY2xvbmUoKTtPLnNpZGU9by5Eb3VibGVTaWRlLGRbRS5zeW1ib2xdPU99ST1kW0Uuc3ltYm9sXX1JLm9wYWNpdHk9SS5vcGFjaXR5P0kub3BhY2l0eToxLGJbRS5zeW1ib2xdPXcseC5wdXNoKEkpLHA9SSxwLm5hbWU9bnVsbD09PVMubmFtZXx8XCJcIj09PVMubmFtZT9TLmlkOlMubmFtZSx3Kyt9dmFyIFQsUD1wfHxuZXcgby5NZXNoTGFtYmVydE1hdGVyaWFsKHtjb2xvcjoxNDU0MDI1MyxzaWRlOl8uZG91YmxlU2lkZWQ/by5Eb3VibGVTaWRlOm8uRnJvbnRTaWRlfSksQT1fLm1lc2guZ2VvbWV0cnkzanM7aWYodz4xKWZvcihQPW5ldyBvLk11bHRpTWF0ZXJpYWwoeCksYT0wO2E8QS5mYWNlcy5sZW5ndGg7YSsrKXt2YXIgTD1BLmZhY2VzW2FdO0wubWF0ZXJpYWxJbmRleD1iW0wuZGFlTWF0ZXJpYWxdfXZvaWQgMCE9PW4/KHYoQSxuKSxBLm1vcnBoVGFyZ2V0cy5sZW5ndGg+MD8oUC5tb3JwaFRhcmdldHM9ITAsUC5za2lubmluZz0hMSk6KFAubW9ycGhUYXJnZXRzPSExLFAuc2tpbm5pbmc9ITApLFQ9bmV3IG8uU2tpbm5lZE1lc2goQSxQLCExKSxULm5hbWU9XCJza2luX1wiK0R0Lmxlbmd0aCxEdC5wdXNoKFQpKTp2b2lkIDAhPT1pPyhoKEEsaSksUC5tb3JwaFRhcmdldHM9ITAsVD1uZXcgby5NZXNoKEEsUCksVC5uYW1lPVwibW9ycGhfXCIrUnQubGVuZ3RoLFJ0LnB1c2goVCkpOlQ9QS5pc0xpbmVTdHJpcD09PSEwP25ldyBvLkxpbmUoQSk6bmV3IG8uTWVzaChBLFApLHMuYWRkKFQpfX1mb3Iocj0wO3I8dC5jYW1lcmFzLmxlbmd0aDtyKyspe3ZhciBOPXQuY2FtZXJhc1tyXSxrPVl0W04udXJsXSxSPW5ldyBvLlBlcnNwZWN0aXZlQ2FtZXJhKGsueWZvdixwYXJzZUZsb2F0KGsuYXNwZWN0X3JhdGlvKSxwYXJzZUZsb2F0KGsuem5lYXIpLHBhcnNlRmxvYXQoay56ZmFyKSk7cy5hZGQoUil9Zm9yKHI9MDtyPHQubGlnaHRzLmxlbmd0aDtyKyspe3ZhciBGPW51bGwsQj10LmxpZ2h0c1tyXSxqPVd0W0IudXJsXTtpZihqJiZqLnRlY2huaXF1ZSl7dmFyIFU9ai5jb2xvci5nZXRIZXgoKSx6PWouaW50ZW5zaXR5LEc9ai5kaXN0YW5jZSxWPWouZmFsbG9mZl9hbmdsZTtzd2l0Y2goai50ZWNobmlxdWUpe2Nhc2VcImRpcmVjdGlvbmFsXCI6Rj1uZXcgby5EaXJlY3Rpb25hbExpZ2h0KFUseixHKSxGLnBvc2l0aW9uLnNldCgwLDAsMSk7YnJlYWs7Y2FzZVwicG9pbnRcIjpGPW5ldyBvLlBvaW50TGlnaHQoVSx6LEcpO2JyZWFrO2Nhc2VcInNwb3RcIjpGPW5ldyBvLlNwb3RMaWdodChVLHosRyxWKSxGLnBvc2l0aW9uLnNldCgwLDAsMSk7YnJlYWs7Y2FzZVwiYW1iaWVudFwiOkY9bmV3IG8uQW1iaWVudExpZ2h0KFUpfX1GJiZzLmFkZChGKX1pZihzLm5hbWU9dC5uYW1lfHx0LmlkfHxcIlwiLHMuY29sbGFkYUlkPXQuaWR8fFwiXCIscy5sYXllcj10LmxheWVyfHxcIlwiLHMubWF0cml4PXQubWF0cml4LHMubWF0cml4LmRlY29tcG9zZShzLnBvc2l0aW9uLHMucXVhdGVybmlvbixzLnNjYWxlKSxKdC5jZW50ZXJHZW9tZXRyeSYmcy5nZW9tZXRyeSl7dmFyIFg9cy5nZW9tZXRyeS5jZW50ZXIoKTtYLm11bHRpcGx5KHMuc2NhbGUpLFguYXBwbHlRdWF0ZXJuaW9uKHMucXVhdGVybmlvbikscy5wb3NpdGlvbi5zdWIoWCl9Zm9yKHI9MDtyPHQubm9kZXMubGVuZ3RoO3IrKylzLmFkZCh5KHQubm9kZXNbcl0sdCkpO3JldHVybiBzfWZ1bmN0aW9uIF8odCl7Zm9yKHZhciBlPUZ0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaWJyYXJ5X25vZGVzIG5vZGVcIiksbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaWRcIik7aWYoaSYmaS52YWx1ZT09PXQpcmV0dXJuIGVbbl19fWZ1bmN0aW9uIGIodCl7dmFyIGU9W10sbj0xZTYsaT0tMWU2O2Zvcih2YXIgciBpbiBHdClmb3IodmFyIG89R3Rbcl0sYT0wO2E8by5jaGFubmVsLmxlbmd0aDthKyspe3ZhciBzPW8uY2hhbm5lbFthXSx1PW8uc2FtcGxlclthXSxyPXMudGFyZ2V0LnNwbGl0KFwiL1wiKVswXTtyPT10LmlkJiYodS5jcmVhdGUoKSxzLnNhbXBsZXI9dSxuPU1hdGgubWluKG4sdS5zdGFydFRpbWUpLGk9TWF0aC5tYXgoaSx1LmVuZFRpbWUpLGUucHVzaChzKSl9cmV0dXJuIGUubGVuZ3RoJiYodC5zdGFydFRpbWU9bix0LmVuZFRpbWU9aSksZX1mdW5jdGlvbiB4KHQpe2lmKHQuY2hhbm5lbHMmJnQuY2hhbm5lbHMubGVuZ3RoKXtmb3IodmFyIGU9W10sbj1bXSxpPTAscj10LmNoYW5uZWxzLmxlbmd0aDtpPHI7aSsrKXt2YXIgbyxhPXQuY2hhbm5lbHNbaV0scz1hLmZ1bGxTaWQsdT1hLnNhbXBsZXIsbD11LmlucHV0LGM9dC5nZXRUcmFuc2Zvcm1CeVNpZChhLnNpZCk7aWYoYS5hcnJJbmRpY2VzKXtvPVtdO2Zvcih2YXIgaD0wLGY9YS5hcnJJbmRpY2VzLmxlbmd0aDtoPGY7aCsrKW9baF09Q3QoYS5hcnJJbmRpY2VzW2hdKX1lbHNlIG89SXQoYS5tZW1iZXIpO2lmKGMpe24uaW5kZXhPZihzKT09PS0xJiZuLnB1c2gocyk7Zm9yKHZhciBoPTAsZj1sLmxlbmd0aDtoPGY7aCsrKXt2YXIgZD1sW2hdLHA9dS5nZXREYXRhKGMudHlwZSxoLG8pLGc9dyhlLGQpO2lmKCFnKXtnPW5ldyBpdChkKTt2YXIgdj1FKGUsZCk7ZS5zcGxpY2Uodj09PS0xP2UubGVuZ3RoOnYsMCxnKX1nLmFkZFRhcmdldChzLGMsbyxwKX19ZWxzZSBjb25zb2xlLmxvZygnQ291bGQgbm90IGZpbmQgdHJhbnNmb3JtIFwiJythLnNpZCsnXCIgaW4gbm9kZSAnK3QuaWQpfWZvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKWZvcih2YXIgbT1uW2ldLGg9MDtoPGUubGVuZ3RoO2grKyl7dmFyIGc9ZVtoXTtnLmhhc1RhcmdldChtKXx8UyhlLGcsaCxtKX10LmtleXM9ZSx0LnNpZHM9bn19ZnVuY3Rpb24gdyh0LGUpe2Zvcih2YXIgbj1udWxsLGk9MCxyPXQubGVuZ3RoO2k8ciYmbnVsbD09PW47aSsrKXt2YXIgbz10W2ldO2lmKG8udGltZT09PWUpbj1vO2Vsc2UgaWYoby50aW1lPmUpYnJlYWt9cmV0dXJuIG59ZnVuY3Rpb24gRSh0LGUpe2Zvcih2YXIgbj0tMSxpPTAscj10Lmxlbmd0aDtpPHImJm49PT0tMTtpKyspe3ZhciBvPXRbaV07by50aW1lPj1lJiYobj1pKX1yZXR1cm4gbn1mdW5jdGlvbiBTKHQsZSxuLGkpe3ZhciByPUModCxpLG4/bi0xOjApLG89TSh0LGksbisxKTtpZihyJiZvKXt2YXIgYSxzPShlLnRpbWUtci50aW1lKS8oby50aW1lLXIudGltZSksdT1yLmdldFRhcmdldChpKSxsPW8uZ2V0VGFyZ2V0KGkpLmRhdGEsYz11LmRhdGE7aWYoXCJtYXRyaXhcIj09PXUudHlwZSlhPWM7ZWxzZSBpZihjLmxlbmd0aCl7YT1bXTtmb3IodmFyIGg9MDtoPGMubGVuZ3RoOysraClhW2hdPWNbaF0rKGxbaF0tY1toXSkqc31lbHNlIGE9YysobC1jKSpzO2UuYWRkVGFyZ2V0KGksdS50cmFuc2Zvcm0sdS5tZW1iZXIsYSl9fWZ1bmN0aW9uIE0odCxlLG4pe2Zvcig7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aWYoaS5oYXNUYXJnZXQoZSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gQyh0LGUsbil7Zm9yKG49bj49MD9uOm4rdC5sZW5ndGg7bj49MDtuLS0pe3ZhciBpPXRbbl07aWYoaS5oYXNUYXJnZXQoZSkpcmV0dXJuIGl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSSgpe3RoaXMuaWQ9XCJcIix0aGlzLmluaXRfZnJvbT1cIlwifWZ1bmN0aW9uIE8oKXt0aGlzLmlkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy50eXBlPVwiXCIsdGhpcy5za2luPW51bGwsdGhpcy5tb3JwaD1udWxsfWZ1bmN0aW9uIFQoKXt0aGlzLm1ldGhvZD1udWxsLHRoaXMuc291cmNlPW51bGwsdGhpcy50YXJnZXRzPW51bGwsdGhpcy53ZWlnaHRzPW51bGx9ZnVuY3Rpb24gUCgpe3RoaXMuc291cmNlPVwiXCIsdGhpcy5iaW5kU2hhcGVNYXRyaXg9bnVsbCx0aGlzLmludkJpbmRNYXRyaWNlcz1bXSx0aGlzLmpvaW50cz1bXSx0aGlzLndlaWdodHM9W119ZnVuY3Rpb24gQSgpe3RoaXMuaWQ9XCJcIix0aGlzLm5hbWU9XCJcIix0aGlzLm5vZGVzPVtdLHRoaXMuc2NlbmU9bmV3IG8uR3JvdXB9ZnVuY3Rpb24gTCgpe3RoaXMuaWQ9XCJcIix0aGlzLm5hbWU9XCJcIix0aGlzLnNpZD1cIlwiLHRoaXMubm9kZXM9W10sdGhpcy5jb250cm9sbGVycz1bXSx0aGlzLnRyYW5zZm9ybXM9W10sdGhpcy5nZW9tZXRyaWVzPVtdLHRoaXMuY2hhbm5lbHM9W10sdGhpcy5tYXRyaXg9bmV3IG8uTWF0cml4NH1mdW5jdGlvbiBOKCl7dGhpcy5zaWQ9XCJcIix0aGlzLnR5cGU9XCJcIix0aGlzLmRhdGE9W10sdGhpcy5vYmo9bnVsbH1mdW5jdGlvbiBrKCl7dGhpcy51cmw9XCJcIix0aGlzLnNrZWxldG9uPVtdLHRoaXMuaW5zdGFuY2VfbWF0ZXJpYWw9W119ZnVuY3Rpb24gUigpe3RoaXMuc3ltYm9sPVwiXCIsdGhpcy50YXJnZXQ9XCJcIn1mdW5jdGlvbiBEKCl7dGhpcy51cmw9XCJcIix0aGlzLmluc3RhbmNlX21hdGVyaWFsPVtdfWZ1bmN0aW9uIEYoKXt0aGlzLmlkPVwiXCIsdGhpcy5tZXNoPW51bGx9ZnVuY3Rpb24gQih0KXt0aGlzLmdlb21ldHJ5PXQuaWQsdGhpcy5wcmltaXRpdmVzPVtdLHRoaXMudmVydGljZXM9bnVsbCx0aGlzLmdlb21ldHJ5M2pzPW51bGx9ZnVuY3Rpb24gaigpe3RoaXMubWF0ZXJpYWw9XCJcIix0aGlzLmNvdW50PTAsdGhpcy5pbnB1dHM9W10sdGhpcy52Y291bnQ9bnVsbCx0aGlzLnA9W10sdGhpcy5nZW9tZXRyeT1uZXcgby5HZW9tZXRyeX1mdW5jdGlvbiBVKCl7ai5jYWxsKHRoaXMpLHRoaXMudmNvdW50PVtdfWZ1bmN0aW9uIHooKXtqLmNhbGwodGhpcyksdGhpcy52Y291bnQ9MX1mdW5jdGlvbiBHKCl7ai5jYWxsKHRoaXMpLHRoaXMudmNvdW50PTN9ZnVuY3Rpb24gVigpe3RoaXMuc291cmNlPVwiXCIsdGhpcy5jb3VudD0wLHRoaXMuc3RyaWRlPTAsdGhpcy5wYXJhbXM9W119ZnVuY3Rpb24gWCgpe3RoaXMuaW5wdXQ9e319ZnVuY3Rpb24gSCgpe3RoaXMuc2VtYW50aWM9XCJcIix0aGlzLm9mZnNldD0wLHRoaXMuc291cmNlPVwiXCIsdGhpcy5zZXQ9MH1mdW5jdGlvbiBxKHQpe3RoaXMuaWQ9dCx0aGlzLnR5cGU9bnVsbH1mdW5jdGlvbiBZKCl7dGhpcy5pZD1cIlwiLHRoaXMubmFtZT1cIlwiLHRoaXMuaW5zdGFuY2VfZWZmZWN0PW51bGx9ZnVuY3Rpb24gVygpe3RoaXMuY29sb3I9bmV3IG8uQ29sb3IsdGhpcy5jb2xvci5zZXRSR0IoTWF0aC5yYW5kb20oKSxNYXRoLnJhbmRvbSgpLE1hdGgucmFuZG9tKCkpLHRoaXMuY29sb3IuYT0xLHRoaXMudGV4dHVyZT1udWxsLHRoaXMudGV4Y29vcmQ9bnVsbCx0aGlzLnRleE9wdHM9bnVsbH1mdW5jdGlvbiBaKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5lZmZlY3Q9ZSx0aGlzLm1hdGVyaWFsPW51bGx9ZnVuY3Rpb24gSih0KXt0aGlzLmVmZmVjdD10LHRoaXMuaW5pdF9mcm9tPW51bGwsdGhpcy5mb3JtYXQ9bnVsbH1mdW5jdGlvbiBLKHQpe3RoaXMuZWZmZWN0PXQsdGhpcy5zb3VyY2U9bnVsbCx0aGlzLndyYXBfcz1udWxsLHRoaXMud3JhcF90PW51bGwsdGhpcy5taW5maWx0ZXI9bnVsbCx0aGlzLm1hZ2ZpbHRlcj1udWxsLHRoaXMubWlwZmlsdGVyPW51bGx9ZnVuY3Rpb24gUSgpe3RoaXMuaWQ9XCJcIix0aGlzLm5hbWU9XCJcIix0aGlzLnNoYWRlcj1udWxsLHRoaXMuc3VyZmFjZT17fSx0aGlzLnNhbXBsZXI9e319ZnVuY3Rpb24gJCgpe3RoaXMudXJsPVwiXCJ9ZnVuY3Rpb24gdHQoKXt0aGlzLmlkPVwiXCIsXG50aGlzLm5hbWU9XCJcIix0aGlzLnNvdXJjZT17fSx0aGlzLnNhbXBsZXI9W10sdGhpcy5jaGFubmVsPVtdfWZ1bmN0aW9uIGV0KHQpe3RoaXMuYW5pbWF0aW9uPXQsdGhpcy5zb3VyY2U9XCJcIix0aGlzLnRhcmdldD1cIlwiLHRoaXMuZnVsbFNpZD1udWxsLHRoaXMuc2lkPW51bGwsdGhpcy5kb3RTeW50YXg9bnVsbCx0aGlzLmFyclN5bnRheD1udWxsLHRoaXMuYXJySW5kaWNlcz1udWxsLHRoaXMubWVtYmVyPW51bGx9ZnVuY3Rpb24gbnQodCl7dGhpcy5pZD1cIlwiLHRoaXMuYW5pbWF0aW9uPXQsdGhpcy5pbnB1dHM9W10sdGhpcy5pbnB1dD1udWxsLHRoaXMub3V0cHV0PW51bGwsdGhpcy5zdHJpZGVPdXQ9bnVsbCx0aGlzLmludGVycG9sYXRpb249bnVsbCx0aGlzLnN0YXJ0VGltZT1udWxsLHRoaXMuZW5kVGltZT1udWxsLHRoaXMuZHVyYXRpb249MH1mdW5jdGlvbiBpdCh0KXt0aGlzLnRhcmdldHM9W10sdGhpcy50aW1lPXR9ZnVuY3Rpb24gcnQoKXt0aGlzLmlkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy50ZWNobmlxdWU9XCJcIn1mdW5jdGlvbiBvdCgpe3RoaXMudXJsPVwiXCJ9ZnVuY3Rpb24gYXQoKXt0aGlzLmlkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy50ZWNobmlxdWU9XCJcIn1mdW5jdGlvbiBzdCgpe3RoaXMudXJsPVwiXCJ9ZnVuY3Rpb24gdXQoKXt0aGlzLmlkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy5qb2ludHM9W10sdGhpcy5saW5rcz1bXX1mdW5jdGlvbiBsdCgpe3RoaXMuc2lkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy5heGlzPW5ldyBvLlZlY3RvcjMsdGhpcy5saW1pdHM9e21pbjowLG1heDowfSx0aGlzLnR5cGU9XCJcIix0aGlzLnN0YXRpYz0hMSx0aGlzLnplcm9Qb3NpdGlvbj0wLHRoaXMubWlkZGxlUG9zaXRpb249MH1mdW5jdGlvbiBjdCgpe3RoaXMuc2lkPVwiXCIsdGhpcy5uYW1lPVwiXCIsdGhpcy50cmFuc2Zvcm1zPVtdLHRoaXMuYXR0YWNobWVudHM9W119ZnVuY3Rpb24gaHQoKXt0aGlzLmpvaW50PVwiXCIsdGhpcy50cmFuc2Zvcm1zPVtdLHRoaXMubGlua3M9W119ZnVuY3Rpb24gZnQodCl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtyZXR1cm4gdm9pZCAwIT1VdFtlXT9VdFtlXTooVXRbZV09bmV3IHEoZSkucGFyc2UodCksVXRbZV0pfWZ1bmN0aW9uIGR0KHQpe2Zvcih2YXIgZT12dCh0KSxuPVtdLGk9MCxyPWUubGVuZ3RoO2k8cjtpKyspbi5wdXNoKFwidHJ1ZVwiPT09ZVtpXXx8XCIxXCI9PT1lW2ldKTtyZXR1cm4gbn1mdW5jdGlvbiBwdCh0KXtmb3IodmFyIGU9dnQodCksbj1bXSxpPTAscj1lLmxlbmd0aDtpPHI7aSsrKW4ucHVzaChwYXJzZUZsb2F0KGVbaV0pKTtyZXR1cm4gbn1mdW5jdGlvbiBndCh0KXtmb3IodmFyIGU9dnQodCksbj1bXSxpPTAscj1lLmxlbmd0aDtpPHI7aSsrKW4ucHVzaChwYXJzZUludChlW2ldLDEwKSk7cmV0dXJuIG59ZnVuY3Rpb24gdnQodCl7cmV0dXJuIHQubGVuZ3RoPjA/bXQodCkuc3BsaXQoL1xccysvKTpbXX1mdW5jdGlvbiBtdCh0KXtyZXR1cm4gdC5yZXBsYWNlKC9eXFxzKy8sXCJcIikucmVwbGFjZSgvXFxzKyQvLFwiXCIpfWZ1bmN0aW9uIHl0KHQsZSxuKXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoZSk/cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoZSksMTApOm59ZnVuY3Rpb24gX3QodCxlKXt2YXIgbj1uZXcgby5JbWFnZUxvYWRlcjtuLmxvYWQoZSxmdW5jdGlvbihlKXt0LmltYWdlPWUsdC5uZWVkc1VwZGF0ZT0hMH0pfWZ1bmN0aW9uIGJ0KHQsZSl7dC5kb3VibGVTaWRlZD0hMTt2YXIgbj1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCJleHRyYSBkb3VibGVfc2lkZWRcIilbMF07biYmbiYmMT09PXBhcnNlSW50KG4udGV4dENvbnRlbnQsMTApJiYodC5kb3VibGVTaWRlZD0hMCl9ZnVuY3Rpb24geHQoKXtpZihKdC5jb252ZXJ0VXBBeGlzIT09ITB8fFF0PT09SnQudXBBeGlzKSR0PW51bGw7ZWxzZSBzd2l0Y2goUXQpe2Nhc2VcIlhcIjokdD1cIllcIj09PUp0LnVwQXhpcz9cIlh0b1lcIjpcIlh0b1pcIjticmVhaztjYXNlXCJZXCI6JHQ9XCJYXCI9PT1KdC51cEF4aXM/XCJZdG9YXCI6XCJZdG9aXCI7YnJlYWs7Y2FzZVwiWlwiOiR0PVwiWFwiPT09SnQudXBBeGlzP1wiWnRvWFwiOlwiWnRvWVwifX1mdW5jdGlvbiB3dCh0LGUpe2lmKEp0LmNvbnZlcnRVcEF4aXM9PT0hMCYmUXQhPT1KdC51cEF4aXMpc3dpdGNoKCR0KXtjYXNlXCJYdG9ZXCI6dmFyIG49dFswXTt0WzBdPWUqdFsxXSx0WzFdPW47YnJlYWs7Y2FzZVwiWHRvWlwiOnZhciBuPXRbMl07dFsyXT10WzFdLHRbMV09dFswXSx0WzBdPW47YnJlYWs7Y2FzZVwiWXRvWFwiOnZhciBuPXRbMF07dFswXT10WzFdLHRbMV09ZSpuO2JyZWFrO2Nhc2VcIll0b1pcIjp2YXIgbj10WzFdO3RbMV09ZSp0WzJdLHRbMl09bjticmVhaztjYXNlXCJadG9YXCI6dmFyIG49dFswXTt0WzBdPXRbMV0sdFsxXT10WzJdLHRbMl09bjticmVhaztjYXNlXCJadG9ZXCI6dmFyIG49dFsxXTt0WzFdPXRbMl0sdFsyXT1lKm59fWZ1bmN0aW9uIEV0KHQsZSl7aWYoSnQuY29udmVydFVwQXhpcyE9PSEwfHxRdD09PUp0LnVwQXhpcylyZXR1cm4gZTtzd2l0Y2godCl7Y2FzZVwiWFwiOmU9XCJYdG9ZXCI9PT0kdD9lKi0xOmU7YnJlYWs7Y2FzZVwiWVwiOmU9XCJZdG9aXCI9PT0kdHx8XCJZdG9YXCI9PT0kdD9lKi0xOmU7YnJlYWs7Y2FzZVwiWlwiOmU9XCJadG9ZXCI9PT0kdD9lKi0xOmV9cmV0dXJuIGV9ZnVuY3Rpb24gU3QodCxlKXt2YXIgbj1bdFtlXSx0W2UrMV0sdFtlKzJdXTtyZXR1cm4gd3QobiwtMSksbmV3IG8uVmVjdG9yMyhuWzBdLG5bMV0sblsyXSl9ZnVuY3Rpb24gTXQodCl7aWYoSnQuY29udmVydFVwQXhpcyl7dmFyIGU9W3RbMF0sdFs0XSx0WzhdXTt3dChlLC0xKSx0WzBdPWVbMF0sdFs0XT1lWzFdLHRbOF09ZVsyXSxlPVt0WzFdLHRbNV0sdFs5XV0sd3QoZSwtMSksdFsxXT1lWzBdLHRbNV09ZVsxXSx0WzldPWVbMl0sZT1bdFsyXSx0WzZdLHRbMTBdXSx3dChlLC0xKSx0WzJdPWVbMF0sdFs2XT1lWzFdLHRbMTBdPWVbMl0sZT1bdFswXSx0WzFdLHRbMl1dLHd0KGUsLTEpLHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLGU9W3RbNF0sdFs1XSx0WzZdXSx3dChlLC0xKSx0WzRdPWVbMF0sdFs1XT1lWzFdLHRbNl09ZVsyXSxlPVt0WzhdLHRbOV0sdFsxMF1dLHd0KGUsLTEpLHRbOF09ZVswXSx0WzldPWVbMV0sdFsxMF09ZVsyXSxlPVt0WzNdLHRbN10sdFsxMV1dLHd0KGUsLTEpLHRbM109ZVswXSx0WzddPWVbMV0sdFsxMV09ZVsyXX1yZXR1cm4obmV3IG8uTWF0cml4NCkuc2V0KHRbMF0sdFsxXSx0WzJdLHRbM10sdFs0XSx0WzVdLHRbNl0sdFs3XSx0WzhdLHRbOV0sdFsxMF0sdFsxMV0sdFsxMl0sdFsxM10sdFsxNF0sdFsxNV0pfWZ1bmN0aW9uIEN0KHQpe2lmKHQ+LTEmJnQ8Myl7dmFyIGU9W1wiWFwiLFwiWVwiLFwiWlwiXSxuPXtYOjAsWToxLFo6Mn07dD1JdChlW3RdKSx0PW5bdF19cmV0dXJuIHR9ZnVuY3Rpb24gSXQodCl7aWYoSnQuY29udmVydFVwQXhpcylzd2l0Y2godCl7Y2FzZVwiWFwiOnN3aXRjaCgkdCl7Y2FzZVwiWHRvWVwiOmNhc2VcIlh0b1pcIjpjYXNlXCJZdG9YXCI6dD1cIllcIjticmVhaztjYXNlXCJadG9YXCI6dD1cIlpcIn1icmVhaztjYXNlXCJZXCI6c3dpdGNoKCR0KXtjYXNlXCJYdG9ZXCI6Y2FzZVwiWXRvWFwiOmNhc2VcIlp0b1hcIjp0PVwiWFwiO2JyZWFrO2Nhc2VcIlh0b1pcIjpjYXNlXCJZdG9aXCI6Y2FzZVwiWnRvWVwiOnQ9XCJaXCJ9YnJlYWs7Y2FzZVwiWlwiOnN3aXRjaCgkdCl7Y2FzZVwiWHRvWlwiOnQ9XCJYXCI7YnJlYWs7Y2FzZVwiWXRvWlwiOmNhc2VcIlp0b1hcIjpjYXNlXCJadG9ZXCI6dD1cIllcIn19cmV0dXJuIHR9dmFyIE90LFR0LFB0LEF0LEx0LE50LGt0LFJ0LER0LEZ0PW51bGwsQnQ9bnVsbCxqdD1udWxsLFV0PXt9LHp0PXt9LEd0PXt9LFZ0PXt9LFh0PXt9LEh0PXt9LHF0PXt9LFl0PXt9LFd0PXt9LFp0PW8uU21vb3RoU2hhZGluZyxKdD17Y2VudGVyR2VvbWV0cnk6ITEsY29udmVydFVwQXhpczohMSxzdWJkaXZpZGVGYWNlczohMCx1cEF4aXM6XCJZXCIsZGVmYXVsdEVudk1hcDpudWxsfSxLdD0xLFF0PVwiWVwiLCR0PW51bGw7cmV0dXJuIEkucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07XCJpbml0X2Zyb21cIj09PW4ubm9kZU5hbWUmJih0aGlzLmluaXRfZnJvbT1uLnRleHRDb250ZW50KX1yZXR1cm4gdGhpc30sTy5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5pZD10LmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMubmFtZT10LmdldEF0dHJpYnV0ZShcIm5hbWVcIiksdGhpcy50eXBlPVwibm9uZVwiO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtzd2l0Y2gobi5ub2RlTmFtZSl7Y2FzZVwic2tpblwiOnRoaXMuc2tpbj0obmV3IFApLnBhcnNlKG4pLHRoaXMudHlwZT1uLm5vZGVOYW1lO2JyZWFrO2Nhc2VcIm1vcnBoXCI6dGhpcy5tb3JwaD0obmV3IFQpLnBhcnNlKG4pLHRoaXMudHlwZT1uLm5vZGVOYW1lfX1yZXR1cm4gdGhpc30sVC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dmFyIGUsbj17fSxpPVtdO2Zvcih0aGlzLm1ldGhvZD10LmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKSx0aGlzLnNvdXJjZT10LmdldEF0dHJpYnV0ZShcInNvdXJjZVwiKS5yZXBsYWNlKC9eIy8sXCJcIiksZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciByPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1yLm5vZGVUeXBlKXN3aXRjaChyLm5vZGVOYW1lKXtjYXNlXCJzb3VyY2VcIjp2YXIgbz0obmV3IHEpLnBhcnNlKHIpO25bby5pZF09bzticmVhaztjYXNlXCJ0YXJnZXRzXCI6aT10aGlzLnBhcnNlSW5wdXRzKHIpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5sb2coci5ub2RlTmFtZSl9fWZvcihlPTA7ZTxpLmxlbmd0aDtlKyspe3ZhciBhPWlbZV0sbz1uW2Euc291cmNlXTtzd2l0Y2goYS5zZW1hbnRpYyl7Y2FzZVwiTU9SUEhfVEFSR0VUXCI6dGhpcy50YXJnZXRzPW8ucmVhZCgpO2JyZWFrO2Nhc2VcIk1PUlBIX1dFSUdIVFwiOnRoaXMud2VpZ2h0cz1vLnJlYWQoKX19cmV0dXJuIHRoaXN9LFQucHJvdG90eXBlLnBhcnNlSW5wdXRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5jaGlsZE5vZGVzW25dO2lmKDE9PWkubm9kZVR5cGUpc3dpdGNoKGkubm9kZU5hbWUpe2Nhc2VcImlucHV0XCI6ZS5wdXNoKChuZXcgSCkucGFyc2UoaSkpfX1yZXR1cm4gZX0sUC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dmFyIGUsbixpPXt9O3RoaXMuc291cmNlPXQuZ2V0QXR0cmlidXRlKFwic291cmNlXCIpLnJlcGxhY2UoL14jLyxcIlwiKSx0aGlzLmludkJpbmRNYXRyaWNlcz1bXSx0aGlzLmpvaW50cz1bXSx0aGlzLndlaWdodHM9W107Zm9yKHZhciByPTA7cjx0LmNoaWxkTm9kZXMubGVuZ3RoO3IrKyl7dmFyIG89dC5jaGlsZE5vZGVzW3JdO2lmKDE9PW8ubm9kZVR5cGUpc3dpdGNoKG8ubm9kZU5hbWUpe2Nhc2VcImJpbmRfc2hhcGVfbWF0cml4XCI6dmFyIGE9cHQoby50ZXh0Q29udGVudCk7dGhpcy5iaW5kU2hhcGVNYXRyaXg9TXQoYSk7YnJlYWs7Y2FzZVwic291cmNlXCI6dmFyIHM9KG5ldyBxKS5wYXJzZShvKTtpW3MuaWRdPXM7YnJlYWs7Y2FzZVwiam9pbnRzXCI6ZT1vO2JyZWFrO2Nhc2VcInZlcnRleF93ZWlnaHRzXCI6bj1vO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5sb2coby5ub2RlTmFtZSl9fXJldHVybiB0aGlzLnBhcnNlSm9pbnRzKGUsaSksdGhpcy5wYXJzZVdlaWdodHMobixpKSx0aGlzfSxQLnByb3RvdHlwZS5wYXJzZUpvaW50cz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dC5jaGlsZE5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPXQuY2hpbGROb2Rlc1tuXTtpZigxPT1pLm5vZGVUeXBlKXN3aXRjaChpLm5vZGVOYW1lKXtjYXNlXCJpbnB1dFwiOnZhciByPShuZXcgSCkucGFyc2UoaSksbz1lW3Iuc291cmNlXTtcIkpPSU5UXCI9PT1yLnNlbWFudGljP3RoaXMuam9pbnRzPW8ucmVhZCgpOlwiSU5WX0JJTkRfTUFUUklYXCI9PT1yLnNlbWFudGljJiYodGhpcy5pbnZCaW5kTWF0cmljZXM9by5yZWFkKCkpfX19LFAucHJvdG90eXBlLnBhcnNlV2VpZ2h0cz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbixpLHI9W10sbz0wO288dC5jaGlsZE5vZGVzLmxlbmd0aDtvKyspe3ZhciBhPXQuY2hpbGROb2Rlc1tvXTtpZigxPT1hLm5vZGVUeXBlKXN3aXRjaChhLm5vZGVOYW1lKXtjYXNlXCJpbnB1dFwiOnIucHVzaCgobmV3IEgpLnBhcnNlKGEpKTticmVhaztjYXNlXCJ2XCI6bj1ndChhLnRleHRDb250ZW50KTticmVhaztjYXNlXCJ2Y291bnRcIjppPWd0KGEudGV4dENvbnRlbnQpfX1mb3IodmFyIHM9MCxvPTA7bzxpLmxlbmd0aDtvKyspe2Zvcih2YXIgdT1pW29dLGw9W10sYz0wO2M8dTtjKyspe2Zvcih2YXIgaD17fSxmPTA7ZjxyLmxlbmd0aDtmKyspe3ZhciBkPXJbZl0scD1uW3MrZC5vZmZzZXRdO3N3aXRjaChkLnNlbWFudGljKXtjYXNlXCJKT0lOVFwiOmguam9pbnQ9cDticmVhaztjYXNlXCJXRUlHSFRcIjpoLndlaWdodD1lW2Quc291cmNlXS5kYXRhW3BdfX1sLnB1c2goaCkscys9ci5sZW5ndGh9Zm9yKHZhciBjPTA7YzxsLmxlbmd0aDtjKyspbFtjXS5pbmRleD1vO3RoaXMud2VpZ2h0cy5wdXNoKGwpfX0sQS5wcm90b3R5cGUuZ2V0Q2hpbGRCeUlkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLm5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPXRoaXMubm9kZXNbbl0uZ2V0Q2hpbGRCeUlkKHQsZSk7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sQS5wcm90b3R5cGUuZ2V0Q2hpbGRCeVNpZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy5ub2Rlcy5sZW5ndGg7bisrKXt2YXIgaT10aGlzLm5vZGVzW25dLmdldENoaWxkQnlTaWQodCxlKTtpZihpKXJldHVybiBpfXJldHVybiBudWxsfSxBLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLmlkPXQuZ2V0QXR0cmlidXRlKFwiaWRcIiksdGhpcy5uYW1lPXQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSx0aGlzLm5vZGVzPVtdO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJub2RlXCI6dGhpcy5ub2Rlcy5wdXNoKChuZXcgTCkucGFyc2UobikpfX1yZXR1cm4gdGhpc30sTC5wcm90b3R5cGUuZ2V0Q2hhbm5lbEZvclRyYW5zZm9ybT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuY2hhbm5lbHMubGVuZ3RoO2UrKyl7dmFyIG4saSxyPXRoaXMuY2hhbm5lbHNbZV0sbz1yLnRhcmdldC5zcGxpdChcIi9cIiksYT0oby5zaGlmdCgpLG8uc2hpZnQoKSkscz1hLmluZGV4T2YoXCIuXCIpPj0wLHU9YS5pbmRleE9mKFwiKFwiKT49MDtpZihzKW89YS5zcGxpdChcIi5cIiksYT1vLnNoaWZ0KCksaT1vLnNoaWZ0KCk7ZWxzZSBpZih1KXtuPWEuc3BsaXQoXCIoXCIpLGE9bi5zaGlmdCgpO2Zvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCsrKW5bbF09cGFyc2VJbnQobltsXS5yZXBsYWNlKC9cXCkvLFwiXCIpKX1pZihhPT09dClyZXR1cm4gci5pbmZvPXtzaWQ6YSxkb3RTeW50YXg6cyxhcnJTeW50YXg6dSxhcnJJbmRpY2VzOm59LHJ9cmV0dXJuIG51bGx9LEwucHJvdG90eXBlLmdldENoaWxkQnlJZD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuaWQ9PT10KXJldHVybiB0aGlzO2lmKGUpZm9yKHZhciBuPTA7bjx0aGlzLm5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPXRoaXMubm9kZXNbbl0uZ2V0Q2hpbGRCeUlkKHQsZSk7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sTC5wcm90b3R5cGUuZ2V0Q2hpbGRCeVNpZD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuc2lkPT09dClyZXR1cm4gdGhpcztpZihlKWZvcih2YXIgbj0wO248dGhpcy5ub2Rlcy5sZW5ndGg7bisrKXt2YXIgaT10aGlzLm5vZGVzW25dLmdldENoaWxkQnlTaWQodCxlKTtpZihpKXJldHVybiBpfXJldHVybiBudWxsfSxMLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1CeVNpZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMudHJhbnNmb3Jtcy5sZW5ndGg7ZSsrKWlmKHRoaXMudHJhbnNmb3Jtc1tlXS5zaWQ9PT10KXJldHVybiB0aGlzLnRyYW5zZm9ybXNbZV07cmV0dXJuIG51bGx9LEwucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3ZhciBlO3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSx0aGlzLnNpZD10LmdldEF0dHJpYnV0ZShcInNpZFwiKSx0aGlzLm5hbWU9dC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLHRoaXMudHlwZT10LmdldEF0dHJpYnV0ZShcInR5cGVcIiksdGhpcy5sYXllcj10LmdldEF0dHJpYnV0ZShcImxheWVyXCIpLHRoaXMudHlwZT1cIkpPSU5UXCI9PT10aGlzLnR5cGU/dGhpcy50eXBlOlwiTk9ERVwiLHRoaXMubm9kZXM9W10sdGhpcy50cmFuc2Zvcm1zPVtdLHRoaXMuZ2VvbWV0cmllcz1bXSx0aGlzLmNhbWVyYXM9W10sdGhpcy5saWdodHM9W10sdGhpcy5jb250cm9sbGVycz1bXSx0aGlzLm1hdHJpeD1uZXcgby5NYXRyaXg0O2Zvcih2YXIgbj0wO248dC5jaGlsZE5vZGVzLmxlbmd0aDtuKyspe3ZhciBpPXQuY2hpbGROb2Rlc1tuXTtpZigxPT1pLm5vZGVUeXBlKXN3aXRjaChpLm5vZGVOYW1lKXtjYXNlXCJub2RlXCI6dGhpcy5ub2Rlcy5wdXNoKChuZXcgTCkucGFyc2UoaSkpO2JyZWFrO2Nhc2VcImluc3RhbmNlX2NhbWVyYVwiOnRoaXMuY2FtZXJhcy5wdXNoKChuZXcgb3QpLnBhcnNlKGkpKTticmVhaztjYXNlXCJpbnN0YW5jZV9jb250cm9sbGVyXCI6dGhpcy5jb250cm9sbGVycy5wdXNoKChuZXcgaykucGFyc2UoaSkpO2JyZWFrO2Nhc2VcImluc3RhbmNlX2dlb21ldHJ5XCI6dGhpcy5nZW9tZXRyaWVzLnB1c2goKG5ldyBEKS5wYXJzZShpKSk7YnJlYWs7Y2FzZVwiaW5zdGFuY2VfbGlnaHRcIjp0aGlzLmxpZ2h0cy5wdXNoKChuZXcgc3QpLnBhcnNlKGkpKTticmVhaztjYXNlXCJpbnN0YW5jZV9ub2RlXCI6ZT1pLmdldEF0dHJpYnV0ZShcInVybFwiKS5yZXBsYWNlKC9eIy8sXCJcIik7dmFyIHI9XyhlKTtyJiZ0aGlzLm5vZGVzLnB1c2goKG5ldyBMKS5wYXJzZShyKSk7YnJlYWs7Y2FzZVwicm90YXRlXCI6Y2FzZVwidHJhbnNsYXRlXCI6Y2FzZVwic2NhbGVcIjpjYXNlXCJtYXRyaXhcIjpjYXNlXCJsb29rYXRcIjpjYXNlXCJza2V3XCI6dGhpcy50cmFuc2Zvcm1zLnB1c2goKG5ldyBOKS5wYXJzZShpKSk7YnJlYWs7Y2FzZVwiZXh0cmFcIjpicmVhaztkZWZhdWx0OmNvbnNvbGUubG9nKGkubm9kZU5hbWUpfX1yZXR1cm4gdGhpcy5jaGFubmVscz1iKHRoaXMpLHgodGhpcyksdGhpcy51cGRhdGVNYXRyaXgoKSx0aGlzfSxMLnByb3RvdHlwZS51cGRhdGVNYXRyaXg9ZnVuY3Rpb24oKXt0aGlzLm1hdHJpeC5pZGVudGl0eSgpO2Zvcih2YXIgdD0wO3Q8dGhpcy50cmFuc2Zvcm1zLmxlbmd0aDt0KyspdGhpcy50cmFuc2Zvcm1zW3RdLmFwcGx5KHRoaXMubWF0cml4KX0sTi5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2lkPXQuZ2V0QXR0cmlidXRlKFwic2lkXCIpLHRoaXMudHlwZT10Lm5vZGVOYW1lLHRoaXMuZGF0YT1wdCh0LnRleHRDb250ZW50KSx0aGlzLmNvbnZlcnQoKSx0aGlzfSxOLnByb3RvdHlwZS5jb252ZXJ0PWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZVwibWF0cml4XCI6dGhpcy5vYmo9TXQodGhpcy5kYXRhKTticmVhaztjYXNlXCJyb3RhdGVcIjp0aGlzLmFuZ2xlPW8uTWF0aC5kZWdUb1JhZCh0aGlzLmRhdGFbM10pO2Nhc2VcInRyYW5zbGF0ZVwiOnd0KHRoaXMuZGF0YSwtMSksdGhpcy5vYmo9bmV3IG8uVmVjdG9yMyh0aGlzLmRhdGFbMF0sdGhpcy5kYXRhWzFdLHRoaXMuZGF0YVsyXSk7YnJlYWs7Y2FzZVwic2NhbGVcIjp3dCh0aGlzLmRhdGEsMSksdGhpcy5vYmo9bmV3IG8uVmVjdG9yMyh0aGlzLmRhdGFbMF0sdGhpcy5kYXRhWzFdLHRoaXMuZGF0YVsyXSk7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhcIkNhbiBub3QgY29udmVydCBUcmFuc2Zvcm0gb2YgdHlwZSBcIit0aGlzLnR5cGUpfX0sTi5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgby5NYXRyaXg0O3JldHVybiBmdW5jdGlvbihlKXtzd2l0Y2godGhpcy50eXBlKXtjYXNlXCJtYXRyaXhcIjplLm11bHRpcGx5KHRoaXMub2JqKTticmVhaztjYXNlXCJ0cmFuc2xhdGVcIjplLm11bHRpcGx5KHQubWFrZVRyYW5zbGF0aW9uKHRoaXMub2JqLngsdGhpcy5vYmoueSx0aGlzLm9iai56KSk7YnJlYWs7Y2FzZVwicm90YXRlXCI6ZS5tdWx0aXBseSh0Lm1ha2VSb3RhdGlvbkF4aXModGhpcy5vYmosdGhpcy5hbmdsZSkpO2JyZWFrO2Nhc2VcInNjYWxlXCI6ZS5zY2FsZSh0aGlzLm9iail9fX0oKSxOLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1bXCJYXCIsXCJZXCIsXCJaXCIsXCJBTkdMRVwiXTtzd2l0Y2godGhpcy50eXBlKXtjYXNlXCJtYXRyaXhcIjppZihlKWlmKDE9PT1lLmxlbmd0aClzd2l0Y2goZVswXSl7Y2FzZSAwOnRoaXMub2JqLm4xMT10WzBdLHRoaXMub2JqLm4yMT10WzFdLHRoaXMub2JqLm4zMT10WzJdLHRoaXMub2JqLm40MT10WzNdO2JyZWFrO2Nhc2UgMTp0aGlzLm9iai5uMTI9dFswXSx0aGlzLm9iai5uMjI9dFsxXSx0aGlzLm9iai5uMzI9dFsyXSx0aGlzLm9iai5uNDI9dFszXTticmVhaztjYXNlIDI6dGhpcy5vYmoubjEzPXRbMF0sdGhpcy5vYmoubjIzPXRbMV0sdGhpcy5vYmoubjMzPXRbMl0sdGhpcy5vYmoubjQzPXRbM107YnJlYWs7Y2FzZSAzOnRoaXMub2JqLm4xND10WzBdLHRoaXMub2JqLm4yND10WzFdLHRoaXMub2JqLm4zND10WzJdLHRoaXMub2JqLm40ND10WzNdfWVsc2UgaWYoMj09PWUubGVuZ3RoKXt2YXIgaT1cIm5cIisoZVswXSsxKSsoZVsxXSsxKTt0aGlzLm9ialtpXT10fWVsc2UgY29uc29sZS5sb2coXCJJbmNvcnJlY3QgYWRkcmVzc2luZyBvZiBtYXRyaXggaW4gdHJhbnNmb3JtLlwiKTtlbHNlIHRoaXMub2JqLmNvcHkodCk7YnJlYWs7Y2FzZVwidHJhbnNsYXRlXCI6Y2FzZVwic2NhbGVcIjpzd2l0Y2goXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpJiYoZT1uW2VbMF1dKSxlKXtjYXNlXCJYXCI6dGhpcy5vYmoueD10O2JyZWFrO2Nhc2VcIllcIjp0aGlzLm9iai55PXQ7YnJlYWs7Y2FzZVwiWlwiOnRoaXMub2JqLno9dDticmVhaztkZWZhdWx0OnRoaXMub2JqLng9dFswXSx0aGlzLm9iai55PXRbMV0sdGhpcy5vYmouej10WzJdfWJyZWFrO2Nhc2VcInJvdGF0ZVwiOnN3aXRjaChcIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkmJihlPW5bZVswXV0pLGUpe2Nhc2VcIlhcIjp0aGlzLm9iai54PXQ7YnJlYWs7Y2FzZVwiWVwiOnRoaXMub2JqLnk9dDticmVhaztjYXNlXCJaXCI6dGhpcy5vYmouej10O2JyZWFrO2Nhc2VcIkFOR0xFXCI6dGhpcy5hbmdsZT1vLk1hdGguZGVnVG9SYWQodCk7YnJlYWs7ZGVmYXVsdDp0aGlzLm9iai54PXRbMF0sdGhpcy5vYmoueT10WzFdLHRoaXMub2JqLno9dFsyXSx0aGlzLmFuZ2xlPW8uTWF0aC5kZWdUb1JhZCh0WzNdKX19fSxrLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLnVybD10LmdldEF0dHJpYnV0ZShcInVybFwiKS5yZXBsYWNlKC9eIy8sXCJcIiksdGhpcy5za2VsZXRvbj1bXSx0aGlzLmluc3RhbmNlX21hdGVyaWFsPVtdO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT09bi5ub2RlVHlwZSlzd2l0Y2gobi5ub2RlTmFtZSl7Y2FzZVwic2tlbGV0b25cIjp0aGlzLnNrZWxldG9uLnB1c2gobi50ZXh0Q29udGVudC5yZXBsYWNlKC9eIy8sXCJcIikpO2JyZWFrO2Nhc2VcImJpbmRfbWF0ZXJpYWxcIjpmb3IodmFyIGk9bi5xdWVyeVNlbGVjdG9yQWxsKFwiaW5zdGFuY2VfbWF0ZXJpYWxcIikscj0wO3I8aS5sZW5ndGg7cisrKXt2YXIgbz1pW3JdO3RoaXMuaW5zdGFuY2VfbWF0ZXJpYWwucHVzaCgobmV3IFIpLnBhcnNlKG8pKX1icmVhaztjYXNlXCJleHRyYVwiOn19cmV0dXJuIHRoaXN9LFIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN5bWJvbD10LmdldEF0dHJpYnV0ZShcInN5bWJvbFwiKSx0aGlzLnRhcmdldD10LmdldEF0dHJpYnV0ZShcInRhcmdldFwiKS5yZXBsYWNlKC9eIy8sXCJcIiksdGhpc30sRC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy51cmw9dC5nZXRBdHRyaWJ1dGUoXCJ1cmxcIikucmVwbGFjZSgvXiMvLFwiXCIpLHRoaXMuaW5zdGFuY2VfbWF0ZXJpYWw9W107Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUmJlwiYmluZF9tYXRlcmlhbFwiPT09bi5ub2RlTmFtZSl7Zm9yKHZhciBpPW4ucXVlcnlTZWxlY3RvckFsbChcImluc3RhbmNlX21hdGVyaWFsXCIpLHI9MDtyPGkubGVuZ3RoO3IrKyl7dmFyIG89aVtyXTt0aGlzLmluc3RhbmNlX21hdGVyaWFsLnB1c2goKG5ldyBSKS5wYXJzZShvKSl9YnJlYWt9fXJldHVybiB0aGlzfSxGLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLmlkPXQuZ2V0QXR0cmlidXRlKFwiaWRcIiksYnQodGhpcyx0KTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07c3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcIm1lc2hcIjp0aGlzLm1lc2g9bmV3IEIodGhpcykucGFyc2Uobik7YnJlYWs7Y2FzZVwiZXh0cmFcIjp9fXJldHVybiB0aGlzfSxCLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLnByaW1pdGl2ZXM9W107Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO3N3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJzb3VyY2VcIjpmdChuKTticmVhaztjYXNlXCJ2ZXJ0aWNlc1wiOnRoaXMudmVydGljZXM9KG5ldyBYKS5wYXJzZShuKTticmVhaztjYXNlXCJsaW5lc3RyaXBzXCI6dGhpcy5wcmltaXRpdmVzLnB1c2goKG5ldyB6KS5wYXJzZShuKSk7YnJlYWs7Y2FzZVwidHJpYW5nbGVzXCI6dGhpcy5wcmltaXRpdmVzLnB1c2goKG5ldyBHKS5wYXJzZShuKSk7YnJlYWs7Y2FzZVwicG9seWdvbnNcIjp0aGlzLnByaW1pdGl2ZXMucHVzaCgobmV3IGopLnBhcnNlKG4pKTticmVhaztjYXNlXCJwb2x5bGlzdFwiOnRoaXMucHJpbWl0aXZlcy5wdXNoKChuZXcgVSkucGFyc2UobikpfX1pZih0aGlzLmdlb21ldHJ5M2pzPW5ldyBvLkdlb21ldHJ5LG51bGw9PT10aGlzLnZlcnRpY2VzKXJldHVybiB0aGlzO2Zvcih2YXIgaT1VdFt0aGlzLnZlcnRpY2VzLmlucHV0LlBPU0lUSU9OLnNvdXJjZV0uZGF0YSxlPTA7ZTxpLmxlbmd0aDtlKz0zKXRoaXMuZ2VvbWV0cnkzanMudmVydGljZXMucHVzaChTdChpLGUpLmNsb25lKCkpO2Zvcih2YXIgZT0wO2U8dGhpcy5wcmltaXRpdmVzLmxlbmd0aDtlKyspe3ZhciByPXRoaXMucHJpbWl0aXZlc1tlXTtyLnNldFZlcnRpY2VzKHRoaXMudmVydGljZXMpLHRoaXMuaGFuZGxlUHJpbWl0aXZlKHIsdGhpcy5nZW9tZXRyeTNqcyl9cmV0dXJuIHRoaXMuZ2VvbWV0cnkzanMuY2FsY05vcm1hbHMmJih0aGlzLmdlb21ldHJ5M2pzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCksZGVsZXRlIHRoaXMuZ2VvbWV0cnkzanMuY2FsY05vcm1hbHMpLHRoaXN9LEIucHJvdG90eXBlLmhhbmRsZVByaW1pdGl2ZT1mdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiB6KXJldHVybiB2b2lkKGUuaXNMaW5lU3RyaXA9ITApO3ZhciBuLGkscixhLHMsdSxsLGM9dC5wLGg9dC5pbnB1dHMsZj0wLGQ9MyxwPTAsZz1bXTtmb3Iobj0wO248aC5sZW5ndGg7bisrKXtyPWhbbl07dmFyIHY9ci5vZmZzZXQrMTtzd2l0Y2gocD1wPHY/djpwLHIuc2VtYW50aWMpe2Nhc2VcIlRFWENPT1JEXCI6Zy5wdXNoKHIuc2V0KX19Zm9yKHZhciBtPTA7bTxjLmxlbmd0aDsrK20pZm9yKHZhciB5PWNbbV0sXz0wO188eS5sZW5ndGg7KXt2YXIgYj1bXSx4PVtdLHc9bnVsbCxFPVtdO2ZvcihkPXQudmNvdW50P3QudmNvdW50Lmxlbmd0aD90LnZjb3VudFtmKytdOnQudmNvdW50OnkubGVuZ3RoL3Asbj0wO248ZDtuKyspZm9yKGk9MDtpPGgubGVuZ3RoO2krKylzd2l0Y2gocj1oW2ldLHU9VXRbci5zb3VyY2VdLGE9eVtfK24qcCtyLm9mZnNldF0sbD11LmFjY2Vzc29yLnBhcmFtcy5sZW5ndGgscz1hKmwsci5zZW1hbnRpYyl7Y2FzZVwiVkVSVEVYXCI6Yi5wdXNoKGEpO2JyZWFrO2Nhc2VcIk5PUk1BTFwiOngucHVzaChTdCh1LmRhdGEscykpO2JyZWFrO2Nhc2VcIlRFWENPT1JEXCI6dz13fHx7fSx2b2lkIDA9PT13W3Iuc2V0XSYmKHdbci5zZXRdPVtdKSx3W3Iuc2V0XS5wdXNoKG5ldyBvLlZlY3RvcjIodS5kYXRhW3NdLHUuZGF0YVtzKzFdKSk7YnJlYWs7Y2FzZVwiQ09MT1JcIjpFLnB1c2goKG5ldyBvLkNvbG9yKS5zZXRSR0IodS5kYXRhW3NdLHUuZGF0YVtzKzFdLHUuZGF0YVtzKzJdKSl9aWYoMD09PXgubGVuZ3RoKWlmKHI9dGhpcy52ZXJ0aWNlcy5pbnB1dC5OT1JNQUwpe3U9VXRbci5zb3VyY2VdLGw9dS5hY2Nlc3Nvci5wYXJhbXMubGVuZ3RoO2Zvcih2YXIgUz0wLE09Yi5sZW5ndGg7UzxNO1MrKyl4LnB1c2goU3QodS5kYXRhLGJbU10qbCkpfWVsc2UgZS5jYWxjTm9ybWFscz0hMDtpZighdyYmKHc9e30scj10aGlzLnZlcnRpY2VzLmlucHV0LlRFWENPT1JEKSl7Zy5wdXNoKHIuc2V0KSx1PVV0W3Iuc291cmNlXSxsPXUuYWNjZXNzb3IucGFyYW1zLmxlbmd0aDtmb3IodmFyIFM9MCxNPWIubGVuZ3RoO1M8TTtTKyspcz1iW1NdKmwsdm9pZCAwPT09d1tyLnNldF0mJih3W3Iuc2V0XT1bXSksd1tyLnNldF0ucHVzaChuZXcgby5WZWN0b3IyKHUuZGF0YVtzXSwxLXUuZGF0YVtzKzFdKSl9aWYoMD09PUUubGVuZ3RoJiYocj10aGlzLnZlcnRpY2VzLmlucHV0LkNPTE9SKSl7dT1VdFtyLnNvdXJjZV0sbD11LmFjY2Vzc29yLnBhcmFtcy5sZW5ndGg7Zm9yKHZhciBTPTAsTT1iLmxlbmd0aDtTPE07UysrKXM9YltTXSpsLEUucHVzaCgobmV3IG8uQ29sb3IpLnNldFJHQih1LmRhdGFbc10sdS5kYXRhW3MrMV0sdS5kYXRhW3MrMl0pKX12YXIgQyxJLE89bnVsbCxUPVtdO2lmKDM9PT1kKVQucHVzaChuZXcgby5GYWNlMyhiWzBdLGJbMV0sYlsyXSx4LEUubGVuZ3RoP0U6bmV3IG8uQ29sb3IpKTtlbHNlIGlmKDQ9PT1kKVQucHVzaChuZXcgby5GYWNlMyhiWzBdLGJbMV0sYlszXSx4Lmxlbmd0aD9beFswXS5jbG9uZSgpLHhbMV0uY2xvbmUoKSx4WzNdLmNsb25lKCldOltdLEUubGVuZ3RoP1tFWzBdLEVbMV0sRVszXV06bmV3IG8uQ29sb3IpKSxULnB1c2gobmV3IG8uRmFjZTMoYlsxXSxiWzJdLGJbM10seC5sZW5ndGg/W3hbMV0uY2xvbmUoKSx4WzJdLmNsb25lKCkseFszXS5jbG9uZSgpXTpbXSxFLmxlbmd0aD9bRVsxXSxFWzJdLEVbM11dOm5ldyBvLkNvbG9yKSk7ZWxzZSBpZihkPjQmJkp0LnN1YmRpdmlkZUZhY2VzKXt2YXIgUD1FLmxlbmd0aD9FOm5ldyBvLkNvbG9yO2ZvcihpPTE7aTxkLTE7KVQucHVzaChuZXcgby5GYWNlMyhiWzBdLGJbaV0sYltpKzFdLHgubGVuZ3RoP1t4WzBdLmNsb25lKCkseFtpKytdLmNsb25lKCkseFtpXS5jbG9uZSgpXTpbXSxQKSl9aWYoVC5sZW5ndGgpZm9yKHZhciBTPTAsTT1ULmxlbmd0aDtTPE07UysrKWZvcihPPVRbU10sTy5kYWVNYXRlcmlhbD10Lm1hdGVyaWFsLGUuZmFjZXMucHVzaChPKSxpPTA7aTxnLmxlbmd0aDtpKyspQz13W2dbaV1dLEk9ZD40P1tDWzBdLENbUysxXSxDW1MrMl1dOjQ9PT1kPzA9PT1TP1tDWzBdLENbMV0sQ1szXV06W0NbMV0uY2xvbmUoKSxDWzJdLENbM10uY2xvbmUoKV06W0NbMF0sQ1sxXSxDWzJdXSx2b2lkIDA9PT1lLmZhY2VWZXJ0ZXhVdnNbaV0mJihlLmZhY2VWZXJ0ZXhVdnNbaV09W10pLGUuZmFjZVZlcnRleFV2c1tpXS5wdXNoKEkpO2Vsc2UgY29uc29sZS5sb2coXCJkcm9wcGVkIGZhY2Ugd2l0aCB2Y291bnQgXCIrZCtcIiBmb3IgZ2VvbWV0cnkgd2l0aCBpZDogXCIrZS5pZCk7Xys9cCpkfX0sai5wcm90b3R5cGUuc2V0VmVydGljZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmlucHV0cy5sZW5ndGg7ZSsrKXRoaXMuaW5wdXRzW2VdLnNvdXJjZT09PXQuaWQmJih0aGlzLmlucHV0c1tlXS5zb3VyY2U9dC5pbnB1dC5QT1NJVElPTi5zb3VyY2UpfSxqLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLm1hdGVyaWFsPXQuZ2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiksdGhpcy5jb3VudD15dCh0LFwiY291bnRcIiwwKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07c3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImlucHV0XCI6dGhpcy5pbnB1dHMucHVzaCgobmV3IEgpLnBhcnNlKHQuY2hpbGROb2Rlc1tlXSkpO2JyZWFrO2Nhc2VcInZjb3VudFwiOnRoaXMudmNvdW50PWd0KG4udGV4dENvbnRlbnQpO2JyZWFrO2Nhc2VcInBcIjp0aGlzLnAucHVzaChndChuLnRleHRDb250ZW50KSk7YnJlYWs7Y2FzZVwicGhcIjpjb25zb2xlLndhcm4oXCJwb2x5Z29uIGhvbGVzIG5vdCB5ZXQgc3VwcG9ydGVkIVwiKX19cmV0dXJuIHRoaXN9LFUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoai5wcm90b3R5cGUpLFUucHJvdG90eXBlLmNvbnN0cnVjdG9yPVUsei5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShqLnByb3RvdHlwZSksei5wcm90b3R5cGUuY29uc3RydWN0b3I9eixHLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGoucHJvdG90eXBlKSxHLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1HLFYucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMucGFyYW1zPVtdLHRoaXMuc291cmNlPXQuZ2V0QXR0cmlidXRlKFwic291cmNlXCIpLHRoaXMuY291bnQ9eXQodCxcImNvdW50XCIsMCksdGhpcy5zdHJpZGU9eXQodCxcInN0cmlkZVwiLDApO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZihcInBhcmFtXCI9PT1uLm5vZGVOYW1lKXt2YXIgaT17fTtpLm5hbWU9bi5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGkudHlwZT1uLmdldEF0dHJpYnV0ZShcInR5cGVcIiksdGhpcy5wYXJhbXMucHVzaChpKX19cmV0dXJuIHRoaXN9LFgucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKWlmKFwiaW5wdXRcIj09PXQuY2hpbGROb2Rlc1tlXS5ub2RlTmFtZSl7dmFyIG49KG5ldyBIKS5wYXJzZSh0LmNoaWxkTm9kZXNbZV0pO3RoaXMuaW5wdXRbbi5zZW1hbnRpY109bn1yZXR1cm4gdGhpc30sSC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VtYW50aWM9dC5nZXRBdHRyaWJ1dGUoXCJzZW1hbnRpY1wiKSx0aGlzLnNvdXJjZT10LmdldEF0dHJpYnV0ZShcInNvdXJjZVwiKS5yZXBsYWNlKC9eIy8sXCJcIiksdGhpcy5zZXQ9eXQodCxcInNldFwiLC0xKSx0aGlzLm9mZnNldD15dCh0LFwib2Zmc2V0XCIsMCksXCJURVhDT09SRFwiPT09dGhpcy5zZW1hbnRpYyYmdGhpcy5zZXQ8MCYmKHRoaXMuc2V0PTApLHRoaXN9LHEucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07c3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImJvb2xfYXJyYXlcIjp0aGlzLmRhdGE9ZHQobi50ZXh0Q29udGVudCksdGhpcy50eXBlPW4ubm9kZU5hbWU7YnJlYWs7Y2FzZVwiZmxvYXRfYXJyYXlcIjp0aGlzLmRhdGE9cHQobi50ZXh0Q29udGVudCksdGhpcy50eXBlPW4ubm9kZU5hbWU7YnJlYWs7Y2FzZVwiaW50X2FycmF5XCI6dGhpcy5kYXRhPWd0KG4udGV4dENvbnRlbnQpLHRoaXMudHlwZT1uLm5vZGVOYW1lO2JyZWFrO2Nhc2VcIklEUkVGX2FycmF5XCI6Y2FzZVwiTmFtZV9hcnJheVwiOnRoaXMuZGF0YT12dChuLnRleHRDb250ZW50KSx0aGlzLnR5cGU9bi5ub2RlTmFtZTticmVhaztjYXNlXCJ0ZWNobmlxdWVfY29tbW9uXCI6Zm9yKHZhciBpPTA7aTxuLmNoaWxkTm9kZXMubGVuZ3RoO2krKylpZihcImFjY2Vzc29yXCI9PT1uLmNoaWxkTm9kZXNbaV0ubm9kZU5hbWUpe3RoaXMuYWNjZXNzb3I9KG5ldyBWKS5wYXJzZShuLmNoaWxkTm9kZXNbaV0pO2JyZWFrfX19cmV0dXJuIHRoaXN9LHEucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPXRoaXMuYWNjZXNzb3IucGFyYW1zWzBdO3N3aXRjaChlLnR5cGUpe2Nhc2VcIklEUkVGXCI6Y2FzZVwiTmFtZVwiOmNhc2VcIm5hbWVcIjpjYXNlXCJmbG9hdFwiOnJldHVybiB0aGlzLmRhdGE7Y2FzZVwiZmxvYXQ0eDRcIjpmb3IodmFyIG49MDtuPHRoaXMuZGF0YS5sZW5ndGg7bis9MTYpe3ZhciBpPXRoaXMuZGF0YS5zbGljZShuLG4rMTYpLHI9TXQoaSk7dC5wdXNoKHIpfWJyZWFrO2RlZmF1bHQ6Y29uc29sZS5sb2coXCJDb2xsYWRhTG9hZGVyOiBTb3VyY2U6IFJlYWQgZG9udCBrbm93IGhvdyB0byByZWFkIFwiK2UudHlwZStcIi5cIil9cmV0dXJuIHR9LFkucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSx0aGlzLm5hbWU9dC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspaWYoXCJpbnN0YW5jZV9lZmZlY3RcIj09PXQuY2hpbGROb2Rlc1tlXS5ub2RlTmFtZSl7dGhpcy5pbnN0YW5jZV9lZmZlY3Q9KG5ldyAkKS5wYXJzZSh0LmNoaWxkTm9kZXNbZV0pO2JyZWFrfXJldHVybiB0aGlzfSxXLnByb3RvdHlwZS5pc0NvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnRleHR1cmV9LFcucHJvdG90eXBlLmlzVGV4dHVyZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT10aGlzLnRleHR1cmV9LFcucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe1widHJhbnNwYXJlbnRcIj09PXQubm9kZU5hbWUmJih0aGlzLm9wYXF1ZT10LmdldEF0dHJpYnV0ZShcIm9wYXF1ZVwiKSk7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImNvbG9yXCI6dmFyIGk9cHQobi50ZXh0Q29udGVudCk7dGhpcy5jb2xvcj1uZXcgby5Db2xvcix0aGlzLmNvbG9yLnNldFJHQihpWzBdLGlbMV0saVsyXSksdGhpcy5jb2xvci5hPWlbM107YnJlYWs7Y2FzZVwidGV4dHVyZVwiOnRoaXMudGV4dHVyZT1uLmdldEF0dHJpYnV0ZShcInRleHR1cmVcIiksdGhpcy50ZXhjb29yZD1uLmdldEF0dHJpYnV0ZShcInRleGNvb3JkXCIpLHRoaXMudGV4T3B0cz17b2Zmc2V0VTowLG9mZnNldFY6MCxyZXBlYXRVOjEscmVwZWF0VjoxLHdyYXBVOjEsd3JhcFY6MX0sdGhpcy5wYXJzZVRleHR1cmUobil9fXJldHVybiB0aGlzfSxXLnByb3RvdHlwZS5wYXJzZVRleHR1cmU9ZnVuY3Rpb24odCl7aWYoIXQuY2hpbGROb2RlcylyZXR1cm4gdGhpczt0LmNoaWxkTm9kZXNbMV0mJlwiZXh0cmFcIj09PXQuY2hpbGROb2Rlc1sxXS5ub2RlTmFtZSYmKHQ9dC5jaGlsZE5vZGVzWzFdLHQuY2hpbGROb2Rlc1sxXSYmXCJ0ZWNobmlxdWVcIj09PXQuY2hpbGROb2Rlc1sxXS5ub2RlTmFtZSYmKHQ9dC5jaGlsZE5vZGVzWzFdKSk7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO3N3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJvZmZzZXRVXCI6Y2FzZVwib2Zmc2V0VlwiOmNhc2VcInJlcGVhdFVcIjpjYXNlXCJyZXBlYXRWXCI6dGhpcy50ZXhPcHRzW24ubm9kZU5hbWVdPXBhcnNlRmxvYXQobi50ZXh0Q29udGVudCk7YnJlYWs7Y2FzZVwid3JhcFVcIjpjYXNlXCJ3cmFwVlwiOlwiVFJVRVwiPT09bi50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpP3RoaXMudGV4T3B0c1tuLm5vZGVOYW1lXT0xOnRoaXMudGV4T3B0c1tuLm5vZGVOYW1lXT1wYXJzZUludChuLnRleHRDb250ZW50KTticmVhaztkZWZhdWx0OnRoaXMudGV4T3B0c1tuLm5vZGVOYW1lXT1uLnRleHRDb250ZW50fX1yZXR1cm4gdGhpc30sWi5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImVtaXNzaW9uXCI6Y2FzZVwiZGlmZnVzZVwiOmNhc2VcInNwZWN1bGFyXCI6Y2FzZVwidHJhbnNwYXJlbnRcIjp0aGlzW24ubm9kZU5hbWVdPShuZXcgVykucGFyc2Uobik7YnJlYWs7Y2FzZVwiYnVtcFwiOnZhciBpPW4uZ2V0QXR0cmlidXRlKFwiYnVtcHR5cGVcIik7aT9cImhlaWdodGZpZWxkXCI9PT1pLnRvTG93ZXJDYXNlKCk/dGhpcy5idW1wPShuZXcgVykucGFyc2Uobik6XCJub3JtYWxtYXBcIj09PWkudG9Mb3dlckNhc2UoKT90aGlzLm5vcm1hbD0obmV3IFcpLnBhcnNlKG4pOihjb25zb2xlLmVycm9yKFwiU2hhZGVyLnByb3RvdHlwZS5wYXJzZTogSW52YWxpZCB2YWx1ZSBmb3IgYXR0cmlidXRlICdidW1wdHlwZScgKFwiK2krXCIpIC0gdmFsaWQgYnVtcHR5cGVzIGFyZSAnSEVJR0hURklFTEQnIGFuZCAnTk9STUFMTUFQJyAtIGRlZmF1bHRpbmcgdG8gJ0hFSUdIVEZJRUxEJ1wiKSx0aGlzLmJ1bXA9KG5ldyBXKS5wYXJzZShuKSk6KGNvbnNvbGUud2FybihcIlNoYWRlci5wcm90b3R5cGUucGFyc2U6IEF0dHJpYnV0ZSAnYnVtcHR5cGUnIG1pc3NpbmcgZnJvbSBidW1wIG5vZGUgLSBkZWZhdWx0aW5nIHRvICdIRUlHSFRGSUVMRCdcIiksdGhpcy5idW1wPShuZXcgVykucGFyc2UobikpO2JyZWFrO2Nhc2VcInNoaW5pbmVzc1wiOmNhc2VcInJlZmxlY3Rpdml0eVwiOmNhc2VcImluZGV4X29mX3JlZnJhY3Rpb25cIjpjYXNlXCJ0cmFuc3BhcmVuY3lcIjp2YXIgcj1uLnF1ZXJ5U2VsZWN0b3JBbGwoXCJmbG9hdFwiKTtyLmxlbmd0aD4wJiYodGhpc1tuLm5vZGVOYW1lXT1wYXJzZUZsb2F0KHJbMF0udGV4dENvbnRlbnQpKX19cmV0dXJuIHRoaXMuY3JlYXRlKCksdGhpc30sWi5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9e30sZT0hMTtpZih2b2lkIDAhPT10aGlzLnRyYW5zcGFyZW5jeSYmdm9pZCAwIT09dGhpcy50cmFuc3BhcmVudCl7dmFyIG49KHRoaXMudHJhbnNwYXJlbnQsKHRoaXMudHJhbnNwYXJlbnQuY29sb3Iucit0aGlzLnRyYW5zcGFyZW50LmNvbG9yLmcrdGhpcy50cmFuc3BhcmVudC5jb2xvci5iKS8zKnRoaXMudHJhbnNwYXJlbmN5KTtuPjAmJihlPSEwLHQudHJhbnNwYXJlbnQ9ITAsdC5vcGFjaXR5PTEtbil9dmFyIGk9e2RpZmZ1c2U6XCJtYXBcIixhbWJpZW50OlwibGlnaHRNYXBcIixzcGVjdWxhcjpcInNwZWN1bGFyTWFwXCIsZW1pc3Npb246XCJlbWlzc2lvbk1hcFwiLGJ1bXA6XCJidW1wTWFwXCIsbm9ybWFsOlwibm9ybWFsTWFwXCJ9O2Zvcih2YXIgciBpbiB0aGlzKXN3aXRjaChyKXtjYXNlXCJhbWJpZW50XCI6Y2FzZVwiZW1pc3Npb25cIjpjYXNlXCJkaWZmdXNlXCI6Y2FzZVwic3BlY3VsYXJcIjpjYXNlXCJidW1wXCI6Y2FzZVwibm9ybWFsXCI6dmFyIGE9dGhpc1tyXTtpZihhIGluc3RhbmNlb2YgVylpZihhLmlzVGV4dHVyZSgpKXt2YXIgcz1hLnRleHR1cmUsdT10aGlzLmVmZmVjdC5zYW1wbGVyW3NdO2lmKHZvaWQgMCE9PXUmJnZvaWQgMCE9PXUuc291cmNlKXt2YXIgbD10aGlzLmVmZmVjdC5zdXJmYWNlW3Uuc291cmNlXTtpZih2b2lkIDAhPT1sKXt2YXIgYz16dFtsLmluaXRfZnJvbV07aWYoYyl7dmFyIGgsZj1rdCtjLmluaXRfZnJvbSxkPW8uTG9hZGVyLkhhbmRsZXJzLmdldChmKTtudWxsIT09ZD9oPWQubG9hZChmKTooaD1uZXcgby5UZXh0dXJlLF90KGgsZikpLGgud3JhcFM9YS50ZXhPcHRzLndyYXBVP28uUmVwZWF0V3JhcHBpbmc6by5DbGFtcFRvRWRnZVdyYXBwaW5nLGgud3JhcFQ9YS50ZXhPcHRzLndyYXBWP28uUmVwZWF0V3JhcHBpbmc6by5DbGFtcFRvRWRnZVdyYXBwaW5nLGgub2Zmc2V0Lng9YS50ZXhPcHRzLm9mZnNldFUsaC5vZmZzZXQueT1hLnRleE9wdHMub2Zmc2V0VixoLnJlcGVhdC54PWEudGV4T3B0cy5yZXBlYXRVLGgucmVwZWF0Lnk9YS50ZXhPcHRzLnJlcGVhdFYsdFtpW3JdXT1oLFwiZW1pc3Npb25cIj09PXImJih0LmVtaXNzaXZlPTE2Nzc3MjE1KX19fX1lbHNlXCJkaWZmdXNlXCIhPT1yJiZlfHwoXCJlbWlzc2lvblwiPT09cj90LmVtaXNzaXZlPWEuY29sb3IuZ2V0SGV4KCk6dFtyXT1hLmNvbG9yLmdldEhleCgpKTticmVhaztjYXNlXCJzaGluaW5lc3NcIjp0W3JdPXRoaXNbcl07YnJlYWs7Y2FzZVwicmVmbGVjdGl2aXR5XCI6dFtyXT10aGlzW3JdLHRbcl0+MCYmKHQuZW52TWFwPUp0LmRlZmF1bHRFbnZNYXApLHQuY29tYmluZT1vLk1peE9wZXJhdGlvbjticmVhaztjYXNlXCJpbmRleF9vZl9yZWZyYWN0aW9uXCI6dC5yZWZyYWN0aW9uUmF0aW89dGhpc1tyXSwxIT09dGhpc1tyXSYmKHQuZW52TWFwPUp0LmRlZmF1bHRFbnZNYXApO2JyZWFrO2Nhc2VcInRyYW5zcGFyZW5jeVwiOn1zd2l0Y2godC5zaGFkaW5nPVp0LHQuc2lkZT10aGlzLmVmZmVjdC5kb3VibGVTaWRlZD9vLkRvdWJsZVNpZGU6by5Gcm9udFNpZGUsdm9pZCAwIT09dC5kaWZmdXNlJiYodC5jb2xvcj10LmRpZmZ1c2UsZGVsZXRlIHQuZGlmZnVzZSksdGhpcy50eXBlKXtjYXNlXCJjb25zdGFudFwiOnZvaWQgMCE9dC5lbWlzc2l2ZSYmKHQuY29sb3I9dC5lbWlzc2l2ZSksdGhpcy5tYXRlcmlhbD1uZXcgby5NZXNoQmFzaWNNYXRlcmlhbCh0KTticmVhaztjYXNlXCJwaG9uZ1wiOmNhc2VcImJsaW5uXCI6dGhpcy5tYXRlcmlhbD1uZXcgby5NZXNoQmFzaWNNYXRlcmlhbCh0KTticmVhaztjYXNlXCJsYW1iZXJ0XCI6ZGVmYXVsdDp0aGlzLm1hdGVyaWFsPW5ldyBvLk1lc2hMYW1iZXJ0TWF0ZXJpYWwodCl9cmV0dXJuIHRoaXMubWF0ZXJpYWx9LEoucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJpbml0X2Zyb21cIjp0aGlzLmluaXRfZnJvbT1uLnRleHRDb250ZW50O2JyZWFrO2Nhc2VcImZvcm1hdFwiOnRoaXMuZm9ybWF0PW4udGV4dENvbnRlbnQ7YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhcInVuaGFuZGxlZCBTdXJmYWNlIHByb3A6IFwiK24ubm9kZU5hbWUpfX1yZXR1cm4gdGhpc30sSy5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcInNvdXJjZVwiOnRoaXMuc291cmNlPW4udGV4dENvbnRlbnQ7YnJlYWs7Y2FzZVwibWluZmlsdGVyXCI6dGhpcy5taW5maWx0ZXI9bi50ZXh0Q29udGVudDticmVhaztjYXNlXCJtYWdmaWx0ZXJcIjp0aGlzLm1hZ2ZpbHRlcj1uLnRleHRDb250ZW50O2JyZWFrO2Nhc2VcIm1pcGZpbHRlclwiOnRoaXMubWlwZmlsdGVyPW4udGV4dENvbnRlbnQ7YnJlYWs7Y2FzZVwid3JhcF9zXCI6dGhpcy53cmFwX3M9bi50ZXh0Q29udGVudDticmVhaztjYXNlXCJ3cmFwX3RcIjp0aGlzLndyYXBfdD1uLnRleHRDb250ZW50O2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5sb2coXCJ1bmhhbmRsZWQgU2FtcGxlcjJEIHByb3A6IFwiK24ubm9kZU5hbWUpfX1yZXR1cm4gdGhpc30sUS5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7aWYobnVsbD09PXRoaXMuc2hhZGVyKXJldHVybiBudWxsfSxRLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLmlkPXQuZ2V0QXR0cmlidXRlKFwiaWRcIiksdGhpcy5uYW1lPXQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSxidCh0aGlzLHQpLHRoaXMuc2hhZGVyPW51bGw7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcInByb2ZpbGVfQ09NTU9OXCI6dGhpcy5wYXJzZVRlY2huaXF1ZSh0aGlzLnBhcnNlUHJvZmlsZUNPTU1PTihuKSl9fXJldHVybiB0aGlzfSxRLnByb3RvdHlwZS5wYXJzZU5ld3BhcmFtPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LmdldEF0dHJpYnV0ZShcInNpZFwiKSxuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5jaGlsZE5vZGVzW25dO2lmKDE9PWkubm9kZVR5cGUpc3dpdGNoKGkubm9kZU5hbWUpe2Nhc2VcInN1cmZhY2VcIjp0aGlzLnN1cmZhY2VbZV09bmV3IEoodGhpcykucGFyc2UoaSk7YnJlYWs7Y2FzZVwic2FtcGxlcjJEXCI6dGhpcy5zYW1wbGVyW2VdPW5ldyBLKHRoaXMpLnBhcnNlKGkpO2JyZWFrO2Nhc2VcImV4dHJhXCI6YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhpLm5vZGVOYW1lKX19fSxRLnByb3RvdHlwZS5wYXJzZVByb2ZpbGVDT01NT049ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49MDtuPHQuY2hpbGROb2Rlcy5sZW5ndGg7bisrKXt2YXIgaT10LmNoaWxkTm9kZXNbbl07aWYoMT09aS5ub2RlVHlwZSlzd2l0Y2goaS5ub2RlTmFtZSl7Y2FzZVwicHJvZmlsZV9DT01NT05cIjp0aGlzLnBhcnNlUHJvZmlsZUNPTU1PTihpKTticmVhaztjYXNlXCJ0ZWNobmlxdWVcIjplPWk7YnJlYWs7Y2FzZVwibmV3cGFyYW1cIjp0aGlzLnBhcnNlTmV3cGFyYW0oaSk7YnJlYWs7Y2FzZVwiaW1hZ2VcIjp2YXIgcj0obmV3IEkpLnBhcnNlKGkpO3p0W3IuaWRdPXI7YnJlYWs7Y2FzZVwiZXh0cmFcIjpicmVhaztkZWZhdWx0OmNvbnNvbGUubG9nKGkubm9kZU5hbWUpfX1yZXR1cm4gZX0sUS5wcm90b3R5cGUucGFyc2VUZWNobmlxdWU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImNvbnN0YW50XCI6Y2FzZVwibGFtYmVydFwiOmNhc2VcImJsaW5uXCI6Y2FzZVwicGhvbmdcIjp0aGlzLnNoYWRlcj1uZXcgWihuLm5vZGVOYW1lLHRoaXMpLnBhcnNlKG4pO2JyZWFrO2Nhc2VcImV4dHJhXCI6dGhpcy5wYXJzZUV4dHJhKG4pfX19LFEucHJvdG90eXBlLnBhcnNlRXh0cmE9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcInRlY2huaXF1ZVwiOnRoaXMucGFyc2VFeHRyYVRlY2huaXF1ZShuKX19fSxRLnByb3RvdHlwZS5wYXJzZUV4dHJhVGVjaG5pcXVlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJidW1wXCI6dGhpcy5zaGFkZXIucGFyc2UodCl9fX0sJC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXJsPXQuZ2V0QXR0cmlidXRlKFwidXJsXCIpLnJlcGxhY2UoL14jLyxcIlwiKSx0aGlzfSx0dC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5pZD10LmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMubmFtZT10LmdldEF0dHJpYnV0ZShcIm5hbWVcIiksdGhpcy5zb3VyY2U9e307Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImFuaW1hdGlvblwiOnZhciBpPShuZXcgdHQpLnBhcnNlKG4pO2Zvcih2YXIgciBpbiBpLnNvdXJjZSl0aGlzLnNvdXJjZVtyXT1pLnNvdXJjZVtyXTtmb3IodmFyIG89MDtvPGkuY2hhbm5lbC5sZW5ndGg7bysrKXRoaXMuY2hhbm5lbC5wdXNoKGkuY2hhbm5lbFtvXSksdGhpcy5zYW1wbGVyLnB1c2goaS5zYW1wbGVyW29dKTticmVhaztjYXNlXCJzb3VyY2VcIjp2YXIgcj0obmV3IHEpLnBhcnNlKG4pO3RoaXMuc291cmNlW3IuaWRdPXI7YnJlYWs7Y2FzZVwic2FtcGxlclwiOnRoaXMuc2FtcGxlci5wdXNoKG5ldyBudCh0aGlzKS5wYXJzZShuKSk7YnJlYWs7Y2FzZVwiY2hhbm5lbFwiOnRoaXMuY2hhbm5lbC5wdXNoKG5ldyBldCh0aGlzKS5wYXJzZShuKSl9fXJldHVybiB0aGlzfSxldC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5zb3VyY2U9dC5nZXRBdHRyaWJ1dGUoXCJzb3VyY2VcIikucmVwbGFjZSgvXiMvLFwiXCIpLHRoaXMudGFyZ2V0PXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO3ZhciBlPXRoaXMudGFyZ2V0LnNwbGl0KFwiL1wiKSxuPShlLnNoaWZ0KCksZS5zaGlmdCgpKSxpPW4uaW5kZXhPZihcIi5cIik+PTAscj1uLmluZGV4T2YoXCIoXCIpPj0wO2lmKGkpZT1uLnNwbGl0KFwiLlwiKSx0aGlzLnNpZD1lLnNoaWZ0KCksdGhpcy5tZW1iZXI9ZS5zaGlmdCgpO2Vsc2UgaWYocil7dmFyIG89bi5zcGxpdChcIihcIik7dGhpcy5zaWQ9by5zaGlmdCgpO2Zvcih2YXIgYT0wO2E8by5sZW5ndGg7YSsrKW9bYV09cGFyc2VJbnQob1thXS5yZXBsYWNlKC9cXCkvLFwiXCIpKTt0aGlzLmFyckluZGljZXM9b31lbHNlIHRoaXMuc2lkPW47cmV0dXJuIHRoaXMuZnVsbFNpZD1uLHRoaXMuZG90U3ludGF4PWksdGhpcy5hcnJTeW50YXg9cix0aGlzfSxudC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5pZD10LmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMuaW5wdXRzPVtdO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJpbnB1dFwiOnRoaXMuaW5wdXRzLnB1c2goKG5ldyBIKS5wYXJzZShuKSl9fXJldHVybiB0aGlzfSxudC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmlucHV0cy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLmlucHV0c1t0XSxuPXRoaXMuYW5pbWF0aW9uLnNvdXJjZVtlLnNvdXJjZV07c3dpdGNoKGUuc2VtYW50aWMpe2Nhc2VcIklOUFVUXCI6dGhpcy5pbnB1dD1uLnJlYWQoKTticmVhaztjYXNlXCJPVVRQVVRcIjp0aGlzLm91dHB1dD1uLnJlYWQoKSx0aGlzLnN0cmlkZU91dD1uLmFjY2Vzc29yLnN0cmlkZTticmVhaztjYXNlXCJJTlRFUlBPTEFUSU9OXCI6dGhpcy5pbnRlcnBvbGF0aW9uPW4ucmVhZCgpO2JyZWFrO2Nhc2VcIklOX1RBTkdFTlRcIjpicmVhaztjYXNlXCJPVVRfVEFOR0VOVFwiOmJyZWFrO2RlZmF1bHQ6Y29uc29sZS5sb2coZS5zZW1hbnRpYyl9fWlmKHRoaXMuc3RhcnRUaW1lPTAsdGhpcy5lbmRUaW1lPTAsdGhpcy5kdXJhdGlvbj0wLHRoaXMuaW5wdXQubGVuZ3RoKXt0aGlzLnN0YXJ0VGltZT0xZTgsdGhpcy5lbmRUaW1lPS0xZTg7Zm9yKHZhciB0PTA7dDx0aGlzLmlucHV0Lmxlbmd0aDt0KyspdGhpcy5zdGFydFRpbWU9TWF0aC5taW4odGhpcy5zdGFydFRpbWUsdGhpcy5pbnB1dFt0XSksdGhpcy5lbmRUaW1lPU1hdGgubWF4KHRoaXMuZW5kVGltZSx0aGlzLmlucHV0W3RdKTt0aGlzLmR1cmF0aW9uPXRoaXMuZW5kVGltZS10aGlzLnN0YXJ0VGltZX19LG50LnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKHQsZSxuKXt2YXIgaTtpZihcIm1hdHJpeFwiPT09dCYmMTY9PT10aGlzLnN0cmlkZU91dClpPXRoaXMub3V0cHV0W2VdO2Vsc2UgaWYodGhpcy5zdHJpZGVPdXQ+MSl7aT1bXSxlKj10aGlzLnN0cmlkZU91dDtmb3IodmFyIHI9MDtyPHRoaXMuc3RyaWRlT3V0OysrcilpW3JdPXRoaXMub3V0cHV0W2Urcl07aWYoMz09PXRoaXMuc3RyaWRlT3V0KXN3aXRjaCh0KXtjYXNlXCJyb3RhdGVcIjpjYXNlXCJ0cmFuc2xhdGVcIjp3dChpLC0xKTticmVhaztjYXNlXCJzY2FsZVwiOnd0KGksMSl9ZWxzZSA0PT09dGhpcy5zdHJpZGVPdXQmJlwibWF0cml4XCI9PT10JiZ3dChpLC0xKX1lbHNlIGk9dGhpcy5vdXRwdXRbZV0sbiYmXCJ0cmFuc2xhdGVcIj09PXQmJihpPUV0KG4saSkpO3JldHVybiBpfSxpdC5wcm90b3R5cGUuYWRkVGFyZ2V0PWZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMudGFyZ2V0cy5wdXNoKHtzaWQ6dCxtZW1iZXI6bix0cmFuc2Zvcm06ZSxkYXRhOml9KX0saXQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy50YXJnZXRzLmxlbmd0aDsrK2Upe3ZhciBuPXRoaXMudGFyZ2V0c1tlXTt0JiZuLnNpZCE9PXR8fG4udHJhbnNmb3JtLnVwZGF0ZShuLmRhdGEsbi5tZW1iZXIpfX0saXQucHJvdG90eXBlLmdldFRhcmdldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMudGFyZ2V0cy5sZW5ndGg7KytlKWlmKHRoaXMudGFyZ2V0c1tlXS5zaWQ9PT10KXJldHVybiB0aGlzLnRhcmdldHNbZV07cmV0dXJuIG51bGx9LGl0LnByb3RvdHlwZS5oYXNUYXJnZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnRhcmdldHMubGVuZ3RoOysrZSlpZih0aGlzLnRhcmdldHNbZV0uc2lkPT09dClyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAsaT10aGlzLnRhcmdldHMubGVuZ3RoO248aTtuKyspe3ZhciByLG89dGhpcy50YXJnZXRzW25dLGE9dC5nZXRUYXJnZXQoby5zaWQpO2lmKFwibWF0cml4XCIhPT1vLnRyYW5zZm9ybS50eXBlJiZhKXt2YXIgcz0oZS10aGlzLnRpbWUpLyh0LnRpbWUtdGhpcy50aW1lKSx1PWEuZGF0YSxsPW8uZGF0YTtpZihzPDAmJihzPTApLHM+MSYmKHM9MSksbC5sZW5ndGgpe3I9W107Zm9yKHZhciBjPTA7YzxsLmxlbmd0aDsrK2MpcltjXT1sW2NdKyh1W2NdLWxbY10pKnN9ZWxzZSByPWwrKHUtbCkqc31lbHNlIHI9by5kYXRhO28udHJhbnNmb3JtLnVwZGF0ZShyLG8ubWVtYmVyKX19LHJ0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLmlkPXQuZ2V0QXR0cmlidXRlKFwiaWRcIiksdGhpcy5uYW1lPXQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07aWYoMT09bi5ub2RlVHlwZSlzd2l0Y2gobi5ub2RlTmFtZSl7Y2FzZVwib3B0aWNzXCI6dGhpcy5wYXJzZU9wdGljcyhuKX19cmV0dXJuIHRoaXN9LHJ0LnByb3RvdHlwZS5wYXJzZU9wdGljcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKWlmKFwidGVjaG5pcXVlX2NvbW1vblwiPT09dC5jaGlsZE5vZGVzW2VdLm5vZGVOYW1lKWZvcih2YXIgbj10LmNoaWxkTm9kZXNbZV0saT0wO2k8bi5jaGlsZE5vZGVzLmxlbmd0aDtpKyspaWYodGhpcy50ZWNobmlxdWU9bi5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lLFwicGVyc3BlY3RpdmVcIj09PXRoaXMudGVjaG5pcXVlKWZvcih2YXIgcj1uLmNoaWxkTm9kZXNbaV0sbz0wO288ci5jaGlsZE5vZGVzLmxlbmd0aDtvKyspe3ZhciBhPXIuY2hpbGROb2Rlc1tvXTtzd2l0Y2goYS5ub2RlTmFtZSl7Y2FzZVwieWZvdlwiOnRoaXMueWZvdj1hLnRleHRDb250ZW50O2JyZWFrO2Nhc2VcInhmb3ZcIjp0aGlzLnhmb3Y9YS50ZXh0Q29udGVudDticmVhaztjYXNlXCJ6bmVhclwiOnRoaXMuem5lYXI9YS50ZXh0Q29udGVudDticmVhaztjYXNlXCJ6ZmFyXCI6dGhpcy56ZmFyPWEudGV4dENvbnRlbnQ7YnJlYWs7Y2FzZVwiYXNwZWN0X3JhdGlvXCI6dGhpcy5hc3BlY3RfcmF0aW89YS50ZXh0Q29udGVudH19ZWxzZSBpZihcIm9ydGhvZ3JhcGhpY1wiPT09dGhpcy50ZWNobmlxdWUpZm9yKHZhciBzPW4uY2hpbGROb2Rlc1tpXSxvPTA7bzxzLmNoaWxkTm9kZXMubGVuZ3RoO28rKyl7dmFyIGE9cy5jaGlsZE5vZGVzW29dO3N3aXRjaChhLm5vZGVOYW1lKXtjYXNlXCJ4bWFnXCI6dGhpcy54bWFnPWEudGV4dENvbnRlbnQ7YnJlYWs7Y2FzZVwieW1hZ1wiOnRoaXMueW1hZz1hLnRleHRDb250ZW50O2JyZWFrO2Nhc2VcInpuZWFyXCI6dGhpcy56bmVhcj1hLnRleHRDb250ZW50O2JyZWFrO2Nhc2VcInpmYXJcIjp0aGlzLnpmYXI9YS50ZXh0Q29udGVudDticmVhaztjYXNlXCJhc3BlY3RfcmF0aW9cIjp0aGlzLmFzcGVjdF9yYXRpbz1hLnRleHRDb250ZW50fX1yZXR1cm4gdGhpc30sb3QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVybD10LmdldEF0dHJpYnV0ZShcInVybFwiKS5yZXBsYWNlKC9eIy8sXCJcIiksdGhpc30sYXQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuaWQ9dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSx0aGlzLm5hbWU9dC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJ0ZWNobmlxdWVfY29tbW9uXCI6dGhpcy5wYXJzZUNvbW1vbihuKTticmVhaztjYXNlXCJ0ZWNobmlxdWVcIjp0aGlzLnBhcnNlVGVjaG5pcXVlKG4pfX1yZXR1cm4gdGhpc30sYXQucHJvdG90eXBlLnBhcnNlQ29tbW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspc3dpdGNoKHQuY2hpbGROb2Rlc1tlXS5ub2RlTmFtZSl7Y2FzZVwiZGlyZWN0aW9uYWxcIjpjYXNlXCJwb2ludFwiOmNhc2VcInNwb3RcIjpjYXNlXCJhbWJpZW50XCI6dGhpcy50ZWNobmlxdWU9dC5jaGlsZE5vZGVzW2VdLm5vZGVOYW1lO2Zvcih2YXIgbj10LmNoaWxkTm9kZXNbZV0saT0wO2k8bi5jaGlsZE5vZGVzLmxlbmd0aDtpKyspe3ZhciByPW4uY2hpbGROb2Rlc1tpXTtzd2l0Y2goci5ub2RlTmFtZSl7Y2FzZVwiY29sb3JcIjp2YXIgYT1wdChyLnRleHRDb250ZW50KTt0aGlzLmNvbG9yPW5ldyBvLkNvbG9yKDApLHRoaXMuY29sb3Iuc2V0UkdCKGFbMF0sYVsxXSxhWzJdKSx0aGlzLmNvbG9yLmE9YVszXTticmVhaztjYXNlXCJmYWxsb2ZmX2FuZ2xlXCI6dGhpcy5mYWxsb2ZmX2FuZ2xlPXBhcnNlRmxvYXQoci50ZXh0Q29udGVudCk7YnJlYWs7Y2FzZVwicXVhZHJhdGljX2F0dGVudWF0aW9uXCI6dmFyIHM9cGFyc2VGbG9hdChyLnRleHRDb250ZW50KTt0aGlzLmRpc3RhbmNlPXM/TWF0aC5zcXJ0KDEvcyk6MH19fXJldHVybiB0aGlzfSxhdC5wcm90b3R5cGUucGFyc2VUZWNobmlxdWU9ZnVuY3Rpb24odCl7dGhpcy5wcm9maWxlPXQuZ2V0QXR0cmlidXRlKFwicHJvZmlsZVwiKTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07c3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImludGVuc2l0eVwiOnRoaXMuaW50ZW5zaXR5PXBhcnNlRmxvYXQobi50ZXh0Q29udGVudCl9fXJldHVybiB0aGlzfSxzdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudXJsPXQuZ2V0QXR0cmlidXRlKFwidXJsXCIpLnJlcGxhY2UoL14jLyxcIlwiKSx0aGlzfSx1dC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5pZD10LmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMubmFtZT10LmdldEF0dHJpYnV0ZShcIm5hbWVcIiksdGhpcy5qb2ludHM9W10sdGhpcy5saW5rcz1bXTtmb3IodmFyIGU9MDtlPHQuY2hpbGROb2Rlcy5sZW5ndGg7ZSsrKXt2YXIgbj10LmNoaWxkTm9kZXNbZV07aWYoMT09bi5ub2RlVHlwZSlzd2l0Y2gobi5ub2RlTmFtZSl7Y2FzZVwidGVjaG5pcXVlX2NvbW1vblwiOnRoaXMucGFyc2VDb21tb24obil9fXJldHVybiB0aGlzfSx1dC5wcm90b3R5cGUucGFyc2VDb21tb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKHQuY2hpbGROb2Rlc1tlXS5ub2RlTmFtZSl7Y2FzZVwiam9pbnRcIjp0aGlzLmpvaW50cy5wdXNoKChuZXcgbHQpLnBhcnNlKG4pKTticmVhaztjYXNlXCJsaW5rXCI6dGhpcy5saW5rcy5wdXNoKChuZXcgY3QpLnBhcnNlKG4pKX19cmV0dXJuIHRoaXN9LGx0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLnNpZD10LmdldEF0dHJpYnV0ZShcInNpZFwiKSx0aGlzLm5hbWU9dC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLHRoaXMuYXhpcz1uZXcgby5WZWN0b3IzLHRoaXMubGltaXRzPXttaW46MCxtYXg6MH0sdGhpcy50eXBlPVwiXCIsdGhpcy5zdGF0aWM9ITEsdGhpcy56ZXJvUG9zaXRpb249MCx0aGlzLm1pZGRsZVBvc2l0aW9uPTA7dmFyIGU9dC5xdWVyeVNlbGVjdG9yKFwiYXhpc1wiKSxuPXB0KGUudGV4dENvbnRlbnQpO3RoaXMuYXhpcz1TdChuLDApO3ZhciBpPXQucXVlcnlTZWxlY3RvcihcImxpbWl0cyBtaW5cIik/cGFyc2VGbG9hdCh0LnF1ZXJ5U2VsZWN0b3IoXCJsaW1pdHMgbWluXCIpLnRleHRDb250ZW50KTotMzYwLHI9dC5xdWVyeVNlbGVjdG9yKFwibGltaXRzIG1heFwiKT9wYXJzZUZsb2F0KHQucXVlcnlTZWxlY3RvcihcImxpbWl0cyBtYXhcIikudGV4dENvbnRlbnQpOjM2MDt0aGlzLmxpbWl0cz17bWluOmksbWF4OnJ9O2Zvcih2YXIgYT1bXCJwcmlzbWF0aWNcIixcInJldm9sdXRlXCJdLHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIHU9YVtzXSxsPXQucXVlcnlTZWxlY3Rvcih1KTtsJiYodGhpcy50eXBlPXUpfXJldHVybiB0aGlzLmxpbWl0cy5taW4+PXRoaXMubGltaXRzLm1heCYmKHRoaXMuc3RhdGljPSEwKSxcbnRoaXMubWlkZGxlUG9zaXRpb249KHRoaXMubGltaXRzLm1pbit0aGlzLmxpbWl0cy5tYXgpLzIsdGhpc30sY3QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuc2lkPXQuZ2V0QXR0cmlidXRlKFwic2lkXCIpLHRoaXMubmFtZT10LmdldEF0dHJpYnV0ZShcIm5hbWVcIiksdGhpcy50cmFuc2Zvcm1zPVtdLHRoaXMuYXR0YWNobWVudHM9W107Zm9yKHZhciBlPTA7ZTx0LmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5jaGlsZE5vZGVzW2VdO2lmKDE9PW4ubm9kZVR5cGUpc3dpdGNoKG4ubm9kZU5hbWUpe2Nhc2VcImF0dGFjaG1lbnRfZnVsbFwiOnRoaXMuYXR0YWNobWVudHMucHVzaCgobmV3IGh0KS5wYXJzZShuKSk7YnJlYWs7Y2FzZVwicm90YXRlXCI6Y2FzZVwidHJhbnNsYXRlXCI6Y2FzZVwibWF0cml4XCI6dGhpcy50cmFuc2Zvcm1zLnB1c2goKG5ldyBOKS5wYXJzZShuKSl9fXJldHVybiB0aGlzfSxodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5qb2ludD10LmdldEF0dHJpYnV0ZShcImpvaW50XCIpLnNwbGl0KFwiL1wiKS5wb3AoKSx0aGlzLmxpbmtzPVtdO2Zvcih2YXIgZT0wO2U8dC5jaGlsZE5vZGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuY2hpbGROb2Rlc1tlXTtpZigxPT1uLm5vZGVUeXBlKXN3aXRjaChuLm5vZGVOYW1lKXtjYXNlXCJsaW5rXCI6dGhpcy5saW5rcy5wdXNoKChuZXcgY3QpLnBhcnNlKG4pKTticmVhaztjYXNlXCJyb3RhdGVcIjpjYXNlXCJ0cmFuc2xhdGVcIjpjYXNlXCJtYXRyaXhcIjp0aGlzLnRyYW5zZm9ybXMucHVzaCgobmV3IE4pLnBhcnNlKG4pKX19cmV0dXJuIHRoaXN9LHtsb2FkOnQscGFyc2U6ZSxzZXRQcmVmZXJyZWRTaGFkaW5nOm4sYXBwbHlTa2luOnYsZ2VvbWV0cmllczpYdCxvcHRpb25zOkp0fX19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkscil7bih0aGlzLHQpLHRoaXMuX2NlbnRlcj1lLHRoaXMuX3JhZGl1cz1pLHRoaXMuX2hlaWdodD1yfXJldHVybiBpKHQsW3trZXk6XCJjb250YWluc1BvaW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5jbG9uZSgpO3JldHVybiBlLnN1Yih0aGlzLl9jZW50ZXIpLnNldFooMCkubGVuZ3RoKCk8dGhpcy5fcmFkaXVzJiZNYXRoLmFicyh0LnotdGhpcy5fY2VudGVyLnopPHRoaXMuX2hlaWdodH19LHtrZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX2NlbnRlcix0aGlzLl9yYWRpdXMsdGhpcy5faGVpZ2h0KX19LHtrZXk6XCJzY2FsZVJhZGl1c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3JhZGl1cyo9dH19XSksdH0oKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkscil7bih0aGlzLHQpLHRoaXMuX2NlbnRlcj1lLHRoaXMuX2E9aSx0aGlzLl9iPXJ9cmV0dXJuIGkodCxbe2tleTpcImNvbnRhaW5zUG9pbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmNsb25lKCk7cmV0dXJuKGUueC10aGlzLl9jZW50ZXIueCkqKGUueC10aGlzLl9jZW50ZXIueCkvdGhpcy5fYS90aGlzLl9hKyhlLnktdGhpcy5fY2VudGVyLnkpKihlLnktdGhpcy5fY2VudGVyLnkpL3RoaXMuX2IvdGhpcy5fYjwxfX0se2tleTpcImNsb25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5fY2VudGVyLHRoaXMuX2EsdGhpcy5fYil9fSx7a2V5Olwic2NhbGVSYWRpdXNcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9hKj10LHRoaXMuX2IqPXR9fV0pLHR9KCk7ZS5FbGxpcHRpY0N5bGluZGVyPW8sZS5DeWxpbmRlcj1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9dmFyIHI9bigxKSxvPW4oMiksYT1pKG8pOyFmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLnBvc2l0aW9uPW5ldyBhLlZlY3RvcjMsdGhpcy5ub3JtYWw9bmV3IGEuVmVjdG9yMyx0aGlzLnV2PW5ldyBhLlZlY3RvcjIsdGhpcy5za2luSW5kaWNlcz1uZXcgYS5WZWN0b3I0KDAsMCwwLDApLHRoaXMuc2tpbldlaWdodHM9bmV3IGEuVmVjdG9yNCgwLDAsMCwwKX1mdW5jdGlvbiBlKCl7dGhpcy52ZXJ0aWNlcz1bXX1mdW5jdGlvbiBuKCl7dGhpcy50cmlhbmdsZXM9W10sdGhpcy5tYXRlcmlhbEluZGV4PTB9ZnVuY3Rpb24gaSgpe3RoaXMuZmFjZXM9W10sdGhpcy5za2VsZXRvbj1udWxsfWZ1bmN0aW9uIG8oKXt9ZnVuY3Rpb24gcygpe31mdW5jdGlvbiB1KHQpe2Zvcih2YXIgZT1bXCJLXCIsXCJhXCIsXCJ5XCIsXCJkXCIsXCJhXCIsXCJyXCIsXCJhXCIsXCJcXFxcXCIsXCJGXCIsXCJCXCIsXCJYXCIsXCJcXFxcXCIsXCJCXCIsXCJpXCIsXCJuXCIsXCJhXCIsXCJyXCIsXCJ5XCIsXCJcXFxcXCIsXCJcXFxcXCJdLG49MCxpPWZ1bmN0aW9uKGUpe3ZhciBpPXRbZS0xXTtyZXR1cm4gdD10LnNsaWNlKG4rZSksbisrLGl9LHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIG89aSgxKTtpZihvPT1lW3JdKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGwodCl7dmFyIGU9L0ZCWFZlcnNpb246IChcXGQrKS8sbj10Lm1hdGNoKGUpO2lmKG4pe3ZhciBpPXBhcnNlSW50KG5bMV0pO3JldHVybiBpfXRocm93IG5ldyBFcnJvcihcIkZCWExvYWRlcjogQ2Fubm90IGZpbmQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGUgZmlsZSBnaXZlbi5cIil9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gdC80NjE4NjE1OGUzfWZ1bmN0aW9uIGgodCl7cmV0dXJuIHQuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KX0pfWZ1bmN0aW9uIGYodCl7cmV0dXJuIHQuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCl9KX1mdW5jdGlvbiBkKHQpe3JldHVybihuZXcgYS5NYXRyaXg0KS5mcm9tQXJyYXkoaCh0KSl9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdCpNYXRoLlBJLzE4MH1hLkZCWExvYWRlcj1mdW5jdGlvbih0KXthLkxvYWRlci5jYWxsKHRoaXMpLHRoaXMubWFuYWdlcj12b2lkIDAhPT10P3Q6YS5EZWZhdWx0TG9hZGluZ01hbmFnZXIsdGhpcy5maWxlTG9hZGVyPW5ldyBhLkZpbGVMb2FkZXIodGhpcy5tYW5hZ2VyKSx0aGlzLnRleHR1cmVMb2FkZXI9bmV3IGEuVGV4dHVyZUxvYWRlcih0aGlzLm1hbmFnZXIpfSxyKGEuRkJYTG9hZGVyLnByb3RvdHlwZSxhLkxvYWRlci5wcm90b3R5cGUpLGEuRkJYTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hLkZCWExvYWRlcixyKGEuRkJYTG9hZGVyLnByb3RvdHlwZSx7bG9hZDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLG89dC5zcGxpdCgvW1xcXFxcXC9dLyk7by5wb3AoKSxvPW8uam9pbihcIi9cIiksdGhpcy5maWxlTG9hZGVyLmxvYWQodCxmdW5jdGlvbihuKXtpZighdShuKSlyZXR1cm4gY29uc29sZS5lcnJvcihcIkZCWExvYWRlcjogRkJYIEJpbmFyeSBmb3JtYXQgbm90IHN1cHBvcnRlZC5cIiksdm9pZCByLm1hbmFnZXIuaXRlbUVycm9yKHQpO2lmKGwobik8N2UzKXJldHVybiBjb25zb2xlLmVycm9yKFwiRkJYTG9hZGVyOiBGQlggdmVyc2lvbiBub3Qgc3VwcG9ydGVkIGZvciBmaWxlIGF0IFwiK3QrXCIsIEZpbGVWZXJzaW9uOiBcIitsKG4pKSx2b2lkIHIubWFuYWdlci5pdGVtRXJyb3IodCk7dmFyIGk9ci5wYXJzZShuLG8pO2UoaSl9LG4saSl9LHBhcnNlOmZ1bmN0aW9uKGUscil7ZnVuY3Rpb24gcyh0KXt2YXIgZT1uZXcgTWFwO2lmKFwiQ29ubmVjdGlvbnNcImluIHQpe3ZhciBuPXQuQ29ubmVjdGlvbnMucHJvcGVydGllcy5jb25uZWN0aW9ucztuLmZvckVhY2goZnVuY3Rpb24odCl7ZS5oYXModFswXSl8fGUuc2V0KHRbMF0se3BhcmVudHM6W10sY2hpbGRyZW46W119KTt2YXIgbj17SUQ6dFsxXSxyZWxhdGlvbnNoaXA6dFsyXX07ZS5nZXQodFswXSkucGFyZW50cy5wdXNoKG4pLGUuaGFzKHRbMV0pfHxlLnNldCh0WzFdLHtwYXJlbnRzOltdLGNoaWxkcmVuOltdfSk7dmFyIGk9e0lEOnRbMF0scmVsYXRpb25zaGlwOnRbMl19O2UuZ2V0KHRbMV0pLmNoaWxkcmVuLnB1c2goaSl9KX1yZXR1cm4gZX1mdW5jdGlvbiB1KHQpe2Z1bmN0aW9uIGUodCl7dmFyIGU9dC5pZCxuPXQubmFtZSxpPXQucHJvcGVydGllcy5GaWxlTmFtZSxvPWkuc3BsaXQoL1tcXFxcXFwvXS8pO2lmKG8ubGVuZ3RoPjApdmFyIGE9b1tvLmxlbmd0aC0xXTtlbHNlIHZhciBhPWk7dmFyIHM9dy50ZXh0dXJlTG9hZGVyLmxvYWQocitcIi9cIithKTtyZXR1cm4gcy5uYW1lPW4scy5GQlhfSUQ9ZSxzfXZhciBuPW5ldyBNYXA7aWYoXCJUZXh0dXJlXCJpbiB0Lk9iamVjdHMuc3ViTm9kZXMpe3ZhciBpPXQuT2JqZWN0cy5zdWJOb2Rlcy5UZXh0dXJlO2Zvcih2YXIgbyBpbiBpKXt2YXIgYT1lKGlbb10pO24uc2V0KHBhcnNlSW50KG8pLGEpfX1yZXR1cm4gbn1mdW5jdGlvbiBsKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXtmdW5jdGlvbiBpKHQsZSxuKXt2YXIgaT17fTtyZXR1cm4gdC5EaWZmdXNlJiYoaS5jb2xvcj14KHQuRGlmZnVzZSkpLHQuU3BlY3VsYXImJihpLnNwZWN1bGFyPXgodC5TcGVjdWxhcikpLHQuU2hpbmluZXNzJiYoaS5zaGluaW5lc3M9dC5TaGluaW5lc3MudmFsdWUpLHQuRW1pc3NpdmUmJihpLmVtaXNzaXZlPXgodC5FbWlzc2l2ZSkpLHQuRW1pc3NpdmVGYWN0b3ImJihpLmVtaXNzaXZlSW50ZW5zaXR5PXQuRW1pc3NpdmVGYWN0b3IudmFsdWUpLHQuT3BhY2l0eSYmKGkub3BhY2l0eT10Lk9wYWNpdHkudmFsdWUpLGkub3BhY2l0eTwxJiYoaS50cmFuc3BhcmVudD0hMCksbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXQucmVsYXRpb25zaGlwO3N3aXRjaChuKXtjYXNlJyBcIkFtYmllbnRDb2xvcic6YnJlYWs7Y2FzZScgXCJEaWZmdXNlQ29sb3InOmkubWFwPWUuZ2V0KHQuSUQpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS53YXJuKFwiVW5rbm93biB0ZXh0dXJlIGFwcGxpY2F0aW9uIG9mIHR5cGUgXCIrbitcIiwgc2tpcHBpbmcgdGV4dHVyZVwiKX19KSxpfXZhciByLG89dC5pZCxzPXQuYXR0ck5hbWUsdT10LnByb3BlcnRpZXMuU2hhZGluZ01vZGVsLGw9bi5nZXQobykuY2hpbGRyZW4sYz1pKHQucHJvcGVydGllcyxlLGwpO3N3aXRjaCh1KXtjYXNlXCJwaG9uZ1wiOnI9bmV3IGEuTWVzaFBob25nTWF0ZXJpYWw7YnJlYWs7Y2FzZVwibGFtYmVydFwiOnI9bmV3IGEuTWVzaExhbWJlcnRNYXRlcmlhbDticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIk5vIGltcGxlbWVudGF0aW9uIGdpdmVuIGZvciBtYXRlcmlhbCB0eXBlIFwiK3UrXCIgaW4gRkJYTG9hZGVyLmpzLiAgRGVmYXVsdGluZyB0byBiYXNpYyBtYXRlcmlhbFwiKSxyPW5ldyBhLk1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjozMzQyNTkxfSl9cmV0dXJuIHIuc2V0VmFsdWVzKGMpLHIubmFtZT1zLHJ9dmFyIHI9bmV3IE1hcDtpZihcIk1hdGVyaWFsXCJpbiB0Lk9iamVjdHMuc3ViTm9kZXMpe3ZhciBvPXQuT2JqZWN0cy5zdWJOb2Rlcy5NYXRlcmlhbDtmb3IodmFyIHMgaW4gbyl7dmFyIHU9aShvW3NdLGUsbik7ci5zZXQocGFyc2VJbnQocyksdSl9fXJldHVybiByfWZ1bmN0aW9uIGcodCxlKXtmdW5jdGlvbiBuKHQsZSl7dmFyIG49bmV3IE1hcCxpPVtdO3JldHVybiB0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9ZVt0LklEXSxvPXtGQlhfSUQ6dC5JRCxpbmRpY2VzOmYoci5zdWJOb2Rlcy5JbmRleGVzLnByb3BlcnRpZXMuYSksd2VpZ2h0czpoKHIuc3ViTm9kZXMuV2VpZ2h0cy5wcm9wZXJ0aWVzLmEpLHRyYW5zZm9ybTpkKHIuc3ViTm9kZXMuVHJhbnNmb3JtLnByb3BlcnRpZXMuYSksdHJhbnNmb3JtTGluazpkKHIuc3ViTm9kZXMuVHJhbnNmb3JtTGluay5wcm9wZXJ0aWVzLmEpLGxpbmtNb2RlOnIucHJvcGVydGllcy5Nb2RlfTtuLnNldCh0LklELG8pLGkucHVzaChvKX0pLHttYXA6bixhcnJheTppLGJvbmVzOltdfX12YXIgaT1uZXcgTWFwO2lmKFwiRGVmb3JtZXJcImluIHQuT2JqZWN0cy5zdWJOb2Rlcyl7dmFyIHI9dC5PYmplY3RzLnN1Yk5vZGVzLkRlZm9ybWVyO2Zvcih2YXIgbyBpbiByKXt2YXIgYT1yW29dO2lmKFwiU2tpblwiPT09YS5hdHRyVHlwZSl7dmFyIHM9ZS5nZXQocGFyc2VJbnQobykpLHU9bihzLHIpO3UuRkJYX0lEPXBhcnNlSW50KG8pLGkuc2V0KHBhcnNlSW50KG8pLHUpfX19cmV0dXJuIGl9ZnVuY3Rpb24gdihlLHIsbyl7ZnVuY3Rpb24gcyhlLHIsbyl7ZnVuY3Rpb24gcyhlLHIsbyl7ZnVuY3Rpb24gcyhlLHIpe2Z1bmN0aW9uIG8odCl7dmFyIGU9dC5zdWJOb2Rlcy5MYXllckVsZW1lbnROb3JtYWxbMF0sbj1lLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSxpPWUucHJvcGVydGllcy5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUscj1oKGUuc3ViTm9kZXMuTm9ybWFscy5wcm9wZXJ0aWVzLmEpLG89W107cmV0dXJuXCJJbmRleFRvRGlyZWN0XCI9PT1pJiYobz1mKGUuc3ViTm9kZXMuTm9ybWFsSW5kZXgucHJvcGVydGllcy5hKSkse2RhdGFTaXplOjMsYnVmZmVyOnIsaW5kaWNlczpvLG1hcHBpbmdUeXBlOm4scmVmZXJlbmNlVHlwZTppfX1mdW5jdGlvbiBzKHQpe3ZhciBlPXQuc3ViTm9kZXMuTGF5ZXJFbGVtZW50VVZbMF0sbj1lLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSxpPWUucHJvcGVydGllcy5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUscj1oKGUuc3ViTm9kZXMuVVYucHJvcGVydGllcy5hKSxvPVtdO3JldHVyblwiSW5kZXhUb0RpcmVjdFwiPT09aSYmKG89ZihlLnN1Yk5vZGVzLlVWSW5kZXgucHJvcGVydGllcy5hKSkse2RhdGFTaXplOjIsYnVmZmVyOnIsaW5kaWNlczpvLG1hcHBpbmdUeXBlOm4scmVmZXJlbmNlVHlwZTppfX1mdW5jdGlvbiB1KHQpe3ZhciBlPXQuc3ViTm9kZXMuTGF5ZXJFbGVtZW50TWF0ZXJpYWxbMF0sbj1lLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSxpPWUucHJvcGVydGllcy5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUscj1mKGUuc3ViTm9kZXMuTWF0ZXJpYWxzLnByb3BlcnRpZXMuYSksbz1bXTtyZXR1cm4gci5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7by5wdXNoKGUpfSkse2RhdGFTaXplOjEsYnVmZmVyOnIsaW5kaWNlczpvLG1hcHBpbmdUeXBlOm4scmVmZXJlbmNlVHlwZTppfX1mdW5jdGlvbiBsKHQsZSxuLGkpe3ZhciByPXtCeVBvbHlnb25WZXJ0ZXg6e0RpcmVjdDpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gaS5idWZmZXIuc2xpY2UodCppLmRhdGFTaXplLHQqaS5kYXRhU2l6ZStpLmRhdGFTaXplKX0sSW5kZXhUb0RpcmVjdDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1pLmluZGljZXNbdF07cmV0dXJuIGkuYnVmZmVyLnNsaWNlKHIqaS5kYXRhU2l6ZSxyKmkuZGF0YVNpemUraS5kYXRhU2l6ZSl9fSxCeVBvbHlnb246e0RpcmVjdDpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gaS5idWZmZXIuc2xpY2UoZSppLmRhdGFTaXplLGUqaS5kYXRhU2l6ZStpLmRhdGFTaXplKX0sSW5kZXhUb0RpcmVjdDpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1pLmluZGljZXNbZV07cmV0dXJuIGkuYnVmZmVyLnNsaWNlKHIqaS5kYXRhU2l6ZSxyKmkuZGF0YVNpemUraS5kYXRhU2l6ZSl9fSxBbGxTYW1lOntJbmRleFRvRGlyZWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiBpLmJ1ZmZlci5zbGljZShpLmluZGljZXNbMF0qaS5kYXRhU2l6ZSxpLmluZGljZXNbMF0qaS5kYXRhU2l6ZStpLmRhdGFTaXplKX19fTtyZXR1cm4gcltpLm1hcHBpbmdUeXBlXVtpLnJlZmVyZW5jZVR5cGVdKHQsZSxuLGkpfXZhciBjPW5ldyBpLGQ9aChlLnN1Yk5vZGVzLlZlcnRpY2VzLnByb3BlcnRpZXMuYSkscD1mKGUuc3ViTm9kZXMuUG9seWdvblZlcnRleEluZGV4LnByb3BlcnRpZXMuYSk7aWYoXCJMYXllckVsZW1lbnROb3JtYWxcImluIGUuc3ViTm9kZXMpdmFyIGc9byhlKTtpZihcIkxheWVyRWxlbWVudFVWXCJpbiBlLnN1Yk5vZGVzKXZhciB2PXMoZSk7aWYoXCJMYXllckVsZW1lbnRNYXRlcmlhbFwiaW4gZS5zdWJOb2Rlcyl2YXIgbT11KGUpO2Zvcih2YXIgeT1bXSxfPTAsYj0wO2I8cC5sZW5ndGg7KytiKXt2YXIgeCx3PXBbYl07cFtiXTwwJiYod149LTEscFtiXT13LHg9ITApO3ZhciBFPW5ldyB0LFM9W10sTT1bXTtpZihFLnBvc2l0aW9uLmZyb21BcnJheShkLDMqdykscil7Zm9yKHZhciBDPTA7QzxyLmFycmF5Lmxlbmd0aDsrK0Mpe3ZhciBJPXIuYXJyYXlbQ10uaW5kaWNlcy5maW5kSW5kZXgoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1wW2JdfSk7SSE9PS0xJiYoTS5wdXNoKHIuYXJyYXlbQ10ud2VpZ2h0c1tJXSksUy5wdXNoKEMpKX1pZihNLmxlbmd0aD40KXtjb25zb2xlLndhcm4oXCJGQlhMb2FkZXI6IFZlcnRleCBoYXMgbW9yZSB0aGFuIDQgc2tpbm5pbmcgd2VpZ2h0cyBhc3NpZ25lZCB0byB2ZXJ0ZXguICBEZWxldGluZyBhZGRpdGlvbmFsIHdlaWdodHMuXCIpO2Zvcih2YXIgTz1bMCwwLDAsMF0sVD1bMCwwLDAsMF0sYj0wO2I8TS5sZW5ndGg7KytiKWZvcih2YXIgUD1NW2JdLEE9U1tiXSxDPTA7QzxULmxlbmd0aDsrK0MpaWYoUD5UW0NdKXt2YXIgTD1UW0NdO1RbQ109UCxQPUwsTD1PW0NdLE9bQ109QSxBPUx9Uz1PLE09VH1mb3IodmFyIE49TS5sZW5ndGg7Tjw0O04rKylNW05dPTAsU1tOXT0wO0Uuc2tpbldlaWdodHMuZnJvbUFycmF5KE0pLEUuc2tpbkluZGljZXMuZnJvbUFycmF5KFMpfWlmKGcmJkUubm9ybWFsLmZyb21BcnJheShsKGIsXyx3LGcpKSx2JiZFLnV2LmZyb21BcnJheShsKGIsXyx3LHYpKSx5LnB1c2goRSkseCl7dmFyIGs9bmV3IG4sUj1sKGIsXyx3LG0pO2suZ2VuVHJpYW5nbGVzRnJvbVZlcnRpY2VzKHkpLGsubWF0ZXJpYWxJbmRleD1SWzBdLGMuZmFjZXMucHVzaChrKSx5PVtdLF8rKyx4PSExfX12YXIgRD1jLmZsYXR0ZW5Ub0J1ZmZlcnMoKSxGPW5ldyBhLkJ1ZmZlckdlb21ldHJ5O0YubmFtZT1lLm5hbWUsRi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBhLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KEQudmVydGV4QnVmZmVyKSwzKSksRC5ub3JtYWxCdWZmZXIubGVuZ3RoPjAmJkYuYWRkQXR0cmlidXRlKFwibm9ybWFsXCIsbmV3IGEuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoRC5ub3JtYWxCdWZmZXIpLDMpKSxELnV2QnVmZmVyLmxlbmd0aD4wJiZGLmFkZEF0dHJpYnV0ZShcInV2XCIsbmV3IGEuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoRC51dkJ1ZmZlciksMikpLHImJihGLmFkZEF0dHJpYnV0ZShcInNraW5JbmRleFwiLG5ldyBhLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KEQuc2tpbkluZGV4QnVmZmVyKSw0KSksRi5hZGRBdHRyaWJ1dGUoXCJza2luV2VpZ2h0XCIsbmV3IGEuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoRC5za2luV2VpZ2h0QnVmZmVyKSw0KSksRi5GQlhfRGVmb3JtZXI9cik7Zm9yKHZhciBCPUQubWF0ZXJpYWxJbmRleEJ1ZmZlclswXSxqPTAsVT0wO1U8RC5tYXRlcmlhbEluZGV4QnVmZmVyLmxlbmd0aDsrK1UpRC5tYXRlcmlhbEluZGV4QnVmZmVyW1VdIT09QiYmKEYuYWRkR3JvdXAoaixVLWosQiksaj1VLEI9RC5tYXRlcmlhbEluZGV4QnVmZmVyW1VdKTtyZXR1cm4gRn1mb3IodmFyIHU9KGUuaWQsZS5hdHRyTmFtZSwwKTt1PHIuY2hpbGRyZW4ubGVuZ3RoOysrdSlpZihvLmhhcyhyLmNoaWxkcmVuW3VdLklEKSl7dmFyIGw9by5nZXQoci5jaGlsZHJlblt1XS5JRCk7YnJlYWt9dmFyIGM9cyhlLGwpO3JldHVybiBjfWZ1bmN0aW9uIHUodCxlKXtpZih2b2lkIDA9PT1hLk5VUkJTQ3VydmUpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUSFJFRS5GQlhMb2FkZXIgcmVsaWVzIG9uIFRIUkVFLk5VUkJTQ3VydmUgZm9yIGFueSBudXJicyBwcmVzZW50IGluIHRoZSBtb2RlbC4gIE51cmJzIHdpbGwgc2hvdyB1cCBhcyBlbXB0eSBnZW9tZXRyeS5cIiksbmV3IGEuQnVmZmVyR2VvbWV0cnk7dmFyIG49cGFyc2VJbnQodC5wcm9wZXJ0aWVzLk9yZGVyKTtpZihpc05hTihuKSlyZXR1cm4gY29uc29sZS5lcnJvcihcIkZCWExvYWRlcjogSW52YWxpZCBPcmRlciBcIit0LnByb3BlcnRpZXMuT3JkZXIrXCIgZ2l2ZW4gZm9yIGdlb21ldHJ5IElEOiBcIit0LmlkKSxuZXcgYS5CdWZmZXJHZW9tZXRyeTtmb3IodmFyIGk9aCh0LnN1Yk5vZGVzLktub3RWZWN0b3IucHJvcGVydGllcy5hKSxyPVtdLG89aCh0LnN1Yk5vZGVzLlBvaW50cy5wcm9wZXJ0aWVzLmEpLHM9MDtzPG8ubGVuZ3RoO3MrPTQpci5wdXNoKG5ldyBhLlZlY3RvcjQob1tzXSxvW3MrMV0sb1tzKzJdLG9bcyszXSkpO1wiQ2xvc2VkXCI9PT10LnByb3BlcnRpZXMuRm9ybSYmci5wdXNoKHJbMF0pO3ZhciB1PW5ldyBhLk5VUkJTQ3VydmUobi0xLGksciksbD11LmdldFBvaW50cygxLjUqci5sZW5ndGgpLGM9W107bC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXQudG9BcnJheSgpO2M9Yy5jb25jYXQoZSl9KTt2YXIgZj1uZXcgYS5CdWZmZXJHZW9tZXRyeTtyZXR1cm4gZi5hZGRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLG5ldyBhLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KGMpLDMpKSxmfXN3aXRjaChlLmF0dHJUeXBlKXtjYXNlXCJNZXNoXCI6cmV0dXJuIHMoZSxyLG8pO2Nhc2VcIk51cmJzQ3VydmVcIjpyZXR1cm4gdShlLHIsbyl9fXZhciB1PW5ldyBNYXA7aWYoXCJHZW9tZXRyeVwiaW4gZS5PYmplY3RzLnN1Yk5vZGVzKXt2YXIgbD1lLk9iamVjdHMuc3ViTm9kZXMuR2VvbWV0cnk7Zm9yKHZhciBjIGluIGwpe3ZhciBkPXIuZ2V0KHBhcnNlSW50KGMpKSxwPXMobFtjXSxkLG8pO3Uuc2V0KHBhcnNlSW50KGMpLHApfX1yZXR1cm4gdX1mdW5jdGlvbiBtKHQsZSxuLGkscil7dmFyIG89bmV3IGEuR3JvdXAscz10Lk9iamVjdHMuc3ViTm9kZXMuTW9kZWwsdT1bXSxsPW5ldyBNYXA7Zm9yKHZhciBjIGluIHMpe2Zvcih2YXIgZj1wYXJzZUludChjKSxwPXNbY10sZz1lLmdldChmKSx2PW51bGwsbT0wO208Zy5wYXJlbnRzLmxlbmd0aDsrK20pbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQubWFwLmhhcyhnLnBhcmVudHNbbV0uSUQpKXt2PW5ldyBhLkJvbmU7dmFyIGU9dC5hcnJheS5maW5kSW5kZXgoZnVuY3Rpb24odCl7cmV0dXJuIHQuRkJYX0lEPT09Zy5wYXJlbnRzW21dLklEfSk7dC5ib25lc1tlXT12fX0pO2lmKCF2KXN3aXRjaChwLmF0dHJUeXBlKXtjYXNlXCJNZXNoXCI6dmFyIGI9bnVsbCx4PW51bGwsdz1bXTtnLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7aS5oYXModC5JRCkmJihiPWkuZ2V0KHQuSUQpKSxyLmhhcyh0LklEKSYmdy5wdXNoKHIuZ2V0KHQuSUQpKX0pLHg9dy5sZW5ndGg+MT9uZXcgYS5NdWx0aU1hdGVyaWFsKHcpOncubGVuZ3RoPjA/d1swXTpuZXcgYS5NZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6MzM0MjU5MX0pLGIuRkJYX0RlZm9ybWVyPyh3LmZvckVhY2goZnVuY3Rpb24odCl7dC5za2lubmluZz0hMH0pLHguc2tpbm5pbmc9ITAsdj1uZXcgYS5Ta2lubmVkTWVzaChiLHgpKTp2PW5ldyBhLk1lc2goYix4KTticmVhaztjYXNlXCJOdXJic0N1cnZlXCI6dmFyIGI9bnVsbDtnLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7aS5oYXModC5JRCkmJihiPWkuZ2V0KHQuSUQpKX0pLHg9bmV3IGEuTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOjMzNDI1OTEsbGluZXdpZHRoOjV9KSx2PW5ldyBhLkxpbmUoYix4KTticmVhaztkZWZhdWx0OnY9bmV3IGEuT2JqZWN0M0R9di5uYW1lPXAuYXR0ck5hbWUucmVwbGFjZSgvOi8sXCJcIikucmVwbGFjZSgvXy8sXCJcIikucmVwbGFjZSgvLS8sXCJcIiksdi5GQlhfSUQ9Zix1LnB1c2godiksbC5zZXQoZix2KX11LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49c1t0LkZCWF9JRF07aWYoXCJMY2xfVHJhbnNsYXRpb25cImluIG4ucHJvcGVydGllcyYmdC5wb3NpdGlvbi5mcm9tQXJyYXkoaChuLnByb3BlcnRpZXMuTGNsX1RyYW5zbGF0aW9uLnZhbHVlKSksXCJMY2xfUm90YXRpb25cImluIG4ucHJvcGVydGllcyl7dmFyIGk9aChuLnByb3BlcnRpZXMuTGNsX1JvdGF0aW9uLnZhbHVlKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQqTWF0aC5QSS8xODB9KTtpLnB1c2goXCJaWVhcIiksdC5yb3RhdGlvbi5mcm9tQXJyYXkoaSl9XCJMY2xfU2NhbGluZ1wiaW4gbi5wcm9wZXJ0aWVzJiZ0LnNjYWxlLmZyb21BcnJheShoKG4ucHJvcGVydGllcy5MY2xfU2NhbGluZy52YWx1ZSkpO2Zvcih2YXIgcj1lLmdldCh0LkZCWF9JRCksYT0wO2E8ci5wYXJlbnRzLmxlbmd0aDthKyspe3ZhciBsPXUuZmluZEluZGV4KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZCWF9JRD09PXIucGFyZW50c1thXS5JRH0pO2lmKGw+LTEpe3VbbF0uYWRkKHQpO2JyZWFrfX1udWxsPT09dC5wYXJlbnQmJm8uYWRkKHQpfSksby51cGRhdGVNYXRyaXhXb3JsZCghMCk7dmFyIEU9dC5PYmplY3RzLnN1Yk5vZGVzLlBvc2U7Zm9yKHZhciBjIGluIEUpaWYoXCJCaW5kUG9zZVwiPT09RVtjXS5hdHRyVHlwZSl7RT1FW2NdO2JyZWFrfWlmKEUpe3ZhciBTPUUuc3ViTm9kZXMuUG9zZU5vZGUsTT1uZXcgTWFwO1MuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1kKHQuc3ViTm9kZXMuTWF0cml4LnByb3BlcnRpZXMuYSk7TS5zZXQocGFyc2VJbnQodC5pZCksZSl9KX1uLmZvckVhY2goZnVuY3Rpb24odCxuKXt0LmFycmF5LmZvckVhY2goZnVuY3Rpb24oZSxuKXt2YXIgaT10LmJvbmVzW25dO2lmKE0uaGFzKGkuRkJYX0lEKSl7dmFyIHI9TS5nZXQoaS5GQlhfSUQpO2kubWF0cml4V29ybGQuY29weShyKX19KSx0LnNrZWxldG9uPW5ldyBhLlNrZWxldG9uKHQuYm9uZXMpO3ZhciByPWUuZ2V0KG4pO3IucGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKGkuaGFzKG4uSUQpKWZvcih2YXIgcj1uLklELG89ZS5nZXQociksYT0wO2E8by5wYXJlbnRzLmxlbmd0aDsrK2EpaWYobC5oYXMoby5wYXJlbnRzW2FdLklEKSl7dmFyIHM9bC5nZXQoby5wYXJlbnRzW2FdLklEKTtzLmJpbmQodC5za2VsZXRvbixzLm1hdHJpeFdvcmxkKTticmVha319KX0pLHUuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1zW3QuRkJYX0lEXTtpZihcIkxjbF9UcmFuc2xhdGlvblwiaW4gZS5wcm9wZXJ0aWVzJiZ0LnBvc2l0aW9uLmZyb21BcnJheShoKGUucHJvcGVydGllcy5MY2xfVHJhbnNsYXRpb24udmFsdWUpKSxcIkxjbF9Sb3RhdGlvblwiaW4gZS5wcm9wZXJ0aWVzKXt2YXIgbj1oKGUucHJvcGVydGllcy5MY2xfUm90YXRpb24udmFsdWUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdCpNYXRoLlBJLzE4MH0pO24ucHVzaChcIlpZWFwiKSx0LnJvdGF0aW9uLmZyb21BcnJheShuKX1cIkxjbF9TY2FsaW5nXCJpbiBlLnByb3BlcnRpZXMmJnQuc2NhbGUuZnJvbUFycmF5KGgoZS5wcm9wZXJ0aWVzLkxjbF9TY2FsaW5nLnZhbHVlKSl9KSxvLnNrZWxldG9uPXtib25lczp1fTt2YXIgQz15KHQsZSxvKTtyZXR1cm4gXyhvLEMpLG99ZnVuY3Rpb24geSh0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbixpKXt2YXIgcj17aWQ6ZS5pZCxhdHRyOmUuYXR0ck5hbWUsaW50ZXJuYWxJRDplLmlkLGF0dHJYOiExLGF0dHJZOiExLGF0dHJaOiExLGNvbnRhaW5lckJvbmVJRDotMSxjb250YWluZXJJRDotMSxjdXJ2ZXM6e3g6bnVsbCx5Om51bGwsejpudWxsfX07aWYoIXIuYXR0ci5tYXRjaCgvU3xSfFQvKSlyZXR1cm4gbnVsbDtmb3IodmFyIG8gaW4gZS5wcm9wZXJ0aWVzKW8ubWF0Y2goL1gvKSYmKHIuYXR0clg9ITApLG8ubWF0Y2goL1kvKSYmKHIuYXR0clk9ITApLG8ubWF0Y2goL1ovKSYmKHIuYXR0clo9ITApO2Zvcih2YXIgYT1uLmdldChyLmlkKSxzPWEucGFyZW50cyx1PXMubGVuZ3RoLTE7dT49MDstLXUpe3ZhciBsPWkuc2tlbGV0b24uYm9uZXMuZmluZEluZGV4KGZ1bmN0aW9uKHQpe3JldHVybiB0LkZCWF9JRD09PXNbdV0uSUR9KTtpZihsPi0xKXtyLmNvbnRhaW5lckJvbmVJRD1sLHIuY29udGFpbmVySUQ9c1t1XS5JRDticmVha319cmV0dXJuIHJ9ZnVuY3Rpb24gcih0KXtyZXR1cm57dmVyc2lvbjpudWxsLGlkOnQuaWQsaW50ZXJuYWxJRDp0LmlkLHRpbWVzOmgodC5zdWJOb2Rlcy5LZXlUaW1lLnByb3BlcnRpZXMuYSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBjKHQpfSksdmFsdWVzOmgodC5zdWJOb2Rlcy5LZXlWYWx1ZUZsb2F0LnByb3BlcnRpZXMuYSksYXR0ckZsYWc6Zih0LnN1Yk5vZGVzLktleUF0dHJGbGFncy5wcm9wZXJ0aWVzLmEpLGF0dHJEYXRhOmgodC5zdWJOb2Rlcy5LZXlBdHRyRGF0YUZsb2F0LnByb3BlcnRpZXMuYSl9fXZhciBvPXQuT2JqZWN0cy5zdWJOb2Rlcy5BbmltYXRpb25DdXJ2ZU5vZGUsYT10Lk9iamVjdHMuc3ViTm9kZXMuQW5pbWF0aW9uQ3VydmUscz10Lk9iamVjdHMuc3ViTm9kZXMuQW5pbWF0aW9uTGF5ZXIsdT10Lk9iamVjdHMuc3ViTm9kZXMuQW5pbWF0aW9uU3RhY2ssbD17Y3VydmVzOm5ldyBNYXAsbGF5ZXJzOm5ldyBNYXAsc3RhY2tzOm5ldyBNYXAsbGVuZ3RoOjAsZnBzOjMwLGZyYW1lczowfSxkPVtdO2Zvcih2YXIgcCBpbiBvKWlmKHAubWF0Y2goL1xcZCsvKSl7dmFyIGc9aSh0LG9bcF0sZSxuKTtkLnB1c2goZyl9Zm9yKHZhciB2PW5ldyBNYXAsbT0wO208ZC5sZW5ndGg7KyttKW51bGwhPT1kW21dJiZ2LnNldChkW21dLmlkLGRbbV0pO3ZhciB5PVtdO2ZvcihwIGluIGEpaWYocC5tYXRjaCgvXFxkKy8pKXt2YXIgXz1yKGFbcF0pO3kucHVzaChfKTt2YXIgYj1lLmdldChfLmlkKS5wYXJlbnRzWzBdLHg9Yi5JRCx3PWIucmVsYXRpb25zaGlwLEU9XCJcIjtpZih3Lm1hdGNoKC9YLykpRT1cInhcIjtlbHNlIGlmKHcubWF0Y2goL1kvKSlFPVwieVwiO2Vsc2V7aWYoIXcubWF0Y2goL1ovKSljb250aW51ZTtFPVwielwifXYuZ2V0KHgpLmN1cnZlc1tFXT1ffXYuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LmNvbnRhaW5lckJvbmVJRDtsLmN1cnZlcy5oYXMoZSl8fGwuY3VydmVzLnNldChlLHtUOm51bGwsUjpudWxsLFM6bnVsbH0pLGwuY3VydmVzLmdldChlKVt0LmF0dHJdPXR9KTtmb3IodmFyIHAgaW4gcyl7Zm9yKHZhciBTPVtdLE09ZS5nZXQocGFyc2VJbnQocCkpLmNoaWxkcmVuLEM9MDtDPE0ubGVuZ3RoO0MrKylpZih2LmhhcyhNW0NdLklEKSl7dmFyIEk9di5nZXQoTVtDXS5JRCksTz1JLmNvbnRhaW5lckJvbmVJRDt2b2lkIDA9PT1TW09dJiYoU1tPXT17VDpudWxsLFI6bnVsbCxTOm51bGx9KSxTW09dW0kuYXR0cl09SX1sLmxheWVycy5zZXQocGFyc2VJbnQocCksUyl9Zm9yKHZhciBwIGluIHUpe2Zvcih2YXIgVD1bXSxNPWUuZ2V0KHBhcnNlSW50KHApKS5jaGlsZHJlbixQPTAsQT1OdW1iZXIuTUFYX1ZBTFVFLEM9MDtDPE0ubGVuZ3RoOysrQylpZihsLmxheWVycy5oYXMoTVtDXS5JRCkpe3ZhciBMPWwubGF5ZXJzLmdldChNW0NdLklEKTtULnB1c2goTCksTC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7ZnVuY3Rpb24gZSh0KXtmdW5jdGlvbiBlKHQpe1A9dC50aW1lc1t0LnRpbWVzLmxlbmd0aC0xXT5QP3QudGltZXNbdC50aW1lcy5sZW5ndGgtMV06UCxBPXQudGltZXNbMF08QT90LnRpbWVzWzBdOkF9dC54JiZlKHQueCksdC55JiZlKHQueSksdC56JiZlKHQueil9dC5SJiZlKHQuUi5jdXJ2ZXMpLHQuUyYmZSh0LlMuY3VydmVzKSx0LlQmJmUodC5ULmN1cnZlcyl9dCYmZSh0KX0pfVA+QSYmbC5zdGFja3Muc2V0KHBhcnNlSW50KHApLHtuYW1lOnVbcF0uYXR0ck5hbWUsbGF5ZXJzOlQsbGVuZ3RoOlAtQSxmcmFtZXM6MzAqKFAtQSl9KX1yZXR1cm4gbH1mdW5jdGlvbiBfKHQsZSl7dm9pZCAwPT09dC5hbmltYXRpb25zJiYodC5hbmltYXRpb25zPVtdKSxlLnN0YWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGkodCxuLGkpe2Z1bmN0aW9uIHIodCxlKXtpZih2b2lkIDA9PT10KXJldHVybiExO3ZhciBuPXRbZV07cmV0dXJuISFuJiZbXCJ4XCIsXCJ5XCIsXCJ6XCJdLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT1uLmN1cnZlc1t0XX0pfWZ1bmN0aW9uIG8odCxlKXtyZXR1cm5bXCJ4XCIsXCJ5XCIsXCJ6XCJdLmV2ZXJ5KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGkodCxlKXtyZXR1cm4gdm9pZCAwIT09dC52YWx1ZXNbZV19cmV0dXJuIGkodC5jdXJ2ZXNbbl0sZSl9KX12YXIgcz17dGltZTppL2UuZnBzLHBvczpuLnBvc2l0aW9uLnRvQXJyYXkoKSxyb3Q6bi5xdWF0ZXJuaW9uLnRvQXJyYXkoKSxzY2w6bi5zY2FsZS50b0FycmF5KCl9O2lmKHZvaWQgMD09PXQpcmV0dXJuIHM7dHJ5e2lmKHIodCxcIlRcIikmJm8odC5ULGkpJiYocy5wb3M9W3QuVC5jdXJ2ZXMueC52YWx1ZXNbaV0sdC5ULmN1cnZlcy55LnZhbHVlc1tpXSx0LlQuY3VydmVzLnoudmFsdWVzW2ldXSkscih0LFwiUlwiKSYmbyh0LlIsaSkpe3ZhciB1PXAodC5SLmN1cnZlcy54LnZhbHVlc1tpXSksbD1wKHQuUi5jdXJ2ZXMueS52YWx1ZXNbaV0pLGM9cCh0LlIuY3VydmVzLnoudmFsdWVzW2ldKSxoPW5ldyBhLkV1bGVyKHUsbCxjLFwiWllYXCIpO3Mucm90PShuZXcgYS5RdWF0ZXJuaW9uKS5zZXRGcm9tRXVsZXIoaCkudG9BcnJheSgpfXIodCxcIlNcIikmJm8odC5TLGkpJiYocy5zY2w9W3QuUy5jdXJ2ZXMueC52YWx1ZXNbaV0sdC5TLmN1cnZlcy55LnZhbHVlc1tpXSx0LlMuY3VydmVzLnoudmFsdWVzW2ldXSl9Y2F0Y2godCl7Y29uc29sZS5sb2cobiksY29uc29sZS5sb2codCl9cmV0dXJuIHN9dmFyIHI9e25hbWU6bi5uYW1lLGZwczozMCxsZW5ndGg6bi5sZW5ndGgsaGllcmFyY2h5OltdfSxvPXQuc2tlbGV0b24uYm9uZXM7by5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZS5yZXBsYWNlKC8uKjovLFwiXCIpLG49by5maW5kSW5kZXgoZnVuY3Rpb24oZSl7cmV0dXJuIHQucGFyZW50PT09ZX0pO3IuaGllcmFyY2h5LnB1c2goe3BhcmVudDpuLG5hbWU6ZSxrZXlzOltdfSl9KTtmb3IodmFyIHM9MDtzPG4uZnJhbWVzO3MrKylvLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgbz1uLmxheWVyc1swXVtlXTtyLmhpZXJhcmNoeS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubmFtZT09PXQubmFtZSYmZS5rZXlzLnB1c2goaShvLHQscykpfSl9KTt0LmFuaW1hdGlvbnMucHVzaChhLkFuaW1hdGlvbkNsaXAucGFyc2VBbmltYXRpb24ocixvKSl9KX1mdW5jdGlvbiBiKHQpe3JldHVybiBuZXcgYS5WZWN0b3IzKHBhcnNlRmxvYXQodC52YWx1ZS54KSxwYXJzZUZsb2F0KHQudmFsdWUueSkscGFyc2VGbG9hdCh0LnZhbHVlLnopKX1mdW5jdGlvbiB4KHQpe3JldHVybihuZXcgYS5Db2xvcikuZnJvbUFycmF5KGIodCkudG9BcnJheSgpKX12YXIgdz10aGlzLEU9KG5ldyBvKS5wYXJzZShlKSxTPXMoRSksTT11KEUpLEM9bChFLE0sUyksST1nKEUsUyksTz12KEUsUyxJKSxUPW0oRSxTLEksTyxDKTtyZXR1cm4gVH19KSxyKHQucHJvdG90eXBlLHtjb3B5OmZ1bmN0aW9uKGUpe3ZhciBuPWV8fG5ldyB0O3JldHVybiBuLnBvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbiksbi5ub3JtYWwuY29weSh0aGlzLm5vcm1hbCksbi51di5jb3B5KHRoaXMudXYpLG4uc2tpbkluZGljZXMuY29weSh0aGlzLnNraW5JbmRpY2VzKSxuLnNraW5XZWlnaHRzLmNvcHkodGhpcy5za2luV2VpZ2h0cyksbn0sZmxhdHRlblRvQnVmZmVyczpmdW5jdGlvbigpe3ZhciB0PXRoaXMucG9zaXRpb24udG9BcnJheSgpLGU9dGhpcy5ub3JtYWwudG9BcnJheSgpLG49dGhpcy51di50b0FycmF5KCksaT10aGlzLnNraW5JbmRpY2VzLnRvQXJyYXkoKSxyPXRoaXMuc2tpbldlaWdodHMudG9BcnJheSgpO3JldHVybnt2ZXJ0ZXhCdWZmZXI6dCxub3JtYWxCdWZmZXI6ZSx1dkJ1ZmZlcjpuLHNraW5JbmRleEJ1ZmZlcjppLHNraW5XZWlnaHRCdWZmZXI6cn19fSkscihlLnByb3RvdHlwZSx7Y29weTpmdW5jdGlvbih0KXtmb3IodmFyIG49dHx8bmV3IGUsaT0wO2k8dGhpcy52ZXJ0aWNlcy5sZW5ndGg7KytpKXRoaXMudmVydGljZXNbaV0uY29weShuLnZlcnRpY2VzW2ldKTtyZXR1cm4gbn0sZmxhdHRlblRvQnVmZmVyczpmdW5jdGlvbigpe3ZhciB0PVtdLGU9W10sbj1bXSxpPVtdLHI9W107cmV0dXJuIHRoaXMudmVydGljZXMuZm9yRWFjaChmdW5jdGlvbihvKXt2YXIgYT1vLmZsYXR0ZW5Ub0J1ZmZlcnMoKTt0PXQuY29uY2F0KGEudmVydGV4QnVmZmVyKSxlPWUuY29uY2F0KGEubm9ybWFsQnVmZmVyKSxuPW4uY29uY2F0KGEudXZCdWZmZXIpLGk9aS5jb25jYXQoYS5za2luSW5kZXhCdWZmZXIpLHI9ci5jb25jYXQoYS5za2luV2VpZ2h0QnVmZmVyKX0pLHt2ZXJ0ZXhCdWZmZXI6dCxub3JtYWxCdWZmZXI6ZSx1dkJ1ZmZlcjpuLHNraW5JbmRleEJ1ZmZlcjppLHNraW5XZWlnaHRCdWZmZXI6cn19fSkscihuLnByb3RvdHlwZSx7Y29weTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dHx8bmV3IG4saT0wO2k8dGhpcy50cmlhbmdsZXMubGVuZ3RoOysraSl0aGlzLnRyaWFuZ2xlc1tpXS5jb3B5KGUudHJpYW5nbGVzW2ldKTtyZXR1cm4gZS5tYXRlcmlhbEluZGV4PXRoaXMubWF0ZXJpYWxJbmRleCxlfSxnZW5UcmlhbmdsZXNGcm9tVmVydGljZXM6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTI7bjx0Lmxlbmd0aDsrK24pe3ZhciBpPW5ldyBlO2kudmVydGljZXNbMF09dFswXSxpLnZlcnRpY2VzWzFdPXRbbi0xXSxpLnZlcnRpY2VzWzJdPXRbbl0sdGhpcy50cmlhbmdsZXMucHVzaChpKX19LGZsYXR0ZW5Ub0J1ZmZlcnM6ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPVtdLG49W10saT1bXSxyPVtdLG89W10sYT10aGlzLm1hdGVyaWFsSW5kZXg7cmV0dXJuIHRoaXMudHJpYW5nbGVzLmZvckVhY2goZnVuY3Rpb24ocyl7dmFyIHU9cy5mbGF0dGVuVG9CdWZmZXJzKCk7dD10LmNvbmNhdCh1LnZlcnRleEJ1ZmZlciksZT1lLmNvbmNhdCh1Lm5vcm1hbEJ1ZmZlciksbj1uLmNvbmNhdCh1LnV2QnVmZmVyKSxpPWkuY29uY2F0KHUuc2tpbkluZGV4QnVmZmVyKSxyPXIuY29uY2F0KHUuc2tpbldlaWdodEJ1ZmZlciksbz1vLmNvbmNhdChbYSxhLGFdKX0pLHt2ZXJ0ZXhCdWZmZXI6dCxub3JtYWxCdWZmZXI6ZSx1dkJ1ZmZlcjpuLHNraW5JbmRleEJ1ZmZlcjppLHNraW5XZWlnaHRCdWZmZXI6cixtYXRlcmlhbEluZGV4QnVmZmVyOm99fX0pLHIoaS5wcm90b3R5cGUse2ZsYXR0ZW5Ub0J1ZmZlcnM6ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPVtdLG49W10saT1bXSxyPVtdLG89W107cmV0dXJuIHRoaXMuZmFjZXMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgcz1hLmZsYXR0ZW5Ub0J1ZmZlcnMoKTt0PXQuY29uY2F0KHMudmVydGV4QnVmZmVyKSxlPWUuY29uY2F0KHMubm9ybWFsQnVmZmVyKSxuPW4uY29uY2F0KHMudXZCdWZmZXIpLGk9aS5jb25jYXQocy5za2luSW5kZXhCdWZmZXIpLHI9ci5jb25jYXQocy5za2luV2VpZ2h0QnVmZmVyKSxvPW8uY29uY2F0KHMubWF0ZXJpYWxJbmRleEJ1ZmZlcil9KSx7dmVydGV4QnVmZmVyOnQsbm9ybWFsQnVmZmVyOmUsdXZCdWZmZXI6bixza2luSW5kZXhCdWZmZXI6aSxza2luV2VpZ2h0QnVmZmVyOnIsbWF0ZXJpYWxJbmRleEJ1ZmZlcjpvfX19KSxyKG8ucHJvdG90eXBlLHtnZXRQcmV2Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVTdGFja1t0aGlzLmN1cnJlbnRJbmRlbnQtMl19LGdldEN1cnJlbnROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZVN0YWNrW3RoaXMuY3VycmVudEluZGVudC0xXX0sZ2V0Q3VycmVudFByb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJyZW50UHJvcH0scHVzaFN0YWNrOmZ1bmN0aW9uKHQpe3RoaXMubm9kZVN0YWNrLnB1c2godCksdGhpcy5jdXJyZW50SW5kZW50Kz0xfSxwb3BTdGFjazpmdW5jdGlvbigpe3RoaXMubm9kZVN0YWNrLnBvcCgpLHRoaXMuY3VycmVudEluZGVudC09MX0sc2V0Q3VycmVudFByb3A6ZnVuY3Rpb24odCxlKXt0aGlzLmN1cnJlbnRQcm9wPXQsdGhpcy5jdXJyZW50UHJvcE5hbWU9ZX0scGFyc2U6ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50SW5kZW50PTAsdGhpcy5hbGxOb2Rlcz1uZXcgcyx0aGlzLm5vZGVTdGFjaz1bXSx0aGlzLmN1cnJlbnRQcm9wPVtdLHRoaXMuY3VycmVudFByb3BOYW1lPVwiXCI7dmFyIGU9dC5zcGxpdChcIlxcblwiKTtmb3IodmFyIG4gaW4gZSl7dmFyIGk9ZVtuXTtpZighaS5tYXRjaCgvXltcXHNcXHRdKjsvKSYmIWkubWF0Y2goL15bXFxzXFx0XSokLykpe3ZhciByPW5ldyBSZWdFeHAoXCJeXFxcXHR7XCIrdGhpcy5jdXJyZW50SW5kZW50K1wifShcXFxcdyspOiguKil7XCIsXCJcIiksbz1pLm1hdGNoKHIpO2lmKG8pe3ZhciBhPW9bMV0udHJpbSgpLnJlcGxhY2UoL15cIi8sXCJcIikucmVwbGFjZSgvXCIkLyxcIlwiKSx1PW9bMl0uc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCkucmVwbGFjZSgvXlwiLyxcIlwiKS5yZXBsYWNlKC9cIiQvLFwiXCIpfSk7dGhpcy5wYXJzZU5vZGVCZWdpbihpLGEsdXx8bnVsbCl9ZWxzZXt2YXIgbD1uZXcgUmVnRXhwKFwiXlxcXFx0e1wiK3RoaXMuY3VycmVudEluZGVudCtcIn0oXFxcXHcrKTpbXFxcXHNcXFxcdFxcXFxyXFxcXG5dKC4qKVwiKSxvPWkubWF0Y2gobCk7aWYobyl7dmFyIGM9b1sxXS5yZXBsYWNlKC9eXCIvLFwiXCIpLnJlcGxhY2UoL1wiJC8sXCJcIikudHJpbSgpLGg9b1syXS5yZXBsYWNlKC9eXCIvLFwiXCIpLnJlcGxhY2UoL1wiJC8sXCJcIikudHJpbSgpO3RoaXMucGFyc2VOb2RlUHJvcGVydHkoaSxjLGgpfWVsc2V7dmFyIGY9bmV3IFJlZ0V4cChcIl5cXFxcdHtcIisodGhpcy5jdXJyZW50SW5kZW50LTEpK1wifX1cIik7aS5tYXRjaChmKT90aGlzLm5vZGVFbmQoKTppLm1hdGNoKC9eW15cXHNcXHR9XS8pJiZ0aGlzLnBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKGkpfX19fXJldHVybiB0aGlzLmFsbE5vZGVzfSxwYXJzZU5vZGVCZWdpbjpmdW5jdGlvbih0LGUsbil7dmFyIGk9e25hbWU6ZSxwcm9wZXJ0aWVzOnt9LHN1Yk5vZGVzOnt9fSxyPXRoaXMucGFyc2VOb2RlQXR0cihuKSxvPXRoaXMuZ2V0Q3VycmVudE5vZGUoKTtpZigwPT09dGhpcy5jdXJyZW50SW5kZW50KXRoaXMuYWxsTm9kZXMuYWRkKGUsaSk7ZWxzZSBpZihlIGluIG8uc3ViTm9kZXMpe3ZhciBhPW8uc3ViTm9kZXNbZV07dGhpcy5pc0ZsYXR0ZW5Ob2RlKG8uc3ViTm9kZXNbZV0pJiYoXCJcIj09PXIuaWQ/KG8uc3ViTm9kZXNbZV09W10sby5zdWJOb2Rlc1tlXS5wdXNoKGEpKTooby5zdWJOb2Rlc1tlXT17fSxvLnN1Yk5vZGVzW2VdW2EuaWRdPWEpKSxcIlwiPT09ci5pZD9vLnN1Yk5vZGVzW2VdLnB1c2goaSk6by5zdWJOb2Rlc1tlXVtyLmlkXT1pfWVsc2VcIm51bWJlclwiPT10eXBlb2Ygci5pZHx8ci5pZC5tYXRjaCgvXlxcZCskLyk/KG8uc3ViTm9kZXNbZV09e30sby5zdWJOb2Rlc1tlXVtyLmlkXT1pKTpvLnN1Yk5vZGVzW2VdPWk7biYmKGkuaWQ9ci5pZCxpLmF0dHJOYW1lPXIubmFtZSxpLmF0dHJUeXBlPXIudHlwZSksdGhpcy5wdXNoU3RhY2soaSl9LHBhcnNlTm9kZUF0dHI6ZnVuY3Rpb24odCl7dmFyIGU9dFswXTtcIlwiIT09dFswXSYmKGU9cGFyc2VJbnQodFswXSksaXNOYU4oZSkmJihlPXRbMF0pKTt2YXIgbixpO3JldHVybiB0Lmxlbmd0aD4xJiYobj10WzFdLnJlcGxhY2UoL14oXFx3Kyk6Oi8sXCJcIiksaT10WzJdKSx7aWQ6ZSxuYW1lOm58fFwiXCIsdHlwZTppfHxcIlwifX0scGFyc2VOb2RlUHJvcGVydHk6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuZ2V0Q3VycmVudE5vZGUoKSxyPWkubmFtZTtpZih2b2lkIDAhPT1yKXt2YXIgbz1yLm1hdGNoKC9Qcm9wZXJ0aWVzKFxcZCkrLyk7aWYobylyZXR1cm4gdm9pZCB0aGlzLnBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eSh0LGUsbil9aWYoXCJDXCI9PWUpe3ZhciBhPW4uc3BsaXQoXCIsXCIpLnNsaWNlKDEpLHM9cGFyc2VJbnQoYVswXSksdT1wYXJzZUludChhWzFdKSxsPW4uc3BsaXQoXCIsXCIpLnNsaWNlKDMpO2U9XCJjb25uZWN0aW9uc1wiLG49W3MsdV0sbj1uLmNvbmNhdChsKSx2b2lkIDA9PT1pLnByb3BlcnRpZXNbZV0mJihpLnByb3BlcnRpZXNbZV09W10pfWlmKFwiTm9kZVwiPT1lKXt2YXIgYz1wYXJzZUludChuKTtpLnByb3BlcnRpZXMuaWQ9YyxpLmlkPWN9ZSBpbiBpLnByb3BlcnRpZXM/QXJyYXkuaXNBcnJheShpLnByb3BlcnRpZXNbZV0pP2kucHJvcGVydGllc1tlXS5wdXNoKG4pOmkucHJvcGVydGllc1tlXSs9bjpBcnJheS5pc0FycmF5KGkucHJvcGVydGllc1tlXSk/aS5wcm9wZXJ0aWVzW2VdLnB1c2gobik6aS5wcm9wZXJ0aWVzW2VdPW4sdGhpcy5zZXRDdXJyZW50UHJvcChpLnByb3BlcnRpZXMsZSl9LHBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkOmZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudFByb3BbdGhpcy5jdXJyZW50UHJvcE5hbWVdKz10fSxwYXJzZU5vZGVTcGVjaWFsUHJvcGVydHk6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPW4uc3BsaXQoJ1wiLCcpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCkucmVwbGFjZSgvXlxcXCIvLFwiXCIpLnJlcGxhY2UoL1xccy8sXCJfXCIpfSkscj1pWzBdLG89aVsxXSxzPWlbMl0sdT1pWzNdLGw9aVs0XTtzd2l0Y2gobyl7Y2FzZVwiaW50XCI6bD1wYXJzZUludChsKTticmVhaztjYXNlXCJkb3VibGVcIjpsPXBhcnNlRmxvYXQobCk7YnJlYWs7Y2FzZVwiQ29sb3JSR0JcIjpjYXNlXCJWZWN0b3IzRFwiOnZhciBjPWwuc3BsaXQoXCIsXCIpO2w9bmV3IGEuVmVjdG9yMyhjWzBdLGNbMV0sY1syXSl9dGhpcy5nZXRQcmV2Tm9kZSgpLnByb3BlcnRpZXNbcl09e3R5cGU6byx0eXBlMjpzLGZsYWc6dSx2YWx1ZTpsfSx0aGlzLnNldEN1cnJlbnRQcm9wKHRoaXMuZ2V0UHJldk5vZGUoKS5wcm9wZXJ0aWVzLHIpfSxub2RlRW5kOmZ1bmN0aW9uKCl7dGhpcy5wb3BTdGFjaygpfSxpc0ZsYXR0ZW5Ob2RlOmZ1bmN0aW9uKHQpe3JldHVyblwic3ViTm9kZXNcImluIHQmJlwicHJvcGVydGllc1wiaW4gdH19KSxyKHMucHJvdG90eXBlLHthZGQ6ZnVuY3Rpb24odCxlKXt0aGlzW3RdPWV9LHNlYXJjaENvbm5lY3Rpb25QYXJlbnQ6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3BhcmVudCYmKHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnQ9W10pLHZvaWQgMCE9PXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnRbdF0pcmV0dXJuIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnRbdF07dGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3BhcmVudFt0XT1bXTtmb3IodmFyIGU9dGhpcy5Db25uZWN0aW9ucy5wcm9wZXJ0aWVzLmNvbm5lY3Rpb25zLG49W10saT0wO2k8ZS5sZW5ndGg7KytpKWlmKGVbaV1bMF09PXQpe3ZhciByPTA9PT1lW2ldWzFdPy0xOmVbaV1bMV07bi5wdXNoKHIpfXJldHVybiBuLmxlbmd0aD4wPyh0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fcGFyZW50W3RdPXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnRbdF0uY29uY2F0KG4pLG4pOih0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fcGFyZW50W3RdPVstMV0sWy0xXSl9LHNlYXJjaENvbm5lY3Rpb25DaGlsZHJlbjpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW4mJih0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW49W10pLHZvaWQgMCE9PXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9jaGlsZHJlblt0XSlyZXR1cm4gdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX2NoaWxkcmVuW3RdO3RoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9jaGlsZHJlblt0XT1bXTtmb3IodmFyIGU9dGhpcy5Db25uZWN0aW9ucy5wcm9wZXJ0aWVzLmNvbm5lY3Rpb25zLG49W10saT0wO2k8ZS5sZW5ndGg7KytpKWVbaV1bMV09PXQmJm4ucHVzaCgwPT09ZVtpXVswXT8tMTplW2ldWzBdKTtyZXR1cm4gbi5sZW5ndGg+MD8odGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX2NoaWxkcmVuW3RdPXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9jaGlsZHJlblt0XS5jb25jYXQobiksbik6KHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9jaGlsZHJlblt0XT1bXSxbXSl9LHNlYXJjaENvbm5lY3Rpb25UeXBlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dCtcIixcIitlO2lmKHZvaWQgMD09PXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl90eXBlJiYodGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3R5cGU9e30pLHZvaWQgMCE9PXRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl90eXBlW25dKXJldHVybiB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fdHlwZVtuXTt0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fdHlwZVtuXT1cIlwiO2Zvcih2YXIgaT10aGlzLkNvbm5lY3Rpb25zLnByb3BlcnRpZXMuY29ubmVjdGlvbnMscj0wO3I8aS5sZW5ndGg7KytyKWlmKGlbcl1bMF09PXQmJmlbcl1bMV09PWUpcmV0dXJuIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl90eXBlW25dPWlbcl1bMl0saVtyXVsyXTtyZXR1cm4gdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3R5cGVbdF09bnVsbCxudWxsfX0pfSgpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9dmFyIHI9bigyKSxvPWkocik7by5NVExMb2FkZXI9ZnVuY3Rpb24odCl7dGhpcy5tYW5hZ2VyPXZvaWQgMCE9PXQ/dDpvLkRlZmF1bHRMb2FkaW5nTWFuYWdlcn0sby5NVExMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpvLk1UTExvYWRlcixsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXRoaXMsYT1uZXcgby5GaWxlTG9hZGVyKHRoaXMubWFuYWdlcik7YS5zZXRQYXRoKHRoaXMucGF0aCksYS5sb2FkKHQsZnVuY3Rpb24odCl7ZShyLnBhcnNlKHQpKX0sbixpKX0sc2V0UGF0aDpmdW5jdGlvbih0KXt0aGlzLnBhdGg9dH0sc2V0VGV4dHVyZVBhdGg6ZnVuY3Rpb24odCl7dGhpcy50ZXh0dXJlUGF0aD10fSxzZXRCYXNlVXJsOmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcIlRIUkVFLk1UTExvYWRlcjogLnNldEJhc2VVcmwoKSBpcyBkZXByZWNhdGVkLiBVc2UgLnNldFRleHR1cmVQYXRoKCBwYXRoICkgZm9yIHRleHR1cmUgcGF0aCBvciAuc2V0UGF0aCggcGF0aCApIGZvciBnZW5lcmFsIGJhc2UgcGF0aCBpbnN0ZWFkLlwiKSx0aGlzLnNldFRleHR1cmVQYXRoKHQpfSxzZXRDcm9zc09yaWdpbjpmdW5jdGlvbih0KXt0aGlzLmNyb3NzT3JpZ2luPXR9LHNldE1hdGVyaWFsT3B0aW9uczpmdW5jdGlvbih0KXt0aGlzLm1hdGVyaWFsT3B0aW9ucz10fSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zcGxpdChcIlxcblwiKSxuPXt9LGk9L1xccysvLHI9e30sYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgcz1lW2FdO2lmKHM9cy50cmltKCksMCE9PXMubGVuZ3RoJiZcIiNcIiE9PXMuY2hhckF0KDApKXt2YXIgdT1zLmluZGV4T2YoXCIgXCIpLGw9dT49MD9zLnN1YnN0cmluZygwLHUpOnM7bD1sLnRvTG93ZXJDYXNlKCk7dmFyIGM9dT49MD9zLnN1YnN0cmluZyh1KzEpOlwiXCI7aWYoYz1jLnRyaW0oKSxcIm5ld210bFwiPT09bCluPXtuYW1lOmN9LHJbY109bjtlbHNlIGlmKG4paWYoXCJrYVwiPT09bHx8XCJrZFwiPT09bHx8XCJrc1wiPT09bCl7dmFyIGg9Yy5zcGxpdChpLDMpO25bbF09W3BhcnNlRmxvYXQoaFswXSkscGFyc2VGbG9hdChoWzFdKSxwYXJzZUZsb2F0KGhbMl0pXX1lbHNlIG5bbF09Y319dmFyIGY9bmV3IG8uTVRMTG9hZGVyLk1hdGVyaWFsQ3JlYXRvcih0aGlzLnRleHR1cmVQYXRofHx0aGlzLnBhdGgsdGhpcy5tYXRlcmlhbE9wdGlvbnMpO3JldHVybiBmLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pLGYuc2V0TWFuYWdlcih0aGlzLm1hbmFnZXIpLGYuc2V0TWF0ZXJpYWxzKHIpLGZ9fSxvLk1UTExvYWRlci5NYXRlcmlhbENyZWF0b3I9ZnVuY3Rpb24odCxlKXt0aGlzLmJhc2VVcmw9dHx8XCJcIix0aGlzLm9wdGlvbnM9ZSx0aGlzLm1hdGVyaWFsc0luZm89e30sdGhpcy5tYXRlcmlhbHM9e30sdGhpcy5tYXRlcmlhbHNBcnJheT1bXSx0aGlzLm5hbWVMb29rdXA9e30sdGhpcy5zaWRlPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLnNpZGU/dGhpcy5vcHRpb25zLnNpZGU6by5Gcm9udFNpZGUsdGhpcy53cmFwPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLndyYXA/dGhpcy5vcHRpb25zLndyYXA6by5SZXBlYXRXcmFwcGluZ30sby5NVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yLnByb3RvdHlwZT17Y29uc3RydWN0b3I6by5NVExMb2FkZXIuTWF0ZXJpYWxDcmVhdG9yLHNldENyb3NzT3JpZ2luOmZ1bmN0aW9uKHQpe3RoaXMuY3Jvc3NPcmlnaW49dH0sc2V0TWFuYWdlcjpmdW5jdGlvbih0KXt0aGlzLm1hbmFnZXI9dH0sc2V0TWF0ZXJpYWxzOmZ1bmN0aW9uKHQpe3RoaXMubWF0ZXJpYWxzSW5mbz10aGlzLmNvbnZlcnQodCksdGhpcy5tYXRlcmlhbHM9e30sdGhpcy5tYXRlcmlhbHNBcnJheT1bXSx0aGlzLm5hbWVMb29rdXA9e319LGNvbnZlcnQ6ZnVuY3Rpb24odCl7aWYoIXRoaXMub3B0aW9ucylyZXR1cm4gdDt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIGk9dFtuXSxyPXt9O2Vbbl09cjtmb3IodmFyIG8gaW4gaSl7dmFyIGE9ITAscz1pW29dLHU9by50b0xvd2VyQ2FzZSgpO3N3aXRjaCh1KXtjYXNlXCJrZFwiOmNhc2VcImthXCI6Y2FzZVwia3NcIjp0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5ub3JtYWxpemVSR0ImJihzPVtzWzBdLzI1NSxzWzFdLzI1NSxzWzJdLzI1NV0pLHRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLmlnbm9yZVplcm9SR0JzJiYwPT09c1swXSYmMD09PXNbMV0mJjA9PT1zWzJdJiYoYT0hMSl9YSYmKHJbdV09cyl9fXJldHVybiBlfSxwcmVsb2FkOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubWF0ZXJpYWxzSW5mbyl0aGlzLmNyZWF0ZSh0KX0sZ2V0SW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmFtZUxvb2t1cFt0XX0sZ2V0QXNBcnJheTpmdW5jdGlvbigpe3ZhciB0PTA7Zm9yKHZhciBlIGluIHRoaXMubWF0ZXJpYWxzSW5mbyl0aGlzLm1hdGVyaWFsc0FycmF5W3RdPXRoaXMuY3JlYXRlKGUpLHRoaXMubmFtZUxvb2t1cFtlXT10LHQrKztyZXR1cm4gdGhpcy5tYXRlcmlhbHNBcnJheX0sY3JlYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10aGlzLm1hdGVyaWFsc1t0XSYmdGhpcy5jcmVhdGVNYXRlcmlhbF8odCksdGhpcy5tYXRlcmlhbHNbdF19LGNyZWF0ZU1hdGVyaWFsXzpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGV8fFwiXCI9PT1lP1wiXCI6L15odHRwcz86XFwvXFwvL2kudGVzdChlKT9lOnQrZX1mdW5jdGlvbiBuKHQsbil7aWYoIWFbdF0pe3ZhciByPWkuZ2V0VGV4dHVyZVBhcmFtcyhuLGEpLG89aS5sb2FkVGV4dHVyZShlKGkuYmFzZVVybCxyLnVybCkpO28ucmVwZWF0LmNvcHkoci5zY2FsZSksby5vZmZzZXQuY29weShyLm9mZnNldCksby53cmFwUz1pLndyYXAsby53cmFwVD1pLndyYXAsYVt0XT1vfX12YXIgaT10aGlzLHI9dGhpcy5tYXRlcmlhbHNJbmZvW3RdLGE9e25hbWU6dCxzaWRlOnRoaXMuc2lkZX07Zm9yKHZhciBzIGluIHIpe3ZhciB1PXJbc107aWYoXCJcIiE9PXUpc3dpdGNoKHMudG9Mb3dlckNhc2UoKSl7Y2FzZVwia2RcIjphLmNvbG9yPShuZXcgby5Db2xvcikuZnJvbUFycmF5KHUpO2JyZWFrO2Nhc2VcImtzXCI6YS5zcGVjdWxhcj0obmV3IG8uQ29sb3IpLmZyb21BcnJheSh1KTticmVhaztjYXNlXCJtYXBfa2RcIjpuKFwibWFwXCIsdSk7YnJlYWs7Y2FzZVwibWFwX2tzXCI6bihcInNwZWN1bGFyTWFwXCIsdSk7YnJlYWs7Y2FzZVwibWFwX2J1bXBcIjpjYXNlXCJidW1wXCI6bihcImJ1bXBNYXBcIix1KTticmVhaztjYXNlXCJuc1wiOmEuc2hpbmluZXNzPXBhcnNlRmxvYXQodSk7YnJlYWs7Y2FzZVwiZFwiOnU8MSYmKGEub3BhY2l0eT11LGEudHJhbnNwYXJlbnQ9ITApO2JyZWFrO2Nhc2VcIlRyXCI6dT4wJiYoYS5vcGFjaXR5PTEtdSxhLnRyYW5zcGFyZW50PSEwKX19cmV0dXJuIHRoaXMubWF0ZXJpYWxzW3RdPW5ldyBvLk1lc2hQaG9uZ01hdGVyaWFsKGEpLHRoaXMubWF0ZXJpYWxzW3RdfSxnZXRUZXh0dXJlUGFyYW1zOmZ1bmN0aW9uKHQsZSl7dmFyIG4saT17c2NhbGU6bmV3IG8uVmVjdG9yMigxLDEpLG9mZnNldDpuZXcgby5WZWN0b3IyKDAsMCl9LHI9dC5zcGxpdCgvXFxzKy8pO3JldHVybiBuPXIuaW5kZXhPZihcIi1ibVwiKSxuPj0wJiYoZS5idW1wU2NhbGU9cGFyc2VGbG9hdChyW24rMV0pLHIuc3BsaWNlKG4sMikpLG49ci5pbmRleE9mKFwiLXNcIiksbj49MCYmKGkuc2NhbGUuc2V0KHBhcnNlRmxvYXQocltuKzFdKSxwYXJzZUZsb2F0KHJbbisyXSkpLHIuc3BsaWNlKG4sNCkpLG49ci5pbmRleE9mKFwiLW9cIiksbj49MCYmKGkub2Zmc2V0LnNldChwYXJzZUZsb2F0KHJbbisxXSkscGFyc2VGbG9hdChyW24rMl0pKSxyLnNwbGljZShuLDQpKSxpLnVybD1yLmpvaW4oXCIgXCIpLnRyaW0oKSxpfSxsb2FkVGV4dHVyZTpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBhLHM9by5Mb2FkZXIuSGFuZGxlcnMuZ2V0KHQpLHU9dm9pZCAwIT09dGhpcy5tYW5hZ2VyP3RoaXMubWFuYWdlcjpvLkRlZmF1bHRMb2FkaW5nTWFuYWdlcjtyZXR1cm4gbnVsbD09PXMmJihzPW5ldyBvLlRleHR1cmVMb2FkZXIodSkpLHMuc2V0Q3Jvc3NPcmlnaW4mJnMuc2V0Q3Jvc3NPcmlnaW4odGhpcy5jcm9zc09yaWdpbiksYT1zLmxvYWQodCxuLGksciksdm9pZCAwIT09ZSYmKGEubWFwcGluZz1lKSxhfX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiByKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gbyh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscz1mdW5jdGlvbiB0KGUsbixpLHIpe3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgYT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7bnVsbCE9PWEmJnQoYSxuLGkscil9ZWxzZSBpZihcInZhbHVlXCJpbiBvJiZvLndyaXRhYmxlKW8udmFsdWU9aTtlbHNle3ZhciBzPW8uc2V0O3ZvaWQgMCE9PXMmJnMuY2FsbChyLGkpfXJldHVybiBpfSx1PWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sbD1uKDIpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2kodGhpcyxlKTt2YXIgdD1yKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3QudHlwZT1cIk1lc2hQcm94eVwiLHQuX3Byb3h5PW51bGw7dmFyIG49dDtyZXR1cm4gdC5fcmVtb3ZlZExpc3RlbmVyPWZ1bmN0aW9uKCl7bi5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVtb3ZlZFwiLG4uX3JlbW92ZWRMaXN0ZW5lciksbi5fcHJveHk9bnVsbH0sdC5hZGRFdmVudExpc3RlbmVyKFwicmVtb3ZlZFwiLHQuX3JlbW92ZWRMaXN0ZW5lciksdH1yZXR1cm4gbyhlLHQpLGEoZSxbe2tleTpcImFkZFByb3h5XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fcHJveHk9dCx1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KX19LHtrZXk6XCJwcm94eVBvc2l0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3h5P3RoaXMuX3Byb3h5LnBvc2l0aW9uOnUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicG9zaXRpb25cIix0aGlzKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Byb3h5P3RoaXMuX3Byb3h5LnBvc2l0aW9uPXQ6cyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJwb3NpdG9uXCIsdCx0aGlzKX19LHtrZXk6XCJwcm94eVJvdGF0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3h5P3RoaXMuX3Byb3h5LnJvdGF0aW9uOnUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicm90YXRpb25cIix0aGlzKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Byb3h5P3RoaXMuX3Byb3h5LnJvdGF0aW9uPXQ6cyhlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJyb3RhdGlvblwiLHQsdGhpcyl9fSx7a2V5OlwicHJveHlTY2FsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm94eT90aGlzLl9wcm94eS5zY2FsZTp1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInNjYWxlXCIsdGhpcyl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wcm94eT90aGlzLl9wcm94eS5zY2FsZT10OnMoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwic2NhbGVcIix0LHRoaXMpfX1dKSxlfShsLkdyb3VwKTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMikscz1pKGEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7dmFyIGk9dGhpcztyKHRoaXMsdCk7dmFyIG89ZS5jb250ZXh0LGE9ZS5zdGF0ZSx1PW51bGwsbD1udWxsLGM9bnVsbCxoPW51bGwsZj1udWxsLGQ9dm9pZCAwLHA9bmV3IHMuVmVjdG9yMyxnPW5ldyBzLlZlY3RvcjM7dGhpcy5pbml0PWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEZsb2F0MzJBcnJheShbLS41LC0uNSwwLDAsLjUsLS41LDEsMCwuNSwuNSwxLDEsLS41LC41LDAsMV0pLGU9bmV3IFVpbnQxNkFycmF5KFswLDEsMiwwLDIsM10pO3U9by5jcmVhdGVCdWZmZXIoKSxsPW8uY3JlYXRlQnVmZmVyKCksby5iaW5kQnVmZmVyKG8uQVJSQVlfQlVGRkVSLHUpLG8uYnVmZmVyRGF0YShvLkFSUkFZX0JVRkZFUix0LG8uU1RBVElDX0RSQVcpLG8uYmluZEJ1ZmZlcihvLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGwpLG8uYnVmZmVyRGF0YShvLkVMRU1FTlRfQVJSQVlfQlVGRkVSLGUsby5TVEFUSUNfRFJBVyksYz1pLmNyZWF0ZVByb2dyYW0oKSxoPXtwb3NpdGlvbjpvLmdldEF0dHJpYkxvY2F0aW9uKGMsXCJwb3NpdGlvblwiKSx1djpvLmdldEF0dHJpYkxvY2F0aW9uKGMsXCJ1dlwiKX0sZj17dXZPZmZzZXQ6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcInV2T2Zmc2V0XCIpLHV2U2NhbGU6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcInV2U2NhbGVcIikscm90YXRpb246by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcInJvdGF0aW9uXCIpLHNjYWxlOm8uZ2V0VW5pZm9ybUxvY2F0aW9uKGMsXCJzY2FsZVwiKSxvZmZzZXQ6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcIm9mZnNldFwiKSxhbmNob3I6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcImFuY2hvclwiKSxjb2xvcjpvLmdldFVuaWZvcm1Mb2NhdGlvbihjLFwiY29sb3JcIiksbWFwOm8uZ2V0VW5pZm9ybUxvY2F0aW9uKGMsXCJtYXBcIiksb3BhY2l0eTpvLmdldFVuaWZvcm1Mb2NhdGlvbihjLFwib3BhY2l0eVwiKSxtb2RlbFZpZXdNYXRyaXg6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcIm1vZGVsVmlld01hdHJpeFwiKSxwcm9qZWN0aW9uTWF0cml4Om8uZ2V0VW5pZm9ybUxvY2F0aW9uKGMsXCJwcm9qZWN0aW9uTWF0cml4XCIpLGZvZ1R5cGU6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcImZvZ1R5cGVcIiksZm9nRGVuc2l0eTpvLmdldFVuaWZvcm1Mb2NhdGlvbihjLFwiZm9nRGVuc2l0eVwiKSxmb2dOZWFyOm8uZ2V0VW5pZm9ybUxvY2F0aW9uKGMsXCJmb2dOZWFyXCIpLGZvZ0ZhcjpvLmdldFVuaWZvcm1Mb2NhdGlvbihjLFwiZm9nRmFyXCIpLGZvZ0NvbG9yOm8uZ2V0VW5pZm9ybUxvY2F0aW9uKGMsXCJmb2dDb2xvclwiKSxhbHBoYVRlc3Q6by5nZXRVbmlmb3JtTG9jYXRpb24oYyxcImFscGhhVGVzdFwiKX07dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFwiY2FudmFzXCIpO24ud2lkdGg9OCxuLmhlaWdodD04O3ZhciByPW4uZ2V0Q29udGV4dChcIjJkXCIpO3IuZmlsbFN0eWxlPVwid2hpdGVcIixyLmZpbGxSZWN0KDAsMCw4LDgpLGQ9bmV3IHMuVGV4dHVyZShuKSxkLm5lZWRzVXBkYXRlPSEwfSx0aGlzLnJlbmRlcj1mdW5jdGlvbih0LHIpe2lmKDAhPT1uLmxlbmd0aCl7Y3x8aS5pbml0KCksby51c2VQcm9ncmFtKGMpLGEuaW5pdEF0dHJpYnV0ZXMoKSxhLmVuYWJsZUF0dHJpYnV0ZShoLnBvc2l0aW9uKSxhLmVuYWJsZUF0dHJpYnV0ZShoLnV2KSxhLmRpc2FibGVVbnVzZWRBdHRyaWJ1dGVzKCksYS5kaXNhYmxlKG8uQ1VMTF9GQUNFKSxhLmVuYWJsZShvLkJMRU5EKSxvLmJpbmRCdWZmZXIoby5BUlJBWV9CVUZGRVIsdSksby52ZXJ0ZXhBdHRyaWJQb2ludGVyKGgucG9zaXRpb24sMixvLkZMT0FULCExLDE2LDApLG8udmVydGV4QXR0cmliUG9pbnRlcihoLnV2LDIsby5GTE9BVCwhMSwxNiw4KSxvLmJpbmRCdWZmZXIoby5FTEVNRU5UX0FSUkFZX0JVRkZFUixsKSxvLnVuaWZvcm1NYXRyaXg0ZnYoZi5wcm9qZWN0aW9uTWF0cml4LCExLHIucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50cyksYS5hY3RpdmVUZXh0dXJlKG8uVEVYVFVSRTApLG8udW5pZm9ybTFpKGYubWFwLDApO3ZhciB2PTAsbT0wLHk9dC5mb2c7eT8oby51bmlmb3JtM2YoZi5mb2dDb2xvcix5LmNvbG9yLnIseS5jb2xvci5nLHkuY29sb3IuYikseSBpbnN0YW5jZW9mIHMuRm9nPyhvLnVuaWZvcm0xZihmLmZvZ05lYXIseS5uZWFyKSxvLnVuaWZvcm0xZihmLmZvZ0Zhcix5LmZhciksby51bmlmb3JtMWkoZi5mb2dUeXBlLDEpLHY9MSxtPTEpOnkgaW5zdGFuY2VvZiBzLkZvZ0V4cDImJihvLnVuaWZvcm0xZihmLmZvZ0RlbnNpdHkseS5kZW5zaXR5KSxvLnVuaWZvcm0xaShmLmZvZ1R5cGUsMiksdj0yLG09MikpOihvLnVuaWZvcm0xaShmLmZvZ1R5cGUsMCksdj0wLG09MCk7Zm9yKHZhciBfPWUuZG9tRWxlbWVudC53aWR0aCxiPWUuZG9tRWxlbWVudC5oZWlnaHQseD1lLmdldFBpeGVsUmF0aW8oKSx3PVtdLEU9MCxTPW4ubGVuZ3RoO0U8UztFKyspe3ZhciBNPW5bRV0sQz1NLm1hdGVyaWFsO2lmKEMudmlzaWJsZSl7TS5tb2RlbFZpZXdNYXRyaXgubXVsdGlwbHlNYXRyaWNlcyhyLm1hdHJpeFdvcmxkSW52ZXJzZSxNLm1hdHJpeFdvcmxkKSxvLnVuaWZvcm0xZihmLmFscGhhVGVzdCxDLmFscGhhVGVzdCksby51bmlmb3JtTWF0cml4NGZ2KGYubW9kZWxWaWV3TWF0cml4LCExLE0ubW9kZWxWaWV3TWF0cml4LmVsZW1lbnRzKSxwLnNldEZyb21NYXRyaXhQb3NpdGlvbihNLm1vZGVsVmlld01hdHJpeCksby51bmlmb3JtM2YoZi5vZmZzZXQscC54LHAueSxwLnopLEMubWF0ZXJpYWxTY2FsZT8od1swXT1NLnNjYWxlLngvXyooeCsxKSx3WzFdPU0uc2NhbGUueS9iKih4KzEpKTood1swXT1nLngsd1sxXT1nLnkpO3ZhciBJPTA7dC5mb2cmJkMuZm9nJiYoST1tKSx2IT09SSYmKG8udW5pZm9ybTFpKGYuZm9nVHlwZSxJKSx2PUkpLG51bGwhPT1DLm1hcD8oby51bmlmb3JtMmYoZi51dk9mZnNldCxDLm1hcC5vZmZzZXQueCxDLm1hcC5vZmZzZXQueSksby51bmlmb3JtMmYoZi51dlNjYWxlLEMubWFwLnJlcGVhdC54LEMubWFwLnJlcGVhdC55KSk6KG8udW5pZm9ybTJmKGYudXZPZmZzZXQsMCwwKSxvLnVuaWZvcm0yZihmLnV2U2NhbGUsMSwxKSksby51bmlmb3JtMWYoZi5vcGFjaXR5LEMub3BhY2l0eSksby51bmlmb3JtM2YoZi5jb2xvcixDLmNvbG9yLnIsQy5jb2xvci5nLEMuY29sb3IuYiksby51bmlmb3JtMWYoZi5yb3RhdGlvbixDLnJvdGF0aW9uKSxDLmFuY2hvciYmby51bmlmb3JtMmYoZi5hbmNob3IsQy5hbmNob3JbMF0sQy5hbmNob3JbMV0pLG8udW5pZm9ybTJmdihmLnNjYWxlLHcpLGEuc2V0QmxlbmRpbmcoQy5ibGVuZGluZyxDLmJsZW5kRXF1YXRpb24sQy5ibGVuZFNyYyxDLmJsZW5kRHN0KSxhLmJ1ZmZlcnMuZGVwdGguc2V0VGVzdChDLmRlcHRoVGVzdCksYS5idWZmZXJzLmRlcHRoLnNldE1hc2soQy5kZXB0aFdyaXRlKSxDLm1hcD9lLnNldFRleHR1cmUyRChDLm1hcCwwKTplLnNldFRleHR1cmUyRChkLDApLG8uZHJhd0VsZW1lbnRzKG8uVFJJQU5HTEVTLDYsby5VTlNJR05FRF9TSE9SVCwwKX19ZS5yZXNldEdMU3RhdGUoKX19LHRoaXMuY3JlYXRlUHJvZ3JhbT1mdW5jdGlvbigpe3ZhciB0PW8uY3JlYXRlUHJvZ3JhbSgpLG49by5jcmVhdGVTaGFkZXIoby5WRVJURVhfU0hBREVSKSxpPW8uY3JlYXRlU2hhZGVyKG8uRlJBR01FTlRfU0hBREVSKSxyPWUuZ2V0UHJlY2lzaW9uKCksYT1cInByZWNpc2lvbiBcIityK1wiIGZsb2F0O1wiO3JldHVybiBvLnNoYWRlclNvdXJjZShuLFthLFwidW5pZm9ybSBtYXQ0IG1vZGVsVmlld01hdHJpeDtcIixcInVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1wiLFwidW5pZm9ybSBmbG9hdCByb3RhdGlvbjtcIixcInVuaWZvcm0gdmVjMiBzY2FsZTtcIixcInVuaWZvcm0gdmVjMiB1dk9mZnNldDtcIixcInVuaWZvcm0gdmVjMiB1dlNjYWxlO1wiLFwidW5pZm9ybSB2ZWMzIG9mZnNldDtcIixcInVuaWZvcm0gdmVjMiBhbmNob3I7XCIsXCJhdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjtcIixcImF0dHJpYnV0ZSB2ZWMyIHV2O1wiLFwidmFyeWluZyB2ZWMyIHZVVjtcIixcInZvaWQgbWFpbigpIHtcIixcInZVViA9IHV2T2Zmc2V0ICsgdXYgKiB1dlNjYWxlO1wiLFwidmVjMiBhbGlnbmVkUG9zaXRpb24gPSB2ZWMyKHBvc2l0aW9uLnggKyAoMC41IC0gYW5jaG9yLngpLCBwb3NpdGlvbi55IC0gKDAuNSAtIGFuY2hvci55KSkgKiBzY2FsZTtcIixcInZlYzQgYmFzZVBvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQob2Zmc2V0LCAxLjApO1wiLFwidmVjNCBmaW5hbFBvc2l0aW9uID0gdmVjNChiYXNlUG9zaXRpb24ueCAvIGJhc2VQb3NpdGlvbi53LCBiYXNlUG9zaXRpb24ueSAvIGJhc2VQb3NpdGlvbi53LCBiYXNlUG9zaXRpb24ueiAvIGJhc2VQb3NpdGlvbi53LCAxLjApO1wiLFwiZmluYWxQb3NpdGlvbi54eSArPSBhbGlnbmVkUG9zaXRpb247XCIsXCJnbF9Qb3NpdGlvbiA9IGZpbmFsUG9zaXRpb247XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIikpLG8uc2hhZGVyU291cmNlKGksW2EsXCJ1bmlmb3JtIHZlYzMgY29sb3I7XCIsXCJ1bmlmb3JtIHNhbXBsZXIyRCBtYXA7XCIsXCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsXCJ1bmlmb3JtIGludCBmb2dUeXBlO1wiLFwidW5pZm9ybSB2ZWMzIGZvZ0NvbG9yO1wiLFwidW5pZm9ybSBmbG9hdCBmb2dEZW5zaXR5O1wiLFwidW5pZm9ybSBmbG9hdCBmb2dOZWFyO1wiLFwidW5pZm9ybSBmbG9hdCBmb2dGYXI7XCIsXCJ1bmlmb3JtIGZsb2F0IGFscGhhVGVzdDtcIixcInZhcnlpbmcgdmVjMiB2VVY7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJ2ZWM0IHRleHR1cmUgPSB0ZXh0dXJlMkQoIG1hcCwgdlVWICk7XCIsXCJpZiAoIHRleHR1cmUuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7XCIsXCJnbF9GcmFnQ29sb3IgPSB2ZWM0KCBjb2xvciAqIHRleHR1cmUueHl6LCB0ZXh0dXJlLmEgKiBvcGFjaXR5ICk7XCIsXCJpZiAoIGZvZ1R5cGUgPiAwICkge1wiLFwiZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53O1wiLFwiZmxvYXQgZm9nRmFjdG9yID0gMC4wO1wiLFwiaWYgKCBmb2dUeXBlID09IDEgKSB7XCIsXCJmb2dGYWN0b3IgPSBzbW9vdGhzdGVwKCBmb2dOZWFyLCBmb2dGYXIsIGRlcHRoICk7XCIsXCJ9IGVsc2Uge1wiLFwiY29uc3QgZmxvYXQgTE9HMiA9IDEuNDQyNjk1O1wiLFwiZm9nRmFjdG9yID0gZXhwMiggLSBmb2dEZW5zaXR5ICogZm9nRGVuc2l0eSAqIGRlcHRoICogZGVwdGggKiBMT0cyICk7XCIsXCJmb2dGYWN0b3IgPSAxLjAgLSBjbGFtcCggZm9nRmFjdG9yLCAwLjAsIDEuMCApO1wiLFwifVwiLFwiZ2xfRnJhZ0NvbG9yID0gbWl4KCBnbF9GcmFnQ29sb3IsIHZlYzQoIGZvZ0NvbG9yLCBnbF9GcmFnQ29sb3IudyApLCBmb2dGYWN0b3IgKTtcIixcIn1cIixcIn1cIl0uam9pbihcIlxcblwiKSksby5jb21waWxlU2hhZGVyKG4pLG8uY29tcGlsZVNoYWRlcihpKSxvLmF0dGFjaFNoYWRlcih0LG4pLG8uYXR0YWNoU2hhZGVyKHQsaSksby5saW5rUHJvZ3JhbSh0KSx0fSx0aGlzLnBhaW50ZXJTb3J0U3RhYmxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQucmVuZGVyT3JkZXIhPT1lLnJlbmRlck9yZGVyP3QucmVuZGVyT3JkZXItZS5yZW5kZXJPcmRlcjp0LnohPT1lLno/ZS56LXQuejplLmlkLXQuaWR9fXJldHVybiBvKHQsW3trZXk6XCJnZXRBQUJCXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cImdldEFBQkJcIn19XSksdH0oKTtlLmRlZmF1bHQ9dX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfXZhciByPW4oMiksbz1pKHIpO28uT0JKTG9hZGVyPWZ1bmN0aW9uKHQpe3RoaXMubWFuYWdlcj12b2lkIDAhPT10P3Q6by5EZWZhdWx0TG9hZGluZ01hbmFnZXIsdGhpcy5tYXRlcmlhbHM9bnVsbCx0aGlzLnJlZ2V4cD17dmVydGV4X3BhdHRlcm46L152XFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyxub3JtYWxfcGF0dGVybjovXnZuXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKVxccysoW1xcZHxcXC58XFwrfFxcLXxlfEVdKylcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspLyx1dl9wYXR0ZXJuOi9ednRcXHMrKFtcXGR8XFwufFxcK3xcXC18ZXxFXSspXFxzKyhbXFxkfFxcLnxcXCt8XFwtfGV8RV0rKS8sZmFjZV92ZXJ0ZXg6L15mXFxzKygtP1xcZCspXFxzKygtP1xcZCspXFxzKygtP1xcZCspKD86XFxzKygtP1xcZCspKT8vLGZhY2VfdmVydGV4X3V2Oi9eZlxccysoLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXHMrKC0/XFxkKylcXC8oLT9cXGQrKSg/OlxccysoLT9cXGQrKVxcLygtP1xcZCspKT8vLGZhY2VfdmVydGV4X3V2X25vcm1hbDovXmZcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspXFxzKygtP1xcZCspXFwvKC0/XFxkKylcXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcLygtP1xcZCspXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC8oLT9cXGQrKVxcLygtP1xcZCspKT8vLGZhY2VfdmVydGV4X25vcm1hbDovXmZcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKVxccysoLT9cXGQrKVxcL1xcLygtP1xcZCspXFxzKygtP1xcZCspXFwvXFwvKC0/XFxkKykoPzpcXHMrKC0/XFxkKylcXC9cXC8oLT9cXGQrKSk/LyxvYmplY3RfcGF0dGVybjovXltvZ11cXHMqKC4rKT8vLHNtb290aGluZ19wYXR0ZXJuOi9ec1xccysoXFxkK3xvbnxvZmYpLyxtYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm46L15tdGxsaWIgLyxtYXRlcmlhbF91c2VfcGF0dGVybjovXnVzZW10bCAvfX0sby5PQkpMb2FkZXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpvLk9CSkxvYWRlcixsb2FkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXRoaXMsYT1uZXcgby5GaWxlTG9hZGVyKHIubWFuYWdlcik7YS5zZXRQYXRoKHRoaXMucGF0aCksYS5sb2FkKHQsZnVuY3Rpb24odCl7ZShyLnBhcnNlKHQpKX0sbixpKX0sc2V0UGF0aDpmdW5jdGlvbih0KXt0aGlzLnBhdGg9dH0sc2V0TWF0ZXJpYWxzOmZ1bmN0aW9uKHQpe3RoaXMubWF0ZXJpYWxzPXR9LF9jcmVhdGVQYXJzZXJTdGF0ZTpmdW5jdGlvbigpe3ZhciB0PXtvYmplY3RzOltdLG9iamVjdDp7fSx2ZXJ0aWNlczpbXSxub3JtYWxzOltdLHV2czpbXSxtYXRlcmlhbExpYnJhcmllczpbXSxzdGFydE9iamVjdDpmdW5jdGlvbih0LGUpe2lmKHRoaXMub2JqZWN0JiZ0aGlzLm9iamVjdC5mcm9tRGVjbGFyYXRpb249PT0hMSlyZXR1cm4gdGhpcy5vYmplY3QubmFtZT10LHZvaWQodGhpcy5vYmplY3QuZnJvbURlY2xhcmF0aW9uPWUhPT0hMSk7dmFyIG49dGhpcy5vYmplY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub2JqZWN0LmN1cnJlbnRNYXRlcmlhbD90aGlzLm9iamVjdC5jdXJyZW50TWF0ZXJpYWwoKTp2b2lkIDA7aWYodGhpcy5vYmplY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub2JqZWN0Ll9maW5hbGl6ZSYmdGhpcy5vYmplY3QuX2ZpbmFsaXplKCEwKSx0aGlzLm9iamVjdD17bmFtZTp0fHxcIlwiLGZyb21EZWNsYXJhdGlvbjplIT09ITEsZ2VvbWV0cnk6e3ZlcnRpY2VzOltdLG5vcm1hbHM6W10sdXZzOltdfSxtYXRlcmlhbHM6W10sc21vb3RoOiEwLHN0YXJ0TWF0ZXJpYWw6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9maW5hbGl6ZSghMSk7biYmKG4uaW5oZXJpdGVkfHxuLmdyb3VwQ291bnQ8PTApJiZ0aGlzLm1hdGVyaWFscy5zcGxpY2Uobi5pbmRleCwxKTt2YXIgaT17aW5kZXg6dGhpcy5tYXRlcmlhbHMubGVuZ3RoLG5hbWU6dHx8XCJcIixtdGxsaWI6QXJyYXkuaXNBcnJheShlKSYmZS5sZW5ndGg+MD9lW2UubGVuZ3RoLTFdOlwiXCIsc21vb3RoOnZvaWQgMCE9PW4/bi5zbW9vdGg6dGhpcy5zbW9vdGgsZ3JvdXBTdGFydDp2b2lkIDAhPT1uP24uZ3JvdXBFbmQ6MCxncm91cEVuZDotMSxncm91cENvdW50Oi0xLGluaGVyaXRlZDohMSxjbG9uZTpmdW5jdGlvbih0KXt2YXIgZT17aW5kZXg6XCJudW1iZXJcIj09dHlwZW9mIHQ/dDp0aGlzLmluZGV4LG5hbWU6dGhpcy5uYW1lLG10bGxpYjp0aGlzLm10bGxpYixzbW9vdGg6dGhpcy5zbW9vdGgsZ3JvdXBTdGFydDowLGdyb3VwRW5kOi0xLGdyb3VwQ291bnQ6LTEsaW5oZXJpdGVkOiExfTtyZXR1cm4gZS5jbG9uZT10aGlzLmNsb25lLmJpbmQoZSksZX19O3JldHVybiB0aGlzLm1hdGVyaWFscy5wdXNoKGkpLGl9LGN1cnJlbnRNYXRlcmlhbDpmdW5jdGlvbigpe2lmKHRoaXMubWF0ZXJpYWxzLmxlbmd0aD4wKXJldHVybiB0aGlzLm1hdGVyaWFsc1t0aGlzLm1hdGVyaWFscy5sZW5ndGgtMV19LF9maW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnRNYXRlcmlhbCgpO2lmKGUmJmUuZ3JvdXBFbmQ9PT0tMSYmKGUuZ3JvdXBFbmQ9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGgvMyxlLmdyb3VwQ291bnQ9ZS5ncm91cEVuZC1lLmdyb3VwU3RhcnQsZS5pbmhlcml0ZWQ9ITEpLHQmJnRoaXMubWF0ZXJpYWxzLmxlbmd0aD4xKWZvcih2YXIgbj10aGlzLm1hdGVyaWFscy5sZW5ndGgtMTtuPj0wO24tLSl0aGlzLm1hdGVyaWFsc1tuXS5ncm91cENvdW50PD0wJiZ0aGlzLm1hdGVyaWFscy5zcGxpY2UobiwxKTtyZXR1cm4gdCYmMD09PXRoaXMubWF0ZXJpYWxzLmxlbmd0aCYmdGhpcy5tYXRlcmlhbHMucHVzaCh7bmFtZTpcIlwiLHNtb290aDp0aGlzLnNtb290aH0pLGV9fSxuJiZuLm5hbWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4uY2xvbmUpe3ZhciBpPW4uY2xvbmUoMCk7aS5pbmhlcml0ZWQ9ITAsdGhpcy5vYmplY3QubWF0ZXJpYWxzLnB1c2goaSl9dGhpcy5vYmplY3RzLnB1c2godGhpcy5vYmplY3QpfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3RoaXMub2JqZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9iamVjdC5fZmluYWxpemUmJnRoaXMub2JqZWN0Ll9maW5hbGl6ZSghMCl9LHBhcnNlVmVydGV4SW5kZXg6ZnVuY3Rpb24odCxlKXt2YXIgbj1wYXJzZUludCh0LDEwKTtyZXR1cm4gMyoobj49MD9uLTE6bitlLzMpfSxwYXJzZU5vcm1hbEluZGV4OmZ1bmN0aW9uKHQsZSl7dmFyIG49cGFyc2VJbnQodCwxMCk7cmV0dXJuIDMqKG4+PTA/bi0xOm4rZS8zKX0scGFyc2VVVkluZGV4OmZ1bmN0aW9uKHQsZSl7dmFyIG49cGFyc2VJbnQodCwxMCk7cmV0dXJuIDIqKG4+PTA/bi0xOm4rZS8yKX0sYWRkVmVydGV4OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnZlcnRpY2VzLHI9dGhpcy5vYmplY3QuZ2VvbWV0cnkudmVydGljZXM7ci5wdXNoKGlbdCswXSksci5wdXNoKGlbdCsxXSksci5wdXNoKGlbdCsyXSksci5wdXNoKGlbZSswXSksci5wdXNoKGlbZSsxXSksci5wdXNoKGlbZSsyXSksci5wdXNoKGlbbiswXSksci5wdXNoKGlbbisxXSksci5wdXNoKGlbbisyXSl9LGFkZFZlcnRleExpbmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52ZXJ0aWNlcyxuPXRoaXMub2JqZWN0Lmdlb21ldHJ5LnZlcnRpY2VzO24ucHVzaChlW3QrMF0pLG4ucHVzaChlW3QrMV0pLG4ucHVzaChlW3QrMl0pfSxhZGROb3JtYWw6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMubm9ybWFscyxyPXRoaXMub2JqZWN0Lmdlb21ldHJ5Lm5vcm1hbHM7ci5wdXNoKGlbdCswXSksci5wdXNoKGlbdCsxXSksci5wdXNoKGlbdCsyXSksci5wdXNoKGlbZSswXSksci5wdXNoKGlbZSsxXSksci5wdXNoKGlbZSsyXSksci5wdXNoKGlbbiswXSksci5wdXNoKGlbbisxXSksci5wdXNoKGlbbisyXSl9LGFkZFVWOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnV2cyxyPXRoaXMub2JqZWN0Lmdlb21ldHJ5LnV2cztyLnB1c2goaVt0KzBdKSxyLnB1c2goaVt0KzFdKSxyLnB1c2goaVtlKzBdKSxyLnB1c2goaVtlKzFdKSxyLnB1c2goaVtuKzBdKSxyLnB1c2goaVtuKzFdKX0sYWRkVVZMaW5lOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudXZzLG49dGhpcy5vYmplY3QuZ2VvbWV0cnkudXZzO24ucHVzaChlW3QrMF0pLG4ucHVzaChlW3QrMV0pfSxhZGRGYWNlOmZ1bmN0aW9uKHQsZSxuLGkscixvLGEscyx1LGwsYyxoKXt2YXIgZixkPXRoaXMudmVydGljZXMubGVuZ3RoLHA9dGhpcy5wYXJzZVZlcnRleEluZGV4KHQsZCksZz10aGlzLnBhcnNlVmVydGV4SW5kZXgoZSxkKSx2PXRoaXMucGFyc2VWZXJ0ZXhJbmRleChuLGQpO2lmKHZvaWQgMD09PWk/dGhpcy5hZGRWZXJ0ZXgocCxnLHYpOihmPXRoaXMucGFyc2VWZXJ0ZXhJbmRleChpLGQpLHRoaXMuYWRkVmVydGV4KHAsZyxmKSx0aGlzLmFkZFZlcnRleChnLHYsZikpLHZvaWQgMCE9PXIpe3ZhciBtPXRoaXMudXZzLmxlbmd0aDtwPXRoaXMucGFyc2VVVkluZGV4KHIsbSksZz10aGlzLnBhcnNlVVZJbmRleChvLG0pLHY9dGhpcy5wYXJzZVVWSW5kZXgoYSxtKSx2b2lkIDA9PT1pP3RoaXMuYWRkVVYocCxnLHYpOihmPXRoaXMucGFyc2VVVkluZGV4KHMsbSksdGhpcy5hZGRVVihwLGcsZiksdGhpcy5hZGRVVihnLHYsZikpfWlmKHZvaWQgMCE9PXUpe3ZhciB5PXRoaXMubm9ybWFscy5sZW5ndGg7cD10aGlzLnBhcnNlTm9ybWFsSW5kZXgodSx5KSxnPXU9PT1sP3A6dGhpcy5wYXJzZU5vcm1hbEluZGV4KGwseSksdj11PT09Yz9wOnRoaXMucGFyc2VOb3JtYWxJbmRleChjLHkpLHZvaWQgMD09PWk/dGhpcy5hZGROb3JtYWwocCxnLHYpOihmPXRoaXMucGFyc2VOb3JtYWxJbmRleChoLHkpLHRoaXMuYWRkTm9ybWFsKHAsZyxmKSx0aGlzLmFkZE5vcm1hbChnLHYsZikpfX0sYWRkTGluZUdlb21ldHJ5OmZ1bmN0aW9uKHQsZSl7dGhpcy5vYmplY3QuZ2VvbWV0cnkudHlwZT1cIkxpbmVcIjtmb3IodmFyIG49dGhpcy52ZXJ0aWNlcy5sZW5ndGgsaT10aGlzLnV2cy5sZW5ndGgscj0wLG89dC5sZW5ndGg7cjxvO3IrKyl0aGlzLmFkZFZlcnRleExpbmUodGhpcy5wYXJzZVZlcnRleEluZGV4KHRbcl0sbikpO2Zvcih2YXIgYT0wLG89ZS5sZW5ndGg7YTxvO2ErKyl0aGlzLmFkZFVWTGluZSh0aGlzLnBhcnNlVVZJbmRleChlW2FdLGkpKX19O3JldHVybiB0LnN0YXJ0T2JqZWN0KFwiXCIsITEpLHR9LHBhcnNlOmZ1bmN0aW9uKHQpe2NvbnNvbGUudGltZShcIk9CSkxvYWRlclwiKTt2YXIgZT10aGlzLl9jcmVhdGVQYXJzZXJTdGF0ZSgpO3QuaW5kZXhPZihcIlxcclxcblwiKSE9PS0xJiYodD10LnJlcGxhY2UoL1xcclxcbi9nLFwiXFxuXCIpKSx0LmluZGV4T2YoXCJcXFxcXFxuXCIpIT09LTEmJih0PXQucmVwbGFjZSgvXFxcXFxcbi9nLFwiXCIpKTtmb3IodmFyIG49dC5zcGxpdChcIlxcblwiKSxpPVwiXCIscj1cIlwiLGE9XCJcIixzPTAsdT1bXSxsPVwiZnVuY3Rpb25cIj09dHlwZW9mXCJcIi50cmltTGVmdCxjPTAsaD1uLmxlbmd0aDtjPGg7YysrKWlmKGk9bltjXSxpPWw/aS50cmltTGVmdCgpOmkudHJpbSgpLHM9aS5sZW5ndGgsMCE9PXMmJihyPWkuY2hhckF0KDApLFwiI1wiIT09cikpaWYoXCJ2XCI9PT1yKWlmKGE9aS5jaGFyQXQoMSksXCIgXCI9PT1hJiZudWxsIT09KHU9dGhpcy5yZWdleHAudmVydGV4X3BhdHRlcm4uZXhlYyhpKSkpZS52ZXJ0aWNlcy5wdXNoKHBhcnNlRmxvYXQodVsxXSkscGFyc2VGbG9hdCh1WzJdKSxwYXJzZUZsb2F0KHVbM10pKTtlbHNlIGlmKFwiblwiPT09YSYmbnVsbCE9PSh1PXRoaXMucmVnZXhwLm5vcm1hbF9wYXR0ZXJuLmV4ZWMoaSkpKWUubm9ybWFscy5wdXNoKHBhcnNlRmxvYXQodVsxXSkscGFyc2VGbG9hdCh1WzJdKSxwYXJzZUZsb2F0KHVbM10pKTtlbHNle2lmKFwidFwiIT09YXx8bnVsbD09PSh1PXRoaXMucmVnZXhwLnV2X3BhdHRlcm4uZXhlYyhpKSkpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB2ZXJ0ZXgvbm9ybWFsL3V2IGxpbmU6ICdcIitpK1wiJ1wiKTtlLnV2cy5wdXNoKHBhcnNlRmxvYXQodVsxXSkscGFyc2VGbG9hdCh1WzJdKSl9ZWxzZSBpZihcImZcIj09PXIpaWYobnVsbCE9PSh1PXRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2X25vcm1hbC5leGVjKGkpKSllLmFkZEZhY2UodVsxXSx1WzRdLHVbN10sdVsxMF0sdVsyXSx1WzVdLHVbOF0sdVsxMV0sdVszXSx1WzZdLHVbOV0sdVsxMl0pO2Vsc2UgaWYobnVsbCE9PSh1PXRoaXMucmVnZXhwLmZhY2VfdmVydGV4X3V2LmV4ZWMoaSkpKWUuYWRkRmFjZSh1WzFdLHVbM10sdVs1XSx1WzddLHVbMl0sdVs0XSx1WzZdLHVbOF0pO2Vsc2UgaWYobnVsbCE9PSh1PXRoaXMucmVnZXhwLmZhY2VfdmVydGV4X25vcm1hbC5leGVjKGkpKSllLmFkZEZhY2UodVsxXSx1WzNdLHVbNV0sdVs3XSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx2b2lkIDAsdVsyXSx1WzRdLHVbNl0sdVs4XSk7ZWxzZXtpZihudWxsPT09KHU9dGhpcy5yZWdleHAuZmFjZV92ZXJ0ZXguZXhlYyhpKSkpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmYWNlIGxpbmU6ICdcIitpK1wiJ1wiKTtlLmFkZEZhY2UodVsxXSx1WzJdLHVbM10sdVs0XSl9ZWxzZSBpZihcImxcIj09PXIpe3ZhciBmPWkuc3Vic3RyaW5nKDEpLnRyaW0oKS5zcGxpdChcIiBcIiksZD1bXSxwPVtdO2lmKGkuaW5kZXhPZihcIi9cIik9PT0tMSlkPWY7ZWxzZSBmb3IodmFyIGc9MCx2PWYubGVuZ3RoO2c8djtnKyspe3ZhciBtPWZbZ10uc3BsaXQoXCIvXCIpO1wiXCIhPT1tWzBdJiZkLnB1c2gobVswXSksXCJcIiE9PW1bMV0mJnAucHVzaChtWzFdKX1lLmFkZExpbmVHZW9tZXRyeShkLHApfWVsc2UgaWYobnVsbCE9PSh1PXRoaXMucmVnZXhwLm9iamVjdF9wYXR0ZXJuLmV4ZWMoaSkpKXt2YXIgeT0oXCIgXCIrdVswXS5zdWJzdHIoMSkudHJpbSgpKS5zdWJzdHIoMSk7ZS5zdGFydE9iamVjdCh5KX1lbHNlIGlmKHRoaXMucmVnZXhwLm1hdGVyaWFsX3VzZV9wYXR0ZXJuLnRlc3QoaSkpZS5vYmplY3Quc3RhcnRNYXRlcmlhbChpLnN1YnN0cmluZyg3KS50cmltKCksZS5tYXRlcmlhbExpYnJhcmllcyk7ZWxzZSBpZih0aGlzLnJlZ2V4cC5tYXRlcmlhbF9saWJyYXJ5X3BhdHRlcm4udGVzdChpKSllLm1hdGVyaWFsTGlicmFyaWVzLnB1c2goaS5zdWJzdHJpbmcoNykudHJpbSgpKTtlbHNle2lmKG51bGw9PT0odT10aGlzLnJlZ2V4cC5zbW9vdGhpbmdfcGF0dGVybi5leGVjKGkpKSl7aWYoXCJcXDBcIj09PWkpY29udGludWU7dGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBsaW5lOiAnXCIraStcIidcIil9dmFyIF89dVsxXS50cmltKCkudG9Mb3dlckNhc2UoKTtlLm9iamVjdC5zbW9vdGg9XCIxXCI9PT1ffHxcIm9uXCI9PT1fO3ZhciBiPWUub2JqZWN0LmN1cnJlbnRNYXRlcmlhbCgpO2ImJihiLnNtb290aD1lLm9iamVjdC5zbW9vdGgpfWUuZmluYWxpemUoKTt2YXIgeD1uZXcgby5Hcm91cDt4Lm1hdGVyaWFsTGlicmFyaWVzPVtdLmNvbmNhdChlLm1hdGVyaWFsTGlicmFyaWVzKTtmb3IodmFyIGM9MCxoPWUub2JqZWN0cy5sZW5ndGg7YzxoO2MrKyl7dmFyIHc9ZS5vYmplY3RzW2NdLEU9dy5nZW9tZXRyeSxTPXcubWF0ZXJpYWxzLE09XCJMaW5lXCI9PT1FLnR5cGU7aWYoMCE9PUUudmVydGljZXMubGVuZ3RoKXt2YXIgQz1uZXcgby5CdWZmZXJHZW9tZXRyeTtDLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IG8uQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkoRS52ZXJ0aWNlcyksMykpLEUubm9ybWFscy5sZW5ndGg+MD9DLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBvLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KEUubm9ybWFscyksMykpOkMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKSxFLnV2cy5sZW5ndGg+MCYmQy5hZGRBdHRyaWJ1dGUoXCJ1dlwiLG5ldyBvLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KEUudXZzKSwyKSk7Zm9yKHZhciBJPVtdLE89MCxUPVMubGVuZ3RoO088VDtPKyspe3ZhciBQPVNbT10sYj12b2lkIDA7aWYobnVsbCE9PXRoaXMubWF0ZXJpYWxzJiYoYj10aGlzLm1hdGVyaWFscy5jcmVhdGUoUC5uYW1lKSxNJiZiJiYhKGIgaW5zdGFuY2VvZiBvLkxpbmVCYXNpY01hdGVyaWFsKSkpe3ZhciBBPW5ldyBvLkxpbmVCYXNpY01hdGVyaWFsO0EuY29weShiKSxiPUF9Ynx8KGI9TT9uZXcgby5MaW5lQmFzaWNNYXRlcmlhbDpuZXcgby5NZXNoUGhvbmdNYXRlcmlhbCxiLm5hbWU9UC5uYW1lKSxiLnNoYWRpbmc9UC5zbW9vdGg/by5TbW9vdGhTaGFkaW5nOm8uRmxhdFNoYWRpbmcsSS5wdXNoKGIpfXZhciBMO2lmKEkubGVuZ3RoPjEpe2Zvcih2YXIgTz0wLFQ9Uy5sZW5ndGg7TzxUO08rKyl7dmFyIFA9U1tPXTtDLmFkZEdyb3VwKFAuZ3JvdXBTdGFydCxQLmdyb3VwQ291bnQsTyl9TD1NP25ldyBvLkxpbmVTZWdtZW50cyhDLEkpOm5ldyBvLk1lc2goQyxJKX1lbHNlIEw9TT9uZXcgby5MaW5lU2VnbWVudHMoQyxJWzBdKTpuZXcgby5NZXNoKEMsSVswXSk7TC5uYW1lPXcubmFtZSx4LmFkZChMKX19cmV0dXJuIGNvbnNvbGUudGltZUVuZChcIk9CSkxvYWRlclwiKSx4fX19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQpe3JldHVybiFpc05hTih0KSYmaXNGaW5pdGUodCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gdD9hKHQpIT09ITA/W3RdOnQ6W119ZnVuY3Rpb24gdSh0LGUpe2Zvcih2YXIgbiBpbiB0KWlmKHRbbl09PT1lKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIGwodCxlLG4pe2Zvcih2YXIgaSBpbiB0KWlmKHRbaV1bZV09PT1uKXJldHVybiBpO3JldHVybi0xfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUmF5Y2FzdGVyVXRpbHM9ZS5PY3RyZWU9dm9pZCAwO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksaD1uKDIpLGY9aShoKSxkPW51bGwscD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtyKHRoaXMsdCksdGhpcy5vYmplY3Q9ZSxuIGluc3RhbmNlb2YgZi5GYWNlMz8odGhpcy5mYWNlcz1uLHRoaXMuZmFjZTM9ITAsdGhpcy51dGlsVmVjMzFGYWNlQm91bmRzPW5ldyBmLlZlY3RvcjMpOm4gaW5zdGFuY2VvZiBmLlZlY3RvcjMmJih0aGlzLnZlcnRpY2VzPW4pLHRoaXMucmFkaXVzPTAsdGhpcy5wb3NpdGlvbj1uZXcgZi5WZWN0b3IzLHRoaXMub2JqZWN0IGluc3RhbmNlb2YgZi5PYmplY3QzRCYmdGhpcy51cGRhdGUoKSx0aGlzLnBvc2l0aW9uTGFzdD10aGlzLnBvc2l0aW9uLmNsb25lKCl9cmV0dXJuIGModCxbe2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5mYWNlMz8odGhpcy5yYWRpdXM9dGhpcy5nZXRGYWNlM0JvdW5kaW5nUmFkaXVzKHRoaXMub2JqZWN0LHRoaXMuZmFjZXMpLHRoaXMucG9zaXRpb24uY29weSh0aGlzLmZhY2VzLmNlbnRyb2lkKS5hcHBseU1hdHJpeDQodGhpcy5vYmplY3QubWF0cml4V29ybGQpKTp0aGlzLnZldGljZXM/KHRoaXMucmFkaXVzPXRoaXMub2JqZWN0Lm1hdGVyaWFsLnNpemV8fDEsdGhpcy5wb3NpdGlvbi5jb3B5KHRoaXMudmVydGljZXMpLmFwcGx5TWF0cml4NCh0aGlzLm9iamVjdC5tYXRyaXhXb3JsZCkpOnRoaXMub2JqZWN0Lmdlb21ldHJ5PyhudWxsPT09dGhpcy5vYmplY3QuZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUmJnRoaXMub2JqZWN0Lmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpLHRoaXMucmFkaXVzPXRoaXMub2JqZWN0Lmdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlLnJhZGl1cyx0aGlzLnBvc2l0aW9uLmNvcHkodGhpcy5vYmplY3QuZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUuY2VudGVyKS5hcHBseU1hdHJpeDQodGhpcy5vYmplY3QubWF0cml4V29ybGQpKToodGhpcy5yYWRpdXM9dGhpcy5vYmplY3QuYm91bmRSYWRpdXMsdGhpcy5wb3NpdGlvbi5zZXRGcm9tTWF0cml4UG9zaXRpb24odGhpcy5vYmplY3QubWF0cml4V29ybGQpKSx0aGlzLnJhZGl1cz10aGlzLnJhZGl1cypNYXRoLm1heCh0aGlzLm9iamVjdC5zY2FsZS54LHRoaXMub2JqZWN0LnNjYWxlLnksdGhpcy5vYmplY3Quc2NhbGUueil9fSx7a2V5OlwiZ2V0RmFjZTNCb3VuZGluZ1JhZGl1c1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGUuY2VudHJvaWQmJihlLmNlbnRyb2lkPW5ldyBmLlZlY3RvcjMpO3ZhciBuPXQuZ2VvbWV0cnl8fHQsaT1uLnZlcnRpY2VzLHI9ZS5jZW50cm9pZCxvPWlbZS5hXSxhPWlbZS5iXSxzPWlbZS5jXSx1PXRoaXMudXRpbFZlYzMxRmFjZUJvdW5kcztyZXR1cm4gci5hZGRWZWN0b3JzKG8sYSkuYWRkKHMpLmRpdmlkZVNjYWxhcigzKSxNYXRoLm1heCh1LnN1YlZlY3RvcnMocixvKS5sZW5ndGgoKSx1LnN1YlZlY3RvcnMocixhKS5sZW5ndGgoKSx1LnN1YlZlY3RvcnMocixzKS5sZW5ndGgoKSl9fV0pLHR9KCksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cih0aGlzLHQpLHRoaXMudXRpbFZlYzMxQnJhbmNoPW5ldyBmLlZlY3RvcjMsdGhpcy51dGlsVmVjMzFFeHBhbmQ9bmV3IGYuVmVjdG9yMyx0aGlzLnV0aWxWZWMzMVJheT1uZXcgZi5WZWN0b3IzO3ZhciBuPWV8fHt9O24udHJlZSBpbnN0YW5jZW9mIGQ/dGhpcy50cmVlPW4udHJlZTpuLnBhcmVudCBpbnN0YW5jZW9mIHQhPSEwJiYobi5yb290PXRoaXMsdGhpcy50cmVlPW5ldyBkKG4pKSx0aGlzLmlkPXRoaXMudHJlZS5ub2RlQ291bnQrKyx0aGlzLnBvc2l0aW9uPW4ucG9zaXRpb24gaW5zdGFuY2VvZiBmLlZlY3RvcjM/bi5wb3NpdGlvbjpuZXcgZi5WZWN0b3IzLHRoaXMucmFkaXVzPW4ucmFkaXVzPjA/bi5yYWRpdXM6MSx0aGlzLmluZGV4T2N0YW50PW4uaW5kZXhPY3RhbnQsdGhpcy5kZXB0aD0wLHRoaXMucmVzZXQoKSx0aGlzLnNldFBhcmVudChuLnBhcmVudCksdGhpcy5vdmVybGFwPXRoaXMucmFkaXVzKnRoaXMudHJlZS5vdmVybGFwUGN0LHRoaXMucmFkaXVzT3ZlcmxhcD10aGlzLnJhZGl1cyt0aGlzLm92ZXJsYXAsdGhpcy5sZWZ0PXRoaXMucG9zaXRpb24ueC10aGlzLnJhZGl1c092ZXJsYXAsdGhpcy5yaWdodD10aGlzLnBvc2l0aW9uLngrdGhpcy5yYWRpdXNPdmVybGFwLHRoaXMuYm90dG9tPXRoaXMucG9zaXRpb24ueS10aGlzLnJhZGl1c092ZXJsYXAsdGhpcy50b3A9dGhpcy5wb3NpdGlvbi55K3RoaXMucmFkaXVzT3ZlcmxhcCx0aGlzLmJhY2s9dGhpcy5wb3NpdGlvbi56LXRoaXMucmFkaXVzT3ZlcmxhcCx0aGlzLmZyb250PXRoaXMucG9zaXRpb24ueit0aGlzLnJhZGl1c092ZXJsYXAsdGhpcy50cmVlLnNjZW5lJiYodGhpcy52aXN1YWw9bmV3IGYuTWVzaCh0aGlzLnRyZWUudmlzdWFsR2VvbWV0cnksdGhpcy50cmVlLnZpc3VhbE1hdGVyaWFsKSx0aGlzLnZpc3VhbC5zY2FsZS5zZXQoMip0aGlzLnJhZGl1c092ZXJsYXAsMip0aGlzLnJhZGl1c092ZXJsYXAsMip0aGlzLnJhZGl1c092ZXJsYXApLHRoaXMudmlzdWFsLnBvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbiksdGhpcy50cmVlLnNjZW5lLmFkZCh0aGlzLnZpc3VhbCkpfXJldHVybiBjKHQsW3trZXk6XCJzZXRQYXJlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0IT09dGhpcyYmdGhpcy5wYXJlbnQhPT10JiYodGhpcy5wYXJlbnQ9dCx0aGlzLnVwZGF0ZVByb3BlcnRpZXMoKSl9fSx7a2V5OlwidXBkYXRlUHJvcGVydGllc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQgaW5zdGFuY2VvZiB0Pyh0aGlzLnRyZWU9dGhpcy5wYXJlbnQudHJlZSx0aGlzLmRlcHRoPXRoaXMucGFyZW50LmRlcHRoKzEpOnRoaXMuZGVwdGg9MDtmb3IodmFyIGU9dGhpcy5ub2Rlc0luZGljZXMsbj1BcnJheS5pc0FycmF5KGUpLGk9MCxlPW4/ZTplW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcjtpZihuKXtpZihpPj1lLmxlbmd0aClicmVhaztyPWVbaSsrXX1lbHNle2lmKGk9ZS5uZXh0KCksaS5kb25lKWJyZWFrO3I9aS52YWx1ZX12YXIgbz1yO3RoaXMubm9kZXNCeUluZGV4W29dLnVwZGF0ZVByb3BlcnRpZXMoKX19fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXNJbmRpY2VzfHxbXSxpPXRoaXMubm9kZXNCeUluZGV4O3RoaXMub2JqZWN0cz1bXSx0aGlzLm5vZGVzSW5kaWNlcz1bXSx0aGlzLm5vZGVzQnlJbmRleD17fTtmb3IodmFyIHI9bixvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXMsbD1pW3VdO2wuc2V0UGFyZW50KCksdD09PSEwJiZsLnJlc2V0KHQsZSl9ZT09PSEwJiZ0aGlzLnZpc3VhbCYmdGhpcy52aXN1YWwucGFyZW50JiZ0aGlzLnZpc3VhbC5wYXJlbnQucmVtb3ZlKHRoaXMudmlzdWFsKX19LHtrZXk6XCJhZGROb2RlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0LmluZGV4T2N0YW50PWUsdSh0aGlzLm5vZGVzSW5kaWNlcyxlKT09PS0xJiZ0aGlzLm5vZGVzSW5kaWNlcy5wdXNoKGUpLHRoaXMubm9kZXNCeUluZGV4W2VdPXQsdC5wYXJlbnQhPT10aGlzJiZ0LnNldFBhcmVudCh0aGlzKX19LHtrZXk6XCJyZW1vdmVOb2RlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dSh0aGlzLm5vZGVzSW5kaWNlcyx0KSxuPXRoaXMubm9kZXNCeUluZGV4W3RdO3RoaXMubm9kZXNJbmRpY2VzLnNwbGljZShlLDEpLGRlbGV0ZSB0aGlzLm5vZGVzQnlJbmRleFt0XSxuJiZuLnBhcmVudD09PXRoaXMmJm4uc2V0UGFyZW50KCl9fSx7a2V5OlwiYWRkT2JqZWN0XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5nZXRPY3RhbnRJbmRleChlKTtpZihuPi0xJiZ0aGlzLm5vZGVzSW5kaWNlcy5sZW5ndGg+MCl7dmFyIGk9dGhpcy5icmFuY2gobik7aS5hZGRPYmplY3QoZSl9ZWxzZSBpZihuPC0xJiZ0aGlzLnBhcmVudCBpbnN0YW5jZW9mIHQpdGhpcy5wYXJlbnQuYWRkT2JqZWN0KGUpO2Vsc2V7dmFyIHI9dSh0aGlzLm9iamVjdHMsZSk7cj09PS0xJiZ0aGlzLm9iamVjdHMucHVzaChlKSxlLm5vZGU9dGhpcyx0aGlzLmNoZWNrR3JvdygpfX19LHtrZXk6XCJhZGRPYmplY3RXaXRob3V0Q2hlY2tcIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCxuPUFycmF5LmlzQXJyYXkoZSksaT0wLGU9bj9lOmVbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciByO2lmKG4pe2lmKGk+PWUubGVuZ3RoKWJyZWFrO3I9ZVtpKytdfWVsc2V7aWYoaT1lLm5leHQoKSxpLmRvbmUpYnJlYWs7cj1pLnZhbHVlfXZhciBvPXI7dGhpcy5vYmplY3RzLnB1c2gobyksby5ub2RlPXRoaXN9fX0se2tleTpcInJlbW92ZU9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucmVtb3ZlT2JqZWN0UmVjdXJzaXZlKHQse3NlYXJjaENvbXBsZXRlOiExLG5vZGVzUmVtb3ZlZEZyb206W10sb2JqZWN0c0RhdGFSZW1vdmVkOltdfSksbj1lLm5vZGVzUmVtb3ZlZEZyb207aWYobi5sZW5ndGg+MClmb3IodmFyIGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7cy5zaHJpbmsoKX1yZXR1cm4gZS5vYmplY3RzRGF0YVJlbW92ZWR9fSx7a2V5OlwicmVtb3ZlT2JqZWN0UmVjdXJzaXZlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA7aWYodCBpbnN0YW5jZW9mIHApe3ZhciBpPXUodGhpcy5vYmplY3RzLHQpO2khPT0tMSYmKHRoaXMub2JqZWN0cy5zcGxpY2UoaSwxKSxkZWxldGUgdC5ub2RlLGUub2JqZWN0c0RhdGFSZW1vdmVkLnB1c2godCksZS5zZWFyY2hDb21wbGV0ZT1uPSEwKX1lbHNlIGZvcih2YXIgcj10aGlzLm9iamVjdHMubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMub2JqZWN0c1tyXTtpZihvLm9iamVjdD09PXQmJih0aGlzLm9iamVjdHMuc3BsaWNlKHIsMSksZGVsZXRlIG8ubm9kZSxlLm9iamVjdHNEYXRhUmVtb3ZlZC5wdXNoKG8pLG49ITAsIW8uZmFjZXMmJiFvLnZlcnRpY2VzKSl7ZS5zZWFyY2hDb21wbGV0ZT0hMDticmVha319aWYobj09PSEwJiZlLm5vZGVzUmVtb3ZlZEZyb20ucHVzaCh0aGlzKSxlLnNlYXJjaENvbXBsZXRlIT09ITApZm9yKHZhciBhPXRoaXMubm9kZXNJbmRpY2VzLHM9QXJyYXkuaXNBcnJheShhKSxsPTAsYT1zP2E6YVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGM7aWYocyl7aWYobD49YS5sZW5ndGgpYnJlYWs7Yz1hW2wrK119ZWxzZXtpZihsPWEubmV4dCgpLGwuZG9uZSlicmVhaztjPWwudmFsdWV9dmFyIGg9YyxmPXRoaXMubm9kZXNCeUluZGV4W2hdO2lmKGU9Zi5yZW1vdmVPYmplY3RSZWN1cnNpdmUodCxlKSxlLnNlYXJjaENvbXBsZXRlPT09ITApYnJlYWt9cmV0dXJuIGV9fSx7a2V5OlwiY2hlY2tHcm93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9iamVjdHMubGVuZ3RoPnRoaXMudHJlZS5vYmplY3RzVGhyZXNob2xkJiZ0aGlzLnRyZWUub2JqZWN0c1RocmVzaG9sZD4wJiZ0aGlzLmdyb3coKX19LHtrZXk6XCJncm93XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT1bXSxuPVtdLGk9W10scj1bXSxvPXRoaXMub2JqZWN0cyxhPUFycmF5LmlzQXJyYXkobykscz0wLG89YT9vOm9bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciB1O2lmKGEpe2lmKHM+PW8ubGVuZ3RoKWJyZWFrO3U9b1tzKytdfWVsc2V7aWYocz1vLm5leHQoKSxzLmRvbmUpYnJlYWs7dT1zLnZhbHVlfXZhciBsPXUsYz10aGlzLmdldE9jdGFudEluZGV4KGwpO2M+LTE/KG4ucHVzaChsKSxpLnB1c2goYykpOmM8LTE/KHQucHVzaChsKSxlLnB1c2goYykpOnIucHVzaChsKX1uLmxlbmd0aD4wJiYocj1yLmNvbmNhdCh0aGlzLnNwbGl0KG4saSkpKSx0Lmxlbmd0aD4wJiYocj1yLmNvbmNhdCh0aGlzLmV4cGFuZCh0LGUpKSksdGhpcy5vYmplY3RzPXIsdGhpcy5jaGVja01lcmdlKCl9fSx7a2V5Olwic3BsaXRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMDtpZih0aGlzLmRlcHRoPHRoaXMudHJlZS5kZXB0aE1heCl7dmFyIGk9dHx8dGhpcy5vYmplY3RzLHI9ZXx8W107bj1bXTtmb3IodmFyIG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIGE9aVtvXSxzPXJbb107aWYocz4tMSl7dmFyIHU9dGhpcy5icmFuY2gocyk7dS5hZGRPYmplY3QoYSl9ZWxzZSBuLnB1c2goYSl9aT09PXRoaXMub2JqZWN0cyYmKHRoaXMub2JqZWN0cz1uKX1lbHNlIG49dGhpcy5vYmplY3RzO3JldHVybiBufX0se2tleTpcImJyYW5jaFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBuPXZvaWQgMDtpZih0aGlzLm5vZGVzQnlJbmRleFtlXWluc3RhbmNlb2YgdCluPXRoaXMubm9kZXNCeUluZGV4W2VdO2Vsc2V7dmFyIGk9LjUqdGhpcy5yYWRpdXNPdmVybGFwLHI9aSp0aGlzLnRyZWUub3ZlcmxhcFBjdCxvPWktcixhPXRoaXMudXRpbFZlYzMxQnJhbmNoLnNldCgxJmU/bzotbywyJmU/bzotbyw0JmU/bzotbykscz0obmV3IGYuVmVjdG9yMykuYWRkVmVjdG9ycyh0aGlzLnBvc2l0aW9uLGEpO249bmV3IHQoe3RyZWU6dGhpcy50cmVlLHBhcmVudDp0aGlzLHBvc2l0aW9uOnMscmFkaXVzOmksaW5kZXhPY3RhbnQ6ZX0pLHRoaXMuYWRkTm9kZShuLGUpfXJldHVybiBufX0se2tleTpcImV4cGFuZFwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dm9pZCAwO2lmKHRoaXMudHJlZS5yb290LmdldERlcHRoRW5kKCk8dGhpcy50cmVlLmRlcHRoTWF4KXt2YXIgcj10aGlzLnRyZWUuSU5ERVhfT1VUU0lERV9NQVAsbz10aGlzLnV0aWxWZWMzMUV4cGFuZCxhPVtdO2U9ZXx8dGhpcy5vYmplY3RzLG49bnx8W10saT1bXTtmb3IodmFyIHM9cix1PUFycmF5LmlzQXJyYXkocyksbD0wLHM9dT9zOnNbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBjO2lmKHUpe2lmKGw+PXMubGVuZ3RoKWJyZWFrO2M9c1tsKytdfWVsc2V7aWYobD1zLm5leHQoKSxsLmRvbmUpYnJlYWs7Yz1sLnZhbHVlfXZhciBoPWM7aC5jb3VudD0wfWZvcih2YXIgZD0wO2Q8ZS5sZW5ndGg7ZCsrKXt2YXIgcD1lW2RdLGc9bltkXTtpZihnPC0xKXt2YXIgdj0tZy10aGlzLnRyZWUuSU5ERVhfT1VUU0lERV9PRkZTRVQ7diZ0aGlzLnRyZWUuRkxBR19QT1NfWD9yW3RoaXMudHJlZS5JTkRFWF9PVVRTSURFX1BPU19YXS5jb3VudCsrOnYmdGhpcy50cmVlLkZMQUdfTkVHX1gmJnJbdGhpcy50cmVlLklOREVYX09VVFNJREVfTkVHX1hdLmNvdW50KyssdiZ0aGlzLnRyZWUuRkxBR19QT1NfWT9yW3RoaXMudHJlZS5JTkRFWF9PVVRTSURFX1BPU19ZXS5jb3VudCsrOnYmdGhpcy50cmVlLkZMQUdfTkVHX1kmJnJbdGhpcy50cmVlLklOREVYX09VVFNJREVfTkVHX1ldLmNvdW50KyssdiZ0aGlzLnRyZWUuRkxBR19QT1NfWj9yW3RoaXMudHJlZS5JTkRFWF9PVVRTSURFX1BPU19aXS5jb3VudCsrOnYmdGhpcy50cmVlLkZMQUdfTkVHX1omJnJbdGhpcy50cmVlLklOREVYX09VVFNJREVfTkVHX1pdLmNvdW50KyssYS5wdXNoKHApfWVsc2UgaS5wdXNoKHApfWlmKGEubGVuZ3RoPjApe3ZhciBtPXIuc2xpY2UoMCk7bS5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuY291bnQtdC5jb3VudH0pO3ZhciB5PXZvaWQgMCxfPXZvaWQgMCxiPXZvaWQgMCx4PW1bMF0sdz0xfHguaW5kZXg7Xz1tWzFdLGI9bVsyXTt2YXIgRT0oMXxfLmluZGV4KSE9PXc/XzpiLFM9MXxFLmluZGV4O189bVsyXSxiPW1bM107dmFyIE09bVs0XSxDPTF8Xy5pbmRleCxJPTF8Yi5pbmRleDt5PUMhPT13JiZDIT09Uz9fOkkhPT13JiZJIT09Uz9iOk07dmFyIE89eC54K0UueCt5LngsVD14LnkrRS55K3kueSxQPXgueitFLnoreS56LEE9dGhpcy5nZXRPY3RhbnRJbmRleEZyb21Qb3NpdGlvbihPLFQsUCksTD10aGlzLmdldE9jdGFudEluZGV4RnJvbVBvc2l0aW9uKC1PLC1ULC1QKSxOPXRoaXMub3ZlcmxhcCxrPXRoaXMucmFkaXVzLFI9dGhpcy50cmVlLm92ZXJsYXBQY3Q+MD9OLyguNSp0aGlzLnRyZWUub3ZlcmxhcFBjdCooMSt0aGlzLnRyZWUub3ZlcmxhcFBjdCkpOjIqayxEPVIqdGhpcy50cmVlLm92ZXJsYXBQY3QsRj1SK0QtKGsrTik7by5zZXQoMSZBP0Y6LUYsMiZBP0Y6LUYsNCZBP0Y6LUYpO3ZhciBCPShuZXcgZi5WZWN0b3IzKS5hZGRWZWN0b3JzKHRoaXMucG9zaXRpb24sbyksaj1uZXcgdCh7dHJlZTp0aGlzLnRyZWUscG9zaXRpb246QixyYWRpdXM6Un0pO2ouYWRkTm9kZSh0aGlzLEwpLHRoaXMudHJlZS5zZXRSb290KGopO2Zvcih2YXIgVT1hLHo9QXJyYXkuaXNBcnJheShVKSxHPTAsVT16P1U6VVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIFY7aWYoeil7aWYoRz49VS5sZW5ndGgpYnJlYWs7Vj1VW0crK119ZWxzZXtpZihHPVUubmV4dCgpLEcuZG9uZSlicmVhaztWPUcudmFsdWV9dmFyIFg9Vjt0aGlzLnRyZWUucm9vdC5hZGRPYmplY3QoWCl9fWU9PT10aGlzLm9iamVjdHMmJih0aGlzLm9iamVjdHM9aSl9ZWxzZSBpPWU7cmV0dXJuIGl9fSx7a2V5Olwic2hyaW5rXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNoZWNrTWVyZ2UoKSx0aGlzLnRyZWUucm9vdC5jaGVja0NvbnRyYWN0KCl9fSx7a2V5OlwiY2hlY2tNZXJnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMsbj12b2lkIDA7ZS5wYXJlbnQgaW5zdGFuY2VvZiB0JiZlLmdldE9iamVjdENvdW50RW5kKCk8dGhpcy50cmVlLm9iamVjdHNUaHJlc2hvbGQ7KW49ZSxlPWUucGFyZW50O2UhPT10aGlzJiZlLm1lcmdlKG4pfX0se2tleTpcIm1lcmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD1zKHQpO2Zvcih2YXIgZT10LG49QXJyYXkuaXNBcnJheShlKSxpPTAsZT1uP2U6ZVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHI7aWYobil7aWYoaT49ZS5sZW5ndGgpYnJlYWs7cj1lW2krK119ZWxzZXtpZihpPWUubmV4dCgpLGkuZG9uZSlicmVhaztyPWkudmFsdWV9dmFyIG89cjt0aGlzLmFkZE9iamVjdFdpdGhvdXRDaGVjayhvLmdldE9iamVjdHNFbmQoKSksby5yZXNldCghMCwhMCksdGhpcy5yZW1vdmVOb2RlKG8uaW5kZXhPY3RhbnQsbyl9dGhpcy5jaGVja01lcmdlKCl9fSx7a2V5OlwiY2hlY2tDb250cmFjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5ub2Rlc0luZGljZXMubGVuZ3RoPjApe2Zvcih2YXIgZT0wLG49dGhpcy5vYmplY3RzLmxlbmd0aCxpPXZvaWQgMCxyPXRoaXMubm9kZXNJbmRpY2VzLG89QXJyYXkuaXNBcnJheShyKSxhPTAscj1vP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYobyl7aWYoYT49ci5sZW5ndGgpYnJlYWs7cz1yW2ErK119ZWxzZXtpZihhPXIubmV4dCgpLGEuZG9uZSlicmVhaztzPWEudmFsdWV9dmFyIHU9cyxsPXRoaXMubm9kZXNCeUluZGV4W3VdLGM9bC5nZXRPYmplY3RDb3VudEVuZCgpO24rPWMsKGkgaW5zdGFuY2VvZiB0PT0hMXx8Yz5lKSYmKGk9bCxlPWMpfW4tPWUsbjx0aGlzLnRyZWUub2JqZWN0c1RocmVzaG9sZCYmaSBpbnN0YW5jZW9mIHQmJnRoaXMuY29udHJhY3QoaSl9fX0se2tleTpcImNvbnRyYWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMubm9kZXNJbmRpY2VzLG49QXJyYXkuaXNBcnJheShlKSxpPTAsZT1uP2U6ZVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHI7aWYobil7aWYoaT49ZS5sZW5ndGgpYnJlYWs7cj1lW2krK119ZWxzZXtpZihpPWUubmV4dCgpLGkuZG9uZSlicmVhaztyPWkudmFsdWV9dmFyIG89cixhPXRoaXMubm9kZXNCeUluZGV4W29dO2EhPT10JiYodC5hZGRPYmplY3RXaXRob3V0Q2hlY2soYS5nZXRPYmplY3RzRW5kKCkpLGEucmVzZXQoITAsITApKX10LmFkZE9iamVjdFdpdGhvdXRDaGVjayh0aGlzLm9iamVjdHMpLHRoaXMucmVzZXQoITEsITApLHRoaXMudHJlZS5zZXRSb290KHQpLHQuY2hlY2tDb250cmFjdCgpfX0se2tleTpcImdldE9jdGFudEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dm9pZCAwLGk9dm9pZCAwO2UgaW5zdGFuY2VvZiBwPyhpPWUucmFkaXVzLG49ZS5wb3NpdGlvbixlLnBvc2l0aW9uTGFzdC5jb3B5KG4pKTplIGluc3RhbmNlb2YgdCYmKG49ZS5wb3NpdGlvbixpPTApO3ZhciByPXRoaXMucG9zaXRpb24sbz1uLngtci54LGE9bi55LXIueSxzPW4uei1yLnosdT1NYXRoLmFicyhvKSxsPU1hdGguYWJzKGEpLGM9TWF0aC5hYnMocyksaD1NYXRoLm1heCh1LGwsYyksZj10aGlzLnJhZGl1c092ZXJsYXAsZD0wO2lmKGgraT5mKXJldHVybiB1K2k+ZiYmKGRePW8+MD90aGlzLnRyZWUuRkxBR19QT1NfWDp0aGlzLnRyZWUuRkxBR19ORUdfWCksbCtpPmYmJihkXj1hPjA/dGhpcy50cmVlLkZMQUdfUE9TX1k6dGhpcy50cmVlLkZMQUdfTkVHX1kpLGMraT5mJiYoZF49cz4wP3RoaXMudHJlZS5GTEFHX1BPU19aOnRoaXMudHJlZS5GTEFHX05FR19aKSxlLmluZGV4T2N0YW50PS1kLXRoaXMudHJlZS5JTkRFWF9PVVRTSURFX09GRlNFVCxlLmluZGV4T2N0YW50O3ZhciBnPXRoaXMub3ZlcmxhcDtpZihvLWk+LWcpZHw9MTtlbHNlIGlmKCEobytpPGcpKXJldHVybiBlLmluZGV4T2N0YW50PXRoaXMudHJlZS5JTkRFWF9JTlNJREVfQ1JPU1MsZS5pbmRleE9jdGFudDtpZihhLWk+LWcpZHw9MjtlbHNlIGlmKCEoYStpPGcpKXJldHVybiBlLmluZGV4T2N0YW50PXRoaXMudHJlZS5JTkRFWF9JTlNJREVfQ1JPU1MsZS5pbmRleE9jdGFudDtpZihzLWk+LWcpZHw9NDtlbHNlIGlmKCEocytpPGcpKXJldHVybiBlLmluZGV4T2N0YW50PXRoaXMudHJlZS5JTkRFWF9JTlNJREVfQ1JPU1MsZS5pbmRleE9jdGFudDtyZXR1cm4gZS5pbmRleE9jdGFudD1kLGUuaW5kZXhPY3RhbnR9fSx7a2V5OlwiZ2V0T2N0YW50SW5kZXhGcm9tUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9MDtyZXR1cm4gdD4wJiYoaXw9MSksZT4wJiYoaXw9Miksbj4wJiYoaXw9NCksaX19LHtrZXk6XCJzZWFyY2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXZvaWQgMDtpZihvPWk/dGhpcy5pbnRlcnNlY3RSYXkodCxpLGUscik6dGhpcy5pbnRlcnNlY3RTcGhlcmUodCxlKSxvPT09ITApe249bi5jb25jYXQodGhpcy5vYmplY3RzKTtmb3IodmFyIGE9dGhpcy5ub2Rlc0luZGljZXMscz1BcnJheS5pc0FycmF5KGEpLHU9MCxhPXM/YTphW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbDtpZihzKXtpZih1Pj1hLmxlbmd0aClicmVhaztsPWFbdSsrXX1lbHNle2lmKHU9YS5uZXh0KCksdS5kb25lKWJyZWFrO2w9dS52YWx1ZX12YXIgYz1sLGg9dGhpcy5ub2Rlc0J5SW5kZXhbY107bj1oLnNlYXJjaCh0LGUsbixpKX19cmV0dXJuIG59fSx7a2V5OlwiaW50ZXJzZWN0U3BoZXJlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LngsaT10Lnkscj10Lnosbz1lKmU7cmV0dXJuIG48dGhpcy5sZWZ0P28tPU1hdGgucG93KG4tdGhpcy5sZWZ0LDIpOm4+dGhpcy5yaWdodCYmKG8tPU1hdGgucG93KG4tdGhpcy5yaWdodCwyKSksaTx0aGlzLmJvdHRvbT9vLT1NYXRoLnBvdyhpLXRoaXMuYm90dG9tLDIpOmk+dGhpcy50b3AmJihvLT1NYXRoLnBvdyhpLXRoaXMudG9wLDIpKSxyPHRoaXMuYmFjaz9vLT1NYXRoLnBvdyhyLXRoaXMuYmFjaywyKTpyPnRoaXMuZnJvbnQmJihvLT1NYXRoLnBvdyhyLXRoaXMuZnJvbnQsMikpLG8+PTB9fSx7a2V5OlwiaW50ZXJzZWN0UmF5XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSl7XCJ1bmRlZmluZWRcIj09dHlwZW9mIGkmJihpPXRoaXMudXRpbFZlYzMxUmF5LnNldCgxLDEsMSkuZGl2aWRlKGUpKTt2YXIgcj0odGhpcy5sZWZ0LXQueCkqaS54LG89KHRoaXMucmlnaHQtdC54KSppLngsYT0odGhpcy5ib3R0b20tdC55KSppLnkscz0odGhpcy50b3AtdC55KSppLnksdT0odGhpcy5iYWNrLXQueikqaS56LGw9KHRoaXMuZnJvbnQtdC56KSppLnosYz1NYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heChyLG8pLE1hdGgubWF4KGEscykpLE1hdGgubWF4KHUsbCkpO2lmKGM8MClyZXR1cm4hMTt2YXIgaD1NYXRoLm1heChNYXRoLm1heChNYXRoLm1pbihyLG8pLE1hdGgubWluKGEscykpLE1hdGgubWluKHUsbCkpO3JldHVybiEoaD5jfHxoPm4pfX0se2tleTpcImdldERlcHRoRW5kXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5ub2Rlc0luZGljZXMubGVuZ3RoPjApZm9yKHZhciBlPXRoaXMubm9kZXNJbmRpY2VzLG49QXJyYXkuaXNBcnJheShlKSxpPTAsZT1uP2U6ZVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHI7aWYobil7aWYoaT49ZS5sZW5ndGgpYnJlYWs7cj1lW2krK119ZWxzZXtpZihpPWUubmV4dCgpLGkuZG9uZSlicmVhaztyPWkudmFsdWV9dmFyIG89cixhPXRoaXMubm9kZXNCeUluZGV4W29dO3Q9YS5nZXREZXB0aEVuZCh0KX1lbHNlIHQ9IXR8fHRoaXMuZGVwdGg+dD90aGlzLmRlcHRoOnQ7cmV0dXJuIHR9fSx7a2V5OlwiZ2V0Tm9kZUNvdW50RW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlLnJvb3QuZ2V0Tm9kZUNvdW50UmVjdXJzaXZlKCkrMX19LHtrZXk6XCJnZXROb2RlQ291bnRSZWN1cnNpdmVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vZGVzSW5kaWNlcy5sZW5ndGgsZT10aGlzLm5vZGVzSW5kaWNlcyxuPUFycmF5LmlzQXJyYXkoZSksaT0wLGU9bj9lOmVbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciByO2lmKG4pe2lmKGk+PWUubGVuZ3RoKWJyZWFrO3I9ZVtpKytdfWVsc2V7aWYoaT1lLm5leHQoKSxpLmRvbmUpYnJlYWs7cj1pLnZhbHVlfXZhciBvPXI7dCs9dGhpcy5ub2Rlc0J5SW5kZXhbb10uZ2V0Tm9kZUNvdW50UmVjdXJzaXZlKCl9cmV0dXJuIHR9fSx7a2V5OlwiZ2V0T2JqZWN0c0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9KHR8fFtdKS5jb25jYXQodGhpcy5vYmplY3RzKTtmb3IodmFyIGU9dGhpcy5ub2Rlc0luZGljZXMsbj1BcnJheS5pc0FycmF5KGUpLGk9MCxlPW4/ZTplW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcjtpZihuKXtpZihpPj1lLmxlbmd0aClicmVhaztyPWVbaSsrXX1lbHNle2lmKGk9ZS5uZXh0KCksaS5kb25lKWJyZWFrO3I9aS52YWx1ZX12YXIgbz1yLGE9dGhpcy5ub2Rlc0J5SW5kZXhbb107dD1hLmdldE9iamVjdHNFbmQodCl9cmV0dXJuIHR9fSx7a2V5OlwiZ2V0T2JqZWN0Q291bnRFbmRcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm9iamVjdHMubGVuZ3RoLGU9dGhpcy5ub2Rlc0luZGljZXMsbj1BcnJheS5pc0FycmF5KGUpLGk9MCxlPW4/ZTplW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcjtpZihuKXtpZihpPj1lLmxlbmd0aClicmVhaztyPWVbaSsrXX1lbHNle2lmKGk9ZS5uZXh0KCksaS5kb25lKWJyZWFrO3I9aS52YWx1ZX12YXIgbz1yO3QrPXRoaXMubm9kZXNCeUluZGV4W29dLmdldE9iamVjdENvdW50RW5kKCl9cmV0dXJuIHR9fSx7a2V5OlwiZ2V0T2JqZWN0Q291bnRTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMub2JqZWN0cy5sZW5ndGgsbj10aGlzLnBhcmVudDtuIGluc3RhbmNlb2YgdDspZSs9bi5vYmplY3RzLmxlbmd0aCxuPW4ucGFyZW50O3JldHVybiBlfX0se2tleTpcInRvQ29uc29sZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVwiICAgXCI7dD1cInN0cmluZ1wiPT10eXBlb2YgdD90OmUsY29uc29sZS5sb2codGhpcy5wYXJlbnQ/dCtcIiBvY3RyZWUgTk9ERSA+IFwiOlwiIG9jdHJlZSBST09UID4gXCIsdGhpcyxcIiAvLyBpZDogXCIsdGhpcy5pZCxcIiAvLyBpbmRleE9jdGFudDogXCIsdGhpcy5pbmRleE9jdGFudCxcIiAvLyBwb3NpdGlvbjogXCIsdGhpcy5wb3NpdGlvbi54LHRoaXMucG9zaXRpb24ueSx0aGlzLnBvc2l0aW9uLnosXCIgLy8gcmFkaXVzOiBcIix0aGlzLnJhZGl1cyxcIiAvLyBkZXB0aDogXCIsdGhpcy5kZXB0aCksY29uc29sZS5sb2codGhpcy5wYXJlbnQ/dCtcIiBcIjpcIiBcIixcIisgb2JqZWN0cyAoIFwiLHRoaXMub2JqZWN0cy5sZW5ndGgsXCIgKSBcIix0aGlzLm9iamVjdHMpLGNvbnNvbGUubG9nKHRoaXMucGFyZW50P3QrXCIgXCI6XCIgXCIsXCIrIGNoaWxkcmVuICggXCIsdGhpcy5ub2Rlc0luZGljZXMubGVuZ3RoLFwiIClcIix0aGlzLm5vZGVzSW5kaWNlcyx0aGlzLm5vZGVzQnlJbmRleCk7Zm9yKHZhciBuPXRoaXMubm9kZXNJbmRpY2VzLGk9QXJyYXkuaXNBcnJheShuKSxyPTAsbj1pP246bltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIG87aWYoaSl7aWYocj49bi5sZW5ndGgpYnJlYWs7bz1uW3IrK119ZWxzZXtpZihyPW4ubmV4dCgpLHIuZG9uZSlicmVhaztvPXIudmFsdWV9dmFyIGE9byxzPXRoaXMubm9kZXNCeUluZGV4W2FdO3MudG9Db25zb2xlKHQrZSl9fX1dKSx0fSgpLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KTt2YXIgbj1lfHx7fTtuLnRyZWU9dGhpcyx0aGlzLm5vZGVDb3VudD0wLHRoaXMuSU5ERVhfSU5TSURFX0NST1NTPS0xLHRoaXMuSU5ERVhfT1VUU0lERV9PRkZTRVQ9Mix0aGlzLklOREVYX09VVFNJREVfUE9TX1g9byhuLklOREVYX09VVFNJREVfUE9TX1gpP24uSU5ERVhfT1VUU0lERV9QT1NfWDowLHRoaXMuSU5ERVhfT1VUU0lERV9ORUdfWD1vKG4uSU5ERVhfT1VUU0lERV9ORUdfWCk/bi5JTkRFWF9PVVRTSURFX05FR19YOjEsdGhpcy5JTkRFWF9PVVRTSURFX1BPU19ZPW8obi5JTkRFWF9PVVRTSURFX1BPU19ZKT9uLklOREVYX09VVFNJREVfUE9TX1k6Mix0aGlzLklOREVYX09VVFNJREVfTkVHX1k9byhuLklOREVYX09VVFNJREVfTkVHX1kpP24uSU5ERVhfT1VUU0lERV9ORUdfWTozLHRoaXMuSU5ERVhfT1VUU0lERV9QT1NfWj1vKG4uSU5ERVhfT1VUU0lERV9QT1NfWik/bi5JTkRFWF9PVVRTSURFX1BPU19aOjQsdGhpcy5JTkRFWF9PVVRTSURFX05FR19aPW8obi5JTkRFWF9PVVRTSURFX05FR19aKT9uLklOREVYX09VVFNJREVfTkVHX1o6NSx0aGlzLklOREVYX09VVFNJREVfTUFQPVtdLHRoaXMuSU5ERVhfT1VUU0lERV9NQVBbdGhpcy5JTkRFWF9PVVRTSURFX1BPU19YXT17aW5kZXg6dGhpcy5JTkRFWF9PVVRTSURFX1BPU19YLGNvdW50OjAseDoxLHk6MCx6OjB9LHRoaXMuSU5ERVhfT1VUU0lERV9NQVBbdGhpcy5JTkRFWF9PVVRTSURFX05FR19YXT17aW5kZXg6dGhpcy5JTkRFWF9PVVRTSURFX05FR19YLGNvdW50OjAseDotMSx5OjAsejowfSx0aGlzLklOREVYX09VVFNJREVfTUFQW3RoaXMuSU5ERVhfT1VUU0lERV9QT1NfWV09e2luZGV4OnRoaXMuSU5ERVhfT1VUU0lERV9QT1NfWSxjb3VudDowLHg6MCx5OjEsejowfSx0aGlzLklOREVYX09VVFNJREVfTUFQW3RoaXMuSU5ERVhfT1VUU0lERV9ORUdfWV09e2luZGV4OnRoaXMuSU5ERVhfT1VUU0lERV9ORUdfWSxjb3VudDowLHg6MCx5Oi0xLHo6MH0sdGhpcy5JTkRFWF9PVVRTSURFX01BUFt0aGlzLklOREVYX09VVFNJREVfUE9TX1pdPXtpbmRleDp0aGlzLklOREVYX09VVFNJREVfUE9TX1osY291bnQ6MCx4OjAseTowLHo6MX0sdGhpcy5JTkRFWF9PVVRTSURFX01BUFt0aGlzLklOREVYX09VVFNJREVfTkVHX1pdPXtpbmRleDp0aGlzLklOREVYX09VVFNJREVfTkVHX1osY291bnQ6MCx4OjAseTowLHo6LTF9LHRoaXMuRkxBR19QT1NfWD0xPDx0aGlzLklOREVYX09VVFNJREVfUE9TX1grMSx0aGlzLkZMQUdfTkVHX1g9MTw8dGhpcy5JTkRFWF9PVVRTSURFX05FR19YKzEsdGhpcy5GTEFHX1BPU19ZPTE8PHRoaXMuSU5ERVhfT1VUU0lERV9QT1NfWSsxLHRoaXMuRkxBR19ORUdfWT0xPDx0aGlzLklOREVYX09VVFNJREVfTkVHX1krMSx0aGlzLkZMQUdfUE9TX1o9MTw8dGhpcy5JTkRFWF9PVVRTSURFX1BPU19aKzEsdGhpcy5GTEFHX05FR19aPTE8PHRoaXMuSU5ERVhfT1VUU0lERV9ORUdfWisxLHRoaXMudXRpbFZlYzMxU2VhcmNoPW5ldyBmLlZlY3RvcjMsdGhpcy51dGlsVmVjMzJTZWFyY2g9bmV3IGYuVmVjdG9yMyx0aGlzLnNjZW5lPW4uc2NlbmUsdGhpcy5zY2VuZSYmKHRoaXMudmlzdWFsR2VvbWV0cnk9bmV3IGYuQm94R2VvbWV0cnkoMSwxLDEpLHRoaXMudmlzdWFsTWF0ZXJpYWw9bmV3IGYuTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOjE2NzExNzgyLHdpcmVmcmFtZTohMCx3aXJlZnJhbWVMaW5ld2lkdGg6MX0pKSx0aGlzLm9iamVjdHM9W10sdGhpcy5vYmplY3RzTWFwPXt9LHRoaXMub2JqZWN0c0RhdGE9W10sdGhpcy5vYmplY3RzRGVmZXJyZWQ9W10sdGhpcy5kZXB0aE1heD1vKG4uZGVwdGhNYXgpP24uZGVwdGhNYXg6MS8wLHRoaXMub2JqZWN0c1RocmVzaG9sZD1vKG4ub2JqZWN0c1RocmVzaG9sZCk/bi5vYmplY3RzVGhyZXNob2xkOjgsdGhpcy5vdmVybGFwUGN0PW8obi5vdmVybGFwUGN0KT9uLm92ZXJsYXBQY3Q6LjE1LHRoaXMudW5kZWZlcnJlZD1uLnVuZGVmZXJyZWR8fCExLHRoaXMucm9vdD1uLnJvb3QgaW5zdGFuY2VvZiBnP24ucm9vdDpuZXcgZyhuKX1yZXR1cm4gYyh0LFt7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLm9iamVjdHNEZWZlcnJlZC5sZW5ndGg+MCl7Zm9yKHZhciB0PXRoaXMub2JqZWN0c0RlZmVycmVkLGU9QXJyYXkuaXNBcnJheSh0KSxuPTAsdD1lP3Q6dFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGk7aWYoZSl7aWYobj49dC5sZW5ndGgpYnJlYWs7aT10W24rK119ZWxzZXtpZihuPXQubmV4dCgpLG4uZG9uZSlicmVhaztpPW4udmFsdWV9dmFyIHI9aTt0aGlzLmFkZERlZmVycmVkKHIub2JqZWN0LHIub3B0aW9ucyl9dGhpcy5vYmplY3RzRGVmZXJyZWQubGVuZ3RoPTB9fX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy51bmRlZmVycmVkPyh0aGlzLnVwZGF0ZU9iamVjdCh0KSx0aGlzLmFkZERlZmVycmVkKHQsZSkpOnRoaXMub2JqZWN0c0RlZmVycmVkLnB1c2goe29iamVjdDp0LG9wdGlvbnM6ZX0pfX0se2tleTpcImFkZERlZmVycmVkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDAsaT12b2lkIDAscj12b2lkIDA7aWYodCBpbnN0YW5jZW9mIHAmJih0PXQub2JqZWN0KSx0LnV1aWR8fCh0LnV1aWQ9Zi5NYXRoLmdlbmVyYXRlVVVJRCgpKSwhdGhpcy5vYmplY3RzTWFwW3QudXVpZF0paWYodGhpcy5vYmplY3RzLnB1c2godCksXG50aGlzLm9iamVjdHNNYXBbdC51dWlkXT10LGUmJihpPWUudXNlRmFjZXMscj1lLnVzZVZlcnRpY2VzKSxyPT09ITApe249dC5nZW9tZXRyeTtmb3IodmFyIG89bi52ZXJ0aWNlcyxhPW8scz1BcnJheS5pc0FycmF5KGEpLHU9MCxhPXM/YTphW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbDtpZihzKXtpZih1Pj1hLmxlbmd0aClicmVhaztsPWFbdSsrXX1lbHNle2lmKHU9YS5uZXh0KCksdS5kb25lKWJyZWFrO2w9dS52YWx1ZX12YXIgYz1sO3RoaXMuYWRkT2JqZWN0RGF0YSh0LGMpfX1lbHNlIGlmKGk9PT0hMCl7bj10Lmdlb21ldHJ5O2Zvcih2YXIgaD1uLmZhY2VzLGQ9aCxnPUFycmF5LmlzQXJyYXkoZCksdj0wLGQ9Zz9kOmRbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBtO2lmKGcpe2lmKHY+PWQubGVuZ3RoKWJyZWFrO209ZFt2KytdfWVsc2V7aWYodj1kLm5leHQoKSx2LmRvbmUpYnJlYWs7bT12LnZhbHVlfXZhciB5PW07dGhpcy5hZGRPYmplY3REYXRhKHQseSl9fWVsc2UgdGhpcy5hZGRPYmplY3REYXRhKHQpfX0se2tleTpcImFkZE9iamVjdERhdGFcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBwKHQsZSk7dGhpcy5vYmplY3RzRGF0YS5wdXNoKG4pLHRoaXMucm9vdC5hZGRPYmplY3Qobil9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49dm9pZCAwO2lmKHQgaW5zdGFuY2VvZiBwJiYodD10Lm9iamVjdCksdGhpcy5vYmplY3RzTWFwW3QudXVpZF0pe2lmKGRlbGV0ZSB0aGlzLm9iamVjdHNNYXBbdC51dWlkXSxlPXUodGhpcy5vYmplY3RzLHQpLGUhPT0tMSl7dGhpcy5vYmplY3RzLnNwbGljZShlLDEpLG49dGhpcy5yb290LnJlbW92ZU9iamVjdCh0KTtmb3IodmFyIGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7ZT11KHRoaXMub2JqZWN0c0RhdGEscyksZSE9PS0xJiZ0aGlzLm9iamVjdHNEYXRhLnNwbGljZShlLDEpfX19ZWxzZSB0aGlzLm9iamVjdHNEZWZlcnJlZC5sZW5ndGg+MCYmKGU9bCh0aGlzLm9iamVjdHNEZWZlcnJlZCxcIm9iamVjdFwiLHQpLGUhPT0tMSYmdGhpcy5vYmplY3RzRGVmZXJyZWQuc3BsaWNlKGUsMSkpfX0se2tleTpcImV4dGVuZFwiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB0KWZvcih2YXIgbj1lLm9iamVjdHNEYXRhLGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7dGhpcy5hZGQocyx7dXNlRmFjZXM6cy5mYWNlcyx1c2VWZXJ0aWNlczpzLnZlcnRpY2VzfSl9fX0se2tleTpcInJlYnVpbGRcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPXRoaXMub2JqZWN0c0RhdGEsbj1BcnJheS5pc0FycmF5KGUpLGk9MCxlPW4/ZTplW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcjtpZihuKXtpZihpPj1lLmxlbmd0aClicmVhaztyPWVbaSsrXX1lbHNle2lmKGk9ZS5uZXh0KCksaS5kb25lKWJyZWFrO3I9aS52YWx1ZX12YXIgbz1yLGE9by5ub2RlO2lmKG8udXBkYXRlKCksYSBpbnN0YW5jZW9mIGcmJiFvLnBvc2l0aW9uTGFzdC5lcXVhbHMoby5wb3NpdGlvbikpe3ZhciBzPW8uaW5kZXhPY3RhbnQsdT1hLmdldE9jdGFudEluZGV4KG8pO3UhPT1zJiZ0LnB1c2gobyl9fWZvcih2YXIgbD10LGM9QXJyYXkuaXNBcnJheShsKSxoPTAsbD1jP2w6bFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGY7aWYoYyl7aWYoaD49bC5sZW5ndGgpYnJlYWs7Zj1sW2grK119ZWxzZXtpZihoPWwubmV4dCgpLGguZG9uZSlicmVhaztmPWgudmFsdWV9dmFyIGQ9ZjtkLm5vZGUucmVtb3ZlT2JqZWN0KGQpLHRoaXMucm9vdC5hZGRPYmplY3QoZCl9fX0se2tleTpcInVwZGF0ZU9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bdF0sbj10LnBhcmVudCxpPXZvaWQgMDtuOyllLnB1c2gobiksbj1uLnBhcmVudDtmb3IodmFyIHI9ZSxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7dS5tYXRyaXhXb3JsZE5lZWRzVXBkYXRlPT09ITAmJihpPXUpfVwidW5kZWZpbmVkXCIhPXR5cGVvZiBpJiZpLnVwZGF0ZU1hdHJpeFdvcmxkKCl9fSx7a2V5Olwic2V0Um9vdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBnJiYodGhpcy5yb290PXQsdGhpcy5yb290LnVwZGF0ZVByb3BlcnRpZXMoKSl9fSx7a2V5Olwic2VhcmNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSl7dmFyIHI9dm9pZCAwLG89dm9pZCAwLGE9dm9pZCAwO3I9W10uY29uY2F0KHRoaXMucm9vdC5vYmplY3RzKSxlPjB8fChlPU51bWJlci5NQVhfVkFMVUUpLGkgaW5zdGFuY2VvZiBmLlZlY3RvcjMmJihpPXRoaXMudXRpbFZlYzMxU2VhcmNoLmNvcHkoaSkubm9ybWFsaXplKCksYT10aGlzLnV0aWxWZWMzMlNlYXJjaC5zZXQoMSwxLDEpLmRpdmlkZShpKSk7Zm9yKHZhciBzPXRoaXMucm9vdC5ub2Rlc0luZGljZXMsbD1BcnJheS5pc0FycmF5KHMpLGM9MCxzPWw/czpzW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaDtpZihsKXtpZihjPj1zLmxlbmd0aClicmVhaztoPXNbYysrXX1lbHNle2lmKGM9cy5uZXh0KCksYy5kb25lKWJyZWFrO2g9Yy52YWx1ZX12YXIgZD1oLHA9dGhpcy5yb290Lm5vZGVzQnlJbmRleFtkXTtyPXAuc2VhcmNoKHQsZSxyLGksYSl9aWYobj09PSEwKXt2YXIgZz1bXTtvPVtdO2Zvcih2YXIgdj1yLG09QXJyYXkuaXNBcnJheSh2KSx5PTAsdj1tP3Y6dltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIF87aWYobSl7aWYoeT49di5sZW5ndGgpYnJlYWs7Xz12W3krK119ZWxzZXtpZih5PXYubmV4dCgpLHkuZG9uZSlicmVhaztfPXkudmFsdWV9dmFyIGI9Xyx4PWIub2JqZWN0LHc9dShnLHgpLEU9dm9pZCAwO3c9PT0tMT8oRT17b2JqZWN0OngsZmFjZXM6W10sdmVydGljZXM6W119LG8ucHVzaChFKSxnLnB1c2goeCkpOkU9b1t3XSxiLmZhY2VzP0UuZmFjZXMucHVzaChiLmZhY2VzKTpiLnZlcnRpY2VzJiZFLnZlcnRpY2VzLnB1c2goYi52ZXJ0aWNlcyl9fWVsc2Ugbz1yO3JldHVybiBvfX0se2tleTpcImdldERlcHRoRW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmdldERlcHRoRW5kKCl9fSx7a2V5OlwiZ2V0Tm9kZUNvdW50RW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmdldE5vZGVDb3VudEVuZCgpfX0se2tleTpcImdldE9iamVjdENvdW50RW5kXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmdldE9iamVjdENvdW50RW5kKCl9fSx7a2V5OlwidG9Db25zb2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJvb3QudG9Db25zb2xlKCl9fV0pLHR9KCk7ZD12O3ZhciBtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3IodGhpcyx0KX1yZXR1cm4gYyh0LG51bGwsW3trZXk6XCJpbnRlcnNlY3RPY3RyZWVPYmplY3RcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dm9pZCAwO2lmKGUub2JqZWN0IGluc3RhbmNlb2YgZi5PYmplY3QzRCl7dmFyIHI9ZSxvPWUub2JqZWN0LGE9ci5mYWNlcyxzPW8uZ2VvbWV0cnkuZmFjZXM7YS5sZW5ndGg+MCYmKG8uZ2VvbWV0cnkuZmFjZXM9YSksaT10LmludGVyc2VjdE9iamVjdChvLG4pLGEubGVuZ3RoPjAmJihvLmdlb21ldHJ5LmZhY2VzPXMpfWVsc2UgaT10LmludGVyc2VjdE9iamVjdChlLG4pO3JldHVybiBpfX0se2tleTpcImludGVyc2VjdE9jdHJlZU9iamVjdHNcIix2YWx1ZTpmdW5jdGlvbihlLG4saSl7Zm9yKHZhciByPVtdLG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5kaXN0YW5jZTxlLmRpc3RhbmNlPy0xOnQuZGlzdGFuY2U+ZS5kaXN0YW5jZT8xOjB9LGE9bixzPUFycmF5LmlzQXJyYXkoYSksdT0wLGE9cz9hOmFbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBsO2lmKHMpe2lmKHU+PWEubGVuZ3RoKWJyZWFrO2w9YVt1KytdfWVsc2V7aWYodT1hLm5leHQoKSx1LmRvbmUpYnJlYWs7bD11LnZhbHVlfXZhciBjPWw7cj1yLmNvbmNhdCh0LmludGVyc2VjdE9jdHJlZU9iamVjdChlLGMsaSkpfXJldHVybiByLnNvcnQobyl9fV0pLHR9KCk7ZS5PY3RyZWU9dixlLlJheWNhc3RlclV0aWxzPW19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSxuKXt2YXIgaSxyLG89MSxhPXQueC1lLngscz10LnktZS55LGw9bi54LXQueCxjPW4ueS10LnksaD1hKmErcypzLGY9YSpjLXMqbDtpZihNYXRoLmFicyhmKT5OdW1iZXIuRVBTSUxPTil7dmFyIGQ9TWF0aC5zcXJ0KGgpLHA9TWF0aC5zcXJ0KGwqbCtjKmMpLGc9ZS54LXMvZCx2PWUueSthL2QsbT1uLngtYy9wLHk9bi55K2wvcCxfPSgobS1nKSpjLSh5LXYpKmwpLyhhKmMtcypsKTtpPWcrYSpfLXQueCxyPXYrcypfLXQueTt2YXIgYj1pKmkrcipyO2lmKGI8PTIpcmV0dXJuIG5ldyB1LlZlY3RvcjIoaSxyKTtvPU1hdGguc3FydChiLzIpfWVsc2V7dmFyIHg9ITE7YT5OdW1iZXIuRVBTSUxPTj9sPk51bWJlci5FUFNJTE9OJiYoeD0hMCk6YTwtTnVtYmVyLkVQU0lMT04/bDwtTnVtYmVyLkVQU0lMT04mJih4PSEwKTpNYXRoLnNpZ24ocyk9PT1NYXRoLnNpZ24oYykmJih4PSEwKSx4PyhpPS1zLHI9YSxvPU1hdGguc3FydChoKSk6KGk9YSxyPXMsbz1NYXRoLnNxcnQoaC8yKSl9cmV0dXJuIG5ldyB1LlZlY3RvcjIoaS9vLHIvbyl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPW4oMiksdT1pKHMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cih0aGlzLHQpfXJldHVybiBhKHQsbnVsbCxbe2tleTpcImNyZWF0ZUV4cGFuZGVkUG9pbnRzR2VvbWV0cnlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MSxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToxLGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOjEyLHI9dC5leHRyYWN0UG9pbnRzKGkpLnNoYXBlLGE9IXUuU2hhcGVVdGlscy5pc0Nsb2NrV2lzZShyKSxzPXIubGVuZ3RoLGw9bmV3IHUuR2VvbWV0cnk7YSYmKHI9ci5yZXZlcnNlKCksYT0hMSksKHQuYXV0b0Nsb3NlfHxyWzBdLmVxdWFscyhyW3MtMV0pKSYmKHIucG9wKCkscy0tKTtmb3IodmFyIGM9MDtjPHM7YysrKXt2YXIgaD0oYy0xK3MpJXMsZj0oYysxKSVzLGQ9byhyW2NdLHJbaF0scltmXSkscD1lKk1hdGguc2luKG4qTWF0aC5QSS8yKSxnPWQuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihwKS5hZGQocltjXSk7bC52ZXJ0aWNlcy5wdXNoKG5ldyB1LlZlY3RvcjMoZy54LGcueSwwKSl9cmV0dXJuIGwudmVydGljZXMucHVzaChsLnZlcnRpY2VzWzBdLmNsb25lKCkpLGx9fV0pLHR9KCk7ZS5kZWZhdWx0PWx9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDIpLGw9aSh1KSxjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcImdldEFBQkJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbC5WZWN0b3IzKDAsMCwwKSxuPXRoaXMubWFyZ2lufHwwLGk9dGhpcy5zY2FsZSxyPWkueC8yLG89aS55LzIsYT1bXSxzPXRoaXMubWF0cml4V29ybGQsdT10aGlzLm1hdGVyaWFsLmFuY2hvcixjPTAsaD0wO3JldHVybiBlLnNldEZyb21NYXRyaXhQb3NpdGlvbihzKSxlPXQudG9TY3JlZW5Db29yZGluYXRlKGUueCxlLnksZS56KSx1JiYoYz1yLWkueCp1WzBdLGg9by1pLnkqdVsxXSxlLnNldFgoZS54K2MpLGUuc2V0WShlLnkraCkpLGEucHVzaChlLngtci1uKSxhLnB1c2goZS55LW8tbiksYS5wdXNoKDApLGEucHVzaChlLngrcituKSxhLnB1c2goZS55K28rbiksYS5wdXNoKDApLGF9fSx7a2V5OlwibWFrZUNvbGxpc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZpc2libGU9IXQsdGhpcy5tYXRlcmlhbC5vcGFjaXR5PXRoaXMuZGVzdE9wYWNpdHk/dGhpcy5kZXN0T3BhY2l0eToxLHRoaXN9fV0pLGV9KGwuU3ByaXRlKTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjt2YXIgZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSxuPWZ1bmN0aW9uIHQoKXtmdW5jdGlvbiBlKHQpe3JldHVybiByLmFwcGVuZENoaWxkKHQuZG9tKSx0fWZ1bmN0aW9uIG4odCl7Zm9yKHZhciBlPTA7ZTxyLmNoaWxkcmVuLmxlbmd0aDtlKyspci5jaGlsZHJlbltlXS5zdHlsZS5kaXNwbGF5PWU9PT10P1wiYmxvY2tcIjpcIm5vbmVcIjtpPXR9dmFyIGk9MCxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ci5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6MC45O3otaW5kZXg6MTAwMDBcIixyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxuKCsraSVyLmNoaWxkcmVuLmxlbmd0aCl9LCExKTt2YXIgbz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGE9byxzPTAsdT1lKG5ldyB0LlBhbmVsKFwiRlBTXCIsXCIjMGZmXCIsXCIjMDAyXCIpKSxsPWUobmV3IHQuUGFuZWwoXCJNU1wiLFwiIzBmMFwiLFwiIzAyMFwiKSk7aWYoc2VsZi5wZXJmb3JtYW5jZSYmc2VsZi5wZXJmb3JtYW5jZS5tZW1vcnkpdmFyIGM9ZShuZXcgdC5QYW5lbChcIk1CXCIsXCIjZjA4XCIsXCIjMjAxXCIpKTtyZXR1cm4gbigwKSx7UkVWSVNJT046MTYsZG9tOnIsYWRkUGFuZWw6ZSxzaG93UGFuZWw6bixiZWdpbjpmdW5jdGlvbigpe289KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKX0sZW5kOmZ1bmN0aW9uKCl7cysrO3ZhciB0PShwZXJmb3JtYW5jZXx8RGF0ZSkubm93KCk7aWYobC51cGRhdGUodC1vLDIwMCksdD5hKzFlMyYmKHUudXBkYXRlKDFlMypzLyh0LWEpLDEwMCksYT10LHM9MCxjKSl7dmFyIGU9cGVyZm9ybWFuY2UubWVtb3J5O2MudXBkYXRlKGUudXNlZEpTSGVhcFNpemUvMTA0ODU3NixlLmpzSGVhcFNpemVMaW1pdC8xMDQ4NTc2KX1yZXR1cm4gdH0sdXBkYXRlOmZ1bmN0aW9uKCl7bz10aGlzLmVuZCgpfSxkb21FbGVtZW50OnIsc2V0TW9kZTpufX07bi5QYW5lbD1mdW5jdGlvbih0LGUsbil7dmFyIGk9MS8wLHI9MCxvPU1hdGgucm91bmQsYT1vKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxzPTgwKmEsdT00OCphLGw9MyphLGM9MiphLGg9MyphLGY9MTUqYSxkPTc0KmEscD0zMCphLGc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtnLndpZHRoPXMsZy5oZWlnaHQ9dSxnLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDo4MHB4O2hlaWdodDo0OHB4XCI7dmFyIHY9Zy5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIHYuZm9udD1cImJvbGQgXCIrOSphK1wicHggSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWZcIix2LnRleHRCYXNlbGluZT1cInRvcFwiLHYuZmlsbFN0eWxlPW4sdi5maWxsUmVjdCgwLDAscyx1KSx2LmZpbGxTdHlsZT1lLHYuZmlsbFRleHQodCxsLGMpLHYuZmlsbFJlY3QoaCxmLGQscCksdi5maWxsU3R5bGU9bix2Lmdsb2JhbEFscGhhPS45LHYuZmlsbFJlY3QoaCxmLGQscCkse2RvbTpnLHVwZGF0ZTpmdW5jdGlvbih1LG0pe2k9TWF0aC5taW4oaSx1KSxyPU1hdGgubWF4KHIsdSksdi5maWxsU3R5bGU9bix2Lmdsb2JhbEFscGhhPTEsdi5maWxsUmVjdCgwLDAscyxmKSx2LmZpbGxTdHlsZT1lLHYuZmlsbFRleHQobyh1KStcIiBcIit0K1wiIChcIitvKGkpK1wiLVwiK28ocikrXCIpXCIsbCxjKSx2LmRyYXdJbWFnZShnLGgrYSxmLGQtYSxwLGgsZixkLWEscCksdi5maWxsUmVjdChoK2QtYSxmLGEscCksdi5maWxsU3R5bGU9bix2Lmdsb2JhbEFscGhhPS45LHYuZmlsbFJlY3QoaCtkLWEsZixhLG8oKDEtdS9tKSpwKSl9fX0sXCJvYmplY3RcIj09PWUodCkmJih0LmV4cG9ydHM9bil9KS5jYWxsKGUsbigzNykodCkpfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9bigxKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDI2KSxsPXIodSksYz1uKDE5KSxoPXIoYyksZj1uKDYpLGQ9cihmKSxwPW4oMiksZz1pKHApLHY9e2R1cmF0aW9uOjUwMH0sbT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuLGkpe2lmKG8odGhpcyx0KSwhKGUgaW5zdGFuY2VvZiBoLmRlZmF1bHQmJm4gaW5zdGFuY2VvZiBsLmRlZmF1bHQpKXRocm93IG5ldyBFcnJvcihcIlBsYW5lTGluZU9mZnNldEFuaW1hdGlvbjogSW52YWxpZCBwYXJhbWV0ZXJcIik7dGhpcy5fb3B0aW9ucz1hKHt9LHYsaSk7dmFyIHI9ZS5zY2VuZU1hbmFnZXIuZ2V0KC0xKSxzPXIuX2ZpbmRNZXNoKG4pO2lmKCEocyYmcy5jaGlsZHJlblswXSYmcy5jaGlsZHJlblswXS5nZW9tZXRyeSBpbnN0YW5jZW9mIGcuVHViZUdlb21ldHJ5KSl0aHJvdyBuZXcgRXJyb3IoXCJQbGFuZUxpbmVPZmZzZXRBbmltYXRpb246IENhbiBub3QgZmluZCB0dWJlXCIpO3RoaXMuX3R1YmU9cy5jaGlsZHJlblswXSx0aGlzLl9vblVwZGF0ZT10aGlzLl9vblVwZGF0ZS5iaW5kKHRoaXMpLHRoaXMuX2FuaW1hdG9yPWQuZGVmYXVsdC5nZXRJbnN0YW5jZSgpLm9mTnVtYmVyKDEsMCx0aGlzLl9vcHRpb25zLmR1cmF0aW9uKS5yZXBlYXQoMS8wKS5vbihcInVwZGF0ZVwiLHRoaXMuX29uVXBkYXRlKX1yZXR1cm4gcyh0LFt7a2V5OlwiX29uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl90dWJlLm1hdGVyaWFsLm1hcCYmdGhpcy5fdHViZS5tYXRlcmlhbC5tYXAub2Zmc2V0LnNldFgoZS5udW0pfX0se2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9hbmltYXRvci5zdGFydCgpfX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1hdG9yLnN0b3AoKSx0aGlzLl9hbmltYXRvcj1udWxsLHRoaXMuX3R1YmU9bnVsbH19XSksdH0oKTtlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPW4oNSksYz1yKGwpLGg9bigyKSxmPWkoaCksZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe2lmKG8odGhpcyxlKSwhKHQgaW5zdGFuY2VvZiBmLkdyb3VwKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRocmVlIGdyb3VwXCIpO3ZhciBuPWEodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4uX3Jvb3Q9dCxuLl9vcmlnaW5SYWRpdXM9bi5fcm9vdC5jaGlsZHJlblswXS5nZW9tZXRyeS5wYXJhbWV0ZXJzLnJhZGl1cyxuLnNjYWxlWD1uLnNjYWxlWC5iaW5kKG4pLG59cmV0dXJuIHMoZSx0KSx1KGUsW3trZXk6XCJzY2FsZVhcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihpc05hTih0KXx8IWlzRmluaXRlKHQpfHx0PD0wKXJldHVybiBjb25zb2xlLndhcm4oXCJUdWJlU2NhbGVIYW5kbGVyOiBJbnZhbGlkIHNjYWxlXCIpLHRoaXM7dmFyIGU9dGhpcy5fcm9vdC5jaGlsZHJlblswXSxuPWUuZ2VvbWV0cnkucGFyYW1ldGVycyxpPW5ldyBmLlR1YmVHZW9tZXRyeShuLnBhdGgsbi5zZWdtZW50cyx0aGlzLl9vcmlnaW5SYWRpdXMqdCxuLnJhZGlhbFNlZ21lbnRzLG4uY2xvc2VkKSxyPWUubWF0ZXJpYWwuY2xvbmUoKSxvPW5ldyBmLk1lc2goaSxyKTtyZXR1cm4gby5fc2NlbmVJZD1lLl9zY2VuZUlkLHRoaXMuX3Jvb3QucmVtb3ZlKGUpLGUuZ2VvbWV0cnkuZGlzcG9zZSgpLGUubWF0ZXJpYWwubWFwLmRpc3Bvc2UoKSxlLm1hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzLl9yb290LmFkZChvKSx0aGlzfX0se2tleTpcImRpc3Bvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Jvb3QuY2hpbGRyZW5bMF0sZT10Lmdlb21ldHJ5O3RoaXMuX3Jvb3QucmVtb3ZlKHQpLGUuZGlzcG9zZSgpLHQubWF0ZXJpYWwubWFwLmRpc3Bvc2UoKSx0Lm1hdGVyaWFsLm1hcC5kaXNwb3NlKCksdGhpcy5fcm9vdD1udWxsfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5UdWJlT2Zmc2V0QW5pbWF0aW9uPWUuVHViZVNjYWxlSGFuZGxlcj12b2lkIDA7dmFyIHI9bigxMDEpLG89aShyKSxhPW4oMTAwKSxzPWkoYSk7ZS5UdWJlU2NhbGVIYW5kbGVyPW8uZGVmYXVsdCxlLlR1YmVPZmZzZXRBbmltYXRpb249cy5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9big3NSkscj1uKDEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgbj1yKHt0cmFuc3BhcmVudDohMCx1bmlmb3Jtczp7dGhpY2tuZXNzOnt2YWx1ZTppKGUudGhpY2tuZXNzLC4xKX0sb3BhY2l0eTp7dmFsdWU6aShlLm9wYWNpdHksMSl9LGRpZmZ1c2U6e3ZhbHVlOm5ldyB0LkNvbG9yKGUuZGlmZnVzZSl9LGRhc2hTdGVwczp7dmFsdWU6MTJ9LGRhc2hEaXN0YW5jZTp7dmFsdWU6LjJ9LGRhc2hTbW9vdGg6e3ZhbHVlOi4wMX19LHZlcnRleFNoYWRlcjpbXCJ1bmlmb3JtIGZsb2F0IHRoaWNrbmVzcztcIixcImF0dHJpYnV0ZSBmbG9hdCBsaW5lTWl0ZXI7XCIsXCJhdHRyaWJ1dGUgdmVjMiBsaW5lTm9ybWFsO1wiLFwiYXR0cmlidXRlIGZsb2F0IGxpbmVEaXN0YW5jZTtcIixcInZhcnlpbmcgZmxvYXQgbGluZVU7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJsaW5lVSA9IGxpbmVEaXN0YW5jZTtcIixcInZlYzMgcG9pbnRQb3MgPSBwb3NpdGlvbi54eXogKyB2ZWMzKGxpbmVOb3JtYWwgKiB0aGlja25lc3MvMi4wICogbGluZU1pdGVyLCAwLjApO1wiLFwiZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9pbnRQb3MsIDEuMCApO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInZhcnlpbmcgZmxvYXQgbGluZVU7XCIsXCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsXCJ1bmlmb3JtIHZlYzMgZGlmZnVzZTtcIixcInVuaWZvcm0gZmxvYXQgZGFzaFN0ZXBzO1wiLFwidW5pZm9ybSBmbG9hdCBkYXNoU21vb3RoO1wiLFwidW5pZm9ybSBmbG9hdCBkYXNoRGlzdGFuY2U7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJmbG9hdCBsaW5lVU1vZCA9IG1vZChsaW5lVSwgMS4wL2Rhc2hTdGVwcykgKiBkYXNoU3RlcHM7XCIsXCJmbG9hdCBkYXNoID0gc21vb3Roc3RlcChkYXNoRGlzdGFuY2UsIGRhc2hEaXN0YW5jZStkYXNoU21vb3RoLCBsZW5ndGgobGluZVVNb2QtMC41KSk7XCIsXCJnbF9GcmFnQ29sb3IgPSB2ZWM0KGRpZmZ1c2UgKiB2ZWMzKGRhc2gpLCBvcGFjaXR5ICogZGFzaCk7XCIsXCJ9XCJdLmpvaW4oXCJcXG5cIil9LGUpO2RlbGV0ZSBuLnRoaWNrbmVzcyxkZWxldGUgbi5vcGFjaXR5LGRlbGV0ZSBuLmRpZmZ1c2U7dmFyIG89MHwocGFyc2VJbnQodC5SRVZJU0lPTiwxMCl8fDApO3JldHVybiBvPDcyJiYobi5hdHRyaWJ1dGVzPXtsaW5lTWl0ZXI6e3R5cGU6XCJmXCIsdmFsdWU6MH0sbGluZURpc3RhbmNlOnt0eXBlOlwiZlwiLHZhbHVlOjB9LGxpbmVOb3JtYWw6e3R5cGU6XCJ2MlwiLHZhbHVlOm5ldyB0LlZlY3RvcjJ9fSksbn19fSxmdW5jdGlvbih0LGUsbil7dmFyIGk7IWZ1bmN0aW9uKHIsbyxhLHMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHUodCxlLG4saSxyKXtpPWl8fDAscj1yfHwwLHRoaXMuaWRlbnRpZmllcj1lLHRoaXMudGFyZ2V0PXQsdGhpcy5jbGllbnRYPW4uY2xpZW50WCtpLHRoaXMuY2xpZW50WT1uLmNsaWVudFkrcix0aGlzLnNjcmVlblg9bi5zY3JlZW5YK2ksdGhpcy5zY3JlZW5ZPW4uc2NyZWVuWStyLHRoaXMucGFnZVg9bi5wYWdlWCtpLHRoaXMucGFnZVk9bi5wYWdlWStyfWZ1bmN0aW9uIGwoKXt2YXIgdD1bXTtyZXR1cm4gdC5pdGVtPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW3RdfHxudWxsfSx0LmlkZW50aWZpZWRUb3VjaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t0KzFdfHxudWxsfSx0fWZ1bmN0aW9uIGMoKXtmb3IodmFyIHQ9W3Isby5kb2N1bWVudEVsZW1lbnRdLGU9W1wib250b3VjaHN0YXJ0XCIsXCJvbnRvdWNobW92ZVwiLFwib250b3VjaGNhbmNlbFwiLFwib250b3VjaGVuZFwiXSxuPTA7bjx0Lmxlbmd0aDtuKyspZm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspdFtuXSYmdFtuXVtlW2ldXT09cyYmKHRbbl1bZVtpXV09bnVsbCl9ZnVuY3Rpb24gaCgpe3JldHVyblwib250b3VjaHN0YXJ0XCJpbiByfHxyLk1vZGVybml6ciYmci5Nb2Rlcm5penIudG91Y2h8fChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50c3x8bmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzKT4yfWZ1bmN0aW9uIGYodCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZihlKSwxPT09ZS53aGljaCYmKChcIm1vdXNlZG93blwiPT1lLnR5cGV8fCF4fHx4JiYheC5kaXNwYXRjaEV2ZW50KSYmKHg9ZS50YXJnZXQpLHcmJiFlLnNoaWZ0S2V5JiYocChcInRvdWNoZW5kXCIsZSksdz0hMSkscCh0LGUpLCF3JiZlLnNoaWZ0S2V5JiYodz0hMCxiPXtwYWdlWDplLnBhZ2VYLHBhZ2VZOmUucGFnZVksY2xpZW50WDplLmNsaWVudFgsY2xpZW50WTplLmNsaWVudFksc2NyZWVuWDplLnNjcmVlblgsc2NyZWVuWTplLnNjcmVlbll9LHAoXCJ0b3VjaHN0YXJ0XCIsZSkpLFwibW91c2V1cFwiPT1lLnR5cGUmJihiPW51bGwsdz0hMSx4PW51bGwpKX19ZnVuY3Rpb24gcCh0LGUpe3ZhciBuPW8uY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtuLmluaXRFdmVudCh0LCEwLCEwKSxuLmFsdEtleT1lLmFsdEtleSxuLmN0cmxLZXk9ZS5jdHJsS2V5LG4ubWV0YUtleT1lLm1ldGFLZXksbi5zaGlmdEtleT1lLnNoaWZ0S2V5LG4udG91Y2hlcz12KGUsdCksbi50YXJnZXRUb3VjaGVzPXYoZSx0KSxuLmNoYW5nZWRUb3VjaGVzPW0oZSx0KSx4LmRpc3BhdGNoRXZlbnQobil9ZnVuY3Rpb24gZyh0KXt2YXIgZT1uZXcgbDtpZih3KXt2YXIgbj1fLm11bHRpVG91Y2hPZmZzZXQsaT1iLnBhZ2VYLXQucGFnZVgscj1iLnBhZ2VZLXQucGFnZVk7ZS5wdXNoKG5ldyB1KHgsMSxiLGkqLTEtbixyKi0xKSksZS5wdXNoKG5ldyB1KHgsMixiLGkrbixyKSl9ZWxzZSBlLnB1c2gobmV3IHUoeCwxLHQsMCwwKSk7cmV0dXJuIGV9ZnVuY3Rpb24gdih0LGUpe2lmKFwibW91c2V1cFwiPT10LnR5cGUpcmV0dXJuIG5ldyBsO3ZhciBuPWcodCk7cmV0dXJuIHcmJlwibW91c2V1cFwiIT10LnR5cGUmJlwidG91Y2hlbmRcIj09ZSYmbi5zcGxpY2UoMSwxKSxufWZ1bmN0aW9uIG0odCxlKXt2YXIgbj1nKHQpO3JldHVybiF3fHxcIm1vdXNldXBcIj09dC50eXBlfHxcInRvdWNoc3RhcnRcIiE9ZSYmXCJ0b3VjaGVuZFwiIT1lfHxuLnNwbGljZSgwLDEpLG59ZnVuY3Rpb24geSh0KXt2YXIgZSxuLGkscjtmb3Iobj0wO248dC50b3VjaGVzLmxlbmd0aDtuKyspe2U9dC50b3VjaGVzW25dLGk9RVtlLmlkZW50aWZpZXJdLGl8fChpPUVbZS5pZGVudGlmaWVyXT1vLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksby5ib2R5LmFwcGVuZENoaWxkKGkpKSxyPV8udGVtcGxhdGUoZSk7Zm9yKHZhciBhIGluIHIpaS5zdHlsZVthXT1yW2FdfWlmKFwidG91Y2hlbmRcIj09dC50eXBlfHxcInRvdWNoY2FuY2VsXCI9PXQudHlwZSlmb3Iobj0wO248dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7bisrKWU9dC5jaGFuZ2VkVG91Y2hlc1tuXSxpPUVbZS5pZGVudGlmaWVyXSxpJiYoaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkpLGRlbGV0ZSBFW2UuaWRlbnRpZmllcl0pfWZ1bmN0aW9uIF8oKXtoKCl8fChjKCksci5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZChcInRvdWNoc3RhcnRcIiksITApLHIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGQoXCJ0b3VjaG1vdmVcIiksITApLHIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixkKFwidG91Y2hlbmRcIiksITApLHIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIixmLCEwKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsZiwhMCksci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIixmLCEwKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIixmLCEwKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIseSwhMSksci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIseSwhMSksci5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix5LCExKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHksITEpKX12YXIgYix4LHc9ITEsRT17fTtvLmNyZWF0ZVRvdWNofHwoby5jcmVhdGVUb3VjaD1mdW5jdGlvbih0LGUsbixpLG8sYSxsLGMsaCl7cmV0dXJuIGMhPXMmJmghPXN8fChjPWktci5wYWdlWE9mZnNldCxoPW8tci5wYWdlWU9mZnNldCksbmV3IHUoZSxuLHtwYWdlWDppLHBhZ2VZOm8sc2NyZWVuWDphLHNjcmVlblk6bCxjbGllbnRYOmMsY2xpZW50WTpofSl9KSxvLmNyZWF0ZVRvdWNoTGlzdHx8KG8uY3JlYXRlVG91Y2hMaXN0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBsLGU9MDtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiB0Lmxlbmd0aD1hcmd1bWVudHMubGVuZ3RoLHR9KSxfLm11bHRpVG91Y2hPZmZzZXQ9NzUsXy50ZW1wbGF0ZT1mdW5jdGlvbih0KXt2YXIgZT0zMCxuPVwidHJhbnNsYXRlKFwiKyh0LmNsaWVudFgtZS8yKStcInB4LCBcIisodC5jbGllbnRZLWUvMikrXCJweClcIjtyZXR1cm57cG9zaXRpb246XCJmaXhlZFwiLGxlZnQ6MCx0b3A6MCxiYWNrZ3JvdW5kOlwiI2ZmZlwiLGJvcmRlcjpcInNvbGlkIDFweCAjOTk5XCIsb3BhY2l0eTouNixib3JkZXJSYWRpdXM6XCIxMDAlXCIsaGVpZ2h0OmUrXCJweFwiLHdpZHRoOmUrXCJweFwiLHBhZGRpbmc6MCxtYXJnaW46MCxkaXNwbGF5OlwiYmxvY2tcIixvdmVyZmxvdzpcImhpZGRlblwiLHBvaW50ZXJFdmVudHM6XCJub25lXCIsd2Via2l0VXNlclNlbGVjdDpcIm5vbmVcIixtb3pVc2VyU2VsZWN0Olwibm9uZVwiLHVzZXJTZWxlY3Q6XCJub25lXCIsd2Via2l0VHJhbnNmb3JtOm4sbW96VHJhbnNmb3JtOm4sdHJhbnNmb3JtOm59fSxpPWZ1bmN0aW9uKCl7cmV0dXJuIF99LmNhbGwoZSxuLGUsdCksIShpIT09cyYmKHQuZXhwb3J0cz1pKSl9KHdpbmRvdyxkb2N1bWVudCxcIlRvdWNoRW11bGF0b3JcIil9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDUpLGw9aSh1KSxjPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcih0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcInN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7fX0se2tleTpcInN0b3BcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0se2tleTpcImVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcInJlcGVhdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzfX0se2tleTpcImRlbGF5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXN9fSx7a2V5OlwidGltZUludGVycG9sYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lSW50ZXJwb2xhdG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGltZUludGVycG9sYXRvcj10fX0se2tleTpcInR5cGVFdmFsdWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZUV2YWx1YXRvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3R5cGVFdmFsdWF0b3I9dH19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpfXJldHVybiBpKHQsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt9fSx7a2V5Olwib2ZOdW1iZXJcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJvZk9iamVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9ZnVuY3Rpb24gdChlLG4saSxyKXt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIGE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO251bGwhPT1hJiZ0KGEsbixpLHIpfWVsc2UgaWYoXCJ2YWx1ZVwiaW4gbyYmby53cml0YWJsZSlvLnZhbHVlPWk7ZWxzZXt2YXIgcz1vLnNldDt2b2lkIDAhPT1zJiZzLmNhbGwocixpKX1yZXR1cm4gaX0sbD1uKDEwNSksYz1pKGwpLGg9big3MyksZj1pKGgpLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4saSl7cih0aGlzLGUpO3ZhciBhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7YS5fdD1uZXcgZi5kZWZhdWx0LlR3ZWVuKHQpLnRvKG4saSk7dmFyIHM9YTtyZXR1cm4gYS5fdC5vblN0YXJ0KGZ1bmN0aW9uKHQpe3MuZW1pdChcInN0YXJ0XCIscyx0KX0pLGEuX3Qub25VcGRhdGUoZnVuY3Rpb24odCl7cy5lbWl0KFwidXBkYXRlXCIscyx0aGlzLHQpfSksYS5fdC5vbkNvbXBsZXRlKGZ1bmN0aW9uKCl7cy5lbWl0KFwiY29tcGxldGVcIixzLHRoaXMpfSksYS5fdC5vblN0b3AoZnVuY3Rpb24oKXtzLmVtaXQoXCJzdG9wXCIscyx0aGlzKX0pLGF9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90LnN0YXJ0KHQpLHRoaXN9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Quc3RvcCgpLHRoaXN9fSx7a2V5OlwicmVwZWF0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3QucmVwZWF0KHQpLHRoaXN9fSx7a2V5OlwiZGVsYXlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdC5kZWxheSh0KSx0aGlzfX0se2tleTpcImVhc2luZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90LmVhc2luZyh0KSx0aGlzfX0se2tleTpcImludGVycG9sYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdC5pbnRlcnBvbGF0aW9uKHQpLHRoaXN9fSx7a2V5OlwiRWFzaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGYuZGVmYXVsdC5FYXNpbmd9fSx7a2V5OlwiSW50ZXJwb2xhdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiBmLmRlZmF1bHQuSW50ZXJwb2xhdGlvbn19LHtrZXk6XCJ0aW1lSW50ZXJwb2xhdG9yXCIsc2V0OmZ1bmN0aW9uKHQpe3UoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwidGltZUludGVycG9sYXRvclwiLHQsdGhpcyksdGhpcy5fdC5lYXNpbmcoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZ2V0SW50ZXJwb2xhdGlvbihlKX0pfX0se2tleTpcInR5cGVFdmFsdWF0b3JcIixzZXQ6ZnVuY3Rpb24odCl7dShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJ0eXBlRXZhbHVhdG9yXCIsdCx0aGlzKSx0aGlzLl90LmludGVycG9sYXRpb24oZnVuY3Rpb24oZSxuKXt0LmV2YWx1YXRlKG4sZSxlKX0pfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9bigxMDYpLGw9aSh1KSxjPW4oMTA3KSxoPWkoYyksZj1uKDczKSxkPWkoZikscD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXtkLmRlZmF1bHQudXBkYXRlKHQpfX0se2tleTpcIm9mTnVtYmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdCxlO2lmKGFyZ3VtZW50cy5sZW5ndGg8Myl0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCB0aHJlZSBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZCFcIik7dmFyIG49e251bTphcmd1bWVudHMubGVuZ3RoPD0wP3ZvaWQgMDphcmd1bWVudHNbMF19LGk9e251bToodD1hcmd1bWVudHMubGVuZ3RoLTIsYXJndW1lbnRzLmxlbmd0aDw9dD92b2lkIDA6YXJndW1lbnRzW3RdKX0scj0oZT1hcmd1bWVudHMubGVuZ3RoLTEsYXJndW1lbnRzLmxlbmd0aDw9ZT92b2lkIDA6YXJndW1lbnRzW2VdKTtyZXR1cm4gbmV3IGguZGVmYXVsdChuLGkscil9fSx7a2V5Olwib2ZPYmplY3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0LGU7aWYoYXJndW1lbnRzLmxlbmd0aDwzKXRocm93IG5ldyBFcnJvcihcIkF0IGxlYXN0IHRocmVlIHBhcmFtZXRlcnMgYXJlIHJlcXVpcmVkIVwiKTt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPD0wP3ZvaWQgMDphcmd1bWVudHNbMF0saT0odD1hcmd1bWVudHMubGVuZ3RoLTIsYXJndW1lbnRzLmxlbmd0aDw9dD92b2lkIDA6YXJndW1lbnRzW3RdKSxyPShlPWFyZ3VtZW50cy5sZW5ndGgtMSxhcmd1bWVudHMubGVuZ3RoPD1lP3ZvaWQgMDphcmd1bWVudHNbZV0pO3JldHVybiBuZXcgaC5kZWZhdWx0KG4saSxyKX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9cH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuQW5pbWF0b3JGYWN0b3J5PXZvaWQgMDt2YXIgcj1uKDYpLG89aShyKTtlLkFuaW1hdG9yRmFjdG9yeT1vLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDE3KSxsPWkodSksYz1uKDQpLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBuLl9wb3NpdGlvbj1uZXcgYy5nZW9tLkNvb3JkaW5hdGUoMCwwLDApLG4uX3RhcmdldD1uZXcgYy5nZW9tLkNvb3JkaW5hdGUoMCwwLDApLG4uX3VwPW5ldyBjLmdlb20uQ29vcmRpbmF0ZSgwLDAsMCksbn1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcImluaXRSZWN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOi42NjcsYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjYwfX0se2tleTpcInJlU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7fX0se2tleTpcIm9uQWN0aXZlQ2FtZXJhXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbWFwVmlldz10fX0se2tleTpcInRvU2NyZWVuQ29vcmRpbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt9fSx7a2V5OlwidG9DYW1lcmFDb29yZGluYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJsb29rQXRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcInBvc2l0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb249dH19LHtrZXk6XCJ0YXJnZXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGFyZ2V0PXR9fSx7a2V5OlwidXBcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXB9LHNldDpmdW5jdGlvbih0KXt0aGlzLl91cD10fX1dKSxlfShsLmRlZmF1bHQpO2UuZGVmYXVsdD1ofSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9big1KSxjPXIobCksaD1uKDIpLGY9aShoKSxkPW4oMjcpLHA9aShkKSxnPW4oMzUpLHY9cihnKSxtPW4oMTgpLHk9big2KSxfPXIoeSksYj1uKDMpLHg9MTgwL01hdGguUEksdz1NYXRoLlBJLzE4MCxFPTAsUz0wLE09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4pe28odGhpcyxlKTt2YXIgaT1hKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBpLl9hY3RpdmVDYW1lcmE9dCxpLl9jYW1lcmE9dC5jYW1lcmEsaS5fbWFwVmlldz1uLGkuX0VQUz0xZS02LGkuX3RhcmdldD1uZXcgZi5WZWN0b3IzLGkuX21pbkRpc3RhbmNlPTMwLGkuX21heERpc3RhbmNlPTEvMCxpLl9jdXJEaXN0YW5jZT0wLGkuX2N1clpvb21TdGF0dXM9MCxpLl9taW5Ta2V3QW5nbGU9MCxpLl9tYXhTa2V3QW5nbGU9NjAsaS5fYm91bmRTY2FsZT0xLjUsaS5fZW5hYmxlVmVydGljYWxNb3ZlPSExLGkuX3Bhc3NNaW5Nb3ZlPSEwLGkuX3N0YXRpY01vdmU9ITAsaS5fc3RhdGljWm9vbT0hMSxpLl90YXJnZXQwPWkuX3RhcmdldC5jbG9uZSgpLGkuX3Bvc2l0aW9uMD1pLl9jYW1lcmEucG9zaXRpb24uY2xvbmUoKSxpLl9zcGhlcmljYWw9bmV3IGYuU3BoZXJpY2FsLGkuX3NwaGVyaWNhbERlbHRhPW5ldyBmLlNwaGVyaWNhbCxpLl9zY2FsZT0xLGkuX3Bhbk9mZnNldD1uZXcgZi5WZWN0b3IzLGkuX3pvb21DaGFuZ2VkPSExLGkuX19yb3RhdGVTdGFydD0wLGkuX19yb3RhdGVFbmQ9MCxpLl9fcm90YXRlRGVsdGE9MCxpLl9wYW5TdGFydD1uZXcgZi5WZWN0b3IyLGkuX3BhbkVuZD1uZXcgZi5WZWN0b3IyLGkuX3BhbkRlbHRhPW5ldyBmLlZlY3RvcjIsaS5fc2hvdmVTdGFydD0wLGkuX3Nob3ZlRW5kPTAsaS5fc2hvdmVEZWx0YT0wLGkuX3Nob3ZlU3RhcnQwPTAsaS5fc2hvdmVTdGFydDE9MCxpLl9zaG92ZURlbHRhMD0wLGkuX3Nob3ZlRGVsdGExPTAsaS5fZG9sbHlTdGFydD0wLGkuX2RvbGx5RW5kPTAsaS5fZG9sbHlEZWx0YT0wLGkuX29mZnNldD1uZXcgZi5WZWN0b3IzLGkuX3F1YXQ9KG5ldyBmLlF1YXRlcm5pb24pLnNldEZyb21Vbml0VmVjdG9ycyhpLl9jYW1lcmEudXAsbmV3IGYuVmVjdG9yMygwLDEsMCkpLGkuX3F1YXRJbnZlcnNlPWkuX3F1YXQuY2xvbmUoKS5pbnZlcnNlKCksaS5fcm90YXRlTWF0cml4QW5nbGU9bmV3IGYuTWF0cml4NCxpLl9yb3RhdGVBeGlzPW5ldyBmLlZlY3RvcjMoMCwwLDEpLGkuX3JvdGF0ZVBhbj1uZXcgZi5WZWN0b3IzKDAsMCwwKSxpLl9yb3RhdGVDZW50ZXI9bmV3IGYuVmVjdG9yMygwLDAsMCksaS5fc2tld01hdHJpeEFuZ2xlPW5ldyBmLk1hdHJpeDQsaS5fbGFzdFBvc2l0aW9uPW5ldyBmLlZlY3RvcjMsaS5fbGFzdFF1YXRlcm5pb249bmV3IGYuUXVhdGVybmlvbixpLl9tb3ZlU3RhcnQ9aS5fbW92ZVN0YXJ0LmJpbmQoaSksaS5fbW92ZUVuZD1pLl9tb3ZlRW5kLmJpbmQoaSksaS5fbW92ZT1pLl9tb3ZlLmJpbmQoaSksaS5fcm90YXRlU3RhcnQ9aS5fcm90YXRlU3RhcnQuYmluZChpKSxpLl9yb3RhdGVFbmQ9aS5fcm90YXRlRW5kLmJpbmQoaSksaS5fcm90YXRlPWkuX3JvdGF0ZS5iaW5kKGkpLGkuX3pvb21TdGFydD1pLl96b29tU3RhcnQuYmluZChpKSxpLl96b29tRW5kPWkuX3pvb21FbmQuYmluZChpKSxpLl96b29tPWkuX3pvb20uYmluZChpKSxpLl9za2V3U3RhcnQ9aS5fc2tld1N0YXJ0LmJpbmQoaSksaS5fc2tld0VuZD1pLl9za2V3RW5kLmJpbmQoaSksaS5fc2tldz1pLl9za2V3LmJpbmQoaSksaS5fZG91YmxlVGFwWm9vbT1pLl9kb3VibGVUYXBab29tLmJpbmQoaSksaS5fY2hhbmdlUGxhbmFyR3JhcGg9aS5fY2hhbmdlUGxhbmFyR3JhcGguYmluZChpKSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwibW92ZVN0YXJ0XCIsaS5fbW92ZVN0YXJ0KSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwibW92ZUVuZFwiLGkuX21vdmVFbmQpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJtb3ZlXCIsaS5fbW92ZSksaS5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5vbihcInJvdGF0ZVN0YXJ0XCIsaS5fcm90YXRlU3RhcnQpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJyb3RhdGVFbmRcIixpLl9yb3RhdGVFbmQpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJyb3RhdGVcIixpLl9yb3RhdGUpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJ6b29tU3RhcnRcIixpLl96b29tU3RhcnQpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJ6b29tRW5kXCIsaS5fem9vbUVuZCksaS5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5vbihcInpvb21cIixpLl96b29tKSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwic2tld1N0YXJ0XCIsaS5fc2tld1N0YXJ0KSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwic2tld0VuZFwiLGkuX3NrZXdFbmQpLGkuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub24oXCJza2V3VXBcIixpLl9za2V3KSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwic2tld0Rvd25cIixpLl9za2V3KSxpLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9uKFwiZG91YmxlVGFwXCIsaS5fZG91YmxlVGFwWm9vbSksaS5fbWFwVmlldy5vbihcImNoYW5nZVBsYW5hckdyYXBoXCIsaS5fY2hhbmdlUGxhbmFyR3JhcGgpLGl9cmV0dXJuIHMoZSx0KSx1KGUsW3trZXk6XCJfZG91YmxlVGFwWm9vbVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztfLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcigxLjUsMCwzMDApLm9uKFwidXBkYXRlXCIsZnVuY3Rpb24oKXt0Lnpvb20oLjk1LCEwLCExLCExKX0pLm9uKFwic3RhcnRcIixmdW5jdGlvbigpe30pLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbigpe30pLnN0YXJ0KCk7dmFyIGU9bmV3IHYuZGVmYXVsdDtlLnR5cGU9XCJjYW1lcmFDb250cm9sXCIsdGhpcy5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5lbWl0KFwiem9vbUVuZFwiLGUpfX0se2tleTpcIl9tb3ZlU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnRvdWNoZXNbMF0sbj1lLmNsaWVudFgsaT1lLmNsaWVudFk7dGhpcy5fcGFuU3RhcnQuc2V0KG4saSksdGhpcy5fbW92ZU9yaWdpbj10aGlzLl9wYW5TdGFydC5jbG9uZSgpfX0se2tleTpcIl9tb3ZlRW5kXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQudHlwZSxpPW5ldyBmLlZlY3RvcjI7dGhpcy5fbW92ZU9yaWdpbj9pLnN1YlZlY3RvcnModGhpcy5fcGFuRW5kLHRoaXMuX21vdmVPcmlnaW4pOnRoaXMuX3Bhc3NNaW5Nb3ZlPSExLGkubGVuZ3RoKCk8NTAmJih0aGlzLl9wYXNzTWluTW92ZT0hMSksdGhpcy5fc3RhdGljTW92ZSYmdGhpcy5fcGFzc01pbk1vdmUmJl8uZGVmYXVsdC5nZXRJbnN0YW5jZSgpLm9mTnVtYmVyKDEuNSwwLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LG4pe3ZhciBpPW4ubnVtO2UubW92ZShlLl9wYW5EZWx0YS54KmksZS5fcGFuRGVsdGEueSppLDAsITAsITEsITEpfSkub24oXCJzdGFydFwiLGZ1bmN0aW9uKCl7fSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7fSkuc3RhcnQoKSxcImNhbWVyYUNvbnRyb2xcIiE9PW4mJih0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSx0aGlzLl9tb3ZlT3JpZ2luPW51bGwpfX0se2tleTpcIl9tb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50b3VjaGVzWzBdLG49ZS5jbGllbnRYLGk9ZS5jbGllbnRZO1xudGhpcy5fcGFuRW5kLnNldChuLGkpLHRoaXMuX3BhbkRlbHRhLnN1YlZlY3RvcnModGhpcy5fcGFuRW5kLHRoaXMuX3BhblN0YXJ0KSx0aGlzLm1vdmUodGhpcy5fcGFuRGVsdGEueCx0aGlzLl9wYW5EZWx0YS55LDAsITEsITEsITEpLHRoaXMuX3Bhc3NNaW5Nb3ZlPSEwLHRoaXMuX3BhbkRlbHRhLmxlbmd0aCgpPDE5LHRoaXMuX3BhblN0YXJ0LmNvcHkodGhpcy5fcGFuRW5kKSx0aGlzLnVwZGF0ZSgpfX0se2tleTpcIl9yb3RhdGVTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQucm90YXRlO3RoaXMuX19yb3RhdGVTdGFydD1lfX0se2tleTpcIl9yb3RhdGVFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7XCJjYW1lcmFDb250cm9sXCIhPT1lJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKX19LHtrZXk6XCJfcm90YXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5yb3RhdGUsbj10aGlzLl9hY3RpdmVDYW1lcmEudG9DYW1lcmFDb29yZGluYXRlKHRoaXMuX21hcFZpZXcud2lkdGgvMix0aGlzLl9tYXBWaWV3Lmxlbmd0aC8yLDApLGk9bi54LHI9bi55O3RoaXMuX19yb3RhdGVFbmQ9ZSx0aGlzLl9fcm90YXRlRGVsdGE9dGhpcy5fX3JvdGF0ZUVuZC10aGlzLl9fcm90YXRlU3RhcnQsTWF0aC5hYnModGhpcy5fX3JvdGF0ZURlbHRhKT4uMiYmdGhpcy5yb3RhdGUoaSxyLHRoaXMuX19yb3RhdGVEZWx0YSwhMSwhMSwhMSksdGhpcy5fX3JvdGF0ZVN0YXJ0PXRoaXMuX19yb3RhdGVFbmQsdGhpcy51cGRhdGUoKX19LHtrZXk6XCJfem9vbVN0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zY2FsZTt0aGlzLl9kb2xseVN0YXJ0PWV9fSx7a2V5OlwiX3pvb21FbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC50eXBlO3RoaXMuX3N0YXRpY1pvb20mJl8uZGVmYXVsdC5nZXRJbnN0YW5jZSgpLm9mTnVtYmVyKDEuNSwxLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LG4pe3ZhciBpPW4ubnVtO2Uuem9vbShpLCEwLCExLCExKX0pLm9uKFwic3RhcnRcIixmdW5jdGlvbigpe30pLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbigpe30pLnN0YXJ0KCksXCJjYW1lcmFDb250cm9sXCIhPT1uJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKX19LHtrZXk6XCJfem9vbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NhbGUsbj10LnRvdWNoZXMubGVuZ3RoO3RoaXMuX2RvbGx5RW5kPWUsMT09PW4/KHRoaXMuX2RvbGx5RGVsdGE9dGhpcy5fZG9sbHlFbmQtdGhpcy5fZG9sbHlTdGFydCx0aGlzLnpvb20oMS10aGlzLl9kb2xseURlbHRhLCExLCExLCExKSk6KHRoaXMuX2RvbGx5RGVsdGE9dGhpcy5fZG9sbHlTdGFydC90aGlzLl9kb2xseUVuZCx0aGlzLnpvb20odGhpcy5fZG9sbHlEZWx0YSwhMSwhMSwhMSkpLHRoaXMuX2RvbGx5U3RhcnQ9dGhpcy5fZG9sbHlFbmQsdGhpcy51cGRhdGUoKX19LHtrZXk6XCJfc2tld1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50b3VjaGVzO3RoaXMuX3Nob3ZlU3RhcnQ9ZVswXS5jbGllbnRZLGUubGVuZ3RoPjEmJih0aGlzLl9zaG92ZVN0YXJ0MD1lWzBdLmNsaWVudFksdGhpcy5fc2hvdmVTdGFydDE9ZVsxXS5jbGllbnRZKX19LHtrZXk6XCJfc2tld0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtcImNhbWVyYUNvbnRyb2xcIiE9PWUmJnRoaXMuX21hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbihtLkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApfX0se2tleTpcIl9za2V3XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC50b3VjaGVzO3RoaXMuX3Nob3ZlRW5kPW5bMF0uY2xpZW50WSxuLmxlbmd0aD4xJiYodGhpcy5fc2hvdmVEZWx0YTA9blswXS5jbGllbnRZLXRoaXMuX3Nob3ZlU3RhcnQwLHRoaXMuX3Nob3ZlRGVsdGExPW5bMV0uY2xpZW50WS10aGlzLl9zaG92ZVN0YXJ0MSksdGhpcy5fc2hvdmVEZWx0YT10aGlzLl9zaG92ZUVuZC10aGlzLl9zaG92ZVN0YXJ0LCh0aGlzLl9zaG92ZURlbHRhMCp0aGlzLl9zaG92ZURlbHRhMT4wfHwxPT09bi5sZW5ndGgpJiZNYXRoLmFicyh0aGlzLl9zaG92ZURlbHRhLzQpPi4xJiYoXCJza2V3VXBcIj09PWU/dGhpcy5za2V3KHRoaXMuX3Nob3ZlRGVsdGEvNCwhMSwhMSwhMSk6XCJza2V3RG93blwiPT09ZSYmdGhpcy5za2V3KHRoaXMuX3Nob3ZlRGVsdGEvNCwhMSwhMSwhMSkpLHRoaXMuX3Nob3ZlU3RhcnQ9dGhpcy5fc2hvdmVFbmQsbi5sZW5ndGg+MSYmKHRoaXMuX3Nob3ZlU3RhcnQwPW5bMF0uY2xpZW50WSx0aGlzLl9zaG92ZVN0YXJ0MT1uWzFdLmNsaWVudFkpLHRoaXMudXBkYXRlKCl9fSx7a2V5OlwiX2NoYW5nZVBsYW5hckdyYXBoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9ib3VuZD10aGlzLl9hY3RpdmVDYW1lcmEuYm91bmQuY2xvbmUoKSx0aGlzLl9ib3VuZC5zY2FsZVJhZGl1cyh0aGlzLl9ib3VuZFNjYWxlKSwxPT09ZS5sZW5ndGg/dGhpcy5fbWF4RGlzdGFuY2U9MS4yKnRoaXMuX2FjdGl2ZUNhbWVyYS5vcmlnaW5EaXN0YW5jZTp0aGlzLl9tYXhEaXN0YW5jZT10aGlzLl9hY3RpdmVDYW1lcmEub3JpZ2luRGlzdGFuY2UrdGhpcy5fbWFwVmlldy5fZmxvb3JIZWlnaHQqKGUubGVuZ3RoLTEpLHRoaXMuX21pbkRpc3RhbmNlPj10aGlzLl9tYXhEaXN0YW5jZSYmKHRoaXMuX21pbkRpc3RhbmNlPS42KnRoaXMuX21heERpc3RhbmNlKSx0aGlzLl9wb3NpdGlvbjAuc2V0Wih0aGlzLl9jYW1lcmEucG9zaXRpb24ueiksdGhpcy5fY2FsY3VsYXRlQ2FtZXJhWigpLHRoaXMudXBkYXRlKCl9fSx7a2V5OlwiZGlzcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwibW92ZVN0YXJ0XCIsdGhpcy5fbW92ZVN0YXJ0KSx0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9mZihcIm1vdmVFbmRcIix0aGlzLl9tb3ZlRW5kKSx0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9mZihcIm1vdmVcIix0aGlzLl9tb3ZlKSx0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9mZihcInJvdGF0ZVN0YXJ0XCIsdGhpcy5fcm90YXRlU3RhcnQpLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwicm90YXRlRW5kXCIsdGhpcy5fcm90YXRlRW5kKSx0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9mZihcInJvdGF0ZVwiLHRoaXMuX3JvdGF0ZSksdGhpcy5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5vZmYoXCJza2V3U3RhcnRcIix0aGlzLl9za2V3U3RhcnQpLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwic2tld0VuZFwiLHRoaXMuX3NrZXdFbmQpLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwic2tld1wiLHRoaXMuX3NrZXcpLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwiZG91YmxlVGFwXCIsdGhpcy5fZG91YmxlVGFwWm9vbSksdGhpcy5fbWFwVmlldy5vZmYoXCJjaGFuZ2VQbGFuYXJHcmFwaFwiLHRoaXMuX2NoYW5nZVBsYW5hckdyYXBoKSx0aGlzLl9hY3RpdmVDYW1lcmE9bnVsbCx0aGlzLl9jYW1lcmE9bnVsbCx0aGlzLl9tYXBWaWV3PW51bGwsdGhpcy5fc2tld01hdHJpeEFuZ2xlPW51bGwsdGhpcy5fcm90YXRlTWF0cml4QW5nbGU9bnVsbCx0aGlzfX0se2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0PXRoaXMuX3RhcmdldDAsdGhpcy5fYWN0aXZlQ2FtZXJhLnBvc2l0aW9uPXRoaXMuX3Bvc2l0aW9uMCx0aGlzLl9hY3RpdmVDYW1lcmEudXA9bmV3IGYuVmVjdG9yMygwLDEsMCksdGhpcy5fY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKSx0aGlzLnVwZGF0ZSgpLHRoaXN9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jYW1lcmEucG9zaXRpb247dGhpcy5fb2Zmc2V0LmNvcHkodCkuc3ViKHRoaXMuX3RhcmdldCksdGhpcy5fb2Zmc2V0LmFwcGx5UXVhdGVybmlvbih0aGlzLl9xdWF0KSx0aGlzLl9zcGhlcmljYWwuc2V0RnJvbVZlY3RvcjModGhpcy5fb2Zmc2V0KSx0aGlzLl9zcGhlcmljYWwubWFrZVNhZmUoKSx0aGlzLl9zcGhlcmljYWwucmFkaXVzKj10aGlzLl9zY2FsZSx0aGlzLl9zcGhlcmljYWwucmFkaXVzPU1hdGgubWF4KHRoaXMuX21pbkRpc3RhbmNlLE1hdGgubWluKHRoaXMuX21heERpc3RhbmNlLHRoaXMuX3NwaGVyaWNhbC5yYWRpdXMpKSwxIT09dGhpcy5fc2NhbGUmJih0aGlzLl9zcGhlcmljYWwucmFkaXVzPj10aGlzLl9tYXhEaXN0YW5jZT90aGlzLl9jaGFuZ2Vab29tU3RhdHVzKDEpOnRoaXMuX3NwaGVyaWNhbC5yYWRpdXM8PXRoaXMuX21pbkRpc3RhbmNlP3RoaXMuX2NoYW5nZVpvb21TdGF0dXMoMik6dGhpcy5fY2hhbmdlWm9vbVN0YXR1cygwKSk7dmFyIGU9dGhpcy5fdGFyZ2V0LmNsb25lKCk7cmV0dXJuIGUuYWRkKHRoaXMuX3Bhbk9mZnNldCksdGhpcy5fYm91bmQmJnRoaXMuX2JvdW5kLmNvbnRhaW5zUG9pbnQoZSkmJnRoaXMuX3RhcmdldC5jb3B5KGUpLHRoaXMuX29mZnNldC5zZXRGcm9tU3BoZXJpY2FsKHRoaXMuX3NwaGVyaWNhbCksdGhpcy5fb2Zmc2V0LmFwcGx5UXVhdGVybmlvbih0aGlzLl9xdWF0SW52ZXJzZSksdC5jb3B5KHRoaXMuX3RhcmdldCkuYWRkKHRoaXMuX29mZnNldCksdGhpcy5fYWN0aXZlQ2FtZXJhLnRhcmdldD10aGlzLl90YXJnZXQsdGhpcy5fY2FtZXJhLmxvb2tBdCh0aGlzLl90YXJnZXQpLHRoaXMuX2N1ckRpc3RhbmNlPXQuZGlzdGFuY2VUbyh0aGlzLl90YXJnZXQpLHRoaXMuX3NwaGVyaWNhbERlbHRhLnNldCgwLDAsMCksdGhpcy5fc2NhbGU9MSx0aGlzLl9wYW5PZmZzZXQuc2V0KDAsMCwwKSx0aGlzLl96b29tQ2hhbmdlZHx8dGhpcy5fbGFzdFBvc2l0aW9uLmRpc3RhbmNlVG9TcXVhcmVkKHRoaXMuX2NhbWVyYS5wb3NpdGlvbik+dGhpcy5fRVBTfHw4KigxLXRoaXMuX2xhc3RRdWF0ZXJuaW9uLmRvdCh0aGlzLl9jYW1lcmEucXVhdGVybmlvbikpPnRoaXMuX0VQUz8odGhpcy5fbGFzdFBvc2l0aW9uLmNvcHkodGhpcy5fY2FtZXJhLnBvc2l0aW9uKSx0aGlzLl9sYXN0UXVhdGVybmlvbi5jb3B5KHRoaXMuX2NhbWVyYS5xdWF0ZXJuaW9uKSx0aGlzLl96b29tQ2hhbmdlZD0hMSwhMCk6KHRoaXMuX2xhc3RQb3NpdGlvbi5jb3B5KHRoaXMuX2NhbWVyYS5wb3NpdGlvbiksITEpfX0se2tleTpcImVuYWJsZVZlcnRpY2FsTW92ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZVZlcnRpY2FsTW92ZT0hMCx0aGlzfX0se2tleTpcImRpc2FibGVWZXJ0aWNhbE1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVWZXJ0aWNhbE1vdmU9ITEsdGhpc319LHtrZXk6XCJtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MCxpPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scj0hKGFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdKXx8YXJndW1lbnRzWzRdLG89IShhcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XSl8fGFyZ3VtZW50c1s1XSxhPW47aWYoRSs9dCxTKz1lLEU+MzAwKXJldHVybiBFPTMwMDtpZihFPC0zMDApcmV0dXJuIEU9LTMwMDtpZihTPjUwMClyZXR1cm4gUz01MDA7aWYoUzwtNTAwKXJldHVybiBTPS01MDA7YT10aGlzLl9lbmFibGVWZXJ0aWNhbE1vdmU9PT0hMT8wOm47dmFyIHM9dGhpcy5fY2FtZXJhLnBvc2l0aW9uLHU9KG5ldyBmLlZlY3RvcjMpLmNvcHkocykuc3ViKHRoaXMuX3RhcmdldCksbD11Lmxlbmd0aCgpO2lmKGwqPU1hdGgudGFuKHRoaXMuX2NhbWVyYS5mb3YvMip3KSx0aGlzLl9tb3ZlTGVmdCgyKnQqbC90aGlzLl9tYXBWaWV3LmhlaWdodCx0aGlzLl9jYW1lcmEubWF0cml4KSx0aGlzLl9tb3ZlRm9yd2FyZCgyKmUqbC90aGlzLl9tYXBWaWV3LmhlaWdodCx0aGlzLl9jYW1lcmEubWF0cml4KSx0aGlzLl9jYW1lcmEucG9zaXRpb24uei09YSx0aGlzLl90YXJnZXQuei09YSxpJiZ0aGlzLnVwZGF0ZSgpLHImJnRoaXMuX21hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbihtLkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApLG8pe3ZhciBjPW5ldyB2LmRlZmF1bHQ7Yy50eXBlPVwiY2FtZXJhQ29udHJvbFwiLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIuZW1pdChcIm1vdmVFbmRcIixjKX1yZXR1cm4gdGhpc319LHtrZXk6XCJtb3ZlVG9Qb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOm51bGwsaT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxvPSEoYXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0pfHxhcmd1bWVudHNbNV0sYT10LXRoaXMuX3RhcmdldC54LHM9ZS10aGlzLl90YXJnZXQueTtpZih0aGlzLl9lbmFibGVWZXJ0aWNhbE1vdmU9PT0hMCYmKDAsYi5pc1ByZXNlbnQpKG4pKXt2YXIgdT1uLXRoaXMuX3RhcmdldC56O3RoaXMuX3Bhbk9mZnNldC5zZXQoYSxzLHUpfWVsc2UgdGhpcy5fcGFuT2Zmc2V0LnNldFgoYSksdGhpcy5fcGFuT2Zmc2V0LnNldFkocyk7aWYoaSYmdGhpcy51cGRhdGUoKSxyJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSxvKXt2YXIgbD1uZXcgdi5kZWZhdWx0O2wudHlwZT1cImNhbWVyYUNvbnRyb2xcIix0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLmVtaXQoXCJtb3ZlRW5kXCIsbCl9cmV0dXJuIHRoaXN9fSx7a2V5OlwiZml0Qm91bmRzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjEsbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxyPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0sbz0hKGFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdKXx8YXJndW1lbnRzWzVdLGE9YXJndW1lbnRzLmxlbmd0aD42JiZ2b2lkIDAhPT1hcmd1bWVudHNbNl0mJmFyZ3VtZW50c1s2XSxzPSEoYXJndW1lbnRzLmxlbmd0aD43JiZ2b2lkIDAhPT1hcmd1bWVudHNbN10pfHxhcmd1bWVudHNbN107aWYoNCE9PXQubGVuZ3RoJiY2IT09dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBib3VuZHNcIik7dmFyIHU9dGhpcy5nZXRSb3RhdGUoKSxsPXRoaXMuZ2V0U2tldygpO3JldHVybiB0aGlzLnNrZXdUbyguMSxpLHIsbyksdGhpcy5fZml0Qm91bmRzSW5WZXJ0aWNhbFZpZXcodCxsLGUsbixpLHIsbyxhKSx0aGlzLnNrZXdUbyhsLGkscixvKSxzfHx0aGlzLnJvdGF0ZVRvKHRoaXMuX3RhcmdldC54LHRoaXMuX3RhcmdldC55LHUsaSxyLG8pLHRoaXN9fSx7a2V5OlwiX2ZpdEJvdW5kc0luVmVydGljYWxWaWV3XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MSxpPSghKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLCEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0pLHI9IShhcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XSl8fGFyZ3VtZW50c1s1XSxvPXRoaXMsYT0hKGFyZ3VtZW50cy5sZW5ndGg+NiYmdm9pZCAwIT09YXJndW1lbnRzWzZdKXx8YXJndW1lbnRzWzZdLHM9YXJndW1lbnRzLmxlbmd0aD43JiZ2b2lkIDAhPT1hcmd1bWVudHNbN10mJmFyZ3VtZW50c1s3XSx1PXQuc2xpY2UoKSxsPXRoaXMuX21hcFZpZXcuYWN0aXZlQ2FtZXJhO2wuY2FtZXJhLnVwZGF0ZU1hdHJpeCgpLGwuY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCksND09PXQubGVuZ3RoJiYodT1bdFswXSx0WzFdLDAsdFsyXSx0WzNdLDBdKTt2YXIgYz0odVswXSt1WzNdKS8yLGg9KHVbMV0rdVs0XSkvMixkPSh1WzJdK3VbNV0pLzI7dGhpcy5tb3ZlVG9Qb2ludChjLGgsZCxpLHIsYSksdGhpcy5yb3RhdGVUbyhjLGgsMCk7dmFyIHA9bmV3IGYuVmVjdG9yMyh1WzBdLWMsdVsxXS1oLHVbMl0tZCksZz1uZXcgZi5WZWN0b3IzKHVbM10tYyx1WzRdLWgsdVs1XS1kKSx5PWwudG9TY3JlZW5Db29yZGluYXRlKHAueCxwLnkscC56KSxiPWwudG9TY3JlZW5Db29yZGluYXRlKHAueCxnLnkscC56KSx4PWwudG9TY3JlZW5Db29yZGluYXRlKGcueCxwLnkscC56KSx3PWwudG9TY3JlZW5Db29yZGluYXRlKGcueCxnLnkscC56KSxFPWwudG9TY3JlZW5Db29yZGluYXRlKHAueCxwLnksZy56KSxTPWwudG9TY3JlZW5Db29yZGluYXRlKHAueCxnLnksZy56KSxNPWwudG9TY3JlZW5Db29yZGluYXRlKGcueCxwLnksZy56KSxDPWwudG9TY3JlZW5Db29yZGluYXRlKGcueCxnLnksZy56KSxJPU1hdGgubWluKHkueCxiLngseC54LHcueCxFLngsUy54LE0ueCxDLngpLE89TWF0aC5tYXgoeS54LGIueCx4Lngsdy54LEUueCxTLngsTS54LEMueCksVD1NYXRoLm1pbih5LnksYi55LHgueSx3LnksRS55LFMueSxNLnksQy55KSxQPU1hdGgubWF4KHkueSxiLnkseC55LHcueSxFLnksUy55LE0ueSxDLnkpLEE9KE8tSSkvdGhpcy5fbWFwVmlldy53aWR0aCxMPShQLVQpL3RoaXMuX21hcFZpZXcuaGVpZ2h0LE49TWF0aC5tYXgoQSxMKSxrPXRoaXMuX2NhbWVyYS5wb3NpdGlvbi5jbG9uZSgpLFI9dGhpcy5fdGFyZ2V0LEQ9ay5jbG9uZSgpLnN1YihSKS5tdWx0aXBseVNjYWxhcihOL24pLEY9Ui5jbG9uZSgpLmFkZChEKTtpZihzJiZpKXt2YXIgQj1uZXcgZi5WZWN0b3IzO18uZGVmYXVsdC5nZXRJbnN0YW5jZSgpLm9mTnVtYmVyKDEsMCw1MDApLm9uKFwidXBkYXRlXCIsZnVuY3Rpb24odCxuKXt2YXIgaT1uLm51bTtCLnNldFgoaSprLngrKDEtaSkqRi54KSxCLnNldFkoaSprLnkrKDEtaSkqRi55KSxCLnNldFooaSprLnorKDEtaSkqRi56KSxvLl9jYW1lcmEucG9zaXRpb24uY29weShCKSxvLnNrZXdUbyhlLCEwLCExLCExKX0pLm9uKFwic3RhcnRcIixmdW5jdGlvbigpe30pLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbigpe2lmKHImJm8uX21hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbihtLkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApLGEpe3ZhciB0PW5ldyB2LmRlZmF1bHQ7dC50eXBlPVwiY2FtZXJhQ29udHJvbFwiLG8uX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIuZW1pdChcInpvb21FbmRcIix0KX19KS5zdGFydCgpfWVsc2UgaWYodGhpcy5fY2FtZXJhLnBvc2l0aW9uLmNvcHkoRiksaSYmdGhpcy51cGRhdGUoKSxyJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSxhKXt2YXIgaj1uZXcgdi5kZWZhdWx0O2oudHlwZT1cImNhbWVyYUNvbnRyb2xcIix0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLmVtaXQoXCJ6b29tRW5kXCIsail9cmV0dXJuIHRoaXN9fSx7a2V5Olwiem9vbVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXTtpZih0aGlzLl9zY2FsZT10LGUmJnRoaXMudXBkYXRlKCksbiYmdGhpcy5fbWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIuYW5pbWF0aW9uKG0uQ0FUeXBlLk9wYWNpdHkpLnVwZGF0ZUNvbGxpc2lvbighMCksaSl7dmFyIHI9bmV3IHYuZGVmYXVsdDtyLnR5cGU9XCJjYW1lcmFDb250cm9sXCIsdGhpcy5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5lbWl0KFwiem9vbUVuZFwiLHIpfXJldHVybiB0aGlzfX0se2tleTpcInpvb21CeUZvY2FsTGVuZ3RoXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0saT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9bmV3IGYuVmVjdG9yMztpZihyLnN1YlZlY3RvcnModGhpcy5fY2FtZXJhLnBvc2l0aW9uLHRoaXMuX3RhcmdldCksdGhpcy5fc2NhbGU9dC9yLmxlbmd0aCgpLGUmJnRoaXMudXBkYXRlKCksbiYmdGhpcy5fbWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIuYW5pbWF0aW9uKG0uQ0FUeXBlLk9wYWNpdHkpLnVwZGF0ZUNvbGxpc2lvbighMCksaSl7dmFyIG89bmV3IHYuZGVmYXVsdDtvLnR5cGU9XCJjYW1lcmFDb250cm9sXCIsdGhpcy5fbWFwVmlldy5nZXN0dXJlTWFuYWdlci5lbWl0KFwiem9vbUVuZFwiLG8pfXJldHVybiB0aGlzfX0se2tleTpcInNrZXdUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxyPXQ7dD50aGlzLl9tYXhTa2V3QW5nbGUrLjAxP3I9dGhpcy5fbWF4U2tld0FuZ2xlKy4wMTp0PHRoaXMuX21pblNrZXdBbmdsZSsuMDEmJihyPXRoaXMuX21pblNrZXdBbmdsZSsuMDEpLDA9PT1yJiYocj0uMDEpO3ZhciBvPXRoaXMuX2NhbWVyYS5wb3NpdGlvbixhPXRoaXMuX3RhcmdldCxzPW8uY2xvbmUoKS5zdWIoYSksdT1hLmNsb25lKCkuc2V0WihzLmxlbmd0aCgpK2Eueik7cz11LnN1YihhKSx0aGlzLl9jYW1lcmEudXAuc2V0WigwKTt2YXIgbD1uZXcgZi5WZWN0b3IzKHRoaXMuX2NhbWVyYS51cC55LC10aGlzLl9jYW1lcmEudXAueCwwKS5ub3JtYWxpemUoKTtpZih0aGlzLl9za2V3TWF0cml4QW5nbGUubWFrZVJvdGF0aW9uQXhpcyhsLHIqdykscy5hcHBseU1hdHJpeDQodGhpcy5fc2tld01hdHJpeEFuZ2xlKSxvLmNvcHkoYSkuYWRkKHMpLHRoaXMuX2NhbWVyYS51cC5hcHBseU1hdHJpeDQodGhpcy5fc2tld01hdHJpeEFuZ2xlKSxlJiZ0aGlzLnVwZGF0ZSgpLG4mJnRoaXMuX21hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbihtLkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApLGkpe3ZhciBjPW5ldyB2LmRlZmF1bHQ7Yy50eXBlPVwiY2FtZXJhQ29udHJvbFwiLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIuZW1pdChcInNrZXdFbmRcIixjKX1yZXR1cm4gdGhpc319LHtrZXk6XCJnZXRTa2V3XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jYW1lcmEucG9zaXRpb24uY2xvbmUoKS5zdWIodGhpcy5fdGFyZ2V0KS5ub3JtYWxpemUoKTtyZXR1cm4gdC5hbmdsZVRvKHRoaXMuX3JvdGF0ZUF4aXMpKnh9fSx7a2V5Olwic2tld1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0sbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxyPXRoaXMuX2NhbWVyYS5wb3NpdGlvbixvPXRoaXMuX3RhcmdldCxhPShuZXcgZi5WZWN0b3IzKS5jb3B5KHIpLnN1YihvKSxzPWEuYW5nbGVUbyh0aGlzLl9yb3RhdGVBeGlzKSp4LHU9dDtpZih1K3M+dGhpcy5fbWF4U2tld0FuZ2xlKy4wMXx8dStzPHRoaXMuX21pblNrZXdBbmdsZSsuMDEpdT0wO2Vsc2V7dmFyIGw9dGhpcy5fY2FtZXJhLnVwLmNsb25lKCk7bC5jcm9zcyhhKS5ub3JtYWxpemUoKSx0aGlzLl9za2V3TWF0cml4QW5nbGUubWFrZVJvdGF0aW9uQXhpcyhsLHUqdyksYS5hcHBseU1hdHJpeDQodGhpcy5fc2tld01hdHJpeEFuZ2xlKSxyLmNvcHkobykuYWRkKGEpLHRoaXMuX2NhbWVyYS51cC5hcHBseU1hdHJpeDQodGhpcy5fc2tld01hdHJpeEFuZ2xlKX1pZihlJiZ0aGlzLnVwZGF0ZSgpLG4mJnRoaXMuX21hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbihtLkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApLGkpe3ZhciBjPW5ldyB2LmRlZmF1bHQ7Yy50eXBlPVwiY2FtZXJhQ29udHJvbFwiLHRoaXMuX21hcFZpZXcuZ2VzdHVyZU1hbmFnZXIuZW1pdChcInNrZXdFbmRcIixjKX1yZXR1cm4gdGhpc319LHtrZXk6XCJnZXRSb3RhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NhbWVyYS5wb3NpdGlvbi5jbG9uZSgpLnN1Yih0aGlzLl90YXJnZXQpLGU9dGhpcy5fY2FtZXJhLnVwLmNsb25lKCkuY3Jvc3ModCkubm9ybWFsaXplKCk7cmV0dXJuIDM2MC10aGlzLl9nZXRBbmdsZShlKX19LHtrZXk6XCJyb3RhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxyPSEoYXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0pfHxhcmd1bWVudHNbNF0sbz0hKGFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdKXx8YXJndW1lbnRzWzVdO3RoaXMuX3JvdGF0ZUNlbnRlci5zZXQodCxlLHRoaXMuX3RhcmdldC56KSx0aGlzLl9yb3RhdGVNYXRyaXhBbmdsZS5tYWtlUm90YXRpb25BeGlzKHRoaXMuX3JvdGF0ZUF4aXMsbip3KSx0aGlzLl9yb3RhdGVNYXRyaXhBbmdsZS5zZXRQb3NpdGlvbih0aGlzLl9yb3RhdGVDZW50ZXIpO3ZhciBhPW5ldyBmLlZlY3RvcjMscz1uZXcgZi5WZWN0b3IzO2Euc3ViVmVjdG9ycyh0aGlzLl9jYW1lcmEucG9zaXRpb24sdGhpcy5fcm90YXRlQ2VudGVyKSxhLnNldFooMCkscy5zdWJWZWN0b3JzKHRoaXMuX3RhcmdldCx0aGlzLl9yb3RhdGVDZW50ZXIpLHMuc2V0WigwKSxzPXAuZGVmYXVsdC5nZXRSZWxDb29yZE9uUGxhbmUocyxhLG5ldyBmLlZlY3RvcjMoLWEueSxhLngsMCkpLHRoaXMuX3JvdGF0ZVBhbi5zdWJWZWN0b3JzKHRoaXMuX2NhbWVyYS5wb3NpdGlvbix0aGlzLl9yb3RhdGVDZW50ZXIpLHRoaXMuX3JvdGF0ZVBhbi5hcHBseU1hdHJpeDQodGhpcy5fcm90YXRlTWF0cml4QW5nbGUpLHRoaXMuX2NhbWVyYS5wb3NpdGlvbi5jb3B5KHRoaXMuX3JvdGF0ZVBhbiksYS5zdWJWZWN0b3JzKHRoaXMuX2NhbWVyYS5wb3NpdGlvbix0aGlzLl9yb3RhdGVDZW50ZXIpLGEuc2V0WigwKSx0aGlzLl90YXJnZXQ9cC5kZWZhdWx0LmRpcmVjdGlvbmFsQWRkKHRoaXMuX3JvdGF0ZUNlbnRlcixhLHMueCksdGhpcy5fdGFyZ2V0PXAuZGVmYXVsdC5kaXJlY3Rpb25hbEFkZCh0aGlzLl90YXJnZXQsbmV3IGYuVmVjdG9yMygtYS55LGEueCwwKSxzLnkpLHRoaXMuX2FjdGl2ZUNhbWVyYS50YXJnZXQ9dGhpcy5fdGFyZ2V0O3ZhciB1PW5ldyBmLlZlY3RvcjM7aWYodS5zdWJWZWN0b3JzKHRoaXMuX2NhbWVyYS5wb3NpdGlvbix0aGlzLl90YXJnZXQpLE1hdGguYWJzKHUueCk8MWUtNCYmTWF0aC5hYnModS55KTwxZS00P3RoaXMuX2NhbWVyYS51cC5hcHBseU1hdHJpeDQodGhpcy5fcm90YXRlTWF0cml4QW5nbGUpOih0aGlzLl9jYW1lcmEudXAueD0tdS54LHRoaXMuX2NhbWVyYS51cC55PS11LnksdGhpcy5fY2FtZXJhLnVwLno9KHUueCp1LngrdS55KnUueSkvdS56LHRoaXMuX2NhbWVyYS51cC5ub3JtYWxpemUoKSksaSYmdGhpcy51cGRhdGUoKSxyJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24obS5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSxvKXt2YXIgbD1uZXcgdi5kZWZhdWx0O2wudHlwZT1cImNhbWVyYUNvbnRyb2xcIix0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLmVtaXQoXCJyb3RhdGVFbmRcIixsKX1yZXR1cm4gdGhpc319LHtrZXk6XCJyb3RhdGVUb1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLHI9IShhcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XSl8fGFyZ3VtZW50c1s0XSxvPSEoYXJndW1lbnRzLmxlbmd0aD41JiZ2b2lkIDAhPT1hcmd1bWVudHNbNV0pfHxhcmd1bWVudHNbNV07aWYodGhpcy5yb3RhdGUodCxlLC10aGlzLmdldFJvdGF0ZSgpLCExLCExLCExKSx0aGlzLnJvdGF0ZSh0LGUsbiwhMSwhMSwhMSksaSYmdGhpcy51cGRhdGUoKSxyJiZ0aGlzLl9tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci51cGRhdGVDb2xsaXNpb24oKSxvKXt2YXIgYT1uZXcgdi5kZWZhdWx0O2EudHlwZT1cImNhbWVyYUNvbnRyb2xcIix0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLmVtaXQoXCJyb3RhdGVFbmRcIixhKX1yZXR1cm4gdGhpc319LHtrZXk6XCJfY2hhbmdlWm9vbVN0YXR1c1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0PT09dGhpcy5fY3VyWm9vbVN0YXR1cz9udWxsOih0aGlzLl9jdXJab29tU3RhdHVzPXQsdGhpcy5lbWl0KFwiY2hhbmdlWm9vbVN0YXR1c1wiLHRoaXMsdGhpcy5fY3VyWm9vbVN0YXR1cyksdGhpcyl9fSx7a2V5OlwiX21vdmVMZWZ0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgZi5WZWN0b3IzO3JldHVybiBuLnNldEZyb21NYXRyaXhDb2x1bW4oZSwwKSxuLm11bHRpcGx5U2NhbGFyKC10KSx0aGlzLl9wYW5PZmZzZXQuYWRkKG4pLHRoaXMuX3Bhbk9mZnNldC56PTAsdGhpc319LHtrZXk6XCJfbW92ZUZvcndhcmRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBmLlZlY3RvcjM7cmV0dXJuIG4uc2V0RnJvbU1hdHJpeENvbHVtbihlLDEpLG4ubXVsdGlwbHlTY2FsYXIodCksdGhpcy5fcGFuT2Zmc2V0LmFkZChuKSx0aGlzLl9wYW5PZmZzZXQuej0wLHRoaXN9fSx7a2V5OlwiX3NldEZyb21TcGhlcmljYWxcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGguc2luKGUucGhpKSplLnJhZGl1cztyZXR1cm4gdC55PW4qTWF0aC5zaW4oZS50aGV0YSksdC56PU1hdGguY29zKGUucGhpKSplLnJhZGl1cyx0Lng9bipNYXRoLmNvcyhlLnRoZXRhKSx0fX0se2tleTpcIl9jYWxjdWxhdGVDYW1lcmFaXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5fY3VyRGlzdGFuY2UpcmV0dXJuIG51bGw7dmFyIHQ9dGhpcy5fY2FtZXJhLnBvc2l0aW9uLGU9dC5kaXN0YW5jZVRvKHRoaXMuX3RhcmdldCk7cmV0dXJuIGU+dGhpcy5fbWF4RGlzdGFuY2UmJihlPXRoaXMuX21heERpc3RhbmNlKSxlPHRoaXMuX21pbkRpc3RhbmNlJiYoZT10aGlzLl9taW5EaXN0YW5jZSksdGhpcy5fb2Zmc2V0LmNvcHkodGhpcy5fbGFzdFBvc2l0aW9uKS5zdWIodGhpcy5fdGFyZ2V0KSx0aGlzLl9vZmZzZXQubm9ybWFsaXplKCkubXVsdGlwbHlTY2FsYXIoZSksdC5jb3B5KHRoaXMuX3RhcmdldCkuYWRkKHRoaXMuX29mZnNldCksdGhpc319LHtrZXk6XCJfc2V0RnJvbVZlY3RvcjNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnJhZGl1cz1lLmxlbmd0aCgpLDA9PT10LnJhZGl1cz8odC50aGV0YT0wLHQucGhpPTApOih0LnRoZXRhPU1hdGguYXRhbjIoZS55LGUueCksdC5waGk9TWF0aC5hY29zKGYuTWF0aC5jbGFtcChlLnovdC5yYWRpdXMsLTEsMSkpKSx0fX0se2tleTpcIl9nZXRWZWN0b3JBbmdsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5sZW5ndGgoKSxpPWUubGVuZ3RoKCk7cmV0dXJuIDA9PT1ufHwwPT09aT8wOk1hdGguYWNvcyhlLmRvdCh0KS8obippKSkqeH19LHtrZXk6XCJfZ2V0QW5nbGUxXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoMD09PXQueilyZXR1cm4gdC55PjA/MTgwOjA7aWYoMD09PXQueSlyZXR1cm4gdC56PjA/OTA6MjcwO3ZhciBlPWYuTWF0aC5jbGFtcCh0LnovTWF0aC5zcXJ0KHQueSp0LnkrdC56KnQueiksLTEsMSksbj1NYXRoLmF0YW4oTWF0aC5zcXJ0KDEtZSplKS9lKSp4O3JldHVybiB0Lnk8MCYmdC56PDA/bisyNzA6dC55PDAmJnQuej4wP24rOTA6dC55PjAmJnQuej4wPzkwLW46dC55PjAmJnQuejwwPzI3MC1uOm59fSx7a2V5OlwiX2dldEFuZ2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoMD09PXQueSlyZXR1cm4gdC54PDA/MTgwOjA7aWYoMD09PXQueClyZXR1cm4gdC55PDA/OTA6MjcwO3ZhciBlPWYuTWF0aC5jbGFtcCh0LnkvTWF0aC5zcXJ0KHQueCp0LngrdC55KnQueSksLTEsMSksbj1NYXRoLmF0YW4oTWF0aC5zcXJ0KDEtZSplKS9lKSp4O3JldHVybiB0Lng+MCYmdC55PjA/bisyNzA6dC54PjAmJnQueTwwP24rOTA6dC54PDAmJnQueTwwPzkwLW46dC54PDAmJnQueT4wPzI3MC1uOm59fSx7a2V5OlwibWluRGlzdGFuY2VcIixzZXQ6ZnVuY3Rpb24odCl7dD49MCYmdDx0aGlzLl9tYXhEaXN0YW5jZSYmKHRoaXMuX21pbkRpc3RhbmNlPXQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluRGlzdGFuY2V9fSx7a2V5OlwibWF4RGlzdGFuY2VcIixzZXQ6ZnVuY3Rpb24odCl7dD50aGlzLl9taW5EaXN0YW5jZSYmKHRoaXMuX21heERpc3RhbmNlPXQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4RGlzdGFuY2V9fSx7a2V5OlwibWluU2tld0FuZ2xlXCIsc2V0OmZ1bmN0aW9uKHQpe3Q+PTAmJnQ8PXRoaXMuX21heFNrZXdBbmdsZSYmKHRoaXMuX21pblNrZXdBbmdsZT10LHRoaXMuZ2V0U2tldygpPHRoaXMuX21pblNrZXdBbmdsZSYmdGhpcy5za2V3VG8odGhpcy5fbWluU2tld0FuZ2xlKSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW5Ta2V3QW5nbGV9fSx7a2V5OlwibWF4U2tld0FuZ2xlXCIsc2V0OmZ1bmN0aW9uKHQpe3Q8PTkwJiZ0Pj10aGlzLl9taW5Ta2V3QW5nbGUmJih0aGlzLl9tYXhTa2V3QW5nbGU9dCx0aGlzLmdldFNrZXcoKT50aGlzLl9tYXhTa2V3QW5nbGUmJnRoaXMuc2tld1RvKHRoaXMuX21heFNrZXdBbmdsZSkpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4U2tld0FuZ2xlfX0se2tleTpcImJvdW5kU2NhbGVcIixzZXQ6ZnVuY3Rpb24odCl7aWYoaXNOYU4odCl8fCFpc0Zpbml0ZSh0KXx8dDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJvdW5kIHNjYWxlXCIpO3RoaXMuX2JvdW5kU2NhbGU9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvdW5kU2NhbGV9fSx7a2V5OlwidGFyZ2V0XCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RhcmdldD10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0fX0se2tleTpcImZvY2FsTGVuZ3RoXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGYuVmVjdG9yMztyZXR1cm4gdC5zdWJWZWN0b3JzKHRoaXMuX2NhbWVyYS5wb3NpdGlvbix0aGlzLl90YXJnZXQpLmxlbmd0aCgpfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1NfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5UaHJlZUNhbWVyYT12b2lkIDA7dmFyIHI9bigyMSksbz1pKHIpO2UuVGhyZWVDYW1lcmE9by5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDExKSxoPWkoYyksZj1uKDcpLGQ9big2KSxwPWkoZCksZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3IodGhpcyxlKTt2YXIgbj10Lm5hbWU/XCJjb21wYXNzLVwiK3QubmFtZTpcImNvbXBhc3NcIixpPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLG4scyh7cG9zaXRpb246XCJ0b3ByaWdodFwifSx0KSkpO3JldHVybiBpLl9jdXJyZW50QW5nbGU9bnVsbCxpLl9kaXNhYmxlZD0hMCxpLl9lbGVtZW50fHwoaS5fZWxlbWVudD1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcIm5nci1jb21wYXNzXCIpLGkuX2J1dHRvbj1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcImNvbXBhc3MtYnV0dG9uXCIsaS5fZWxlbWVudCksaS5fZGl2Q29tcGFzcz1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcImNvbXBhc3MtaWNvblwiLGkuX2J1dHRvbikpLGkucm90YXRlQ29tcGFzcz1pLnJvdGF0ZUNvbXBhc3MuYmluZChpKSxpLl9vbkNsaWNrPWkuX29uQ2xpY2suYmluZChpKSxpfXJldHVybiBhKGUsdCksdShlLFt7a2V5OlwiX29uQWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX29uQWRkXCIsdGhpcykuY2FsbCh0aGlzLHQpLHRoaXMuX2Rpc2FibGVkPSExLHRoaXMuX21hcC5nZXN0dXJlTWFuYWdlci5vbihcInJvdGF0ZVwiLFwicm90YXRlRW5kXCIsdGhpcy5yb3RhdGVDb21wYXNzKSx0aGlzLl9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljayksdGhpc319LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfb25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fZGlzYWJsZWQ9ITAsdGhpcy5fbWFwLmdlc3R1cmVNYW5hZ2VyLm9mZihcInJvdGF0ZVwiLFwicm90YXRlRW5kXCIsdGhpcy5yb3RhdGVDb21wYXNzKSx0aGlzLl9idXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljayksdGhpc319LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9kaXNhYmxlZD0hMH19LHtrZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2Rpc2FibGVkPSExfX0se2tleTpcInJvdGF0ZUNvbXBhc3NcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX21hcC5hY3RpdmVDb250cm9sKXt2YXIgdD10aGlzLl9tYXAuYWN0aXZlQ29udHJvbC5nZXRSb3RhdGUoKTt0aGlzLl9jdXJyZW50QW5nbGU9dCx0aGlzLm9uVXBkYXRlKHRoaXMuX2RpdkNvbXBhc3N8fHRoaXMuX2VsZW1lbnQsdCl9fX0se2tleTpcIm9uVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cInJvdGF0ZShcIitlK1wiZGVnKVwifX0se2tleTpcIm9uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcC5hY3RpdmVDb250cm9sLGU9dGhpcy5fY3VycmVudEFuZ2xlLG49ZT4xODA/MzYwOjA7cC5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZOdW1iZXIoZSxuLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbihlLG4pe3ZhciBpPW4ubnVtO3Qucm90YXRlVG8oMCwwLGksITAsITEsITEpfSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7dC5yb3RhdGVUbygwLDAsbiwhMCwhMCwhMCl9KS5zdGFydCgpfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9uQ2xpY2soKX19LHtrZXk6XCJnZXRDdXJyZW50QW5nbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50QW5nbGV9fV0pLGV9KGguZGVmYXVsdCk7ZS5kZWZhdWx0PWd9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9ZnVuY3Rpb24gdChlLG4saSl7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnQobyxuLGkpfWlmKFwidmFsdWVcImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGE9ci5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKGkpfSxjPW4oMjIpLGg9aShjKSxmPW4oNiksZD1pKGYpLHA9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyKHRoaXMsZSk7dmFyIG49byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMscyh7bmFtZTpcImRpbWVuc2lvblwiLGlubmVySFRNTDpcIjJEXCIsY2xhc3NOYW1lOlwidG9nZ2xlLWRpbWVuc2lvblwiLG1pblNrZXdBbmdsZTowLG1heFNrZXdBbmdsZTo2MH0sdCkpKTtyZXR1cm4gbi5fb25Ub2dnbGU9bi5fb25Ub2dnbGUuYmluZChuKSxufXJldHVybiBhKGUsdCksdShlLFt7a2V5OlwiX29uVG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3RlZCxuPXRoaXMuX21hcC5hY3RpdmVDb250cm9sLGk9dGhpcy5fb3B0aW9ucyxyPWkubWF4U2tld0FuZ2xlLG89aS5taW5Ta2V3QW5nbGUsYT10aGlzLl9idXR0b24scz1uLmdldFNrZXcoKSx1PTA7cmV0dXJuIGU/KGEuaW5uZXJIVE1MPVwiM0RcIix1PW8pOihhLmlubmVySFRNTD1cIjJEXCIsdT1yKSxkLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcihzLHUsMzAwKS5vbihcInVwZGF0ZVwiLGZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5udW07bi5za2V3VG8oaSwhMCwhMSwhMSl9KS5vbihcImNvbXBsZXRlXCIsZnVuY3Rpb24oKXtuLnNrZXdUbyh1LCEwLCEwLCEwKX0pLnN0YXJ0KCksdGhpc319LHtrZXk6XCJfb25BZGRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfb25BZGRcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5vbihcInRvZ2dsZVwiLHRoaXMuX29uVG9nZ2xlKSx0aGlzfX0se2tleTpcIl9vblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vblJlbW92ZVwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLm9mZihcInRvZ2dsZVwiLHRoaXMuX29uVG9nZ2xlKSx0aGlzfX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1wfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDIyKSxoPWkoYyksZj1uKDYpLGQ9aShmKSxwPW4oNyksZz1uKDMpLHY9e2NsYXNzTmFtZTpcIm5nci10b2dnbGUtZmFjaWxpdHlcIixzZWxlY3RlZERpc3BsYXk6XCJibG9ja1wiLGZsb29yQ29udHJvbE5hbWU6XCJtdWx0aUZsb29yXCIsYmx1ck9wYWNpdHk6LjMsYW5pbWF0aW9uOnt0eXBlOlwic2NhbGVcIixtaW5TY2FsZToyNSxtYXhTY2FsZTo1MH19LG09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cih0aGlzLGUpO3ZhciBpPSgwLGcuaXNBcnJheSkodCk/dDpbXSxhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHMoe30sdixuKSkpO2EuX25hbWU9YS5fb3B0aW9ucy5uYW1lP1wiZmFjaWxpdHktXCIrYS5fb3B0aW9ucy5uYW1lOlwiZmFjaWxpdHlcIixhLmZhY2lsaXR5Q29udGFpbmVyPXAuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImRpdlwiLFwibmdyLWZhY2lsaXR5LWNvbnRhaW5lclwiKSxhLmZhY2lsaXR5SXRlbXM9W107Zm9yKHZhciB1PWksbD1BcnJheS5pc0FycmF5KHUpLGM9MCx1PWw/dTp1W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaDtpZihsKXtpZihjPj11Lmxlbmd0aClicmVhaztoPXVbYysrXX1lbHNle2lmKGM9dS5uZXh0KCksYy5kb25lKWJyZWFrO2g9Yy52YWx1ZX12YXIgZj1oLGQ9cC5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJuZ3ItZmFjaWxpdHktYnV0dG9uXCIsYS5mYWNpbGl0eUNvbnRhaW5lciksbT1mLmlkLHk9Zi5iYWNrZ3JvdWRJbWFnZSxfPWYuaW5uZXJIVE1MLGI9Zi5jYXRlZ29yaWVzO2QuY2F0ZWdvcmllcz1iLG0mJihkLmlkPW0pLF8mJihkLmlubmVySFRNTD1fKSx5JiYoZC5zdHlsZVtcImJhY2tncm91bmQtaW1hZ2VcIl09XCJ1cmwoXCIrZi5iYWNrZ3JvdWRJbWFnZStcIilcIiksYS5mYWNpbGl0eUl0ZW1zLnB1c2goZCl9cmV0dXJuIGEuX2JsdXJPcGFjaXR5PWEuX29wdGlvbnMuYmx1ck9wYWNpdHksYS51bmJsdXI9ITEsYS5mYWNpbGl0eUFuaW1hdGlvbklkPTAsYS5mYWNpbGl0eUFuaW1hdGlvbkNvdW50cz17fSxhLm9uVG9nZ2xlPWEub25Ub2dnbGUuYmluZChhKSxhLm9uRmFjaWxpdHlDbGljaz1hLm9uRmFjaWxpdHlDbGljay5iaW5kKGEpLGF9cmV0dXJuIGEoZSx0KSx1KGUsW3trZXk6XCJfb25BZGRcIix2YWx1ZTpmdW5jdGlvbih0KXtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5mYWNpbGl0eUNvbnRhaW5lciksdGhpcy5vblRvZ2dsZSh7c2VsZWN0ZWQ6dGhpcy5fc2VsZWN0ZWQsdGFyZ2V0Q29udHJvbDp0aGlzfSksdGhpcy5vbihcInRvZ2dsZVwiLHRoaXMub25Ub2dnbGUpO2Zvcih2YXIgbj10aGlzLmZhY2lsaXR5SXRlbXMsaT1BcnJheS5pc0FycmF5KG4pLHI9MCxuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbztpZihpKXtpZihyPj1uLmxlbmd0aClicmVhaztvPW5bcisrXX1lbHNle2lmKHI9bi5uZXh0KCksci5kb25lKWJyZWFrO289ci52YWx1ZX12YXIgYT1vO2EuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkZhY2lsaXR5Q2xpY2ssITEpfXJldHVybiB0aGlzfX0se2tleTpcIl9vblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2woZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX29uUmVtb3ZlXCIsdGhpcykuY2FsbCh0aGlzLHQpLHRoaXMuX2NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZhY2lsaXR5Q29udGFpbmVyKSx0aGlzLm9mZihcInRvZ2dsZVwiLHRoaXMub25Ub2dnbGUpO2Zvcih2YXIgbj10aGlzLmZhY2lsaXR5SXRlbXMsaT1BcnJheS5pc0FycmF5KG4pLHI9MCxuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbztpZihpKXtpZihyPj1uLmxlbmd0aClicmVhaztvPW5bcisrXX1lbHNle2lmKHI9bi5uZXh0KCksci5kb25lKWJyZWFrO289ci52YWx1ZX12YXIgYT1vO2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkZhY2lsaXR5Q2xpY2spfXJldHVybiB0aGlzfX0se2tleTpcIm9uVG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3RlZDtyZXR1cm4gdGhpcy5mYWNpbGl0eUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5PWU/dGhpcy5fb3B0aW9ucy5zZWxlY3RlZERpc3BsYXk6XCJub25lXCIsdGhpc319LHtrZXk6XCJvbkZhY2lsaXR5Q2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldC5jYXRlZ29yaWVzO3JldHVybiBlJiZ0aGlzLl9pbml0RmFjaWxpdHlBbmltYXRpb25CeUNhdGVnb3J5KGUpLHRoaXN9fSx7a2V5OlwiX2luaXRGYWNpbGl0eUFuaW1hdGlvbkJ5Q2F0ZWdvcnlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fbWFwLGk9bi5jdXJyZW50UGxhbmFyR3JhcGhJZHMscj1uLmdldERvbUNvbnRyb2wodGhpcy5fb3B0aW9ucy5mbG9vckNvbnRyb2xOYW1lKSxvPXRoaXMuX29wdGlvbnMuYW5pbWF0aW9uLGE9by5taW5TY2FsZSxzPW8ubWF4U2NhbGU7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiRmFjaWxpdHlDb250cm9sOiBJbnZhbGlkIGZsb29yIGNvbnRyb2wgbmFtZVwiKTt2YXIgdT1yLmdldEN1cnJlbnRGbG9vcigpLGw9e21heENvdW50OmkubGVuZ3RoLGN1ckNvdW50OjB9LGM9dGhpcy5mYWNpbGl0eUFuaW1hdGlvbklkKys7dGhpcy5mYWNpbGl0eUFuaW1hdGlvbkNvdW50c1tjXT1sO2Zvcih2YXIgaD1pLGY9QXJyYXkuaXNBcnJheShoKSxkPTAsaD1mP2g6aFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHA7aWYoZil7aWYoZD49aC5sZW5ndGgpYnJlYWs7cD1oW2QrK119ZWxzZXtpZihkPWgubmV4dCgpLGQuZG9uZSlicmVhaztwPWQudmFsdWV9dmFyIGc9cCx2PW4uZ2V0TGF5ZXIoZykuZ2V0TGF5ZXIoXCJGYWNpbGl0eVwiKTtuLnNjZW5lTWFuYWdlci5zZXRWaXNpYmxlKHYsXCJjYXRlZ29yeVwiLHQsITApLG4uc2NlbmVNYW5hZ2VyLnNldE9wYWNpdHkodixcImNhdGVnb3J5XCIsdCx0aGlzLnVuYmx1cnx8Zz09PU51bWJlcih1KT8xOnRoaXMuYmx1ck9wYWNpdHkpLHRoaXMuX3N0YXJ0RmFjaWxpdHlBbmltYXRpb24odix0LGEscyxmdW5jdGlvbigpe3ZhciB0PWUuZmFjaWxpdHlBbmltYXRpb25Db3VudHNbY107dC5jdXJDb3VudCsrLHQuY3VyQ291bnQ+PXQubWF4Q291bnQmJihkZWxldGUgZS5mYWNpbGl0eUFuaW1hdGlvbkNvdW50c1tjXSxuLmNvbGxpc2lvblNjZW5lTWFuYWdlci51cGRhdGVDb2xsaXNpb24oKSl9KX19fSx7a2V5OlwiX3N0YXJ0RmFjaWxpdHlBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+NSYmdm9pZCAwIT09YXJndW1lbnRzWzVdP2FyZ3VtZW50c1s1XTowLGE9dGhpcyxzPWFyZ3VtZW50cy5sZW5ndGg+NiYmdm9pZCAwIT09YXJndW1lbnRzWzZdP2FyZ3VtZW50c1s2XTozMDAsdT1hcmd1bWVudHMubGVuZ3RoPjcmJnZvaWQgMCE9PWFyZ3VtZW50c1s3XT9hcmd1bWVudHNbN106MjtkLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcihuLGkrbixzKS5vbihcInVwZGF0ZVwiLGZ1bmN0aW9uKHIsbyl7dmFyIHM9by5udW0sdT1zPjIqbj8yKmktczpzO2EuX21hcC5zY2VuZU1hbmFnZXIuc2V0U2NhbGUodCxcImNhdGVnb3J5XCIsZSx1LHUsMCl9KS5vbihcImNvbXBsZXRlXCIscikuZGVsYXkobykucmVwZWF0KHUpLnN0YXJ0KCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7bChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJoaWRlXCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLmZhY2lsaXR5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9fSx7a2V5OlwiZGlzcGxheVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwiYmxvY2tcIjtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImRpc3BsYXlcIix0aGlzKS5jYWxsKHRoaXMsdCksXCJub25lXCIhPT10JiZ0aGlzLmdldFNlbGVjdGVkKCkmJih0aGlzLmZhY2lsaXR5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXk9dGhpcy5fb3B0aW9ucy5zZWxlY3RlZERpc3BsYXkpfX0se2tleTpcInVuYmx1clwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl91bmJsdXI9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VuYmx1cn19LHtrZXk6XCJibHVyT3BhY2l0eVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9ibHVyT3BhY2l0eT10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmx1ck9wYWNpdHl9fV0pLGV9KGguZGVmYXVsdCk7ZS5kZWZhdWx0PW19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9ZnVuY3Rpb24gdChlLG4saSl7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnQobyxuLGkpfWlmKFwidmFsdWVcImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGE9ci5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKGkpfSxjPW4oNDMpLGg9aShjKSxmPW4oMjIpLGQ9aShmKSxwPW4oNiksZz1pKHApLHY9bigxOCksbT1uKDMpLHk9e2NsYXNzTmFtZTpcIm5nci1tdWx0aS1mbG9vci1zd2l0Y2hlclwiLHNjcm9sbE9wdGlvbnM6e2Rpc2FibGVkOiExLGJhckhlaWdodDoyNyxtYXhCYXJDb3VudDpudWxsfX0sXz17c2VsZWN0ZWQ6ITAsY2xhc3NOYW1lOlwibmdyLXRvZ2dsZS1mbG9vclwiLHBvc2l0aW9uOlwiYm90dG9tcmlnaHRcIixuYW1lOlwiZmxvb3JcIn0sYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj1zKHt9LHksdCksaT1zKHt9LF8sbi50b2dnbGVPcHRpb25zKSxhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLG4pKTtyZXR1cm4gYS5fbmFtZT1uLm5hbWU/XCJtdWx0aUZsb29yLVwiK24ubmFtZTpcIm11bHRpRmxvb3JcIixhLnRvZ2dsZT1uZXcgZC5kZWZhdWx0KGkpLGEuX2RlZmF1bFByaW9yaXR5PWEuX29wdGlvbnMuZGVmYXVsUHJpb3JpdHk/YS5fb3B0aW9ucy5kZWZhdWxQcmlvcml0eTo0LGEuX2lnbm9yZU9wYWNpdHlMYXllcnM9YS5fb3B0aW9ucy5pZ25vcmVPcGFjaXR5TGF5ZXJzP2EuX29wdGlvbnMuaWdub3JlT3BhY2l0eUxheWVyczpbXCJwaWNrTWFya2VyXCJdLGEuX2JsdXJPcGFjaXR5PWEuX29wdGlvbnMuYmx1ck9wYWNpdHk/YS5fb3B0aW9ucy5ibHVyT3BhY2l0eTouMyxhLl9mbG9vckFuaW1hdGlvbkNvdW50PTAsYS5fb3B0aW9ucy5zY3JvbGxPcHRpb25zLm1heEJhckNvdW50JiYoYS5fZWxlbWVudC5zdHlsZVtcIm1heC1oZWlnaHRcIl09YS5fb3B0aW9ucy5zY3JvbGxPcHRpb25zLm1heEJhckNvdW50KmEuX29wdGlvbnMuc2Nyb2xsT3B0aW9ucy5iYXJIZWlnaHQrXCJweFwiKSxhLm9uVG9nZ2xlPWEub25Ub2dnbGUuYmluZChhKSxhLm9uRmxvb3JDaGFuZ2U9YS5vbkZsb29yQ2hhbmdlLmJpbmQoYSksYX1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcInNldENvbnRhaW5lclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInNldENvbnRhaW5lclwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLnRvZ2dsZS5zZXRDb250YWluZXIodCksdGhpc319LHtrZXk6XCJfb25BZGRcIix2YWx1ZTpmdW5jdGlvbih0KXtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLnRvZ2dsZS5fb25BZGQodCksdGhpcy5vbihcImNoYW5nZVwiLHRoaXMub25GbG9vckNoYW5nZSksdGhpcy50b2dnbGUub24oXCJ0b2dnbGVcIix0aGlzLm9uVG9nZ2xlKX19LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vblJlbW92ZVwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLnRvZ2dsZS5fb25SZW1vdmUodCksdGhpcy50b2dnbGUuX21hcD1udWxsLHRoaXMub2ZmKFwiY2hhbmdlXCIsdGhpcy5vbkZsb29yQ2hhbmdlKSx0aGlzLnRvZ2dsZS5vZmYoXCJ0b2dnbGVcIix0aGlzLm9uVG9nZ2xlKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJoaWRlXCIsdGhpcykuY2FsbCh0aGlzKSxcbnRoaXMudG9nZ2xlLmhpZGUoKSx0aGlzfX0se2tleTpcImRpc3BsYXlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcImJsb2NrXCI7cmV0dXJuIGwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzcGxheVwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLnRvZ2dsZS5kaXNwbGF5KHQpLHRoaXN9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzYWJsZVwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy50b2dnbGUuZGlzYWJsZSgpLHRoaXN9fSx7a2V5OlwiZW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJlbmFibGVcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMudG9nZ2xlLmVuYWJsZSgpLHRoaXN9fSx7a2V5OlwiX3N0YXJ0Rmxvb3JBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10/YXJndW1lbnRzWzNdOm51bGwscj10aGlzLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOjAsYT1hcmd1bWVudHMubGVuZ3RoPjUmJnZvaWQgMCE9PWFyZ3VtZW50c1s1XT9hcmd1bWVudHNbNV06MzAwO2lmKCF0aGlzLl9tYXApcmV0dXJuIHRoaXM7dmFyIHM9dGhpcy5fbWFwLmdldExheWVyKHQpO3JldHVybiBnLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcihlLG4sYSkub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LGUpe3ZhciBuPWUubnVtO3IuX21hcC5zY2VuZU1hbmFnZXIucXVpY2tTZXRQb3NpdGlvbihzLG51bGwsbnVsbCwwLDAsbil9KS5vbihcImNvbXBsZXRlXCIsaSkuZGVsYXkobykuc3RhcnQoKSx0aGlzfX0se2tleTpcIl9zZXRQR1ByaW9yaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXM7aWYoZSYmdGhpcy5fc2V0UEdQcmlvcml0eShlLG51bGwsdGhpcy5fZGVmYXVsUHJpb3JpdHkrMSksIXQpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5fbWFwLmdldExheWVyKHQpLG89ci5nZXRMYXllcihcIkFyZWFUZXh0XCIpLGE9ci5nZXRMYXllcihcIkZhY2lsaXR5XCIpO3JldHVybiBvJiZvLnZpc2l0KGZ1bmN0aW9uKHQpe3QucHJpb3JpdHk9bj09PWkuX2RlZmF1bFByaW9yaXR5P24tMTpufSksYSYmYS52aXNpdChmdW5jdGlvbih0KXt0LnByaW9yaXR5PW59KSx0aGlzfX0se2tleTpcIl9zZXRQR09wYWNpdHlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9tYXAuZ2V0TGF5ZXIodCk7cmV0dXJuIGk/KGkuZm9yZWFjaChmdW5jdGlvbih0LGkpe3ZhciByPW4uX2lnbm9yZU9wYWNpdHlMYXllcnMuaW5kZXhPZih0KTtyPT09LTEmJm4uX21hcC5zY2VuZU1hbmFnZXIuc2V0T3BhY2l0eShpLG51bGwsbnVsbCxlKX0pLHRoaXMpOnRoaXN9fSx7a2V5OlwiX2hpZ2hsaWdodFBHXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106MSxyPWUsbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgdT1zO3U9PT1OdW1iZXIodCk/dGhpcy5fc2V0UEdPcGFjaXR5KHUsaSk6dGhpcy5fc2V0UEdPcGFjaXR5KHUsbil9cmV0dXJuIHRoaXN9fSx7a2V5OlwiaGlnaGxpZ2h0UEdzXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoKDAsbS5pc0FycmF5KSh0KSlpZigxPT09dC5sZW5ndGgpdGhpcy5faGlnaGxpZ2h0UEcodFswXSx0aGlzLl9tYXAuY3VycmVudFBsYW5hckdyYXBoSWRzLHRoaXMuX2JsdXJPcGFjaXR5KSx0aGlzLl9zZXRQR1ByaW9yaXR5KHRbMF0sbnVsbCx0aGlzLl9kZWZhdWxQcmlvcml0eSk7ZWxzZXtmb3IodmFyIGU9dCxuPUFycmF5LmlzQXJyYXkoZSksaT0wLGU9bj9lOmVbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciByO2lmKG4pe2lmKGk+PWUubGVuZ3RoKWJyZWFrO3I9ZVtpKytdfWVsc2V7aWYoaT1lLm5leHQoKSxpLmRvbmUpYnJlYWs7cj1pLnZhbHVlfXZhciBvPXI7dGhpcy5fc2V0UEdPcGFjaXR5KG8sMSl9dGhpcy5fc2V0UEdQcmlvcml0eShudWxsLHRoaXMuY3VycmVudEZsb29yLHRoaXMuX2RlZmF1bFByaW9yaXR5KX1yZXR1cm4gdGhpc319LHtrZXk6XCJvbk11bHRpRmxvb3JDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fbWFwLGk9bi5wbGFuYXJHcmFwaHMscj1uLmFjdGl2ZUNvbnRyb2wuX3RhcmdldCxvPXIueCxhPXIueSxzPXIuejtyZXR1cm4gZy5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZOdW1iZXIocyxpLmluZGV4T2YoTnVtYmVyKHQudG8pKSpuLl9mbG9vckhlaWdodCwzMDApLm9uKFwidXBkYXRlXCIsZnVuY3Rpb24odCxlKXt2YXIgaT1lLm51bTtuLmFjdGl2ZUNvbnRyb2wubW92ZVRvUG9pbnQobyxhLGksITAsITEsITEpfSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7bi5jb2xsaXNpb25TY2VuZU1hbmFnZXIuYW5pbWF0aW9uKHYuQ0FUeXBlLk9wYWNpdHkpLnVwZGF0ZUNvbGxpc2lvbighMCksZS5lbmFibGUoKSxlLnRvZ2dsZS5kaXNhYmxlZD0hMSxlLmZpcmUoXCJhbmltYXRpb25Db21wbGV0ZWRcIix7dGFyZ2V0Q29udHJvbDplfSl9KS5zdGFydCgpLHRoaXMuX2hpZ2hsaWdodFBHKHQudG8saSx0aGlzLl9ibHVyT3BhY2l0eSksdGhpcy5fc2V0UEdQcmlvcml0eSh0LnRvLHQuZnJvbSx0aGlzLl9kZWZhdWxQcmlvcml0eSksdGhpc319LHtrZXk6XCJvblNpbmdsZUZsb29yQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuX21hcCxpPW4ucGxhbmFyR3JhcGhzLmluZGV4T2YoTnVtYmVyKHQuZnJvbSkpLHI9bi5wbGFuYXJHcmFwaHMuaW5kZXhPZihOdW1iZXIodC50bykpLG89bi5hY3RpdmVDb250cm9sLm1heERpc3RhbmNlKzUwO2lmKHI9PT0tMXx8aT09PS0xKXRocm93IG5ldyBFcnJvcihcIk11bHRpRmxvb3JDb250cm9sOiBJbnZhbGlkIGluZGV4XCIpO3ZhciBhPW4uZ2V0TGF5ZXIodC50bykscz1hLmdldExheWVyKFwiQXJlYVRleHRcIiksdT1hLmdldExheWVyKFwiRmFjaWxpdHlcIik7cmV0dXJuIHRoaXMuX3NldFBHT3BhY2l0eSh0LnRvLDEpLG4uc2hvd1BsYW5hckdyYXBocyhbdC50b10sITEpLG4uc2NlbmVNYW5hZ2VyLnNldE9wYWNpdHkocyxudWxsLG51bGwsMCksbi5zY2VuZU1hbmFnZXIuc2V0T3BhY2l0eSh1LG51bGwsbnVsbCwwKSxuLmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24odi5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSx0aGlzLl9zdGFydEZsb29yQW5pbWF0aW9uKHQudG8scjxpPy1vOm8sMCxmdW5jdGlvbigpe24uc2NlbmVNYW5hZ2VyLnNldE9wYWNpdHkocyxudWxsLG51bGwsMSksbi5zY2VuZU1hbmFnZXIuc2V0T3BhY2l0eSh1LG51bGwsbnVsbCwxKSxuLmNvbGxpc2lvblNjZW5lTWFuYWdlci5hbmltYXRpb24odi5DQVR5cGUuT3BhY2l0eSkudXBkYXRlQ29sbGlzaW9uKCEwKSxlLmVuYWJsZSgpLGUudG9nZ2xlLmRpc2FibGVkPSExLGUuZmlyZShcImFuaW1hdGlvbkNvbXBsZXRlZFwiLHt0YXJnZXRDb250cm9sOmV9KX0pLHRoaXN9fSx7a2V5Olwib25Ub2dnbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zZWxlY3RlZCxpPXRoaXMuX21hcCxyPXRoaXMuZ2V0Q3VycmVudEZsb29yKCksbz1pLnBsYW5hckdyYXBocyxhPWkuX2Zsb29ySGVpZ2h0LHM9aS5hY3RpdmVDb250cm9sLm1heERpc3RhbmNlKzUwLHU9aS5hY3RpdmVDb250cm9sLl90YXJnZXQsbD11LngsYz11LnksaD0wLGY9ITAsZD12b2lkIDAscD12b2lkIDA7aWYodGhpcy5kaXNhYmxlKCksdGhpcy50b2dnbGUuZGlzYWJsZWQ9ITEsbil7dmFyIGc9ZnVuY3Rpb24oKXtlLl9mbG9vckFuaW1hdGlvbkNvdW50KyssZS5fZmxvb3JBbmltYXRpb25Db3VudD49by5sZW5ndGgmJihpLm5leHQoMSxmdW5jdGlvbigpe2kuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFuaW1hdGlvbih2LkNBVHlwZS5PcGFjaXR5KS51cGRhdGVDb2xsaXNpb24oITApfSksZS5lbmFibGUoKSxlLnRvZ2dsZS5kaXNhYmxlZD0hMSxlLmZpcmUoXCJhbmltYXRpb25Db21wbGV0ZWRcIix7dGFyZ2V0Q29udHJvbDplfSksZS5fZmxvb3JBbmltYXRpb25Db3VudD0wLGUuX21hcC5zY2VuZU1hbmFnZXIuX29jdHJlZU1hbmFnZXIucmVidWlsZCgpKX07dGhpcy5fc2V0UEdQcmlvcml0eShyLG51bGwsdGhpcy5fZGVmYXVsUHJpb3JpdHkpLGkuc2hvd1BsYW5hckdyYXBocyhvKSx0aGlzLl9oaWdobGlnaHRQRyhyLG8sdGhpcy5fYmx1ck9wYWNpdHkpO2Zvcih2YXIgbT1vLHk9QXJyYXkuaXNBcnJheShtKSxfPTAsbT15P206bVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGI7aWYoeSl7aWYoXz49bS5sZW5ndGgpYnJlYWs7Yj1tW18rK119ZWxzZXtpZihfPW0ubmV4dCgpLF8uZG9uZSlicmVhaztiPV8udmFsdWV9dmFyIHg9Yjt4PT09TnVtYmVyKHIpPyhkPTAsZj0hMSk6ZD1mPy1zOnMsdGhpcy5fc3RhcnRGbG9vckFuaW1hdGlvbih4LGQsaCxnKSxoKz1hfWkuYWN0aXZlQ29udHJvbC5tb3ZlVG9Qb2ludChsLGMsby5pbmRleE9mKE51bWJlcihyKSkqYSwhMCwhMCwhMSl9ZWxzZXt2YXIgdz1mdW5jdGlvbigpe2UuX2Zsb29yQW5pbWF0aW9uQ291bnQrKyxlLl9mbG9vckFuaW1hdGlvbkNvdW50Pj1vLmxlbmd0aCYmKGkuc2hvd1BsYW5hckdyYXBocyhbcl0pLGUuZW5hYmxlKCksZS50b2dnbGUuZGlzYWJsZWQ9ITEsZS5maXJlKFwiYW5pbWF0aW9uQ29tcGxldGVkXCIse3RhcmdldENvbnRyb2w6ZX0pLGUuX2Zsb29yQW5pbWF0aW9uQ291bnQ9MCxlLl9tYXAuc2NlbmVNYW5hZ2VyLl9vY3RyZWVNYW5hZ2VyLnJlYnVpbGQoKSl9O3RoaXMuX3NldFBHUHJpb3JpdHkobnVsbCxyLHRoaXMuX2RlZmF1bFByaW9yaXR5KTtmb3IodmFyIEU9byxTPUFycmF5LmlzQXJyYXkoRSksTT0wLEU9Uz9FOkVbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBDO2lmKFMpe2lmKE0+PUUubGVuZ3RoKWJyZWFrO0M9RVtNKytdfWVsc2V7aWYoTT1FLm5leHQoKSxNLmRvbmUpYnJlYWs7Qz1NLnZhbHVlfXZhciBJPUM7ST09PU51bWJlcihyKT8ocD0wLGY9ITEpOnA9Zj8tczpzLHRoaXMuX3N0YXJ0Rmxvb3JBbmltYXRpb24oSSxoLHAsdyl9aS5hY3RpdmVDb250cm9sLm1vdmVUb1BvaW50KGwsYywwLCEwLCExLCExKX19fSx7a2V5OlwiX3Njcm9sbEJ5Rmxvb3JcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuaGVpZ2h0LG49dGhpcy5fZWxlbWVudCxpPXRoaXMuX21hcC5wbGFuYXJHcmFwaHMuY29uY2F0KCkucmV2ZXJzZSgpLHI9aS5pbmRleE9mKE51bWJlcih0KSksbz10aGlzLl9vcHRpb25zLnNjcm9sbE9wdGlvbnMuYmFySGVpZ2h0LGE9dGhpcy5fb3B0aW9ucy5zY3JvbGxPcHRpb25zLm1heEJhckNvdW50LHM9dm9pZCAwO2lmKHI9PT0tMSlyZXR1cm4gdGhpczthfHwoYT1lPD01MTA/NDplPD01NTA/NTo3KTt2YXIgdT0oaS5sZW5ndGgtYSkqbztyZXR1cm4gdTw9MD90aGlzOihzPW8qKHItd2luZG93Lk1hdGguZmxvb3IoKGEtMSkvMikpLHM8MD9zPTA6cz51JiYocz11KSxnLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcihuLnNjcm9sbFRvcCxzLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LGUpe3ZhciBpPWUubnVtO24uc2Nyb2xsVG9wPWl9KS5zdGFydCgpLHRoaXMpfX0se2tleTpcIm9uRmxvb3JDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5mcm9tPT09dC50bz90aGlzOih0aGlzLl9vcHRpb25zLnNjcm9sbE9wdGlvbnMuZGlzYWJsZWR8fHRoaXMuX3Njcm9sbEJ5Rmxvb3IoTnVtYmVyKHQudG8pKSx0aGlzLmRpc2FibGUoKSx0aGlzLnRvZ2dsZS5kaXNhYmxlZD0hMSx0aGlzLnRvZ2dsZS5nZXRTZWxlY3RlZCgpP3RoaXMub25NdWx0aUZsb29yQ2hhbmdlKHQpOnRoaXMub25TaW5nbGVGbG9vckNoYW5nZSh0KSx0aGlzLnNldEN1cnJlbnRGbG9vcih0LnRvKSx0aGlzKX19LHtrZXk6XCJzZXRDdXJyZW50Rmxvb3JcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJzZXRDdXJyZW50Rmxvb3JcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fb3B0aW9ucy5zY3JvbGxPcHRpb25zLmRpc2FibGVkfHx0aGlzLl9zY3JvbGxCeUZsb29yKE51bWJlcih0KSksdGhpc319XSksZX0oaC5kZWZhdWx0KTtlLmRlZmF1bHQ9Yn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9bigxKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbD1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGM9bigxMSksaD1pKGMpLGY9big3KSxkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cih0aGlzLGUpO3ZhciBuPXQubmFtZT9cInNjYWxlLVwiK3QubmFtZTpcInNjYWxlXCIsaT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyxuLHMoe21heFdpZHRoOjEwMCxwb3NpdGlvbjpcImJvdHRvbWxlZnRcIn0sdCkpKTtyZXR1cm4gaS5fZWxlbWVudD1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixcIm5nci1jb250cm9sLXNjYWxlXCIpLGkudXBkYXRlPWkudXBkYXRlLmJpbmQoaSksaX1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcImRpc2FibGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZGUoKSx0aGlzfX0se2tleTpcImVuYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheSgpLHRoaXN9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX21hcC5uZXh0KDEsZnVuY3Rpb24oKXt2YXIgZT10Ll9tYXAuYWN0aXZlQ2FtZXJhLmdldE1ldGVyc1BlclBpeGVsKCkqdC5fb3B0aW9ucy5tYXhXaWR0aCxuPXQuX2dldFJvdW5kTnVtKGUpLGk9TWF0aC5yb3VuZChuL2UqdC5fb3B0aW9ucy5tYXhXaWR0aCk7dC5fc2NhbGVNaWRkbGUuc3R5bGUud2lkdGg9aStcInB4XCIsdC5fc2NhbGVFZGdlUmlnaHQuc3R5bGUubGVmdD1pKzErXCJweFwiLHQuX3NjYWxlVGV4dC5pbm5lckhUTUw9bitcIuexs1wiLHQuX3NjYWxlVGV4dC5zdHlsZS53aWR0aD1pK1wicHhcIn0pfX0se2tleTpcIl9vbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2woZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX29uQWRkXCIsdGhpcykuY2FsbCh0aGlzLHQpO3ZhciBuPVwibmdyLWNvbnRyb2wtc2NhbGVcIjtyZXR1cm4gdGhpcy5fc2NhbGVUZXh0PWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImRpdlwiLG4rXCItdGV4dFwiLHRoaXMuX2VsZW1lbnQpLHRoaXMuX3NjYWxlTGluZT1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixuK1wiLWxpbmVcIix0aGlzLl9lbGVtZW50KSx0aGlzLl9zY2FsZUVkZ2VMZWZ0PWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImRpdlwiLG4rXCItZWRnZWxlZnRcIix0aGlzLl9zY2FsZUxpbmUpLHRoaXMuX3NjYWxlRWRnZVJpZ2h0PWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImRpdlwiLG4rXCItZWRnZXJpZ2h0XCIsdGhpcy5fc2NhbGVMaW5lKSx0aGlzLl9zY2FsZU1pZGRsZT1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixuK1wiLW1pZGRsZVwiLHRoaXMuX3NjYWxlTGluZSksdGhpcy5fbWFwLmdlc3R1cmVNYW5hZ2VyLm9uKFwiem9vbUVuZFwiLHRoaXMudXBkYXRlKSx0aGlzfX0se2tleTpcIl9vblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vblJlbW92ZVwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLl9tYXAuZ2VzdHVyZU1hbmFnZXIub2ZmKFwiem9vbUVuZFwiLHRoaXMudXBkYXRlKSx0aGlzfX0se2tleTpcIl9nZXRSb3VuZE51bVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucG93KDEwLChcIlwiK01hdGguZmxvb3IodCkpLmxlbmd0aC0xKSxuPXQvZTtyZXR1cm4gbj1uPj0xMD8xMDpuPj01PzU6bj49Mj8yOjEsZSpufX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDExKSxoPWkoYyksZj1uKDcpLGQ9bigzKSxwPXtzaXplOlwiMTAwcHhcIixtaW46MCxtYXg6MjUwLHN0ZXA6MSxpZDpcInNsaWRlclwiLHZhbHVlOjUwLGNvbGxhcHNlZDohMCx0aXRsZTpcIk5HUiBTbGlkZXJcIixsb2dvOlwiU1wiLG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLGluY3JlbWVudDohMSxnZXRWYWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sc2hvd1ZhbHVlOiEwLHN5bmNTbGlkZXI6ITF9LGc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cih0aGlzLGUpO3ZhciBpPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLG4ubmFtZT9cInNsaWRlci1cIituLm5hbWU6XCJzbGlkZXJcIixzKHt9LHAsbikpKTtyZXR1cm4oMCxkLmlzRnVuY3Rpb24pKHQpP2kudXBkYXRlPXQ6aS51cGRhdGU9ZnVuY3Rpb24odCl7Y29uc29sZS5sb2codCl9LCgwLGQuaXNGdW5jdGlvbikoaS5fb3B0aW9ucy5nZXRWYWx1ZSl8fChpLl9vcHRpb25zLmdldFZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0fSksXCJ2ZXJ0aWNhbFwiIT09aS5fb3B0aW9ucy5vcmllbnRhdGlvbiYmKGkuX29wdGlvbnMub3JpZW50YXRpb249XCJob3Jpem9udGFsXCIpLGkuX3VwZGF0ZVZhbHVlPWkuX3VwZGF0ZVZhbHVlLmJpbmQoaSksaS5fZXhwYW5kPWkuX2V4cGFuZC5iaW5kKGkpLGkuX2NvbGxhcHNlPWkuX2NvbGxhcHNlLmJpbmQoaSksaS5faW5jcmVtZW50PWkuX2luY3JlbWVudC5iaW5kKGkpLGkuX2RlY3JlbWVudD1pLl9kZWNyZW1lbnQuYmluZChpKSxpfXJldHVybiBhKGUsdCksdShlLFt7a2V5OlwiX29uQWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2luaXRMYXlvdXQoKSxsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIl9vbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzfX0se2tleTpcIl91cGRhdGVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fb3B0aW9ucyxlPXQuc2hvd1ZhbHVlLG49dC5nZXRWYWx1ZTt0aGlzLnZhbHVlPXRoaXMuc2xpZGVyLnZhbHVlLGUmJih0aGlzLl9zbGlkZXJWYWx1ZS5pbm5lckhUTUw9bih0aGlzLnZhbHVlKSksdGhpcy51cGRhdGUodGhpcy52YWx1ZSl9fSx7a2V5OlwiX2V4cGFuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zi5ET01VdGlscy5hZGRDbGFzcyh0aGlzLl9lbGVtZW50LFwibmdyLWNvbnRyb2wtc2xpZGVyLWV4cGFuZGVkXCIpLHRoaXMuc2xpZGVyLmZvY3VzKCl9fSx7a2V5OlwiX2NvbGxhcHNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtmLkRPTVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuX2VsZW1lbnQsXCJuZ3ItY29udHJvbC1zbGlkZXItZXhwYW5kZWRcIil9fSx7a2V5OlwiX2luY3JlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zbGlkZXIudmFsdWU9TnVtYmVyKHRoaXMuc2xpZGVyLnZhbHVlKStOdW1iZXIodGhpcy5zbGlkZXIuc3RlcCksdGhpcy5fdXBkYXRlVmFsdWUoKX19LHtrZXk6XCJfZGVjcmVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNsaWRlci52YWx1ZT1OdW1iZXIodGhpcy5zbGlkZXIudmFsdWUpLU51bWJlcih0aGlzLnNsaWRlci5zdGVwKSx0aGlzLl91cGRhdGVWYWx1ZSgpfX0se2tleTpcInNldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb3B0aW9ucyxuPWUubWluLGk9ZS5tYXgscj1lLnNob3dWYWx1ZSxvPWUuZ2V0VmFsdWU7cmV0dXJuKDAsZC5pc051bWJlcikodCkmJnQ+PW4mJnQ8PWkmJih0aGlzLnNsaWRlci52YWx1ZT10LHRoaXMudmFsdWU9dGhpcy5zbGlkZXIudmFsdWUsciYmKHRoaXMuX3NsaWRlclZhbHVlLmlubmVySFRNTD1vKHRoaXMudmFsdWUpKSksdGhpc319LHtrZXk6XCJfaW5pdExheW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVwibmdyLWNvbnRyb2wtc2xpZGVyXCIsbj10aGlzLl9vcHRpb25zLGk9bi5vcmllbnRhdGlvbixyPW4udGl0bGUsbz1uLmxvZ28sYT1uLmdldFZhbHVlLHM9bi52YWx1ZSx1PW4uc2hvd1ZhbHVlLGw9bi5pbmNyZW1lbnQsYz1uLmlkLGg9bi5taW4sZD1uLm1heCxwPW4uc3RlcCxnPW4uc3luY1NsaWRlcix2PW4uc2l6ZSxtPW4uY29sbGFwc2VkO3RoaXMuX2VsZW1lbnQmJmNvbnNvbGUud2FybihcIlNsaWRlckNvbnRyb2w6IEVsZW1lbnQgd2lsbCBiZSBvdmVycmlkZWRcIiksdGhpcy5fZWxlbWVudD1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixlK1wiIFwiK2UrXCItXCIraSksdGhpcy5fc2xpZGVyTGluaz1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJhXCIsZStcIi10b2dnbGVcIix0aGlzLl9lbGVtZW50KSx0aGlzLl9zbGlkZXJMaW5rLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsciksdGhpcy5fc2xpZGVyTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsXCIjXCIpLHRoaXMuX3NsaWRlckxpbmsuaW5uZXJIVE1MPW8sdSYmKHRoaXMuX3NsaWRlclZhbHVlPWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcInBcIixlK1wiLXZhbHVlXCIsdGhpcy5fZWxlbWVudCksdGhpcy5fc2xpZGVyVmFsdWUuaW5uZXJIVE1MPWEocykpLGwmJih0aGlzLl9wbHVzPWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImFcIixlK1wiLXBsdXNcIix0aGlzLl9lbGVtZW50KSx0aGlzLl9wbHVzLmlubmVySFRNTD1cIitcIix0aGlzLl9wbHVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2luY3JlbWVudCwhMSksZi5ET01VdGlscy5hZGRDbGFzcyh0aGlzLl9lbGVtZW50LFwibmdyLWNvbnRyb2wtc2xpZGVyLWluY2RlY1wiKSksdGhpcy5fc2xpZGVyQ29udGFpbmVyPWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImRpdlwiLFwibmdyLXNsaWRlci1jb250YWluZXJcIix0aGlzLl9lbGVtZW50KSx0aGlzLnNsaWRlcj1mLkRPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLFwibmdyLXNsaWRlclwiLHRoaXMuX3NsaWRlckNvbnRhaW5lciksXCJ2ZXJ0aWNhbFwiPT09aSYmdGhpcy5zbGlkZXIuc2V0QXR0cmlidXRlKFwib3JpZW50XCIsXCJ2ZXJ0aWNhbFwiKSx0aGlzLnNsaWRlci5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLHIpLHRoaXMuc2xpZGVyLnNldEF0dHJpYnV0ZShcImlkXCIsYyksdGhpcy5zbGlkZXIuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFuZ2VcIiksdGhpcy5zbGlkZXIuc2V0QXR0cmlidXRlKFwibWluXCIsaCksdGhpcy5zbGlkZXIuc2V0QXR0cmlidXRlKFwibWF4XCIsZCksdGhpcy5zbGlkZXIuc2V0QXR0cmlidXRlKFwic3RlcFwiLHApLHRoaXMuc2xpZGVyLnNldEF0dHJpYnV0ZShcInZhbHVlXCIscyksZz90aGlzLnNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIix0aGlzLl91cGRhdGVWYWx1ZSwhMSk6dGhpcy5zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuX3VwZGF0ZVZhbHVlLCExKSx0aGlzLnNsaWRlci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXt0LmVtaXQoXCJzbGlkZUVuZFwiLHQuc2xpZGVyLnZhbHVlKX0sITEpLGwmJih0aGlzLl9taW5pdXM9Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiYVwiLGUrXCItbWludXNcIix0aGlzLl9lbGVtZW50KSx0aGlzLl9taW5pdXMuaW5uZXJIVE1MPVwiLVwiLHRoaXMuX21pbml1cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9kZWNyZW1lbnQsITEpKSx1P3dpbmRvdy5tYXRjaE1lZGlhKFwic2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjApXCIpLm1hdGNoZXMmJlwidmVydGljYWxcIj09PWk/KHRoaXMuc2xpZGVyLnN0eWxlLndpZHRoPXYucmVwbGFjZShcInB4XCIsXCJcIiktMzYrXCJweFwiLHRoaXMuX3NsaWRlckNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9di5yZXBsYWNlKFwicHhcIixcIlwiKS0zNitcInB4XCIpOlwidmVydGljYWxcIj09PWk/dGhpcy5fc2xpZGVyQ29udGFpbmVyLnN0eWxlLmhlaWdodD12LnJlcGxhY2UoXCJweFwiLFwiXCIpLTM2K1wicHhcIjp0aGlzLl9zbGlkZXJDb250YWluZXIuc3R5bGUud2lkdGg9di5yZXBsYWNlKFwicHhcIixcIlwiKS01NitcInB4XCI6d2luZG93Lm1hdGNoTWVkaWEoXCJzY3JlZW4gYW5kICgtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86MClcIikubWF0Y2hlcyYmXCJ2ZXJ0aWNhbFwiPT09aT8odGhpcy5zbGlkZXIuc3R5bGUud2lkdGg9di5yZXBsYWNlKFwicHhcIixcIlwiKS0xMCtcInB4XCIsdGhpcy5fc2xpZGVyQ29udGFpbmVyLnN0eWxlLmhlaWdodD12LnJlcGxhY2UoXCJweFwiLFwiXCIpLTEwK1wicHhcIik6XCJ2ZXJ0aWNhbFwiPT09aT90aGlzLl9zbGlkZXJDb250YWluZXIuc3R5bGUuaGVpZ2h0PXYucmVwbGFjZShcInB4XCIsXCJcIiktMTArXCJweFwiOnRoaXMuX3NsaWRlckNvbnRhaW5lci5zdHlsZS53aWR0aD12LnJlcGxhY2UoXCJweFwiLFwiXCIpLTI1K1wicHhcIixmLkRPTVV0aWxzLmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKHRoaXMuX2VsZW1lbnQpLG0/KHRoaXMuX3NsaWRlckxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZi5ET01VdGlscy5zdG9wKSx0aGlzLl9zbGlkZXJMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2V4cGFuZCksdGhpcy5zbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLl9jb2xsYXBzZSkpOnRoaXMuX2V4cGFuZCgpfX1dKSxlfShoLmRlZmF1bHQpO2UuZGVmYXVsdD1nfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDExKSxoPWkoYyksZj1uKDcpLGQ9big2KSxwPWkoZCksZz1uKDMpLHY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49cyh7em9vbUluVGV4dDpcIitcIix6b29tSW5UaXRsZTpcIuaUvuWkp1wiLHpvb21PdXRUZXh0OlwiLVwiLHpvb21PdXRUaXRsZTpcIue8qeWwj1wiLGFuaW1hdGlvbjp7ZGlzYWJsZWQ6ITEsZHVyYXRpb246MzAwfSxwb3NpdGlvbjpcImJvdHRvbXJpZ2h0XCJ9LHQpLGk9bi5uYW1lP1wiem9vbS1cIituLm5hbWU6XCJ6b29tXCIsYT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyxpLG4pKTtyZXR1cm4gYS5fZWxlbWVudHx8KGEuX2VsZW1lbnQ9Zi5ET01VdGlscy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsXCJuZ3ItY29udHJvbC16b29tIG5nci1iYXJcIiksYS5fem9vbUluQnV0dG9uPWEuX2NyZWF0ZUJ1dHRvbihhLl9vcHRpb25zLnpvb21JblRleHQsYS5fb3B0aW9ucy56b29tSW5UaXRsZSxcIm5nci1jb250cm9sLXpvb20taW5cIixhLl9lbGVtZW50LGEuem9vbUluKSxhLl96b29tT3V0QnV0dG9uPWEuX2NyZWF0ZUJ1dHRvbihhLl9vcHRpb25zLnpvb21PdXRUZXh0LGEuX29wdGlvbnMuem9vbU91dFRpdGxlLFwibmdyLWNvbnRyb2wtem9vbS1vdXRcIixhLl9lbGVtZW50LGEuem9vbU91dCkpLGEudXBkYXRlRGlzYWJsZWQ9YS51cGRhdGVEaXNhYmxlZC5iaW5kKGEpLGEuem9vbUluPWEuem9vbUluLmJpbmQoYSksYS56b29tT3V0PWEuem9vbU91dC5iaW5kKGEpLGF9cmV0dXJuIGEoZSx0KSx1KGUsW3trZXk6XCJfb25BZGRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfb25BZGRcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wmJnRoaXMuX3pvb21JbkJ1dHRvbiYmdGhpcy5fem9vbU91dEJ1dHRvbiYmdGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wub24oXCJjaGFuZ2Vab29tU3RhdHVzXCIsdGhpcy51cGRhdGVEaXNhYmxlZCksdGhpc319LHtrZXk6XCJfb25SZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfb25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wmJnRoaXMuX3pvb21JbkJ1dHRvbiYmdGhpcy5fem9vbU91dEJ1dHRvbiYmdGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wub2ZmKFwiY2hhbmdlWm9vbVN0YXR1c1wiLHRoaXMudXBkYXRlRGlzYWJsZWQpLHRoaXN9fSx7a2V5OlwiX2NyZWF0ZUJ1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkscil7dmFyIG89dGhpcyxhPWYuRE9NVXRpbHMuY3JlYXRlRWxlbWVudChcImFcIixuLGkpO3JldHVybiBhLmlubmVySFRNTD10LGEuaHJlZj1cIiNcIixhLnRpdGxlPWUsYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbih0KXt2YXIgZT1udWxsO3JldHVybiBmLkRPTVV0aWxzLnN0b3BQcm9wYWdhdGlvbih0KSxmLkRPTVV0aWxzLnByZXZlbnREZWZhdWx0KHQpLGU9ci5jYWxsKG8sdCksby5fcmVmb2N1c09uTWFwKCksZX0sITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGYuRE9NVXRpbHMuc3RvcFByb3BhZ2F0aW9uLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLGYuRE9NVXRpbHMuc3RvcFByb3BhZ2F0aW9uLCExKSxhfX0se2tleTpcInVwZGF0ZURpc2FibGVkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1cIm5nci1kaXNhYmxlZFwiO3JldHVybiB0aGlzLl96b29tSW5CdXR0b24mJnRoaXMuX3pvb21PdXRCdXR0b24mJihmLkRPTVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuX3pvb21JbkJ1dHRvbixuKSxmLkRPTVV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuX3pvb21PdXRCdXR0b24sbiksMj09PWUmJmYuRE9NVXRpbHMuYWRkQ2xhc3ModGhpcy5fem9vbUluQnV0dG9uLG4pLDE9PT1lJiZmLkRPTVV0aWxzLmFkZENsYXNzKHRoaXMuX3pvb21PdXRCdXR0b24sbikpLHRoaXN9fSx7a2V5OlwiX3N0YXJ0Wm9vbUFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3JldHVybiBwLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5vZk51bWJlcih0LGUsbikub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LGUpe3ZhciBuPWUubnVtO2kuX21hcC5hY3RpdmVDb250cm9sLnpvb21CeUZvY2FsTGVuZ3RoKG4sITAsITEsITEpfSkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKCl7aS5fbWFwLmFjdGl2ZUNvbnRyb2wuem9vbUJ5Rm9jYWxMZW5ndGgoZSwhMCwhMCwhMCl9KS5zdGFydCgpLHRoaXN9fSx7a2V5Olwiem9vbUluXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9tYXAmJnRoaXMuX21hcC5hY3RpdmVDb250cm9sKWlmKHRoaXMuX29wdGlvbnMuYW5pbWF0aW9uLmRpc2FibGVkKXRoaXMuX21hcC5hY3RpdmVDb250cm9sLnpvb20oLjUsITAsITAsITEpO2Vsc2V7dmFyIHQ9dGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wuX2N1ckRpc3RhbmNlLGU9KDAsZy5pc051bWJlcikodGhpcy5fb3B0aW9ucy5hbmltYXRpb24uZHVyYXRpb24pP3RoaXMuX29wdGlvbnMuYW5pbWF0aW9uLmR1cmF0aW9uOjMwMDt0aGlzLl9zdGFydFpvb21BbmltYXRpb24odCx0LzIsZSl9cmV0dXJuIHRoaXN9fSx7a2V5Olwiem9vbU91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwJiZ0aGlzLl9tYXAuYWN0aXZlQ29udHJvbClpZih0aGlzLl9vcHRpb25zLmFuaW1hdGlvbi5kaXNhYmxlZCl0aGlzLl9tYXAuYWN0aXZlQ29udHJvbC56b29tKDIsITAsITAsITEpO2Vsc2V7dmFyIHQ9dGhpcy5fbWFwLmFjdGl2ZUNvbnRyb2wuX2N1ckRpc3RhbmNlLGU9KDAsZy5pc051bWJlcikodGhpcy5fb3B0aW9ucy5hbmltYXRpb24uZHVyYXRpb24pP3RoaXMuX29wdGlvbnMuYW5pbWF0aW9uLmR1cmF0aW9uOjMwMDt0aGlzLl9zdGFydFpvb21BbmltYXRpb24odCwyKnQsZSl9cmV0dXJuIHRoaXN9fV0pLGV9KGguZGVmYXVsdCk7ZS5kZWZhdWx0PXZ9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPTEsbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCl9cmV0dXJuIGkodCxudWxsLFt7a2V5OlwiZ2VuZXJhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiByKyt9fV0pLHR9KCk7ZS5kZWZhdWx0PW99LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQpZS5pbmRleE9mKGkpPj0wfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmKG5baV09dFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9bigxKSxzPWF8fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPWFyZ3VtZW50c1tlXTtmb3IodmFyIGkgaW4gbilPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixpKSYmKHRbaV09bltpXSl9cmV0dXJuIHR9LHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPW4oMzYpLGM9big4MyksaD1pKGMpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O28odGhpcyx0KTt2YXIgbj1lLnNlcnZlcixpPWUuYXBwS2V5LGE9ZS5oZWFkZXJzLHU9cihlLFtcInNlcnZlclwiLFwiYXBwS2V5XCIsXCJoZWFkZXJzXCJdKSxjPXMoe0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIk5BRy1WZXJzaW9uXCI6bC52ZXJzaW9uLFwiTkFHLUtleVwiOml9LGEpO24mJih0aGlzLnNlcnZlcj1uKSx0aGlzLm9wdGlvbnM9cyh7aGVhZGVyczpjfSx1KX1yZXR1cm4gdSh0LFt7a2V5OlwicmVxdWVzdFJlZ2lvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gaC5kZWZhdWx0LmdldChcInJlZ2lvblwiLHMoe30sdGhpcy5vcHRpb25zLHtwYXJhbXM6dH0pKX19LHtrZXk6XCJyZXF1ZXN0Q2F0ZWdvcnlcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gaC5kZWZhdWx0LmdldChcImNhdGVnb3J5L1wiK3QsdGhpcy5vcHRpb25zKX19LHtrZXk6XCJyZXF1ZXN0Q2F0ZWdvcmllc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBoLmRlZmF1bHQuZ2V0KFwiY2F0ZWdvcnkvbGlzdFwiLHMoe30sdGhpcy5vcHRpb25zLHtwYXJhbXM6dH0pKX19LHtrZXk6XCJyZXF1ZXN0TWFwXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGguZGVmYXVsdC5nZXQoXCJtYXAvXCIrdCx0aGlzLm9wdGlvbnMpfX0se2tleTpcInJlcXVlc3RNYXBzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGguZGVmYXVsdC5nZXQoXCJtYXAvbGlzdFwiLHMoe30sdGhpcy5vcHRpb25zLHtwYXJhbXM6dH0pKX19LHtrZXk6XCJyZXF1ZXN0UGxhbmFyR3JhcGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gaC5kZWZhdWx0LmdldChcInBsYW5hcl9ncmFwaC9cIit0LHRoaXMub3B0aW9ucyl9fSx7a2V5OlwicmVxdWVzdFBPSVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBoLmRlZmF1bHQuZ2V0KFwicG9pL1wiK3QsdGhpcy5vcHRpb25zKX19LHtrZXk6XCJyZXF1ZXN0UE9JQ2hpbGRyZW5cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gaC5kZWZhdWx0LmdldChcInBvaS9cIit0K1wiL2NoaWxkcmVuXCIsdGhpcy5vcHRpb25zKX19LHtrZXk6XCJzZWFyY2hQT0lcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gaC5kZWZhdWx0LnBvc3QoXCJwb2kvc2VhcmNoXCIscyh7fSx0aGlzLm9wdGlvbnMse2JvZHk6SlNPTi5zdHJpbmdpZnkodCl9KSl9fSx7a2V5Olwic2VhcmNoUE9JQnlDb29yZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBoLmRlZmF1bHQucG9zdChcInBvaS9jb29yZFwiLHMoe30sdGhpcy5vcHRpb25zLHtib2R5OkpTT04uc3RyaW5naWZ5KHQpfSkpfX0se2tleTpcInJlcXVlc3ROYXZpZ2F0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIGguZGVmYXVsdC5nZXQoXCJuYXZpXCIscyh7fSx0aGlzLm9wdGlvbnMse3BhcmFtczp0fSkpfX0se2tleTpcInJlcXVlc3RUcmFuc2l0TmF2aWdhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBoLmRlZmF1bHQucG9zdChcIm5hdmkvdHJhbnNpdFwiLHMoe30sdGhpcy5vcHRpb25zLHtib2R5OkpTT04uc3RyaW5naWZ5KHQpfSkpfX0se2tleTpcInNlcnZlclwiLHNldDpmdW5jdGlvbih0KXtoLmRlZmF1bHQuZGVmYXVsdHMuYmFzZVVSTD10fX1dKSx0fSgpO2UuZGVmYXVsdD1mfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0sYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHM9big0OSksdT1pKHMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KTt2YXIgbj1udWxsO249XCJzdHJpbmdcIj09dHlwZW9mIGU/SlNPTi5wYXJzZShlKTplLHRoaXMuZmVhdHVyZXM9e307Zm9yKHZhciBpIGluIG4pXCJvYmplY3RcIj09PW8obltpXSkmJih0aGlzLmZlYXR1cmVzW2ldPXUuZGVmYXVsdC5wYXJzZShpLG5baV0pKTt0OmZvcih2YXIgYSBpbiB0aGlzLmZlYXR1cmVzKWZvcih2YXIgcz10aGlzLmZlYXR1cmVzW2FdLmZlYXR1cmVzLGw9cyxjPUFycmF5LmlzQXJyYXkobCksaD0wLGw9Yz9sOmxbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBmO2lmKGMpe2lmKGg+PWwubGVuZ3RoKWJyZWFrO2Y9bFtoKytdfWVsc2V7aWYoaD1sLm5leHQoKSxoLmRvbmUpYnJlYWs7Zj1oLnZhbHVlfXZhciBkPWYscD1kLnByb3BlcnRpZXMucGxhbmFyX2dyYXBoO2lmKHApe3RoaXMuX3BsYW5hckdyYXBoSWQ9cDticmVhayB0fX19cmV0dXJuIGEodCxbe2tleTpcInBsYW5hckdyYXBoSWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxhbmFyR3JhcGhJZH19LHtrZXk6XCJmZWF0dXJlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mZWF0dXJlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZlYXR1cmVzPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PWx9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDUpLGw9aSh1KSxjPW4oMTIpLGg9bigxMDQpLGY9aShoKTtjLnRvdWNoRW11bGF0b3ImJigwLGYuZGVmYXVsdCkoKTt2YXIgZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpO3ZhciB0PW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX21hcFZpZXdzPXt9LHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJpbml0TWFwVmlld1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIXRoaXMuaGFzTWFwVmlldyh0KSYmKHRoaXMuX21hcFZpZXdzW3QubmFtZV09dCwhMCl9fSx7a2V5OlwicmVTaXplXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJoYXNNYXBWaWV3XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiYodCBpbiB0aGlzLl9tYXBWaWV3c3x8dC5uYW1lIGluIHRoaXMuX21hcFZpZXdzKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuaGFzTWFwVmlldyh0KSYmKGRlbGV0ZSB0aGlzLl9tYXBWaWV3c1t0Lm5hbWVdLCEwKX19LHtrZXk6XCJ0eXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9ZH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuVGhyZWVFbmdpbmU9dm9pZCAwO3ZhciByPW4oNDgpLG89aShyKTtlLlRocmVlRW5naW5lPW8uZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYT1uKDQpLHM9big4KSx1PWkocyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cih0aGlzLHQpLHRoaXMucHJ1bmVFbXB0eUdlb21ldHJ5PSEwLHRoaXMucHJlc2VydmVHZW9tZXRyeUNvbGxlY3Rpb25UeXBlPSEwLHRoaXMucHJlc2VydmVDb2xsZWN0aW9ucz0hMSx0aGlzLnByZXNlcnZlVHlwZT0hMSx0aGlzLl9jYWxsYmFjaz1lfXJldHVybiBvKHQsW3trZXk6XCJ0cmFuc2Zvcm1Qb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB1LmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvaW50KHRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSl9fSx7a2V5OlwidHJhbnNmb3JtUG9seWdvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHJhbnNmb3JtTGluZWFyUmluZyh0LmdldEV4dGVyaW9yUmluZygpLHQpO251bGw9PT1lfHwhKGUgaW5zdGFuY2VvZiBhLmdlb20uTGluZWFyUmluZyl8fGUuaXNFbXB0eSgpO2Zvcih2YXIgbj1bXSxpPTA7aTx0LmdldE51bUludGVyaW9yUmluZygpO2krKyl7dmFyIHI9dGhpcy50cmFuc2Zvcm1MaW5lYXJSaW5nKHQuZ2V0SW50ZXJpb3JSaW5nTihpKSx0KTtudWxsPT09cnx8ci5pc0VtcHR5KCl8fCghKHIgaW5zdGFuY2VvZiBhLmdlb20uTGluZWFyUmluZyksbi5wdXNoKHIpKX1yZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2x5Z29uKGUsbil9fSx7a2V5OlwiY3JlYXRlQ29vcmRpbmF0ZVNlcXVlbmNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHUuZGVmYXVsdC5nZXRGYWN0b3J5KCkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZSh0KX19LHtrZXk6XCJ0cmFuc2Zvcm1NdWx0aUxpbmVTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5nZXROdW1HZW9tZXRyaWVzKCk7bisrKXt2YXIgaT10aGlzLnRyYW5zZm9ybUxpbmVTdHJpbmcodC5nZXRHZW9tZXRyeU4obiksdCk7bnVsbCE9PWkmJihpLmlzRW1wdHkoKXx8ZS5wdXNoKGkpKX1yZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoZSl9fSx7a2V5OlwidHJhbnNmb3JtQ29vcmRpbmF0ZXNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFjayh0LGUpfX0se2tleTpcInRyYW5zZm9ybUxpbmVTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKHRoaXMudHJhbnNmb3JtQ29vcmRpbmF0ZXModC5nZXRDb29yZGluYXRlU2VxdWVuY2UoKSx0KSl9fSx7a2V5OlwidHJhbnNmb3JtTXVsdGlQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXRoaXMudHJhbnNmb3JtUG9pbnQodC5nZXRHZW9tZXRyeU4obiksdCk7bnVsbCE9PWkmJihpLmlzRW1wdHkoKXx8ZS5wdXNoKGkpKX1yZXR1cm4gdS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVNdWx0aVBvaW50KGUpfX0se2tleTpcInRyYW5zZm9ybU11bHRpUG9seWdvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXRoaXMudHJhbnNmb3JtUG9seWdvbih0LmdldEdlb21ldHJ5TihuKSx0KTtudWxsIT09aSYmKGkuaXNFbXB0eSgpfHxlLnB1c2goaSkpfXJldHVybiB1LmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZU11bHRpUG9seWdvbihlKX19LHtrZXk6XCJjb3B5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29weSgpfX0se2tleTpcInRyYW5zZm9ybUdlb21ldHJ5Q29sbGVjdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0LmdldE51bUdlb21ldHJpZXMoKTtuKyspe3ZhciBpPXRoaXMudHJhbnNmb3JtKHQuZ2V0R2VvbWV0cnlOKG4pKTtudWxsIT09aSYmKHRoaXMucHJ1bmVFbXB0eUdlb21ldHJ5JiZpLmlzRW1wdHkoKXx8ZS5wdXNoKGkpKX1yZXR1cm4gdGhpcy5wcmVzZXJ2ZUdlb21ldHJ5Q29sbGVjdGlvblR5cGU/dS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVHZW9tZXRyeUNvbGxlY3Rpb24odS5kZWZhdWx0LmdldEZhY3RvcnkoKS50b0dlb21ldHJ5QXJyYXkoZSkpOnUuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlR2VvbWV0cnlDb2xsZWN0aW9uKGUpfX0se2tleTpcInRyYW5zZm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgYS5nZW9tLlBvaW50P3RoaXMudHJhbnNmb3JtUG9pbnQodCxudWxsKTp0IGluc3RhbmNlb2YgYS5nZW9tLk11bHRpUG9pbnQ/dGhpcy50cmFuc2Zvcm1NdWx0aVBvaW50KHQsbnVsbCk6dCBpbnN0YW5jZW9mIGEuZ2VvbS5MaW5lYXJSaW5nP3RoaXMudHJhbnNmb3JtTGluZWFyUmluZyh0LG51bGwpOnQgaW5zdGFuY2VvZiBhLmdlb20uTGluZVN0cmluZz90aGlzLnRyYW5zZm9ybUxpbmVTdHJpbmcodCxudWxsKTp0IGluc3RhbmNlb2YgYS5nZW9tLk11bHRpTGluZVN0cmluZz90aGlzLnRyYW5zZm9ybU11bHRpTGluZVN0cmluZyh0LG51bGwpOnQgaW5zdGFuY2VvZiBhLmdlb20uUG9seWdvbj90aGlzLnRyYW5zZm9ybVBvbHlnb24odCxudWxsKTp0IGluc3RhbmNlb2YgYS5nZW9tLk11bHRpUG9seWdvbj90aGlzLnRyYW5zZm9ybU11bHRpUG9seWdvbih0LG51bGwpOnQgaW5zdGFuY2VvZiBhLmdlb20uR2VvbWV0cnlDb2xsZWN0aW9uP3RoaXMudHJhbnNmb3JtR2VvbWV0cnlDb2xsZWN0aW9uKHQsbnVsbCk6bnVsbH19LHtrZXk6XCJ0cmFuc2Zvcm1MaW5lYXJSaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50cmFuc2Zvcm1Db29yZGluYXRlcyh0LmdldENvb3JkaW5hdGVTZXF1ZW5jZSgpLHQpO2lmKG51bGw9PT1lKXJldHVybiB1LmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZUxpbmVhclJpbmcobnVsbCk7dmFyIG49ZS5zaXplKCk7cmV0dXJuIG4+MCYmbjw0JiYhdGhpcy5wcmVzZXJ2ZVR5cGU/dS5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVMaW5lU3RyaW5nKGUpOnUuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZWFyUmluZyhlKX19XSksdH0oKTtlLmRlZmF1bHQ9bH0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe24odGhpcyx0KSx0aGlzLl9wb2x5Z29uPWUsdGhpcy5fbGluZWFyUmluZ0NvdWV0PWUuZ2V0TnVtSW50ZXJpb3JSaW5nKCl9cmV0dXJuIGkodCxbe2tleTpcInNoZWxsQ3JlYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zaGVsbENyZWF0b3I9dCx0aGlzfX0se2tleTpcInNoZWxsXCIsdmFsdWU6ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzLl9zaGVsbENyZWF0b3IoKTtpZihuKWZvcih2YXIgdD10aGlzLl9wb2x5Z29uLmdldEV4dGVyaW9yUmluZygpLGk9dC5nZXRDb29yZGluYXRlcygpLHI9MDtyPGkubGVuZ3RoO3IrKyllKG4saVtyXSxyKTtyZXR1cm4gdGhpc319LHtrZXk6XCJob2xlQ3JlYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ob2xlQ3JlYXRvcj10LHRoaXN9fSx7a2V5OlwiaG9sZXNcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9saW5lYXJSaW5nQ291ZXQ+MClmb3IodmFyIGU9MDtlPHRoaXMuX2xpbmVhclJpbmdDb3VldDtlKyspe3ZhciBuPXRoaXMuX2hvbGVDcmVhdG9yKCk7aWYobilmb3IodmFyIGk9dGhpcy5fcG9seWdvbi5nZXRJbnRlcmlvclJpbmdOKGUpLHI9aS5nZXRDb29yZGluYXRlcygpLG89MDtvPHIubGVuZ3RoO28rKyl0KG4scltvXSxvKX1yZXR1cm4gdGhpc319XSksdH0oKTtlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuSlRTVXRpbHM9ZS5Db29yZGluYXRlPWUuR2VvbWV0cnlGYWN0b3J5PXZvaWQgMDt2YXIgcj1uKDI0KSxvPWkociksYT1uKDQpLHM9big4KSx1PWkocyksbD1hLmdlb20uQ29vcmRpbmF0ZTtlLkdlb21ldHJ5RmFjdG9yeT1vLmRlZmF1bHQsZS5Db29yZGluYXRlPWwsZS5KVFNVdGlscz11LmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyOyhmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBvKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBhKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX12YXIgcz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiB0fSx1PW4oMSksbD1uKDEyKSxjPW4oMzYpO24oMTk5KSxuKDE5MyksbigxOTUpLG4oMTk3KSxuKDE5MiksbigyMDEpLG4oMTk4KSxuKDIwMCksbigxOTQpLG4oMTk2KTt2YXIgaD1uKDIpLGY9YShoKSxkPW4oNCkscD1hKGQpLGc9bigxMDkpLHY9YShnKSxtPW4oMTEyKSx5PWEobSksXz1uKDQ0KSxiPWEoXykseD1uKDE1KSx3PWEoeCksRT1uKDQ2KSxTPWEoRSksTT1uKDcpLEM9YShNKSxJPW4oMTI0KSxPPWEoSSksVD1uKDEyNyksUD1hKFQpLEE9bigxMzEpLEw9YShBKSxOPW4oNTApLGs9YShOKSxSPW4oMTM4KSxEPWEoUiksRj1uKDEzOSksQj1hKEYpLGo9bigxNTcpLFU9YShqKSx6PW4oNTkpLEc9YSh6KSxWPW4oMTYxKSxYPWEoViksSD1uKDE3NikscT1hKEgpLFk9bigxNzgpLFc9YShZKSxaPW4oMTgxKSxKPWEoWiksSz1uKDE4NyksUT1hKEspLCQ9big5KSx0dD1vKCQpLGV0PW4oMTAyKSxudD1hKGV0KTtsLmlzRGV2JiYod2luZG93LlRIUkVFPWYpLHdpbmRvdy5KU1RTPXA7dmFyIGl0PXthbmltYXRpb246dixjYW1lcmE6eSxjb3JlOncsZGF0YTpTLGRvbTpDLGVuZ2luZTpPLGdlb206UCxmZXRjaDp0dC5kZWZhdWx0LGxheWVyOkwsbG9jYXRpb246ayxtYXA6RCxtYXRoOkIsbmF2aTpVLG92ZXJsYXk6RyxzY2VuZTpxLHNlbnNvcjpXLHN0eWxlOkosdmlldzpRLHZlcnNpb246Yy52ZXJzaW9ufTtpZihsLnN1cHBvcnRQYXJ0aWNsZSYmdShpdCx7cGFydGljbGU6WH0pLCFsLmlzTGl0ZSl7dmFyIHJ0PXt0dWJlSGVscGVyOm50fTtpdC5oZWxwZXI9cnQsaXQuY29udHJvbD1ifVwib2JqZWN0XCI9PT1zKHQpJiZcIm9iamVjdFwiPT09cyh0LmV4cG9ydHMpP3QuZXhwb3J0cz1pdDooaT1pdCxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIGk/aS5jYWxsKGUsbixlLHQpOmksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKSksd2luZG93Lk5HUj1pdCxBcnJheS5wcm90b3R5cGUuZmlsbCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSxcImZpbGxcIix7ZW51bWVyYWJsZTohMX0pfSkuY2FsbChlLG4oMzcpKHQpKX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO2Uuc2VyaWFsaXplPWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCIsbj1bXTtmb3IodmFyIGkgaW4gdClpZih0Lmhhc093blByb3BlcnR5KGkpKXt2YXIgcj10W2ldO24ucHVzaChlbmNvZGVVUklDb21wb25lbnQoaSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHIpKX1yZXR1cm4gbi5qb2luKFwiJlwiKS5sZW5ndGg+MCYmKGU9XCI/XCIrbi5qb2luKFwiJlwiKSksZX0sZS5jaGVja1N0YXR1cz1mdW5jdGlvbih0KXtpZih0LnN0YXR1cz49MjAwJiZ0LnN0YXR1czwzMDApcmV0dXJuIHQ7dmFyIGU9bmV3IEVycm9yKHQuc3RhdHVzVGV4dCk7dGhyb3cgZS5yZXNwb25zZT10LGV9fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMikscz1pKGEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KSx0aGlzLl9sb2FkZXI9ZSx0aGlzLl9sb2FkZXIuc2V0Q3Jvc3NPcmlnaW4oXCJcIiksdGhpcy5fY2FjaGU9e319cmV0dXJuIG8odCxbe2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLG89cy5DYWNoZS5nZXQodCk7aWYobylyZXR1cm4gdGhpcy5fbG9hZGVyLmxvYWQodCxlLG4saSksdm9pZCBkZWxldGUgdGhpcy5fY2FjaGVbdF07dmFyIGE9dGhpcy5fY2FjaGVbdF07cmV0dXJuIGE/dm9pZCBhLnB1c2goe2xvYWQ6ZSxlcnJvcjppfSk6KGE9W10sdGhpcy5fY2FjaGVbdF09YSx2b2lkIHRoaXMuX2xvYWRlci5sb2FkKHQsZnVuY3Rpb24obil7ZSYmZShuKSxyLl9mb3JDYWNoZShhLGZ1bmN0aW9uKHQpe3QubG9hZCYmdC5sb2FkKG4pfSksZGVsZXRlIHIuX2NhY2hlW3RdfSxmdW5jdGlvbih0KXtuJiZuKHQpfSxmdW5jdGlvbihlKXtyLl9mb3JDYWNoZShhLGZ1bmN0aW9uKHQpe3QuZXJyb3ImJnQuZXJyb3IoZSl9KSxkZWxldGUgci5fY2FjaGVbdF0saSYmaShlKX0pKX19LHtrZXk6XCJfZm9yQ2FjaGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcig7MCE9PXQubGVuZ3RoOyllKHQucG9wKCkpfX1dKSx0fSgpO2UuZGVmYXVsdD11fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5MYXllckdyb3VwPWUuRmVhdHVyZUxheWVyPXZvaWQgMDt2YXIgcj1uKDI1KSxvPWkociksYT1uKDMwKSxzPWkoYSk7ZS5GZWF0dXJlTGF5ZXI9by5kZWZhdWx0LGUuTGF5ZXJHcm91cD1zLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDIxNSksbD1pKHUpLGM9bigxOTApLGg9aShjKSxmPW4oMTkxKSxkPWkoZikscD1uKDkpLGc9aShwKSx2PW4oMzgpLG09aSh2KSx5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuKXtyKHRoaXMsZSk7dmFyIGk9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gaS5fYmVhY29uQ29udGV4dD10LGkuX2NvbmZpZz1ufHx7fSxpfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwibmFtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJJbml0QmVhY29uQ29uZmlnUHJvdG9jYWxcIn19LHtrZXk6XCJwYXJhbXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybntiZWFjb25Db250ZXh0OnRoaXMuX2JlYWNvbkNvbnRleHQsY29uZmlnOnRoaXMuX2NvbmZpZ319fSx7a2V5Olwic3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt9fV0pLGV9KGguZGVmYXVsdCksXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuLl9iZWFjb25zPXQsbn1yZXR1cm4gYShlLHQpLHMoZSxbe2tleTpcIm5hbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiTG9jYXRpb25Qcm90b2NhbFwifX0se2tleTpcInBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue2JlYWNvbnM6dGhpcy5fYmVhY29uc319fSx7a2V5Olwic3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtlKG4ucmVzdWx0LmxvY2F0aW9uKX19XSksZX0oaC5kZWZhdWx0KSxiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cih0aGlzLGUpO3ZhciBuPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4uX2JlYWNvbnM9dCxufXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwibmFtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJCZWFjb25zUHJvdG9jYWxcIn19LHtrZXk6XCJwYXJhbXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybntiZWFjb25zOnRoaXMuX2JlYWNvbnN9fX0se2tleTpcInN1Y2Nlc3NcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7ZShuLnJlc3VsdC5sb2NhdGlvbil9fV0pLGV9KGguZGVmYXVsdCkseD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpO3ZhciB0PW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSksbj1uZXcgbC5kZWZhdWx0O3JldHVybiB0Ll93b3JrZXJFeGVjdXRvcj1uZXcgZC5kZWZhdWx0KG4pLHQuc3RhcnRQb3NpdGlvbmluZz0hMSx0fXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwiZmV0Y2hCZWFjb25Db25maWdcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdHx8IXQuYXBwS2V5fHwhdC5tYXBJZCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFwcEtleSBvciBtYXBJZFwiKTt2YXIgZT10LnNlcnZlcnx8XCJodHRwczovL3d3dy5pcGFsbWFwLmNvbS9vcGVuL3NjZW5lL2JsZS9iZWFjb25zXCIsbj1lK1wiP2FwcEtleT1cIit0LmFwcEtleStcIiZtYXBJZD1cIit0Lm1hcElkO3JldHVybigwLGcuZGVmYXVsdCkobix7aGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwifX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuanNvbigpfSl9fSx7a2V5OlwiaW5pdEJlYWNvbkNvbmZpZ1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZXx8e307cmV0dXJuIHRoaXMuX2ludGVydmFsSUQ9c2V0SW50ZXJ2YWwodGhpcy5jYWxjdWxhdGluZ1Bvcy5iaW5kKHRoaXMpLG4uaW50ZXJ2YWx8fDFlMyksdGhpcy5fd29ya2VyRXhlY3V0b3IuZXhlYyhuZXcgeShKU09OLnN0cmluZ2lmeSh0KSxuKSl9fSx7a2V5OlwidXBkYXRlUmVjZWl2ZWRCZWFjb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fd29ya2VyRXhlY3V0b3IuZXhlYyhuZXcgYihKU09OLnN0cmluZ2lmeSh0KSkpLnRoZW4oZnVuY3Rpb24oKXtlLnN0YXJ0UG9zaXRpb25pbmc9ITB9KX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSUQpLHRoaXMuX3dvcmtlckV4ZWN1dG9yLmRlc3Ryb3koKX19LHtrZXk6XCJjYWxjdWxhdGluZ1Bvc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnN0YXJ0UG9zaXRpb25pbmcmJnRoaXMuX3dvcmtlckV4ZWN1dG9yLmV4ZWMobmV3IF8pLnRoZW4oZnVuY3Rpb24oZSl7dC5lbWl0KFwibG9jYXRpb25DaGFuZ2VcIixlKX0pfX1dKSxlfShtLmRlZmF1bHQpO2UuZGVmYXVsdD14fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oODUpLHM9aShhKSx1PW4oOSksbD1pKHUpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cih0aGlzLHQpLHRoaXMuX2JsdWV0b290aExvY2F0aW9uRW5naW5lPW51bGx9cmV0dXJuIG8odCxbe2tleTpcImluaXRCZWFjb25Db25maWdcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXt9O3JldHVybiBuLkJlYWNvbnNDZmdBcnJheT10LG49SlNPTi5zdHJpbmdpZnkobiksdGhpcy5fYmx1ZXRvb3RoTG9jYXRpb25FbmdpbmU9bmV3IHMuZGVmYXVsdChuLGUpLHRoaXN9fSx7a2V5OlwiZmV0Y2hCZWFjb25Db25maWdcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdHx8IXQuYXBwS2V5fHwhdC5tYXBJZCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFwcEtleSBvciBtYXBJZFwiKTt2YXIgZT10LnNlcnZlcnx8XCJodHRwczovL3d3dy5pcGFsbWFwLmNvbS9vcGVuL3NjZW5lL2JsZS9iZWFjb25zXCIsbj1lK1wiP2FwcEtleT1cIit0LmFwcEtleStcIiZtYXBJZD1cIit0Lm1hcElkO3JldHVybigwLGwuZGVmYXVsdCkobix7aGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwifX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuanNvbigpfSl9fSx7a2V5OlwibG9jYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2JsdWV0b290aExvY2F0aW9uRW5naW5lKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQmxlTG9jYXRpb25FbmdpbmVcIik7dmFyIGU9e307cmV0dXJuIGUuQmVhY29uc0FycmF5PXQsZT1KU09OLnN0cmluZ2lmeShlKSxKU09OLnBhcnNlKHRoaXMuX2JsdWV0b290aExvY2F0aW9uRW5naW5lLmxvY2F0ZShlKSl9fSx7a2V5OlwiZ2V0QmxlTG9jYXRpb25JbmZvXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5wYXJzZSh0aGlzLl9ibHVldG9vdGhMb2NhdGlvbkVuZ2luZS5nZXRCbGVMb2NhdGlvbkluZm8oKSl9fV0pLHR9KCk7ZS5kZWZhdWx0PWN9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1uKDEpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPW4oOSksdT1pKHMpLGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KTt2YXIgbj1lLmJhc2VVcmwsaT1lLk1BQztpZighbnx8IWkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb25zXCIpO3RoaXMuX29wdGlvbnM9byh7fSxlKX1yZXR1cm4gYSh0LFt7a2V5OlwiX3BhcnNlQmVhY29uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5tYWpvcixuPXQubWlub3IsaT10LmFjY3VyYWN5LHI9dC5yc3NpO3JldHVybnttYWM6ZStcIjpcIituLGFjY3VyYWN5Ok51bWJlcihpKSxyc3NpOk51bWJlcihyKX19fSx7a2V5OlwiZmV0Y2hMb2NhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLl9vcHRpb25zLGk9bi5iYXNlVXJsLHI9bi5NQUMsbz17fTtpZighQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJlYWNvbnNcIik7cmV0dXJuIG8uYmxlPXQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9wYXJzZUJlYWNvbih0KX0pLmZpbHRlcihmdW5jdGlvbih0KXt2YXIgZT10LmFjY3VyYWN5O3JldHVybiBlPi0xfSksby51c2VyaWQ9cixvLndpZmk9W10sKDAsdS5kZWZhdWx0KShpLHtoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn0sbWV0aG9kOlwiUE9TVFwiLGJvZHk6SlNPTi5zdHJpbmdpZnkobyl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0Lmpzb24oKX0pfX1dKSx0fSgpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMTM0KSxzPWkoYSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtyKHRoaXMsdCl9cmV0dXJuIG8odCxbe2tleTpcInByb3ZpZGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGUsbj10Lk1BQyxpPXQuYmFzZVVybCxyPXZvaWQgMD09PWk/XCJodHRwOi8vbG9jYXRpb250ZXN0LnBhbG1hcC5jbjo4MFwiOmk7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiTUFDXCIpO3N3aXRjaChlKXtjYXNlXCJCTEVcIjpyZXR1cm4gbmV3IHMuZGVmYXVsdCh7YmFzZVVybDpyLE1BQzpufSk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxvY2F0b3IgdHlwZVwiKX19fV0pLHR9KCk7ZS5kZWZhdWx0PXV9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuTG9jYXRpb25TdGF0dXM9ZS5Mb2NhdGlvblR5cGU9ZS5XaUZpTG9jYXRpb25NYW5hZ2VyPXZvaWQgMDt2YXIgcz1uKDEpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPW4oNSksYz1pKGwpLGg9big5KSxmPWkoaCksZD1uKDEyOSkscD1uKDM2KSxnPXtzZXJ2ZXI6XCJodHRwczovL2FwaS5pcGFsbWFwLmNvbVwiLGhlYWRlcnM6e1wiTkFHLVZlcnNpb25cIjpwLnZlcnNpb24sQWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwifX0sdj17TUFDOlwibWFjXCIsUExBTkFSR1JBUEg6XCJmbG9vcklkXCIsSVA6XCJpcFwiLFVVSUQ6XCJ1dWlkXCIsVEFHOlwidGFnXCJ9LG09e0VOVEVSOjAsTU9WRToxLE9VVDoyLEhFQVJUQkVBVDozfSx5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCxuLGkpe3IodGhpcyxlKTt2YXIgYT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBpLmFwcEtleSl0aHJvdyBuZXcgRXJyb3IoXCJzaG91bGQgcHJvdmlkZSBhbiBhcHBLZXlcIik7cmV0dXJuIGEuc2VydmVyPWkuc2VydmVyfHxnLnNlcnZlcixhLm9wdGlvbnM9e2hlYWRlcnM6cyh7fSxnLmhlYWRlcnMse1wiTkFHLUtleVwiOmkuYXBwS2V5fSl9LGEuX3BhcnNlVVJMKHQsbiksYS5fd29ya2luZz0hMSxhLl9jb29sZERvd25UaW1lPTFlMyxhLl90eXBlPXQsYS5fdmFsdWU9bixhfXJldHVybiBhKGUsdCksdShlLFt7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3dvcmtpbmd8fCh0aGlzLl93b3JraW5nPSEwLHRoaXMuX2xvb3AoKSl9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fd29ya2luZyYmKHRoaXMuX3dvcmtpbmc9ITEpfX0se2tleTpcIl9wYXJzZVVSTFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwLGk9dDtzd2l0Y2goZSBpbnN0YW5jZW9mIEFycmF5PyhuPWUuam9pbihcIixcIiksaT10K1wic1wiKTpuPWUsdCl7Y2FzZSB2Lk1BQzpjYXNlIHYuUExBTkFSR1JBUEg6Y2FzZSB2LklQOmNhc2Ugdi5VVUlEOmNhc2Ugdi5UQUc6dGhpcy5fdXJsPXRoaXMuc2VydmVyK1wiL3Bvcz9cIitpK1wiPVwiK247YnJlYWs7ZGVmYXVsdDp0aGlzLl91cmw9dGhpcy5zZXJ2ZXIrXCIvcG9zP21hYz1cIitufX19LHtrZXk6XCJfbG9vcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl91cmwmJih0aGlzLl9sb29wUmVxdWVzdD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbigpe3JldHVybigwLGYuZGVmYXVsdCkodC5fdXJsLHQub3B0aW9ucykudGhlbihkLmNoZWNrU3RhdHVzKS50aGVuKGZ1bmN0aW9uKGUpe3QuX3dvcmtpbmcmJih0Ll9wYXJzZShlLl9ib2R5VGV4dCksMWUzIT09dC5fY29vbGREb3duVGltZSYmKHQuX2Nvb2xkRG93blRpbWU9MWUzKSx0Ll9sb29wUmVxdWVzdCgpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoZSksdC5fd29ya2luZyYmc2V0VGltZW91dChmdW5jdGlvbigpe3QuX2xvb3BSZXF1ZXN0KCl9LHQuX2Nvb2xkRG93blRpbWUqPTIpfSl9fSgpLHRoaXMuX2xvb3BSZXF1ZXN0KCkpfX0se2tleTpcIl9wYXJzZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQmJjAhPT10Lmxlbmd0aCl0cnl7dmFyIGU9SlNPTi5wYXJzZSh0KTtpZihcIkZlYXR1cmVcIj09PWUudHlwZSl0aGlzLl9wYXJzZUZlYXR1cmUoZSk7ZWxzZSBpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PT1lLnR5cGUpZm9yKHZhciBuPWUuZmVhdHVyZXMsaT1BcnJheS5pc0FycmF5KG4pLHI9MCxuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbztpZihpKXtpZihyPj1uLmxlbmd0aClicmVhaztvPW5bcisrXX1lbHNle2lmKHI9bi5uZXh0KCksci5kb25lKWJyZWFrO289ci52YWx1ZX12YXIgYT1vO3RoaXMuX3BhcnNlRmVhdHVyZShhKX19Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcInBhcnNlIGVycm9yIVwiKX19fSx7a2V5OlwiX3BhcnNlRmVhdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZW1pdChcIm9uUGFyc2VGZWF0dXJlXCIse3Jlc3VsdDp0LHR5cGU6dGhpcy5fdHlwZSx2YWx1ZTp0aGlzLl92YWx1ZX0pfX1dKSxlfShjLmRlZmF1bHQpLF89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKTt2YXIgdD1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3QuX2xvb3BzPXt9LHQuX21hY1Bvb2w9e307dmFyIG49dDtyZXR1cm4gdC5fb25QYXJzZUZlYXR1cmU9ZnVuY3Rpb24odCl7bi5fZmlyZUZlYXR1cmUodCl9LHR9cmV0dXJuIGEoZSx0KSx1KGUsW3trZXk6XCJ3YXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9nZW5lcmF0b3JLZXkodCxlKTtpZighdGhpcy5oYXMoaSkpe3ZhciByPW5ldyB5KHQsZSxuKTt0aGlzLl9sb29wc1tpXT1yLHIub24oXCJvblBhcnNlRmVhdHVyZVwiLHRoaXMuX29uUGFyc2VGZWF0dXJlKSxyLnN0YXJ0KCl9fX0se2tleTpcInVuV2F0Y2hcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2dlbmVyYXRvcktleSh0LGUpO2lmKHRoaXMuaGFzKG4pKXt2YXIgaT10aGlzLl9sb29wc1tuXTtpLm9mZihcIm9uUGFyc2VGZWF0dXJlXCIsdGhpcy5fb25QYXJzZUZlYXR1cmUpLGkuc3RvcCgpLGRlbGV0ZSB0aGlzLl9sb29wc1tuXX19fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW4gdGhpcy5fbG9vcHN9fSx7a2V5OlwiX2dlbmVyYXRvcktleVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX19LHtrZXk6XCJfZmlyZUZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnJlc3VsdDtpZihlKXt2YXIgbj1lLnByb3BlcnRpZXM7aWYobiYmbi5zdGF0dXMpe3ZhciBpPW4uaWRfZGF0YSxyPXZvaWQgMDtzd2l0Y2gobi5zdGF0dXMpe2Nhc2VcIkVOVEVSXCI6aSBpbiB0aGlzLl9tYWNQb29sP3I9bS5NT1ZFOihyPW0uRU5URVIsdGhpcy5fbWFjUG9vbFtpXT0xKTticmVhaztjYXNlXCJNT1ZFXCI6cj1tLk1PVkU7YnJlYWs7Y2FzZVwiT1VUXCI6cj1tLk9VVCxkZWxldGUgdGhpcy5fbWFjUG9vbFtpXTticmVhaztjYXNlXCJIRUFSVEJFQVRcIjpyPW0uSEVBUlRCRUFUO2JyZWFrO2RlZmF1bHQ6cj1tLk9VVCxkZWxldGUgdGhpcy5fbWFjUG9vbFtpXX10LmxvY2F0aW9uU3RhdHVzPXIsdGhpcy5lbWl0KFwib25Mb2NhdGlvbkNoYW5nZVwiLHQpfX19fV0pLGV9KGMuZGVmYXVsdCk7ZS5XaUZpTG9jYXRpb25NYW5hZ2VyPV8sZS5Mb2NhdGlvblR5cGU9dixlLkxvY2F0aW9uU3RhdHVzPW19LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBvKHQsZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQpZS5pbmRleE9mKGkpPj0wfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmKG5baV09dFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gYSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5saWZlY3ljbGVFbnVtPXZvaWQgMDt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgbj1bXSxpPSEwLHI9ITEsbz12b2lkIDA7dHJ5e2Zvcih2YXIgYSxzPXRbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0oYT1zLm5leHQoKSkuZG9uZSkmJihuLnB1c2goYS52YWx1ZSksIWV8fG4ubGVuZ3RoIT09ZSk7aT0hMCk7fWNhdGNoKHQpe3I9ITAsbz10fWZpbmFsbHl7dHJ5eyFpJiZzLnJldHVybiYmcy5yZXR1cm4oKX1maW5hbGx5e2lmKHIpdGhyb3cgb319cmV0dXJuIG59cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKXJldHVybiB0KGUsbik7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIil9fSgpLHU9bHx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0sbD1uKDEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxoPW4oOSksZj1pKGgpLGQ9big0NikscD1uKDY0KSxnPWkocCksdj1uKDQ4KSxtPWkodikseT1uKDIxKSxfPWkoeSksYj1uKDE5KSx4PWkoYiksdz1uKDI1KSxFPWkodyksUz1uKDI0KSxNPWkoUyksQz1uKDQ0KSxJPW4oMyksTz1uKDQpLFQ9big1OSksUD1uKDMyKSxBPWkoUCksTD1uKDU2KSxOPWkoTCksaz1uKDUwKSxSPW4oNiksRD1pKFIpLEY9XCJ1bmRlZmluZWRcIj09dHlwZW9mIFByb21pc2U/bigxNCkuUHJvbWlzZTpQcm9taXNlLEI9e1VOTE9BREVEOjAsTE9BRElORzoxLExPQURFRDoyLFJVTk5JTkc6MyxTVE9QUElORzo0LERFU1RST1lFRDo1fSxqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTthKHRoaXMsdCk7dmFyIG49ZS5hcHBLZXksaT1lLnN0eWxlVGVtcGxhdGU7aWYoIW58fCFpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXBwS2V5IG9yIHN5dGxlVGVtcGxhdGVcIik7dGhpcy5fb3B0aW9ucz1sKHt0YXJnZXQ6XCIjbmdyLXdlYmdsXCIsc2VydmVyOlwiaHR0cHM6Ly9hcGkuaXBhbG1hcC5jb21cIixpbml0Um90YXRpb25BbmdsZTowLGluaXRTa2V3QW5nbGU6NjAsZmxvb3JDb250cm9sOnt9LHpvb21Db250cm9sOnt9LGNvbXBhc3NDb250cm9sOnt9LHNjYWxlQ29udHJvbDp7fSxkaW1lbnNpb25Db250cm9sOnt9LG11bHRpRmxvb3JDb250cm9sOnt9LGJ1aWxkaW5nQ29udHJvbDp7fSxsaWdodDp7fSxuYXZpOnt9LGxvY2F0aW9uOnt9LGR5bmFtaWNOYXZpOnt9fSxlKTt2YXIgcj10aGlzLl9vcHRpb25zLG89ci5zZXJ2ZXIscz1yLm5hdmksdT1yLmxvY2F0aW9uO3RoaXMuX3N0YXR1cz1CLlVOTE9BREVELHRoaXMuX2VuZ2luZT1uZXcgbS5kZWZhdWx0LHRoaXMucGxhbmFyR3JhcGhzPXt9LHRoaXMuZGF0YVNvdXJjZT1uZXcgZC5EYXRhU291cmNlKHthcHBLZXk6bixzZXJ2ZXI6b30pLHRoaXMubmF2aWdhdGlvbk1hbmFnZXI9dGhpcy5faW5pdE5hdmlNYW5hZ2VyKHRoaXMuZGF0YVNvdXJjZSxzKSx0aGlzLmxvY2F0aW9uTWFuYWdlcj10aGlzLl9pbml0TG9jYXRpb25NYW5hZ2VyKHUpLHRoaXMuX29uQ2xpY2s9dGhpcy5fb25DbGljay5iaW5kKHRoaXMpLHRoaXMucmVuZGVyUGxhbmFyR3JhcGg9dGhpcy5yZW5kZXJQbGFuYXJHcmFwaC5iaW5kKHRoaXMpLHRoaXMuYWRkT3ZlcmxheT10aGlzLmFkZE92ZXJsYXkuYmluZCh0aGlzKSx0aGlzLnJlbW92ZU92ZXJsYXk9dGhpcy5yZW1vdmVPdmVybGF5LmJpbmQodGhpcyksdGhpcy5hZGRMYXllcj10aGlzLmFkZExheWVyLmJpbmQodGhpcyksdGhpcy5yZW1vdmVMYXllcj10aGlzLnJlbW92ZUxheWVyLmJpbmQodGhpcyl9cmV0dXJuIGModCxbe2tleTpcIl9pbml0TmF2aU1hbmFnZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuZW5hYmxlLGk9dm9pZCAwPT09bnx8bixyPW8oZSxbXCJlbmFibGVcIl0pO3JldHVybiBpP25ldyBBLmRlZmF1bHQodCxyKTpudWxsfX0se2tleTpcIl9pbml0RHluaW1pY05hdmlNYW5hZ2VyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5lbmFibGUsbj12b2lkIDAhPT1lJiZlLGk9dC5tZXNzYWdlT3B0aW9ucyxyPXQuY2FtZXJhT3B0aW9ucyxvPXQubG9jYXRpb25PcHRpb25zLGE9dGhpcy5tYXBWaWV3LHM9dGhpcy5uYXZpZ2F0aW9uTWFuYWdlcjtyZXR1cm4gbiYmcz9uZXcgTi5kZWZhdWx0KGEscyxpLHIsbyk6bnVsbH19LHtrZXk6XCJfaW5pdExvY2F0aW9uTWFuYWdlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtzd2l0Y2goZSl7Y2FzZVwiV2ktRmlcIjpyZXR1cm4gbmV3IGsuV2lGaUxvY2F0aW9uTWFuYWdlcjtjYXNlXCJibHVldG9vdGhcIjpyZXR1cm4gbmV3IGsuQmxlV29ya2VyTWFuYWdlcjtkZWZhdWx0OnJldHVybiBudWxsfX19LHtrZXk6XCJfZ2VuTGlnaHRMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5lbmFibGUsaT12b2lkIDA9PT1ufHxuLHI9ZS5wb3NpdGlvbixvPXZvaWQgMD09PXI/WzAsMzAwLDMwMF06cixhPWUuaWQscz12b2lkIDA9PT1hPzE6YSx1PW51bGw7aWYoaSl7dmFyIGw9bmV3IGQuRmVhdHVyZShNLmRlZmF1bHQuY3JlYXRlUG9pbnQoby5jb25jYXQoKSkse2lkOnN9KTt1PW5ldyBFLmRlZmF1bHQoXCJsaWdodFwiLHQpLHUuYWRkRmVhdHVyZShsKX1yZXR1cm4gdX19LHtrZXk6XCJfZ2VuQ29udHJvbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPWUuZW5hYmxlLHI9dm9pZCAwPT09aXx8aSxhPW8oZSxbXCJlbmFibGVcIl0pLHM9bnVsbDtpZihyKXtzd2l0Y2godCl7Y2FzZVwiem9vbVwiOnM9bmV3IEMuWm9vbUNvbnRyb2woYSk7YnJlYWs7Y2FzZVwic2NhbGVcIjpzPW5ldyBDLlNjYWxlQ29udHJvbChhKTticmVhaztjYXNlXCJjb21wYXNzXCI6cz1uZXcgQy5Db21wYXNzQ29udHJvbChhKTticmVhaztjYXNlXCJkaW1lbnNpb25cIjpzPW5ldyBDLkRpbWVuc2lvbkNvbnRyb2woYSk7YnJlYWs7Y2FzZVwiZmxvb3JcIjp2YXIgbD1hLmZsb29yTGlzdCxjPW8oYSxbXCJmbG9vckxpc3RcIl0pO3M9bmV3IEMuRmxvb3JDb250cm9sKGMpLHMuc2V0Rmxvb3JMaXN0KGwuY29uY2F0KCkucmV2ZXJzZSgpKSxzLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24odCl7dmFyIGU9dC5mcm9tLGk9dC50byxyPXQudGFyZ2V0Q29udHJvbCxvPU51bWJlcihyLmZsb29yTWFwW2ldLmFsdGl0dWRlKXx8MCxhPU51bWJlcihyLmZsb29yTWFwW2VdLmFsdGl0dWRlKXx8MDtjb25zb2xlLmxvZyhcImZsb29yIGNoYW5nZSBmcm9tIFwiK2UrXCIgdG8gXCIraSksci5zZXRDdXJyZW50Rmxvb3IoaSksbi5yZW5kZXJQbGFuYXJHcmFwaChOdW1iZXIoaSkse2RpcmVjdGlvbjpvLWE+MD9cInVwXCI6XCJkb3duXCJ9KX0pO2JyZWFrO2Nhc2VcIm11bHRpRmxvb3JcIjp2YXIgaD1hLmZsb29yTGlzdCxmPW8oYSxbXCJmbG9vckxpc3RcIl0pO3M9bmV3IEMuTXVsdGlGbG9vckNvbnRyb2woZikscy5zZXRGbG9vckxpc3QoaC5jb25jYXQoKS5yZXZlcnNlKCkpO2JyZWFrO2Nhc2VcImJ1aWxkaW5nXCI6dmFyIGQ9YS5iYXNlQWRkcmVzcyxwPXZvaWQgMD09PWQ/XCJiYXNlXCI6ZCxnPWEuYnVpbGRpbmdMaXN0LHY9byhhLFtcImJhc2VBZGRyZXNzXCIsXCJidWlsZGluZ0xpc3RcIl0pLG09Zy5jb25jYXQoKTttLnB1c2goe2lkOnRoaXMuX2Jhc2VGbG9vcklkLGFkZHJlc3M6cH0pLHM9bmV3IEMuRmxvb3JDb250cm9sKHUoe25hbWU6XCJtdWx0aUJ1aWxkaW5nXCIsY2xhc3NOYW1lOlwibmdyLWJ1aWxkaW5nLXN3aXRjaGVyXCJ9LHYpKSxzLnNldEZsb29yTGlzdChtLnJldmVyc2UoKSkscy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZnJvbSxpPXQudG8scj10LnRhcmdldENvbnRyb2w7Y29uc29sZS5sb2coXCJidWlsZGluZyBjaGFuZ2UgZnJvbSBcIitlK1wiIHRvIFwiK2kpLHIuc2V0Q3VycmVudEZsb29yKGksZnVuY3Rpb24odCl7bi5fY2xlYXJGbG9vckNvbnRyb2woKSx0PT09bi5iYXNlRmxvb3JJZD9uLmxvYWRCYXNlRmxvb3IoKTpuLnJlbmRlckJ1aWxkaW5nKHQpfSl9KTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIkludmFsaWQgY29udHJvbCB0eXBlXCIpfXMmJnMuYWRkVG8odGhpcy5tYXBWaWV3KX1yZXR1cm4gc319LHtrZXk6XCJfY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGVhckJ1aWxkaW5nQ29udHJvbCgpLHRoaXMuX2NsZWFyRmxvb3JDb250cm9sKCksdGhpcy5wbGFuYXJHcmFwaHM9e30sdGhpcy5fYmFzZUZsb29ySWQ9bnVsbCx0aGlzLl9idWlsZGluZ0luZm9MaXN0PW51bGwsdGhpcy5fYnVpbGRpbmdMaXN0PW51bGwsdGhpcy5fZmxvb3JJbmZvTWFwPW51bGwsdGhpcy5fbWFwSWQ9bnVsbCx0aGlzLl9vZmZzZXRDb29yZD1udWxsLHRoaXN9fSx7a2V5OlwiX2NyZWF0ZU92ZXJsYXlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmVsZW1lbnQsbj10LnVybCxpPW8odCxbXCJlbGVtZW50XCIsXCJ1cmxcIl0pLHI9bnVsbDtpZihlJiZlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpcj1uZXcgVC5PdmVybGF5KGUpO2Vsc2V7aWYoIW4pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBlbGVtZW50IG9yIHVybFwiKTtyPW5ldyBULkljb25PdmVybGF5KHUoe30saSx7dXJsOm59KSl9cmV0dXJuIHJ9fSx7a2V5OlwiX2NyZWF0ZUxheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKCEoMCxJLmlzU3RyaW5nKSh0KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxheWVyIG5hbWVcIik7dmFyIGk9bmV3IEUuZGVmYXVsdCh0LHRoaXMubWFwVmlldy5zdHlsZUdlbmVyYXRvcik7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gaS5hZGRGZWF0dXJlKG4uY3JlYXRlRmVhdHVyZSh0KSl9LHRoaXMpLGl9fSx7a2V5OlwiX2NoZWNrUnVubmluZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fc3RhdHVzIT09Qi5SVU5OSU5HKXRocm93IG5ldyBFcnJvcihcIm1hcCBpcyBub3QgcnVubmluZ1wiKTtyZXR1cm4gdGhpc319LHtrZXk6XCJvZmZzZXRcIix2YWx1ZTpmdW5jdGlvbiB0KGUsbil7dmFyIHQ9dGhpcy5nZXRPZmZzZXQoKTtyZXR1cm57eDplK3QueCx5Om4rdC55fX19LHtrZXk6XCJ1bm9mZnNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5nZXRPZmZzZXQoKTtyZXR1cm57eDp0LW4ueCx5OmUtbi55fX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXModC50b3VjaGVzLDEpLG49ZVswXSxpPW4uY2xpZW50WCxyPW4uY2xpZW50WTtpZighKDAsSS5pc0Z1bmN0aW9uKSh0aGlzLm9uQ2xpY2spfHx0aGlzLl9zdGF0dXMhPT1CLlJVTk5JTkcpcmV0dXJuIHRoaXM7dmFyIG89dGhpcy5tYXBWaWV3LnNlYXJjaE9iamVjdHNCeUNsaWVudChpLHIpO2lmKDA9PT1vLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgYT1vWzBdLHU9YS5mZWF0dXJlLGw9YS5wb2ludCxjPWwueCxoPWwueSxmPWwueixkPXRoaXMudW5vZmZzZXQoYyxoKSxwPWQueCxnPWQueTtyZXR1cm4gdGhpcy5vbkNsaWNrKHtwb2ludDp7eDpwLHk6Zyx6OmZ9LGZlYXR1cmU6dSxsYXllcjp1LnBhcmVudH0pLHRoaXN9fSx7a2V5OlwiX2NsZWFyRmxvb3JDb250cm9sXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZsb29yQ29udHJvbHx8dGhpcy5tdWx0aUZsb29yQ29udHJvbDtyZXR1cm4gdGhpcy5tYXBWaWV3JiZ0JiYodGhpcy5tYXBWaWV3LnJlbW92ZURvbUNvbnRyb2wodCksdGhpcy5mbG9vckNvbnRyb2w9bnVsbCx0aGlzLm11bHRpRmxvb3JDb250cm9sPW51bGwpLHRoaXN9fSx7a2V5OlwiX2NsZWFyQnVpbGRpbmdDb250cm9sXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJ1aWxkaW5nQ29udHJvbDtyZXR1cm4gdGhpcy5tYXBWaWV3JiZ0JiYodGhpcy5tYXBWaWV3LnJlbW92ZURvbUNvbnRyb2wodCksdGhpcy5idWlsZGluZ0NvbnRyb2w9bnVsbCksdGhpc319LHtrZXk6XCJfaW5pdE1hcFZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMubWFwVmlldylyZXR1cm4gdGhpczt2YXIgdD10aGlzLl9vcHRpb25zLGU9dC5keW5hbWljTmF2aSxuPXQudGFyZ2V0LGk9dC5pbml0Um90YXRpb25BbmdsZSxyPXQuaW5pdFNrZXdBbmdsZSxvPXQubGlnaHQsYT10Lnpvb21Db250cm9sLHM9dC5jb21wYXNzQ29udHJvbCxsPXQuc2NhbGVDb250cm9sLGM9dC5kaW1lbnNpb25Db250cm9sLGg9dC53aWR0aCxmPXQuaGVpZ2h0LGQ9dC5kZXZpY2VQaXhlbFJhdGlvLHA9dm9pZCAwPT09ZD8xOmQsdj10LmNsZWFyQ29sb3IsbT10LmNsZWFySW1hZ2UseT10LmZwcyxiPShofHx3aW5kb3cuaW5uZXJXaWR0aCkvKGZ8fHdpbmRvdy5pbm5lckhlaWdodCksdz1uZXcgXy5kZWZhdWx0KDQ1LGIsMSw4ZTQpLEU9bmV3IGcuZGVmYXVsdCh0aGlzLl9zdHlsZUpzb24pLFM9bmV3IHguZGVmYXVsdChuLHtzdHlsZUdlbmVyYXRvcjpFLGluaXRTa2V3QW5nbGU6cixpbml0Um90YXRpb25BbmdsZTppfSk7cmV0dXJuIHcuY2FtZXJhLnBvc2l0aW9uLnNldCgwLDAsMTAwKSxTLmFjdGl2ZUNhbWVyYT13LHRoaXMuX2VuZ2luZS5pbml0TWFwVmlldyhTLHt3aWR0aDpoLGhlaWdodDpmLGRldmljZVBpeGVsUmF0aW86cCxjbGVhckNvbG9yOnYsY2xlYXJJbWFnZTptLGZwczp5fSksdGhpcy5tYXBWaWV3PVMsdGhpcy5fc2NlbmVNYW5hZ2VyPVMuc2NlbmVNYW5hZ2VyLHRoaXMuX2FjdGl2ZUNvbnRyb2w9Uy5hY3RpdmVDb250cm9sLHRoaXMuX2xpZ2h0PXRoaXMuX2dlbkxpZ2h0TGF5ZXIoRSxvKSx0aGlzLnpvb21Db250cm9sPXRoaXMuX2dlbkNvbnRyb2woXCJ6b29tXCIsYSksdGhpcy5jb21wYXNzQ29udHJvbD10aGlzLl9nZW5Db250cm9sKFwiY29tcGFzc1wiLHMpLHRoaXMuc2NhbGVDb250cm9sPXRoaXMuX2dlbkNvbnRyb2woXCJzY2FsZVwiLGwpLHRoaXMuZGltZW5zaW9uQ29udHJvbD10aGlzLl9nZW5Db250cm9sKFwiZGltZW5zaW9uXCIsdSh7ZW5hYmxlOiExfSxjKSksUy5zdGFydCgpLFMuZ2VzdHVyZU1hbmFnZXIub24oXCJ0YXBcIix0aGlzLl9vbkNsaWNrKSx0aGlzLmR5bmFtaWNOYXZpZ2F0aW9uTWFuYWdlcj10aGlzLl9pbml0RHluaW1pY05hdmlNYW5hZ2VyKGUpLHRoaXN9fSx7a2V5OlwiX3JlbmRlckJ1aWxkaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9zdGF0dXM9Qi5MT0FERUQ7dmFyIG49dGhpcy5fb3B0aW9ucyxpPW4uZGVmYXVsdEZsb29ySWQscj1uLmZsb29yQ29udHJvbCxvPW4ubXVsdGlGbG9vckNvbnRyb2wsYT10aGlzLm1hcFZpZXcscz10aGlzLm9uTG9hZCxsPXRoaXMuX2Zsb29ySW5mb01hcFt0XS5jb25jYXQoKSxjPXZvaWQgMDtpZih0aGlzLmZsb29yQ29udHJvbD10aGlzLl9nZW5Db250cm9sKFwiZmxvb3JcIix1KHt9LHIse2Zsb29yTGlzdDpsfSkpLHRoaXMuZmxvb3JDb250cm9sfHwodGhpcy5tdWx0aUZsb29yQ29udHJvbD10aGlzLl9nZW5Db250cm9sKFwibXVsdGlGbG9vclwiLHUoe2VuYWJsZTohMSxmbG9vckxpc3Q6bH0sbykpKSxpKWM9aTtlbHNle2M9bFswXS5pZDtmb3IodmFyIGg9bCxmPUFycmF5LmlzQXJyYXkoaCksZD0wLGg9Zj9oOmhbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBwO2lmKGYpe2lmKGQ+PWgubGVuZ3RoKWJyZWFrO3A9aFtkKytdfWVsc2V7aWYoZD1oLm5leHQoKSxkLmRvbmUpYnJlYWs7cD1kLnZhbHVlfXZhciBnPXA7aWYoZy5kZWZhdWx0fHxnLmRlZmF1bHRGbG9vcil7Yz1nLmlkO2JyZWFrfX19cmV0dXJuIHRoaXMuX3N0YXR1cz1CLlJVTk5JTkcsdGhpcy5tdWx0aUZsb29yQ29udHJvbD8odGhpcy5tdWx0aUZsb29yQ29udHJvbC5kZWZhdWx0Rmxvb3JJZD1jLHRoaXMubXVsdGlGbG9vckNvbnRyb2wuc2V0Q3VycmVudEZsb29yKGMpLHRoaXMuX3JlbmRlck11bHRpUGxhbmFyR3JhcGhzKHQpLHRoaXMubXVsdGlGbG9vckNvbnRyb2wuaGlnaGxpZ2h0UEdzKFtjXSkpOih0aGlzLnJlbmRlclBsYW5hckdyYXBoKGMpLHRoaXMuZmxvb3JDb250cm9sJiYodGhpcy5mbG9vckNvbnRyb2wuZGVmYXVsdEZsb29ySWQ9Yyx0aGlzLmZsb29yQ29udHJvbC5zZXRDdXJyZW50Rmxvb3IoYykpKSx0aGlzLl9iYXNlRmxvb3JJZHx8YS5uZXh0KDEsZnVuY3Rpb24oKXtlLnNjYWxlQ29udHJvbCYmZS5zY2FsZUNvbnRyb2wudXBkYXRlKCksKDAsSS5pc0Z1bmN0aW9uKShzKSYmcyhlKX0pLHRoaXN9fSx7a2V5OlwiX3JlbmRlck11bHRpUGxhbmFyR3JhcGhzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuX29wdGlvbnMuZmxvb3JIZWlnaHQsaT12b2lkIDA9PT1uPzYwOm4scj10aGlzLl9saWdodCxvPXRoaXMubWFwVmlldyxhPXRoaXMuX2Zsb29ySW5mb01hcFt0XS5jb25jYXQoKS5tYXAoZnVuY3Rpb24odCl7dmFyIG49dC5pZDtyZXR1cm4gbmV3IGQuUGxhbmFyR3JhcGgoZS5wbGFuYXJHcmFwaHNbbl0pfSk7by5mbG9vckhlaWdodD1pLG8uYWN0aXZlQ29udHJvbC5fZW5hYmxlVmVydGljYWxNb3ZlPSEwLG8uZHJhd011bHRpUGxhbmFyR3JhcGgoYSksciYmby5hZGRMYXllcihyKX19LHtrZXk6XCJnZXRMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7cmV0dXJuIHRoaXMubWFwVmlldyYmKGU9dGhpcy5tYXBWaWV3LmdldExheWVyKHQpKSxlfX0se2tleTpcImhhc0xheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLmdldExheWVyKHQpfX0se2tleTpcInNob3dQbGFuYXJHcmFwaHNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2hlY2tSdW5uaW5nKCksdGhpcy5tdWx0aUZsb29yQ29udHJvbHx8Y29uc29sZS53YXJuKFwibWFwIGlzIG5vdCBpbiBtdWx0aS1mbG9vciBtb2RlXCIpLHRoaXMubWFwVmlldy5zaG93UGxhbmFyR3JhcGhzKHQpfX0se2tleTpcInJlbmRlclBsYW5hckdyYXBoXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuX2NoZWNrUnVubmluZygpLHRoaXMubXVsdGlGbG9vckNvbnRyb2wmJmNvbnNvbGUud2FybihcIm1hcCBpcyBpbiBtdWx0aS1mbG9vciBtb2RlXCIpO3ZhciBpPXRoaXMucGxhbmFyR3JhcGhzW3RdO2lmKCFpKXRocm93IG5ldyBFcnJvcihcInBsYW5hckdyYXBoIHVubG9hZGVkXCIpO2lmKHRoaXMubWFwVmlldy5kcmF3UGxhbmFyR3JhcGgobmV3IGQuUGxhbmFyR3JhcGgoaSkpLHRoaXMuX2xpZ2h0JiZ0aGlzLm1hcFZpZXcuYWRkTGF5ZXIodGhpcy5fbGlnaHQpLGUpe3ZhciByPWUuZGlyZWN0aW9uLG89dGhpcy5tYXBWaWV3LmFjdGl2ZUNvbnRyb2wudGFyZ2V0LGE9dGhpcy51bm9mZnNldChvLngsby55KSxzPWEueCx1PWEueSxsPTA7dGhpcy5lbmFibGVWZXJ0aWNhbE1vdmUoKSxcInVwXCI9PT1yP2w9LTEwMDpcImRvd25cIj09PXImJihsPTEwMCksRC5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZOdW1iZXIobCwwLDMwMCkub24oXCJ1cGRhdGVcIixmdW5jdGlvbih0LGUpe3ZhciBpPWUubnVtO24ubW92ZVRvUG9pbnQoe3g6cyx5OnUsejppfSx7bmVlZFVwZGF0ZTohMCxuZWVkQ29sbGlzaW9uOiExLGVtaXRFbmQ6ITF9KX0pLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbigpe24ubW92ZSh7eDpzLHk6dSx6OjB9LHtuZWVkVXBkYXRlOiEwLG5lZWRDb2xsaXNpb246ITAsZW1pdEVuZDohMH0pfSkuc3RhcnQoKX1yZXR1cm4gdGhpc319LHtrZXk6XCJyZW5kZXJCdWlsZGluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5fYnVpbGRpbmdMaXN0LmluZGV4T2YodCk9PT0tMSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJ1aWxkaW5nIGlkXCIpO3ZhciBuPXRoaXMuZGF0YVNvdXJjZTtyZXR1cm4gdGhpcy5fc3RhdHVzPUIuTE9BRElORyx0aGlzLl9mbG9vckluZm9NYXBbdF0/dGhpcy5fcmVuZGVyQnVpbGRpbmcodCk6bi5yZXF1ZXN0UE9JQ2hpbGRyZW4odCkudGhlbihmdW5jdGlvbihpKXtyZXR1cm4gZS5fZmxvb3JJbmZvTWFwW3RdPWkuY29uY2F0KCksRi5hbGwoaS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVxdWVzdFBsYW5hckdyYXBoKHQuaWQpfSkpfSkudGhlbihmdW5jdGlvbihuKXt2YXIgaT1lLl9mbG9vckluZm9NYXBbdF0ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlkfSk7bi5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7ZS5wbGFuYXJHcmFwaHNbaVtuXV09dH0pLGUuX3JlbmRlckJ1aWxkaW5nKHQpfSksdGhpc319LHtrZXk6XCJjcmVhdGVGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5pZCxuPXQudHlwZSxpPXQuY29vcmRpbmF0ZXMscj10LnByb3BlcnRpZXMsbz1udWxsO2lmKCEoMCxJLmlzTnVtYmVyKShlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlkOiBpZCBtdXN0IGJlIGEgbnVtYmVyXCIpO3N3aXRjaChuKXtjYXNlXCJQb2ludFwiOm89TS5kZWZhdWx0LmNyZWF0ZVBvaW50KGkpO2JyZWFrO2Nhc2VcIlBvbHlnb25cIjpvPU0uZGVmYXVsdC5jcmVhdGVQb2x5Z29uKGkpO2JyZWFrO2Nhc2VcIkxpbmVTdHJpbmdcIjpvPU0uZGVmYXVsdC5jcmVhdGVMaW5lU3RyaW5nKGkpO2JyZWFrO2Nhc2VcIk11bHRpUG9pbnRcIjpvPU0uZGVmYXVsdC5jcmVhdGVNdWx0aVBvaW50KGkpO2JyZWFrO2Nhc2VcIk11bHRpUG9seWdvblwiOm89TS5kZWZhdWx0LmNyZWF0ZU11bHRpUG9seWdvbihpKTticmVhaztjYXNlXCJNdWx0aUxpbmVTdHJpbmdcIjpvPU0uZGVmYXVsdC5jcmVhdGVNdWx0aUxpbmVTdHJpbmcoaSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGdlb21ldHJ5IHR5cGVcIil9cmV0dXJuIG5ldyBkLkZlYXR1cmUobyx1KHt9LHIse2lkOmV9KSl9fSx7a2V5OlwiY3JlYXRlTGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5uYW1lLGk9dC5uZWVkT2Zmc2V0LHI9dm9pZCAwPT09aXx8aSxvPXQuZmVhdHVyZXM7aWYoISgwLEkuaXNTdHJpbmcpKG4pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGF5ZXIgbmFtZVwiKTt2YXIgYT1uZXcgRS5kZWZhdWx0KG4sdGhpcy5tYXBWaWV3LnN0eWxlR2VuZXJhdG9yKTtpZihyKXRyeXthLmNvb3JkaW5hdGVTeXN0ZW09dGhpcy5tYXBWaWV3LmNvb3JkaW5hdGVTeXN0ZW19Y2F0Y2godCl7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtYXAgY29vcmRpbmF0ZSBzeXN0ZW1cIil9cmV0dXJuIG8uZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gYS5hZGRGZWF0dXJlKGUuY3JlYXRlRmVhdHVyZSh0KSl9LHRoaXMpLGF9fSx7a2V5OlwiYWRkTGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1udWxsO3JldHVybiB0aGlzLl9jaGVja1J1bm5pbmcoKSxlPXQgaW5zdGFuY2VvZiBFLmRlZmF1bHQ/dDp0aGlzLmNyZWF0ZUxheWVyKHQpLHRoaXMubWFwVmlldy5hZGRMYXllcihlKSxlfX0se2tleTpcInJlbW92ZUxheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NoZWNrUnVubmluZygpLHRoaXMubWFwVmlldy5yZW1vdmVMYXllcih0KSx0aGlzfX0se2tleTpcImFkZE92ZXJsYXlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Lm5lZWRPZmZzZXQsbj12b2lkIDA9PT1lfHxlLGk9dC5wb3NpdGlvbixhPW8odCxbXCJuZWVkT2Zmc2V0XCIsXCJwb3NpdGlvblwiXSk7aWYodGhpcy5fY2hlY2tSdW5uaW5nKCksISgwLEkuaXNBcnJheSkoaSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb3NpdGlvbjogcG9zaXRpb24gbXVzdCBiZSBhbiBhcnJheVwiKTt2YXIgcz10aGlzLl9jcmVhdGVPdmVybGF5KGEpO3JldHVybiBuJiYocy5jb29yZGluYXRlU3lzdGVtPXRoaXMubWFwVmlldy5jb29yZGluYXRlU3lzdGVtKSx0aGlzLm1hcFZpZXcuYWRkT3ZlcmxheShzKSxzLnBvc2l0aW9uPW5ldyhGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShPLmdlb20uQ29vcmRpbmF0ZSxbbnVsbF0uY29uY2F0KHIoaSkpKSksc319LHtrZXk6XCJyZW1vdmVPdmVybGF5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NoZWNrUnVubmluZygpLHRoaXMubWFwVmlldy5yZW1vdmVPdmVybGF5KHQpLHRoaXN9fSx7a2V5OlwiZ2V0T2Zmc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9vZmZzZXRDb29yZClyZXR1cm4gdGhpcy5fb2Zmc2V0Q29vcmQuY29weSgpO3RyeXtyZXR1cm4gdGhpcy5fb2Zmc2V0Q29vcmQ9bmV3KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KE8uZ2VvbS5Db29yZGluYXRlLFtudWxsXS5jb25jYXQocih0aGlzLm1hcFZpZXcuY29vcmRpbmF0ZVN5c3RlbS5nZXRPZmZzZXQoKSkpKSksdGhpcy5fb2Zmc2V0Q29vcmQuY29weSgpfWNhdGNoKHQpe3JldHVybiBudWxsfX19LHtrZXk6XCJzZXRTY2FsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkscixvKXtyZXR1cm4gdGhpcy5fc2NlbmVNYW5hZ2VyLnNldFNjYWxlKHQsZSxuLGkscixvKSx0aGlzfX0se2tleTpcInNldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3JldHVybiB0aGlzLl9zY2VuZU1hbmFnZXIuc2V0UG9zaXRpb24odCxlLG4saSxyLG8pLHRoaXN9fSx7a2V5OlwicXVpY2tTZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkscixvKXtyZXR1cm4gdGhpcy5fc2NlbmVNYW5hZ2VyLnF1aWNrU2V0UG9zaXRpb24odCxlLG4saSxyLG8pLHRoaXN9fSx7a2V5Olwic2V0Um90YXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIsbyl7cmV0dXJuIHRoaXMuX3NjZW5lTWFuYWdlci5zZXRSb3RhdGlvbih0LGUsbixpLHIsbyksdGhpc319LHtrZXk6XCJzZXRWaXNpYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSl7cmV0dXJuIHRoaXMuX3NjZW5lTWFuYWdlci5zZXRWaXNpYmxlKHQsZSxuLGkpLHRoaXN9fSx7a2V5Olwic2V0Q29sb3JcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gdGhpcy5fc2NlbmVNYW5hZ2VyLnNldENvbG9yKHQsZSxuLGkpLHRoaXN9fSx7a2V5OlwicmVzZXRDb2xvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5fc2NlbmVNYW5hZ2VyLnJlc2V0Q29sb3IodCxlLG4pLHRoaXN9fSx7a2V5Olwic2V0T3BhY2l0eVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3JldHVybiB0aGlzLl9zY2VuZU1hbmFnZXIuc2V0T3BhY2l0eSh0LGUsbixpKSx0aGlzfX0se2tleTpcInJlc2V0U3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXtyZXR1cm4gdGhpcy5fc2NlbmVNYW5hZ2VyLnJlc2V0U3R5bGUodCxlLG4saSksdGhpc319LHtrZXk6XCJzZXRWYWx1ZUNoYW5nZUJ5RmVhdHVyZXNcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpLHI9YXJndW1lbnRzLmxlbmd0aCxvPUFycmF5KHI+Mz9yLTM6MCksYT0zO2E8cjthKyspb1thLTNdPWFyZ3VtZW50c1thXTtyZXR1cm4oaT10aGlzLl9zY2VuZU1hbmFnZXIpLnNldFZhbHVlQ2hhbmdlQnlGZWF0dXJlcy5hcHBseShpLFt0LGUsbl0uY29uY2F0KG8pKSx0aGlzfX0se2tleTpcInNldERpc3RhbmNlUmFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Lm1pbkRpc3RhbmNlLG49dC5tYXhEaXN0YW5jZTtyZXR1cm4oMCxJLmlzTnVtYmVyKShlKSYmKHRoaXMuX2FjdGl2ZUNvbnRyb2wubWluRGlzdGFuY2U9ZSksKDAsSS5pc051bWJlcikobikmJih0aGlzLl9hY3RpdmVDb250cm9sLm1heERpc3RhbmNlPW4pLHRoaXN9fSx7a2V5OlwiZ2V0RGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLmdldGZvY2FsTGVuZ3RoKCl9fSx7a2V5Olwic2V0U2tld0FuZ2xlUmFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Lm1pbkFuZ2xlLG49dC5tYXhBbmdsZTtyZXR1cm4oMCxJLmlzTnVtYmVyKShlKSYmKHRoaXMuX2FjdGl2ZUNvbnRyb2wubWluQW5nbGU9ZSksKDAsSS5pc051bWJlcikobikmJih0aGlzLl9hY3RpdmVDb250cm9sLm1heEFuZ2xlPW4pLHRoaXN9fSx7a2V5OlwiZ2V0U2tld0FuZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQ29udHJvbC5nZXRTa2V3KCl9fSx7a2V5OlwiZ2V0Um90YXRpb25BbmdsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUNvbnRyb2wuZ2V0Um90YXRlKCl9fSx7a2V5OlwiZW5hYmxlVmVydGljYWxNb3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQ29udHJvbC5lbmFibGVWZXJ0aWNhbE1vdmUoKSx0aGlzfX0se2tleTpcImRpc2FibGVWZXJ0aWNhbE1vdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLmRpc2FibGVWZXJ0aWNhbE1vdmUoKSx0aGlzfX0se2tleTpcIm1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj10LngsaT10Lnkscj10Lnosbz12b2lkIDA9PT1yPzA6cixhPWUubmVlZFVwZGF0ZSxzPWUubmVlZENvbGxpc2lvbix1PWUuZW1pdEVuZDtyZXR1cm4gdGhpcy5fYWN0aXZlQ29udHJvbC5tb3ZlKG4saSxvLGEscyx1KSx0aGlzfX0se2tleTpcIm1vdmVUb1BvaW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49dC54LGk9dC55LHI9dC56LG89dm9pZCAwPT09cj8wOnIsYT10aGlzLm9mZnNldChuLGkpLHM9YS54LHU9YS55LGw9ZS5uZWVkVXBkYXRlLGM9ZS5uZWVkQ29sbGlzaW9uLGg9ZS5lbWl0RW5kO3JldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLm1vdmVUb1BvaW50KHMsdSxvLGwsYyxoKSx0aGlzfX0se2tleTpcImZpdEJvdW5kc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKDQhPT10Lmxlbmd0aCYmNiE9PXQubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYm91bmRzXCIpO3ZhciBuPWUucmF0aW8saT1lLmhhc09mZnNldCxyPWUubmVlZFVwZGF0ZSxvPWUubmVlZENvbGxpc2lvbixhPWUuZW1pdEVuZCx1PWUubmVlZEFuaW1hdGlvbixsPWUubmVlZFJvdGF0ZVRvWmVybyxjPW51bGw7aWYoND09PXQubGVuZ3RoKXt2YXIgaD1zKHQsNCksZj1oWzBdLGQ9aFsxXSxwPWhbMl0sZz1oWzNdLHY9dGhpcy5vZmZzZXQoZixkKSxtPXYueCx5PXYueSxfPXRoaXMub2Zmc2V0KHAsZyksYj1fLngseD1fLnk7Yz1bbSx5LGIseF19ZWxzZXtpZig2IT09dC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBib3VuZHNcIik7dmFyIHc9cyh0LDYpLEU9d1swXSxTPXdbMV0sTT13WzJdLEM9d1szXSxJPXdbNF0sTz13WzVdLFQ9dGhpcy5vZmZzZXQoRSxTKSxQPVQueCxBPVQueSxMPXRoaXMub2Zmc2V0KEMsSSksTj1MLngsaz1MLnk7Yz1bUCxBLE0sTixrLE9dfXRoaXMuX2FjdGl2ZUNvbnRyb2woYyxuLGkscixvLGEsdSxsKX19LHtrZXk6XCJ6b29tXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49ZS5uZWVkVXBkYXRlLGk9ZS5uZWVkQ29sbGlzaW9uLHI9ZS5lbWl0RW5kO3JldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLnpvb20odCxuLGksciksdGhpc319LHtrZXk6XCJ6b29tQnlGb2NhbExlbmd0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWUubmVlZFVwZGF0ZSxpPWUubmVlZENvbGxpc2lvbixyPWUuZW1pdEVuZDtyZXR1cm4gdGhpcy5fYWN0aXZlQ29udHJvbC56b29tQnlGb2NhbExlbmd0aCh0LG4saSxyKSx0aGlzfX0se2tleTpcInNrZXdUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWUubmVlZFVwZGF0ZSxpPWUubmVlZENvbGxpc2lvbixyPWUuZW1pdEVuZDtyZXR1cm4gdGhpcy5fYWN0aXZlQ29udHJvbC5za2V3VG8odCxuLGksciksdGhpc319LHtrZXk6XCJza2V3XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49ZS5uZWVkVXBkYXRlLGk9ZS5uZWVkQ29sbGlzaW9uLHI9ZS5lbWl0RW5kO3JldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLnNrZXcodCxuLGksciksdGhpc319LHtrZXk6XCJyb3RhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1lLmNlbnRlcixpPWUubmVlZFVwZGF0ZSxyPWUubmVlZENvbGxpc2lvbixvPWUuZW1pdEVuZCxhPTAscz0wO2lmKG4mJm4ueCYmbi55KXt2YXIgdT10aGlzLm9mZnNldChuLngsbi55KSxsPXUueCxjPXUueTthPWwscz1jfXJldHVybiB0aGlzLl9hY3RpdmVDb250cm9sLnJvdGF0ZShhLHMsdCxpLHIsbyksdGhpc319LHtrZXk6XCJyb3RhdGVUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWUuY2VudGVyLGk9ZS5uZWVkVXBkYXRlLHI9ZS5uZWVkQ29sbGlzaW9uLG89ZS5lbWl0RW5kLGE9MCxzPTA7aWYobiYmbi54JiZuLnkpe3ZhciB1PXRoaXMub2Zmc2V0KG4ueCxuLnkpLGw9dS54LGM9dS55O2E9bCxzPWN9cmV0dXJuIHRoaXMuX2FjdGl2ZUNvbnRyb2wucm90YXRlVG8oYSxzLHQsaSxyLG8pLHRoaXN9fSx7a2V5OlwiZ2V0QnVpbGRpbmdJZExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh0aGlzLl9idWlsZGluZ0xpc3R8fFtdKX19LHtrZXk6XCJsb2FkQmFzZUZsb29yXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5kYXRhU291cmNlLG49dGhpcy5tYXBWaWV3LGk9dGhpcy5fYmFzZUZsb29ySWQscj10aGlzLm9uTG9hZCxvPXRoaXMuX29wdGlvbnMuYnVpbGRpbmdDb250cm9sLGE9W107cmV0dXJuIGk/KHRoaXMuX3N0YXR1cz1CLkxPQURJTkcsdGhpcy5fYnVpbGRpbmdMaXN0JiYwIT09dGhpcy5fYnVpbGRpbmdMaXN0Lmxlbmd0aD9hLnB1c2goITEpOmEucHVzaChlLnJlcXVlc3RQT0lDaGlsZHJlbihpKSksdGhpcy5wbGFuYXJHcmFwaHNbaV0/YS5wdXNoKCExKTphLnB1c2goZS5yZXF1ZXN0UGxhbmFyR3JhcGgoaSkpLEYuYWxsKGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGE9cyhlLDIpLGw9YVswXSxjPWFbMV07dC5fc3RhdHVzPUIuTE9BREVELGwmJih0Ll9idWlsZGluZ0luZm9MaXN0PWwuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiQlVJTERJTkdcIj09PXQudHlwZX0pLHQuX2J1aWxkaW5nTGlzdD10Ll9idWlsZGluZ0luZm9MaXN0Lm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5pZH0pKSxjJiYodC5wbGFuYXJHcmFwaHNbaV09YyksdC5idWlsZGluZ0NvbnRyb2x8fCh0LmJ1aWxkaW5nQ29udHJvbD10Ll9nZW5Db250cm9sKFwiYnVpbGRpbmdcIix1KHt9LG8se2J1aWxkaW5nTGlzdDp0Ll9idWlsZGluZ0luZm9MaXN0LmNvbmNhdCgpfSkpKSx0Ll9zdGF0dXM9Qi5SVU5OSU5HLHQucmVuZGVyUGxhbmFyR3JhcGgoaSksbi5uZXh0KDEsZnVuY3Rpb24oKXt0LnNjYWxlQ29udHJvbCYmdC5zY2FsZUNvbnRyb2wudXBkYXRlKCksKDAsSS5pc0Z1bmN0aW9uKShyKSYmcih0KX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IodCx0LnN0YWNrKX0pLHRoaXMpOihjb25zb2xlLndhcm4oXCJubyBiYXNlIGZsb29yXCIpLHRoaXMpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5fc3RhdHVzPT09Qi5MT0FESU5HfHx0aGlzLl9zdGF0dXM9PT1CLkRFU1RST1lFRCl0aHJvdyBuZXcgRXJyb3IoXCJtYXAgaXMgbG9hZGluZyBvciBkZXN0cm95ZWRcIik7dmFyIG49dGhpcy5fb3B0aW9ucy5zdHlsZVRlbXBsYXRlLGk9dGhpcy5kYXRhU291cmNlLHI9dm9pZCAwO3JldHVybiB0aGlzLl9jbGVhcigpLHI9dGhpcy5fc3R5bGVKc29uP25ldyBGKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUuX3N0eWxlSnNvbil9KTooMCxJLmlzU3RyaW5nKShuKT8oMCxmLmRlZmF1bHQpKG4se30pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuanNvbigpfSk6bmV3IEYoZnVuY3Rpb24odCl7cmV0dXJuIHQobil9KSx0aGlzLl9zdGF0dXM9Qi5MT0FESU5HLHIudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gZS5fc3R5bGVKc29uPW4sdD9pLnJlcXVlc3RNYXAodCk6aS5yZXF1ZXN0TWFwcygpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5fbWFwSWQ9dC5saXN0P3QubGlzdFswXS5wb2k6dC5wb2ksaS5yZXF1ZXN0UE9JKGUuX21hcElkKX0pLnRoZW4oZnVuY3Rpb24odCl7aWYoZS5fZmxvb3JJbmZvTWFwPXt9LGUuX2luaXRNYXBWaWV3KCksXCJCVUlMRElOR1wiPT09dC50eXBlKWUuX2J1aWxkaW5nTGlzdD1bdC5pZF0sZS5yZW5kZXJCdWlsZGluZyh0LmlkKTtlbHNle2lmKFwiUExBTkFSX0dSQVBIXCIhPT10LnR5cGUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb2kgdHlwZVwiKTtlLl9iYXNlRmxvb3JJZD10LmlkLGUuX2J1aWxkaW5nTGlzdD1bXSxlLmxvYWRCYXNlRmxvb3IoKX19KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gY29uc29sZS5lcnJvcih0LHQuc3RhY2spfSksdGhpc319LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9zdGF0dXM9PT1CLkRFU1RST1lFRCl0aHJvdyBuZXcgRXJyb3IoXCJtYXAgaXMgYWxyZWFkeSBkZXN0cm95ZWRcIik7XG5yZXR1cm4gdGhpcy5fY2xlYXIoKSx0aGlzLm1hcFZpZXcuZ2VzdHVyZU1hbmFnZXIub2ZmKFwidGFwXCIsdGhpcy5fb25DbGljayksdGhpcy5fZW5naW5lLnJlbW92ZSh0aGlzLm1hcFZpZXcpLHRoaXMubmF2aWdhdGlvbk1hbmFnZXI9bnVsbCx0aGlzLmR5bmFtaWNOYXZpZ2F0aW9uTWFuYWdlcj1udWxsLHRoaXMubG9jYXRpb25NYW5hZ2VyPW51bGwsdGhpcy5wbGFuYXJHcmFwaHM9bnVsbCx0aGlzLm1hcFZpZXc9bnVsbCx0aGlzLmRhdGFTb3VyY2U9bnVsbCx0aGlzLmZsb29yQ29udHJvbD1udWxsLHRoaXMuem9vbUNvbnRyb2w9bnVsbCx0aGlzLmNvbXBhc3NDb250cm9sPW51bGwsdGhpcy5zY2FsZUNvbnRyb2w9bnVsbCx0aGlzLl9zdHlsZUpzb249bnVsbCx0aGlzLl9vcHRpb25zPW51bGwsdGhpcy5fbGlnaHQ9bnVsbCx0aGlzLl9lbmdpbmU9bnVsbCx0aGlzLl9zdGF0dXM9Qi5ERVNUUk9ZRUQsKDAsSS5pc0Z1bmN0aW9uKSh0aGlzLm9uRGVzdG95KSYmdGhpcy5vbkRlc3Ryb3kodGhpcyksdGhpc319LHtrZXk6XCJiYXNlRmxvb3JJZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRmxvb3JJZH0sc2V0OmZ1bmN0aW9uKHQpe2NvbnNvbGUud2FybihcImJhc2VGbG9vcklkIGlzIHJlYWRvbmx5XCIpfX0se2tleTpcImN1cnJlbnRQbGFuYXJHcmFwaElkc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcFZpZXcuY3VycmVudFBsYW5hckdyYXBoSWRzfX1dKSx0fSgpO2UuZGVmYXVsdD1qLGUubGlmZWN5Y2xlRW51bT1CfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5NYXA9dm9pZCAwO3ZhciByPW4oMTM3KSxvPWkocik7ZS5NYXA9by5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5NYXRoPXZvaWQgMDt2YXIgcj1uKDI3KSxvPWkocik7ZS5NYXRoPW8uZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYT1uKDc5KSxzPWkoYSksdT1uKDgpLGw9aSh1KSxjPW4oNTMpLGg9aShjKSxmPW4oNTUpLGQ9aShmKSxwPW4oMjgpLGc9aShwKSx2PW4oMzEpLG09aSh2KSx5PW4oMjkpLF89aSh5KSxiPW4oNCkseD1uKDcxKSx3PWkoeCksRT0xZS04LFM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbixpKXtyKHRoaXMsdCksdGhpcy5fZz1lLHRoaXMuX2g9bix0aGlzLl92ZXJ0ZXhMb2FkZXI9aX1yZXR1cm4gbyh0LFt7a2V5OlwiYXN0YXJcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06bnVsbCxvPW5ldyB3LmRlZmF1bHQoXy5kZWZhdWx0LmNvbXBhcmVUbyksYT1uZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZXF1YWxzKGUpfSksdT1bXSxsPXRoaXMuX3ZlcnRleExvYWRlci5maW5kTmVhcmVzdFBhdGgodCxlKSxjPXRoaXMuX3ZlcnRleExvYWRlci5maW5kTmVhcmVzdFBhdGgobixpKSxoPXRoaXMuX3ZlcnRleExvYWRlci5maW5kTmVhcmVzdFZlcnRleE9uTmVhcmVzdFBhdGgodCxsKSxmPXRoaXMuX3ZlcnRleExvYWRlci5maW5kTmVhcmVzdFZlcnRleE9uTmVhcmVzdFBhdGgobixjKTtpZighaHx8IWYpcmV0dXJuW107aWYoaC5lcXVhbHMoZikpe2lmKGIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UodCxuKTwuMDEpcmV0dXJuIHU7dmFyIGQ9dm9pZCAwO3JldHVybiBkPWw9PT1jP3RoaXMuZ2VuUGF0aEZvck9uZUxpbmUobCx0LG4pOmIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UodCxoLnZlcnRleC5zaGFwZSk8PWIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UobixoLnZlcnRleC5zaGFwZSk/dGhpcy5nZW5QYXRoRm9yT25lTGluZShjLGgudmVydGV4LnNoYXBlLG4pOnRoaXMuZ2VuUGF0aEZvck9uZUxpbmUobCx0LG4udmVydGV4LnNoYXBlKSxkJiZ1LnB1c2goZCksdX12YXIgcD12b2lkIDA7aWYocD1yP01hdGguYWJzKHIuaW5kZXhPZihlKS1yLmluZGV4T2YoaSkpOmU9PT1pPzA6MSwhaC5lcXVhbHMoZikpe28uZW5xKGgpO3ZhciBnPXZvaWQgMDt0OmZvcig7by5zaXplKCk+MDspe2c9by5kZXEoKSxhLmFkZChnKSxnLm5lZWRDYWxjRXh0cmFQYXRoPSEwO2Zvcih2YXIgdj1nLnBhdGhzLG09dix5PUFycmF5LmlzQXJyYXkobSkseD0wLG09eT9tOm1bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBFO2lmKHkpe2lmKHg+PW0ubGVuZ3RoKWJyZWFrO0U9bVt4KytdfWVsc2V7aWYoeD1tLm5leHQoKSx4LmRvbmUpYnJlYWs7RT14LnZhbHVlfXZhciBTPUUsTT1TLnRvO2lmKCFhLmNvbnRhaW5zKE0pKXt2YXIgQz10aGlzLl9nLmcoZyxTLHApK2cuZyxJPXRoaXMuX2guaChnLGYpO2lmKHRoaXMuX2lzQ29udGFpbnNCeVF1ZXVlKG8sTSk/QytJPE0uZytNLmgmJihNLmc9QyxNLmg9SSxNLnBhcmVudD1nLHRoaXMuX3JlbW92ZUJ5UXVldWUobyxNKSxvLmVucShNKSk6KE0uZz1DLE0uaD1JLE0ucGFyZW50PWcsby5lbnEoTSkpLE0uZXF1YWxzKGYpKXtkbyB1LnB1c2goTS5wYXJlbnQuZmluZFBhdGgoTSkpLE09TS5wYXJlbnQ7d2hpbGUoIU0uZXF1YWxzKGgpKTticmVhayB0fX19fX1yZXR1cm4gdS5yZXZlcnNlKCksdGhpcy5fYWRqdXN0UGF0aHModSxsLGMsdCxuKSx0aGlzLl9maWx0ZXJFeHRyYVBhdGgodSksdX19LHtrZXk6XCJnZW5QYXRoRm9yT25lTGluZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10LnNoYXBlLmdldENvb3JkaW5hdGVzKCkscj10aGlzLmdlbkxpbmVTdHJpbmdCeUNvb3JkaW5hdGVzKGkpLG89bC5kZWZhdWx0LmdldEZhY3RvcnkoKS5jcmVhdGVQb2ludCh0aGlzLmdldFByb2plY3RPbkxpbmUoZSx0LnNoYXBlKSksYT1sLmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvaW50KHRoaXMuZ2V0UHJvamVjdE9uTGluZShuLHQuc2hhcGUpKSxzPXRoaXMuZ2V0SW5kZXhQcm9qZWN0bGllZE9uKG8sciksdT10aGlzLmdldEluZGV4UHJvamVjdGxpZWRPbihhLHIpLGM9dm9pZCAwO2lmKHM9PT11KXt2YXIgaD1yW3NdO2M9Yi5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5kaXN0YW5jZShlLGguZ2V0U3RhcnRQb2ludCgpKT5iLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLmRpc3RhbmNlKG4saC5nZXRTdGFydFBvaW50KCkpfWVsc2UgYz1zPnU7YyYmaS5yZXZlcnNlKCkscj10aGlzLmdlbkxpbmVTdHJpbmdCeUNvb3JkaW5hdGVzKGkpLHM9dGhpcy5nZXRJbmRleFByb2plY3RsaWVkT24obyxyKSx1PXRoaXMuZ2V0SW5kZXhQcm9qZWN0bGllZE9uKGEscik7dmFyIGY9W107aWYoZi5wdXNoKG8uZ2V0Q29vcmRpbmF0ZSgpKSx1LXM9PT0xKWYucHVzaChyW3NdLmdldEVuZFBvaW50KCkuZ2V0Q29vcmRpbmF0ZSgpKTtlbHNlIGZvcih2YXIgZD1zKzE7ZDx1O2QrKylmLnB1c2gocltkXS5nZXRTdGFydFBvaW50KCkuZ2V0Q29vcmRpbmF0ZSgpKSxkPT09dS0xJiZmLnB1c2gocltkXS5nZXRFbmRQb2ludCgpLmdldENvb3JkaW5hdGUoKSk7Zi5wdXNoKGEuZ2V0Q29vcmRpbmF0ZSgpKTt2YXIgcD1uZXcgYi5nZW9tLkxpbmVTdHJpbmcobC5kZWZhdWx0LmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKGYpLGwuZGVmYXVsdC5nZXRGYWN0b3J5KCkpLGc9dGhpcy5fZ2V0TmV3QVN0YXJQYXRoKHQscCk7cmV0dXJuIGd9fSx7a2V5OlwiZ2VuTGluZVN0cmluZ0J5Q29vcmRpbmF0ZXNcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdHx8MD09PXQubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgZT1uZXcgQXJyYXkodC5sZW5ndGgtMSksbj0wO248dC5sZW5ndGgtMTtuKyspe3ZhciBpPXRbbl0scj10W24rMV0sbz1uZXcgYi5nZW9tLkxpbmVTdHJpbmcobC5kZWZhdWx0LmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKFtpLHJdKSxsLmRlZmF1bHQuZ2V0RmFjdG9yeSgpKTtlW25dPW99cmV0dXJuIGV9fSx7a2V5OlwiZ2V0UHJvamVjdE9uTGluZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49Yi5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5uZWFyZXN0UG9pbnRzKHQsZSlbMF07cmV0dXJuIG59fSx7a2V5OlwiZ2V0SW5kZXhQcm9qZWN0bGllZE9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj12b2lkIDA7Zm9yKHZhciBpIGluIGUpdGhpcy5fY2hlY2tJZlBvaW50T25MaW5lKHQsZVtpXSkmJihuPWkpO3JldHVybiBufX0se2tleTpcIl9nZXROZXdBU3RhclBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQucGxhbmFyR3JhcGhJZCxpPW5ldyBoLmRlZmF1bHQ7aS5wbGFuYXJHcmFwaElkPW4saS5kaXJlY3Rpb249dC5kaXJlY3Rpb24saS5yYW5rPXQucmFuayxpLnNoYXBlPWUsaS5mcm9tPXRoaXMuX2dldE5ld1ZlcnRleChlLmdldFN0YXJ0UG9pbnQoKSxuKSxpLnRvPXRoaXMuX2dldE5ld1ZlcnRleChlLmdldEVuZFBvaW50KCksbik7dmFyIHI9bmV3IG0uZGVmYXVsdChpLHRoaXMuX3ZlcnRleExvYWRlciwhMSk7cmV0dXJuIHJ9fSx7a2V5OlwiX2dldE5ld1ZlcnRleFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIG51bGw7dmFyIG49bmV3IGQuZGVmYXVsdDtyZXR1cm4gbi5wbGFuYXJHcmFwaElkPWUsbi5zaGFwZT10LG59fSx7a2V5OlwiX2NoZWNrSWZQb2ludE9uTGluZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UodCxlKTxFfX0se2tleTpcIl9uZWVkQ2FsY0V4dHJhUGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPWkudmVydGV4LmlkO3JldHVybiByPT09ZS52ZXJ0ZXguaWR8fHI9PT1uLnZlcnRleC5pZHx8cj09PXQuZnJvbS5pZHx8cj09PXQudG8uaWR9fSx7a2V5OlwiX2FkanVzdFBhdGhzXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyKXt0JiYwIT09dC5sZW5ndGgmJih0aGlzLl9hZGp1c3RGaXJzdFBhdGgodCxlLGkpLHRoaXMuX2FkanVzdExhc3RQYXRoKHQsbixyKSx0aGlzLl9maWx0ZXJFeHRyYVBhdGgodCkpfX0se2tleTpcIl9hZGp1c3RGaXJzdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5nZXRQcm9qZWN0T25MaW5lKG4sZS5zaGFwZSkscj1sLmRlZmF1bHQuZ2V0RmFjdG9yeSgpLmNyZWF0ZVBvaW50KGkpO3RoaXMuX2FkZEZyb21FeGFjdFBhdGgodCxyLGUpfX0se2tleTpcIl9hZGp1c3RMYXN0UGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLmdldFByb2plY3RPbkxpbmUobixlLnNoYXBlKSxyPWwuZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlUG9pbnQoaSk7dGhpcy5fYWRkVG9FeHRyYVBhdGgodCxyLGUpfX0se2tleTpcIl9hZGRUb0V4dHJhUGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10Lmxlbmd0aC0xLHI9dGhpcy5fY2hlY2tJZlBvaW50T25MaW5lKGUsbi5zaGFwZSk7aWYociYmISh0W2ldaW5zdGFuY2VvZiBnLmRlZmF1bHQpKXt2YXIgbz10W2ldLGE9dGhpcy5fZ2VuVG9FeGFjdFBhdGgobyxuLGUpO28ucGF0aC5pZD09PW4uaWQ/dC5zcGxpY2UoaSwwLGEpOnRbMF09YX19fSx7a2V5OlwiX2FkZEZyb21FeGFjdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5fY2hlY2tJZlBvaW50T25MaW5lKGUsbi5zaGFwZSk7aWYoIShpfHx0WzBdaW5zdGFuY2VvZiBnLmRlZmF1bHQpKXt2YXIgcj10WzBdLG89dGhpcy5fZ2VuRnJvbUV4dHJhUGF0aChlLG4scik7ci5wYXRoLmlkPT09bi5pZD90WzBdPW86dC5zcGxpY2UoMCwwLG8pfX19LHtrZXk6XCJfZ2VuRnJvbUV4dHJhUGF0aFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9zcGxpdFBhdGgobixlLCEwKSxyPVtdLG89dGhpcy5nZXRJbmRleFByb2plY3RsaWVkT24odCxpKTtyLnB1c2godC5nZXRDb29yZGluYXRlKCkpO2Zvcih2YXIgYT1vKzE7YTxpLmxlbmd0aDthKyspci5wdXNoKGlbYV0uZ2V0U3RhcnRQb2ludCgpLmdldENvb3JkaW5hdGUoKSksYT09PWkubGVuZ3RoLTEmJnIucHVzaChpW2FdLmdldEVuZFBvaW50KCkuZ2V0Q29vcmRpbmF0ZSgpKTtpZigxPT09ci5sZW5ndGgpe3ZhciBzPWkubGVuZ3RoPm8/bzppLmxlbmd0aC0xO3IucHVzaChpW3NdLmdldEVuZFBvaW50KCkuZ2V0Q29vcmRpbmF0ZSgpKX12YXIgdT1uZXcgYi5nZW9tLkxpbmVTdHJpbmcobC5kZWZhdWx0LmdldEZhY3RvcnkoKS5nZXRDb29yZGluYXRlU2VxdWVuY2VGYWN0b3J5KCkuY3JlYXRlKHIpLGwuZGVmYXVsdC5nZXRGYWN0b3J5KCkpO3JldHVybiB0aGlzLl9nZXROZXdBU3RhclBhdGgoZSx1KX19LHtrZXk6XCJfZ2VuVG9FeGFjdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXRoaXMuX3NwbGl0UGF0aCh0LGUsITApLHI9W10sbz10aGlzLmdldEluZGV4UHJvamVjdGxpZWRPbihuLGkpLGE9MDthPG87YSsrKXIucHVzaChpW2FdLmdldFN0YXJ0UG9pbnQoKS5nZXRDb29yZGluYXRlKCkpLGE9PT1vLTEmJnIucHVzaChpW2FdLmdldEVuZFBvaW50KCkuZ2V0Q29vcmRpbmF0ZSgpKTtpZigwPT09ci5sZW5ndGgpe3ZhciBzPWkubGVuZ3RoPm8/bzppLmxlbmd0aC0xO3IucHVzaChpW3NdLmdldFN0YXJ0UG9pbnQoKS5nZXRDb29yZGluYXRlKCkpfXIucHVzaChuLmdldENvb3JkaW5hdGUoKSk7dmFyIHU9bmV3IGIuZ2VvbS5MaW5lU3RyaW5nKGwuZGVmYXVsdC5nZXRGYWN0b3J5KCkuZ2V0Q29vcmRpbmF0ZVNlcXVlbmNlRmFjdG9yeSgpLmNyZWF0ZShyKSxsLmRlZmF1bHQuZ2V0RmFjdG9yeSgpKSxjPXRoaXMuX2dldE5ld0FTdGFyUGF0aChlLHUpO3JldHVybiBjfX0se2tleTpcIl9zcGxpdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPVtdLHI9ZS5zaGFwZS5nZXRDb29yZGluYXRlcygpLG89QXJyYXkuaXNBcnJheShyKSxhPTAscj1vP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYobyl7aWYoYT49ci5sZW5ndGgpYnJlYWs7cz1yW2ErK119ZWxzZXtpZihhPXIubmV4dCgpLGEuZG9uZSlicmVhaztzPWEudmFsdWV9dmFyIHU9cztpLnB1c2gobmV3IGIuZ2VvbS5Db29yZGluYXRlKHUueCx1LnksdS56KSl9dmFyIGw9dm9pZCAwO2lmKHQucGF0aC5pZD09PWUuaWQpbD10LnJldmVyc2U7ZWxzZSBpZihuKXt2YXIgYz10LnJldmVyc2U/dC5wYXRoLnNoYXBlLmdldEVuZFBvaW50KCk6dC5wYXRoLnNoYXBlLmdldFN0YXJ0UG9pbnQoKTtsPWIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UoYyxlLnNoYXBlLmdldEVuZFBvaW50KCkpPmIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UoYyxlLnNoYXBlLmdldFN0YXJ0UG9pbnQoKSl9ZWxzZXt2YXIgaD10LnJldmVyc2U/dC5wYXRoLnNoYXBlLmdldFN0YXJ0UG9pbnQoKTp0LnBhdGguc2hhcGUuZ2V0RW5kUG9pbnQoKTtsPWIub3BlcmF0aW9uLmRpc3RhbmNlLkRpc3RhbmNlT3AuZGlzdGFuY2UoaCxlLnNoYXBlLmdldFN0YXJ0UG9pbnQoKSk+Yi5vcGVyYXRpb24uZGlzdGFuY2UuRGlzdGFuY2VPcC5kaXN0YW5jZShoLGUuc2hhcGUuZ2V0RW5kUG9pbnQoKSl9bCYmaS5yZXZlcnNlKCk7dmFyIGY9dGhpcy5nZW5MaW5lU3RyaW5nQnlDb29yZGluYXRlcyhpKTtyZXR1cm4gZn19LHtrZXk6XCJfZmlsdGVyRXh0cmFQYXRoXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodCYmMCE9PXQubGVuZ3RoKXt2YXIgZT10WzBdLG49dm9pZCAwO3QubGVuZ3RoPjEmJihuPXRbdC5sZW5ndGgtMV0pLHRoaXMuX2NoZWNrVGhlblJlbW92ZSh0LGUpLHRoaXMuX2NoZWNrVGhlblJlbW92ZSh0LG4pfX19LHtrZXk6XCJfY2hlY2tUaGVuUmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZihlJiZlIGluc3RhbmNlb2YgbS5kZWZhdWx0KXt2YXIgbj1lLnBhdGgucmFuaztpZigxMD09PW4pe3ZhciBpPXQuaW5kZXhPZihlKTt0LnNwbGljZShpLDEpfX19fSx7a2V5OlwiX2lzQ29udGFpbnNCeVF1ZXVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hMTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZXF1YWxzKGUpJiYobj0hMCl9KSxufX0se2tleTpcIl9yZW1vdmVCeVF1ZXVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10Ll9lbGVtZW50cyxpPW51bGw7Zm9yKHZhciByIGluIG4pe3ZhciBvPW5bcl07by5lcXVhbHMoZSkmJihpPXIpfWkmJm4uc3BsaWNlKGksMSl9fV0pLHR9KCk7ZS5kZWZhdWx0PVN9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkscixvLGEpe24odGhpcyx0KSx0aGlzLm1hcElkPWUsdGhpcy5kaXJlY3Rpb249aSx0aGlzLnJhbms9cix0aGlzLmZyb21Mb2NhdGlvbklkPW8sdGhpcy50b0xvY2F0aW9uSWQ9YX1yZXR1cm4gaSh0LFt7a2V5OlwiaWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pZD10fX0se2tleTpcIm1hcElkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcElkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWFwSWQ9dH19LHtrZXk6XCJkaXJlY3Rpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlyZWN0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlyZWN0aW9uPXR9fSx7a2V5OlwicmFua1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYW5rfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmFuaz10fX0se2tleTpcImZyb21Mb2NhdGlvbklkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zyb21Mb2NhdGlvbklkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZnJvbUxvY2F0aW9uSWQ9dH19LHtrZXk6XCJ0b0xvY2F0aW9uSWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Mb2NhdGlvbklkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdG9Mb2NhdGlvbklkPXR9fSx7a2V5OlwiZnJvbVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcm9tfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZnJvbT10fX0se2tleTpcInRvXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdG89dH19LHtrZXk6XCJjYXRlZ29yeUlkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhdGVnb3J5SWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXRlZ29yeUlkPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PXJ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGw9big1MiksYz1pKGwpLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbi5fZnVuYz10LG59cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJnXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciByPXUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZ1wiLHRoaXMpLmNhbGwodGhpcyx0LG4saSk7cmV0dXJuIHIrPXRoaXMuX2Z1bmModCxuLGkpfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1ofSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCl9cmV0dXJuIGkodCxbe2tleTpcImhcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyhlLnZlcnRleC5hbHRpdHVkZS10LnZlcnRleC5hbHRpdHVkZSkrdC52ZXJ0ZXguc2hhcGUuZGlzdGFuY2UoZS52ZXJ0ZXguc2hhcGUpfX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCl9cmV0dXJuIGkodCxbe2tleTpcImdcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLm5hdmlGaWx0ZXI9ZS5OYXZpVXRpbHM9dm9pZCAwO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDMyKSxsPWkodSksYz1uKDE5KSxoPWkoYyksZj1uKDE2KSxkPWkoZikscD1uKDIzKSxnPWkocCksdj1uKDgpLG09aSh2KSx5PW4oMyksXz1uKDQpLGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7YSh0aGlzLHQpfXJldHVybiBzKHQsW3trZXk6XCJvbkZpbHRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuITF9fV0pLHR9KCkseD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe2EodGhpcyxlKTt2YXIgbj1yKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuLl9kaXN0YW5jZVRocmVzaG9sZD10LG59cmV0dXJuIG8oZSx0KSxzKGUsW3trZXk6XCJvbkZpbHRlclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTAsaT10LHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtuKz1zfXJldHVybiEobj50aGlzLl9kaXN0YW5jZVRocmVzaG9sZCl9fV0pLGV9KGIpLHc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBhKHRoaXMsZSkscih0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBvKGUsdCkscyhlLFt7a2V5Olwib25GaWx0ZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiEoIWV8fDIhPT1lLmxlbmd0aHx8ZVswXS5jYXRlZ29yeSE9PWVbMV0uY2F0ZWdvcnkpfX1dKSxlfShiKSxFPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2EodGhpcyx0KX1yZXR1cm4gcyh0LG51bGwsW3trZXk6XCJnZXRNdWx0aU5hdmlnYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06e307aWYoISh0IGluc3RhbmNlb2YgaC5kZWZhdWx0JiZlIGluc3RhbmNlb2YgbC5kZWZhdWx0JiYoMCx5LmlzQXJyYXkpKG4pKSl0aHJvdyBuZXcgRXJyb3IoXCJOYXZpVXRpbHM6IEludmFsaWQgcGFyYW1ldGVyc1wiKTt2YXIgbz1lLmdldFBsYW5hckdyYXBoT3JkZXIoKTtpZigoMCx5LmlzRW1wdHkpKG8pKXRocm93IG5ldyBFcnJvcihcIk5hdmlVdGlsczogRW1wdHkgbmF2aWdhdGlvbiBkYXRhXCIpO3ZhciBhPXIuZmxvb3JIZWlnaHQscz12b2lkIDA9PT1hPzQwOmEsdT1yLmlkLGM9dm9pZCAwPT09dT8xOnUsZj1yLm5hbWUscD12b2lkIDA9PT1mP1wibXVsdGlOYXZpZ2F0aW9uXCI6Zix2PXIuek9mZnNldCxfPXZvaWQgMD09PXY/MDp2LGI9dC5fcGxhbmFyR3JhcGhzLmNvbmNhdCgpLHg9e30sdz17fSxFPWZ1bmN0aW9uKHQsZSl7dmFyIG49Yi5pbmRleE9mKHQpLGk9Yi5pbmRleE9mKGUpO3JldHVybiBuPGk/LTE6bj5pPzE6MH0sUz1fLE09W107Zm9yKHZhciBDIGluIG8pe3ZhciBJPW9bQ107aWYoYi5pbmRleE9mKEkpIT09LTEpe3ZhciBPPWUuZ2V0RGlzdGFuY2VzQnlQbGFuYXJHcmFwaChJKSxUPWUuZ2V0Q29ubmVjdGlvbkluZm9CeVBsYW5hckdyYXBoKEkpLFA9KDAseS5pc0FycmF5KShpKT9pOltdLEE9ITE7aWYobi5pbmRleE9mKEkpPT09LTEpe3ZhciBMPSEwO0E9ITAsMD09PVAubGVuZ3RoJiYoTD0hMSk7Zm9yKHZhciBOPVAsaz1BcnJheS5pc0FycmF5KE4pLFI9MCxOPWs/TjpOW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgRDtpZihrKXtpZihSPj1OLmxlbmd0aClicmVhaztEPU5bUisrXX1lbHNle2lmKFI9Ti5uZXh0KCksUi5kb25lKWJyZWFrO0Q9Ui52YWx1ZX12YXIgRj1EO2lmKCFGLm9uRmlsdGVyKE8sVCkpe0w9ITE7YnJlYWt9fUwmJihBPSExKX1BJiZuLnB1c2goSSl9fW4uc29ydChFKTtmb3IodmFyIEI9bixqPUFycmF5LmlzQXJyYXkoQiksVT0wLEI9aj9COkJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciB6O2lmKGope2lmKFU+PUIubGVuZ3RoKWJyZWFrO3o9QltVKytdfWVsc2V7aWYoVT1CLm5leHQoKSxVLmRvbmUpYnJlYWs7ej1VLnZhbHVlfXZhciBHPXo7eFtHXT1TLFMrPXN9Zm9yKHZhciBWPW8sWD1BcnJheS5pc0FycmF5KFYpLEg9MCxWPVg/VjpWW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcTtpZihYKXtpZihIPj1WLmxlbmd0aClicmVhaztxPVZbSCsrXX1lbHNle2lmKEg9Vi5uZXh0KCksSC5kb25lKWJyZWFrO3E9SC52YWx1ZX12YXIgWT1xO2lmKFkgaW4geCl7dmFyIFc9ZS5nZXROYXZpZ2F0ZUJ5UGxhbmFyR3JhcGgoWSksWj14W1ldLEo9dm9pZCAwO2lmKCgwLHkuaXNQcmVzZW50KSh3W1ldKT9KPVcuZmVhdHVyZXNbKyt3W1ldXTooSj1XLmZlYXR1cmVzWzBdLHdbWV09MCksIUopdGhyb3cgbmV3IEVycm9yKFwiZ2V0TXVsdGlOYXZpZ2F0aW9uOiBJbnZhbGlkIGZlYXR1cmVcIik7Zm9yKHZhciBLPUouZ2VvbWV0cnkucG9pbnRzLmNvb3JkaW5hdGVzLFE9SywkPUFycmF5LmlzQXJyYXkoUSksdHQ9MCxRPSQ/UTpRW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgZXQ7aWYoJCl7aWYodHQ+PVEubGVuZ3RoKWJyZWFrO2V0PVFbdHQrK119ZWxzZXtpZih0dD1RLm5leHQoKSx0dC5kb25lKWJyZWFrO2V0PXR0LnZhbHVlfXZhciBudD1ldDtudC56PVp9TT1NLmNvbmNhdChLKX19dmFyIGl0PW0uZGVmYXVsdC5nZXRGYWN0b3J5KCkuY3JlYXRlTGluZVN0cmluZyhNKSxydD1uZXcgZC5kZWZhdWx0KHApO3JldHVybiBydC5hZGRGZWF0dXJlKG5ldyBnLmRlZmF1bHQoaXQse2lkOmN9KSkscnR9fSx7a2V5OlwiZ2V0TXVsdGlUcmFuc2l0c1wiLHZhbHVlOmZ1bmN0aW9uKCl7fX0se2tleTpcIl9nZXREaXN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49MDtyZXR1cm4gbj1NYXRoLmh5cG90P01hdGguaHlwb3QoZS54LXQueCxlLnktdC55KTpNYXRoLnNxcnQoTWF0aC5wb3coZS54LXQueCwyKStNYXRoLnBvdyhlLnktdC55LDIpKX19LHtrZXk6XCJnZXREaXN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7dmFyIGk9ZSxyPW47cmV0dXJuKDAseS5pc0FycmF5KShlKSYmKGk9bmV3IF8uZ2VvbS5Db29yZGluYXRlKGVbMF0sZVsxXSkpLCgwLHkuaXNBcnJheSkobikmJihyPW5ldyBfLmdlb20uQ29vcmRpbmF0ZShuWzBdLG5bMV0pKSx0Ll9nZXREaXN0YW5jZShpLHIpfX1dKSx0fSgpLFM9e05hdmlDdXN0b21GaWx0ZXI6YixOYXZpRGlzdGFuY2VGaWx0ZXI6eCxOYXZpU2FtZUNhdGVGaWx0ZXI6d307ZS5OYXZpVXRpbHM9RSxlLm5hdmlGaWx0ZXI9U30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscz1uKDI5KSx1PWkocyksbD1uKDI4KSxjPWkobCksaD1uKDMxKSxmPWkoaCksZD1uKDQpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe28odGhpcyx0KSx0aGlzLl9wYXRoU2VydmljZT1lfXJldHVybiBhKHQsW3trZXk6XCJmaW5kTmVhcmVzdFZlcnRleE9uTmVhcmVzdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKG51bGw9PT1lKXJldHVybiBudWxsO3ZhciBuPWUuZnJvbSxpPWUudG8scj10aGlzLl9wYXRoU2VydmljZS5xdWVyeUNvbm5lY3Rpb25zQnlWZXJ0ZXgobik7aWYoMCE9PXIubGVuZ3RoKXJldHVybiBuZXcgdS5kZWZhdWx0KGksdGhpcyk7aWYocj10aGlzLl9wYXRoU2VydmljZS5xdWVyeUNvbm5lY3Rpb25zQnlWZXJ0ZXgoaSksMCE9PXIubGVuZ3RoKXJldHVybiBuZXcgdS5kZWZhdWx0KG4sdGhpcyk7dmFyIG89dC5kaXN0YW5jZShlLmZyb20uc2hhcGUpPHQuZGlzdGFuY2UoZS50by5zaGFwZSk/ZS5mcm9tOmUudG87cmV0dXJuIG5ldyB1LmRlZmF1bHQobyx0aGlzKX19LHtrZXk6XCJmaW5kTmVhcmVzdFBhdGhcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3BhdGhTZXJ2aWNlLnF1ZXJ5UXVhZFRyZWUoZSk7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGk9dC5nZXRFbnZlbG9wZUludGVybmFsKCk7aS5taW54LT0yMDAsaS5taW55LT0yMDAsaS5tYXh4Kz0yMDAsaS5tYXh5Kz0yMDA7dmFyIHI9bi5xdWVyeShpKTtyLmlzRW1wdHkoKSYmKHI9dGhpcy5fcGF0aFNlcnZpY2UucXVlcnlBbGxQYXRoRnJvbUluZGV4KGUpKTtmb3IodmFyIG89dm9pZCAwLGE9TnVtYmVyLk1BWF9WQUxVRSxzPXIuYXJyYXlfLHU9QXJyYXkuaXNBcnJheShzKSxsPTAscz11P3M6c1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGM7aWYodSl7aWYobD49cy5sZW5ndGgpYnJlYWs7Yz1zW2wrK119ZWxzZXtpZihsPXMubmV4dCgpLGwuZG9uZSlicmVhaztjPWwudmFsdWV9dmFyIGg9YyxmPWguc2hhcGUscD1kLm9wZXJhdGlvbi5kaXN0YW5jZS5EaXN0YW5jZU9wLmRpc3RhbmNlKHQsZik7YT5wJiYoYT1wLG89aCl9cmV0dXJuIG99fSx7a2V5OlwibG9hZFBhdGhzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9W10sbz10aGlzLl9wYXRoU2VydmljZS5xdWVyeVBhdGhzQnlWZXJ0ZXgodCk7ZXx8KG89by5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIDEwIT09dC5yYW5rfSkpLDAhPT1vLmxlbmd0aCYmaS5wdXNoLmFwcGx5KGkscihvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5mcm9tLmlkPT09dC5pZD9uZXcgZi5kZWZhdWx0KGUsbiwhMSk6bmV3IGYuZGVmYXVsdChlLG4sITApfSkpKTt2YXIgYT10aGlzLl9wYXRoU2VydmljZS5xdWVyeUNvbm5lY3Rpb25zQnlWZXJ0ZXgodCk7cmV0dXJuIDA9PT1hLmxlbmd0aD9pOihpLnB1c2guYXBwbHkoaSxyKGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmZyb20uaWQ9PT10LmlkP25ldyBjLmRlZmF1bHQoZSxuLCExKTpuZXcgYy5kZWZhdWx0KGUsbiwhMCl9KSkpLGkpfX1dKSx0fSgpO2UuZGVmYXVsdD1wfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oNDcpLHM9big5KSx1PWkocyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3IodGhpcyx0KSx0aGlzLmN1aWQ9XCJwYWxtYXBcIix0aGlzLmFjY2Vzc1Rva2VuPVwiMjQuYWQ1MDI5MzI0YmJkZDE4YjA4YWRlM2FlOGQ0NzdjYjkuMjU5MjAwMC4xNDk2NDc0MTU1LjI4MjMzNS05NjAyNzA1XCIsdGhpcy5hdWRpb0VsbXQ9KDAsYS5jcmVhdGVFbGVtZW50KShcImF1ZGlvXCIpLHRoaXMuYXVkaW9FbG10LmlkPVwiYXVkaW9FbG10XCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmF1ZGlvRWxtdCksdGhpcy50b2tlblJlcVVybD1cImh0dHBzOi8vYXBpLmlwYWxtYXAuY29tL2JhaWR1L29hdXRoLzIuMC90b2tlbj9ncmFudF90eXBlPWNsaWVudF9jcmVkZW50aWFscyZjbGllbnRfaWQ9UjFEUmhwVUMxazFCN0doTmU1T2w5bXl0JmNsaWVudF9zZWNyZXQ9N2QzN2IwNGI4ZDE5NzQwOWNlZjFkMzg1ZWRjYTk5YzBcIiwoMCx1LmRlZmF1bHQpKHRoaXMudG9rZW5SZXFVcmwse30pLnRoZW4oZnVuY3Rpb24odCl7dC5qc29uKCkudGhlbihmdW5jdGlvbih0KXtlLmFjY2Vzc1Rva2VuPXQuYWNjZXNzX3Rva2VufSl9KS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBFcnJvcih0KX0pfXJldHVybiBvKHQsW3trZXk6XCJwbGF5TWVzc2FnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVwiaHR0cDovL3Rzbi5iYWlkdS5jb20vdGV4dDJhdWRpbz9sYW49emgmY3VpZD1cIit0aGlzLmN1aWQrXCImY3RwPTEmdG9rPVwiK3RoaXMuYWNjZXNzVG9rZW4rXCImdGV4PVwiK3Q7dGhpcy5hdWRpb0VsbXQuc2V0QXR0cmlidXRlKFwic3JjXCIsZSksdGhpcy5hdWRpb0VsbXQucGxheSgpfX1dKSx0fSgpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIG8odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9bigxNTMpLGw9aSh1KSxjPW4oMTU1KSxoPWkoYyksZj1uKDU3KSxkPWkoZikscD1uKDE1MSksZz1pKHApLHY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsbil7YSh0aGlzLHQpLHRoaXMueD1lLngtbi54LHRoaXMueT1lLnktbi55fXJldHVybiBzKHQsW3trZXk6XCJsZW5ndGhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLnNxcnQodGhpcy54KnRoaXMueCt0aGlzLnkqdGhpcy55KX19XSxbe2tleTpcImRvdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQueCplLngrdC55KmUueX19XSksdH0oKSxtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gYSh0aGlzLGUpLHIodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gbyhlLHQpLHMoZSxbe2tleTpcIm1hdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT17fSxuPXQucHJvcGVydHksaT10Lmxhc3RMaW5lU3BvdCxyPXQubmV4dExpbmVTcG90LG89ZS5zdGFydFB0PXQubGluZVN0cmluZy5nZXRDb29yZGluYXRlKCksYT12b2lkIDAscz12b2lkIDA7cmV0dXJuIHJ8fChhPXQubGluZVN0cmluZy5wb2ludHMuY29vcmRpbmF0ZXNbMV0scz1uZXcgdihhLG8pLGUuaXNFbmRTZWdtZW50PSEwKSwhaXx8aS5wcm9wZXJ0eS5hbHRpdHVkZSYmbi5hbHRpdHVkZSYmbi5hbHRpdHVkZSE9PWkucHJvcGVydHkuYWx0aXR1ZGU/KGUuaXNFbmRTZWdtZW50fHwoYT1yLmxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZSgpLHM9bmV3IHYoYSxvKSksZS5kaXN0YW5jZT1zLmxlbmd0aCgpLGUub3JpZW50YXRpb249dGhpcy5fY29tcHV0ZU9yaWVudGF0aW9uKHMueCxzLnkpKTpuLmFsdGl0dWRlJiZyLnByb3BlcnR5LmFsdGl0dWRlJiZuLmFsdGl0dWRlIT09ci5wcm9wZXJ0eS5hbHRpdHVkZT8oYT10LmxpbmVTdHJpbmcucG9pbnRzLmNvb3JkaW5hdGVzWzFdLHM9bmV3IHYoYSxvKSxlLmRpc3RhbmNlPXMubGVuZ3RoKCksZS5kaXJlY3Rpb249dGhpcy5fY29tcHV0ZURpcmVjdGlvbihpLmxpbmVTdHJpbmcuZ2V0Q29vcmRpbmF0ZSgpLG8sYSksZS5pc1VwPW4uYWx0aXR1ZGUtci5wcm9wZXJ0eS5hbHRpdHVkZTwwLGUudGFyZ2V0Rmxvb3I9ci5wcm9wZXJ0eS5mbG9vckFkZHJlc3MpOihlLmlzRW5kU2VnbWVudHx8KGE9ci5saW5lU3RyaW5nLmdldENvb3JkaW5hdGUoKSxzPW5ldyB2KGEsbykpLGUuZGlzdGFuY2U9cy5sZW5ndGgoKSxlLmRpcmVjdGlvbj10aGlzLl9jb21wdXRlRGlyZWN0aW9uKGkubGluZVN0cmluZy5nZXRDb29yZGluYXRlKCksbyxhKSksZS5vcmllbnRhdGlvbkFuZ2xlPTM2MCpNYXRoLmF0YW4yKHMueSxzLngpLygyKk1hdGguUEkpLTkwLGV9fSx7a2V5OlwiX2NvbXB1dGVPcmllbnRhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49MzYwKi1NYXRoLmF0YW4yKGUsdCkvKDIqTWF0aC5QSSk7cmV0dXJuIG4+PS0xNSYmbjwxNT9cImVhc3RcIjpuPj0xNSYmbjw3NT9cInNvdXRoZWFzdFwiOm4+PS03NSYmbjwtMTU/XCJub3J0aGVhc3RcIjpuPj03NSYmbjwxMDU/XCJzb3V0aFwiOm4+PS0xMDUmJm48LTc1P1wibm9ydGhcIjpuPj0tMTY1JiZuPC0xMDU/XCJub3J0aHdlc3RcIjpuPj0xMDUmJm48MTY1P1wic291dGh3ZXN0XCI6bj49MTY1JiZuPDE4MHx8bj49LTE4MCYmbjwtMTY1P1wid2VzdFwiOlwiXCJ9fSx7a2V5OlwiX2NvbXB1dGVEaXJlY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9bmV3IHYobixlKSxyPW5ldyB2KGUsdCksbz12LmRvdChpLHIpLyhpLmxlbmd0aCgpKnIubGVuZ3RoKCkpLGE9MzYwKk1hdGguYWNvcyhvKS8oMipNYXRoLlBJKSxzPSh0Lngtbi54KSooZS55LW4ueSktKHQueS1uLnkpKihlLngtbi54KSx1PXZvaWQgMDt1PXM+MD9cImxlZnRcIjpcInJpZ2h0XCI7dmFyIGw9bnVsbDtpZihhPj0wJiZhPDE1KWw9XCJmb3J3YXJkXCI7ZWxzZSBpZihhPj0xNSYmYTw2MClzd2l0Y2godSl7Y2FzZVwibGVmdFwiOmw9XCJsZWZ0Rm9yd2FyZFwiO2JyZWFrO2Nhc2VcInJpZ2h0XCI6bD1cInJpZ2h0Rm9yd2FyZFwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiV2Fsa2luZ01hdGUjbWF0ZTogSW52YWxpZCBkaXJlY3Rpb25cIil9ZWxzZSBpZihhPj02MCYmYTwxMjApc3dpdGNoKHUpe2Nhc2VcImxlZnRcIjpsPVwibGVmdFwiO2JyZWFrO2Nhc2VcInJpZ2h0XCI6bD1cInJpZ2h0XCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJXYWxraW5nTWF0ZSNtYXRlOiBJbnZhbGlkIGRpcmVjdGlvblwiKX1lbHNlIGlmKGE+PTEyMCYmYTwxNjUpc3dpdGNoKHUpe2Nhc2VcImxlZnRcIjpsPVwibGVmdEJhY2t3YXJkXCI7YnJlYWs7Y2FzZVwicmlnaHRcIjpsPVwicmlnaHRCYWNrd2FyZFwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiV2Fsa2luZ01hdGUjbWF0ZTogSW52YWxpZCBkaXJlY3Rpb25cIil9ZWxzZSBhPj0xNjUmJmE8PTE4MCYmKGw9XCJiYWNrd2FyZFwiKTtyZXR1cm4gbH19XSksZX0oZC5kZWZhdWx0KSx5PXtkZWZhdWx0TWF0ZTpuZXcgZC5kZWZhdWx0LHdhbGtpbmdNYXRlOm5ldyBtfSxfPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXthKHRoaXMsZSk7dmFyIHQ9cih0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5zdGF0ZU1hdGU9bmV3IGcuZGVmYXVsdCh5LndhbGtpbmdNYXRlKSx0fXJldHVybiBvKGUsdCkscyhlLFt7a2V5OlwibmV4dE1vdmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV4dE1vdmV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9uZXh0TW92ZT10fX0se2tleTpcImRpc3RhbmNlVG9FbmRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdGFuY2VUb0VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3RhbmNlVG9FbmQ9dH19LHtrZXk6XCJkaXN0YW5jZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXN0YW5jZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3RhbmNlPXR9fSx7a2V5OlwiZGlyZWN0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpcmVjdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RpcmVjdGlvbj10fX0se2tleTpcIm9yaWVudGF0aW9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb249dH19LHtrZXk6XCJvcmllbnRhdGlvbkFuZ2xlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uQW5nbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvbkFuZ2xlPXR9fSx7a2V5OlwidGFyZ2V0Rmxvb3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0Rmxvb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90YXJnZXRGbG9vcj10fX0se2tleTpcImlzVXBcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNVcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzVXA9dH19LHtrZXk6XCJpc0VuZFNlZ21lbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNFbmRTZWdtZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNFbmRTZWdtZW50PXR9fV0pLGV9KGguZGVmYXVsdCksYj1bbmV3IF9dLHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBhKHRoaXMsZSkscih0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsYikpfXJldHVybiBvKGUsdCksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9eH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNSksbD1pKHUpLGM9bigyNCksaD1pKGMpLGY9big0KSxkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSk7dmFyIHQ9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5yZXNldCgpLHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMuX3NlZ21lbnRzLmxlbmd0aC0xO24+PTA7bi0tKXt2YXIgaT10aGlzLl9zZWdtZW50c1tuXTtpZih0aGlzLl9pc09uU2VnbWVudCh0LGUsaSkpcmV0dXJuIHRoaXMuX2N1cnJlbnRJbmRleCE9PW4mJnRoaXMuX2NoYW5nZVNlZ21lbnQoaSksdGhpcy5fY3VycmVudEluZGV4PW4sITB9cmV0dXJuITF9fSx7a2V5OlwicmV0dXJuTmVhcmVzdFNlZ21lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPXtpbmRleDotMSxzZWdtZW50Om51bGx9LHI9MDtyPHRoaXMuX3NlZ21lbnRzLmxlbmd0aDsrK3Ipe3ZhciBvPXRoaXMuX3NlZ21lbnRzW3JdO2lmKG8uc3BvdC5wcm9wZXJ0eS5wbGFuYXJfZ3JhcGg9PT1uJiZ0aGlzLl9pc09uU2VnbWVudCh0LGUsbykpe2kuaW5kZXg9cixpLnNlZ21lbnQ9bzticmVha319cmV0dXJuIGl9fSx7a2V5OlwiZmluZE5lYXJlc3RTZWdtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10aGlzLnJldHVybk5lYXJlc3RTZWdtZW50KHQsZSxuKSxhPW8uaW5kZXgscz1vLnNlZ21lbnQ7aWYoIXMpcmV0dXJuITE7aWYobnVsbCE9PXRoaXMuX2N1cnJlbnRJbmRleClpZih0aGlzLl9jdXJyZW50SW5kZXg8YSl7dGhpcy5fY3VycmVudEluZGV4PWEsdGhpcy5fY2VudGVyPW5ldyBmLmdlb20uQ29vcmRpbmF0ZSh0LGUpO3ZhciB1PXRoaXMuX3NlZ21lbnRzW3RoaXMuX2N1cnJlbnRJbmRleCsxXSxsPSFzLnN0YXRlLmlzRW5kU2VnbWVudCYmIXMuc3RhdGUudGFyZ2V0Rmxvb3IsYz1sP3Uuc3BvdC5saW5lU3RyaW5nLmdldENvb3JkaW5hdGUoKTpzLnNwb3QubGluZVN0cmluZy5wb2ludHMuY29vcmRpbmF0ZXNbMV07aSYmYy5kaXN0YW5jZShuZXcgZi5nZW9tLkNvb3JkaW5hdGUodCxlKSk8PXImJjAhPT10aGlzLmN1cnJlbnRJbmRleCYmKHRoaXMuX2NlbnRlcj1jLHRoaXMuZW1pdChcIm9uQXJyaXZlU2VnRW5kXCIpKSx0aGlzLl9jaGFuZ2VTZWdtZW50KHMsdGhpcy5fY2VudGVyKX1lbHNle3ZhciBoPXMuc3BvdC5saW5lU3RyaW5nLmdldENvb3JkaW5hdGUoKTtpZihoLmRpc3RhbmNlKG5ldyBmLmdlb20uQ29vcmRpbmF0ZSh0LGUpKT5oLmRpc3RhbmNlKHRoaXMuX2NlbnRlcikpe3RoaXMuX2NlbnRlcj1uZXcgZi5nZW9tLkNvb3JkaW5hdGUodCxlKTt2YXIgZD10aGlzLl9zZWdtZW50c1t0aGlzLl9jdXJyZW50SW5kZXgrMV0scD0hcy5zdGF0ZS5pc0VuZFNlZ21lbnQmJiFzLnN0YXRlLnRhcmdldEZsb29yLGc9cD9kLnNwb3QubGluZVN0cmluZy5nZXRDb29yZGluYXRlKCk6cy5zcG90LmxpbmVTdHJpbmcucG9pbnRzLmNvb3JkaW5hdGVzWzFdO2kmJmcuZGlzdGFuY2UobmV3IGYuZ2VvbS5Db29yZGluYXRlKHQsZSkpPD1yJiYwIT09dGhpcy5jdXJyZW50SW5kZXgmJih0aGlzLl9jZW50ZXI9Zyx0aGlzLmVtaXQoXCJvbkFycml2ZVNlZ0VuZFwiKSksdGhpcy5fY2hhbmdlTG9jYXRpb24odGhpcy5fY2VudGVyKX19ZWxzZSB0aGlzLl9jdXJyZW50SW5kZXg9YSx0aGlzLl9jZW50ZXI9bmV3IGYuZ2VvbS5Db29yZGluYXRlKHQsZSksdGhpcy5fY2hhbmdlU2VnbWVudChzLHRoaXMuX2NlbnRlcik7cmV0dXJuITB9fSx7a2V5OlwiY2xlYXJDdXJTdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudEluZGV4PTAsdGhpcy5fY2VudGVyPW51bGx9fSx7a2V5OlwicmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fY3VycmVudEluZGV4PTAsdGhpcy5fY2VudGVyPW51bGwsdGhpcy5fc2VnbWVudHM9W10sdGhpcy5jbGVhckN1clN0KCksdGhpcy5fdHJpZ2dlciYmdGhpcy5fdHJpZ2dlci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3NlZ21lbnRzLnB1c2goZSl9KX19LHtrZXk6XCJfaXNPblNlZ21lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPWguZGVmYXVsdC5jcmVhdGVQb2ludChbdCxlXSkscj1uLnNwb3Q7cjspe3ZhciBvPXIubGluZVN0cmluZztpZihvLmJ1ZmZlciguMSkuY29udGFpbnMoaSkpcmV0dXJuITA7aWYocj1yLm5leHRMaW5lU3BvdCxyJiZyLmlzVmFsaWQpYnJlYWt9cmV0dXJuITF9fSx7a2V5OlwiX2NoYW5nZVNlZ21lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcIm9uU2VnbWVudENoYW5nZVwiLHQpLHRoaXMuZW1pdChcIm9uTG9jYXRpb25DaGFuZ2VcIixlKX19LHtrZXk6XCJfY2hhbmdlTG9jYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJvbkxvY2F0aW9uQ2hhbmdlXCIsdCl9fSx7a2V5OlwiY3VycmVudEluZGV4XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRJbmRleH19LHtrZXk6XCJjZW50ZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VudGVyfX0se2tleTpcInRyaWdnZXJcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdHJpZ2dlcj10LHRoaXMucmVzZXQoKX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9ZH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYT1uKDE1NCkscz1uKDI0KSx1PWkocyksbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cih0aGlzLHQpLHRoaXMuX3Nwb3RzPVtdO2Zvcih2YXIgbj1lLmZlYXR1cmVzLGk9QXJyYXkuaXNBcnJheShuKSxvPTAsbj1pP246bltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYoaSl7aWYobz49bi5sZW5ndGgpYnJlYWs7cz1uW28rK119ZWxzZXtpZihvPW4ubmV4dCgpLG8uZG9uZSlicmVhaztzPW8udmFsdWV9Zm9yKHZhciBsPXMsYz1sLnByb3BlcnRpZXMsaD1sLmdlb21ldHJ5LGY9aC5jb29yZGluYXRlcyxkPVtdLHA9ZixnPUFycmF5LmlzQXJyYXkocCksdj0wLHA9Zz9wOnBbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBtO2lmKGcpe2lmKHY+PXAubGVuZ3RoKWJyZWFrO209cFt2KytdfWVsc2V7aWYodj1wLm5leHQoKSx2LmRvbmUpYnJlYWs7bT12LnZhbHVlfXZhciB5PW07aWYoZC5wdXNoKHkpLDI9PT1kLmxlbmd0aCYmIXRoaXMubmVlZFRvVGhyb3coZCkpe3ZhciBfPW5ldyBhLkxpbmVTcG90KGMsdS5kZWZhdWx0LmNyZWF0ZUxpbmVTdHJpbmcoZCkpLGI9dGhpcy5fc3BvdHNbdGhpcy5fc3BvdHMubGVuZ3RoLTFdO2ImJihiLm5leHRMaW5lU3BvdD1fKSxfLmxhc3RMaW5lU3BvdD1iLHRoaXMuX3Nwb3RzLnB1c2goXyl9Mj09PWQubGVuZ3RoJiZkLnNoaWZ0KCl9fX1yZXR1cm4gbyh0LFt7a2V5OlwibmV4dFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nwb3RzLnNoaWZ0KCl9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX3Nwb3RzLmxlbmd0aH19LHtrZXk6XCJuZWVkVG9UaHJvd1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codFswXVswXS10WzFdWzBdLDIpK01hdGgucG93KHRbMF1bMV0tdFsxXVsxXSwyKSk8LjAxfX1dKSx0fSgpO2UuZGVmYXVsdD1sfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9big1NyksbD1pKHUpLGM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LG4saSl7cih0aGlzLGUpO3ZhciBhPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIGEuX21hdGU9dCxhLl9tYXA9bixhLl9yZWR1Y2U9aSxhLl9zcG90cz1bXSxhfXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwibWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0LmlzVmFsaWQpcmV0dXJuIG51bGw7dmFyIGU9dGhpcy5fbWF0ZS5tYXRlKHQpO2lmKGUuZGlzdGFuY2VUb0VuZD1lLmRpc3RhbmNlLCF0Lm5leHRMaW5lU3BvdClyZXR1cm4gZTtmb3IodmFyIG49dC5uZXh0TGluZVNwb3QsaT10aGlzLl9tYXRlLm1hdGUobik7biYmKGkuZGlyZWN0aW9uJiZcImZvcndhcmRcIj09PWkuZGlyZWN0aW9ufHwhaS5kaXJlY3Rpb24pJiYhaS5vcmllbnRhdGlvbjspe2lmKGUuZGlzdGFuY2UrPWkuZGlzdGFuY2Usbi5pc1ZhbGlkPSExLGkuaXNFbmRTZWdtZW50KXtlLmlzRW5kU2VnbWVudD0hMDticmVha31pZihpLnRhcmdldEZsb29yKXtlLnRhcmdldEZsb29yPWkudGFyZ2V0Rmxvb3IsZS5pc1VwPWkuaXNVcDticmVha31uPW4ubmV4dExpbmVTcG90LGk9dGhpcy5fbWF0ZS5tYXRlKG4pfWZvcihuPXQubmV4dExpbmVTcG90O247KWk9dGhpcy5fbWF0ZS5tYXRlKG4pLGUuZGlzdGFuY2VUb0VuZCs9aS5kaXN0YW5jZSxuPW4ubmV4dExpbmVTcG90O2Zvcih2YXIgcj10LG89dm9pZCAwLGE9MCxzPSExO3I7KW89dGhpcy5fbWF0ZS5tYXRlKHIpLGErPW8uZGlzdGFuY2Uscj1yLm5leHRMaW5lU3BvdCwhcyYmby50YXJnZXRGbG9vciYmKGUuZGlzdGFuY2VUb0Nvbm5lY3Rpb249YSxzPSEwKTtyZXR1cm4gZX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbn1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsaSxyKXtuKHRoaXMsdCksdGhpcy5fc3BvdD1lLHRoaXMuX3N0YXRlPWksdGhpcy5fbGFzdFNlZ21lbnQ9dGhpcy5fbmV4dFNlZ21lbnQ9bnVsbCx0aGlzLl9hdWRpb1Byb3ZpZGVyPXJ9cmV0dXJuIGkodCxbe2tleTpcImdldE1lc3NhZ2VJbk5hdmlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49bnVsbCxpPW51bGw7cmV0dXJuIHRoaXMuX25leHRTZWdtZW50JiZ0aGlzLl9uZXh0U2VnbWVudC5zdGF0ZS5kaXJlY3Rpb24mJihpPXRoaXMuX3BhcnNlRGlyZWN0aW9uSW5OYXZpKHRoaXMuX25leHRTZWdtZW50LnN0YXRlLmRpcmVjdGlvbikpLHRoaXMuc3RhdGUuaXNFbmRTZWdtZW50JiYoaT1cIuWIsOi+vuebrueahOWcsOmZhOi/kVwiKSx0aGlzLnN0YXRlLnRhcmdldEZsb29yJiYoaT10aGlzLnN0YXRlLmlzVXA/XCLkuZjnlLXmoq/kuIrooYzoh7NcIit0aGlzLnN0YXRlLnRhcmdldEZsb29yK1wi5bGCXCI6XCLkuZjnlLXmoq/kuIvooYzoh7NcIit0aGlzLnN0YXRlLnRhcmdldEZsb29yK1wi5bGCXCIpLG49dD9cIuebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZS10KS50b0ZpeGVkKDEpK1wi57Gz5ZCOXCIraTpcIuebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZSkudG9GaXhlZCgxKStcIuexs+WQjlwiK2kscGFyc2VGbG9hdCh0aGlzLnN0YXRlLmRpc3RhbmNlLXQpLnRvRml4ZWQoMSk8PTAmJihuPVwiXCIraSksZXx8KHRoaXMuX2F1ZGlvUHJvdmlkZXI/dGhpcy5fYXVkaW9Qcm92aWRlci5wbGF5TWVzc2FnZShuKTpjb25zb2xlLmxvZyhcIkF1ZGlvIG5vdCBwcm92aWRlZCB3aGVuIGluaXRpYWxpemluZyBEeW5hbWljTmF2aWdhdGlvblwiKSksbn19LHtrZXk6XCJfcGFyc2VEaXJlY3Rpb25Jbk5hdmlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1udWxsO3N3aXRjaCh0KXtjYXNlXCJsZWZ0Rm9yd2FyZFwiOmU9XCLlt6bliY3mlrnnm7TooYxcIjticmVhaztjYXNlXCJsZWZ0QmFja3dhcmRcIjplPVwi5bem5ZCO5pa555u06KGMXCI7YnJlYWs7Y2FzZVwibGVmdFwiOmU9XCLlkJHlt6bovaxcIjticmVhaztjYXNlXCJyaWdodEZvcndhcmRcIjplPVwi5Y+z5YmN5pa555u06KGMXCI7YnJlYWs7Y2FzZVwicmlnaHRCYWNrd2FyZFwiOmU9XCLlj7PlkI7mlrnnm7TooYxcIjticmVhaztjYXNlXCJyaWdodFwiOmU9XCLlkJHlj7PovaxcIjticmVhaztjYXNlXCJiYWNrd2FyZFwiOmU9XCLlkJHlkI7ovaxcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIldhbGtpbmdNYXRlI21lc3NhZ2U6IEludmFsaWQgZGlyZWN0aW9uIG9yIG9yaWVudGF0aW9uXCIpfXJldHVybiBlfX0se2tleTpcIl9wYXJzZU9yaWVudGF0aW9uSW5OYXZpXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtzd2l0Y2godCl7Y2FzZVwiZWFzdFwiOmU9XCLlkJHkuJxcIjticmVhaztjYXNlXCJ3ZXN0XCI6ZT1cIuWQkeilv1wiO2JyZWFrO2Nhc2VcInNvdXRoXCI6ZT1cIuWQkeWNl1wiO2JyZWFrO2Nhc2VcIm5vcnRoXCI6ZT1cIuWQkeWMl1wiO2JyZWFrO2Nhc2VcIm5vcnRoZWFzdFwiOmU9XCLlkJHkuJzljJdcIjticmVhaztjYXNlXCJub3J0aHdlc3RcIjplPVwi5ZCR6KW/5YyXXCI7YnJlYWs7Y2FzZVwic291dGhlYXN0XCI6ZT1cIuWQkeS4nOWNl1wiO2JyZWFrO2Nhc2VcInNvdXRod2VzdFwiOmU9XCLlkJHopb/ljZdcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIldhbGtpbmdNYXRlI21lc3NhZ2U6IEludmFsaWQgZGlyZWN0aW9uIG9yIG9yaWVudGF0aW9uXCIpfXJldHVybiBlfX0se2tleTpcImdldE1lc3NhZ2VJbkxpc3RcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PW51bGw7aWYodGhpcy5zdGF0ZS5kaXJlY3Rpb24/dD10aGlzLl9wYXJzZURpcmVjdGlvbih0aGlzLnN0YXRlLmRpcmVjdGlvbik6dGhpcy5zdGF0ZS5vcmllbnRhdGlvbiYmKHQ9dGhpcy5fcGFyc2VPcmllbnRhdGlvbih0aGlzLnN0YXRlLm9yaWVudGF0aW9uKSksdGhpcy5zdGF0ZS5pc0VuZFNlZ21lbnQpcmV0dXJuIHQrXCLlkI7liLDovr7nm67nmoTlnLBcIjtpZih0aGlzLnN0YXRlLnRhcmdldEZsb29yKXt2YXIgZT10aGlzLnN0YXRlLmlzVXA/XCLlkI7kuIrooYzoh7NcIit0aGlzLnN0YXRlLnRhcmdldEZsb29yK1wi5bGCXCI6XCLlkI7kuIvooYzoh7NcIit0aGlzLnN0YXRlLnRhcmdldEZsb29yK1wi5bGCXCI7cmV0dXJuXCJcIit0K2V9cmV0dXJuIHR9fSx7a2V5OlwiX3BhcnNlRGlyZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtzd2l0Y2godCl7Y2FzZVwiZm9yd2FyZFwiOmU9XCLnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJsZWZ0Rm9yd2FyZFwiOmU9XCLlt6bliY3mlrnnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJsZWZ0QmFja3dhcmRcIjplPVwi5bem5ZCO5pa555u06KGMXCIrcGFyc2VGbG9hdCh0aGlzLnN0YXRlLmRpc3RhbmNlKS50b0ZpeGVkKDEpK1wi57GzXCI7YnJlYWs7Y2FzZVwibGVmdFwiOmU9XCLlkJHlt6bnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJyaWdodEZvcndhcmRcIjplPVwi5Y+z5YmN5pa555u06KGMXCIrcGFyc2VGbG9hdCh0aGlzLnN0YXRlLmRpc3RhbmNlKS50b0ZpeGVkKDEpK1wi57GzXCI7YnJlYWs7Y2FzZVwicmlnaHRCYWNrd2FyZFwiOmU9XCLlj7PlkI7mlrnnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJyaWdodFwiOmU9XCLlkJHlj7Pnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJiYWNrd2FyZFwiOmU9XCLlkJHlkI7nm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIldhbGtpbmdNYXRlI21lc3NhZ2U6IEludmFsaWQgZGlyZWN0aW9uIG9yIG9yaWVudGF0aW9uXCIpfXJldHVybiBlfX0se2tleTpcIl9wYXJzZU9yaWVudGF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbDtzd2l0Y2godCl7Y2FzZVwiZWFzdFwiOmU9XCLlkJHkuJznm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJ3ZXN0XCI6ZT1cIuWQkeilv+ebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZSkudG9GaXhlZCgxKStcIuexs1wiO2JyZWFrO2Nhc2VcInNvdXRoXCI6ZT1cIuWQkeWNl+ebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZSkudG9GaXhlZCgxKStcIuexs1wiO2JyZWFrO2Nhc2VcIm5vcnRoXCI6ZT1cIuWQkeWMl+ebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZSkudG9GaXhlZCgxKStcIuexs1wiO2JyZWFrO2Nhc2VcIm5vcnRoZWFzdFwiOmU9XCLlkJHkuJzljJfnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztjYXNlXCJub3J0aHdlc3RcIjplPVwi5ZCR6KW/5YyX55u06KGMXCIrcGFyc2VGbG9hdCh0aGlzLnN0YXRlLmRpc3RhbmNlKS50b0ZpeGVkKDEpK1wi57GzXCI7YnJlYWs7Y2FzZVwic291dGhlYXN0XCI6ZT1cIuWQkeS4nOWNl+ebtOihjFwiK3BhcnNlRmxvYXQodGhpcy5zdGF0ZS5kaXN0YW5jZSkudG9GaXhlZCgxKStcIuexs1wiO2JyZWFrO2Nhc2VcInNvdXRod2VzdFwiOmU9XCLlkJHopb/ljZfnm7TooYxcIitwYXJzZUZsb2F0KHRoaXMuc3RhdGUuZGlzdGFuY2UpLnRvRml4ZWQoMSkrXCLnsbNcIjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIldhbGtpbmdNYXRlI21lc3NhZ2U6IEludmFsaWQgZGlyZWN0aW9uIG9yIG9yaWVudGF0aW9uXCIpfXJldHVybiBlfX0se2tleTpcInNwb3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3BvdH19LHtrZXk6XCJzdGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX19LHtrZXk6XCJsYXN0U2VnbWVudFwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9sYXN0U2VnbWVudD10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFzdFNlZ21lbnR9fSx7a2V5OlwibmV4dFNlZ21lbnRcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbmV4dFNlZ21lbnQ9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25leHRTZWdtZW50fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMTUyKSxzPWkoYSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cih0aGlzLHQpLHRoaXMuc3RhdGVzPWV9cmV0dXJuIG8odCxbe2tleTpcInByb3ZpZGVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgcy5kZWZhdWx0KHQsZSxuKX19LHtrZXk6XCJzdGF0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3RhdGVzPXR9fV0pLHR9KCk7ZS5kZWZhdWx0PXV9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGkodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KSx0aGlzLnByb3BlcnR5PWV8fHt9fXJldHVybiBvKHQsW3trZXk6XCJwcm9wZXJ0eVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Byb3BlcnR5PXR9fV0pLHR9KCkscz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsaSl7cih0aGlzLGUpO3ZhciBvPW4odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gby5fY29vcmRpbmF0ZT1pLG99cmV0dXJuIGkoZSx0KSxvKGUsW3trZXk6XCJjb29yZGluYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGV9fV0pLGV9KGEpLHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0LGkpe3IodGhpcyxlKTt2YXIgbz1uKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIG8uX2xpbmVTdHJpbmc9aSxvLl9sYXN0TGluZVNwb3Q9by5fbmV4dExpbmVTcG90PW51bGwsby5faXNWYWxpZD0hMCxvfXJldHVybiBpKGUsdCksbyhlLFt7a2V5OlwibGluZVN0cmluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lU3RyaW5nfX0se2tleTpcImxhc3RMaW5lU3BvdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXN0TGluZVNwb3R9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sYXN0TGluZVNwb3Q9dH19LHtrZXk6XCJuZXh0TGluZVNwb3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV4dExpbmVTcG90fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbmV4dExpbmVTcG90PXR9fSx7a2V5OlwiaXNWYWxpZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1ZhbGlkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNWYWxpZD10fX1dKSxlfShhKTtlLlNwb3Q9YSxlLlBvaW50U3BvdD1zLGUuTGluZVNwb3Q9dX0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpfXJldHVybiBpKHQsW3trZXk6XCJtZXNzYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tZXNzYWdlPXR9fSx7a2V5Olwic3RhdGVNYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlTWF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXRlTWF0ZT10fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMTUwKSxzPWkoYSksdT1uKDE0NyksbD1pKHUpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV07cih0aGlzLHQpLHRoaXMuX3Byb3ZpZGVyPWUsdGhpcy5fYXVkaW9Qcm92aWRlcj1uP25ldyBsLmRlZmF1bHQ6bnVsbCx0aGlzLl9zZWdtZW50cz1bXX1yZXR1cm4gbyh0LFt7a2V5OlwiYWRkU2VnbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiAwIT09dGhpcy5fc2VnbWVudHMubGVuZ3RoJiYodGhpcy5fc2VnbWVudHNbdGhpcy5fc2VnbWVudHMubGVuZ3RoLTFdLm5leHRTZWdtZW50PXQsdC5sYXN0U2VnbWVudD10aGlzLl9zZWdtZW50c1t0aGlzLl9zZWdtZW50cy5sZW5ndGgtMV0pLHRoaXMuX3NlZ21lbnRzLnB1c2godCksdGhpc319LHtrZXk6XCJyZW1vdmVTZWdtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzLnNwbGljZSh0LDEpLHRoaXN9fSx7a2V5OlwiZ2V0U2VnbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zZWdtZW50c1t0XX19LHtrZXk6XCJzaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VnbWVudHMubGVuZ3RofX0se2tleTpcImZvckVhY2hcIix2YWx1ZTpmdW5jdGlvbih0KXtbXS5mb3JFYWNoLmNhbGwodGhpcy5fc2VnbWVudHMsdCl9fSx7a2V5OlwidHJpZ2dlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBzLmRlZmF1bHQodCksbj10aGlzLnByb3ZpZGVyLnN0YXRlcztmb3IodGhpcy5fc2VnbWVudHM9W107ZS5oYXMoKTspZm9yKHZhciBpPWUubmV4dCgpLHI9bixvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciB1O2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3U9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7dT1hLnZhbHVlfXZhciBsPXUsYz1sLnN0YXRlTWF0ZS5tYXRlKGkpO2lmKGMpe3ZhciBoPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGwpKTtmb3IodmFyIGYgaW4gYyloW2ZdPWNbZl07dmFyIGQ9dGhpcy5fcHJvdmlkZXIucHJvdmlkZXIoaSxoLHRoaXMuX2F1ZGlvUHJvdmlkZXIpO3RoaXMuYWRkU2VnbWVudChkKX19fX0se2tleTpcInByb3ZpZGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3ZpZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcHJvdmlkZXI9dH19XSksdH0oKTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuQ3VzdG9tRz1lLkR5bmFtaWNOYXZpZ2F0aW9uPWUubmF2aUZpbHRlcj1lLk5hdmlVdGlscz1lLlBhdGhTZXJ2aWNlPWUuTmF2aWdhdGVNYW5hZ2VyPXZvaWQgMDt2YXIgcj1uKDMyKSxvPWkociksYT1uKDU0KSxzPWkoYSksdT1uKDE0NSksbD1uKDU2KSxjPWkobCksaD1uKDE0MiksZj1pKGgpO2UuTmF2aWdhdGVNYW5hZ2VyPW8uZGVmYXVsdCxlLlBhdGhTZXJ2aWNlPXMuZGVmYXVsdCxlLk5hdmlVdGlscz11Lk5hdmlVdGlscyxlLm5hdmlGaWx0ZXI9dS5uYXZpRmlsdGVyLGUuRHluYW1pY05hdmlnYXRpb249Yy5kZWZhdWx0LGUuQ3VzdG9tRz1mLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9big1OCksYz1pKGwpLGg9big0KSxmPXthbmNob3I6WzAsMF0sY2xhc3NOYW1lOlwiXCIsY3Jvc3NPcmlnaW46ITEsaW50ZXJhY3RpdmU6ITB9LGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyKHRoaXMsZSk7dmFyIG49cyh7fSxmLHQpLGk9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsbnVsbCxuKSk7cmV0dXJuIGkuX2RvbT1pLl9jcmVhdGVJY29uKCksaX1yZXR1cm4gYShlLHQpLHUoZSxbe2tleTpcIl9jcmVhdGVJY29uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fb3B0aW9ucyxuPWUudXJsLGk9ZS5pbnRlcmFjdGl2ZTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJ1cmwgbm90IHNldCBpbiBJY29uT3ZlcmxheSBvcHRpb25zLlwiKTt2YXIgcj10aGlzLl9jcmVhdGVJbWcobik7cmV0dXJuIHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbihlKXt0LmVtaXQoXCJsb2FkXCIsdCxlKX0sITEpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oZSl7dC5lbWl0KFwiZXJyb3JcIix0LGUpfSwhMSksci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihlKXtpJiZ0LmVtaXQoXCJjbGlja1wiLHQsZSl9LCExKSx0aGlzLl9zZXRTdHlsZXMocikscn19LHtrZXk6XCJfY3JlYXRlSW1nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb3B0aW9ucyxuPWUuY3Jvc3NPcmlnaW4saT1lLmFsdCxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7cmV0dXJuIHIuc3JjPXQsbiYmKHIuY3Jvc3NPcmlnaW49XCJcIiksaSYmKHIuYWx0PWkpLHJ9fSx7a2V5Olwic2V0U3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHMoe30sdGhpcy5fb3B0aW9ucyx0KSx0aGlzLl9zZXRTdHlsZXModGhpcy5fZG9tKSx0aGlzfX0se2tleTpcIl9zZXRTdHlsZXNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9vcHRpb25zLmNsYXNzTmFtZTtlJiYodC5jbGFzc05hbWU9XCJuZ3ItaWNvbk92ZXJsYXkgXCIrZSk7dmFyIG49dGhpcy5fb3B0aW9ucyxpPW4uYW5jaG9yLHI9bi5zaXplO3JldHVybiBpPXRoaXMuX3RyYW5zbGF0ZTJDb29yZChpKSxyPXRoaXMuX3RyYW5zbGF0ZTJDb29yZChyKSxpJiYodC5zdHlsZS5tYXJnaW5MZWZ0PS1pLngrXCJweFwiLHQuc3R5bGUubWFyZ2luVG9wPS1pLnkrXCJweFwiKSxyJiYodC5zdHlsZS53aWR0aD1yLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PXIueStcInB4XCIpLHRoaXN9fSx7a2V5OlwiX3RyYW5zbGF0ZTJDb29yZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBudWxsO3ZhciBlPXZvaWQgMCxuPXZvaWQgMDtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT8oZT10WzBdP3RbMF06MCxuPXRbMV0/dFsxXTowKTooZT10Lng/dC54OjAsbj10Lnk/dC55OjApLG5ldyBoLmdlb20uQ29vcmRpbmF0ZShlLG4pfX0se2tleTpcInVybFwiLHNldDpmdW5jdGlvbih0KXt0IT09dGhpcy5fb3B0aW9ucy51cmwmJih0aGlzLl9kb20uc3JjPXQpfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1kfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9big1KSxsPWkodSksYz1uKDQpLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKTt2YXIgdD1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LnBhcnRpY2xlQ291bnQ9MTAsdC5jb2xvcnM9W1suNSwuNSwuNV0sWzEsMCwwXV0sdC5wb3NpdGlvbj1uZXcgYy5nZW9tLkNvb3JkaW5hdGUoMCwwLDApLHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJwYXJlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFyZW50PXR9fSx7a2V5OlwicGFydGljbGVDb3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWNsZUNvdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFydGljbGVDb3VudD10LHRoaXMuZW1pdChcInZhbHVlQ2hhbmdlXCIsdGhpcyxcInBhcnRpY2xlQ291bnRcIix0KX19LHtrZXk6XCJwb3NpdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uPXQsdGhpcy5lbWl0KFwidmFsdWVDaGFuZ2VcIix0aGlzLFwicG9zaXRpb25cIix0KX19LHtrZXk6XCJjb2xvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3JzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29sb3JzPXQsdGhpcy5lbWl0KFwidmFsdWVDaGFuZ2VcIix0aGlzLFwiY29sb3JzXCIsdCl9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PWh9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9big1KSxjPWkobCksaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3IodGhpcyxlKTt2YXIgbj1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuLl9wYXJ0aWNsZXNJbmRleD1bXSxuLl9wYXJ0aWNsZXM9e30scyhuLHR8fHt9KSxufXJldHVybiBhKGUsdCksdShlLFt7a2V5OlwiYWRkUGFydGljbGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0JiZ0aGlzLmhhcyh0KXx8KHRoaXMuX3BhcnRpY2xlc1t0LmlkXT10LHRoaXMuX3BhcnRpY2xlc0luZGV4W3RoaXMuX3BhcnRpY2xlc0luZGV4Lmxlbmd0aF09dC5pZCx0aGlzLmVtaXQoXCJhZGRQYXJ0aWNsZVwiLHRoaXMsdCksdC5wYXJlbnQ9dGhpcyl9fSx7a2V5OlwicmVtb3ZlUGFydGljbGVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0JiZ0aGlzLmhhcyh0KSl7ZGVsZXRlIHRoaXMuX3BhcnRpY2xlc1t0LmlkXTt2YXIgZT10aGlzLl9wYXJ0aWNsZXNJbmRleC5pbmRleE9mKHQuaWQpO2UhPT0tMSYmdGhpcy5fcGFydGljbGVzSW5kZXguc3BsaWNlKGUsMSksdGhpcy5lbWl0KFwicmVtb3ZlUGFydGljbGVcIix0aGlzLHQpLHQucGFyZW50PW51bGx9fX0se2tleTpcImZvckVhY2hcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3BhcnRpY2xlc0luZGV4LmZvckVhY2goZnVuY3Rpb24obixpKXt0KGUuX3BhcnRpY2xlc1tuXSxpKX0pfX0se2tleTpcImdldEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BhcnRpY2xlc0luZGV4LmluZGV4T2YodCl9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiZ0LmlkIGluIHRoaXMuX3BhcnRpY2xlc0luZGV4fX0se2tleTpcInRleHR1cmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHR1cmU9dH19XSksZX0oYy5kZWZhdWx0KTtlLmRlZmF1bHQ9aH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUGFydGljbGVFbmdpbmU9ZS5QYXJ0aWNsZUdyb3VwPWUuUGFydGljbGU9dm9pZCAwO3ZhciByPW4oMTU5KSxvPWkociksYT1uKDE2MCkscz1pKGEpLHU9big2MCksbD1pKHUpO2UuUGFydGljbGU9by5kZWZhdWx0LGUuUGFydGljbGVHcm91cD1zLmRlZmF1bHQsZS5QYXJ0aWNsZUVuZ2luZT1sLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDYxKSxsPWkodSksYz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJnZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0eWxlfX0se2tleTpcInN0eWxlXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0eWxlPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHlsZX19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Y30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNjEpLGw9aSh1KSxjPW5ldyBSZWdFeHAsaD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cih0aGlzLGUpO3ZhciB0PW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2tleXM9W10sdC5fc3R5bGVzPXt9LHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJhZGRLZXlcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGUpLGk9MDtpPGU7aSsrKW5baV09YXJndW1lbnRzW2ldO24uZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9rZXlzLnB1c2goZSl9KX19LHtrZXk6XCJhZGRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fc3R5bGVzW3RdPWV9fSx7a2V5OlwiZ2V0U3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fa2V5cyl7dmFyIG49dGhpcy5fa2V5c1tlXTtpZihuIGluIHQucHJvcGVydGllcylmb3IodmFyIGkgaW4gdGhpcy5fc3R5bGVzKWlmKGMuY29tcGlsZShpLFwiZ1wiKSxjLnRlc3QodC5wcm9wZXJ0aWVzW25dKSlyZXR1cm4gdGhpcy5fc3R5bGVzW2ldfXJldHVybiB0aGlzLmRlZmF1bHRTdHlsZX19LHtrZXk6XCJkZWZhdWx0U3R5bGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmYXVsdFN0eWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGVmYXVsdFN0eWxlPXR9fV0pLGV9KGwuZGVmYXVsdCk7ZS5kZWZhdWx0PWh9LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KX1yZXR1cm4gaSh0LFt7a2V5OlwibWVyZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXN9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuITF9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89bigxKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscz1uKDIpLHU9aShzKSxsPW4oOTYpLGM9bigzKSxoPXt1bmRlZmVycmVkOiExLGRlcHRoTWF4OjEvMCxvYmplY3RzVGhyZXNob2xkOjgsb3ZlcmxhcDouMTV9LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3IodGhpcyx0KSx0aGlzLm9wdGlvbnM9byh7fSxoLGUpLHRoaXMuX29jdHJlZT1uZXcgbC5PY3RyZWUobyh7fSx0aGlzLm9wdGlvbnMpKSx0aGlzLmZlYXR1cmVNYXBwaW5nPXt9LHRoaXMuZ3JvdXBNYXBwaW5nPXt9LHRoaXMudmlydHVhbEdyb3Vwcz17fX1yZXR1cm4gYSh0LFt7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vY3RyZWUudXBkYXRlKCl9fSx7a2V5OlwiX2FkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZih0IGluc3RhbmNlb2YgdS5Hcm91cClmb3IodmFyIGk9dC5jaGlsZHJlbixyPWksbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgbD1zO3RoaXMuX2FkZChsLGUsbil9ZWxzZSBlLnB1c2godC51dWlkKSx0aGlzLl9vY3RyZWUuYWRkKHQpfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106e307aWYoISgoMCxjLmlzQmxhbmspKHQpfHwoMCxjLmlzQmxhbmspKGUpfHwoMCxjLmlzQmxhbmspKG4pKSl7KDAsYy5pc0JsYW5rKSh0aGlzLmZlYXR1cmVNYXBwaW5nW2VdKSYmKHRoaXMuZmVhdHVyZU1hcHBpbmdbZV09e30pLCgwLGMuaXNCbGFuaykodGhpcy5mZWF0dXJlTWFwcGluZ1tlXVtuXSkmJih0aGlzLmZlYXR1cmVNYXBwaW5nW2VdW25dPVtdKTt2YXIgcj10aGlzLmZlYXR1cmVNYXBwaW5nW2VdW25dLG89aS5sYXllckdyb3VwSWQsYT1pLnNjZW5lR3JvdXBJZCxzPW51bGw7aWYobyYmYSl7aWYodGhpcy5ncm91cE1hcHBpbmdbYV0pe2lmKG8hPT10aGlzLmdyb3VwTWFwcGluZ1thXSl0aHJvdyBuZXcgRXJyb3IoXCJPY3RyZWVNYW5hZ2VyOiBVbm1hdGNoIGluIGdyb3VwTWFwcGluZ1wiKX1lbHNlIHRoaXMuZ3JvdXBNYXBwaW5nW2FdPW87dGhpcy52aXJ0dWFsR3JvdXBzW29dfHwodGhpcy52aXJ0dWFsR3JvdXBzW29dPW5ldyB1Lkdyb3VwKSxzPXRoaXMudmlydHVhbEdyb3Vwc1tvXSxzLmFkZCh0KSx0Ll92aXJ0dWFsPSEwfXRoaXMuX2FkZCh0LHIscyl9fX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYodC5fdmlydHVhbCYmdC5wYXJlbnQucmVtb3ZlKHQpLHQgaW5zdGFuY2VvZiB1Lkdyb3VwKWZvcih2YXIgbj10LmNoaWxkcmVuLGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWE7dGhpcy5yZW1vdmUocyxlKX1lbHNlIHRoaXMuX29jdHJlZS5yZW1vdmUodCksZSYmdC5nZW9tZXRyeS5kaXNwb3NlKCl9fSx7a2V5OlwicmVtb3ZlQnlMYXllckFuZEZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuZmVhdHVyZU1hcHBpbmdbdF0mJnRoaXMuZmVhdHVyZU1hcHBpbmdbdF1bZV0pe3ZhciBuPXRoaXMuZmVhdHVyZU1hcHBpbmdbdF1bZV07aWYobiYmbi5sZW5ndGg+MClmb3IodmFyIGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWEsdT10aGlzLl9vY3RyZWUub2JqZWN0c01hcFtzXTt1JiZ0aGlzLnJlbW92ZSh1KX1kZWxldGUgdGhpcy5mZWF0dXJlTWFwcGluZ1t0XVtlXX19fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmZlYXR1cmVNYXBwaW5nO3JldHVybiBuW3RdJiZuW3RdW2VdJiZuW3RdW2VdLmxlbmd0aD4wfX0se2tleTpcInJlYnVpbGRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29jdHJlZS5yZWJ1aWxkKCl9fSx7a2V5OlwiY2xlYXJPY3RyZWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PSEoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0pfHxhcmd1bWVudHNbMF0sZT10aGlzLl9vY3RyZWUub2JqZWN0cyxuPWUubGVuZ3RoO2lmKHRoaXMuX29jdHJlZT1uZXcgbC5PY3RyZWUobyh7fSx0aGlzLm9wdGlvbnMpKSx0aGlzLmZlYXR1cmVNYXBwaW5nPXt9LHRoaXMuZ3JvdXBNYXBwaW5nPXt9LHRoaXMudmlydHVhbEdyb3Vwcz17fSx0KWZvcih2YXIgaT1uLTE7aT49MDstLWkpe3ZhciByPWVbaV07ZS5zcGxpY2UoaSwxKSxyLmdlb21ldHJ5LmRpc3Bvc2UoKX19fSx7a2V5Olwic2VhcmNoQnlDbGllbnRQb2ludFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uZXcgdS5SYXljYXN0ZXIscj1bXTtpLnNldEZyb21DYW1lcmEobmV3IHUuVmVjdG9yMih0LGUpLG4pO2Zvcih2YXIgbz10aGlzLl9vY3RyZWUuc2VhcmNoKGkucmF5Lm9yaWdpbixpLmZhciwhMCxpLnJheS5kaXJlY3Rpb24pLGE9bC5SYXljYXN0ZXJVdGlscy5pbnRlcnNlY3RPY3RyZWVPYmplY3RzKGksbykscz1hLGM9QXJyYXkuaXNBcnJheShzKSxoPTAscz1jP3M6c1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGY7aWYoYyl7aWYoaD49cy5sZW5ndGgpYnJlYWs7Zj1zW2grK119ZWxzZXtpZihoPXMubmV4dCgpLGguZG9uZSlicmVhaztmPWgudmFsdWV9Zm9yKHZhciBkPWYscD1kLm9iamVjdCxnPXAudmlzaWJsZTtwJiYoZz1wLnZpc2libGUpOylwPXAucGFyZW50O2cmJnIucHVzaChkKX1yZXR1cm4gcn19XSksdH0oKTtlLmRlZmF1bHQ9Zn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEodCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBzKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5PdmVybGF5Tm9kZUlkPWUuT3ZlcmxheU5vZGU9dm9pZCAwO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbD1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGM9bigyKSxoPXIoYyksZj1uKDE3KSxkPWkoZikscD1uKDIxKSxnPWkocCksdj0tMixtPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7byh0aGlzLGUpO3ZhciBuPWEodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKTtyZXR1cm4gbi5fbGF5ZXJPdmVybGF5PXt9LG4uX292ZXJsYXlzPXt9LG4uX2RvbU1hcHBpbmc9e30sbi5fZG9tU2NlbmU9bmV3IGguU2NlbmUsbi5fYWRkT3ZlcmxheT1uLl9hZGRPdmVybGF5LmJpbmQobiksbi5fcmVtb3ZlT3ZlcmxheT1uLl9yZW1vdmVPdmVybGF5LmJpbmQobiksbi5fcmVBdHRhY2hPdmVybGF5PW4uX3JlQXR0YWNoT3ZlcmxheS5iaW5kKG4pLG4uX3JlbW92ZUxheWVyPW4uX3JlbW92ZUxheWVyLmJpbmQobiksbi5fb25TY2VuZUNoYW5nZT1uLl9vblNjZW5lQ2hhbmdlLmJpbmQobiksbi5fb3ZlcmxheVZhbHVlQ2hhbmdlPW4uX292ZXJsYXlWYWx1ZUNoYW5nZS5iaW5kKG4pLG59cmV0dXJuIHMoZSx0KSx1KGUsW3trZXk6XCJfcmVtb3ZlT3ZlcmxheVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJlbW92ZU92ZXJsYXkoZSxuKX19LHtrZXk6XCJfcmVBdHRhY2hPdmVybGF5XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3RoaXMucmVBdHRhY2hPdmVybGF5KGUsbil9fSx7a2V5OlwiX3JlbW92ZUxheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9sYXllck92ZXJsYXlbZS5pZF07aWYobilmb3IodmFyIGk9bixyPUFycmF5LmlzQXJyYXkoaSksbz0wLGk9cj9pOmlbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBhO2lmKHIpe2lmKG8+PWkubGVuZ3RoKWJyZWFrO2E9aVtvKytdfWVsc2V7aWYobz1pLm5leHQoKSxvLmRvbmUpYnJlYWs7YT1vLnZhbHVlfXZhciBzPWEsdT10aGlzLl9vdmVybGF5c1tzXTt1JiZ0aGlzLnJlbW92ZU92ZXJsYXkoZSx1KX1kZWxldGUgdGhpcy5fbGF5ZXJPdmVybGF5W2UuaWRdfX0se2tleTpcIl9vblNjZW5lQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2xheWVyT3ZlcmxheVtlLmlkXTtpZihpJiZudWxsPT09bilzd2l0Y2godCl7Y2FzZVwidmlzaWJsZVwiOmZvcih2YXIgcj1pLG89QXJyYXkuaXNBcnJheShyKSxhPTAscj1vP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYobyl7aWYoYT49ci5sZW5ndGgpYnJlYWs7cz1yW2ErK119ZWxzZXtpZihhPXIubmV4dCgpLGEuZG9uZSlicmVhaztzPWEudmFsdWV9dmFyIHU9cyxsPXRoaXMuX292ZXJsYXlzW3VdLGM9YXJndW1lbnRzLmxlbmd0aDw9Mz92b2lkIDA6YXJndW1lbnRzWzNdO2wmJihjPT09ITA/bC50YXJnZXREb20uc3R5bGUuZGlzcGxheT1sLl9vcHRpb25zLmRlZmF1bHREaXNwbGF5OmM9PT0hMSYmKGwudGFyZ2V0RG9tLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpKX1icmVhaztjYXNlXCJwb3NpdGlvblwiOmZvcih2YXIgaD1pLGY9QXJyYXkuaXNBcnJheShoKSxkPTAsaD1mP2g6aFtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHA7aWYoZil7aWYoZD49aC5sZW5ndGgpYnJlYWs7cD1oW2QrK119ZWxzZXtpZihkPWgubmV4dCgpLGQuZG9uZSlicmVhaztwPWQudmFsdWV9dmFyIGc9cCx2PXRoaXMuX2RvbU1hcHBpbmdbZ107aWYodil7dmFyIG09YXJndW1lbnRzLmxlbmd0aDw9Mz92b2lkIDA6YXJndW1lbnRzWzNdO3YucG9zaXRpb24uc2V0WihtWzJdKX19fX19LHtrZXk6XCJfb3ZlcmxheVZhbHVlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2RvbU1hcHBpbmdbdC5pZF07XCJwb3NpdGlvblwiPT09ZSYmKGkucG9zaXRpb24uc2V0WChuLngpLGkucG9zaXRpb24uc2V0WShuLnkpLGkucG9zaXRpb24uc2V0WihuLnp8fGkucG9zaXRpb24ueikpfX0se2tleTpcIl9hZGRPdmVybGF5XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe24uaWQgaW4gdGhpcy5fZG9tTWFwcGluZyYmdGhpcy5yZW1vdmVPdmVybGF5KG4ubGF5ZXIsbik7dmFyIGk9bmV3IGguQ1NTMkRPYmplY3Qobi50YXJnZXREb20pLHI9dGhpcy5fbGF5ZXJPdmVybGF5W2UuaWRdO3J8fChyPVtdLHRoaXMuX2xheWVyT3ZlcmxheVtlLmlkXT1yKSxyLnB1c2gobi5pZCksdGhpcy5fb3ZlcmxheXNbbi5pZF09bix0aGlzLl9kb21NYXBwaW5nW24uaWRdPWksdGhpcy5fZG9tU2NlbmUuYWRkKGkpLG4uYXR0YWNoKGUpLG4ub24oXCJ2YWx1ZUNoYW5nZVwiLHRoaXMuX292ZXJsYXlWYWx1ZUNoYW5nZSksbi5wb3NpdGlvbiYmdGhpcy5fb3ZlcmxheVZhbHVlQ2hhbmdlKG4sXCJwb3NpdGlvblwiLG4ucG9zaXRpb24pfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBkLmRlZmF1bHQmJmwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYWRkXCIsdGhpcykuY2FsbCh0aGlzLHQpLHQgaW5zdGFuY2VvZiBnLmRlZmF1bHQmJih0aGlzLl9jYW1lcmE9dC5jYW1lcmEpfX0se2tleTpcInJlbW92ZU92ZXJsYXlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKGUuaWQgaW4gdGhpcy5fZG9tTWFwcGluZyl7dmFyIG49dGhpcy5fZG9tTWFwcGluZ1tlLmlkXSxpPXRoaXMuX2xheWVyT3ZlcmxheVt0LmlkXTtpZih0aGlzLl9kb21TY2VuZS5yZW1vdmUobiksZGVsZXRlIHRoaXMuX2RvbU1hcHBpbmdbZS5pZF0sZGVsZXRlIHRoaXMuX292ZXJsYXlzW2UuaWRdLGUuZGV0YWNoKHQpLGkpe3ZhciByPWkuaW5kZXhPZihlLmlkKTtyIT09LTEmJmkuc3BsaWNlKHIsMSksMD09PWkubGVuZ3RoJiZkZWxldGUgdGhpcy5fbGF5ZXJPdmVybGF5W3QuaWRdfWUub2ZmKFwidmFsdWVDaGFuZ2VcIix0aGlzLl9vdmVybGF5VmFsdWVDaGFuZ2UpLGUudGFyZ2V0RG9tLnN0eWxlLmRpc3BsYXk9ZS5fb3B0aW9ucy5kZWZhdWx0RGlzcGxheX19fSx7a2V5OlwicmVBdHRhY2hPdmVybGF5XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZighdHx8IWUpdGhyb3cgbmV3IEVycm9yKFwicmVBdHRhY2hPdmVybGF5OiBJbnZhbGlkIHBhcmFtZXRlclwiKTt2YXIgbj1lLmxheWVyLGk9dGhpcy5fbGF5ZXJPdmVybGF5W24uaWRdO2lmKGkpe3ZhciByPWkuaW5kZXhPZihlLmlkKTtpZihyIT09LTEpe3ZhciBvPXRoaXMuX2xheWVyT3ZlcmxheVt0LmlkXTtvfHwobz1bXSx0aGlzLl9sYXllck92ZXJsYXlbdC5pZF09byksaS5zcGxpY2UociwxKSxvLnB1c2goZS5pZCksZS5kZXRhY2gobiksZS5hdHRhY2godCl9fX19LHtrZXk6XCJvbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2woZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwib25BZGRcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fZG9tUmVuZGVyZXI9dC5tYXBWaWV3LmVuZ2luZS5nZXREb21SZW5kZXJlcih0Lm1hcFZpZXcpLHRoaXMuX3NjZW5lTWFuYWdlci5tYXBWaWV3Lm9uKFwiYWRkT3ZlcmxheVwiLHRoaXMuX2FkZE92ZXJsYXkpLHRoaXMuX3NjZW5lTWFuYWdlci5tYXBWaWV3Lm9uKFwicmVtb3ZlT3ZlcmxheVwiLHRoaXMuX3JlbW92ZU92ZXJsYXkpLHRoaXMuX3NjZW5lTWFuYWdlci5tYXBWaWV3Lm9uKFwicmVBdHRhY2hPdmVybGF5XCIsdGhpcy5fcmVBdHRhY2hPdmVybGF5KSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vbihcInJlbW92ZUxheWVyXCIsdGhpcy5fcmVtb3ZlTGF5ZXIpLHRoaXMuX3NjZW5lTWFuYWdlci5vbihcIm9uU2NlbmVDaGFuZ2VcIix0aGlzLl9vblNjZW5lQ2hhbmdlKX19LHtrZXk6XCJvblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NjZW5lTWFuYWdlci5tYXBWaWV3Lm9mZihcImFkZE92ZXJsYXlcIix0aGlzLl9hZGRPdmVybGF5KSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vZmYoXCJyZW1vdmVPdmVybGF5XCIsdGhpcy5fcmVtb3ZlT3ZlcmxheSksdGhpcy5fc2NlbmVNYW5hZ2VyLm1hcFZpZXcub2ZmKFwicmVBdHRhY2hPdmVybGF5XCIsdGhpcy5fcmVBdHRhY2hPdmVybGF5KSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vZmYoXCJyZW1vdmVMYXllclwiLHRoaXMuX3JlbW92ZUxheWVyKSx0aGlzLl9zY2VuZU1hbmFnZXIub2ZmKFwib25TY2VuZUNoYW5nZVwiLHRoaXMuX29uU2NlbmVDaGFuZ2UpLGwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwib25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInJlbmRlclwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fZG9tUmVuZGVyZXImJnRoaXMuX2NhbWVyYSYmdGhpcy5fZG9tUmVuZGVyZXIucmVuZGVyKHRoaXMuX2RvbVNjZW5lLHRoaXMuX2NhbWVyYSl9fV0pLGV9KGQuZGVmYXVsdCk7ZS5PdmVybGF5Tm9kZT1tLGUuT3ZlcmxheU5vZGVJZD12fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlBhcnRpY2xlTm9kZUlkPWUuUGFydGljbGVOb2RlPXZvaWQgMDt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9ZnVuY3Rpb24gdChlLG4saSl7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnQobyxuLGkpfWlmKFwidmFsdWVcImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGE9ci5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKGkpfSxjPW4oMiksaD1yKGMpLGY9big3NiksZD1pKGYpLHA9bigxNyksZz1pKHApLHY9LTMsbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe28odGhpcyxlKTt2YXIgbj1hKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSk7cmV0dXJuIG4uX3BhcnRpY2xlR3JvdXA9bmV3IGguR3JvdXAsbi5fZ3JvdXBfZ3JvdXA9e30sbi5fY2xvY2s9bmV3IGguQ2xvY2ssbi5fdmFsdWVDaGFuZ2U9bi5fdmFsdWVDaGFuZ2UuYmluZChuKSxuLl9hZGRQYXJ0aWNsZT1uLl9hZGRQYXJ0aWNsZS5iaW5kKG4pLG4uX3JlbW92ZVBhcnRpY2xlPW4uX3JlbW92ZVBhcnRpY2xlLmJpbmQobiksbi5fYWRkUGFydGljbGVHcm91cD1uLl9hZGRQYXJ0aWNsZUdyb3VwLmJpbmQobiksbi5fcmVtb3ZlUGFydGljbGVHcm91cD1uLl9yZW1vdmVQYXJ0aWNsZUdyb3VwLmJpbmQobiksbn1yZXR1cm4gcyhlLHQpLHUoZSxbe2tleTpcIl92YWx1ZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wYXJlbnQ7aWYobil7dmFyIGk9c2VsZi5fZ3JvdXBfZ3JvdXBbbi5pZF07aWYoIWkpcmV0dXJuO3ZhciByPW4uZ2V0SW5kZXgodCk7aWYocj09PS0xKXJldHVybjt2YXIgbz1pLmVtaXR0ZXJzW3JdO2lmKCFvKXJldHVybjtmb3IodmFyIGE9YXJndW1lbnRzLmxlbmd0aCxzPUFycmF5KGE+Mj9hLTI6MCksdT0yO3U8YTt1Kyspc1t1LTJdPWFyZ3VtZW50c1t1XTtzd2l0Y2goZSl7Y2FzZVwicG9zaXRpb25cIjpvLnBvc2l0aW9uLnZhbHVlPW8ucG9zaXRpb24udmFsdWUuc2V0KHNbMF0sc1sxXSxzWzJdKTticmVhaztjYXNlXCJwYXJ0aWNsZUNvdW50XCI6by5wYXJ0aWNsZUNvdW50PXNbMF07YnJlYWs7Y2FzZVwiY29sb3JzXCI6Zm9yKHZhciBsPVtdLGM9cyxmPUFycmF5LmlzQXJyYXkoYyksZD0wLGM9Zj9jOmNbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBwO2lmKGYpe2lmKGQ+PWMubGVuZ3RoKWJyZWFrO3A9Y1tkKytdfWVsc2V7aWYoZD1jLm5leHQoKSxkLmRvbmUpYnJlYWs7cD1kLnZhbHVlfXZhciBnPXA7bFtsLmxlbmd0aF09bmV3IGguQ29sb3IoZ1swXSxnWzFdLGdbMl0pfW8uY29sb3IudmFsdWU9bH19fX0se2tleTpcIl9hZGRQYXJ0aWNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fZ3JvdXBfZ3JvdXBbdC5pZF07biYmdGhpcy5hZGRFbWl0dGVyQnlQYXJ0aWNsZSh0LG4sZSl9fSx7a2V5OlwiX3JlbW92ZVBhcnRpY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9ncm91cF9ncm91cFt0LmlkXTtuJiZ0aGlzLnJlbW92ZUVtaXR0ZXJCeVBhcnRpY2xlKHQsbixlKX19LHtrZXk6XCJfYWRkUGFydGljbGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXNlbGYuX2dyb3VwX2dyb3VwW3QuaWRdO2V8fChlPW5ldyBkLmRlZmF1bHQuR3JvdXAoe3RleHR1cmU6e3ZhbHVlOmguSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSh0LnRleHR1cmUpfX0pLHNlbGYuX2dyb3VwX2dyb3VwW3QuaWRdPWUsdC5mb3JFYWNoKGZ1bmN0aW9uKG4pe3NlbGYuYWRkRW1pdHRlckJ5UGFydGljbGUodCxlLG4pfSksdC5vbihcImFkZFBhcnRpY2xlXCIsc2VsZi5fYWRkUGFydGljbGUpLHQub24oXCJyZW1vdmVQYXJ0aWNsZVwiLHNlbGYuX2FkZFBhcnRpY2xlKSxzZWxmLl9wYXJ0aWNsZUdyb3VwLmFkZChlLm1lc2gpKTtcbn19LHtrZXk6XCJfcmVtb3ZlUGFydGljbGVHcm91cFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLl9ncm91cF9ncm91cFt0LmlkXTtuJiYodC5mb3JFYWNoKGZ1bmN0aW9uKGkpe2UucmVtb3ZlRW1pdHRlckJ5UGFydGljbGUodCxuLGkpfSksdGhpcy5fcGFydGljbGVHcm91cC5yZW1vdmUobi5tZXNoKSxkZWxldGUgdGhpcy5fZ3JvdXBfZ3JvdXBbdC5pZF0sdC5vZmYoXCJhZGRQYXJ0aWNsZVwiLHRoaXMuX2FkZFBhcnRpY2xlKSx0Lm9mZihcInJlbW92ZVBhcnRpY2xlXCIsdGhpcy5fYWRkUGFydGljbGUpKX19LHtrZXk6XCJhZGRFbWl0dGVyQnlQYXJ0aWNsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9W10scj1uLmNvbG9ycyxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7aVtpLmxlbmd0aF09bmV3IGguQ29sb3IodVswXSx1WzFdLHVbMl0pfXZhciBsPW5ldyBkLmRlZmF1bHQuRW1pdHRlcih7dHlwZToxLG1heEFnZTp7dmFsdWU6MX0sc2l6ZTp7dmFsdWU6MX0sdmVsb2NpdHk6e3ZhbHVlOm5ldyBoLlZlY3RvcjMoMywzLDMpLGRpc3RyaWJ1dGlvbjpkLmRlZmF1bHQuZGlzdHJpYnV0aW9ucy5ESVNDfSxwb3NpdGlvbjp7dmFsdWU6bmV3IGguVmVjdG9yMyhuLnBvc2l0aW9uLngsbi5wb3NpdGlvbi55LG4ucG9zaXRpb24uenx8MCkscmFkaXVzOjUsc3ByZWFkOm5ldyBoLlZlY3RvcjMoMywzLDMpfSxjb2xvcjp7dmFsdWU6aX0scGFydGljbGVDb3VudDpuLnBhcnRpY2xlQ291bnR9KTtlLmFkZEVtaXR0ZXIobCksbi5vbihcInZhbHVlQ2hhbmdlXCIsdGhpcy5fdmFsdWVDaGFuZ2UpfX0se2tleTpcInJlbW92ZUVtaXR0ZXJCeVBhcnRpY2xlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQuZ2V0SW5kZXgobik7aSE9PS0xJiYoZS5yZW1vdmVFbWl0dGVyKGUuZW1pdHRlcnNbaV0pLG4ub2ZmKFwidmFsdWVDaGFuZ2VcIix0aGlzLl92YWx1ZUNoYW5nZSkpfX0se2tleTpcIm9uQWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7bChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJvbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KTt2YXIgbj10LmdldCgtMSk7bi5yZW5kZXJTY2VuZS5hZGQodGhpcy5fcGFydGljbGVHcm91cCksdC5tYXBWaWV3JiZ0Lm1hcFZpZXcucGFydGljbGVFbmdpbmUmJnQubWFwVmlldy5wYXJ0aWNsZUVuZ2luZS5vbihcImFkZFBhcnRpY2xlR3JvdXBcIix0aGlzLl9hZGRQYXJ0aWNsZUdyb3VwKX19LHtrZXk6XCJvblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QubWFwVmlldyYmdC5tYXBWaWV3LnBhcnRpY2xlRW5naW5lJiZ0Lm1hcFZpZXcucGFydGljbGVFbmdpbmUub2ZmKFwiYWRkUGFydGljbGVHcm91cFwiLHRoaXMuX2FkZFBhcnRpY2xlR3JvdXApO3ZhciBuPXQuZ2V0KC0xKTtuLnJlbmRlclNjZW5lLnJlbW92ZSh0aGlzLl9wYXJ0aWNsZUdyb3VwKSxsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcIm9uUmVtb3ZlXCIsdGhpcykuY2FsbCh0aGlzLHQpfX0se2tleTpcInJlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYobChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJyZW5kZXJcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX2dyb3VwX2dyb3VwKWZvcih2YXIgdCBpbiB0aGlzLl9ncm91cF9ncm91cCl0aGlzLl9ncm91cF9ncm91cFt0XS50aWNrKHRoaXMuX2Nsb2NrLmdldERlbHRhKCkpfX0se2tleTpcInBhcnRpY2xlR3JvdXBcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFydGljbGVHcm91cH19XSksZX0oZy5kZWZhdWx0KTtlLlBhcnRpY2xlTm9kZT1tLGUuUGFydGljbGVOb2RlSWQ9dn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9ZnVuY3Rpb24gcyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gdSh0KXtyZXR1cm4haXNOYU4odCkmJmlzRmluaXRlKHQpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIHUodCkmJnQ+PTB9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5TY2VuZUFuaW1hdGlvbk1hbmFnZXI9dm9pZCAwO3ZhciBjPW4oMSksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGY9big2KSxkPXIoZikscD1uKDIpLGc9aShwKSx2PW4oMyksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtzKHRoaXMsdCksdGhpcy5fYW5pbWF0b3I9bnVsbH1yZXR1cm4gaCh0LFt7a2V5OlwiaGFzQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuITF9fSx7a2V5OlwiaXNWYWxpZFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiExfX0se2tleTpcInNldFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGx9fSx7a2V5OlwiZ2V0UGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGx9fSx7a2V5OlwicGFyc2VQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdH19LHtrZXk6XCJzdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXSxpPXRoaXMscj1hcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXT9hcmd1bWVudHNbM106MzAwLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOjAsYT10aGlzLmdldFBhcmFtcyh0KSxzPWMoe30sYSksdT10aGlzLnBhcnNlUGFyYW1zKGUpLGg9bChyKT9yOjMwMCxmPWwobyk/bzowO2lmKCF0aGlzLmhhc0FuaW1hdGlvbih0KXx8IXRoaXMuaXNWYWxpZFBhcmFtcyhhKXx8IXRoaXMuaXNWYWxpZFBhcmFtcyh1KSlyZXR1cm4gY29uc29sZS53YXJuKFwiU2NlbmVBbmltYXRpb246IEludmFsaWQgcGFyYW1ldGVyLlwiKSxudWxsO3ZhciBwPWZ1bmN0aW9uKGUsbil7aS5zZXRQYXJhbXModCxuKX07cmV0dXJuIHRoaXMuc3RvcCgpLHRoaXMuYW5pbWF0b3I9ZC5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZPYmplY3Qocyx1LGgpLm9uKFwidXBkYXRlXCIscCkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKHQpe24/ZC5kZWZhdWx0LmdldEluc3RhbmNlKCkub2ZPYmplY3QodSxhLGgpLm9uKFwidXBkYXRlXCIscCkub24oXCJjb21wbGV0ZVwiLGZ1bmN0aW9uKHQpe3Quc3RvcCgpfSkuc3RhcnQoKTp0LnN0b3AoKX0pLnJlcGVhdChmKS5zdGFydCgpLHRoaXN9fSx7a2V5Olwic3RvcFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRvciYmdGhpcy5hbmltYXRvci5zdG9wJiZ0aGlzLmFuaW1hdG9yLnN0b3AoKX19XSksdH0oKSx5PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcyh0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYShlLHQpLGgoZSxbe2tleTpcImhhc0FuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lm1hdGVyaWFsJiYoMCx2LmlzUHJlc2VudCkodC5tYXRlcmlhbC5vcGFjaXR5KX19LHtrZXk6XCJpc1ZhbGlkUGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubnVtJiZsKHQubnVtKSYmdC5udW08PTF9fSx7a2V5Olwic2V0UGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4hKCF0aGlzLmhhc0FuaW1hdGlvbih0KXx8IXRoaXMuaXNWYWxpZFBhcmFtcyhlKSkmJih0Lm1hdGVyaWFsLm9wYWNpdHk9ZS5udW0sZS5udW0+PTEmJih0Lm1hdGVyaWFsLnRyYW5zcGFyZW50PSExKSwhMCl9fSx7a2V5OlwiZ2V0UGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzQW5pbWF0aW9uKHQpP3tudW06dC5tYXRlcmlhbC5vcGFjaXR5fTpudWxsfX0se2tleTpcInBhcnNlUGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubnVtP3Q6e251bTp0fX19XSksZX0obSksXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHModGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGEoZSx0KSxoKGUsW3trZXk6XCJoYXNBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5tYXRlcmlhbCYmKDAsdi5pc1ByZXNlbnQpKHQubWF0ZXJpYWwuY29sb3IpfX0se2tleTpcIl9pc1ZhbGlkQ29sb3JDb21cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbCh0KSYmdDw9MX19LHtrZXk6XCJpc1ZhbGlkUGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2lzVmFsaWRDb2xvckNvbSh0LnIpJiZ0aGlzLl9pc1ZhbGlkQ29sb3JDb20odC5nKSYmdGhpcy5faXNWYWxpZENvbG9yQ29tKHQuYil9fSx7a2V5Olwic2V0UGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4hKCF0aGlzLmhhc0FuaW1hdGlvbih0KXx8IXRoaXMuaXNWYWxpZFBhcmFtcyhlKSkmJih0Lm1hdGVyaWFsLmNvbG9yLnNldFJHQihlLnIsZS5nLGUuYiksITApfX0se2tleTpcImdldFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuaGFzQW5pbWF0aW9uKHQpKXt2YXIgZT10Lm1hdGVyaWFsLmNvbG9yO3JldHVybntyOmUucixnOmUuZyxiOmUuYn19cmV0dXJuIG51bGx9fSx7a2V5OlwicGFyc2VQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0JiZ0LnImJnQuZyYmdC5iKXJldHVybiB0O3ZhciBlPShuZXcgZy5Db2xvcikuc2V0KHQpO3JldHVybntyOmUucixnOmUuZyxiOmUuYn19fV0pLGV9KG0pLGI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBzKHRoaXMsZSksbyh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBhKGUsdCksaChlLFt7a2V5OlwiaGFzQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQucG9zaXRpb259fSx7a2V5OlwiaXNWYWxpZFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ1KHQueCkmJnUodC55KSYmdSh0LnopfX0se2tleTpcInNldFBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuISghdGhpcy5oYXNBbmltYXRpb24odCl8fCF0aGlzLmlzVmFsaWRQYXJhbXMoZSkpJiYodC5wb3NpdGlvbi5zZXQoZS54LGUueSxlLnopLCEwKX19LHtrZXk6XCJnZXRQYXJhbXNcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLmhhc0FuaW1hdGlvbih0KSl7dmFyIGU9dC5wb3NpdGlvbjtyZXR1cm57eDplLngseTplLnksejplLnp9fXJldHVybiBudWxsfX1dKSxlfShtKSx4PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ModGhpcyx0KSx0aGlzLl9hbmltYXRpb25MaXN0PXtvcGFjaXR5Om5ldyB5LGNvbG9yOm5ldyBfLHBvc2l0aW9uOm5ldyBifX1yZXR1cm4gaCh0LFt7a2V5Olwic2V0QW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtyZXR1cm4hISh0JiZlIGluc3RhbmNlb2YgbSkmJih0aGlzLl9hbmltYXRpb25MaXN0W3RdPWUsITApfX0se2tleTpcImdldEFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hbmltYXRpb25MaXN0W3RdfX0se2tleTpcInJlbW92ZUFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5fYW5pbWF0aW9uTGlzdFt0XSYmKGRlbGV0ZSB0aGlzLl9hbmltYXRpb25MaXN0W3RdLCEwKX19XSksdH0oKTtlLlNjZW5lQW5pbWF0aW9uTWFuYWdlcj14fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtuKHRoaXMsdCl9cmV0dXJuIGkodCxbe2tleTpcImdlbmVyYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGx9fSx7a2V5OlwiZmluZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsfX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1mdW5jdGlvbiBzKHQpe3JldHVybltdLmNvbmNhdCgoMCxwLmlzTnVtYmVyKSh0KXx8KDAscC5pc1N0cmluZykodCl8fCgwLHAuaXNBcnJheSkodCk/dDpbXSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxsPWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYz1uKDE3KSxoPWkoYyksZj1uKDE2NSksZD1pKGYpLHA9bigzKSxnPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cih0aGlzLGUpO3ZhciBuPW8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLDApKTtyZXR1cm4gbi5vbkFkZChuKSxuLl9tYXBWaWV3PXQsbi5fYWxsU2NlbmU9e30sbi5fb2N0cmVlTWFuYWdlcj1uZXcgZC5kZWZhdWx0LG59cmV0dXJuIGEoZSx0KSx1KGUsW3trZXk6XCJjbGVhck9jdHJlZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb2N0cmVlTWFuYWdlci5jbGVhck9jdHJlZSgpfX0se2tleTpcIl9zZWFyY2hPYmplY3RzSW5PY3RyZWVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX21hcFZpZXcuYWN0aXZlQ2FtZXJhLmNhbWVyYTtyZXR1cm4gdGhpcy5fb2N0cmVlTWFuYWdlci5zZWFyY2hCeUNsaWVudFBvaW50KHQsZSxuKX19LHtrZXk6XCJyZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe2woZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwicmVuZGVyXCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLl9vY3RyZWVNYW5hZ2VyLnVwZGF0ZSgpfX0se2tleTpcImFkZFNjZW5lXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuaWQmJiF0aGlzLmhhc1NjZW5lKHQpJiYodGhpcy5fYWxsU2NlbmVbdC5pZF09dCx0Lm9uQWRkKHRoaXMpKSx0aGlzfX0se2tleTpcInNldFNjYWxlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyLG8pe3ZhciBhPXRoaXMuX3NlYXJjaCh0LGUsbik7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcInNjYWxlXCIsdCxhLFtpLHIsb10pLHRoaXN9fSx7a2V5Olwic2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIGE9dGhpcy5fc2VhcmNoKHQsZSxuKSxzPWksdT1yO2lmKHQuY29vcmRpbmF0ZVN5c3RlbSl7dmFyIGw9dC5jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpO3M9aStsWzBdLHU9citsWzFdfXJldHVybiB0aGlzLmVtaXQoXCJvblNjZW5lQ2hhbmdlXCIsXCJwb3NpdGlvblwiLHQsYSxbcyx1LG9dKSx0aGlzfX0se2tleTpcInF1aWNrU2V0UG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIsbyl7dmFyIGE9dGhpcy5fc2VhcmNoKHQsZSxuKSxzPWksdT1yO2lmKHQuY29vcmRpbmF0ZVN5c3RlbSl7dmFyIGw9dC5jb29yZGluYXRlU3lzdGVtLm9mZnNldChpLHIpO3M9bFswXSx1PWxbMV19cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcInF1aWNrUG9zaXRpb25cIix0LGEsW3MsdSxvXSksdGhpc319LHtrZXk6XCJzZXRSb3RhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkscixvKXt2YXIgYT10aGlzLl9zZWFyY2godCxlLG4pO3JldHVybiB0aGlzLmVtaXQoXCJvblNjZW5lQ2hhbmdlXCIsXCJyb3RhdGlvblwiLHQsYSxbaSxyLG9dKSx0aGlzfX0se2tleTpcInNldFZpc2libGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj10aGlzLl9zZWFyY2godCxlLG4pO3JldHVybiB0aGlzLmVtaXQoXCJvblNjZW5lQ2hhbmdlXCIsXCJ2aXNpYmxlXCIsdCxyLGkpLHRoaXN9fSx7a2V5OlwiaGlnaGxpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdP2FyZ3VtZW50c1szXToxLjQxNCxyPXRoaXMuX3NlYXJjaCh0LGUsbik7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcImhpZ2hsaWdodFwiLHQscixpKSx0aGlzfX0se2tleTpcInNldENvbG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10aGlzLl9zZWFyY2godCxlLG4pO3JldHVybiB0aGlzLmVtaXQoXCJvblNjZW5lQ2hhbmdlXCIsXCJjb2xvclwiLHQsbyxpLHIpLHRoaXN9fSx7a2V5Olwic2V0Q29sb3JzXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz10aGlzLGE9KDAscC5pc0FycmF5KShuKT9uOltuXSxzPWEubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBvLl9zZWFyY2godCxlLG4pfSk7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcImNvbG9yc1wiLHQscyxpLHIpLHRoaXN9fSx7a2V5OlwicmVzZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByPXRoaXMuX3NlYXJjaCh0LGUsbik7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcInN0eWxlUmVzZXR0aW5nXCIsdCxyLGkpLHRoaXN9fSx7a2V5Olwic2V0VmFsdWVDaGFuZ2VCeUZlYXR1cmVzXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1hcmd1bWVudHMubGVuZ3RoLHI9QXJyYXkoaT4zP2ktMzowKSxvPTM7bzxpO28rKylyW28tM109YXJndW1lbnRzW29dO3JldHVybiB0aGlzLmVtaXQuYXBwbHkodGhpcyxbXCJvblNjZW5lQ2hhbmdlXCIsdCxlLG5dLmNvbmNhdChyKSksdGhpc319LHtrZXk6XCJyZXNldENvbG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX3NlYXJjaCh0LGUsbik7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcImNvbG9yUmVzZXR0aW5nXCIsdCxpKSx0aGlzfX0se2tleTpcInNldE9wYWNpdHlcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpLHIpe3ZhciBvPXRoaXMuX3NlYXJjaCh0LGUsbik7cmV0dXJuIHRoaXMuZW1pdChcIm9uU2NlbmVDaGFuZ2VcIixcIm9wYWNpdHlcIix0LG8saSxyKSx0aGlzfX0se2tleTpcInNldERlcHRoVGVzdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKCEoMCxwLmlzQm9vbGVhbikoaSkpdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgZGVwdGhUZXN0IHR5cGVcIik7dmFyIHI9dGhpcy5fc2VhcmNoKHQsZSxuKTt0aGlzLmVtaXQoXCJvblNjZW5lQ2hhbmdlXCIsXCJkZXB0aFRlc3RcIix0LHIsaSl9fSx7a2V5OlwiZ2V0QUFCQlwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKCgwLHAuaXNBcnJheSkoaSkpdGhyb3cgbmV3IEVycm9yKFwiU2NlbmVNYW5hZ2VyI2dldEFBQkI6IEludmFsaWQgb3V0Qm94XCIpO3ZhciByPXRoaXMuX3NlYXJjaCh0LGUsbiksbz12b2lkIDA7aWYoKDAscC5pc0FycmF5KShyKT8obz1yWzBdLGNvbnNvbGUud2FybihcIlNjZW5lTWFuYWdlciNnZXRBQUJCOiBHZXQgdGhlIGZpcnN0IGZlYXR1cmUgb2Ygc2V2ZXJhbCBmZWF0dXJlc1wiKSk6bz1yLCFvKXRocm93IG5ldyBFcnJvcihcIlNjZW5lTWFuYWdlciNnZXRBQUJCOiBGZWF0dXJlIG5vdCBmb3VuZFwiKTtyZXR1cm4gaS5sZW5ndGg9MCx0aGlzLmVtaXQoXCJvbkdldEFBQkJcIix0LG8saSksdGhpc319LHtrZXk6XCJyZW1vdmVTY2VuZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0LmlkJiZ0aGlzLmhhc1NjZW5lKHQpJiYoZGVsZXRlIHRoaXMuX2FsbFNjZW5lW3QuaWRdLHQub25SZW1vdmUodGhpcykpLHRoaXN9fSx7a2V5OlwiaGFzU2NlbmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hIXQmJih0IGluIHRoaXMuX2FsbFNjZW5lfHx0LmlkIGluIHRoaXMuX2FsbFNjZW5lKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fYWxsU2NlbmUpdGhpcy5yZW1vdmVTY2VuZSh0aGlzLl9hbGxTY2VuZVt0XSk7dGhpcy5fbWFwVmlldz1udWxsfX0se2tleTpcIl9zZWFyY2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoIWUmJiFuKXJldHVybiBudWxsO3ZhciBpPXMobikscj1bXSxvPXQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJihvPXRoaXMuX21hcFZpZXcuZ2V0TGF5ZXIodCkpLG8paWYoXCJpZFwiPT09ZSl7Zm9yKHZhciBhPWksdT1BcnJheS5pc0FycmF5KGEpLGw9MCxhPXU/YTphW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYztpZih1KXtpZihsPj1hLmxlbmd0aClicmVhaztjPWFbbCsrXX1lbHNle2lmKGw9YS5uZXh0KCksbC5kb25lKWJyZWFrO2M9bC52YWx1ZX12YXIgaD1jO3IucHVzaChvLnNlYXJjaEJ5SWQoaCkpfTE9PT1yLmxlbmd0aCYmKHI9ci5wb3AoKSl9ZWxzZSBmb3IodmFyIGY9aSxkPUFycmF5LmlzQXJyYXkoZikscD0wLGY9ZD9mOmZbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBnO2lmKGQpe2lmKHA+PWYubGVuZ3RoKWJyZWFrO2c9ZltwKytdfWVsc2V7aWYocD1mLm5leHQoKSxwLmRvbmUpYnJlYWs7Zz1wLnZhbHVlfXZhciB2PWc7cj1yLmNvbmNhdChvLnNlYXJjaChlLHYpKX1yZXR1cm4gcn19LHtrZXk6XCJtYXBWaWV3XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcFZpZXd9fV0pLGV9KGguZGVmYXVsdCk7ZS5kZWZhdWx0PWd9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe2lmKHQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgZT17fTtpZihudWxsIT10KWZvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZS5kZWZhdWx0PXQsZX1mdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfWZ1bmN0aW9uIHModCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciB1PWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1yKXt2YXIgbz1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDp0KG8sbixpKX1pZihcInZhbHVlXCJpbiByKXJldHVybiByLnZhbHVlO3ZhciBhPXIuZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sbD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGM9bigxNjQpLGg9cihjKSxmPW4oMiksZD1pKGYpLHA9bigxMCksZz1yKHApLHY9bigxMyksbT1yKHYpLHk9bigzKSxfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtzKHRoaXMsdCksdGhpcy5fY29udGFpbmVyPWV9cmV0dXJuIGwodCxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yYW5nZT17fSx0aGlzLl9yYW5nZUluZGV4PVtdLHRoaXMuX3JhbmdlTGVuZ3RoPTB9fSx7a2V5OlwibWVyZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe319LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt9fSx7a2V5OlwiaGFzXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW4gdGhpcy5fcmFuZ2V9fSx7a2V5OlwidHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OlwiY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVzZXQoKX19XSksdH0oKSxiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcyh0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYShlLHQpLGwoZSxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLl9saW5lR2VvQnVmZmVyJiZ0aGlzLl9saW5lR2VvQnVmZmVyLmRpc3Bvc2UoKSx0aGlzLl9saW5lR2VvQnVmZmVyPW5ldyBkLkJ1ZmZlckdlb21ldHJ5LHRoaXMuX2xpbmVJbmRleD1bXSx0aGlzLl9saW5lUG9zaXRpb249W10sdGhpcy5fbGluZUNvbG9yPVtdLHRoaXMuX2xpbmVNZXNoPW5ldyBkLkxpbmVTZWdtZW50cyh0aGlzLl9saW5lR2VvQnVmZmVyLG5ldyBkLkxpbmVCYXNpY01hdGVyaWFsKHt2ZXJ0ZXhDb2xvcnM6ZC5WZXJ0ZXhDb2xvcnN9KSksdGhpcy5fbGluZU1lc2gubWF0ZXJpYWwudHJhbnNwYXJlbnQ9ITAsdGhpcy5ibGVuZGluZyYmKHRoaXMuX2xpbmVNZXNoLm1hdGVyaWFsLmJsZW5kaW5nPWQuQ3VzdG9tQmxlbmRpbmcsdGhpcy5fbGluZU1lc2gubWF0ZXJpYWwuYmxlbmRFcXVhdGlvbj1kLk1pbkVxdWF0aW9uKX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLnJlbW92ZSh0aGlzLl9saW5lTWVzaCksdShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJjbGVhclwiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5Olwic2V0VmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3N3aXRjaChlKXtjYXNlXCJjb2xvclwiOmJyZWFrO2Nhc2VcIm9wYWNpdHlcIjppZigwPT09dCl7dGhpcy5fbGluZU1lc2gubWF0ZXJpYWwub3BhY2l0eT1hcmd1bWVudHMubGVuZ3RoPD0yP3ZvaWQgMDphcmd1bWVudHNbMl0sdGhpcy5fbGluZU1lc2gubWF0ZXJpYWwuYmxlbmRpbmc9ZC5Ob3JtYWxCbGVuZGluZywxPT09KGFyZ3VtZW50cy5sZW5ndGg8PTI/dm9pZCAwOmFyZ3VtZW50c1syXSkmJih0aGlzLl9saW5lTWVzaC5tYXRlcmlhbC50cmFuc3BhcmVudD0hMCx0aGlzLmJsZW5kaW5nJiYodGhpcy5fbGluZU1lc2gubWF0ZXJpYWwuYmxlbmRpbmc9ZC5DdXN0b21CbGVuZGluZyx0aGlzLl9saW5lTWVzaC5tYXRlcmlhbC5ibGVuZEVxdWF0aW9uPWQuTWluRXF1YXRpb24pKTticmVha31icmVhaztjYXNlXCJjb2xvclJlc2V0dGluZ1wiOn19fSx7a2V5OlwibWVyZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUubWF0ZXJpYWwuY29sb3IsaT1lLmdlb21ldHJ5LnZlcnRpY2VzO2lmKDA9PT1pLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgcj10aGlzLl9yYW5nZVt0XTtyJiZ0aGlzLnJlbW92ZSh0KSxyPVtdLHRoaXMuX3JhbmdlW3RdPXIsdGhpcy5fcmFuZ2VJbmRleC5wdXNoKHQpLHIucHVzaCh0aGlzLl9saW5lUG9zaXRpb24ubGVuZ3RoKSxyLnB1c2godGhpcy5fbGluZUluZGV4Lmxlbmd0aCk7Zm9yKHZhciBvIGluIGkpe28+MCYmdGhpcy5fbGluZUluZGV4LnB1c2godGhpcy5fcmFuZ2VMZW5ndGgtMSx0aGlzLl9yYW5nZUxlbmd0aCk7dmFyIGE9aVtvXTt0aGlzLl9saW5lUG9zaXRpb25bMyp0aGlzLl9yYW5nZUxlbmd0aF09YS54LHRoaXMuX2xpbmVQb3NpdGlvblszKnRoaXMuX3JhbmdlTGVuZ3RoKzFdPWEueSx0aGlzLl9saW5lUG9zaXRpb25bMyp0aGlzLl9yYW5nZUxlbmd0aCsyXT1hLnosdGhpcy5fbGluZUNvbG9yWzMqdGhpcy5fcmFuZ2VMZW5ndGhdPW4ucix0aGlzLl9saW5lQ29sb3JbMyp0aGlzLl9yYW5nZUxlbmd0aCsxXT1uLmcsdGhpcy5fbGluZUNvbG9yWzMqdGhpcy5fcmFuZ2VMZW5ndGgrMl09bi5iLHRoaXMuX3JhbmdlTGVuZ3RoKyt9cmV0dXJuIHIucHVzaCh0aGlzLl9saW5lUG9zaXRpb24ubGVuZ3RoKSxyLnB1c2godGhpcy5fbGluZUluZGV4Lmxlbmd0aCksZS5nZW9tZXRyeS5kaXNwb3NlKCksdGhpcy5fbGluZU1lc2h9fSx7a2V5OlwidXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXNldExpbmVCdWZmZXIoKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yYW5nZVt0XTtpZighZSl7dmFyIG49ZVswXSxpPWVbMl0scj1lWzFdLG89ZVszXSxhPW8tcixzPWktbix1PXMvMzt0aGlzLl9yYW5nZUxlbmd0aC09dSx0aGlzLl9saW5lUG9zaXRpb24uc3BsaWNlKG4saS1uKSx0aGlzLl9saW5lQ29sb3Iuc3BsaWNlKG4saS1uKSx0aGlzLl9saW5lSW5kZXguc3BsaWNlKHIsby1yKTtmb3IodmFyIGw9cjtsPHRoaXMuX2xpbmVJbmRleC5sZW5ndGg7bCsrKXRoaXMuX2xpbmVJbmRleFtsXS09dTt2YXIgYz10aGlzLl9yYW5nZUluZGV4LmluZGV4T2YodCk7aWYoYyE9PS0xKXtmb3IodmFyIGg9YysxO2g8dGhpcy5fcmFuZ2VJbmRleC5sZW5ndGg7aCsrKXt2YXIgZj10aGlzLl9yYW5nZVt0aGlzLl9yYW5nZUluZGV4W2hdXTtmJiYoZlswXS09cyxmWzJdLT1zLGZbMV0tPWEsZlszXS09YSl9dGhpcy5fcmFuZ2VJbmRleC5zcGxpY2UoYywxKX1kZWxldGUgdGhpcy5fcmFuZ2VbdF19fX0se2tleTpcInR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwibGluZVwifX0se2tleTpcIl9yZXNldExpbmVCdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2xpbmVHZW9CdWZmZXIuc2V0SW5kZXgobmV3IGQuQnVmZmVyQXR0cmlidXRlKG5ldyBVaW50MTZBcnJheSh0aGlzLl9saW5lSW5kZXgpLDEpKSx0aGlzLl9saW5lR2VvQnVmZmVyLmFkZEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsbmV3IGQuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fbGluZVBvc2l0aW9uKSwzKSksdGhpcy5fbGluZUdlb0J1ZmZlci5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBkLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHRoaXMuX2xpbmVDb2xvciksMykpLHRoaXMuX2xpbmVHZW9CdWZmZXIuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCksdGhpcy5fY29udGFpbmVyLmFkZCh0aGlzLl9saW5lTWVzaCl9fSx7a2V5OlwiYmxlbmRpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmxlbmRpbmd9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ibGVuZGluZz10fX1dKSxlfShfKSx4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcyh0aGlzLGUpLG8odGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYShlLHQpLGwoZSxbe2tleTpcInJlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt1KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInJlc2V0XCIsdGhpcykuY2FsbCh0aGlzKSx0aGlzLl9wb2x5Z29uUG9zaXRpb249W10sdGhpcy5fcG9seWdvbklkPVtdLHRoaXMuX3BvbHlnb25Db2xvcj1bXSx0aGlzLl9wb2x5Z29uTm9ybWFscz1bXSx0aGlzLl9yYW5nZT17fSx0aGlzLl9yYW5nZUluZGV4PVtdLHRoaXMuX3BvbHlnb25CdWZmZXImJnRoaXMuX3BvbHlnb25CdWZmZXIuZGlzcG9zZSgpLHRoaXMuX3BvbHlnb25CdWZmZXI9bmV3IGQuQnVmZmVyR2VvbWV0cnksdGhpcy5fcG9seWdvbk1lc2g9bmV3IGQuTWVzaCh0aGlzLl9wb2x5Z29uQnVmZmVyLG5ldyBkLlNoYWRlck1hdGVyaWFsKHt1bmlmb3Jtczp7Y29sb3JlZFBPSTp7dmFsdWU6LTF9LHBpY2tlZENvbG9yOnt2YWx1ZTpuZXcgZC5WZWN0b3IzKDEsMCwwKX0sdHJhbnNwYXJlbnRQT0k6e3ZhbHVlOi0xfSxvcGFjaXR5Ont2YWx1ZToxfSx1bml2ZXJzYWxPcGFjaXR5Ont2YWx1ZToxfX0sdmVydGV4U2hhZGVyOltcImF0dHJpYnV0ZSBmbG9hdCBwb2x5Z29uSWQ7XCIsXCJhdHRyaWJ1dGUgdmVjMyBjb2xvcjtcIixcInZhcnlpbmcgdmVjMyB2Q29sb3I7XCIsXCJ2YXJ5aW5nIGZsb2F0IHZBbHBoYTtcIixcInVuaWZvcm0gZmxvYXQgY29sb3JlZFBPSTtcIixcInVuaWZvcm0gdmVjMyBwaWNrZWRDb2xvcjtcIixcInVuaWZvcm0gZmxvYXQgdHJhbnNwYXJlbnRQT0k7XCIsXCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsXCJ1bmlmb3JtIGZsb2F0IHVuaXZlcnNhbE9wYWNpdHk7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLDEuMCk7XCIsXCJ2Q29sb3IgPSBjb2xvcjtcIixcInZBbHBoYSA9IHVuaXZlcnNhbE9wYWNpdHk7XCIsXCJpZiAocG9seWdvbklkID09IGNvbG9yZWRQT0kpIHZDb2xvciA9ICBwaWNrZWRDb2xvcjtcIixcImlmIChwb2x5Z29uSWQgPT0gdHJhbnNwYXJlbnRQT0kpIHZBbHBoYSA9ICBvcGFjaXR5O1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInZhcnlpbmcgdmVjMyB2Q29sb3I7XCIsXCJ2YXJ5aW5nIGZsb2F0IHZBbHBoYTtcIixcInZvaWQgbWFpbigpIHtcIixcImdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLCB2QWxwaGEpO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHRyYW5zcGFyZW50OiEwfSkpLHRoaXMuX3JhbmdlTGVuZ3RoPTB9fSx7a2V5OlwiY2xlYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5yZW1vdmUodGhpcy5fcG9seWdvbk1lc2gpLHUoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY2xlYXJcIix0aGlzKS5jYWxsKHRoaXMpfX0se2tleTpcInNldENvbG9yc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0Lm1hcChmdW5jdGlvbih0KXtpZih0PDApcmV0dXJuIG51bGw7Zm9yKHZhciBpPW0uZGVmYXVsdC5wYXJzZUNvbG9yKGUpLHI9bmV3IGQuQ29sb3IoaSksbz1bXCJyXCIsXCJnXCIsXCJiXCJdLGE9bi5fcmFuZ2VbdF1bMF0scz1uLl9yYW5nZVt0XVsxXSx1PWE7dTw9czt1Kyspe3ZhciBsPW9bdSUzXTtuLl9wb2x5Z29uQ29sb3JbdV09cltsXX1yZXR1cm4gbnVsbH0pfX0se2tleTpcInNldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtzd2l0Y2goZSl7Y2FzZVwiY29sb3JcIjp2YXIgbj1tLmRlZmF1bHQucGFyc2VDb2xvcihhcmd1bWVudHMubGVuZ3RoPD0yP3ZvaWQgMDphcmd1bWVudHNbMl0pLGk9bmV3IGQuQ29sb3Iobik7dGhpcy5fcG9seWdvbk1lc2gubWF0ZXJpYWwudW5pZm9ybXMuY29sb3JlZFBPSS52YWx1ZT10LHRoaXMuX3BvbHlnb25NZXNoLm1hdGVyaWFsLnVuaWZvcm1zLnBpY2tlZENvbG9yLnZhbHVlPW5ldyBkLlZlY3RvcjMoaS5yLGkuZyxpLmIpO2JyZWFrO2Nhc2VcImNvbG9yc1wiOmlmKHQ8MClicmVhaztmb3IodmFyIHI9bS5kZWZhdWx0LnBhcnNlQ29sb3IoYXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdKSxvPW5ldyBkLkNvbG9yKHIpLGE9W1wiclwiLFwiZ1wiLFwiYlwiXSxzPXRoaXMuX3JhbmdlW3RdWzBdLHU9dGhpcy5fcmFuZ2VbdF1bMV0sbD1zO2w8PXU7bCsrKXt2YXIgYz1hW2wlM107dGhpcy5fcG9seWdvbkNvbG9yW2xdPW9bY119dGhpcy5fcmVzZXRQb2x5Z29uQnVmZmVyKCk7YnJlYWs7Y2FzZVwib3BhY2l0eVwiOmlmKDEhPT0oYXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdKT90aGlzLl9wb2x5Z29uTWVzaC5tYXRlcmlhbC50cmFuc3BhcmVudD0hMDp0aGlzLl9wb2x5Z29uTWVzaC5tYXRlcmlhbC50cmFuc3BhcmVudD0hMSwwPT09dCl7dGhpcy5fcG9seWdvbk1lc2gubWF0ZXJpYWwudW5pZm9ybXMudHJhbnNwYXJlbnRQT0kudmFsdWU9LTEsdGhpcy5fcG9seWdvbk1lc2gubWF0ZXJpYWwudW5pZm9ybXMudW5pdmVyc2FsT3BhY2l0eS52YWx1ZT1hcmd1bWVudHMubGVuZ3RoPD0yP3ZvaWQgMDphcmd1bWVudHNbMl07YnJlYWt9dGhpcy5fcG9seWdvbk1lc2gubWF0ZXJpYWwudW5pZm9ybXMudHJhbnNwYXJlbnRQT0kudmFsdWU9dCx0aGlzLl9wb2x5Z29uTWVzaC5tYXRlcmlhbC51bmlmb3Jtcy5vcGFjaXR5LnZhbHVlPWFyZ3VtZW50cy5sZW5ndGg8PTI/dm9pZCAwOmFyZ3VtZW50c1syXTticmVhaztjYXNlXCJjb2xvclJlc2V0dGluZ1wiOnRoaXMuX3BvbHlnb25NZXNoLm1hdGVyaWFsLnVuaWZvcm1zLmNvbG9yZWRQT0kudmFsdWU9LTF9fX0se2tleTpcIm1lcmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9ZS5nZW9tZXRyeSxyPWUucG9zaXRpb24sbz1lLm1hdGVyaWFsLmNvbG9yO2lmKCFpKXJldHVybiBudWxsO2lmKGkuZmFjZXMubGVuZ3RoPjApe3ZhciBhPWUubWF0ZXJpYWw7ISh0aGlzLl9wb2x5Z29uTWVzaC5tYXRlcmlhbCBpbnN0YW5jZW9mIGQuTWVzaFBob25nTWF0ZXJpYWwpJiZhIGluc3RhbmNlb2YgZC5NZXNoUGhvbmdNYXRlcmlhbCYmKHRoaXMuX3BvbHlnb25NZXNoLm1hdGVyaWFsPW5ldyBkLlNoYWRlck1hdGVyaWFsKHt1bmlmb3Jtczp7Y29sb3JlZFBPSTp7dmFsdWU6LTF9LHBpY2tlZENvbG9yOnt2YWx1ZTpuZXcgZC5WZWN0b3IzKDEsMCwwKX0sdHJhbnNwYXJlbnRQT0k6e3ZhbHVlOi0xfSxvcGFjaXR5Ont2YWx1ZToxfSx1bml2ZXJzYWxPcGFjaXR5Ont2YWx1ZToxfSxkaXJlY3Rpb25hbExpZ2h0czp7dmFsdWU6W119LGFtYmllbnRMaWdodENvbG9yOnt2YWx1ZTpbXX0sc3BvdExpZ2h0czp7dmFsdWU6W119LHBvaW50TGlnaHRzOnt2YWx1ZTpbXX0saGVtaXNwaGVyZUxpZ2h0czp7dmFsdWU6W119LGRpcmVjdGlvbmFsU2hhZG93TWFwOnt2YWx1ZTpbXX0sZGlyZWN0aW9uYWxTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfSxzcG90U2hhZG93TWFwOnt2YWx1ZTpbXX0sc3BvdFNoYWRvd01hdHJpeDp7dmFsdWU6W119LHBvaW50U2hhZG93TWFwOnt2YWx1ZTpbXX0scG9pbnRTaGFkb3dNYXRyaXg6e3ZhbHVlOltdfX0sdmVydGV4U2hhZGVyOltcImF0dHJpYnV0ZSBmbG9hdCBwb2x5Z29uSWQ7XCIsXCJhdHRyaWJ1dGUgdmVjMyBjb2xvcjtcIixcInZhcnlpbmcgdmVjMyB2Q29sb3I7XCIsXCJ2YXJ5aW5nIGZsb2F0IHZBbHBoYTtcIixcInVuaWZvcm0gZmxvYXQgY29sb3JlZFBPSTtcIixcInVuaWZvcm0gdmVjMyBwaWNrZWRDb2xvcjtcIixcInVuaWZvcm0gZmxvYXQgdHJhbnNwYXJlbnRQT0k7XCIsXCJ1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XCIsXCJ1bmlmb3JtIGZsb2F0IHVuaXZlcnNhbE9wYWNpdHk7XCIsXCJ2b2lkIG1haW4oKSB7XCIsXCJnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLDEuMCk7XCIsXCIvLyB2ZWMzIHRyYW5zZm9ybWVkTm9ybWFsID0gbm9ybWFsTWF0cml4ICogbm9ybWFsO1wiLFwiZmxvYXQgbkRvdEwgPSBtYXgoZG90KHZlYzMoMC41NzczNSwwLjU3NzM1LC0wLjU3NzM1KSwgbm9ybWFsKSwgMC4wKTtcIixcIi8vIHZlYzMgcG9pbnRMaWdodCA9IHZlYzMoMTAsMTAsMTAwKTtcIixcIi8vIGZsb2F0IG5Eb3RMID0gZG90KG5vcm1hbGl6ZSggcG9pbnRMaWdodC1wb3NpdGlvbiksIG5vcm1hbCk7XCIsXCJ2Q29sb3IgPSBjb2xvciAtIGNvbG9yLnh5eiAqIG5Eb3RMICogMC41O1wiLFwiLy8gdkNvbG9yID0gY29sb3IueHl6ICogbkRvdEwgKiAwLjUgKyBjb2xvcjtcIixcInZBbHBoYSA9IHVuaXZlcnNhbE9wYWNpdHk7XCIsXCJpZiAocG9seWdvbklkID09IGNvbG9yZWRQT0kpIHZDb2xvciA9ICBwaWNrZWRDb2xvcjtcIixcImlmIChwb2x5Z29uSWQgPT0gdHJhbnNwYXJlbnRQT0kpIHZBbHBoYSA9ICBvcGFjaXR5O1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLGZyYWdtZW50U2hhZGVyOltcInZhcnlpbmcgdmVjMyB2Q29sb3I7XCIsXCJ2YXJ5aW5nIGZsb2F0IHZBbHBoYTtcIixcInZvaWQgbWFpbigpIHtcIixcImdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLCB2QWxwaGEpO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHRyYW5zcGFyZW50OiEwLGxpZ2h0czohMX0pKTt2YXIgcz05LHU9W1wiYVwiLFwiYlwiLFwiY1wiXSxsPVtcInhcIixcInlcIixcInpcIl0sYz1bXCJyXCIsXCJnXCIsXCJiXCJdLGg9dGhpcy5fcmFuZ2VbdF07aCYmdGhpcy5yZW1vdmUodCxwYXJlbnQpLGg9W10sdGhpcy5fcmFuZ2VbdF09aCx0aGlzLl9yYW5nZUluZGV4LnB1c2godCksaC5wdXNoKHRoaXMuX3BvbHlnb25Qb3NpdGlvbi5sZW5ndGgpLGkuZmFjZXMuZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIGE9bz9vOmUuY29sb3IsaD0wO2g8cztoKyspe3ZhciBmPW4uX3JhbmdlTGVuZ3RoKnMraCxkPXVbTWF0aC5mbG9vcihoLzMpXSxwPWxbaCUzXSxnPWNbaCUzXTtuLl9wb2x5Z29uUG9zaXRpb25bZl09aS52ZXJ0aWNlc1tlW2RdXVtwXStyW3BdLG4uX3BvbHlnb25Ob3JtYWxzW2ZdPWUubm9ybWFsW3BdLG4uX3BvbHlnb25Db2xvcltmXT1hW2ddfW4uX3BvbHlnb25JZFszKm4uX3JhbmdlTGVuZ3RoKzBdPXQsbi5fcG9seWdvbklkWzMqbi5fcmFuZ2VMZW5ndGgrMV09dCxuLl9wb2x5Z29uSWRbMypuLl9yYW5nZUxlbmd0aCsyXT10LG4uX3JhbmdlTGVuZ3RoKyt9KSxoLnB1c2godGhpcy5fcG9seWdvblBvc2l0aW9uLmxlbmd0aCksaS5kaXNwb3NlKCl9cmV0dXJuIHRoaXMuX3BvbHlnb25NZXNofX0se2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRQb2x5Z29uQnVmZmVyKCl9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmFuZ2VbdF07aWYoZSl7dmFyIG49ZVswXSxpPWVbMV0scj1pLW4sbz1yLzksYT10aGlzLl9yYW5nZUluZGV4LmluZGV4T2YodCk7aWYodGhpcy5fcmFuZ2VMZW5ndGgtPW8sdGhpcy5fcG9seWdvblBvc2l0aW9uLnNwbGljZShuLHIpLHRoaXMuX3BvbHlnb25Ob3JtYWxzLnNwbGljZShuLHIpLHRoaXMuX3BvbHlnb25Db2xvci5zcGxpY2UobixyKSx0aGlzLl9wb2x5Z29uSWQuc3BsaWNlKG4vMyxyLzMpLGEhPT0tMSl7Zm9yKHZhciBzPWErMTtzPHRoaXMuX3JhbmdlSW5kZXgubGVuZ3RoO3MrKyl7dmFyIHU9dGhpcy5fcmFuZ2VbdGhpcy5fcmFuZ2VJbmRleFtzXV07dSYmKHVbMF0tPXIsdVsxXS09cil9dGhpcy5fcmFuZ2VJbmRleC5zcGxpY2UoYSwxKX1kZWxldGUgdGhpcy5fcmFuZ2VbdF19fX0se2tleTpcInR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwicG9seWdvblwifX0se2tleTpcIl9yZXNldFBvbHlnb25CdWZmZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3BvbHlnb25CdWZmZXIuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgZC5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh0aGlzLl9wb2x5Z29uUG9zaXRpb24pLDMpKSx0aGlzLl9wb2x5Z29uQnVmZmVyLmFkZEF0dHJpYnV0ZShcIm5vcm1hbFwiLG5ldyBkLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHRoaXMuX3BvbHlnb25Ob3JtYWxzKSwzKSksdGhpcy5fcG9seWdvbkJ1ZmZlci5hZGRBdHRyaWJ1dGUoXCJjb2xvclwiLG5ldyBkLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHRoaXMuX3BvbHlnb25Db2xvciksMykpLHRoaXMuX3BvbHlnb25CdWZmZXIuYWRkQXR0cmlidXRlKFwicG9seWdvbklkXCIsbmV3IGQuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fcG9seWdvbklkKSwxKSksdGhpcy5fcG9seWdvbkJ1ZmZlci5jb21wdXRlQm91bmRpbmdTcGhlcmUoKSx0aGlzLl9jb250YWluZXIuYWRkKHRoaXMuX3BvbHlnb25NZXNoKX19XSksZX0oXyksdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ModGhpcyxlKTt2YXIgbj1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuLl9zY2VuZU1hbmFnZXI9dCxuLl9sYXN0TGVhZj17fSxuLmxhc3RMYXllcklkPTAsbi5fZmVhdHVyZXNNYXBwaW5nPXt9LG4uX21lcmdlTGVhZnM9e30sbi5fb25TY2VuZUNoYW5nZT1uLl9vblNjZW5lQ2hhbmdlLmJpbmQobiksbi5fc2NlbmVNYW5hZ2VyLm9uKFwib25TY2VuZUNoYW5nZVwiLG4uX29uU2NlbmVDaGFuZ2UpLG59cmV0dXJuIGEoZSx0KSxsKGUsW3trZXk6XCJfb25TY2VuZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihcImNvbG9yXCI9PT10fHxcImNvbG9yc1wiPT09dHx8XCJvcGFjaXR5XCI9PT10fHxcImNvbG9yUmVzZXR0aW5nXCI9PT10KXtmb3IodmFyIGk9YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KGk+Mz9pLTM6MCksbz0zO288aTtvKyspcltvLTNdPWFyZ3VtZW50c1tvXTtpZihcImNvbG9yc1wiPT09dCYmdGhpcy5fc2V0Q29sb3JzKGUsbixyWzBdKSxuKXtpZighKDAseS5pc0FycmF5KShuKSYmdGhpcy5oYXMobikpe2lmKHRoaXMubGFzdExheWVySWQhPT1lLmlkKXtmb3IodmFyIGEgaW4gdGhpcy5fbGFzdExlYWYpe3ZhciBzPXRoaXMuX2xhc3RMZWFmW2FdO3Muc2V0VmFsdWUuYXBwbHkocyxbLTEsYV0uY29uY2F0KHIpKX10aGlzLmxhc3RMYXllcklkPWUuaWR9dGhpcy5zZXRWYWx1ZS5hcHBseSh0aGlzLFtlLG4sdF0uY29uY2F0KHIpKX19ZWxzZSB0aGlzLnNldFZhbHVlLmFwcGx5KHRoaXMsW2UsbnVsbCx0XS5jb25jYXQocikpfX19LHtrZXk6XCJoYXNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuaWQsaT10aGlzLl9mZWF0dXJlc01hcHBpbmdbbl07cmV0dXJuISFpJiYoIWV8fGUuaWQgaW4gaSl9fSx7a2V5OlwiaGFzTGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbiB0aGlzLl9tZXJnZUxlYWZzfX0se2tleTpcIm1lcmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxyKXt2YXIgbz0wO2lmKCFlJiYhZSBpbnN0YW5jZW9mIGcuZGVmYXVsdClyZXR1cm4gbzt2YXIgYT1lLnR5cGUoKTtpZihcIlBvbHlnb25cIj09PWEpe3ZhciBzPWUucG9seWdvbk1lcmdlLHU9ZS5vdXRsaW5lTWVyZ2U7aWYoIXMmJiF1KXJldHVybiBvO2lmKG4gaW5zdGFuY2VvZiBkLkdyb3VwKXtmb3IodmFyIGw9bi5jaGlsZHJlbixjPUFycmF5LmlzQXJyYXkobCksaD0wLGw9Yz9sOmxbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBmO2lmKGMpe2lmKGg+PWwubGVuZ3RoKWJyZWFrO2Y9bFtoKytdfWVsc2V7aWYoaD1sLm5leHQoKSxoLmRvbmUpYnJlYWs7Zj1oLnZhbHVlfXZhciBwPWY7bz10aGlzLm1lcmdlKHQsZSxwLGksciksMj09PW8mJm4ucmVtb3ZlKHApfXJldHVybiAwPT09bi5jaGlsZHJlbi5sZW5ndGg/MjpvfXZhciB2PXRoaXMuX2ZlYXR1cmVzTWFwcGluZ1t0LmlkXTt2fHwodj1bXSx0aGlzLl9mZWF0dXJlc01hcHBpbmdbdC5pZF09dik7dmFyIG09dGhpcy5fbWVyZ2VMZWFmc1tpXTtpZihtfHwobT17fSx0aGlzLl9tZXJnZUxlYWZzW2ldPW0pLHUmJm4uY2hpbGRyZW4ubGVuZ3RoPjApe3ZhciB5PW4uY2hpbGRyZW5bMF07bi5yZW1vdmUoeSk7dmFyIF89bS5saW5lO198fChfPW5ldyBiKHIpLF8uYmxlbmRpbmc9ZS5vdXRsaW5lQmxlbmRpbmcsXy5yZXNldCgpLG0ubGluZT1fKSxfLm1lcmdlKHkuaWQseSksdi5wdXNoKHkuaWQpLG89MX1pZihzKXt2YXIgdz1tLnBvbHlnb247d3x8KHc9bmV3IHgociksdy5yZXNldCgpLG0ucG9seWdvbj13KSx3Lm1lcmdlKG4uaWQsbiksdi5wdXNoKG4uaWQpLG89MT09PW8/MjoxfX1yZXR1cm4gb319LHtrZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tZXJnZUxlYWZzW3RdO2lmKGUpZm9yKHZhciBuIGluIGUpe3ZhciBpPWVbbl07aS51cGRhdGUoKX19fSx7a2V5OlwiX3NldENvbG9yc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLHI9W10sbz10aGlzLl9tZXJnZUxlYWZzW3QuaWRdLGE9by5wb2x5Z29uO2UubWFwKGZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBudWxsO3ZhciBlPWkuX2ZlYXR1cmVzTWFwcGluZ1t0LmlkXTtyZXR1cm4gZSYmKHI9ci5jb25jYXQoZS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIGEuaGFzKHQpfSkpKSxudWxsfSksYS5zZXRDb2xvcnMocixuKSxhLnVwZGF0ZSgpfX0se2tleTpcInNldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT10LmlkLHI9dGhpcy5fbWVyZ2VMZWFmc1tpXSxvPWFyZ3VtZW50cy5sZW5ndGgsYT1BcnJheShvPjM/by0zOjApLHM9MztzPG87cysrKWFbcy0zXT1hcmd1bWVudHNbc107aWYoIWUmJnIpdGhpcy5fc2V0VmFsdWUuYXBwbHkodGhpcyxbcixudWxsLG5dLmNvbmNhdChhKSk7ZWxzZSBpZihlKXt2YXIgdT10aGlzLl9mZWF0dXJlc01hcHBpbmdbZS5pZF07aWYoIXUpcmV0dXJuO2Zvcih2YXIgbCBpbiB0aGlzLl9tZXJnZUxlYWZzKXI9dGhpcy5fbWVyZ2VMZWFmc1tsXSx0aGlzLl9zZXRWYWx1ZS5hcHBseSh0aGlzLFtyLHUsbl0uY29uY2F0KGEpKX19fSx7a2V5OlwiX3NldFZhbHVlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1hcmd1bWVudHMubGVuZ3RoLHI9QXJyYXkoaT4zP2ktMzowKSxvPTM7bzxpO28rKylyW28tM109YXJndW1lbnRzW29dO2lmKHQubGluZSYmIWUpe3ZhciBhOyhhPXQubGluZSkuc2V0VmFsdWUuYXBwbHkoYSxbMCxuXS5jb25jYXQocikpfXZhciBzPXQucG9seWdvbjtpZihzKWlmKGUpZm9yKHZhciB1PWUsbD1BcnJheS5pc0FycmF5KHUpLGM9MCx1PWw/dTp1W1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgaDtpZihsKXtpZihjPj11Lmxlbmd0aClicmVhaztoPXVbYysrXX1lbHNle2lmKGM9dS5uZXh0KCksYy5kb25lKWJyZWFrO2g9Yy52YWx1ZX12YXIgZj1oO3MuaGFzKGYpJiYocy5zZXRWYWx1ZS5hcHBseShzLFtmLG5dLmNvbmNhdChyKSksdGhpcy5fbGFzdExlYWZbbl09cyl9ZWxzZSBzLnNldFZhbHVlLmFwcGx5KHMsWzAsbl0uY29uY2F0KHIpKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmlkLG49dGhpcy5fZmVhdHVyZXNNYXBwaW5nW2VdO2lmKG4pe2Zvcih2YXIgaT1uLHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9dmFyIHM9YTtmb3IodmFyIHUgaW4gdGhpcy5fbWVyZ2VMZWFmcyl7dmFyIGw9dGhpcy5fbWVyZ2VMZWFmc1t1XTtpZihsKWZvcih2YXIgYyBpbiBsKXt2YXIgaD1sW2NdO2gucmVtb3ZlKHMpfX19ZGVsZXRlIHRoaXMuX2ZlYXR1cmVzTWFwcGluZ1tlXX19fSx7a2V5OlwicmVtb3ZlQnlMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0LnZpc2l0KGZ1bmN0aW9uKHQpe3ZhciBlPW4uX2ZlYXR1cmVzTWFwcGluZ1t0LmlkXTtlJiZkZWxldGUgbi5fZmVhdHVyZXNNYXBwaW5nW3QuaWRdfSk7dmFyIGk9dGhpcy5fbWVyZ2VMZWFmc1tlXTtpZihpKXtmb3IodmFyIHIgaW4gaSl7dmFyIG89aVtyXTtvLmNsZWFyKCl9ZGVsZXRlIHRoaXMuX21lcmdlTGVhZnNbZV19fX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NjZW5lTWFuYWdlci5vZmYoXCJvblNjZW5lQ2hhbmdlXCIsdGhpcy5fb25TY2VuZUNoYW5nZSksdGhpcy5fbGFzdExlYWY9W10sdGhpcy5fZmVhdHVyZXNNYXBwaW5nPVtdO2Zvcih2YXIgdCBpbiB0aGlzLl9tZXJnZUxlYWZzKXt2YXIgZT10aGlzLl9tZXJnZUxlYWZzW3RdO2Zvcih2YXIgbiBpbiBlKXt2YXIgaT1lW25dO2kuY2xlYXIoKX19dGhpcy5fbWVyZ2VMZWFmcz1bXX19XSksZX0oaC5kZWZhdWx0KTtlLmRlZmF1bHQ9d30sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIGEodCl7Zm9yKHZhciBlPXRoaXMubWFyZ2lufHwwLG49TnVtYmVyLk1BWF9WQUxVRSxpPU51bWJlci5NSU5fVkFMVUUscj1uLG89aSxhPXRoaXMuY2hpbGRyZW4scz1BcnJheS5pc0FycmF5KGEpLHU9MCxhPXM/YTphW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbDtpZihzKXtpZih1Pj1hLmxlbmd0aClicmVhaztsPWFbdSsrXX1lbHNle2lmKHU9YS5uZXh0KCksdS5kb25lKWJyZWFrO2w9dS52YWx1ZX12YXIgYz1sO2lmKGMuZ2V0QUFCQil7dmFyIGg9Yy5nZXRBQUJCKHQpO24+aFswXSYmKG49aFswXSkscj5oWzFdJiYocj1oWzFdKSxpPGhbM10mJihpPWhbM10pLG88aFs0XSYmKG89aFs0XSl9fXJldHVybltuLWUsci1lLDAsaStlLG8rZSwwXX1mdW5jdGlvbiBzKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLG49dGhpcy5jaGlsZHJlbixpPUFycmF5LmlzQXJyYXkobikscj0wLG49aT9uOm5bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBvO2lmKGkpe2lmKHI+PW4ubGVuZ3RoKWJyZWFrO289bltyKytdfWVsc2V7aWYocj1uLm5leHQoKSxyLmRvbmUpYnJlYWs7bz1yLnZhbHVlfXZhciBhPW87YS5tYWtlQ29sbGlzaW9uJiZhLm1ha2VDb2xsaXNpb24odCxlKX10aGlzLnZpc2libGU9IXR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHU9bigxKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksYz1uKDIpLGg9cihjKSxmPW4oMTMwKSxkPWkoZikscD1uKDEyNiksZz1pKHApLHY9big5MyksbT1pKHYpLHk9big4NyksXz1pKHkpLGI9big0MikseD1pKGIpLHc9big5OCksRT1pKHcpLFM9big5NyksTT1pKFMpLEM9big4KSxJPWkoQyksTz1uKDI3KSxUPWkoTyksUD1uKDMpLEE9bigyMTQpLEw9aShBKSxOPW4oMTAzKSxrPWkoTiksUj1uKDk1KSxEPShpKFIpLG4oODkpKSxGPShpKEQpLG4oOTIpKSxCPShpKEYpLG4oOTEpKSxqPShpKEIpLG5ldyBoLlRleHR1cmVMb2FkZXIpLFU9bmV3IGQuZGVmYXVsdChuZXcgaC5UZXh0dXJlTG9hZGVyKSx6PXt9LEc9KDAsTC5kZWZhdWx0KShoKSxWPSgwLGsuZGVmYXVsdCkoaCksWD17QW5ub3RhdGlvbjp7b3V0bGluZUNvbG9yOlwic3Ryb2tlU3R5bGVcIixvdXRsaW5lV2lkdGg6XCJsaW5lV2lkdGhcIixzaGFkb3dDb2xvcjpcInNoYWRvd0NvbG9yXCIsc2hhZG93Qmx1cjpcInNoYWRvd0JsdXJcIixjb2xvcjpcImZpbGxTdHlsZVwifX0sSD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCl9cmV0dXJuIGwodCxudWxsLFt7a2V5OlwiZ2VuZXJhdG9yXCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkscil7dmFyIG89ZS5tYXBWaWV3LmVuZ2luZSxhPXIudHlwZSgpLHM9bnVsbDtzd2l0Y2goYSl7Y2FzZVwiUG9seWdvblwiOnM9dC5wb2x5Z29uKGUsbyxpLHIpO2JyZWFrO2Nhc2VcIkFubm90YXRpb25cIjpzPXQuYW5ub3RhdGlvbihlLG4sbyxpLHIpO2JyZWFrO2Nhc2VcIkljb25cIjpzPXQuaWNvbihlLG4sbyxpLHIpO2JyZWFrO2Nhc2VcIkxpbmVTdHJpbmdcIjpzPXQubGluZVN0cmluZyhlLG8saSxyKTticmVhaztjYXNlXCJMaWdodFwiOnM9dC5saWdodChlLG8saSxyKTticmVhaztjYXNlXCJNb2RlbFwiOnM9dC5tb2RlbChlLG4sbyxpLHIpO2JyZWFrO2Nhc2VcIlNwaGVyZVwiOnM9dC5zcGhlcmUoZSxuLG8saSxyKTticmVhaztkZWZhdWx0OmNvbnNvbGUud2FybihcIkludmFsaWQgc3R5bGUgdHlwZVwiKX1pZihzKXtpZihzLm9yaWdpblN0eWxlPXIsaS5wcm9wZXJ0aWVzLmlkJiYocy5fc2NlbmVJZD1pLnByb3BlcnRpZXMuaWQscy5fbGF5ZXJJZD1uLmlkLHMgaW5zdGFuY2VvZiBoLkdyb3VwKSlmb3IodmFyIHU9cy5jaGlsZHJlbixsPUFycmF5LmlzQXJyYXkodSksYz0wLHU9bD91OnVbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBmO2lmKGwpe2lmKGM+PXUubGVuZ3RoKWJyZWFrO2Y9dVtjKytdfWVsc2V7aWYoYz11Lm5leHQoKSxjLmRvbmUpYnJlYWs7Zj1jLnZhbHVlfXZhciBkPWY7ZC5fc2NlbmVJZD1pLnByb3BlcnRpZXMuaWQsZC5fbGF5ZXJJZD1uLmlkfWlmKHIuY29sbGlzaW9uJiZlLm1hcFZpZXcuY29sbGlzaW9uU2NlbmVNYW5hZ2VyLmFkZChpLHMpLHIuYWx3YXlzVmlzaWJsZSYmKGUubWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIuYWRkKGkscywhMCksXCJQbGFuZUxpbmVHcm91cFwiPT09cy50eXBlKSlmb3IodmFyIHA9ZnVuY3Rpb24oKXtpZih2KXtpZihtPj1nLmxlbmd0aClyZXR1cm5cImJyZWFrXCI7eT1nW20rK119ZWxzZXtpZihtPWcubmV4dCgpLG0uZG9uZSlyZXR1cm5cImJyZWFrXCI7eT1tLnZhbHVlfXZhciB0PXk7dC5vbihcImxvYWRlZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGUubWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIuYWRkKGksdCwhMCl9KX0sZz1zLmNoaWxkcmVuLHY9QXJyYXkuaXNBcnJheShnKSxtPTAsZz12P2c6Z1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHksXz1wKCk7aWYoXCJicmVha1wiPT09XylicmVha319cmV0dXJuIHN9fSx7a2V5OlwiYW5ub3RhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpLHIsbyl7dmFyIHU9ci5nZW9tZXRyeSxsPXUuZ2V0R2VvbWV0cnlUeXBlKCksYz1udWxsO2lmKFwiUG9pbnRcIj09PWwpe3ZhciBmPW8uZmllbGQsZD10LnBhcnNlUGFyYW1zKHIsbyxbXCJmb250XCIsXCJjb2xvclwiLFwib3V0bGluZUNvbG9yXCIsXCJvdXRsaW5lV2lkdGhcIixcInNoYWRvd0NvbG9yXCIsXCJzaGFkb3dCbHVyXCIsXCJkZXB0aFRlc3RcIixcIm9wdFRleHRSZWN0XCJdKTtpZihkLmFudGlhbGlhcz0hMSxkLmFsaWduPXguZGVmYXVsdC5jZW50ZXIsZiYmci5wcm9wZXJ0aWVzW2ZdKXt2YXIgcD1lLm1hcFZpZXcsZz1pLmdldFJlbmRlcmVyKHApLHY9Zy5nZXRQaXhlbFJhdGlvKCk9PT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbz8xOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLG09by5hbmNob3JTdHlsZSx5PW8ueixiPXZvaWQgMD09PXk/MDp5LHc9by5tYXJnaW4sRT1vLmFuY2hvcixTPW8uYW5jaG9yQXV0byxNPW51bGw7aWYoYz1uZXcgXy5kZWZhdWx0KHIucHJvcGVydGllc1tmXSxkKSxjLnBvc2l0aW9uLnNldCh1LmdldFgoKSx1LmdldFkoKSwodS5nZXRDb29yZGluYXRlKCkuenx8MCkrYiksYy5zcHJpdGUuc2NhbGUueD1jLmNhbnZhcy50ZXh0V2lkdGgvMip2LGMuc3ByaXRlLnNjYWxlLnk9Yy5jYW52YXMudGV4dEhlaWdodC8yKnYsYy5zcHJpdGUubWF0ZXJpYWwubWF0ZXJpYWxTY2FsZT0hMCxjLm1hcmdpbj13LGMuc3ByaXRlLm1hdGVyaWFsLmFuY2hvcj1FLnNsaWNlKCksYy5zcHJpdGUubWF0ZXJpYWwudHJhbnNwYXJlbnQ9ITAsbSl7dmFyIEM9bS50eXBlKCk7XCJJY29uXCI9PT1DJiYoTT10Lmljb24oZSxuLGkscixvLmFuY2hvclN0eWxlKSl9aWYoTSl7dmFyIEk9bmV3IGguR3JvdXA7UyYmbS53aWR0aCYmKGMuc3ByaXRlLm1hdGVyaWFsLmFuY2hvclswXT0tbS53aWR0aC8yL2Muc3ByaXRlLnNjYWxlLngpLFxuSS5hZGQoYyksSS5hZGQoTSksYz1JLEkubWFyZ2luPXcsSS5nZXRBQUJCPWEsSS5tYWtlQ29sbGlzaW9uPXN9fX1yZXR1cm4gY319LHtrZXk6XCJpY29uXCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkscixvKXt2YXIgYT1yLmdlb21ldHJ5LHM9YS5nZXRHZW9tZXRyeVR5cGUoKSx1PW51bGw7aWYoXCJQb2ludFwiPT09cyl7dmFyIGw9dC5wYXJzZVBhcmFtcyhyLG8sW1widGV4dHVyZVwiLFwic2VydmVyVXJsXCJdKSxjPW8uZGVwdGhUZXN0LGY9dm9pZCAwPT09Y3x8YyxkPW8ucGxhbmUscD1vLmFuY2hvcixnPW8ubWFyZ2luLHY9by56LG09dm9pZCAwPT09dj8wOnY7aWYobC5mb2c9ITAsbC5kZXB0aFRlc3Q9ISFmLGwudHJhbnNwYXJlbnQ9ITAsbC5hbHBoYVRlc3Q9LjAxLGQpe3ZhciB5PXQuX2dlbmVyYXRlVGV4dHVyZVBsYW5lKDEsMSksXz1uZXcgaC5NZXNoQmFzaWNNYXRlcmlhbChsKTt1PW5ldyBoLk1lc2goeSxfKSx1LnJlbmRlck9yZGVyPTEsdC5wYXJzZVRleHR1cmUoZSxuLHUsbyxsKX1lbHNlIHU9bmV3IEUuZGVmYXVsdChuZXcgaC5TcHJpdGVNYXRlcmlhbChsKSksdS5tYXJnaW49Zyx1Lm1hdGVyaWFsLmFuY2hvcj1wLnNsaWNlKCksdC5wYXJzZVRleHR1cmUoZSxuLHUsbyxsKTt1LnBvc2l0aW9uLnNldChhLmdldFgoKSxhLmdldFkoKSwoYS5nZXRDb29yZGluYXRlKCkuenx8MCkrbSl9cmV0dXJuIHV9fSx7a2V5OlwibGluZVN0cmluZ1wiLHZhbHVlOmZ1bmN0aW9uKGUsbixpLHIpe3ZhciBvPWkuZ2VvbWV0cnksYT1vLmdldEdlb21ldHJ5VHlwZSgpLHM9dm9pZCAwO2lmKFwiTGluZVN0cmluZ1wiPT09YSl7dmFyIHU9by5nZXRDb29yZGluYXRlcygpO2lmKDAhPT11Lmxlbmd0aCl7dmFyIGw9dC5wYXJzZVBhcmFtcyhpLHIsW1wiY29sb3JcIixcImRlcHRoVGVzdFwiXSk7aWYobC5kZXB0aFRlc3Q9ISgwLFAuaXNCb29sZWFuKShyLmRlcHRoVGVzdCl8fHIuZGVwdGhUZXN0LHJbXCIyZFwiXSl7dmFyIGM9ci53aWR0aCxmPXIub3BhY2l0eSxkPXIuZGFzaFN0ZXBzLHA9dm9pZCAwPT09ZD8xMjpkLGc9ci5kYXNoRGlzdGFuY2Usdj12b2lkIDA9PT1nPy4yOmcsbT1yLmRhc2hTbW9vdGgseT12b2lkIDA9PT1tPy4wMTptLF89dS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC54LG49dC55LGk9dC56LHI9dm9pZCAwPT09aT8wOmk7cmV0dXJuW2UsbixyXX0pLGI9RyhfKSx4PW5ldyBoLlNoYWRlck1hdGVyaWFsKFYoe3NpZGU6aC5Eb3VibGVTaWRlLGRpZmZ1c2U6bC5jb2xvcix0aGlja25lc3M6YyxvcGFjaXR5OmYsZGVwdGhUZXN0OmwuZGVwdGhUZXN0fSkpO3gudW5pZm9ybXMuZGFzaFN0ZXBzLnZhbHVlPXAseC51bmlmb3Jtcy5kYXNoRGlzdGFuY2UudmFsdWU9dix4LnVuaWZvcm1zLmRhc2hTbW9vdGgudmFsdWU9eSxzPW5ldyBoLk1lc2goYix4KSxzLnBvc2l0aW9uLnorPS4xfWVsc2V7dmFyIHc9ci50ZW5zaW9uLEU9ci50ZXh0dXJlLFM9ci5kZW5zaXR5LE09ci53aWR0aCxDPXZvaWQgMD09PU0/MTpNLEk9dS5tYXAoZnVuY3Rpb24odCl7dmFyIGU9dC54LG49dC55LGk9dC56LHI9dm9pZCAwPT09aT8wOmk7cmV0dXJuIG5ldyBoLlZlY3RvcjMoZSxuLHIpfSksTz1uZXcgaC5DYXRtdWxsUm9tQ3VydmUzKEkpO08udHlwZT1cImNhdG11bGxyb21cIixPLnRlbnNpb249dz49MCYmdzw9MT93OjA7dmFyIFQ9bmV3IGguVHViZUdlb21ldHJ5KE8sTWF0aC5jZWlsKE8uZ2V0TGVuZ3RoKCkqKFM+MD9TOjEpKSxDLzIsOCwhMSk7RSYmKGoubG9hZChFLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaW1hZ2Uud2lkdGgvdC5pbWFnZS5oZWlnaHQsbj1ULnBhcmFtZXRlcnMucGF0aC5nZXRMZW5ndGgoKSxpPTIqVC5wYXJhbWV0ZXJzLnJhZGl1cztzLm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLHMubWF0ZXJpYWwubWFwPXQscy5tYXRlcmlhbC5tYXAud3JhcFM9aC5SZXBlYXRXcmFwcGluZyxzLm1hdGVyaWFsLm1hcC5yZXBlYXQuc2V0WChuL2kvZSl9KSxsLnRyYW5zcGFyZW50PSEwKSxzPW5ldyBoLk1lc2goVCxuZXcgaC5NZXNoQmFzaWNNYXRlcmlhbChsKSl9fX1yZXR1cm4gc319LHtrZXk6XCJwb2x5Z29uXCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkscil7dmFyIG89aS5nZW9tZXRyeSxhPXQucGFyc2VQYXJhbXMoaSxyLFtcImNvbG9yXCIsXCJvcGFjaXR5XCIsXCJ0ZXh0dXJlXCJdKSxzPW8uZ2V0R2VvbWV0cnlUeXBlKCksdT1udWxsO2lmKFwiUG9seWdvblwiPT09cyl1PXQuX3BvbHlnb24oZSxuLG8scixhLG8uekluZGV4LGkuaWQpO2Vsc2UgaWYoXCJNdWx0aVBvbHlnb25cIj09PXMpe3U9bmV3IGguR3JvdXA7Zm9yKHZhciBsPTA7bDxvLmdldE51bUdlb21ldHJpZXMoKTtsKyspe3ZhciBjPXQuX3BvbHlnb24oZSxuLG8uZ2V0R2VvbWV0cnlOKGwpLHIsYSxvLnpJbmRleCxpLmlkKTt1LmFkZChjKX19cmV0dXJuIHV9fSx7a2V5OlwiX3BvbHlnb25cIix2YWx1ZTpmdW5jdGlvbihlLG4saSxyLG8sYSxzKXt2YXIgdT1yLmhlaWdodCxsPXIuYmV2ZWxFbmFibGVkLGM9ci5iZXZlbFRoaWNrbmVzcyxmPXIuYmV2ZWxTaXplLGQ9ci5iZXZlbFNlZ21lbnRzLHA9ci5saWdodCx2PXIueixtPXIub3V0bGluZUNvbG9yLHk9ci5saW5lSGVpZ2h0LF89bmV3IGguU2hhcGUsYj1uZXcgZy5kZWZhdWx0KGkpLHg9e2Ftb3VudDpNYXRoLmFicyh1KSxiZXZlbEVuYWJsZWQ6ITF9LHc9by5tYXAsRT1udWxsLFM9dm9pZCAwLEM9bnVsbDtpZihiLnNoZWxsQ3JlYXRvcihmdW5jdGlvbigpe3JldHVybiBffSksYi5zaGVsbChmdW5jdGlvbih0LGUsbil7dmFyIGk9ZS54LHI9ZS55OzA9PT1uP3QubW92ZVRvKGkscik6dC5saW5lVG8oaSxyKX0pLGIuaG9sZUNyZWF0b3IoZnVuY3Rpb24oKXt2YXIgdD1uZXcgaC5QYXRoO3JldHVybiBfLmhvbGVzLnB1c2godCksdH0pLGIuaG9sZXMoZnVuY3Rpb24odCxlLG4pe3ZhciBpPWUueCxyPWUueTswPT09bj90Lm1vdmVUbyhpLHIpOnQubGluZVRvKGkscil9KSxlLm1hcFZpZXcuX2dvZW1NYXAmJmUubWFwVmlldy5fZ29lbU1hcFtzXT9TPWUubWFwVmlldy5fZ29lbU1hcFtzXS5nZW9tZXRyeTooMCxQLmlzTnVtYmVyKSh1KSYmMCE9PXU/KGwmJih4LmJldmVsRW5hYmxlZD0hMCx4LmJldmVsVGhpY2tuZXNzPSgwLFAuaXNOdW1iZXIpKGMpP2M6MCx4LmJldmVsU2l6ZT0oMCxQLmlzTnVtYmVyKShmKSYmZj4wP2Y6MSx4LmJldmVsU2VnbWVudHM9KDAsUC5pc051bWJlcikoZCk/ZDoxKSxTPW5ldyBoLkV4dHJ1ZGVHZW9tZXRyeShfLHgpKTpTPW5ldyBoLlNoYXBlR2VvbWV0cnkoXyksdyYmZGVsZXRlIG8ubWFwLCgwLFAuaXNOdW1iZXIpKG8ub3BhY2l0eSkmJihvLnRyYW5zcGFyZW50PSEwKSxFPW5ldyBoLk1lc2goUyxwP25ldyBoLk1lc2hQaG9uZ01hdGVyaWFsKG8pOm5ldyBoLk1lc2hCYXNpY01hdGVyaWFsKG8pKSx2JiZFLnBvc2l0aW9uLnNldFoodiksdTwwJiZFLnBvc2l0aW9uLnNldFooRS5wb3NpdGlvbi56K3UpLHguYmV2ZWxFbmFibGVkP0M9TS5kZWZhdWx0LmNyZWF0ZUV4cGFuZGVkUG9pbnRzR2VvbWV0cnkoXyx4LmJldmVsU2l6ZSk6KF8uYXV0b0Nsb3NlPSEwLEM9Xy5jcmVhdGVQb2ludHNHZW9tZXRyeSgpKSwoMCxQLmlzUHJlc2VudCkobSkpe3ZhciBJPXk/eToodXx8MCkrLjAzO0MudHJhbnNsYXRlKDAsMCxJK2EpO3ZhciBPPW5ldyBoLkxpbmUoQyxuZXcgaC5MaW5lQmFzaWNNYXRlcmlhbCh7Y29sb3I6bX0pKTtFLmFkZChPKX1pZih3KXt2YXIgVD13LmRlcHRoVGVzdCxBPXZvaWQgMD09PVR8fFQsTD13LmFscGhhVGVzdCxOPXZvaWQgMD09PUw/LjAxOkwsaz13LnNpemUsUj12b2lkIDA9PT1rP1sxLDFdOmssRD13Lm9mZnNldCxGPXZvaWQgMD09PUQ/WzAsMF06RCxCPXcudXJsLGo9dy5yb3RhdGlvbjtVLmxvYWQoQixmdW5jdGlvbihlKXt2YXIgbj10Ll9nZW5lcmF0ZVRleHR1cmVQbGFuZShSWzBdfHwxLFJbMV18fDEpO2UubWFnRmlsdGVyPWguTGluZWFyRmlsdGVyLGUubWluRmlsdGVyPWguTGluZWFyRmlsdGVyLGUuYW5pc290cm9weT04O3ZhciByPW5ldyBoLk1lc2hCYXNpY01hdGVyaWFsKHttYXA6ZSx0cmFuc3BhcmVudDohMCxkZXB0aFRlc3Q6ISFBLGFscGhhVGVzdDpOfSksbz1uZXcgaC5NZXNoKG4sciksYT1pLmdldENlbnRyb2lkKCk7aWYoRS5hZGQobyksby5wb3NpdGlvbi5zZXQoYS5nZXRYKCkrKEZbMF18fDApLGEuZ2V0WSgpKyhGWzFdfHwwKSx1Ky4xKSwoMCxQLmlzTnVtYmVyKShqKSl7dmFyIHM9TWF0aC5QSSpqLzE4MDtvLnJvdGF0ZVoocyksZS5kaXNwb3NlKCl9fSl9cmV0dXJuIEV9fSx7a2V5OlwibGlnaHRcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt2YXIgcj1pLmxpZ2h0VHlwZSxvPWkuaW50ZW5zaXR5LGE9dm9pZCAwPT09bz8xOm8scz1pLmNvbG9yLHU9dm9pZCAwPT09cz8xNjc3NzIxNTpzLGw9aS5vcHRpb25zLGM9dm9pZCAwPT09bD97fTpsLGY9bi5nZW9tZXRyeSxkPWYuZ2V0R2VvbWV0cnlUeXBlKCkscD1udWxsO2lmKFwiUG9pbnRcIj09PWQpe3N3aXRjaChyKXtjYXNlXCJQb2ludExpZ2h0XCI6cD1uZXcgaFtyXTticmVhaztjYXNlXCJTcG90TGlnaHRcIjpwPW5ldyBoW3JdO2JyZWFrO2Nhc2VcIkRpcmVjdGlvbmFsTGlnaHRcIjpwPW5ldyBoW3JdO2JyZWFrO2Nhc2VcIkhlbWlzcGhlcmVMaWdodFwiOnZhciBnPWMuZ3JvdWRDb2xvcmN8fDE2Nzc3MjE1O3A9bmV3IGhbcl0odSxnLGEpO2JyZWFrO2Nhc2VcIkFtYmllbnRMaWdodFwiOnA9bmV3IGhbcl19aWYocCl7dmFyIHY9Zi5nZXRDb29yZGluYXRlKCk7aWYocC5wb3NpdGlvbi5zZXQodi54LHYueSx2LnopLHAuc2hhZG93KXt2YXIgbT0yMDtwLmNhc3RTaGFkb3c9ITAscC5zaGFkb3cubWFwU2l6ZS53aWR0aD0xMDI0LHAuc2hhZG93Lm1hcFNpemUuaGVpZ2h0PTEwMjQscC5zaGFkb3cuY2FtZXJhLmxlZnQ9LW0scC5zaGFkb3cuY2FtZXJhLnJpZ2h0PW0scC5zaGFkb3cuY2FtZXJhLnRvcD1tLHAuc2hhZG93LmNhbWVyYS5ib3R0b209LW0scC5zaGFkb3cuY2FtZXJhLmZhcj0xZTN9fX1yZXR1cm4gcH19LHtrZXk6XCJfcG9zdFByb2Nlc3NPY3RyZWVGb3JNb2RlbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe2lmKG4gaW5zdGFuY2VvZiBoLkdyb3VwKWZvcih2YXIgcj1uLmNoaWxkcmVuLG89QXJyYXkuaXNBcnJheShyKSxhPTAscj1vP3I6cltTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHM7aWYobyl7aWYoYT49ci5sZW5ndGgpYnJlYWs7cz1yW2ErK119ZWxzZXtpZihhPXIubmV4dCgpLGEuZG9uZSlicmVhaztzPWEudmFsdWV9dmFyIHU9czt1Ll9zY2VuZUlkPWkuaWQsdS5fbGF5ZXJJZD1lLmlkfWVsc2Ugbi5fc2NlbmVJZD1pLmlkLG4uX2xheWVySWQ9ZS5pZDt0Ll9vY3RyZWVNYW5hZ2VyLmFkZChuLGUuaWQsaS5pZCl9fSx7a2V5OlwibW9kZWxcIix2YWx1ZTpmdW5jdGlvbihlLG4saSxyLG8pe3ZhciBhPW8ucGF0aCxzPW8uZmlsZVR5cGUsbD1vLmF1dG9BdHRhY2gsYz1vLnBvc2l0aW9uLGY9by5zY2FsZSxkPW8ucm90YXRlLHA9by5jbGlja2FibGUsZz1vLnBhcmFtcyx2PXZvaWQgMD09PWc/e306ZztpZighYXx8IXMpcmV0dXJuIG51bGw7dmFyIHk9bmV3IG0uZGVmYXVsdCxfPXIuZ2VvbWV0cnksYj1fLmdldEdlb21ldHJ5VHlwZSgpLHg9dSh7fSx7cG9zaXRpb246YyxzY2FsZTpmLHJvdGF0ZTpkfSk7c3dpdGNoKGIpe2Nhc2VcIlBvaW50XCI6dmFyIHc9Xy5nZXRDb29yZGluYXRlKCksRT13LngsUz13LnksTT13Lno7dSh4LHtwb3NpdGlvbjpbRSxTLE18fDBdfSk7YnJlYWs7Y2FzZVwiUG9seWdvblwiOnZhciBDPV8uZ2V0RW52ZWxvcGUoKSxPPUMuZ2V0Q2VudHJvaWQoKSxQPU8uZ2V0Q29vcmRpbmF0ZSgpLEE9UC54LEw9UC55LE49UC56O2lmKHUoeCx7cG9zaXRpb246W0EsTCxOfHwwXX0pLGwpe3ZhciBrPUkuZGVmYXVsdC5nZXRMb25nRWRnZShfKSxSPVQuZGVmYXVsdC5zdWJWZWN0b3Ioay5wMSxrLnAwKSxEPVQuZGVmYXVsdC5nZXRBbmdsZShSLHt4OjAseToxLHo6MH0pO3UoeCx7cm90YXRlOlswLDAsRF19KX19c3dpdGNoKHMpe2Nhc2VcIm9ialwiOnZhciBGPW5ldyBoLk9CSkxvYWRlcjtpZih2Lm10bCl7dmFyIEI9bmV3IGguTVRMTG9hZGVyO3YudGV4dHVyZVBhdGgmJkIuc2V0VGV4dHVyZVBhdGgodi50ZXh0dXJlUGF0aCksQi5sb2FkKHYubXRsLGZ1bmN0aW9uKGkpe2kucHJlbG9hZCgpLEYuc2V0TWF0ZXJpYWxzKGkpLEYubG9hZChhLGZ1bmN0aW9uKGkpe3QuX3NldE1vZGVsUGFyYW0oaSx4KSx5LmFkZFByb3h5KGkpLHAmJnQuX3Bvc3RQcm9jZXNzT2N0cmVlRm9yTW9kZWwoZSxuLGkscil9KSxyLm9ubG9hZCYmci5vbmxvYWQoKX0pfWVsc2UgRi5sb2FkKGEsZnVuY3Rpb24oaSl7dmFyIG89bnVsbDtpZih2LnRleHR1cmUpe3ZhciBhPW5ldyBoLkltYWdlTG9hZGVyO289bmV3IGguVGV4dHVyZSxhLmxvYWQodi50ZXh0dXJlLGZ1bmN0aW9uKHQpe28uaW1hZ2U9dH0pfWkudHJhdmVyc2UoZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIGguTWVzaCYmbyYmKHQubWF0ZXJpYWwubWFwPW8pfSksdC5fc2V0TW9kZWxQYXJhbShpLHgpLHkuYWRkUHJveHkoaSkscCYmdC5fcG9zdFByb2Nlc3NPY3RyZWVGb3JNb2RlbChlLG4saSxyKSxyLm9ubG9hZCYmci5vbmxvYWQoKX0pO2JyZWFrO2Nhc2VcImRhZVwiOnZhciBqPW5ldyBoLkNvbGxhZGFMb2FkZXI7ai5vcHRpb25zLmNvbnZlcnRVcEF4aXM9ITAsai5sb2FkKGEsZnVuY3Rpb24oaSl7dmFyIG89aS5zY2VuZTtvLnVwZGF0ZU1hdHJpeCgpLHQuX3NldE1vZGVsUGFyYW0obyx4KSx5LmFkZFByb3h5KG8pLHAmJnQuX3Bvc3RQcm9jZXNzT2N0cmVlRm9yTW9kZWwoZSxuLG8scil9KTticmVhaztjYXNlXCJmYnhcIjp2YXIgVT1uZXcgaC5GQlhMb2FkZXI7VS5sb2FkKGEsZnVuY3Rpb24oaSl7eS5hZGRQcm94eShpKSxwJiZ0Ll9wb3N0UHJvY2Vzc09jdHJlZUZvck1vZGVsKGUsbixpLHIpfSk7YnJlYWs7Y2FzZVwianNcIjp2YXIgej1uZXcgaC5KU09OTG9hZGVyO3oubG9hZChhLGZ1bmN0aW9uKGksYSl7dmFyIHM9bmV3IGguTWVzaChpLG5ldyBoLk11bHRpTWF0ZXJpYWwoYSkpO3kuYWRkUHJveHkocyksdC5fc2V0TW9kZWxQYXJhbShzLG8pLHAmJnQuX3Bvc3RQcm9jZXNzT2N0cmVlRm9yTW9kZWwoZSxuLHMscil9KX1yZXR1cm4geX19LHtrZXk6XCJzcGhlcmVcIix2YWx1ZTpmdW5jdGlvbihlLG4saSxyLG8pe3ZhciBhPXIuZ2VvbWV0cnkscz1hLmdldEdlb21ldHJ5VHlwZSgpLHU9bnVsbDtpZihcIlBvaW50XCI9PT1zKXt2YXIgbD1vLnJhZGl1cyxjPW8ud2lkdGhTZWdtZW50cyxmPW8uaGVpZ2h0U2VnbWVudHMsZD1vLmxpZ2h0LHA9bmV3IGguU3BoZXJlR2VvbWV0cnkobCxjLGYpLGc9dC5wYXJzZVBhcmFtcyhyLG8sW1wiY29sb3JcIixcIm9wYWNpdHlcIl0pLHY9YS5nZXRDb29yZGluYXRlKCksbT12LngseT12LnksXz12Lno7KDAsUC5pc051bWJlcikoZy5vcGFjaXR5KSYmKGcudHJhbnNwYXJlbnQ9ITApLHU9bmV3IGguTWVzaChwLGQ/bmV3IGguTWVzaFBob25nTWF0ZXJpYWwoZyk6bmV3IGguTWVzaEJhc2ljTWF0ZXJpYWwoZykpLHUucG9zaXRpb24uc2V0KG0seSxffHwwKX1yZXR1cm4gdX19LHtrZXk6XCJwYXJzZVBhcmFtc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9e30scj1YW2UudHlwZSgpXSxvPW4sYT1BcnJheS5pc0FycmF5KG8pLHM9MCxvPWE/bzpvW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgdTtpZihhKXtpZihzPj1vLmxlbmd0aClicmVhazt1PW9bcysrXX1lbHNle2lmKHM9by5uZXh0KCkscy5kb25lKWJyZWFrO3U9cy52YWx1ZX12YXIgbD11LGM9ZVtsXTtpZigoMCxQLmlzUHJlc2VudCkoYykpe2lmKFwidGV4dHVyZVwiPT09bHx8XCJzZXJ2ZXJVcmxcIj09PWwpe3QucHJvcGVydGllc1tlLmZpZWxkXSYmKGMrPXQucHJvcGVydGllc1tlLmZpZWxkXSksZS5zdWZmaXgmJihjKz1lLnN1ZmZpeCksaS5tYXA9Yztjb250aW51ZX1yJiZyW2xdP2lbcltsXV09YzppW2xdPWN9fXJldHVybiBpfX0se2tleTpcImJlZ2luTGF5ZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3pbdC5pZF09e2xheWVyRmVhdHVyZUNvdW50OnQuZmVhdHVyZXMuZ2V0RmVhdHVyZUNvdW50KCksbGF5ZXJGZWF0dXJlSW5kZXg6MH19fSx7a2V5OlwicmVzZXRMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXpbdC5pZF07ZS5hc3luY3x8ZGVsZXRlIHpbdC5pZF19fSx7a2V5OlwicmVtb3ZlTGF5ZXJDb3VudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB6W3QuaWRdfX0se2tleTpcInBhcnNlVGV4dHVyZVwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpLHIsbyl7dmFyIGE9ci53aWR0aCxzPXIuaGVpZ2h0O2lmKG8ubWFwKXt2YXIgdT16W24uaWRdO3V8fCh0LmJlZ2luTGF5ZXJDb3VudChuKSx1PXpbbi5pZF0pLHUuYXN5bmM9ITAsaS5tYXRlcmlhbC5tYXA9bnVsbCxVLmxvYWQoby5tYXAsZnVuY3Rpb24ocil7aWYoZS5tYXBWaWV3JiZlLm1hcFZpZXcuYWN0aXZlQ2FtZXJhKXtpZihyLm1pbkZpbHRlcj1oLkxpbmVhckZpbHRlcixyLm1hZ0ZpbHRlcj1oLkxpbmVhckZpbHRlcixpLm1hdGVyaWFsLm1hcD1yLGkubWF0ZXJpYWwubmVlZHNVcGRhdGU9ITAsaS5zY2FsZS5zZXQoYXx8ci5pbWFnZS53aWR0aCxzfHxyLmltYWdlLmhlaWdodCwxKSxpLm1hdGVyaWFsLm1hdGVyaWFsU2NhbGU9ITAsaS5tYXRlcmlhbC5tYXAuZGlzcG9zZSgpLCF1KXJldHVybiB2b2lkIGUubWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIudXBkYXRlQ29sbGlzaW9uKCk7dC5fYWxsQ29tcGxldGUobixlKX1lbHNlIGkuc2NhbGUuc2V0KDQsNCwwKX0sZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7dC5fYWxsQ29tcGxldGUobixlKX0pfX19LHtrZXk6XCJfYWxsQ29tcGxldGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXpbdC5pZF07biYmKG4ubGF5ZXJGZWF0dXJlSW5kZXgrKyx0LmZlYXR1cmVzLmdldEZlYXR1cmVDb3VudCgpPT09bi5sYXllckZlYXR1cmVJbmRleCYmZS5tYXBWaWV3LmNvbGxpc2lvblNjZW5lTWFuYWdlci51cGRhdGVDb2xsaXNpb24oKSl9fSx7a2V5OlwiX3NldE1vZGVsUGFyYW1cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1lLnNjYWxlLGk9ZS5yb3RhdGUscj1lLnBvc2l0aW9uO24mJnQuc2NhbGUuc2V0KG5bMF0sblsxXSxuWzJdKSxpJiZ0LnJvdGF0aW9uLnNldChpWzBdLGlbMV0saVsyXSksciYmdC5wb3NpdGlvbi5zZXQoclswXSxyWzFdLHJbMl0pfX0se2tleTpcIl9nZW5lcmF0ZVRleHR1cmVQbGFuZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49KDAsUC5pc051bWJlcikodCk/dC8yOi41LGk9KDAsUC5pc051bWJlcikoZSk/ZS8yOi41LHI9bmV3IGguU2hhcGU7ci5tb3ZlVG8oLW4sLWkpLHIubGluZVRvKG4sLWkpLHIubGluZVRvKG4saSksci5saW5lVG8oLW4saSksci5saW5lVG8oLW4sLWkpO3ZhciBvPW5ldyBoLlNoYXBlR2VvbWV0cnkocik7cmV0dXJuIG8uZmFjZVZlcnRleFV2c1swXT1bW25ldyBoLlZlY3RvcjIoMCwwKSxuZXcgaC5WZWN0b3IyKDEsMCksbmV3IGguVmVjdG9yMigxLDEpXSxbbmV3IGguVmVjdG9yMigxLDEpLG5ldyBoLlZlY3RvcjIoMCwxKSxuZXcgaC5WZWN0b3IyKDAsMCldXSxvfX1dKSx0fSgpO2UuZGVmYXVsdD1IfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gYSh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIHModCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLlRocmVlTm9kZUlkPWUuVGhyZWVOb2RlPXZvaWQgMDt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLGw9ZnVuY3Rpb24gdChlLG4saSl7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnQobyxuLGkpfWlmKFwidmFsdWVcImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGE9ci5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKGkpfSxjPW4oMTIpLGg9bigzKSxmPW4oMTcpLGQ9cihmKSxwPW4oMjEpLGc9cihwKSx2PW4oMTcyKSxtPXIodikseT1uKDE3MSksXz1yKHkpLGI9bigzMCkseD1yKGIpLHc9bigxMyksRT1yKHcpLFM9bigyKSxNPWkoUyksQz1uKDk5KSxJPXIoQyksTz1uKDcpLFQ9bigxNjgpLFA9big0KSxBPS0xLEw9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtvKHRoaXMsZSk7dmFyIG49YSh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpO3JldHVybiBuLl9zY2VuZT1uZXcgTS5TY2VuZSxuLl9ncm91cExheWVycz17fSxuLl9ncm91cHM9e30sbi5fbWVzaE1hcHBpbmc9e30sbi5fc2NlbmVBbmltYXRpb25NYW5hZ2VyPW5ldyBULlNjZW5lQW5pbWF0aW9uTWFuYWdlcixuLl9hZGRMYXllclRvR3JvdXA9bi5fcHJlQWRkVG9Hcm91cC5iaW5kKG4pLG4uX3JlbW92ZUxheWVyVG9Hcm91cD1uLl9wcmVSZW1vdmVUb0dyb3VwLmJpbmQobiksbi5fYWRkTGF5ZXI9bi5fYWRkTGF5ZXIuYmluZChuKSxuLl9yZW1vdmVMYXllcj1uLl9yZW1vdmVMYXllci5iaW5kKG4pLG4uX2FkZEZlYXR1cmU9bi5fYWRkU2NlbmVCeUZlYXR1cmUuYmluZChuKSxuLl9hZGRGZWF0dXJlcz1uLl9hZGRGZWF0dXJlcy5iaW5kKG4pLG4uX3VwZGF0ZUZlYXR1cmU9bi5fdXBkYXRlU2NlbmVCeUZlYXR1cmUuYmluZChuKSxuLl9yZW1vdmVGZWF0dXJlPW4uX3JlbW92ZVNjZW5lQnlGZWF0dXJlLmJpbmQobiksbi5fb25TY2VuZUNoYW5nZT1uLl9wYXJzZVNjZW5lQ2hhbmdlLmJpbmQobiksbi5fb25HZXRBQUJCPW4uX29uR2V0QUFCQi5iaW5kKG4pLG59cmV0dXJuIHMoZSx0KSx1KGUsW3trZXk6XCJfYWRkTGF5ZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGUgaW5zdGFuY2VvZiB4LmRlZmF1bHQ/KGUub24oXCJhZGRUb0dyb3VwXCIsdGhpcy5fYWRkTGF5ZXJUb0dyb3VwKSxlLm9uKFwicmVtb3ZlVG9Hcm91cFwiLHRoaXMuX3JlbW92ZUxheWVyVG9Hcm91cCksdm9pZCBlLmZvcmVhY2goZnVuY3Rpb24odCxpKXtuLl9wcmVBZGRUb0dyb3VwKGUsaSl9KSk6dm9pZCB0aGlzLmFkZExheWVyKGUpfX0se2tleTpcIl9yZW1vdmVMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztyZXR1cm4gZSBpbnN0YW5jZW9mIHguZGVmYXVsdD8oZS5vZmYoXCJhZGRUb0dyb3VwXCIsdGhpcy5fYWRkTGF5ZXJUb0dyb3VwKSxlLm9mZihcInJlbW92ZVRvR3JvdXBcIix0aGlzLl9yZW1vdmVMYXllclRvR3JvdXApLHZvaWQgZS5mb3JlYWNoKGZ1bmN0aW9uKHQsaSl7bi5fcHJlUmVtb3ZlVG9Hcm91cChlLGkpfSkpOnZvaWQgdGhpcy5yZW1vdmVMYXllcihlKX19LHtrZXk6XCJfb25HZXRBQUJCXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2ZpbmRNZXNoKHQsZSk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiVGhyZWVOb2RlI19vbkdldEFBQkI6IE1lc2ggbm90IGZvdW5kXCIpO3ZhciByPShuZXcgTS5Cb3gzKS5zZXRGcm9tT2JqZWN0KGkpLG89ci5taW4sYT1yLm1heDtuLnB1c2gobmV3IFAuZ2VvbS5Db29yZGluYXRlKG8ueCxvLnksby56KSxuZXcgUC5nZW9tLkNvb3JkaW5hdGUoYS54LGEueSxhLnopKX19LHtrZXk6XCJvbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwVmlldy5lbmdpbmU7aWYobChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJvbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSx0aGlzLl9tZXJnZU5vZGU9bmV3IF8uZGVmYXVsdCh0KSx0aGlzLl90YXJnZXRSZW5kZXJlcj1uLmdldFJlbmRlcmVyKHQubWFwVmlldyksdGhpcy5fc2NlbmVNYW5hZ2VyLm1hcFZpZXcub24oXCJhZGRMYXllclwiLHRoaXMuX2FkZExheWVyKSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vbihcInJlbW92ZUxheWVyXCIsdGhpcy5fcmVtb3ZlTGF5ZXIpLHRoaXMuX3NjZW5lTWFuYWdlci5vbihcIm9uU2NlbmVDaGFuZ2VcIix0aGlzLl9vblNjZW5lQ2hhbmdlKSx0aGlzLl9zY2VuZU1hbmFnZXIub24oXCJvbkdldEFBQkJcIix0aGlzLl9vbkdldEFBQkIpLGMuaXNEZXYpe3ZhciBpPXQubWFwVmlldy5jb250YWluZXI7dGhpcy5fc3RhdHM9bmV3IEkuZGVmYXVsdCxPLkRPTVV0aWxzLmFkZENsYXNzKHRoaXMuX3N0YXRzLmRvbSxcIm5nci1zdGF0c1wiKSxpLmFwcGVuZENoaWxkKHRoaXMuX3N0YXRzLmRvbSl9fX0se2tleTpcIm9uUmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbWVyZ2VOb2RlLmRlc3Ryb3koKSx0aGlzLl9tZXJnZU5vZGU9bnVsbCx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vZmYoXCJhZGRMYXllclwiLHRoaXMuX2FkZExheWVyKSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5vZmYoXCJyZW1vdmVMYXllclwiLHRoaXMuX3JlbW92ZUxheWVyKSx0aGlzLl9zY2VuZU1hbmFnZXIub2ZmKFwib25TY2VuZUNoYW5nZVwiLHRoaXMuX29uU2NlbmVDaGFuZ2UpLHRoaXMuX3NjZW5lTWFuYWdlci5vZmYoXCJvbkdldEFBQkJcIix0aGlzLl9vbkdldEFBQkIpLGwoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwib25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCl9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIGQuZGVmYXVsdCYmbChlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhZGRcIix0aGlzKS5jYWxsKHRoaXMsdCksdCBpbnN0YW5jZW9mIGcuZGVmYXVsdCYmKHRoaXMuX2NhbWVyYT10LmNhbWVyYSx0aGlzLl9zY2VuZS5jaGlsZHJlbi51bnNoaWZ0KHRoaXMuX2NhbWVyYSkpfX0se2tleTpcImFkZExheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5oYXNMYXllcih0KXx8KHQub24oXCJhZGRGZWF0dXJlXCIsdGhpcy5fYWRkRmVhdHVyZSksdC5vbihcImFkZEZlYXR1cmVzXCIsdGhpcy5fYWRkRmVhdHVyZXMpLHQub24oXCJ1cGRhdGVGZWF0dXJlXCIsdGhpcy5fdXBkYXRlRmVhdHVyZSksdC5vbihcInJlbW92ZUZlYXR1cmVcIix0aGlzLl9yZW1vdmVGZWF0dXJlKSxtLmRlZmF1bHQuYmVnaW5MYXllckNvdW50KHQpLHQudmlzaXQoZnVuY3Rpb24obixpKXtlLl9hZGRTY2VuZUJ5RmVhdHVyZSh0LG4saSwhMSl9KSxtLmRlZmF1bHQucmVzZXRMYXllcih0KSx0aGlzLl9tZXJnZU5vZGUmJnRoaXMuX21lcmdlTm9kZS51cGRhdGUodC5pZCkpLHRoaXN9fSx7a2V5OlwiX3ByZUFkZFRvR3JvdXBcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2dyb3Vwc1t0LmlkXSxpPXRoaXMuX2dyb3VwTGF5ZXJzW3QuaWRdO258fChuPW5ldyBNLkdyb3VwLHRoaXMuX2dyb3Vwc1t0LmlkXT1uLHQuaGVpZ2h0JiZuLnBvc2l0aW9uLnNldFoodC5oZWlnaHQpLHRoaXMuX3NjZW5lLmFkZChuKSksaXx8KGk9W10sdGhpcy5fZ3JvdXBMYXllcnNbdC5pZF09aSksaS5wdXNoKGUuaWQpLHRoaXMuYWRkTGF5ZXIoZSl9fSx7a2V5OlwiX3ByZVJlbW92ZVRvR3JvdXBcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2dyb3Vwc1t0LmlkXTtpZihuKXt2YXIgaT10aGlzLl9ncm91cExheWVyc1t0LmlkXSxyPWkuaW5kZXhPZihlLmlkKTtyIT09LTEmJmkuc3BsaWNlKHIsMSksMD09PWkubGVuZ3RoJiYodGhpcy5fc2NlbmUucmVtb3ZlKG4pLGRlbGV0ZSB0aGlzLl9ncm91cHNbdC5pZF0sZGVsZXRlIHRoaXMuX2dyb3VwTGF5ZXJzW3QuaWRdKSx0aGlzLnJlbW92ZUxheWVyKGUpfX19LHtrZXk6XCJyZW1vdmVMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5oYXNMYXllcih0KSl7dmFyIG49dGhpcy5fZ3JvdXBzW3QuaWRdO3Qub2ZmKFwiYWRkRmVhdHVyZXNcIix0aGlzLl9hZGRGZWF0dXJlcyksdC5vZmYoXCJhZGRGZWF0dXJlXCIsdGhpcy5fYWRkRmVhdHVyZSksdC5vZmYoXCJ1cGRhdGVGZWF0dXJlXCIsdGhpcy5fdXBkYXRlRmVhdHVyZSksdC5vZmYoXCJyZW1vdmVGZWF0dXJlXCIsdGhpcy5fcmVtb3ZlRmVhdHVyZSksbS5kZWZhdWx0LnJlbW92ZUxheWVyQ291bnQodCksbiYmbi5wYXJlbnQmJm4ucGFyZW50LnJlbW92ZShuKSx0aGlzLl9tZXJnZU5vZGUmJnRoaXMuX21lcmdlTm9kZS5oYXNMYXllcih0LmlkKSYmdGhpcy5fbWVyZ2VOb2RlLnJlbW92ZUJ5TGF5ZXIodCx0LmlkKSx0LnZpc2l0KGZ1bmN0aW9uKG4pe2UuX3JlbW92ZVNjZW5lQnlGZWF0dXJlKHQsbiwhMSl9KSx0aGlzLl9tZXJnZU1hbmdlciYmdGhpcy5fbWVyZ2VNYW5nZXIudXBkYXRlQWxsKCksZGVsZXRlIHRoaXMuX2dyb3Vwc1t0LmlkXX1yZXR1cm4gdGhpc319LHtrZXk6XCJoYXNMYXllclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKHQgaW4gdGhpcy5fZ3JvdXBzfHx0LmlkIGluIHRoaXMuX2dyb3Vwcyl9fSx7a2V5OlwicmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXtsKGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInJlbmRlclwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fdGFyZ2V0UmVuZGVyZXImJnRoaXMuX2NhbWVyYSYmKHRoaXMuX3RhcmdldFJlbmRlcmVyLmF1dG9DbGVhcnx8dGhpcy5fdGFyZ2V0UmVuZGVyZXIuY2xlYXIoKSx0aGlzLl90YXJnZXRSZW5kZXJlci5yZW5kZXIodGhpcy5fc2NlbmUsdGhpcy5fY2FtZXJhKSxjLmlzRGV2JiZ0aGlzLl9zdGF0cy51cGRhdGUoKSl9fSx7a2V5OlwiX2FkZEZlYXR1cmVzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ZSxpPUFycmF5LmlzQXJyYXkobikscj0wLG49aT9uOm5bU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBvO2lmKGkpe2lmKHI+PW4ubGVuZ3RoKWJyZWFrO289bltyKytdfWVsc2V7aWYocj1uLm5leHQoKSxyLmRvbmUpYnJlYWs7bz1yLnZhbHVlfXZhciBhPW8scz10LnJlbmRlcmVyLmdldFN0eWxlKGEpO3RoaXMuX2FkZFNjZW5lQnlGZWF0dXJlKHQsYSxzLCExKX10aGlzLl9tZXJnZU5vZGUmJnRoaXMuX21lcmdlTm9kZS51cGRhdGUodC5pZCl9fSx7a2V5OlwiX2FkZFNjZW5lQnlGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scj1lLmlkLG89dGhpcy5fbWVzaE1hcHBpbmdbcl0sYT10aGlzLl9ncm91cHNbdC5pZF0scz1udWxsLHU9bnVsbDtpZigoMCxoLmlzQmxhbmspKHIpKXJldHVybiB2b2lkIGNvbnNvbGUud2FybihcImVycm9yIGZlYXR1cmUncyBpZFwiKTtpZigoIW98fCFvW3QuaWRdKSYmKHM9dGhpcy5fZ2V0UGdyb3VwQnlMYXllcih0KSxhfHwoYT1uZXcgTS5Hcm91cCx0aGlzLl9ncm91cHNbdC5pZF09YSx0LmhlaWdodCYmYS5wb3NpdGlvbi5zZXRaKHQuaGVpZ2h0KSxzIT09LTE/dGhpcy5fZ3JvdXBzW3NdLmFkZChhKTp0aGlzLl9zY2VuZS5hZGQoYSkpLHU9bS5kZWZhdWx0LmdlbmVyYXRvcih0aGlzLl9zY2VuZU1hbmFnZXIsdCxlLG4pKSl7dmFyIGw9dS5jaGlsZHJlbi5jb25jYXQoKSxjPXRoaXMuX21lcmdlTm9kZS5tZXJnZShlLG4sdSx0LmlkLHRoaXMuX2dyb3Vwc1t0LmlkXXx8dGhpcy5fc2NlbmUpOzAhPT1jJiZpJiZ0aGlzLl9tZXJnZU5vZGUudXBkYXRlKHQuaWQpLDIhPT1jJiYoYS5hZGQodSksb3x8KG89e30sby5zaXplPTAsdGhpcy5fbWVzaE1hcHBpbmdbcl09byksdGhpcy5fbWVzaE1hcHBpbmdbcl1bdC5pZF09dS5pZCxvLnNpemUrKyksXCJQb2x5Z29uXCI9PT1uLnR5cGUoKSYmbi5jbGlja2FibGUmJigyPT09Yz8odSBpbnN0YW5jZW9mIE0uR3JvdXAmJjAhPT1sLmxlbmd0aCYmbC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3UuYWRkKHQpfSksdGhpcy5fc2NlbmVNYW5hZ2VyLl9vY3RyZWVNYW5hZ2VyLmFkZCh1LHQuaWQscix7bGF5ZXJHcm91cElkOnQucGFyZW50LmlkLHNjZW5lR3JvdXBJZDphLnBhcmVudC5pZH0pKTp0aGlzLl9zY2VuZU1hbmFnZXIuX29jdHJlZU1hbmFnZXIuYWRkKHUsdC5pZCxyKSl9fX0se2tleTpcIl9nZXRQZ3JvdXBCeUxheWVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX2dyb3VwTGF5ZXJzKXt2YXIgbj10aGlzLl9ncm91cExheWVyc1tlXTtpZihuLmluZGV4T2YodC5pZCkhPT0tMSlyZXR1cm4gZX1yZXR1cm4tMX19LHtrZXk6XCJfdXBkYXRlU2NlbmVCeUZlYXR1cmVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9ZS5pZDtpZihpKXt2YXIgcj10aGlzLl9ncm91cHNbdC5pZF0sbz10aGlzLl9tZXNoTWFwcGluZ1tpXTtpZihyJiZvKXt2YXIgYT1vW3QuaWRdLHM9ci5nZXRPYmplY3RCeUlkKGEpLHU9ZS5nZW9tZXRyeTtcIkljb25cIj09PW4udHlwZSgpJiZzLnBvc2l0aW9uLnNldCh1LmdldENvb3JkaW5hdGVzKClbMF0sdS5nZXRDb29yZGluYXRlcygpWzFdLDApfX19fSx7a2V5OlwiX3JlbW92ZVNjZW5lQnlGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10scj1lLmlkLG89dGhpcy5fZ3JvdXBzW3QuaWRdLGE9dGhpcy5fbWVzaE1hcHBpbmdbcl0scz1udWxsO2lmKCEoMCxoLmlzQmxhbmspKHIpKXtpZihvJiZhKXt2YXIgdT1hW3QuaWRdO3M9by5nZXRPYmplY3RCeUlkKHUpLHMmJihvLnJlbW92ZShzKSxzLnByb3h5JiZkZWxldGUgcy5wcm94eSxzJiZzLmdlb21ldHJ5JiZzLmdlb21ldHJ5LmRpc3Bvc2UoKSx0aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5jb2xsaXNpb25TY2VuZU1hbmFnZXIucmVtb3ZlKGUpLGRlbGV0ZSBhW3QuaWRdLGEuc2l6ZS0tLDA9PT1hLnNpemUmJmRlbGV0ZSB0aGlzLl9tZXNoTWFwcGluZ1tyXSl9dGhpcy5fc2NlbmVNYW5hZ2VyLl9vY3RyZWVNYW5hZ2VyLnJlbW92ZUJ5TGF5ZXJBbmRGZWF0dXJlKHQuaWQsciksdGhpcy5fbWVyZ2VOb2RlJiZ0aGlzLl9tZXJnZU5vZGUuaGFzKHIscykmJih0aGlzLl9tZXJnZU5vZGUucmVtb3ZlKHIscyksaSYmdGhpcy5fbWVyZ2VOb2RlLnVwZGF0ZSh0LmlkKSksdGhpcy5fbWVyZ2VNYW5nZXImJnRoaXMuX21lcmdlTWFuZ2VyLnJlbW92ZShlLG4pfX19LHtrZXk6XCJfZmluZE1lc2hcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPSgwLGguaXNTdHJpbmcpKHQpP3Q6dC5pZCxpPXRoaXMuX2dyb3Vwc1tuXSxyPXZvaWQgMDtpZigoMCxoLmlzQmxhbmspKGUpfHwoMCxoLmlzQXJyYXkpKGUpKXJldHVybiBpO2lmKCgwLGguaXNOdW1iZXIpKGUuaWQpKXt2YXIgbz10aGlzLl9tZXNoTWFwcGluZ1tlLmlkXTtpZihvKXt2YXIgYT1vW25dO2kmJmEmJihyPWkuZ2V0T2JqZWN0QnlJZChhKSl9fXJldHVybiByfX0se2tleTpcIl9wYXJzZVNjZW5lQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT12b2lkIDAscj1hcmd1bWVudHMubGVuZ3RoLG89QXJyYXkocj4zP3ItMzowKSxhPTM7YTxyO2ErKylvW2EtM109YXJndW1lbnRzW2FdO3N3aXRjaCh0KXtjYXNlXCJzY2FsZVwiOmk9dGhpcy5fc2V0TWVzaFNjYWxlO2JyZWFrO2Nhc2VcInF1aWNrUG9zaXRpb25cIjppPXRoaXMuX3F1aWNrU2V0TWVzaFBvc2l0aW9uO2JyZWFrO2Nhc2VcInBvc2l0aW9uXCI6aT10aGlzLl9zZXRNZXNoUG9zaXRpb247YnJlYWs7Y2FzZVwicm90YXRpb25cIjppPXRoaXMuX3NldE1lc2hSb3RhdGlvbjticmVhaztjYXNlXCJ2aXNpYmxlXCI6aT10aGlzLl9zZXRNZXNoVmlzaWJsZTticmVhaztjYXNlXCJjb2xvclwiOmk9dGhpcy5fc2V0TWVzaENvbG9yO2JyZWFrO2Nhc2VcImNvbG9yUmVzZXR0aW5nXCI6aT10aGlzLl9zZXRNZXNoQ29sb3I7YnJlYWs7Y2FzZVwiaGlnaGxpZ2h0XCI6aT10aGlzLl9oaWdodGxpZ2h0O2JyZWFrO2Nhc2VcIm9wYWNpdHlcIjppPXRoaXMuX3NldE9wYWNpdHk7YnJlYWs7Y2FzZVwiZGVwdGhUZXN0XCI6aT10aGlzLl9zZXREZXB0aFRlc3Q7YnJlYWs7Y2FzZVwic3R5bGVSZXNldHRpbmdcIjpyZXR1cm4gdGhpcy5fcmVzZXRTdHlsZS5hcHBseSh0aGlzLFtlLG5dLmNvbmNhdChvKSksdGhpc31pZigoMCxoLmlzQXJyYXkpKG4pKWZvcih2YXIgcz1uLHU9QXJyYXkuaXNBcnJheShzKSxsPTAscz11P3M6c1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGM7aWYodSl7aWYobD49cy5sZW5ndGgpYnJlYWs7Yz1zW2wrK119ZWxzZXtpZihsPXMubmV4dCgpLGwuZG9uZSlicmVhaztjPWwudmFsdWV9dmFyIGY9Yzt0aGlzLl9jYWxsTWVzaFZhbHVlLmFwcGx5KHRoaXMsW3QsZSxmLGldLmNvbmNhdChvKSl9ZWxzZSB0aGlzLl9jYWxsTWVzaFZhbHVlLmFwcGx5KHRoaXMsW3QsZSxuLGldLmNvbmNhdChvKSk7cmV0dXJuIHRoaXN9fSx7a2V5OlwiX2NhbGxNZXNoVmFsdWVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHI9dGhpcy5fZmluZE1lc2goZSxuKSxvPWFyZ3VtZW50cy5sZW5ndGgsYT1BcnJheShvPjQ/by00OjApLHM9NDtzPG87cysrKWFbcy00XT1hcmd1bWVudHNbc107XCJjb2xvclJlc2V0dGluZ1wiPT09dCYmKGFbMF09dGhpcy5fZ2V0Q29sb3JCeUZlYXR1cmUoZSxuKSksciYmaS5jYWxsLmFwcGx5KGksW3RoaXMscl0uY29uY2F0KGEpKX19LHtrZXk6XCJfcmVzZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO2lmKHQmJm4paWYoKDAsaC5pc0VtcHR5KShlKSl0LnZpc2l0KGZ1bmN0aW9uKGUpe2kuX3JlbW92ZVNjZW5lQnlGZWF0dXJlKHQsZSwhMSksaS5fYWRkU2NlbmVCeUZlYXR1cmUodCxlLG4pfSk7ZWxzZSBpZihlLmxlbmd0aClmb3IodmFyIHI9ZSxvPUFycmF5LmlzQXJyYXkociksYT0wLHI9bz9yOnJbU3ltYm9sLml0ZXJhdG9yXSgpOzspe3ZhciBzO2lmKG8pe2lmKGE+PXIubGVuZ3RoKWJyZWFrO3M9clthKytdfWVsc2V7aWYoYT1yLm5leHQoKSxhLmRvbmUpYnJlYWs7cz1hLnZhbHVlfXZhciB1PXM7dGhpcy5fcmVtb3ZlU2NlbmVCeUZlYXR1cmUodCx1LCExKSx0aGlzLl9hZGRTY2VuZUJ5RmVhdHVyZSh0LHUsbil9ZWxzZSB0aGlzLl9yZW1vdmVTY2VuZUJ5RmVhdHVyZSh0LGUsITEpLHRoaXMuX2FkZFNjZW5lQnlGZWF0dXJlKHQsZSxuKX19LHtrZXk6XCJfcXVpY2tTZXRNZXNoUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBNLlZlY3RvcjMoZVswXSxlWzFdLGVbMl0pO3JldHVyblwiTWVzaFByb3h5XCI9PT10LnR5cGU/dC5wcm94eVBvc2l0aW9uLmNvcHkobik6dC5wb3NpdGlvbi5jb3B5KG4pLG59fSx7a2V5OlwiX3NldE1lc2hQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fc2NlbmVNYW5hZ2VyLl9vY3RyZWVNYW5hZ2VyLGk9ITE7aWYodGhpcy5fcXVpY2tTZXRNZXNoUG9zaXRpb24odCxlKSx0IGluc3RhbmNlb2YgTS5Hcm91cCl7dmFyIHI9bi52aXJ0dWFsR3JvdXBzW24uZ3JvdXBNYXBwaW5nW3QuaWRdXTtpZihyKXt2YXIgbz1lWzBdLGE9ZVsxXSxzPWVbMl07aT0hMCxcIk1lc2hQcm94eVwiPT09ci50eXBlP3IucHJveHlQb3NpdGlvbi5zZXQobyxhLHMpOnIucG9zaXRpb24uc2V0KG8sYSxzKSxyLnVwZGF0ZU1hdHJpeFdvcmxkKCl9fWVsc2Ugbi5oYXModC5fbGF5ZXJJZCx0Ll9zY2VuZUlkKSYmKGk9ITApO2kmJm4ucmVidWlsZCgpfX0se2tleTpcIl9zZXRNZXNoU2NhbGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe1wiTWVzaFByb3h5XCI9PT10LnR5cGU/dC5wcm94eVNjYWxlLnNldChlWzBdLGVbMV0sZVsyXSk6dC5zY2FsZS5zZXQoZVswXSxlWzFdLGVbMl0pfX0se2tleTpcIl9zZXRNZXNoUm90YXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe1wiTWVzaFByb3h5XCI9PT10LnR5cGU/dC5wcm94eVJvdGF0aW9uLnNldChlWzBdLGVbMV0sZVsyXSk6dC5yb3RhdGlvbi5zZXQoZVswXSxlWzFdLGVbMl0pfX0se2tleTpcIl9zZXRNZXNoVmlzaWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodC52aXNpYmxlPWUsdCBpbnN0YW5jZW9mIE0uR3JvdXApe3ZhciBuPXRoaXMuX3NjZW5lTWFuYWdlci5fb2N0cmVlTWFuYWdlcixpPW4udmlydHVhbEdyb3Vwc1tuLmdyb3VwTWFwcGluZ1t0LmlkXV07aSYmKGkudmlzaWJsZT1lKX19fSx7a2V5OlwiX2dldENvbG9yQnlGZWF0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gbnVsbDt2YXIgbj0oMCxoLmlzU3RyaW5nKSh0KT90aGlzLl9zY2VuZU1hbmFnZXIubWFwVmlldy5nZXRMYXllcih0KTp0LGk9bi5yZW5kZXJlci5nZXRTdHlsZShlKTtyZXR1cm4gaS5jb2xvcn19LHtrZXk6XCJfc2V0TWVzaENvbG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe2lmKHQgaW5zdGFuY2VvZiBNLkdyb3VwKXJldHVybiB0aGlzO3ZhciBpPUUuZGVmYXVsdC5wYXJzZUNvbG9yKGUpO3JldHVybiB0Lm1hdGVyaWFsLm5lZWRzVXBkYXRlPSEwLG4/dGhpcy5fc2NlbmVBbmltYXRpb25NYW5hZ2VyLmdldEFuaW1hdGlvbihcImNvbG9yXCIpLnN0YXJ0KHQsaSxuLmJsaW5rLG4uZHVyYXRpb24sbi5yZXBlYXQpOih0aGlzLl9zY2VuZUFuaW1hdGlvbk1hbmFnZXIuZ2V0QW5pbWF0aW9uKFwiY29sb3JcIikuc3RvcCgpLHQubWF0ZXJpYWwuY29sb3I9KG5ldyBNLkNvbG9yKS5zZXQoaSkpLHRoaXN9fSx7a2V5OlwiX2hpZ2h0bGlnaHRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiBNLkdyb3VwKXJldHVybiB0aGlzO3ZhciBuPSgwLGguaXNOdW1iZXIpKGUpP2U6MS40MTQsaT10Lm1hdGVyaWFsLmNvbG9yLHI9aS5yKm4+MT8xOmkucipuLG89aS5nKm4+MT8xOmkuZypuLGE9aS5iKm4+MT8xOmkuYipuLHM9bmV3IE0uQ29sb3IocixvLGEpO3JldHVybiB0Lm1hdGVyaWFsLmNvbG9yPXMsdC5tYXRlcmlhbC5uZWVkc1VwZGF0ZT0hMCx0aGlzfX0se2tleTpcIl9zZXRPcGFjaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXM7cmV0dXJuIHQgaW5zdGFuY2VvZiBNLkdyb3VwPyh0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7aS5fc2V0T3BhY2l0eSh0LGUsbil9LHRoaXMpLHRoaXMpOih0JiZ0Lm1hdGVyaWFsJiYoMCxoLmlzTnVtYmVyKShlKSYmZT49MCYmZTw9MSYmKHQubWF0ZXJpYWwudHJhbnNwYXJlbnQ9ITAsdC5kZXN0T3BhY2l0eT1lLG4/dGhpcy5fc2NlbmVBbmltYXRpb25NYW5hZ2VyLmdldEFuaW1hdGlvbihcIm9wYWNpdHlcIikuc3RhcnQodCxlLG4uYmxpbmssbi5kdXJhdGlvbixuLnJlcGVhdCk6KHQubWF0ZXJpYWwub3BhY2l0eT1lLDE9PT1lJiYodC5tYXRlcmlhbC50cmFuc3BhcmVudD0hMSkpKSx0aGlzKX19LHtrZXk6XCJfc2V0RGVwdGhUZXN0XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0IGluc3RhbmNlb2YgTS5Hcm91cD8odC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe24uX3NldERlcHRoVGVzdCh0LGUpfSx0aGlzKSx0aGlzKToodCYmdC5tYXRlcmlhbCYmKDAsaC5pc0Jvb2xlYW4pKGUpJiYodC5tYXRlcmlhbC5kZXB0aFRlc3Q9ZSksdGhpcyl9fSx7a2V5OlwicmVuZGVyU2NlbmVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NlbmV9fV0pLGV9KGQuZGVmYXVsdCk7ZS5UaHJlZU5vZGU9TCxlLlRocmVlTm9kZUlkPUF9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1uKDE2OSksbD1pKHUpLGM9bigxNzMpLGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3IodGhpcyxlKTt2YXIgdD1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll90aHJlZU5vZGU9bmV3IGMuVGhyZWVOb2RlKGMuVGhyZWVOb2RlSWQpLHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJnZW5lcmF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90aHJlZU5vZGUuX3NjZW5lTWFuYWdlcnx8KHRoaXMuX3RocmVlTm9kZS5fc2NlbmVNYW5hZ2VyPWUuc2NlbmVNYW5hZ2VyKSx0aGlzLl90aHJlZU5vZGV9fSx7a2V5OlwiZmluZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsfX1dKSxlfShsLmRlZmF1bHQpO2UuZGVmYXVsdD1ofSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGUuZGVmYXVsdD10LGV9ZnVuY3Rpb24gbyh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPW4oMiksdT1yKHMpLGw9bigyMTIpLGM9aShsKSxoPW4oNzEpLGY9aShoKSxkPW4oMTgpLHA9bigyNSksZz1pKHApLHY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5wcmlvcml0eS10LnByaW9yaXR5fSxtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe28odGhpcyx0KSx0aGlzLl9yYnVzaD1udWxsLHRoaXMuX3ByaW9yaXR5UXVldWU9bnVsbCx0aGlzLl9mZWF0dXJlcz17fSx0aGlzLl9jb2xsc2lvbkZlYXR1cmVzPXt9LHRoaXMuX2NvbGxpc2lvbkRldGVjdGlvblNjZW5lcz17fSx0aGlzLl92aXNpYmxlU2NlbmVzPXt9LHRoaXMuX2FuaW1hdG9ycz17fSx0aGlzLl9hbmltYXRpb249ZC5DQVR5cGUuRGVmYXVsdH1yZXR1cm4gYSh0LFt7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLGk9YXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10mJmFyZ3VtZW50c1szXTtpZihlIGluc3RhbmNlb2YgdS5Hcm91cCYmIWUuZ2V0QUFCQil7Zm9yKHZhciByPWUuY2hpbGRyZW4sbz1BcnJheS5pc0FycmF5KHIpLGE9MCxyPW8/cjpyW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgcztpZihvKXtpZihhPj1yLmxlbmd0aClicmVhaztzPXJbYSsrXX1lbHNle2lmKGE9ci5uZXh0KCksYS5kb25lKWJyZWFrO3M9YS52YWx1ZX12YXIgbD1zO3RoaXMuYWRkKHQsbCxuKX1yZXR1cm4gaSYmdGhpcy51cGRhdGVDb2xsaXNpb24oKSx0aGlzfXZhciBjPXRoaXMuX2NvbGxpc2lvbkRldGVjdGlvblNjZW5lc1t0LmlkXTtyZXR1cm4gY3x8KGM9W10sdGhpcy5fY29sbGlzaW9uRGV0ZWN0aW9uU2NlbmVzW3QuaWRdPWMpLHRoaXMuX2ZlYXR1cmVzW3QuaWRdPXQsdGhpcy5fY29sbHNpb25GZWF0dXJlc1t0LmlkXT10LGMucHVzaChlKSxpJiZ0aGlzLnVwZGF0ZUNvbGxpc2lvbigpLHRoaXN9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYoIXQpcmV0dXJuIHRoaXM7aWYodC5mZWF0dXJlcyl7Zm9yKHZhciBuPXQuZmVhdHVyZXMsaT1BcnJheS5pc0FycmF5KG4pLHI9MCxuPWk/bjpuW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgbztpZihpKXtpZihyPj1uLmxlbmd0aClicmVhaztvPW5bcisrXX1lbHNle2lmKHI9bi5uZXh0KCksci5kb25lKWJyZWFrO289ci52YWx1ZX12YXIgYT1vO3RoaXMuaGlkZShhLGUpfXJldHVybiB0aGlzfXZhciBzPXRoaXMuX2NvbGxpc2lvbkRldGVjdGlvblNjZW5lc1t0LmlkXTtpZihzKWZvcih2YXIgdT1zLGw9QXJyYXkuaXNBcnJheSh1KSxjPTAsdT1sP3U6dVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGg7aWYobCl7aWYoYz49dS5sZW5ndGgpYnJlYWs7aD11W2MrK119ZWxzZXtpZihjPXUubmV4dCgpLGMuZG9uZSlicmVhaztoPWMudmFsdWV9dmFyIGY9aDtmJiYoZi5tYWtlQ29sbGlzaW9uKCEwKSxlJiZ0aGlzLnJlbW92ZSh0KSl9cmV0dXJuIHRoaXN9fSx7a2V5OlwicmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzQ29sbGlzaW9uKHQpJiZkZWxldGUgdGhpcy5fY29sbGlzaW9uRGV0ZWN0aW9uU2NlbmVzW3QuaWRdLHRoaXMuaGFzVmlzaWJsZSh0KSYmZGVsZXRlIHRoaXMuX3Zpc2libGVTY2VuZXNbdC5pZF0sZGVsZXRlIHRoaXMuX2ZlYXR1cmVzW3QuaWRdLGRlbGV0ZSB0aGlzLl9jb2xsc2lvbkZlYXR1cmVzW3QuaWRdLHRoaXN9fSx7a2V5Olwic2V0RW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07cmV0dXJuIHRoaXMuaGFzQ29sbGlzaW9uKHQpJiYoZT90aGlzLl9jb2xsc2lvbkZlYXR1cmVzW3QuaWRdPXRoaXMuX2ZlYXR1cmVzW3QuaWRdOmRlbGV0ZSB0aGlzLl9jb2xsc2lvbkZlYXR1cmVzW3QuaWRdLG4mJnRoaXMudXBkYXRlQ29sbGlzaW9uKCkpLHRoaXN9fSx7a2V5Olwic2V0RmVhdHVyZUxheWVyRW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV0saT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO2lmKCEodCBpbnN0YW5jZW9mIGcuZGVmYXVsdCkpdGhyb3cgbmV3IEVycm9yKFwic2V0RmVhdHVyZUxheWVyRW5hYmxlOiBJbnZhbGlkIGZlYXR1cmVMYXllclwiKTtyZXR1cm4gdC52aXNpdChmdW5jdGlvbih0LGkpe2kuY29sbGlzaW9uJiZlLnNldEVuYWJsZSh0LG4pfSksaSYmdGhpcy51cGRhdGVDb2xsaXNpb24oKSx0aGlzfX0se2tleTpcImhhc0NvbGxpc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmdC5pZCBpbiB0aGlzLl9jb2xsaXNpb25EZXRlY3Rpb25TY2VuZXN9fSx7a2V5OlwiaGFzVmlzaWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmdC5pZCBpbiB0aGlzLl92aXNpYmxlU2NlbmVzfX0se2tleTpcImlzRW5hYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmdC5pZCBpbiB0aGlzLl9jb2xsc2lvbkZlYXR1cmVzfX0se2tleTpcIl9BQUJCMlJidXNoQm94XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgQXJyYXkmJjY9PT10Lmxlbmd0aCkpcmV0dXJuIGNvbnNvbGUud2FybihcIkludmFsaWQgQUFCQlwiKSxudWxsO3ZhciBlPXttaW5YOnRbMF0sbWluWTp0WzFdLG1heFg6dFszXSxtYXhZOnRbNF19O3JldHVybiBlfX0se2tleTpcImFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hbmltYXRpb249dCx0aGlzfX0se2tleTpcInVwZGF0ZUNvbGxpc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYWN0aXZlQ2FtZXJhO2lmKHQpe3ZhciBlPXZvaWQgMCxuPXZvaWQgMDt0aGlzLl9jbGVhckFuaW1hdGlvbigpLHQuY2FtZXJhLnVwZGF0ZU1hdHJpeCgpLHQuY2FtZXJhLnVwZGF0ZU1hdHJpeFdvcmxkKCksdGhpcy5fdmlzaWJsZVNjZW5lcz17fSx0aGlzLl9yYnVzaD0oMCxjLmRlZmF1bHQpKCksdGhpcy5fcHJpb3JpdHlRdWV1ZT1uZXcgZi5kZWZhdWx0KHYpO2Zvcih2YXIgaSBpbiB0aGlzLl9jb2xsc2lvbkZlYXR1cmVzKXRoaXMuX3ByaW9yaXR5UXVldWUuZW5xKHRoaXMuX2NvbGxzaW9uRmVhdHVyZXNbaV0pO2Zvcig7dGhpcy5fcHJpb3JpdHlRdWV1ZS5zaXplKCk7KXt2YXIgcj10aGlzLl9wcmlvcml0eVF1ZXVlLmRlcSgpO2U9dGhpcy5fY29sbGlzaW9uRGV0ZWN0aW9uU2NlbmVzW3IuaWRdO2Zvcih2YXIgbz1lLGE9QXJyYXkuaXNBcnJheShvKSxzPTAsbz1hP286b1tTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIHU7aWYoYSl7aWYocz49by5sZW5ndGgpYnJlYWs7dT1vW3MrK119ZWxzZXtpZihzPW8ubmV4dCgpLHMuZG9uZSlicmVhazt1PXMudmFsdWV9dmFyIGw9dTtpZihuPXRoaXMuX0FBQkIyUmJ1c2hCb3gobC5nZXRBQUJCKHQpKSl7dmFyIGg9dGhpcy5fcmJ1c2guc2VhcmNoKG4pLGQ9ITE7aC5sZW5ndGg+MD9kPSEwOih0aGlzLl92aXNpYmxlU2NlbmVzW2wuX3NjZW5lSWRdPWwsdGhpcy5fcmJ1c2guaW5zZXJ0KG4pLGQ9ITEpO3ZhciBwPXRoaXMuX2FuaW1hdGlvbi5oYXNBbmltYXRpb24obCk7aWYocCl7dmFyIGc9dGhpcy5fYW5pbWF0aW9uLm1ha2VDb2xsaXNpb24obCxkKTt0aGlzLl9wb3N0UHJvY2Vzc0FuaW1hdG9yKGwsZyl9ZWxzZSBsLm1ha2VDb2xsaXNpb24oZCxwKX19fXRoaXMuX2FuaW1hdGlvbi5yZXNldCh0aGlzKX1yZXR1cm4gdGhpc319LHtrZXk6XCJfcG9zdFByb2Nlc3NBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztlJiYodGhpcy5fYW5pbWF0b3JzW3QudXVpZF09ZSxlLm9uKFwiY29tcGxldGVcIixmdW5jdGlvbigpe2RlbGV0ZSBuLl9hbmltYXRvcnNbdC51dWlkXX0pLm9uKFwic3RvcFwiLGZ1bmN0aW9uKCl7ZGVsZXRlIG4uX2FuaW1hdG9yc1t0LnV1aWRdfSkpfX0se2tleTpcIl9jbGVhckFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2FuaW1hdG9ycyl7dmFyIGU9dGhpcy5fYW5pbWF0b3JzW3RdO2Uuc3RvcCgpfXRoaXMuX2FuaW1hdG9ycz17fX19LHtrZXk6XCJjbGVhclwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JidXNoPW51bGwsdGhpcy5fcHJpb3JpdHlRdWV1ZT1udWxsLHRoaXMuX2ZlYXR1cmVzPXt9LHRoaXMuX2NvbGxzaW9uRmVhdHVyZXM9e30sdGhpcy5fY29sbGlzaW9uRGV0ZWN0aW9uU2NlbmVzPXt9LHRoaXMuX3Zpc2libGVTY2VuZXM9e30sdGhpcy5fY2xlYXJBbmltYXRpb24oKSx0aGlzfX0se2tleTpcImFjdGl2ZUNhbWVyYVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVDYW1lcmF9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hY3RpdmVDYW1lcmE9dH19XSksdH0oKTtlLmRlZmF1bHQ9bX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuQ0FUeXBlPXZvaWQgMDt2YXIgaT1uKDE4KTtlLkNBVHlwZT1pLkNBVHlwZX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPW4oNSksbz1pKHIpLGE9big3NCkscz0oaShhKSxuZXcgby5kZWZhdWx0KSx1PXtjb21wYXNzOlwiY29tcGFzc1wifSxsPWZ1bmN0aW9uKCl7aWYocy5vcmllbnRhdGlvbkNvbnRyb2wpe3ZhciB0PXMub3JpZW50YXRpb25Db250cm9sLmdldFNjcmVlbkFkanVzdGVkRXVsZXIoKSxlPXQuYWxwaGE7ZSYmcy5lbWl0KHUuY29tcGFzcyx7dHlwZTp1LmNvbXBhc3MsYWxwaGE6ZX0pfX0sYz1mdW5jdGlvbih0LGUpe3ZhciBuPXMubGlzdGVuZXJzKGUpO3N3aXRjaChlKXtjYXNlIHUuY29tcGFzczppZih3aW5kb3cuRlVMTFRJTFQmJndpbmRvdy5GVUxMVElMVC5nZXREZXZpY2VPcmllbnRhdGlvbiYmMD09PW4ubGVuZ3RoKXt2YXIgaT17dHlwZTpcIndvcmxkXCJ9O3dpbmRvdy5GVUxMVElMVC5nZXREZXZpY2VPcmllbnRhdGlvbihpKS50aGVuKGZ1bmN0aW9uKHQpe3Mub3JpZW50YXRpb25Db250cm9sPXQscy5vcmllbnRhdGlvbkNvbnRyb2wubGlzdGVuKGwpfSl9YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoZStcIiBpcyBhIGludmFsaWQgdmFsdWUhXCIpfXMub24oZSx0KX0saD1mdW5jdGlvbih0LGUpe3ZhciBuPXMubGlzdGVuZXJzKGUpO3N3aXRjaChzLm9mZihlLHQpLGUpe2Nhc2UgdS5jb21wYXNzOjA9PT1uLmxlbmd0aCYmd2luZG93LkZVTExUSUxUJiZ3aW5kb3cuRlVMTFRJTFQuZ2V0RGV2aWNlT3JpZW50YXRpb24mJnMub3JpZW50YXRpb25Db250cm9sJiYocy5vcmllbnRhdGlvbkNvbnRyb2wuc3RvcCgpLGRlbGV0ZSBzLm9yaWVudGF0aW9uQ29udHJvbCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoZStcIiBpcyBhIGludmFsaWQgdmFsdWUhXCIpfX07ZS5kZWZhdWx0PXtzZW5zb3JUeXBlOnUscmVnaXN0ZXJMaXN0ZW5lcjpjLHVucmVnaXN0ZXJMaXN0ZW5lcjpofX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuU2Vuc29yTWFuYWdlcj12b2lkIDA7dmFyIHI9bigxNzcpLG89aShyKTtlLlNlbnNvck1hbmFnZXI9by5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LHUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1uKDEwKSxzPWkoYSksdT17Y2xpY2thYmxlOiEwLHNjYWxlOm51bGwscm90YXRlOm51bGwscGFyYW1zOm51bGwsYXV0b0F0dGFjaDpudWxsLGZpbGVUeXBlOm51bGwsdHlwZTpmdW5jdGlvbigpe3JldHVyblwiTW9kZWxcIn19O09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcInBhdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdGh9LHNldDpmdW5jdGlvbih0KXt2YXIgZT1yLmdldEZpbGVUeXBlKHQpO2UmJjAhPT1lLmxlbmd0aCYmKHRoaXMuZmlsZVR5cGU9ZVswXSksdGhpcy5fcGF0aD10fX0pLHIuZ2V0RmlsZVR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuL1suXS8uZXhlYyh0KT8vW14uXSskLy5leGVjKHQpOm51bGx9LGUuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcigpe28odGhpcyxuZXcgcy5kZWZhdWx0LGMpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPW4oMSksYT1uKDEwKSxzPWkoYSksdT1uKDEzKSxsPWkodSksYz17cmFkaXVzOjEsd2lkdGhTZWdtZW50czo4LGhlaWdodFNlZ21lbnRzOjYsdHlwZTpmdW5jdGlvbigpe3JldHVyblwiU3BoZXJlXCJ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsXCJjb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb2xvcj1sLmRlZmF1bHQucGFyc2VDb2xvcih0KX19KSxlLmRlZmF1bHQ9cn0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUuUG9seWdvbj1lLkxpbmVTdHJpbmc9ZS5MaWdodD1lLkpTT05TdHlsZUdlbmVyYXRvcj1lLkljb249ZS5Bbm5vdGF0aW9uPWUuU3R5bGU9dm9pZCAwO3ZhciByPW4oMTApLG89aShyKSxhPW4oNjIpLHM9aShhKSx1PW4oNjMpLGw9aSh1KSxjPW4oNjQpLGg9aShjKSxmPW4oNjUpLGQ9aShmKSxwPW4oNjYpLGc9aShwKSx2PW4oNjcpLG09aSh2KTtlLlN0eWxlPW8uZGVmYXVsdCxlLkFubm90YXRpb249cy5kZWZhdWx0LGUuSWNvbj1sLmRlZmF1bHQsZS5KU09OU3R5bGVHZW5lcmF0b3I9aC5kZWZhdWx0LGUuTGlnaHQ9ZC5kZWZhdWx0LGUuTGluZVN0cmluZz1nLmRlZmF1bHQsZS5Qb2x5Z29uPW0uZGVmYXVsdH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlLmRlZmF1bHQ9dCxlfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIG8odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhPWZ1bmN0aW9uKCl7XG5mdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxzPW4oOSksdT1yKHMpLGw9bigyKSxjPWkobCksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtvKHRoaXMsdCl9cmV0dXJuIGEodCxudWxsLFt7a2V5OlwiZXhwb3J0XCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPVtdLHI9dC5nZXRMYXllcihlLmZlYXR1cmVzWzBdLnByb3BlcnRpZXMucGxhbmFyX2dyYXBoKS5nZXRMYXllcihcIkFyZWFcIik7cmV0dXJuIGUuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihlKXtpZihuKXtpZihlLnByb3BlcnRpZXMuY2F0ZWdvcnk9PT1uKXt2YXIgbz10LnNjZW5lTWFuYWdlci5nZXQoLTEpLGE9by5fZmluZE1lc2gocixlKTtkZWxldGUgYS5nZW9tZXRyeS5wYXJhbWV0ZXJzLGkucHVzaCh7ZklkOmUuaWQsZ0RhdGE6YS5nZW9tZXRyeS50b0pTT04oKX0pfX1lbHNle3ZhciBzPXQuc2NlbmVNYW5hZ2VyLmdldCgtMSksdT1zLl9maW5kTWVzaChyLGUpO2RlbGV0ZSB1Lmdlb21ldHJ5LnBhcmFtZXRlcnMsaS5wdXNoKHtmSWQ6ZS5pZCxnRGF0YTp1Lmdlb21ldHJ5LnRvSlNPTigpfSl9fSksaX19LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9e30sbj1uZXcgYy5KU09OTG9hZGVyO3JldHVybigwLHUuZGVmYXVsdCkodCx7fSkudGhlbihmdW5jdGlvbih0KXt2YXIgaT1KU09OLnBhcnNlKHQuX2JvZHlUZXh0KTtyZXR1cm4gaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdC5mSWRdPW4ucGFyc2UodC5nRGF0YS5kYXRhKX0pLGV9KX19XSksdH0oKTtlLmRlZmF1bHQ9aH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNSksbD1pKHUpLGM9e2xvdzoyLGhpZ2g6M30saD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTo1O3IodGhpcyxlKTt2YXIgaT1vKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBpLl9tYXBWaWV3PXQsaS5jYWxsVHlwZT1jLmhpZ2gsaS5jYWxsT25lPSExLGkuc3dpdGNoVGhyZXNob2xkPW4saS5fc3dpdGNoVHlwZT1pLl9zd2l0Y2hUeXBlLmJpbmQoaSksdCYmKHQuZ2VzdHVyZU1hbmFnZXIub24oXCJza2V3RW5kXCIsaS5fc3dpdGNoVHlwZSksdC5vbihcImNoYW5nZVBsYW5hckdyYXBoXCIsaS5fc3dpdGNoVHlwZSkpLGl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJfc3dpdGNoVHlwZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwVmlldy5hY3RpdmVDb250cm9sKXt2YXIgdD10aGlzLl9tYXBWaWV3LmFjdGl2ZUNvbnRyb2wuZ2V0U2tldygpO2lmKHRoaXMuY2FsbFR5cGU9PT1jLmhpZ2gmJnQ8dGhpcy5zd2l0Y2hUaHJlc2hvbGQ/KHRoaXMuY2FsbFR5cGU9Yy5sb3csdGhpcy5jYWxsT25lPSEwKTp0aGlzLmNhbGxUeXBlPT09Yy5sb3cmJnQ+dGhpcy5zd2l0Y2hUaHJlc2hvbGQmJih0aGlzLmNhbGxUeXBlPWMuaGlnaCx0aGlzLmNhbGxPbmU9ITApLHRoaXMuY2FsbE9uZSlzd2l0Y2godGhpcy5jYWxsT25lPSExLHRoaXMuY2FsbFR5cGUpe2Nhc2UgYy5sb3c6dGhpcy5lbWl0KFwic3dpdGNoXCIse21vZGU6Yy5sb3d9KTticmVhaztjYXNlIGMuaGlnaDp0aGlzLmVtaXQoXCJzd2l0Y2hcIix7bW9kZTpjLmhpZ2h9KX19fX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX21hcFZpZXcmJih0aGlzLl9tYXBWaWV3Lmdlc3R1cmVNYW5hZ2VyLm9mZihcInNrZXdFbmRcIix0aGlzLl9zd2l0Y2hUeXBlKSx0aGlzLl9tYXBWaWV3Lm9mZihcImNoYW5nZVBsYW5hckdyYXBoXCIsdGhpcy5fc3dpdGNoVHlwZSkpfX0se2tleTpcInN3aXRjaFRocmVzaG9sZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zd2l0Y2hUaHJlc2hvbGR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zd2l0Y2hUaHJlc2hvbGQ9dH19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9aH0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oNSksbD1pKHUpLGM9KG4oMTUpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSk7dmFyIHQ9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZ2VzdHVyZXM9e30sdC5fZXZlbnRzPXt9LHQuX3BsYXRmb3JtPXQucGxhdGZvcm0oKSx0fXJldHVybiBhKGUsdCkscyhlLFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX21hcFZpZXc9dH19LHtrZXk6XCJhZGRHZXN0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlKCksbj10LnZhbGlkUGxhdGZvcm0oKTtpZighdGhpcy5oYXNHZXN0dXJlKHQpJiZuLmluZGV4T2YodGhpcy5fcGxhdGZvcm0pPi0xKXt0aGlzLl9nZXN0dXJlc1tlXT10O3ZhciBpPXQucHJvdmlkZXJFdmVudCgpO2kmJih0aGlzLl9ldmVudHNbZV09aSksdC5vbkFkZCh0aGlzKX19fSx7a2V5OlwicmVtb3ZlR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSgpO2lmKHRoaXMuaGFzR2VzdHVyZSh0KSl7ZGVsZXRlIHRoaXMuX2dlc3R1cmVzW2VdO2Zvcih2YXIgbj10aGlzLl9ldmVudHNbZV0saT1uLHI9QXJyYXkuaXNBcnJheShpKSxvPTAsaT1yP2k6aVtTeW1ib2wuaXRlcmF0b3JdKCk7Oyl7dmFyIGE7aWYocil7aWYobz49aS5sZW5ndGgpYnJlYWs7YT1pW28rK119ZWxzZXtpZihvPWkubmV4dCgpLG8uZG9uZSlicmVhazthPW8udmFsdWV9Zm9yKHZhciBzPWEsdT10aGlzLmxpc3RlbmVycyhzKSxsPXUsYz1BcnJheS5pc0FycmF5KGwpLGg9MCxsPWM/bDpsW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgZjtpZihjKXtpZihoPj1sLmxlbmd0aClicmVhaztmPWxbaCsrXX1lbHNle2lmKGg9bC5uZXh0KCksaC5kb25lKWJyZWFrO2Y9aC52YWx1ZX12YXIgZD1mO3RoaXMub2ZmKHMsZCl9fW4mJmRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdC5vblJlbW92ZSh0aGlzKX19fSx7a2V5OlwiaGFzR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmdC50eXBlKClpbiB0aGlzLl9nZXN0dXJlc319LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fZ2VzdHVyZXMpdGhpcy5yZW1vdmVHZXN0dXJlKHRoaXMuX2dlc3R1cmVzW3RdKTt0aGlzLl9nZXN0dXJlPVtdLHRoaXMuX2V2ZW50cz1bXX19LHtrZXk6XCJtYXBWaWV3XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcFZpZXd9fV0pLGV9KGwuZGVmYXVsdCkpO2UuZGVmYXVsdD1jfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gbyh0LGUpe2lmKCF0KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtyZXR1cm4hZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/dDplfWZ1bmN0aW9uIGEodCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHU9ZnVuY3Rpb24gdChlLG4saSl7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLG4pO2lmKHZvaWQgMD09PXIpe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOnQobyxuLGkpfWlmKFwidmFsdWVcImluIHIpcmV0dXJuIHIudmFsdWU7dmFyIGE9ci5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKGkpfSxsPW4oNzApLGM9aShsKSxoPW4oMTg4KSxmPWkoaCksZD1uKDIwNykscD1pKGQpLGc9bigxNSksdj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJvbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3UoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwib25BZGRcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fZXZlbnRNYW5hZ2VyPW5ldyBwLmRlZmF1bHQuTWFuYWdlcih0Lm1hcFZpZXcudGFyZ2V0RG9tKSx0aGlzLl9ldmVudE1hbmFnZXIuYWRkKG5ldyBwLmRlZmF1bHQuVGFwKHtldmVudDpcImRvdWJsZXRhcFwiLHRhcHM6Mn0pKSx0aGlzLl9ldmVudE1hbmFnZXIuYWRkKG5ldyBwLmRlZmF1bHQuVGFwKHtldmVudDpcInNpbmdsZXRhcFwifSkpLHRoaXMuX2V2ZW50TWFuYWdlci5nZXQoXCJkb3VibGV0YXBcIikucmVjb2duaXplV2l0aChcInNpbmdsZXRhcFwiKSx0aGlzLl9ldmVudE1hbmFnZXIuZ2V0KFwic2luZ2xldGFwXCIpLnJlcXVpcmVGYWlsdXJlKFwiZG91YmxldGFwXCIpLHRoaXMuX2V2ZW50TWFuYWdlci5vbihcInNpbmdsZXRhcFwiLGZ1bmN0aW9uKGUpe3ZhciBuPW5ldyBmLmRlZmF1bHQ7bi5jYXN0KGUpLG4udHlwZT1cInNpbmdsZVRhcFwiLHQuZW1pdChcInNpbmdsZVRhcFwiLG4pLHQuZW1pdChcInRhcFwiLG4pfSksdGhpcy5fZXZlbnRNYW5hZ2VyLm9uKFwiZG91YmxldGFwXCIsZnVuY3Rpb24oZSl7dmFyIG49bmV3IGYuZGVmYXVsdDtuLmNhc3QoZSksbi50eXBlPVwiZG91YmxlVGFwXCIsdC5lbWl0KFwiZG91YmxlVGFwXCIsbil9KSx0aGlzLl9ldmVudE1hbmFnZXIuYWRkKG5ldyBwLmRlZmF1bHQuUHJlc3Moe2V2ZW50OlwicHJlc3NcIn0pKSx0aGlzLl9ldmVudE1hbmFnZXIub24oXCJwcmVzc1wiLGZ1bmN0aW9uKGUpe3ZhciBuPW5ldyBmLmRlZmF1bHQ7bi5jYXN0KGUpLG4udHlwZT1cImxvbmdUYXBcIix0LmVtaXQoXCJsb25nVGFwXCIsbil9KTt2YXIgbj1uZXcgZi5kZWZhdWx0O3RoaXMuX2V2ZW50TWFuYWdlci5hZGQobmV3IHAuZGVmYXVsdC5QYW4pLHRoaXMuX2V2ZW50TWFuYWdlci5vbihcInBhbnN0YXJ0IHBhbm1vdmUgcGFuZW5kIHBpbmNoaW4gcGluY2hvdXRcIixmdW5jdGlvbihlKXtzd2l0Y2gobi5jYXN0KGUpLGUudHlwZSl7Y2FzZVwicGFuc3RhcnRcIjpuLnR5cGU9XCJtb3ZlU3RhcnRcIix0LmVtaXQoXCJtb3ZlU3RhcnRcIixuKTticmVhaztjYXNlXCJwYW5lbmRcIjpuLnR5cGU9XCJtb3ZlRW5kXCIsdC5lbWl0KFwibW92ZUVuZFwiLG4pO2JyZWFrO2Nhc2VcInBhbm1vdmVcIjpuLnR5cGU9XCJtb3ZlXCIsdC5lbWl0KFwibW92ZVwiLG4pfX0pO3ZhciBpPTAscj0wLG89bmV3IGYuZGVmYXVsdDt0aGlzLl9ldmVudE1hbmFnZXIuYWRkKG5ldyBwLmRlZmF1bHQuUGFuKHtldmVudDpcInNrZXdcIixwb2ludGVyczoyLGRpcmVjdGlvbjpwLmRlZmF1bHQuRElSRUNUSU9OX0FMTH0pKSx0aGlzLl9ldmVudE1hbmFnZXIub24oXCJza2V3c3RhcnQgc2tld3VwIHNrZXdkb3duIHNrZXdlbmRcIixmdW5jdGlvbihlKXtzd2l0Y2goby5jYXN0KGUpLGNvbnNvbGUubG9nKFwiaGFtbWVyOlwiK2UudHlwZSksZS50eXBlKXtjYXNlXCJza2V3c3RhcnRcIjpvLnR5cGU9XCJza2V3U3RhcnRcIix0LmVtaXQoXCJza2V3U3RhcnRcIixvKTticmVhaztjYXNlXCJza2V3ZW5kXCI6aT0wLG8udHlwZT1cInNrZXdFbmRcIix0LmVtaXQoXCJza2V3RW5kXCIsbyk7YnJlYWs7Y2FzZVwic2tld3VwXCI6by50eXBlPVwic2tld1VwXCIsdC5lbWl0KFwic2tld1VwXCIsbyk7YnJlYWs7Y2FzZVwic2tld2Rvd25cIjpvLnR5cGU9XCJza2V3RG93blwiLHQuZW1pdChcInNrZXdEb3duXCIsbyl9fSksdGhpcy5fZXZlbnRNYW5hZ2VyLmdldChcInBhblwiKS5yZWNvZ25pemVXaXRoKHRoaXMuX2V2ZW50TWFuYWdlci5nZXQoXCJza2V3XCIpKSx0aGlzLl9ldmVudE1hbmFnZXIuZ2V0KFwic2tld1wiKS5yZXF1aXJlRmFpbHVyZSh0aGlzLl9ldmVudE1hbmFnZXIuZ2V0KFwicGFuXCIpKTt2YXIgYT1uZXcgcC5kZWZhdWx0LlBpbmNoKHt0aHJlc2hvbGQ6MH0pLHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnMoZSk+OCYmTWF0aC5hYnMoZSk8MzUyfHx0LnNjYWxlPjEuMTV8fHQuc2NhbGU8Ljg1fSxsPW5ldyBmLmRlZmF1bHQsYz0wLGg9MDt0aGlzLl9ldmVudE1hbmFnZXIuYWRkKGEpLHRoaXMuX2V2ZW50TWFuYWdlci5vbihcInBpbmNoc3RhcnQgcGluY2htb3ZlIHBpbmNoZW5kXCIsZnVuY3Rpb24oZSl7c3dpdGNoKGwuY2FzdChlKSxjb25zb2xlLmxvZyhcImhhbW1lcjpcIitlLnR5cGUpLGUudHlwZSl7Y2FzZVwicGluY2hzdGFydFwiOmM9ZS5yb3RhdGlvbixoPTA7YnJlYWs7Y2FzZVwicGluY2hlbmRcIjpsLnR5cGU9XCJ6b29tRW5kXCIsdC5lbWl0KFwiem9vbUVuZFwiLGwpLGwudHlwZT1cInJvdGF0ZUVuZFwiLHQuZW1pdChcInJvdGF0ZUVuZFwiLGwpLGk9MCxyPTA7YnJlYWs7Y2FzZVwicGluY2htb3ZlXCI6dmFyIG49TWF0aC5hYnMoZS5yb3RhdGlvbi1jKTtyKys8NT9oKz1uOjY9PT1yPyhyKyssbC50eXBlPVwiem9vbVN0YXJ0XCIsdC5lbWl0KFwiem9vbVN0YXJ0XCIsbCksbC50eXBlPVwicm90YXRlU3RhcnRcIix0LmVtaXQoXCJyb3RhdGVTdGFydFwiLGwpLGgvPXIsaT0wPT09aSYmcyhlLGgpPzE6Mik6KGwudHlwZT1cInpvb21cIix0LmVtaXQoXCJ6b29tXCIsbCksbC50eXBlPVwicm90YXRlXCIsdC5lbWl0KFwicm90YXRlXCIsbCkpfX0pLHRoaXMuX2V2ZW50TWFuYWdlci5nZXQoXCJwaW5jaFwiKS5yZWNvZ25pemVXaXRoKHRoaXMuX2V2ZW50TWFuYWdlci5nZXQoXCJza2V3XCIpKX19LHtrZXk6XCJvblJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3UoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwib25SZW1vdmVcIix0aGlzKS5jYWxsKHRoaXMsdCksdGhpcy5fZXZlbnRNYW5hZ2VyLmRlc3Ryb3koKX19LHtrZXk6XCJwcm92aWRlckV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXCJzaW5nbGVUYXBcIixcImRvdWJsZVRhcFwiLFwibG9uZ1RhcFwiLFwibW92ZVN0YXJ0XCIsXCJtb3ZlRW5kXCIsXCJtb3ZlXCIsXCJza2V3U3RhcnRcIixcInNrZXdFbmRcIixcInNrZXdVcFwiLFwic2tld0Rvd25cIixcInpvb21TdGFydFwiLFwiem9vbUVuZFwiLFwiem9vbVwiLFwicm90YXRlU3RhcnRcIixcInJvdGF0ZUVuZFwiLFwicm90YXRlXCJdfX0se2tleTpcInR5cGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVyblwiaGFtbWVyXCJ9fSx7a2V5OlwidmFsaWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW2cuUGxhdGZvcm0uaU9TLGcuUGxhdGZvcm0uQW5kcm9pZCxnLlBsYXRmb3JtLkJsYWNrQmVycnksZy5QbGF0Zm9ybS5vdGhlcixnLlBsYXRmb3JtLlBDXX19XSxbe2tleTpcImdldFRvdWNoRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7cmV0dXJuIDI9PT10LnBvaW50ZXJzLmxlbmd0aCYmKGU9dC5wb2ludGVycyksMj09PXQuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCYmKGU9dC5jaGFuZ2VkUG9pbnRlcnMpLGV9fV0pLGV9KGMuZGVmYXVsdCk7ZS5kZWZhdWx0PXZ9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1mdW5jdGlvbiBvKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9ZnVuY3Rpb24gYSh0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksdT1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09cil7dmFyIG89T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09bz92b2lkIDA6dChvLG4saSl9aWYoXCJ2YWx1ZVwiaW4gcilyZXR1cm4gci52YWx1ZTt2YXIgYT1yLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGw9big3MCksYz1pKGwpLGg9bigxODkpLGY9aShoKSxkPW4oMzUpLHA9aShkKSxnPW4oMzQpLHY9aShnKSxtPW4oMTIpLHk9bigxNSksXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHIodGhpcyxlKSxvKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJvbkFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7aWYodShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJvbkFkZFwiLHRoaXMpLmNhbGwodGhpcyx0KSwhbS50b3VjaEVtdWxhdG9yKXt2YXIgaT10Lm1hcFZpZXcudGFyZ2V0RG9tO3RoaXMuX2NvbnRleHRNZW51PWZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKX0saS5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIix0aGlzLl9jb250ZXh0TWVudSwhMSk7dmFyIHI9bmV3IGYuZGVmYXVsdCxvPXZvaWQgMDt0aGlzLl9tb3VzZVdoZWVsPWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLHIuY2FzdChlKSxvfHwoci5zY2FsZT0xLHIudHlwZT1cInpvb21TdGFydFwiLHQuZW1pdChcInpvb21TdGFydFwiLHIpKSxjbGVhclRpbWVvdXQobyksbz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bz1udWxsLHIudHlwZT1cInpvb21FbmRcIix0LmVtaXQoXCJ6b29tRW5kXCIscil9LDI1MCksbyYmKHIudHlwZT1cInpvb21cIix0LmVtaXQoXCJ6b29tXCIscikpfSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsdGhpcy5fbW91c2VXaGVlbCwhMSksaS5hZGRFdmVudExpc3RlbmVyKFwiTW96TW91c2VQaXhlbFNjcm9sbFwiLHRoaXMuX21vdXNlV2hlZWwsITEpO3ZhciBhPTAscz0wLGw9bmV3IHAuZGVmYXVsdCxjPXtjbGllbnRYOjAsY2xpZW50WTowfSxoPWZ1bmN0aW9uKHQsZSl7dmFyIG49W10saT1uZXcgdi5kZWZhdWx0O2kuY2xpZW50WD1lLmNsaWVudFgsaS5jbGllbnRZPWUuY2xpZW50WSxpLnBhZ2VYPWUucGFnZVgsaS5wYWdlWT1lLnBhZ2VZLGkuc2NyZWVuWD1lLnNjcmVlblgsaS5zY3JlZW5ZPWUuc2NyZWVuWSxpLmRldGFpbD1lLmRldGFpbCxuLnB1c2goaSksdC50b3VjaGVzPW4sdC50YXJnZXQ9ZS50YXJnZXQ7dmFyIHI9ZS5jbGllbnRYLWMuY2xpZW50WDtyPjA/KHQucm90YXRlLT1yLHQuc2NhbGU9MCk6KHQucm90YXRlLT1yLHQuc2NhbGU9MCksYy5jbGllbnRYPWUuY2xpZW50WCxjLmNsaWVudFk9ZS5jbGllbnRZfTt0aGlzLl9tb3VzZURvd249ZnVuY3Rpb24oZSl7Mj09PWUuYnV0dG9uJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGwucm90YXRlPTAsbC5zY2FsZT0xLGMuY2xpZW50WD1lLmNsaWVudFgsYy5jbGllbnRZPWUuY2xpZW50WSxoKGwsZSksaS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbi5fbW91c2VNb3ZlLCExKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsbi5fbW91c2VVcCwhMSksbC50eXBlPVwicm90YXRlU3RhcnRcIix0LmVtaXQoXCJyb3RhdGVTdGFydFwiLGwpLGwudHlwZT1cInNrZXdTdGFydFwiLHQuZW1pdChcInNrZXdTdGFydFwiLGwpLGE9ZS5jbGllbnRYLHM9ZS5jbGllbnRZKX0sdGhpcy5fbW91c2VNb3ZlPWZ1bmN0aW9uKGUpe2gobCxlKSxhPWUuY2xpZW50WC1hLHM9ZS5jbGllbnRZLXMsbC50eXBlPVwicm90YXRlXCIsdC5lbWl0KFwicm90YXRlXCIsbCkscz4wPyhsLnR5cGU9XCJza2V3RG93blwiLHQuZW1pdChcInNrZXdEb3duXCIsbCkpOihsLnR5cGU9XCJza2V3VXBcIix0LmVtaXQoXCJza2V3VXBcIixsKSksYT1lLmNsaWVudFgscz1lLmNsaWVudFl9LHRoaXMuX21vdXNlVXA9ZnVuY3Rpb24oZSl7aChsLGUpLGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLG4uX21vdXNlTW92ZSwhMSksaS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLG4uX21vdXNlVXAsITEpLGwudHlwZT1cInJvdGF0ZUVuZFwiLHQuZW1pdChcInJvdGF0ZUVuZFwiLGwpLGwudHlwZT1cInNrZXdFbmRcIix0LmVtaXQoXCJza2V3RW5kXCIsbCl9LGkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMuX21vdXNlRG93biwhMSl9fX0se2tleTpcIm9uUmVtb3ZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodShlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJvblJlbW92ZVwiLHRoaXMpLmNhbGwodGhpcyx0KSwhbS50b3VjaEVtdWxhdG9yKXt2YXIgbj10Lm1hcFZpZXcudGFyZ2V0RG9tO24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsdGhpcy5fY29udGV4dE1lbnUsITEpLG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIix0aGlzLl9tb3VzZVdoZWVsLCExKSxuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCIsdGhpcy5fbW91c2VXaGVlbCwhMSksbi5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5fbW91c2VEb3duLCExKX19fSx7a2V5OlwicHJvdmlkZXJFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW1wic2tld1N0YXJ0XCIsXCJza2V3RW5kXCIsXCJza2V3VXBcIixcInNrZXdEb3duXCIsXCJ6b29tU3RhcnRcIixcInpvb21FbmRcIixcInpvb21cIixcInJvdGF0ZVN0YXJ0XCIsXCJyb3RhdGVFbmRcIixcInJvdGF0ZVwiXX19LHtrZXk6XCJ0eXBlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5cIm1vdXNlXCJ9fSx7a2V5OlwidmFsaWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW3kuUGxhdGZvcm0uUENdfX1dKSxlfShjLmRlZmF1bHQpO2UuZGVmYXVsdD1ffSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5HZW9tZXRyeVRyYW5zcG9ydGVyPWUuU3dpdGNoRGlzcGF0Y2hlcj1lLkNvb3JkaW5hdGVTeXN0ZW09ZS5NYXBWaWV3PXZvaWQgMDt2YXIgcj1uKDE5KSxvPWkociksYT1uKDY4KSxzPWkoYSksdT1uKDE4MyksbD1pKHUpLGM9bigxODIpLGg9aShjKTtlLk1hcFZpZXc9by5kZWZhdWx0LGUuQ29vcmRpbmF0ZVN5c3RlbT1zLmRlZmF1bHQsZS5Td2l0Y2hEaXNwYXRjaGVyPWwuZGVmYXVsdCxlLkdlb21ldHJ5VHJhbnNwb3J0ZXI9aC5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gcih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxhPW4oMzQpLHM9aShhKSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3IodGhpcyx0KX1yZXR1cm4gbyh0LFt7a2V5OlwiY2FzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQpe2Zvcih2YXIgZT1bXSxuPXQucG9pbnRlcnMubGVuZ3RoPjA/dC5wb2ludGVyczp0LmNoYW5nZWRQb2ludGVycyxpPW4scj1BcnJheS5pc0FycmF5KGkpLG89MCxpPXI/aTppW1N5bWJvbC5pdGVyYXRvcl0oKTs7KXt2YXIgYTtpZihyKXtpZihvPj1pLmxlbmd0aClicmVhazthPWlbbysrXX1lbHNle2lmKG89aS5uZXh0KCksby5kb25lKWJyZWFrO2E9by52YWx1ZX12YXIgdT1hLGw9bmV3IHMuZGVmYXVsdDtsLmNsaWVudFg9dS5jbGllbnRYLGwuY2xpZW50WT11LmNsaWVudFksbC5wYWdlWD11LnBhZ2VYLGwucGFnZVk9dS5wYWdlWSxsLnNjcmVlblg9dS5zY3JlZW5YLGwuc2NyZWVuWT11LnNjcmVlblksbC5kZXRhaWw9dS5kZXRhaWwsZS5wdXNoKGwpfXRoaXMudG91Y2hlcz1lLHRoaXMudGFyZ2V0PXQudGFyZ2V0LHRoaXMucm90YXRlPXQucm90YXRpb24sdGhpcy5zY2FsZT10LnNjYWxlfX19XSksdH0oKTtlLmRlZmF1bHQ9dX0sZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIHIodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfWZ1bmN0aW9uIG8odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX1mdW5jdGlvbiBhKHQsZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmbnVsbCE9PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIrdHlwZW9mIGUpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJihPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsZSk6dC5fX3Byb3RvX189ZSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSx1PW4oMzUpLGw9aSh1KSxjPW4oMzQpLGg9aShjKSxmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyKHRoaXMsZSk7dmFyIHQ9byh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5zY2FsZT0xLHR9cmV0dXJuIGEoZSx0KSxzKGUsW3trZXk6XCJjYXN0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9W10sbj1uZXcgaC5kZWZhdWx0O24uY2xpZW50WD10LmNsaWVudFgsbi5jbGllbnRZPXQuY2xpZW50WSxuLnBhZ2VYPXQucGFnZVgsbi5wYWdlWT10LnBhZ2VZLG4uc2NyZWVuWD10LnNjcmVlblgsbi5zY3JlZW5ZPXQuc2NyZWVuWSxlLnB1c2gobiksdGhpcy50b3VjaGVzPWUsdGhpcy5yb3RhdGU9MCx0aGlzLnRhcmdldD10LnRhcmdldCxcInVuZGVmaW5lZFwiIT10eXBlb2YgdC53aGVlbERlbHRhP3RoaXMuZGVsdGE9dC53aGVlbERlbHRhOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0LmRldGFpbCYmKHRoaXMuZGVsdGE9LXQuZGV0YWlsKSx0aGlzLnNjYWxlKz10aGlzLmRlbHRhPjA/LjE6LS4xfX0se2tleTpcImRlbHRhXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbHRhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGVsdGE9dH19XSksZX0obC5kZWZhdWx0KTtlLmRlZmF1bHQ9Zn0sZnVuY3Rpb24odCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBuKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbihlLG4saSl7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksaSYmdChlLGkpLGV9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7bih0aGlzLHQpLHRoaXMuX21lc3NhZ2VDaGFubmVsPW5ldyBNZXNzYWdlQ2hhbm5lbH1yZXR1cm4gaSh0LFt7a2V5OlwibmFtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuXCJudWxsXCJ9fSx7a2V5OlwicGFyYW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19LHtrZXk6XCJhY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXtpZihpKXtpZihcImVycm9yXCI9PT1pLnR5cGUpcmV0dXJuIHZvaWQgdGhpcy5lcnJvcih0LG4saSk7dGhpcy5zdWNjZXNzKHQsZSxpKX19fSx7a2V5Olwic3VjY2Vzc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt9fSx7a2V5OlwiZXJyb3JcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7ZShuLnJlc3VsdC5tZXNzYWdlKX19LHtrZXk6XCJjaGFubmVsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VDaGFubmVsfX1dKSx0fSgpO2UuZGVmYXVsdD1yfSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxvPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBQcm9taXNlP24oMTQpLlByb21pc2U6UHJvbWlzZSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtpKHRoaXMsdCksdGhpcy5fd29ya2VyPWV9cmV0dXJuIHIodCxbe2tleTpcImV4ZWNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1uZXcgbyhmdW5jdGlvbihuLGkpe3JldHVybiB0P3ZvaWQodC5jaGFubmVsLnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbihyKXt0LmFjdGlvbihlLG4saSxyLmRhdGEpfSk6dm9pZCBpKFwicHJvdG9jYWwgaXMgbnVsbFwiKX0pO3JldHVybiB0Pyh0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2Uoe3R5cGU6dC5uYW1lKCkscGFyYW1zOnQucGFyYW1zKCl9LFt0LmNoYW5uZWwucG9ydDJdKSxlKTplfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3dvcmtlci50ZXJtaW5hdGUoKX19XSksdH0oKTtlLmRlZmF1bHQ9YX0sZnVuY3Rpb24odCxlKXt9LDE5MiwxOTIsMTkyLDE5MiwxOTIsMTkyLDE5MiwxOTIsMTkyLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7cmV0dXJuIHRbMF09ZVswXStuWzBdLHRbMV09ZVsxXStuWzFdLHR9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUpe3JldHVybiB0WzBdKmVbMF0rdFsxXSplWzFdfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCxlKXt2YXIgbj1lWzBdLGk9ZVsxXSxyPW4qbitpKmk7cmV0dXJuIHI+MCYmKHI9MS9NYXRoLnNxcnQociksdFswXT1lWzBdKnIsdFsxXT1lWzFdKnIpLHR9dC5leHBvcnRzPW59LGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0LGUsbil7cmV0dXJuIHRbMF09ZSx0WzFdPW4sdH10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQsZSxuKXtyZXR1cm4gdFswXT1lWzBdLW5bMF0sdFsxXT1lWzFdLW5bMV0sdH10LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4pe3ZhciBpOy8qISBIYW1tZXIuSlMgLSB2Mi4wLjcgLSAyMDE2LTA0LTIyXG5cdCAqIGh0dHA6Ly9oYW1tZXJqcy5naXRodWIuaW8vXG5cdCAqXG5cdCAqIENvcHlyaWdodCAoYykgMjAxNiBKb3JpayBUYW5nZWxkZXI7XG5cdCAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSAqL1xuIWZ1bmN0aW9uKHIsbyxhLHMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHUodCxlLG4pe3JldHVybiBzZXRUaW1lb3V0KGQodCxuKSxlKX1mdW5jdGlvbiBsKHQsZSxuKXtyZXR1cm4hIUFycmF5LmlzQXJyYXkodCkmJihjKHQsbltlXSxuKSwhMCl9ZnVuY3Rpb24gYyh0LGUsbil7dmFyIGk7aWYodClpZih0LmZvckVhY2gpdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih0Lmxlbmd0aCE9PXMpZm9yKGk9MDtpPHQubGVuZ3RoOyllLmNhbGwobix0W2ldLGksdCksaSsrO2Vsc2UgZm9yKGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiZlLmNhbGwobix0W2ldLGksdCl9ZnVuY3Rpb24gaCh0LGUsbil7dmFyIGk9XCJERVBSRUNBVEVEIE1FVEhPRDogXCIrZStcIlxcblwiK24rXCIgQVQgXFxuXCI7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9bmV3IEVycm9yKFwiZ2V0LXN0YWNrLXRyYWNlXCIpLG49ZSYmZS5zdGFjaz9lLnN0YWNrLnJlcGxhY2UoL15bXlxcKF0rP1tcXG4kXS9nbSxcIlwiKS5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSxcIlwiKS5yZXBsYWNlKC9eT2JqZWN0Ljxhbm9ueW1vdXM+XFxzKlxcKC9nbSxcInthbm9ueW1vdXN9KClAXCIpOlwiVW5rbm93biBTdGFjayBUcmFjZVwiLG89ci5jb25zb2xlJiYoci5jb25zb2xlLndhcm58fHIuY29uc29sZS5sb2cpO3JldHVybiBvJiZvLmNhbGwoci5jb25zb2xlLGksbiksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGYodCxlLG4pe3ZhciBpLHI9ZS5wcm90b3R5cGU7aT10LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIpLGkuY29uc3RydWN0b3I9dCxpLl9zdXBlcj1yLG4mJmd0KGksbil9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19ZnVuY3Rpb24gcCh0LGUpe3JldHVybiB0eXBlb2YgdD09eXQ/dC5hcHBseShlP2VbMF18fHM6cyxlKTp0fWZ1bmN0aW9uIGcodCxlKXtyZXR1cm4gdD09PXM/ZTp0fWZ1bmN0aW9uIHYodCxlLG4pe2MoYihlKSxmdW5jdGlvbihlKXt0LmFkZEV2ZW50TGlzdGVuZXIoZSxuLCExKX0pfWZ1bmN0aW9uIG0odCxlLG4pe2MoYihlKSxmdW5jdGlvbihlKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuLCExKX0pfWZ1bmN0aW9uIHkodCxlKXtmb3IoO3Q7KXtpZih0PT1lKXJldHVybiEwO3Q9dC5wYXJlbnROb2RlfXJldHVybiExfWZ1bmN0aW9uIF8odCxlKXtyZXR1cm4gdC5pbmRleE9mKGUpPi0xfWZ1bmN0aW9uIGIodCl7cmV0dXJuIHQudHJpbSgpLnNwbGl0KC9cXHMrL2cpfWZ1bmN0aW9uIHgodCxlLG4pe2lmKHQuaW5kZXhPZiYmIW4pcmV0dXJuIHQuaW5kZXhPZihlKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoOyl7aWYobiYmdFtpXVtuXT09ZXx8IW4mJnRbaV09PT1lKXJldHVybiBpO2krK31yZXR1cm4tMX1mdW5jdGlvbiB3KHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDApfWZ1bmN0aW9uIEUodCxlLG4pe2Zvcih2YXIgaT1bXSxyPVtdLG89MDtvPHQubGVuZ3RoOyl7dmFyIGE9ZT90W29dW2VdOnRbb107eChyLGEpPDAmJmkucHVzaCh0W29dKSxyW29dPWEsbysrfXJldHVybiBuJiYoaT1lP2kuc29ydChmdW5jdGlvbih0LG4pe3JldHVybiB0W2VdPm5bZV19KTppLnNvcnQoKSksaX1mdW5jdGlvbiBTKHQsZSl7Zm9yKHZhciBuLGkscj1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxvPTA7bzx2dC5sZW5ndGg7KXtpZihuPXZ0W29dLGk9bj9uK3I6ZSxpIGluIHQpcmV0dXJuIGk7bysrfXJldHVybiBzfWZ1bmN0aW9uIE0oKXtyZXR1cm4gU3QrK31mdW5jdGlvbiBDKHQpe3ZhciBlPXQub3duZXJEb2N1bWVudHx8dDtyZXR1cm4gZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3d8fHJ9ZnVuY3Rpb24gSSh0LGUpe3ZhciBuPXRoaXM7dGhpcy5tYW5hZ2VyPXQsdGhpcy5jYWxsYmFjaz1lLHRoaXMuZWxlbWVudD10LmVsZW1lbnQsdGhpcy50YXJnZXQ9dC5vcHRpb25zLmlucHV0VGFyZ2V0LHRoaXMuZG9tSGFuZGxlcj1mdW5jdGlvbihlKXtwKHQub3B0aW9ucy5lbmFibGUsW3RdKSYmbi5oYW5kbGVyKGUpfSx0aGlzLmluaXQoKX1mdW5jdGlvbiBPKHQpe3ZhciBlLG49dC5vcHRpb25zLmlucHV0Q2xhc3M7cmV0dXJuIG5ldyhlPW4/bjpJdD9HOk90P0g6Q3Q/WTp6KSh0LFQpfWZ1bmN0aW9uIFQodCxlLG4pe3ZhciBpPW4ucG9pbnRlcnMubGVuZ3RoLHI9bi5jaGFuZ2VkUG9pbnRlcnMubGVuZ3RoLG89ZSZrdCYmaS1yPT09MCxhPWUmKER0fEZ0KSYmaS1yPT09MDtuLmlzRmlyc3Q9ISFvLG4uaXNGaW5hbD0hIWEsbyYmKHQuc2Vzc2lvbj17fSksbi5ldmVudFR5cGU9ZSxQKHQsbiksdC5lbWl0KFwiaGFtbWVyLmlucHV0XCIsbiksdC5yZWNvZ25pemUobiksdC5zZXNzaW9uLnByZXZJbnB1dD1ufWZ1bmN0aW9uIFAodCxlKXt2YXIgbj10LnNlc3Npb24saT1lLnBvaW50ZXJzLHI9aS5sZW5ndGg7bi5maXJzdElucHV0fHwobi5maXJzdElucHV0PU4oZSkpLHI+MSYmIW4uZmlyc3RNdWx0aXBsZT9uLmZpcnN0TXVsdGlwbGU9TihlKToxPT09ciYmKG4uZmlyc3RNdWx0aXBsZT0hMSk7dmFyIG89bi5maXJzdElucHV0LGE9bi5maXJzdE11bHRpcGxlLHM9YT9hLmNlbnRlcjpvLmNlbnRlcix1PWUuY2VudGVyPWsoaSk7ZS50aW1lU3RhbXA9eHQoKSxlLmRlbHRhVGltZT1lLnRpbWVTdGFtcC1vLnRpbWVTdGFtcCxlLmFuZ2xlPUIocyx1KSxlLmRpc3RhbmNlPUYocyx1KSxBKG4sZSksZS5vZmZzZXREaXJlY3Rpb249RChlLmRlbHRhWCxlLmRlbHRhWSk7dmFyIGw9UihlLmRlbHRhVGltZSxlLmRlbHRhWCxlLmRlbHRhWSk7ZS5vdmVyYWxsVmVsb2NpdHlYPWwueCxlLm92ZXJhbGxWZWxvY2l0eVk9bC55LGUub3ZlcmFsbFZlbG9jaXR5PWJ0KGwueCk+YnQobC55KT9sLng6bC55LGUuc2NhbGU9YT9VKGEucG9pbnRlcnMsaSk6MSxlLnJvdGF0aW9uPWE/aihhLnBvaW50ZXJzLGkpOjAsZS5tYXhQb2ludGVycz1uLnByZXZJbnB1dD9lLnBvaW50ZXJzLmxlbmd0aD5uLnByZXZJbnB1dC5tYXhQb2ludGVycz9lLnBvaW50ZXJzLmxlbmd0aDpuLnByZXZJbnB1dC5tYXhQb2ludGVyczplLnBvaW50ZXJzLmxlbmd0aCxMKG4sZSk7dmFyIGM9dC5lbGVtZW50O3koZS5zcmNFdmVudC50YXJnZXQsYykmJihjPWUuc3JjRXZlbnQudGFyZ2V0KSxlLnRhcmdldD1jfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj1lLmNlbnRlcixpPXQub2Zmc2V0RGVsdGF8fHt9LHI9dC5wcmV2RGVsdGF8fHt9LG89dC5wcmV2SW5wdXR8fHt9O2UuZXZlbnRUeXBlIT09a3QmJm8uZXZlbnRUeXBlIT09RHR8fChyPXQucHJldkRlbHRhPXt4Om8uZGVsdGFYfHwwLHk6by5kZWx0YVl8fDB9LGk9dC5vZmZzZXREZWx0YT17eDpuLngseTpuLnl9KSxlLmRlbHRhWD1yLngrKG4ueC1pLngpLGUuZGVsdGFZPXIueSsobi55LWkueSl9ZnVuY3Rpb24gTCh0LGUpe3ZhciBuLGkscixvLGE9dC5sYXN0SW50ZXJ2YWx8fGUsdT1lLnRpbWVTdGFtcC1hLnRpbWVTdGFtcDtpZihlLmV2ZW50VHlwZSE9RnQmJih1Pk50fHxhLnZlbG9jaXR5PT09cykpe3ZhciBsPWUuZGVsdGFYLWEuZGVsdGFYLGM9ZS5kZWx0YVktYS5kZWx0YVksaD1SKHUsbCxjKTtpPWgueCxyPWgueSxuPWJ0KGgueCk+YnQoaC55KT9oLng6aC55LG89RChsLGMpLHQubGFzdEludGVydmFsPWV9ZWxzZSBuPWEudmVsb2NpdHksaT1hLnZlbG9jaXR5WCxyPWEudmVsb2NpdHlZLG89YS5kaXJlY3Rpb247ZS52ZWxvY2l0eT1uLGUudmVsb2NpdHlYPWksZS52ZWxvY2l0eVk9cixlLmRpcmVjdGlvbj1vfWZ1bmN0aW9uIE4odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQucG9pbnRlcnMubGVuZ3RoOyllW25dPXtjbGllbnRYOl90KHQucG9pbnRlcnNbbl0uY2xpZW50WCksY2xpZW50WTpfdCh0LnBvaW50ZXJzW25dLmNsaWVudFkpfSxuKys7cmV0dXJue3RpbWVTdGFtcDp4dCgpLHBvaW50ZXJzOmUsY2VudGVyOmsoZSksZGVsdGFYOnQuZGVsdGFYLGRlbHRhWTp0LmRlbHRhWX19ZnVuY3Rpb24gayh0KXt2YXIgZT10Lmxlbmd0aDtpZigxPT09ZSlyZXR1cm57eDpfdCh0WzBdLmNsaWVudFgpLHk6X3QodFswXS5jbGllbnRZKX07Zm9yKHZhciBuPTAsaT0wLHI9MDtyPGU7KW4rPXRbcl0uY2xpZW50WCxpKz10W3JdLmNsaWVudFkscisrO3JldHVybnt4Ol90KG4vZSkseTpfdChpL2UpfX1mdW5jdGlvbiBSKHQsZSxuKXtyZXR1cm57eDplL3R8fDAseTpuL3R8fDB9fWZ1bmN0aW9uIEQodCxlKXtyZXR1cm4gdD09PWU/QnQ6YnQodCk+PWJ0KGUpP3Q8MD9qdDpVdDplPDA/enQ6R3R9ZnVuY3Rpb24gRih0LGUsbil7bnx8KG49cXQpO3ZhciBpPWVbblswXV0tdFtuWzBdXSxyPWVbblsxXV0tdFtuWzFdXTtyZXR1cm4gTWF0aC5zcXJ0KGkqaStyKnIpfWZ1bmN0aW9uIEIodCxlLG4pe258fChuPXF0KTt2YXIgaT1lW25bMF1dLXRbblswXV0scj1lW25bMV1dLXRbblsxXV07cmV0dXJuIDE4MCpNYXRoLmF0YW4yKHIsaSkvTWF0aC5QSX1mdW5jdGlvbiBqKHQsZSl7cmV0dXJuIEIoZVsxXSxlWzBdLFl0KStCKHRbMV0sdFswXSxZdCl9ZnVuY3Rpb24gVSh0LGUpe3JldHVybiBGKGVbMF0sZVsxXSxZdCkvRih0WzBdLHRbMV0sWXQpfWZ1bmN0aW9uIHooKXt0aGlzLmV2RWw9WnQsdGhpcy5ldldpbj1KdCx0aGlzLnByZXNzZWQ9ITEsSS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gRygpe3RoaXMuZXZFbD0kdCx0aGlzLmV2V2luPXRlLEkuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuc3RvcmU9dGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cz1bXX1mdW5jdGlvbiBWKCl7dGhpcy5ldlRhcmdldD1uZSx0aGlzLmV2V2luPWllLHRoaXMuc3RhcnRlZD0hMSxJLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBYKHQsZSl7dmFyIG49dyh0LnRvdWNoZXMpLGk9dyh0LmNoYW5nZWRUb3VjaGVzKTtyZXR1cm4gZSYoRHR8RnQpJiYobj1FKG4uY29uY2F0KGkpLFwiaWRlbnRpZmllclwiLCEwKSksW24saV19ZnVuY3Rpb24gSCgpe3RoaXMuZXZUYXJnZXQ9b2UsdGhpcy50YXJnZXRJZHM9e30sSS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcSh0LGUpe3ZhciBuPXcodC50b3VjaGVzKSxpPXRoaXMudGFyZ2V0SWRzO2lmKGUmKGt0fFJ0KSYmMT09PW4ubGVuZ3RoKXJldHVybiBpW25bMF0uaWRlbnRpZmllcl09ITAsW24sbl07dmFyIHIsbyxhPXcodC5jaGFuZ2VkVG91Y2hlcykscz1bXSx1PXRoaXMudGFyZ2V0O2lmKG89bi5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHkodC50YXJnZXQsdSl9KSxlPT09a3QpZm9yKHI9MDtyPG8ubGVuZ3RoOylpW29bcl0uaWRlbnRpZmllcl09ITAscisrO2ZvcihyPTA7cjxhLmxlbmd0aDspaVthW3JdLmlkZW50aWZpZXJdJiZzLnB1c2goYVtyXSksZSYoRHR8RnQpJiZkZWxldGUgaVthW3JdLmlkZW50aWZpZXJdLHIrKztyZXR1cm4gcy5sZW5ndGg/W0Uoby5jb25jYXQocyksXCJpZGVudGlmaWVyXCIsITApLHNdOnZvaWQgMH1mdW5jdGlvbiBZKCl7SS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHQ9ZCh0aGlzLmhhbmRsZXIsdGhpcyk7dGhpcy50b3VjaD1uZXcgSCh0aGlzLm1hbmFnZXIsdCksdGhpcy5tb3VzZT1uZXcgeih0aGlzLm1hbmFnZXIsdCksdGhpcy5wcmltYXJ5VG91Y2g9bnVsbCx0aGlzLmxhc3RUb3VjaGVzPVtdfWZ1bmN0aW9uIFcodCxlKXt0Jmt0Pyh0aGlzLnByaW1hcnlUb3VjaD1lLmNoYW5nZWRQb2ludGVyc1swXS5pZGVudGlmaWVyLFouY2FsbCh0aGlzLGUpKTp0JihEdHxGdCkmJlouY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIFoodCl7dmFyIGU9dC5jaGFuZ2VkUG9pbnRlcnNbMF07aWYoZS5pZGVudGlmaWVyPT09dGhpcy5wcmltYXJ5VG91Y2gpe3ZhciBuPXt4OmUuY2xpZW50WCx5OmUuY2xpZW50WX07dGhpcy5sYXN0VG91Y2hlcy5wdXNoKG4pO3ZhciBpPXRoaXMubGFzdFRvdWNoZXMscj1mdW5jdGlvbigpe3ZhciB0PWkuaW5kZXhPZihuKTt0Pi0xJiZpLnNwbGljZSh0LDEpfTtzZXRUaW1lb3V0KHIsYWUpfX1mdW5jdGlvbiBKKHQpe2Zvcih2YXIgZT10LnNyY0V2ZW50LmNsaWVudFgsbj10LnNyY0V2ZW50LmNsaWVudFksaT0wO2k8dGhpcy5sYXN0VG91Y2hlcy5sZW5ndGg7aSsrKXt2YXIgcj10aGlzLmxhc3RUb3VjaGVzW2ldLG89TWF0aC5hYnMoZS1yLngpLGE9TWF0aC5hYnMobi1yLnkpO2lmKG88PXNlJiZhPD1zZSlyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBLKHQsZSl7dGhpcy5tYW5hZ2VyPXQsdGhpcy5zZXQoZSl9ZnVuY3Rpb24gUSh0KXtpZihfKHQsZGUpKXJldHVybiBkZTt2YXIgZT1fKHQscGUpLG49Xyh0LGdlKTtyZXR1cm4gZSYmbj9kZTplfHxuP2U/cGU6Z2U6Xyh0LGZlKT9mZTpoZX1mdW5jdGlvbiAkKCl7aWYoIWxlKXJldHVybiExO3ZhciB0PXt9LGU9ci5DU1MmJnIuQ1NTLnN1cHBvcnRzO3JldHVybltcImF1dG9cIixcIm1hbmlwdWxhdGlvblwiLFwicGFuLXlcIixcInBhbi14XCIsXCJwYW4teCBwYW4teVwiLFwibm9uZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Rbbl09IWV8fHIuQ1NTLnN1cHBvcnRzKFwidG91Y2gtYWN0aW9uXCIsbil9KSx0fWZ1bmN0aW9uIHR0KHQpe3RoaXMub3B0aW9ucz1ndCh7fSx0aGlzLmRlZmF1bHRzLHR8fHt9KSx0aGlzLmlkPU0oKSx0aGlzLm1hbmFnZXI9bnVsbCx0aGlzLm9wdGlvbnMuZW5hYmxlPWcodGhpcy5vcHRpb25zLmVuYWJsZSwhMCksdGhpcy5zdGF0ZT1tZSx0aGlzLnNpbXVsdGFuZW91cz17fSx0aGlzLnJlcXVpcmVGYWlsPVtdfWZ1bmN0aW9uIGV0KHQpe3JldHVybiB0JndlP1wiY2FuY2VsXCI6dCZiZT9cImVuZFwiOnQmX2U/XCJtb3ZlXCI6dCZ5ZT9cInN0YXJ0XCI6XCJcIn1mdW5jdGlvbiBudCh0KXtyZXR1cm4gdD09R3Q/XCJkb3duXCI6dD09enQ/XCJ1cFwiOnQ9PWp0P1wibGVmdFwiOnQ9PVV0P1wicmlnaHRcIjpcIlwifWZ1bmN0aW9uIGl0KHQsZSl7dmFyIG49ZS5tYW5hZ2VyO3JldHVybiBuP24uZ2V0KHQpOnR9ZnVuY3Rpb24gcnQoKXt0dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gb3QoKXtydC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5wWD1udWxsLHRoaXMucFk9bnVsbH1mdW5jdGlvbiBhdCgpe3J0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBzdCgpe3R0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl90aW1lcj1udWxsLHRoaXMuX2lucHV0PW51bGx9ZnVuY3Rpb24gdXQoKXtydC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gbHQoKXtydC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gY3QoKXt0dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5wVGltZT0hMSx0aGlzLnBDZW50ZXI9ITEsdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsLHRoaXMuY291bnQ9MH1mdW5jdGlvbiBodCh0LGUpe3JldHVybiBlPWV8fHt9LGUucmVjb2duaXplcnM9ZyhlLnJlY29nbml6ZXJzLGh0LmRlZmF1bHRzLnByZXNldCksbmV3IGZ0KHQsZSl9ZnVuY3Rpb24gZnQodCxlKXt0aGlzLm9wdGlvbnM9Z3Qoe30saHQuZGVmYXVsdHMsZXx8e30pLHRoaXMub3B0aW9ucy5pbnB1dFRhcmdldD10aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXR8fHQsdGhpcy5oYW5kbGVycz17fSx0aGlzLnNlc3Npb249e30sdGhpcy5yZWNvZ25pemVycz1bXSx0aGlzLm9sZENzc1Byb3BzPXt9LHRoaXMuZWxlbWVudD10LHRoaXMuaW5wdXQ9Tyh0aGlzKSx0aGlzLnRvdWNoQWN0aW9uPW5ldyBLKHRoaXMsdGhpcy5vcHRpb25zLnRvdWNoQWN0aW9uKSxkdCh0aGlzLCEwKSxjKHRoaXMub3B0aW9ucy5yZWNvZ25pemVycyxmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFkZChuZXcgdFswXSh0WzFdKSk7dFsyXSYmZS5yZWNvZ25pemVXaXRoKHRbMl0pLHRbM10mJmUucmVxdWlyZUZhaWx1cmUodFszXSl9LHRoaXMpfWZ1bmN0aW9uIGR0KHQsZSl7dmFyIG49dC5lbGVtZW50O2lmKG4uc3R5bGUpe3ZhciBpO2ModC5vcHRpb25zLmNzc1Byb3BzLGZ1bmN0aW9uKHIsbyl7aT1TKG4uc3R5bGUsbyksZT8odC5vbGRDc3NQcm9wc1tpXT1uLnN0eWxlW2ldLG4uc3R5bGVbaV09cik6bi5zdHlsZVtpXT10Lm9sZENzc1Byb3BzW2ldfHxcIlwifSksZXx8KHQub2xkQ3NzUHJvcHM9e30pfX1mdW5jdGlvbiBwdCh0LGUpe3ZhciBuPW8uY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtuLmluaXRFdmVudCh0LCEwLCEwKSxuLmdlc3R1cmU9ZSxlLnRhcmdldC5kaXNwYXRjaEV2ZW50KG4pfXZhciBndCx2dD1bXCJcIixcIndlYmtpdFwiLFwiTW96XCIsXCJNU1wiLFwibXNcIixcIm9cIl0sbXQ9by5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHl0PVwiZnVuY3Rpb25cIixfdD1NYXRoLnJvdW5kLGJ0PU1hdGguYWJzLHh0PURhdGUubm93O2d0PVwiZnVuY3Rpb25cIiE9dHlwZW9mIE9iamVjdC5hc3NpZ24/ZnVuY3Rpb24odCl7aWYodD09PXN8fG51bGw9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciBlPU9iamVjdCh0KSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl7dmFyIGk9YXJndW1lbnRzW25dO2lmKGkhPT1zJiZudWxsIT09aSlmb3IodmFyIHIgaW4gaSlpLmhhc093blByb3BlcnR5KHIpJiYoZVtyXT1pW3JdKX1yZXR1cm4gZX06T2JqZWN0LmFzc2lnbjt2YXIgd3Q9aChmdW5jdGlvbih0LGUsbil7Zm9yKHZhciBpPU9iamVjdC5rZXlzKGUpLHI9MDtyPGkubGVuZ3RoOykoIW58fG4mJnRbaVtyXV09PT1zKSYmKHRbaVtyXV09ZVtpW3JdXSkscisrO3JldHVybiB0fSxcImV4dGVuZFwiLFwiVXNlIGBhc3NpZ25gLlwiKSxFdD1oKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHd0KHQsZSwhMCl9LFwibWVyZ2VcIixcIlVzZSBgYXNzaWduYC5cIiksU3Q9MSxNdD0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2ksQ3Q9XCJvbnRvdWNoc3RhcnRcImluIHIsSXQ9UyhyLFwiUG9pbnRlckV2ZW50XCIpIT09cyxPdD1DdCYmTXQudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxUdD1cInRvdWNoXCIsUHQ9XCJwZW5cIixBdD1cIm1vdXNlXCIsTHQ9XCJraW5lY3RcIixOdD0yNSxrdD0xLFJ0PTIsRHQ9NCxGdD04LEJ0PTEsanQ9MixVdD00LHp0PTgsR3Q9MTYsVnQ9anR8VXQsWHQ9enR8R3QsSHQ9VnR8WHQscXQ9W1wieFwiLFwieVwiXSxZdD1bXCJjbGllbnRYXCIsXCJjbGllbnRZXCJdO0kucHJvdG90eXBlPXtoYW5kbGVyOmZ1bmN0aW9uKCl7fSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5ldkVsJiZ2KHRoaXMuZWxlbWVudCx0aGlzLmV2RWwsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2VGFyZ2V0JiZ2KHRoaXMudGFyZ2V0LHRoaXMuZXZUYXJnZXQsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2V2luJiZ2KEModGhpcy5lbGVtZW50KSx0aGlzLmV2V2luLHRoaXMuZG9tSGFuZGxlcil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJm0odGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJm0odGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJm0oQyh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX19O3ZhciBXdD17bW91c2Vkb3duOmt0LG1vdXNlbW92ZTpSdCxtb3VzZXVwOkR0fSxadD1cIm1vdXNlZG93blwiLEp0PVwibW91c2Vtb3ZlIG1vdXNldXBcIjtmKHosSSx7aGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT1XdFt0LnR5cGVdO2Uma3QmJjA9PT10LmJ1dHRvbiYmKHRoaXMucHJlc3NlZD0hMCksZSZSdCYmMSE9PXQud2hpY2gmJihlPUR0KSx0aGlzLnByZXNzZWQmJihlJkR0JiYodGhpcy5wcmVzc2VkPSExKSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixlLHtwb2ludGVyczpbdF0sY2hhbmdlZFBvaW50ZXJzOlt0XSxwb2ludGVyVHlwZTpBdCxzcmNFdmVudDp0fSkpfX0pO3ZhciBLdD17cG9pbnRlcmRvd246a3QscG9pbnRlcm1vdmU6UnQscG9pbnRlcnVwOkR0LHBvaW50ZXJjYW5jZWw6RnQscG9pbnRlcm91dDpGdH0sUXQ9ezI6VHQsMzpQdCw0OkF0LDU6THR9LCR0PVwicG9pbnRlcmRvd25cIix0ZT1cInBvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsXCI7ci5NU1BvaW50ZXJFdmVudCYmIXIuUG9pbnRlckV2ZW50JiYoJHQ9XCJNU1BvaW50ZXJEb3duXCIsdGU9XCJNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbFwiKSxmKEcsSSx7aGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnN0b3JlLG49ITEsaT10LnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIixcIlwiKSxyPUt0W2ldLG89UXRbdC5wb2ludGVyVHlwZV18fHQucG9pbnRlclR5cGUsYT1vPT1UdCxzPXgoZSx0LnBvaW50ZXJJZCxcInBvaW50ZXJJZFwiKTtyJmt0JiYoMD09PXQuYnV0dG9ufHxhKT9zPDAmJihlLnB1c2godCkscz1lLmxlbmd0aC0xKTpyJihEdHxGdCkmJihuPSEwKSxzPDB8fChlW3NdPXQsdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIscix7cG9pbnRlcnM6ZSxjaGFuZ2VkUG9pbnRlcnM6W3RdLHBvaW50ZXJUeXBlOm8sc3JjRXZlbnQ6dH0pLG4mJmUuc3BsaWNlKHMsMSkpfX0pO3ZhciBlZT17dG91Y2hzdGFydDprdCx0b3VjaG1vdmU6UnQsdG91Y2hlbmQ6RHQsdG91Y2hjYW5jZWw6RnR9LG5lPVwidG91Y2hzdGFydFwiLGllPVwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjtmKFYsSSx7aGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT1lZVt0LnR5cGVdO2lmKGU9PT1rdCYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgbj1YLmNhbGwodGhpcyx0LGUpO2UmKER0fEZ0KSYmblswXS5sZW5ndGgtblsxXS5sZW5ndGg9PT0wJiYodGhpcy5zdGFydGVkPSExKSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixlLHtwb2ludGVyczpuWzBdLGNoYW5nZWRQb2ludGVyczpuWzFdLHBvaW50ZXJUeXBlOlR0LHNyY0V2ZW50OnR9KX19fSk7dmFyIHJlPXt0b3VjaHN0YXJ0Omt0LHRvdWNobW92ZTpSdCx0b3VjaGVuZDpEdCx0b3VjaGNhbmNlbDpGdH0sb2U9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO2YoSCxJLHtoYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXJlW3QudHlwZV0sbj1xLmNhbGwodGhpcyx0LGUpO24mJnRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGUse3BvaW50ZXJzOm5bMF0sY2hhbmdlZFBvaW50ZXJzOm5bMV0scG9pbnRlclR5cGU6VHQsc3JjRXZlbnQ6dH0pfX0pO3ZhciBhZT0yNTAwLHNlPTI1O2YoWSxJLHtoYW5kbGVyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uLnBvaW50ZXJUeXBlPT1UdCxyPW4ucG9pbnRlclR5cGU9PUF0O2lmKCEociYmbi5zb3VyY2VDYXBhYmlsaXRpZXMmJm4uc291cmNlQ2FwYWJpbGl0aWVzLmZpcmVzVG91Y2hFdmVudHMpKXtpZihpKVcuY2FsbCh0aGlzLGUsbik7ZWxzZSBpZihyJiZKLmNhbGwodGhpcyxuKSlyZXR1cm47dGhpcy5jYWxsYmFjayh0LGUsbil9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy50b3VjaC5kZXN0cm95KCksdGhpcy5tb3VzZS5kZXN0cm95KCl9fSk7dmFyIHVlPVMobXQuc3R5bGUsXCJ0b3VjaEFjdGlvblwiKSxsZT11ZSE9PXMsY2U9XCJjb21wdXRlXCIsaGU9XCJhdXRvXCIsZmU9XCJtYW5pcHVsYXRpb25cIixkZT1cIm5vbmVcIixwZT1cInBhbi14XCIsZ2U9XCJwYW4teVwiLHZlPSQoKTtLLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKHQpe3Q9PWNlJiYodD10aGlzLmNvbXB1dGUoKSksbGUmJnRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlJiZ2ZVt0XSYmKHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW3VlXT10KSx0aGlzLmFjdGlvbnM9dC50b0xvd2VyQ2FzZSgpLnRyaW0oKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pfSxjb21wdXRlOmZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIGModGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLGZ1bmN0aW9uKGUpe3AoZS5vcHRpb25zLmVuYWJsZSxbZV0pJiYodD10LmNvbmNhdChlLmdldFRvdWNoQWN0aW9uKCkpKX0pLFEodC5qb2luKFwiIFwiKSl9LHByZXZlbnREZWZhdWx0czpmdW5jdGlvbih0KXt2YXIgZT10LnNyY0V2ZW50LG49dC5vZmZzZXREaXJlY3Rpb247aWYodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKXJldHVybiB2b2lkIGUucHJldmVudERlZmF1bHQoKTt2YXIgaT10aGlzLmFjdGlvbnMscj1fKGksZGUpJiYhdmVbZGVdLG89XyhpLGdlKSYmIXZlW2dlXSxhPV8oaSxwZSkmJiF2ZVtwZV07aWYocil7dmFyIHM9MT09PXQucG9pbnRlcnMubGVuZ3RoLHU9dC5kaXN0YW5jZTwyLGw9dC5kZWx0YVRpbWU8MjUwO2lmKHMmJnUmJmwpcmV0dXJufXJldHVybiBhJiZvP3ZvaWQgMDpyfHxvJiZuJlZ0fHxhJiZuJlh0P3RoaXMucHJldmVudFNyYyhlKTp2b2lkIDB9LHByZXZlbnRTcmM6ZnVuY3Rpb24odCl7dGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkPSEwLHQucHJldmVudERlZmF1bHQoKX19O3ZhciBtZT0xLHllPTIsX2U9NCxiZT04LHhlPWJlLHdlPTE2LEVlPTMyO3R0LnByb3RvdHlwZT17ZGVmYXVsdHM6e30sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBndCh0aGlzLm9wdGlvbnMsdCksdGhpcy5tYW5hZ2VyJiZ0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCksdGhpc30scmVjb2duaXplV2l0aDpmdW5jdGlvbih0KXtpZihsKHQsXCJyZWNvZ25pemVXaXRoXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGU9dGhpcy5zaW11bHRhbmVvdXM7cmV0dXJuIHQ9aXQodCx0aGlzKSxlW3QuaWRdfHwoZVt0LmlkXT10LHQucmVjb2duaXplV2l0aCh0aGlzKSksdGhpc30sZHJvcFJlY29nbml6ZVdpdGg6ZnVuY3Rpb24odCl7cmV0dXJuIGwodCxcImRyb3BSZWNvZ25pemVXaXRoXCIsdGhpcyk/dGhpczoodD1pdCh0LHRoaXMpLGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1t0LmlkXSx0aGlzKX0scmVxdWlyZUZhaWx1cmU6ZnVuY3Rpb24odCl7aWYobCh0LFwicmVxdWlyZUZhaWx1cmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgZT10aGlzLnJlcXVpcmVGYWlsO3JldHVybiB0PWl0KHQsdGhpcykseChlLHQpPT09LTEmJihlLnB1c2godCksdC5yZXF1aXJlRmFpbHVyZSh0aGlzKSksdGhpc30sZHJvcFJlcXVpcmVGYWlsdXJlOmZ1bmN0aW9uKHQpe2lmKGwodCxcImRyb3BSZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO3Q9aXQodCx0aGlzKTt2YXIgZT14KHRoaXMucmVxdWlyZUZhaWwsdCk7cmV0dXJuIGU+LTEmJnRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGUsMSksdGhpc30saGFzUmVxdWlyZUZhaWx1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoPjB9LGNhblJlY29nbml6ZVdpdGg6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnNpbXVsdGFuZW91c1t0LmlkXX0sZW1pdDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe24ubWFuYWdlci5lbWl0KGUsdCl9dmFyIG49dGhpcyxpPXRoaXMuc3RhdGU7aTxiZSYmZShuLm9wdGlvbnMuZXZlbnQrZXQoaSkpLGUobi5vcHRpb25zLmV2ZW50KSx0LmFkZGl0aW9uYWxFdmVudCYmZSh0LmFkZGl0aW9uYWxFdmVudCksaT49YmUmJmUobi5vcHRpb25zLmV2ZW50K2V0KGkpKX0sdHJ5RW1pdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jYW5FbWl0KCk/dGhpcy5lbWl0KHQpOnZvaWQodGhpcy5zdGF0ZT1FZSl9LGNhbkVtaXQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoOyl7aWYoISh0aGlzLnJlcXVpcmVGYWlsW3RdLnN0YXRlJihFZXxtZSkpKXJldHVybiExO3QrK31yZXR1cm4hMH0scmVjb2duaXplOmZ1bmN0aW9uKHQpe3ZhciBlPWd0KHt9LHQpO3JldHVybiBwKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsZV0pPyh0aGlzLnN0YXRlJih4ZXx3ZXxFZSkmJih0aGlzLnN0YXRlPW1lKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhlKSx2b2lkKHRoaXMuc3RhdGUmKHllfF9lfGJlfHdlKSYmdGhpcy50cnlFbWl0KGUpKSk6KHRoaXMucmVzZXQoKSx2b2lkKHRoaXMuc3RhdGU9RWUpKX0scHJvY2VzczpmdW5jdGlvbih0KXt9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7fSxyZXNldDpmdW5jdGlvbigpe319LGYocnQsdHQse2RlZmF1bHRzOntwb2ludGVyczoxfSxhdHRyVGVzdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMucG9pbnRlcnM7cmV0dXJuIDA9PT1lfHx0LnBvaW50ZXJzLmxlbmd0aD09PWV9LHByb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZSxuPXQuZXZlbnRUeXBlLGk9ZSYoeWV8X2UpLHI9dGhpcy5hdHRyVGVzdCh0KTtyZXR1cm4gaSYmKG4mRnR8fCFyKT9lfHdlOml8fHI/biZEdD9lfGJlOmUmeWU/ZXxfZTp5ZTpFZX19KSxmKG90LHJ0LHtkZWZhdWx0czp7ZXZlbnQ6XCJwYW5cIix0aHJlc2hvbGQ6MTAscG9pbnRlcnM6MSxkaXJlY3Rpb246SHR9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmRpcmVjdGlvbixlPVtdO3JldHVybiB0JlZ0JiZlLnB1c2goZ2UpLHQmWHQmJmUucHVzaChwZSksZX0sZGlyZWN0aW9uVGVzdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnMsbj0hMCxpPXQuZGlzdGFuY2Uscj10LmRpcmVjdGlvbixvPXQuZGVsdGFYLGE9dC5kZWx0YVk7cmV0dXJuIHImZS5kaXJlY3Rpb258fChlLmRpcmVjdGlvbiZWdD8ocj0wPT09bz9CdDpvPDA/anQ6VXQsbj1vIT10aGlzLnBYLGk9TWF0aC5hYnModC5kZWx0YVgpKToocj0wPT09YT9CdDphPDA/enQ6R3Qsbj1hIT10aGlzLnBZLGk9TWF0aC5hYnModC5kZWx0YVkpKSksdC5kaXJlY3Rpb249cixuJiZpPmUudGhyZXNob2xkJiZyJmUuZGlyZWN0aW9ufSxhdHRyVGVzdDpmdW5jdGlvbih0KXtyZXR1cm4gcnQucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcyx0KSYmKHRoaXMuc3RhdGUmeWV8fCEodGhpcy5zdGF0ZSZ5ZSkmJnRoaXMuZGlyZWN0aW9uVGVzdCh0KSl9LGVtaXQ6ZnVuY3Rpb24odCl7dGhpcy5wWD10LmRlbHRhWCx0aGlzLnBZPXQuZGVsdGFZO3ZhciBlPW50KHQuZGlyZWN0aW9uKTtlJiYodC5hZGRpdGlvbmFsRXZlbnQ9dGhpcy5vcHRpb25zLmV2ZW50K2UpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLHQpfX0pLGYoYXQscnQse2RlZmF1bHRzOntldmVudDpcInBpbmNoXCIsdGhyZXNob2xkOjAscG9pbnRlcnM6Mn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bZGVdfSxhdHRyVGVzdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLHQpJiYoTWF0aC5hYnModC5zY2FsZS0xKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJnllKX0sZW1pdDpmdW5jdGlvbih0KXtpZigxIT09dC5zY2FsZSl7dmFyIGU9dC5zY2FsZTwxP1wiaW5cIjpcIm91dFwiO3QuYWRkaXRpb25hbEV2ZW50PXRoaXMub3B0aW9ucy5ldmVudCtlfXRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLHQpfX0pLGYoc3QsdHQse2RlZmF1bHRzOntldmVudDpcInByZXNzXCIscG9pbnRlcnM6MSx0aW1lOjI1MSx0aHJlc2hvbGQ6OX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5baGVdfSxwcm9jZXNzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucyxuPXQucG9pbnRlcnMubGVuZ3RoPT09ZS5wb2ludGVycyxpPXQuZGlzdGFuY2U8ZS50aHJlc2hvbGQscj10LmRlbHRhVGltZT5lLnRpbWU7aWYodGhpcy5faW5wdXQ9dCwhaXx8IW58fHQuZXZlbnRUeXBlJihEdHxGdCkmJiFyKXRoaXMucmVzZXQoKTtlbHNlIGlmKHQuZXZlbnRUeXBlJmt0KXRoaXMucmVzZXQoKSx0aGlzLl90aW1lcj11KGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT14ZSx0aGlzLnRyeUVtaXQoKX0sZS50aW1lLHRoaXMpO2Vsc2UgaWYodC5ldmVudFR5cGUmRHQpcmV0dXJuIHhlO3JldHVybiBFZX0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKHQpe3RoaXMuc3RhdGU9PT14ZSYmKHQmJnQuZXZlbnRUeXBlJkR0P3RoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtcInVwXCIsdCk6KHRoaXMuX2lucHV0LnRpbWVTdGFtcD14dCgpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpKX19KSxmKHV0LHJ0LHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltkZV19LGF0dHJUZXN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsdCkmJihNYXRoLmFicyh0LnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJnllKX19KSxmKGx0LHJ0LHtkZWZhdWx0czp7ZXZlbnQ6XCJzd2lwZVwiLHRocmVzaG9sZDoxMCx2ZWxvY2l0eTouMyxkaXJlY3Rpb246VnR8WHQscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gb3QucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyl9LGF0dHJUZXN0OmZ1bmN0aW9uKHQpe3ZhciBlLG49dGhpcy5vcHRpb25zLmRpcmVjdGlvbjtyZXR1cm4gbiYoVnR8WHQpP2U9dC5vdmVyYWxsVmVsb2NpdHk6biZWdD9lPXQub3ZlcmFsbFZlbG9jaXR5WDpuJlh0JiYoZT10Lm92ZXJhbGxWZWxvY2l0eVkpLHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyx0KSYmbiZ0Lm9mZnNldERpcmVjdGlvbiYmdC5kaXN0YW5jZT50aGlzLm9wdGlvbnMudGhyZXNob2xkJiZ0Lm1heFBvaW50ZXJzPT10aGlzLm9wdGlvbnMucG9pbnRlcnMmJmJ0KGUpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmdC5ldmVudFR5cGUmRHR9LGVtaXQ6ZnVuY3Rpb24odCl7dmFyIGU9bnQodC5vZmZzZXREaXJlY3Rpb24pO2UmJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtlLHQpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0KX19KSxmKGN0LHR0LHtkZWZhdWx0czp7ZXZlbnQ6XCJ0YXBcIixwb2ludGVyczoxLHRhcHM6MSxpbnRlcnZhbDozMDAsdGltZToyNTAsdGhyZXNob2xkOjkscG9zVGhyZXNob2xkOjEwfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltmZV19LHByb2Nlc3M6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb25zLG49dC5wb2ludGVycy5sZW5ndGg9PT1lLnBvaW50ZXJzLGk9dC5kaXN0YW5jZTxlLnRocmVzaG9sZCxyPXQuZGVsdGFUaW1lPGUudGltZTtpZih0aGlzLnJlc2V0KCksdC5ldmVudFR5cGUma3QmJjA9PT10aGlzLmNvdW50KXJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7aWYoaSYmciYmbil7aWYodC5ldmVudFR5cGUhPUR0KXJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7dmFyIG89IXRoaXMucFRpbWV8fHQudGltZVN0YW1wLXRoaXMucFRpbWU8ZS5pbnRlcnZhbCxhPSF0aGlzLnBDZW50ZXJ8fEYodGhpcy5wQ2VudGVyLHQuY2VudGVyKTxlLnBvc1RocmVzaG9sZDt0aGlzLnBUaW1lPXQudGltZVN0YW1wLHRoaXMucENlbnRlcj10LmNlbnRlcixhJiZvP3RoaXMuY291bnQrPTE6dGhpcy5jb3VudD0xLHRoaXMuX2lucHV0PXQ7dmFyIHM9dGhpcy5jb3VudCVlLnRhcHM7aWYoMD09PXMpcmV0dXJuIHRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCk/KHRoaXMuX3RpbWVyPXUoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPXhlLHRoaXMudHJ5RW1pdCgpfSxlLmludGVydmFsLHRoaXMpLHllKTp4ZX1yZXR1cm4gRWV9LGZhaWxUaW1lb3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVyPXUoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPUVlfSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsdGhpcyksRWV9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbigpe3RoaXMuc3RhdGU9PXhlJiYodGhpcy5faW5wdXQudGFwQ291bnQ9dGhpcy5jb3VudCx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKX19KSxodC5WRVJTSU9OPVwiMi4wLjdcIixodC5kZWZhdWx0cz17ZG9tRXZlbnRzOiExLHRvdWNoQWN0aW9uOmNlLGVuYWJsZTohMCxpbnB1dFRhcmdldDpudWxsLGlucHV0Q2xhc3M6bnVsbCxwcmVzZXQ6W1t1dCx7ZW5hYmxlOiExfV0sW2F0LHtlbmFibGU6ITF9LFtcInJvdGF0ZVwiXV0sW2x0LHtkaXJlY3Rpb246VnR9XSxbb3Qse2RpcmVjdGlvbjpWdH0sW1wic3dpcGVcIl1dLFtjdF0sW2N0LHtldmVudDpcImRvdWJsZXRhcFwiLHRhcHM6Mn0sW1widGFwXCJdXSxbc3RdXSxjc3NQcm9wczp7dXNlclNlbGVjdDpcIm5vbmVcIix0b3VjaFNlbGVjdDpcIm5vbmVcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fTt2YXIgU2U9MSxNZT0yO2Z0LnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKHQpe3JldHVybiBndCh0aGlzLm9wdGlvbnMsdCksdC50b3VjaEFjdGlvbiYmdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSx0LmlucHV0VGFyZ2V0JiYodGhpcy5pbnB1dC5kZXN0cm95KCksdGhpcy5pbnB1dC50YXJnZXQ9dC5pbnB1dFRhcmdldCx0aGlzLmlucHV0LmluaXQoKSksdGhpc30sc3RvcDpmdW5jdGlvbih0KXt0aGlzLnNlc3Npb24uc3RvcHBlZD10P01lOlNlfSxyZWNvZ25pemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zZXNzaW9uO2lmKCFlLnN0b3BwZWQpe3RoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKHQpO3ZhciBuLGk9dGhpcy5yZWNvZ25pemVycyxyPWUuY3VyUmVjb2duaXplcjsoIXJ8fHImJnIuc3RhdGUmeGUpJiYocj1lLmN1clJlY29nbml6ZXI9bnVsbCk7Zm9yKHZhciBvPTA7bzxpLmxlbmd0aDspbj1pW29dLGUuc3RvcHBlZD09PU1lfHxyJiZuIT1yJiYhbi5jYW5SZWNvZ25pemVXaXRoKHIpP24ucmVzZXQoKTpuLnJlY29nbml6ZSh0KSwhciYmbi5zdGF0ZSYoeWV8X2V8YmUpJiYocj1lLmN1clJlY29nbml6ZXI9biksbysrfX0sZ2V0OmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiB0dClyZXR1cm4gdDtmb3IodmFyIGU9dGhpcy5yZWNvZ25pemVycyxuPTA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXS5vcHRpb25zLmV2ZW50PT10KXJldHVybiBlW25dO3JldHVybiBudWxsfSxhZGQ6ZnVuY3Rpb24odCl7aWYobCh0LFwiYWRkXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGU9dGhpcy5nZXQodC5vcHRpb25zLmV2ZW50KTtyZXR1cm4gZSYmdGhpcy5yZW1vdmUoZSksdGhpcy5yZWNvZ25pemVycy5wdXNoKHQpLHQubWFuYWdlcj10aGlzLHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksdH0scmVtb3ZlOmZ1bmN0aW9uKHQpe2lmKGwodCxcInJlbW92ZVwiLHRoaXMpKXJldHVybiB0aGlzO2lmKHQ9dGhpcy5nZXQodCkpe3ZhciBlPXRoaXMucmVjb2duaXplcnMsbj14KGUsdCk7biE9PS0xJiYoZS5zcGxpY2UobiwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpKX1yZXR1cm4gdGhpc30sb246ZnVuY3Rpb24odCxlKXtpZih0IT09cyYmZSE9PXMpe3ZhciBuPXRoaXMuaGFuZGxlcnM7cmV0dXJuIGMoYih0KSxmdW5jdGlvbih0KXtuW3RdPW5bdF18fFtdLG5bdF0ucHVzaChlKX0pLHRoaXN9fSxvZmY6ZnVuY3Rpb24odCxlKXtpZih0IT09cyl7dmFyIG49dGhpcy5oYW5kbGVycztyZXR1cm4gYyhiKHQpLGZ1bmN0aW9uKHQpe2U/blt0XSYmblt0XS5zcGxpY2UoeChuW3RdLGUpLDEpOmRlbGV0ZSBuW3RdfSksdGhpc319LGVtaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLm9wdGlvbnMuZG9tRXZlbnRzJiZwdCh0LGUpO3ZhciBuPXRoaXMuaGFuZGxlcnNbdF0mJnRoaXMuaGFuZGxlcnNbdF0uc2xpY2UoKTtpZihuJiZuLmxlbmd0aCl7ZS50eXBlPXQsZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2Uuc3JjRXZlbnQucHJldmVudERlZmF1bHQoKX07Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDspbltpXShlKSxpKyt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50JiZkdCh0aGlzLCExKSx0aGlzLmhhbmRsZXJzPXt9LHRoaXMuc2Vzc2lvbj17fSx0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmVsZW1lbnQ9bnVsbH19LGd0KGh0LHtJTlBVVF9TVEFSVDprdCxJTlBVVF9NT1ZFOlJ0LElOUFVUX0VORDpEdCxJTlBVVF9DQU5DRUw6RnQsU1RBVEVfUE9TU0lCTEU6bWUsU1RBVEVfQkVHQU46eWUsU1RBVEVfQ0hBTkdFRDpfZSxTVEFURV9FTkRFRDpiZSxTVEFURV9SRUNPR05JWkVEOnhlLFNUQVRFX0NBTkNFTExFRDp3ZSxTVEFURV9GQUlMRUQ6RWUsRElSRUNUSU9OX05PTkU6QnQsRElSRUNUSU9OX0xFRlQ6anQsRElSRUNUSU9OX1JJR0hUOlV0LERJUkVDVElPTl9VUDp6dCxESVJFQ1RJT05fRE9XTjpHdCxESVJFQ1RJT05fSE9SSVpPTlRBTDpWdCxESVJFQ1RJT05fVkVSVElDQUw6WHQsRElSRUNUSU9OX0FMTDpIdCxNYW5hZ2VyOmZ0LElucHV0OkksVG91Y2hBY3Rpb246SyxUb3VjaElucHV0OkgsTW91c2VJbnB1dDp6LFBvaW50ZXJFdmVudElucHV0OkcsVG91Y2hNb3VzZUlucHV0OlksU2luZ2xlVG91Y2hJbnB1dDpWLFJlY29nbml6ZXI6dHQsQXR0clJlY29nbml6ZXI6cnQsVGFwOmN0LFBhbjpvdCxTd2lwZTpsdCxQaW5jaDphdCxSb3RhdGU6dXQsUHJlc3M6c3Qsb246dixvZmY6bSxlYWNoOmMsbWVyZ2U6RXQsZXh0ZW5kOnd0LGFzc2lnbjpndCxpbmhlcml0OmYsYmluZEZuOmQscHJlZml4ZWQ6U30pO3ZhciBDZT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygcj9yOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e307Q2UuSGFtbWVyPWh0LGk9ZnVuY3Rpb24oKXtyZXR1cm4gaHR9LmNhbGwoZSxuLGUsdCksIShpIT09cyYmKHQuZXhwb3J0cz1pKSl9KHdpbmRvdyxkb2N1bWVudCxcIkhhbW1lclwiKX0sZnVuY3Rpb24odCxlKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlP3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3Quc3VwZXJfPWUsdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSl9OnQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3Quc3VwZXJfPWU7dmFyIG49ZnVuY3Rpb24oKXt9O24ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXR9fSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMDIpLHI9bigyMDUpLG89bigyMDQpLGE9bigyMDYpLHM9bigyMDMpLHU9WzAsMF07dC5leHBvcnRzLmNvbXB1dGVNaXRlcj1mdW5jdGlvbih0LGUsbixhLGwpe3JldHVybiBpKHQsbixhKSxvKHQsdCkscihlLC10WzFdLHRbMF0pLHIodSwtblsxXSxuWzBdKSxsL3MoZSx1KX0sdC5leHBvcnRzLm5vcm1hbD1mdW5jdGlvbih0LGUpe3JldHVybiByKHQsLWVbMV0sZVswXSksdH0sdC5leHBvcnRzLmRpcmVjdGlvbj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGEodCxlLG4pLG8odCx0KSx0fX0sZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3QucHVzaChbW2VbMF0sZVsxXV0sbl0pfXZhciByPW4oMjA5KSxvPVswLDBdLGE9WzAsMF0scz1bMCwwXSx1PVswLDBdO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPW51bGwsbD1bXTtlJiYodD10LnNsaWNlKCksdC5wdXNoKHRbMF0pKTtmb3IodmFyIGM9dC5sZW5ndGgsaD0xO2g8YztoKyspe3ZhciBmPXRbaC0xXSxkPXRbaF0scD1oPHQubGVuZ3RoLTE/dFtoKzFdOm51bGw7aWYoci5kaXJlY3Rpb24obyxkLGYpLG58fChuPVswLDBdLHIubm9ybWFsKG4sbykpLDE9PT1oJiZpKGwsbiwxKSxwKXtyLmRpcmVjdGlvbihhLHAsZCk7dmFyIGc9ci5jb21wdXRlTWl0ZXIocyx1LG8sYSwxKTtpKGwsdSxnKX1lbHNlIHIubm9ybWFsKG4sbyksaShsLG4sMSl9aWYodC5sZW5ndGg+MiYmZSl7dmFyIHY9dFtjLTJdLG09dFswXSx5PXRbMV07ci5kaXJlY3Rpb24obyxtLHYpLHIuZGlyZWN0aW9uKGEseSxtKSxyLm5vcm1hbChuLG8pO3ZhciBfPXIuY29tcHV0ZU1pdGVyKHMsdSxvLGEsMSk7bFswXVswXT11LnNsaWNlKCksbFtjLTFdWzBdPXUuc2xpY2UoKSxsWzBdWzFdPV8sbFtjLTFdWzFdPV8sbC5wb3AoKX1yZXR1cm4gbH19LGZ1bmN0aW9uKHQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LGUsbyxhLHMpe2ZvcihvPW98fDAsYT1hfHx0Lmxlbmd0aC0xLHM9c3x8cjthPm87KXtpZihhLW8+NjAwKXt2YXIgdT1hLW8rMSxsPWUtbysxLGM9TWF0aC5sb2codSksaD0uNSpNYXRoLmV4cCgyKmMvMyksZj0uNSpNYXRoLnNxcnQoYypoKih1LWgpL3UpKihsLXUvMjwwPy0xOjEpLGQ9TWF0aC5tYXgobyxNYXRoLmZsb29yKGUtbCpoL3UrZikpLHA9TWF0aC5taW4oYSxNYXRoLmZsb29yKGUrKHUtbCkqaC91K2YpKTtuKHQsZSxkLHAscyl9dmFyIGc9dFtlXSx2PW8sbT1hO2ZvcihpKHQsbyxlKSxzKHRbYV0sZyk+MCYmaSh0LG8sYSk7djxtOyl7Zm9yKGkodCx2LG0pLHYrKyxtLS07cyh0W3ZdLGcpPDA7KXYrKztmb3IoO3ModFttXSxnKT4wOyltLS19MD09PXModFtvXSxnKT9pKHQsbyxtKToobSsrLGkodCxtLGEpKSxtPD1lJiYobz1tKzEpLGU8PW0mJihhPW0tMSl9fWZ1bmN0aW9uIGkodCxlLG4pe3ZhciBpPXRbZV07dFtlXT10W25dLHRbbl09aX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIHQ8ZT8tMTp0PmU/MTowfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaSh0LGUpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgaT8odGhpcy5fbWF4RW50cmllcz1NYXRoLm1heCg0LHR8fDkpLHRoaXMuX21pbkVudHJpZXM9TWF0aC5tYXgoMixNYXRoLmNlaWwoLjQqdGhpcy5fbWF4RW50cmllcykpLGUmJnRoaXMuX2luaXRGb3JtYXQoZSksdm9pZCB0aGlzLmNsZWFyKCkpOm5ldyBpKHQsZSl9ZnVuY3Rpb24gcih0LGUsbil7aWYoIW4pcmV0dXJuIGUuaW5kZXhPZih0KTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKylpZihuKHQsZVtpXSkpcmV0dXJuIGk7cmV0dXJuLTF9ZnVuY3Rpb24gbyh0LGUpe2EodCwwLHQuY2hpbGRyZW4ubGVuZ3RoLGUsdCl9ZnVuY3Rpb24gYSh0LGUsbixpLHIpe3J8fChyPXYobnVsbCkpLHIubWluWD0xLzAsci5taW5ZPTEvMCxyLm1heFg9LSgxLzApLHIubWF4WT0tKDEvMCk7Zm9yKHZhciBvLGE9ZTthPG47YSsrKW89dC5jaGlsZHJlblthXSxzKHIsdC5sZWFmP2kobyk6byk7cmV0dXJuIHJ9ZnVuY3Rpb24gcyh0LGUpe3JldHVybiB0Lm1pblg9TWF0aC5taW4odC5taW5YLGUubWluWCksdC5taW5ZPU1hdGgubWluKHQubWluWSxlLm1pblkpLHQubWF4WD1NYXRoLm1heCh0Lm1heFgsZS5tYXhYKSx0Lm1heFk9TWF0aC5tYXgodC5tYXhZLGUubWF4WSksdH1mdW5jdGlvbiB1KHQsZSl7cmV0dXJuIHQubWluWC1lLm1pblh9ZnVuY3Rpb24gbCh0LGUpe3JldHVybiB0Lm1pblktZS5taW5ZfWZ1bmN0aW9uIGModCl7cmV0dXJuKHQubWF4WC10Lm1pblgpKih0Lm1heFktdC5taW5ZKX1mdW5jdGlvbiBoKHQpe3JldHVybiB0Lm1heFgtdC5taW5YKyh0Lm1heFktdC5taW5ZKX1mdW5jdGlvbiBmKHQsZSl7cmV0dXJuKE1hdGgubWF4KGUubWF4WCx0Lm1heFgpLU1hdGgubWluKGUubWluWCx0Lm1pblgpKSooTWF0aC5tYXgoZS5tYXhZLHQubWF4WSktTWF0aC5taW4oZS5taW5ZLHQubWluWSkpfWZ1bmN0aW9uIGQodCxlKXt2YXIgbj1NYXRoLm1heCh0Lm1pblgsZS5taW5YKSxpPU1hdGgubWF4KHQubWluWSxlLm1pblkpLHI9TWF0aC5taW4odC5tYXhYLGUubWF4WCksbz1NYXRoLm1pbih0Lm1heFksZS5tYXhZKTtyZXR1cm4gTWF0aC5tYXgoMCxyLW4pKk1hdGgubWF4KDAsby1pKX1mdW5jdGlvbiBwKHQsZSl7cmV0dXJuIHQubWluWDw9ZS5taW5YJiZ0Lm1pblk8PWUubWluWSYmZS5tYXhYPD10Lm1heFgmJmUubWF4WTw9dC5tYXhZfWZ1bmN0aW9uIGcodCxlKXtyZXR1cm4gZS5taW5YPD10Lm1heFgmJmUubWluWTw9dC5tYXhZJiZlLm1heFg+PXQubWluWCYmZS5tYXhZPj10Lm1pbll9ZnVuY3Rpb24gdih0KXtyZXR1cm57Y2hpbGRyZW46dCxoZWlnaHQ6MSxsZWFmOiEwLG1pblg6MS8wLG1pblk6MS8wLG1heFg6LSgxLzApLG1heFk6LSgxLzApfX1mdW5jdGlvbiBtKHQsZSxuLGkscil7Zm9yKHZhciBvLGE9W2Usbl07YS5sZW5ndGg7KW49YS5wb3AoKSxlPWEucG9wKCksbi1lPD1pfHwobz1lK01hdGguY2VpbCgobi1lKS9pLzIpKmkseSh0LG8sZSxuLHIpLGEucHVzaChlLG8sbyxuKSl9dC5leHBvcnRzPWk7dmFyIHk9bigyMTEpO2kucHJvdG90eXBlPXthbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxsKHRoaXMuZGF0YSxbXSl9LHNlYXJjaDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGEsbj1bXSxpPXRoaXMudG9CQm94O2lmKCFnKHQsZSkpcmV0dXJuIG47Zm9yKHZhciByLG8sYSxzLHU9W107ZTspe2ZvcihyPTAsbz1lLmNoaWxkcmVuLmxlbmd0aDtyPG87cisrKWE9ZS5jaGlsZHJlbltyXSxzPWUubGVhZj9pKGEpOmEsZyh0LHMpJiYoZS5sZWFmP24ucHVzaChhKTpwKHQscyk/dGhpcy5fYWxsKGEsbik6dS5wdXNoKGEpKTtlPXUucG9wKCl9cmV0dXJuIG59LGNvbGxpZGVzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZGF0YSxuPXRoaXMudG9CQm94O2lmKCFnKHQsZSkpcmV0dXJuITE7Zm9yKHZhciBpLHIsbyxhLHM9W107ZTspe2ZvcihpPTAscj1lLmNoaWxkcmVuLmxlbmd0aDtpPHI7aSsrKWlmKG89ZS5jaGlsZHJlbltpXSxhPWUubGVhZj9uKG8pOm8sZyh0LGEpKXtpZihlLmxlYWZ8fHAodCxhKSlyZXR1cm4hMDtzLnB1c2gobyl9ZT1zLnBvcCgpfXJldHVybiExfSxsb2FkOmZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJuIHRoaXM7aWYodC5sZW5ndGg8dGhpcy5fbWluRW50cmllcyl7Zm9yKHZhciBlPTAsbj10Lmxlbmd0aDtlPG47ZSsrKXRoaXMuaW5zZXJ0KHRbZV0pO3JldHVybiB0aGlzfXZhciBpPXRoaXMuX2J1aWxkKHQuc2xpY2UoKSwwLHQubGVuZ3RoLTEsMCk7aWYodGhpcy5kYXRhLmNoaWxkcmVuLmxlbmd0aClpZih0aGlzLmRhdGEuaGVpZ2h0PT09aS5oZWlnaHQpdGhpcy5fc3BsaXRSb290KHRoaXMuZGF0YSxpKTtlbHNle2lmKHRoaXMuZGF0YS5oZWlnaHQ8aS5oZWlnaHQpe3ZhciByPXRoaXMuZGF0YTt0aGlzLmRhdGE9aSxpPXJ9dGhpcy5faW5zZXJ0KGksdGhpcy5kYXRhLmhlaWdodC1pLmhlaWdodC0xLCEwKX1lbHNlIHRoaXMuZGF0YT1pO3JldHVybiB0aGlzfSxpbnNlcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2luc2VydCh0LHRoaXMuZGF0YS5oZWlnaHQtMSksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhPXYoW10pLHRoaXN9LHJlbW92ZTpmdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiB0aGlzO2Zvcih2YXIgbixpLG8sYSxzPXRoaXMuZGF0YSx1PXRoaXMudG9CQm94KHQpLGw9W10sYz1bXTtzfHxsLmxlbmd0aDspe2lmKHN8fChzPWwucG9wKCksaT1sW2wubGVuZ3RoLTFdLG49Yy5wb3AoKSxhPSEwKSxzLmxlYWYmJihvPXIodCxzLmNoaWxkcmVuLGUpLG8hPT0tMSkpcmV0dXJuIHMuY2hpbGRyZW4uc3BsaWNlKG8sMSksbC5wdXNoKHMpLHRoaXMuX2NvbmRlbnNlKGwpLHRoaXM7YXx8cy5sZWFmfHwhcChzLHUpP2k/KG4rKyxzPWkuY2hpbGRyZW5bbl0sYT0hMSk6cz1udWxsOihsLnB1c2gocyksYy5wdXNoKG4pLG49MCxpPXMscz1zLmNoaWxkcmVuWzBdKX1yZXR1cm4gdGhpc30sdG9CQm94OmZ1bmN0aW9uKHQpe3JldHVybiB0fSxjb21wYXJlTWluWDp1LGNvbXBhcmVNaW5ZOmwsdG9KU09OOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX0sZnJvbUpTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGF0YT10LHRoaXN9LF9hbGw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W107dDspdC5sZWFmP2UucHVzaC5hcHBseShlLHQuY2hpbGRyZW4pOm4ucHVzaC5hcHBseShuLHQuY2hpbGRyZW4pLHQ9bi5wb3AoKTtyZXR1cm4gZX0sX2J1aWxkOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciByLGE9bi1lKzEscz10aGlzLl9tYXhFbnRyaWVzO2lmKGE8PXMpcmV0dXJuIHI9dih0LnNsaWNlKGUsbisxKSksbyhyLHRoaXMudG9CQm94KSxyO2l8fChpPU1hdGguY2VpbChNYXRoLmxvZyhhKS9NYXRoLmxvZyhzKSkscz1NYXRoLmNlaWwoYS9NYXRoLnBvdyhzLGktMSkpKSxyPXYoW10pLHIubGVhZj0hMSxyLmhlaWdodD1pO3ZhciB1LGwsYyxoLGY9TWF0aC5jZWlsKGEvcyksZD1mKk1hdGguY2VpbChNYXRoLnNxcnQocykpO2ZvcihtKHQsZSxuLGQsdGhpcy5jb21wYXJlTWluWCksdT1lO3U8PW47dSs9ZClmb3IoYz1NYXRoLm1pbih1K2QtMSxuKSxtKHQsdSxjLGYsdGhpcy5jb21wYXJlTWluWSksbD11O2w8PWM7bCs9ZiloPU1hdGgubWluKGwrZi0xLGMpLHIuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZCh0LGwsaCxpLTEpKTtyZXR1cm4gbyhyLHRoaXMudG9CQm94KSxyfSxfY2hvb3NlU3VidHJlZTpmdW5jdGlvbih0LGUsbixpKXtmb3IodmFyIHIsbyxhLHMsdSxsLGgsZDs7KXtpZihpLnB1c2goZSksZS5sZWFmfHxpLmxlbmd0aC0xPT09bilicmVhaztmb3IoaD1kPTEvMCxyPTAsbz1lLmNoaWxkcmVuLmxlbmd0aDtyPG87cisrKWE9ZS5jaGlsZHJlbltyXSx1PWMoYSksbD1mKHQsYSktdSxsPGQ/KGQ9bCxoPXU8aD91Omgscz1hKTpsPT09ZCYmdTxoJiYoaD11LHM9YSk7ZT1zfHxlLmNoaWxkcmVuWzBdfXJldHVybiBlfSxfaW5zZXJ0OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLnRvQkJveCxyPW4/dDppKHQpLG89W10sYT10aGlzLl9jaG9vc2VTdWJ0cmVlKHIsdGhpcy5kYXRhLGUsbyk7Zm9yKGEuY2hpbGRyZW4ucHVzaCh0KSxzKGEscik7ZT49MCYmb1tlXS5jaGlsZHJlbi5sZW5ndGg+dGhpcy5fbWF4RW50cmllczspdGhpcy5fc3BsaXQobyxlKSxlLS07dGhpcy5fYWRqdXN0UGFyZW50QkJveGVzKHIsbyxlKX0sX3NwbGl0OmZ1bmN0aW9uKHQsZSl7dmFyIG49dFtlXSxpPW4uY2hpbGRyZW4ubGVuZ3RoLHI9dGhpcy5fbWluRW50cmllczt0aGlzLl9jaG9vc2VTcGxpdEF4aXMobixyLGkpO3ZhciBhPXRoaXMuX2Nob29zZVNwbGl0SW5kZXgobixyLGkpLHM9dihuLmNoaWxkcmVuLnNwbGljZShhLG4uY2hpbGRyZW4ubGVuZ3RoLWEpKTtzLmhlaWdodD1uLmhlaWdodCxzLmxlYWY9bi5sZWFmLG8obix0aGlzLnRvQkJveCksbyhzLHRoaXMudG9CQm94KSxlP3RbZS0xXS5jaGlsZHJlbi5wdXNoKHMpOnRoaXMuX3NwbGl0Um9vdChuLHMpfSxfc3BsaXRSb290OmZ1bmN0aW9uKHQsZSl7dGhpcy5kYXRhPXYoW3QsZV0pLHRoaXMuZGF0YS5oZWlnaHQ9dC5oZWlnaHQrMSx0aGlzLmRhdGEubGVhZj0hMSxvKHRoaXMuZGF0YSx0aGlzLnRvQkJveCl9LF9jaG9vc2VTcGxpdEluZGV4OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxyLG8scyx1LGwsaCxmO2ZvcihsPWg9MS8wLGk9ZTtpPD1uLWU7aSsrKXI9YSh0LDAsaSx0aGlzLnRvQkJveCksbz1hKHQsaSxuLHRoaXMudG9CQm94KSxzPWQocixvKSx1PWMocikrYyhvKSxzPGw/KGw9cyxmPWksaD11PGg/dTpoKTpzPT09bCYmdTxoJiYoaD11LGY9aSk7cmV0dXJuIGZ9LF9jaG9vc2VTcGxpdEF4aXM6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXQubGVhZj90aGlzLmNvbXBhcmVNaW5YOnUscj10LmxlYWY/dGhpcy5jb21wYXJlTWluWTpsLG89dGhpcy5fYWxsRGlzdE1hcmdpbih0LGUsbixpKSxhPXRoaXMuX2FsbERpc3RNYXJnaW4odCxlLG4scik7bzxhJiZ0LmNoaWxkcmVuLnNvcnQoaSl9LF9hbGxEaXN0TWFyZ2luOmZ1bmN0aW9uKHQsZSxuLGkpe3QuY2hpbGRyZW4uc29ydChpKTt2YXIgcixvLHU9dGhpcy50b0JCb3gsbD1hKHQsMCxlLHUpLGM9YSh0LG4tZSxuLHUpLGY9aChsKStoKGMpO2ZvcihyPWU7cjxuLWU7cisrKW89dC5jaGlsZHJlbltyXSxzKGwsdC5sZWFmP3Uobyk6byksZis9aChsKTtmb3Iocj1uLWUtMTtyPj1lO3ItLSlvPXQuY2hpbGRyZW5bcl0scyhjLHQubGVhZj91KG8pOm8pLGYrPWgoYyk7cmV0dXJuIGZ9LF9hZGp1c3RQYXJlbnRCQm94ZXM6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1uO2k+PTA7aS0tKXMoZVtpXSx0KX0sX2NvbmRlbnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXQubGVuZ3RoLTE7bj49MDtuLS0pMD09PXRbbl0uY2hpbGRyZW4ubGVuZ3RoP24+MD8oZT10W24tMV0uY2hpbGRyZW4sZS5zcGxpY2UoZS5pbmRleE9mKHRbbl0pLDEpKTp0aGlzLmNsZWFyKCk6byh0W25dLHRoaXMudG9CQm94KX0sX2luaXRGb3JtYXQ6ZnVuY3Rpb24odCl7dmFyIGU9W1wicmV0dXJuIGFcIixcIiAtIGJcIixcIjtcIl07dGhpcy5jb21wYXJlTWluWD1uZXcgRnVuY3Rpb24oXCJhXCIsXCJiXCIsZS5qb2luKHRbMF0pKSx0aGlzLmNvbXBhcmVNaW5ZPW5ldyBGdW5jdGlvbihcImFcIixcImJcIixlLmpvaW4odFsxXSkpLHRoaXMudG9CQm94PW5ldyBGdW5jdGlvbihcImFcIixcInJldHVybiB7bWluWDogYVwiK3RbMF0rXCIsIG1pblk6IGFcIit0WzFdK1wiLCBtYXhYOiBhXCIrdFsyXStcIiwgbWF4WTogYVwiK3RbM10rXCJ9O1wiKX19fSxmdW5jdGlvbih0LGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBlPTUzODEsbj10Lmxlbmd0aDtuOyllPTMzKmVedC5jaGFyQ29kZUF0KC0tbik7cmV0dXJuIGU+Pj4wfXQuZXhwb3J0cz1ufSxmdW5jdGlvbih0LGUsbil7dmFyIGk9bigyMDgpLHI9bigyMTApLG89Mjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShuLGkpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgZT8odC5CdWZmZXJHZW9tZXRyeS5jYWxsKHRoaXMpLEFycmF5LmlzQXJyYXkobik/aT1pfHx7fTpcIm9iamVjdFwiPT10eXBlb2YgbiYmKGk9bixuPVtdKSxpPWl8fHt9LHRoaXMuYWRkQXR0cmlidXRlKFwicG9zaXRpb25cIixuZXcgdC5CdWZmZXJBdHRyaWJ1dGUodm9pZCAwLDMpKSx0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVOb3JtYWxcIixuZXcgdC5CdWZmZXJBdHRyaWJ1dGUodm9pZCAwLDIpKSx0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVNaXRlclwiLG5ldyB0LkJ1ZmZlckF0dHJpYnV0ZSh2b2lkIDAsMSkpLGkuZGlzdGFuY2VzJiZ0aGlzLmFkZEF0dHJpYnV0ZShcImxpbmVEaXN0YW5jZVwiLG5ldyB0LkJ1ZmZlckF0dHJpYnV0ZSh2b2lkIDAsMSkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuc2V0SW5kZXg/dGhpcy5zZXRJbmRleChuZXcgdC5CdWZmZXJBdHRyaWJ1dGUodm9pZCAwLDEpKTp0aGlzLmFkZEF0dHJpYnV0ZShcImluZGV4XCIsbmV3IHQuQnVmZmVyQXR0cmlidXRlKHZvaWQgMCwxKSksdm9pZCB0aGlzLnVwZGF0ZShuLGkuY2xvc2VkKSk6bmV3IGUobixpKX1yZXR1cm4gaShlLHQuQnVmZmVyR2VvbWV0cnkpLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3Q9dHx8W107dmFyIG49cih0LGUpO2UmJih0PXQuc2xpY2UoKSx0LnB1c2godFswXSksbi5wdXNoKG5bMF0pKTt2YXIgaT10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLGE9dGhpcy5nZXRBdHRyaWJ1dGUoXCJsaW5lTm9ybWFsXCIpLHM9dGhpcy5nZXRBdHRyaWJ1dGUoXCJsaW5lTWl0ZXJcIiksdT10aGlzLmdldEF0dHJpYnV0ZShcImxpbmVEaXN0YW5jZVwiKSxsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuZ2V0SW5kZXg/dGhpcy5nZXRJbmRleCgpOnRoaXMuZ2V0QXR0cmlidXRlKFwiaW5kZXhcIiksYz1NYXRoLm1heCgwLDYqKHQubGVuZ3RoLTEpKTtpZighaS5hcnJheXx8dC5sZW5ndGghPT1pLmFycmF5Lmxlbmd0aC8zL28pe3ZhciBoPXQubGVuZ3RoKm87aS5hcnJheT1uZXcgRmxvYXQzMkFycmF5KDMqaCksYS5hcnJheT1uZXcgRmxvYXQzMkFycmF5KDIqaCkscy5hcnJheT1uZXcgRmxvYXQzMkFycmF5KGgpLGwuYXJyYXk9bmV3IFVpbnQxNkFycmF5KGMpLHUmJih1LmFycmF5PW5ldyBGbG9hdDMyQXJyYXkoaCkpfXZvaWQgMCE9PWkuY291bnQmJihpLmNvdW50PWgpLGkubmVlZHNVcGRhdGU9ITAsdm9pZCAwIT09YS5jb3VudCYmKGEuY291bnQ9aCksYS5uZWVkc1VwZGF0ZT0hMCx2b2lkIDAhPT1zLmNvdW50JiYocy5jb3VudD1oKSxzLm5lZWRzVXBkYXRlPSEwLHZvaWQgMCE9PWwuY291bnQmJihsLmNvdW50PWMpLGwubmVlZHNVcGRhdGU9ITAsdSYmKHZvaWQgMCE9PXUuY291bnQmJih1LmNvdW50PWgpLHUubmVlZHNVcGRhdGU9ITApO3ZhciBmPTAsZD0wLHA9MCxnPWwuYXJyYXk7dC5mb3JFYWNoKGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1mO2lmKGdbZCsrXT1yKzAsZ1tkKytdPXIrMSxnW2QrK109cisyLGdbZCsrXT1yKzIsZ1tkKytdPXIrMSxnW2QrK109ciszLGkuc2V0WFlaKGYrKyx0WzBdLHRbMV0sMCksaS5zZXRYWVooZisrLHRbMF0sdFsxXSwwKSx1KXt2YXIgbz1lLyhuLmxlbmd0aC0xKTt1LnNldFgocCsrLG8pLHUuc2V0WChwKyssbyl9fSk7dmFyIHY9MCxtPTA7bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0sbj10WzFdO2Euc2V0WFkodisrLGVbMF0sZVsxXSksYS5zZXRYWSh2KyssZVswXSxlWzFdKSxzLnNldFgobSsrLC1uKSxzLnNldFgobSsrLG4pfSl9LGV9fSxmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBXb3JrZXIobi5wK1wiNjk5ZjAyMDU3OWYwYzM1MTJhMmQud29ya2VyLmpzXCIpfX0sZnVuY3Rpb24odCxlKXt9XSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmdyLm1pbi5qcy5tYXBcbi8vIGFsaU5hdmlNbmdcbmNsYXNzIGFsaU5hdmlNbmcge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKXtcblx0XHRjb25zdCB7ZGF0YVNvdXJjZSxtYXBWaWV3LHN0eWxlR2VuZXJhdG9yLG5hdmlMYXllcmlkfSA9IG9wdGlvbnNcblx0XHRpZighZGF0YVNvdXJjZSB8fCAhbWFwVmlldyB8fCAhc3R5bGVHZW5lcmF0b3IgfHwgIW5hdmlMYXllcmlkKXtcblx0XHRcdHRocm93ICBuZXcgRXJyb3IoXCJkYXRhU291cmNlIHx8IG1hcHZpZXcgfHwgbmF2aUxheWVyIHx8IHN0eWxlR2VuZXJhdG9yIGNhbiBub3QgaXMgZW1wdHlcIilcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHR0aGlzLm9wdGlvbnMgPSB7XG5cdFx0XHRzdGFydGZsb29yOlwiXCIsXG5cdFx0XHRlbmRmbG9vcjpcIlwiLFxuXHRcdFx0c3RhcnRjb29yZDp7XG5cdFx0XHRcdHg6XCJcIixcblx0XHRcdFx0eTpcIlwiXG5cdFx0XHR9LFxuXHRcdFx0ZW5kY29vcmQ6e1xuXHRcdFx0XHR4OlwiXCIsXG5cdFx0XHRcdHk6XCJcIlxuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlXG5cdFx0dGhpcy5tYXBWaWV3ID0gbWFwVmlld1xuXHRcdHRoaXMuc3R5bGVHZW5lcmF0b3IgPSBzdHlsZUdlbmVyYXRvclxuXHRcdHRoaXMubmF2aWdhdGUgPSBuZXcgTkdSLm5hdmkuTmF2aWdhdGVNYW5hZ2VyKGRhdGFTb3VyY2UpXG5cdFx0dGhpcy5uYXZpTGF5ZXIgPSBcIlwiXG5cdFx0dGhpcy5keW5hbWljTmF2aU1hbmFnZXIgPSBcIlwiXG5cdFx0dGhpcy5uYXZpTGF5ZXJpZCA9IG5hdmlMYXllcmlkXG5cdFx0dGhpcy5keU5hdkluZm8gPSB7fSxcblx0XHR0aGlzLmlzSGFzTmF2aWxpbmUgPSBmYWxzZSxcblx0XHR0aGlzLm9mZnNldCA9IHRoaXMubWFwVmlldy5jb29yZGluYXRlU3lzdGVtLmdldE9mZnNldCgpO1xuXHR9XG5cdHNldFN0YXJ0UG9zaXRpb24oZmxvb2lkLGNvb3JkKXtcblx0XHR0aGlzLm9wdGlvbnMuc3RhcnRmbG9vciA9IGZsb29pZFxuXHRcdHRoaXMub3B0aW9ucy5zdGFydGNvb3JkID0gY29vcmRcblx0fVxuXHRzZXRFbmRQb3NpdGlvbihmbG9vcmlkLGNvb3JkKXtcblx0XHR0aGlzLm9wdGlvbnMuZW5kZmxvb3IgPSBmbG9vcmlkXG5cdFx0dGhpcy5vcHRpb25zLmVuZGNvb3JkID0gY29vcmRcblx0fVxuXHRhc3luYyBpbml0TmF2aShjdXJyZW50Zmxvb3Ipe1xuXHRcdGlmKG1hcFZpZXcuZ2V0TGF5ZXIoXCJuYXZpXCIpKXtcblx0XHRcdG1hcFZpZXcucmVtb3ZlTGF5ZXIodGhpcy5uYXZpTGF5ZXIpXG5cdFx0XHR0aGlzLm5hdmlMYXllciA9IFwiXCJcblx0XHR9XG5cdFx0aWYoIXRoaXMuc3R5bGVHZW5lcmF0b3Ipe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwic3R5bGVHZW5lcmF0b3IgY2FuIG5vdCBpcyBlbXB0eSAsZnJvbSBOR1Iuc3R5bGUuSlNPTlN0eWxlR2VuZXJhdG9yKHN0eWxlKVwiKVxuXHRcdFx0cmV0dXJuIFxuXHRcdH1cblx0XHRsZXQgdGhhdCA9IHRoaXNcblx0ICBhd2FpdFx0dGhpcy5uYXZpZ2F0ZS5uYXZpZ2F0ZSh7XG5cdFx0XHQnZnJvbV94JzogdGhhdC5vcHRpb25zLnN0YXJ0Y29vcmQueCxcblx0XHRcdCdmcm9tX3knOiB0aGF0Lm9wdGlvbnMuc3RhcnRjb29yZC55LFxuXHRcdFx0J2Zyb21fcGxhbmFyX2dyYXBoJzogdGhhdC5vcHRpb25zLnN0YXJ0Zmxvb3IsXG5cdFx0XHQndG9feCc6dGhhdC5vcHRpb25zLmVuZGNvb3JkLngsXG5cdFx0XHQndG9feSc6dGhhdC5vcHRpb25zLmVuZGNvb3JkLnksXG5cdFx0XHQndG9fcGxhbmFyX2dyYXBoJzogdGhhdC5vcHRpb25zLmVuZGZsb29yXG5cdFx0fSkudGhlbigocmVzKT0+e1xuXHRcdFx0dGhpcy5uYXZpTGF5ZXIgPSBuZXcgTkdSLmxheWVyLkZlYXR1cmVMYXllcih0aGlzLm5hdmlMYXllcmlkLHRoaXMuc3R5bGVHZW5lcmF0b3IpXG5cdFx0XHR0aGlzLm5hdmlMYXllci5jb29yZGluYXRlU3lzdGVtID0gbWFwVmlldy5jb29yZGluYXRlU3lzdGVtXG5cdFx0XHR0aGlzLm1hcFZpZXcuYWRkTGF5ZXIodGhpcy5uYXZpTGF5ZXIpXG5cdFx0XHR0aGlzLm5hdmlMYXllci5mZWF0dXJlcyA9IHRoaXMubmF2aWdhdGUuZ2V0TmF2aWdhdGVCeVBsYW5hckdyYXBoKGN1cnJlbnRmbG9vcilcblx0XHRcdGxldCBhbmltYXRpb24gPSBuZXcgTkdSLmhlbHBlci50dWJlSGVscGVyLlR1YmVPZmZzZXRBbmltYXRpb24odGhpcy5tYXBWaWV3LCB0aGlzLm5hdmlMYXllciwgeyBkdXJhdGlvbjogNTAwIH0pO1xuXHRcdFx0YW5pbWF0aW9uLnN0YXJ0KCk7XG5cdFx0XHR0aGlzLmlzSGFzTmF2aWxpbmUgPSB0cnVlXG5cdFx0fSkuY2F0Y2goKGUpPT57XG5cdFx0XHRjb25zb2xlLmVycm9yKFwi5a+86Iiq57q/5riy5p+T5aSx6LSlXCIsZSlcblx0XHR9KVxuXHR9XG5cdGVuZE5hdmlnYXRlKCl7XG5cdFx0aWYodGhpcy5tYXBWaWV3LmdldExheWVyKHRoaXMubmF2aUxheWVyaWQpKXtcblx0XHRcdHRoaXMubWFwVmlldy5yZW1vdmVMYXllcih0aGlzLm5hdmlMYXllcilcblx0XHRcdHRoaXMubmF2aUxheWVyID0gXCJcIlxuXHRcdFx0dGhpcy5pc0hhc05hdmlsaW5lID0gZmFsc2Vcblx0XHR9XG5cdH1cblx0ZHluYW1pY05hdmkob3B0aW9ucyl7XG5cdFx0aWYoIXRoaXMuaXNIYXNOYXZpbGluZSl7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0Y29uc3Qge2N1cnJlbnRmbG9vcixjb29yZCxtYXhSb2FkQXR0YWNoRGlzdGFuY2UsbWF4RGlzdGFuY2VSZUluaXROYXZpLGxvY01hcmtlcixsb2NNYXJrZXJJZCxuZWVkQXVkaW8sYXV0b01vdmV9ID1vcHRpb25zXG5cdFx0dGhpcy5keW5hbWljTmF2aU1hbmFnZXIgPSBuZXcgTkdSLm5hdmkuRHluYW1pY05hdmlnYXRpb24odGhpcy5tYXBWaWV3LCB0aGlzLm5hdmlnYXRlLHtuZWVkQXVkaW86IG5lZWRBdWRpbyxhdXRvcGxheTpuZWVkQXVkaW8sZW5kVGhyZXNob2xkOm5lZWRBdWRpb30sIHthdXRvTW92ZX0pO1xuXHRcdHRoaXMuZHluYW1pY05hdmlNYW5hZ2VyLmZlYXR1cmVDb2xsZWN0aW9uID0gdGhpcy5uYXZpZ2F0ZS5nZXRSYXdGQygpO1xuXHRcdHRoaXMuZHlOYXZJbmZvLmNsb3Nlc3RQb2ludCA9IHRoaXMubmF2aWdhdGUuZ2V0Q2xvc2VzdFBvaW50cyhjdXJyZW50Zmxvb3IsIGNvb3JkLngsIGNvb3JkLnkpWzBdXG5cdFx0dGhpcy5keU5hdkluZm8uZGlzdGFuY2VUb0VuZCA9IHRoaXMuZHluYW1pY05hdmlNYW5hZ2VyLmRpc3RhbmNlVG9FbmQodGhpcy5keU5hdkluZm8uY2xvc2VzdFBvaW50LngsdGhpcy5keU5hdkluZm8uY2xvc2VzdFBvaW50LnksY3VycmVudGZsb29yLHRydWUsZmFsc2UpXG5cdFx0dGhpcy5keU5hdkluZm8udGltZVRvRW5kID0gdGhpcy5keU5hdkluZm8uZGlzdGFuY2VUb0VuZFxuXHRcdHRoaXMuZHlOYXZJbmZvLm1lc3NhZ2VJbkxpc3QgPSB0aGlzLmR5bmFtaWNOYXZpTWFuYWdlci5nZXRNZXNzYWdlSW5MaXN0KClcblx0XHR0aGlzLmR5TmF2SW5mby5tZXNzYWdlSW5OYXZpID0gdGhpcy5keW5hbWljTmF2aU1hbmFnZXIuZ2V0TWVzc2FnZUluTmF2aShuZWVkQXVkaW8pXG5cdFx0Y29uc3QgY2xvc2VzdERpc3RhbmNlID0gTkdSLm5hdmkuTmF2aVV0aWxzLmdldERpc3RhbmNlKGNvb3JkLCB0aGlzLmR5TmF2SW5mby5jbG9zZXN0UG9pbnQpO1xuXHRcdGlmKGNsb3Nlc3REaXN0YW5jZSA8IG1heFJvYWRBdHRhY2hEaXN0YW5jZSl7XG5cdFx0XHR0aGlzLmR5TmF2SW5mby5jbG9zZXN0RGlzdGFuY2UgPSBcImF0dGFjaFwiXG5cdFx0XHR0aGlzLm1hcFZpZXcuc2NlbmVNYW5hZ2VyLnNldFBvc2l0aW9uKGxvY01hcmtlciwgXCJpZFwiLGxvY01hcmtlcklkLCB0aGlzLmR5TmF2SW5mby5jbG9zZXN0UG9pbnQueCwgdGhpcy5keU5hdkluZm8uY2xvc2VzdFBvaW50LnksIDAuMilcblx0XHRcdGlmKGF1dG9Nb3ZlKXtcblx0XHRcdFx0dGhpcy5keW5hbWljTmF2aU1hbmFnZXIuZmluZE5lYXJlc3RTZWdtZW50KHRoaXMuZHlOYXZJbmZvLmNsb3Nlc3RQb2ludC54LCB0aGlzLmR5TmF2SW5mby5jbG9zZXN0UG9pbnQueSwgY3VycmVudGZsb29yLCB0cnVlLCB0cnVlKVxuXHRcdFx0XHR0aGlzLmR5bmFtaWNOYXZpTWFuYWdlci5tb3ZlVG9TZWdtZW50KClcblx0XHRcdFx0Ly8gbWFwVmlldy5hY3RpdmVDb250cm9sLm1vdmVUb1BvaW50KGNvb3JkLnggKyB0aGlzLm9mZnNldFswXSxjb29yZC55ICsgdGhpcy5vZmZzZXRbMV0pXG5cdFx0XHR9XG5cblx0XHR9ZWxzZSBpZihjbG9zZXN0RGlzdGFuY2UgPCBtYXhEaXN0YW5jZVJlSW5pdE5hdmkpe1xuXHRcdFx0dGhpcy5keU5hdkluZm8uY2xvc2VzdERpc3RhbmNlID0gXCJkZXZpYXRlaW5nXCJcblx0XHRcdHRoaXMubWFwVmlldy5zY2VuZU1hbmFnZXIuc2V0UG9zaXRpb24obG9jTWFya2VyLCBcImlkXCIsbG9jTWFya2VySWQsIGNvb3JkLngsIGNvb3JkLnksIDAuMilcblxuXHRcdH1lbHNlIHtcblx0XHRcdHRoaXMuZHlOYXZJbmZvLmNsb3Nlc3REaXN0YW5jZSA9IFwiZGV2aWF0ZWRcIlxuXHRcdFx0dGhpcy5lbmROYXZpZ2F0ZSgpXG5cdFx0XHR0aGlzLnNldFN0YXJ0UG9zaXRpb24odGhpcy5tYXBWaWV3LmN1cnJlbnRmbG9vcixjb29yZClcblx0XHRcdHRoaXMuaW5pdE5hdmkodGhpcy5tYXBWaWV3LmN1cnJlbnRmbG9vcilcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZHlOYXZJbmZvIFxuXHR9XG59XG5OR1IubmF2aS5hbGlOYXZpTW5nID0gYWxpTmF2aU1uZ1xuXG5jbGFzcyBBdWRpb1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3QgZG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvUHJvdmlkZXInKTtcbiAgICAgICAgZG9tICYmIGRvbS5yZW1vdmUoKTtcblx0XHR0aGlzLl9zdGF0dXMgPSAnb3Blbic7XG4gICAgICAgIHRoaXMuX2F1ZGlvU3RhY2sgPSBbXTtcblx0XHR0aGlzLl9hdWRpb0RvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cdFx0dGhpcy5fYXVkaW9Eb20uc2V0QXR0cmlidXRlKFwiaWRcIixcImF1ZGlvUHJvdmlkZXJcIilcbiAgICAgICAgdGhpcy5fYXVkaW9Eb20ub25wbGF5aW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hdWRpb0RvbS5vbmVuZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBsYXlNZXNzYWdlKHRoaXMuX2F1ZGlvU3RhY2suc2hpZnQoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9hdWRpb0RvbSk7XG4gICAgfVxuXG4gICAgcGxheU1lc3NhZ2UobXNnLCBpc0ZvcmNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbXNnICE9XCJzdHJpbmdcIiB8fCB0aGlzLl9zdGF0dXMgPT09ICdjbG9zZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9pc1BsYXlpbmcpIHtcbiAgICAgICAgICAgIGlzRm9yY2UgJiYgdGhpcy5fYXVkaW9TdGFjay5wdXNoKG1zZyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hdWRpb0RvbS5zcmMgPSBgaHR0cHM6Ly9hcGlleHRlcm5hbC5pcGFsbWFwLmNvbToxMDAxMC9zcGVlY2g/dGV4PSR7bXNnfWA7XG4gICAgICAgIHRoaXMuX2F1ZGlvRG9tLnBsYXkoKTtcblx0XHRjb25zb2xlLmxvZyhcInNmc2ZcIix0aGlzLl9hdWRpb0RvbSApXG4gICAgICAgIHRoaXMuX2lzUGxheWluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9ICdjbG9zZSc7XG4gICAgICAgIHRoaXMuX2F1ZGlvRG9tLm11dGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9zdGF0dXMgPSAnb3Blbic7XG4gICAgICAgIHRoaXMuX2F1ZGlvRG9tLm11dGVkID0gZmFsc2U7XG4gICAgfVxufVxuXG5OR1IuQXVkaW9Qcm92aWRlciA9IEF1ZGlvUHJvdmlkZXJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzdGF0aWMvanMvbmdyLm1pbi5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFNQTtBQVNBOzs7Ozs7QUFRQTs7Ozs7O0FBa0JBOzs7O0FBd0JBO0FBRUE7QUFDQTtBQThGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n')}});